                                NBER WORKING PAPER SERIES




                                 MEDIAN STABLE MATCHING

                                         Michael Schwarz
                                         M. Bumin Yenmez

                                        Working Paper 14689
                                http://www.nber.org/papers/w14689


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     January 2009




We thank Zoe Abrams, Arpita Ghosh, Fuhito Kojima, Mohammad Mahdian, Michael Ostrovsky for
helpful suggestions and Federico Echenique for detailed comments on an earlier draft. The views
expressed herein are those of the author(s) and do not necessarily reflect the views of the National
Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2009 by Michael Schwarz and M. Bumin Yenmez. All rights reserved. Short sections of text, not
to exceed two paragraphs, may be quoted without explicit permission provided that full credit, including
© notice, is given to the source.
Median Stable Matching
Michael Schwarz and M. Bumin Yenmez
NBER Working Paper No. 14689
January 2009
JEL No. C78,J01

                                         ABSTRACT

We define the median stable matching for two-sided matching markets with side payments and prove
constructively that it exists.


Michael Schwarz
Yahoo! Research
2397 Shattuck Ave
Berkeley, CA 94704
and NBER
mschwarz@yahoo-inc.com

M. Bumin Yenmez
Stanford Graduate School of Business
byenmez@stanford.edu
                            1.    Introduction

    We study one-to-one matching problems with endogenous side transfers
as in Shapley and Shubik (1971), Crawford and Knoer (1981) and Kelso and
Crawford (1982).1 In this problem, there are two sides of the market, firms
and workers. Each agent on one side of the market has cardinal preferences
over the agents on the other side. A matching in our setup not only assigns
who is going to be matched with whom but also the monetary transfers to
be made.
    An intuitive solution concept in this setup is the core, which coincides with
the so-called stable matchings (Shapley and Shubik (1971))- matchings that
give non-negative utilities to all agents and that do not have any blocking
pairs who could be better off through matching with each other than the
current one.
    There are several classic results about the core of matching markets both
with transfers (for example, the labor market where wages are set endoge-
nously) and without transfers (such as the marriage market). The core is
known to be non-empty. Moreover, there are two matchings in the core
which are the best outcome for one side of the market and also the worst for
the other (Shapley and Shubik (1971) and Gale and Shapley (1962)). These
matchings are called the firm-optimal stable matching and the worker-optimal
stable matching.
    The two extreme matchings of the core are often viewed both as a metaphor
of what happens in a market and a recipe for market design (Roth (2008)).
However, choosing an outcome that is most favorable for one side seems some-
what arbitrary both as a modeling choice and as a market design choice. This
motivated research aimed at identifying a matching in the core that repre-
sents a fair compromise between the two sides of the market. For one-to-one
matching markets without wages, such a matching is proposed in Teo and
  1
    Crawford and Knoer (1981) and Kelso and Crawford (1982) study more general match-
ing models with transfers.


                                         2
Sethuraman (1998).
    Teo and Sethuraman established a remarkable result for one-to-one match-
ing markets: There exists a stable matching µ such that for any agent a, µ
gives the median match of all matches in the core for a. This result was
later extended to one-to-many matching markets in Sethuraman, Teo, and
Qian (2006)- both papers use linear programming tools. Fleiner (2003) and
Klaus and Klijn (2006) show the existence of such a stable matching inde-
pendently using only the lattice structure of the core.2 The same technique
is used in this paper. The results in the aforementioned literature are lim-
ited to markets where agents form matches without a possibility of making
transfers.
    When side transfers are endogenous, we define an assignment (see Defin-
ition 3) which we call the median stable matching (borrowing the term from
the literature on matching without side transfers). To define it, consider
all the stable matchings in the core when the side transfers are discretized.
For any agent, order all the possible matches (with possible multiplicities)
in these stable matchings and take the median one. Then the median stable
matching is such that all agents are matched to their median matches. Typ-
ically, there are multiple matchings in the core that give the median match
to any worker. However, it is not obvious that there exists a stable matching
that gives the median matches to all the workers at the same time. Theorem
1 establishes the existence. Moreover, the same stable matching also gives
the median matches to all the firms. In some sense the median stable match-
ing is a compromise solution for matching markets in which no side of the
market can dictate the outcome.
    It is harder to define the median stable matching when transfers are
continuous as generically there will be a continuum of stable matchings.
However, we show that there is an appropriate Lebesgue measure3 which
   2
     The lattice structure of stable matchings was first presented in Knuth (1976) which
attributes it to John Conway.
   3
     Lebesgue measure can be used to measure lower dimensional sets in higher dimensions,


                                           3
can be used to define the median stable matching. Using this measure we
can find the median utility levels for all agents and then show that they arise
as a core outcome (Theorem 2). Furthermore, under some conditions we also
show that the median utility levels are just the average of the utility levels in
the firm-optimal stable matching and the worker-optimal stable matching.
    Having defined the median stable matching both in the discrete case and
the continuous case, we show that the median stable matching in the discrete
case converges to the one in the continuous case (Theorem 3). This result
shows that our definitions are consistent in some sense.
    We also show that the discrete core converges to the continuous core (The-
orem 4) using similar techniques. Although this result may feel intuitively
obvious, it has not been established in the previous literature. In fact, most
of the papers only consider the discrete case or the continuous case. Two
exceptions are Crawford and Knoer (1981) and Kelso and Crawford (1982).
However, both papers first establish the non-emptiness of the discrete core
using a deferred-acceptance algorithm and then show the non-emptiness of
the continuous core using the result in the discrete case. None of these pa-
pers shows convergence of the core or convergence of the two extreme stable
matchings.
    The nature of the median stable matching in a market with side transfers
is very different from that of the market without side transfers. First note
that in a market without side transfers, the number of possible matchings
is finite in contrast to the matching with continuous side transfers where
there is a continuum of stable matchings. Second in a market without side
transfers firms may get matched to different workers in two stable matchings
whereas in a market with side transfers generically agents get matched to the
same agents but at different wages. Therefore, the median stable matching
in the case without side transfers is about the median partners whereas the
median stable matching with side transfers is about the median wages.
see section 5 for details.



                                       4
    It is worth pointing out that the choice between worker-optimal and
firm-optimal stable matchings can be a contentious issue when a central-
ized matching mechanism is used in practice. The best-known centralized
matching market without endogenous side transfers is the national residence
matching program (NRMP). Hospitals have fixed wages for residents which
cannot be adjusted for different candidates. Every year NRMP matches tens
of thousands of medical residents to hospitals in the USA. NRMP used to
implement an algorithm based on the hospital-optimal matching until 1998
after which an algorithm based on the student-optimal one has been imple-
mented.4
    NRMP takes wages as exogenously given and then find a stable matching.
Even if the student-optimal matching is used, it is not clear that students
benefit compared to a stable matching with flexible wages. Antitrust charges
were filed against the NRMP arguing that bilateral negotiations would benefit
students.5 A paper by Bulow and Levin (2006) gives some merit to the
argument by showing that even if we use the student-optimal outcome the
wages might be compressed.6
    It is understood that not endogenizing wages in a centralized matching
mechanism may lead to inefficiency. However, as far as we know, there are
no centralized matching markets that allow for endogenous side transfers. In
a recent paper Crawford (2008) proposes such a centralized procedure for
NRMP. His proposal considers implementing both of the extreme matchings
of the core but not the other ones. The median stable matching described
in this paper may be considered as a plausible alternative that treats both
sides of the market in a symmetric way.
    The rest of the paper is organized as follows. In section 2, we introduce
the matching problem with side transfers and define the notions of feasibility,
   4
      For details of the history of the NRMP see Roth (2008).
   5
      The lawsuit was dismissed on the grounds of antitrust exemption.
    6
      Niederle (2007) and Kojima (2007) provide counterarguments to the plaintiff’s claim
if other features of the NRMP are also taken into account.



                                           5
optimality and stability. We give an example in section 3 to demonstrate
some of our results. In section 4, we restrict transfers to be discrete and
define the median stable matching and show that it exists. In section 5, we
let the transfers be continuous, define the median stable utility imputation,
show that it exists and provide some conditions under which it is just the
average of the firm-optimal and the worker-optimal utility imputations. In
section 6, we prove that the median stable imputation in the discrete case
converges to that of the continuous case as the bid increment goes to zero.
We provide the proofs of Theorems 2, 3 and 4 in the Appendices.


                                   2.    Model

    There are two disjoint sets of agents, the set of firms, F = {f1 , f2 , . . . , fm }
and the set of workers, W = {w1 , w2 , . . . , wn } where the number of firms m
can be different from the number of workers n. Let A = F ∪W be the set of all
agents. Each firm f ∈ F has a quasi-linear utility over (w, t) ∈ W ∪ {f } × R
which is uf (w) + t. Similarly, each worker w ∈ W has a quasi-linear utility
over (f, t) ∈ F ∪ {w} × R which is uw (f ) + t. Without loss of generality,
assume that for each agent a ∈ A the utility of being unmatched is zero,
ua (a) = 0. A utility function profile U is a list of utility functions of all
the agents, U = (uf1 , . . . , ufm , uw1 , . . . , uwn ). A matching problem with side
transfers is a triple hF, W, U i.

    Definition 1: A (discrete) feasible matching c = hµ, ti consists of a
matching function µ and a monetary transfer function t satisfying
the following conditions:

   1. µ : A → A is a bijection such that µ(f ) ∈ W ∪ {f } for all f ∈ F and
      µ(w) ∈ F ∪ {w} for all w ∈ W

   2. µ2 (a) = a for all a ∈ A
                                    P              P
   3. t : A → R(∆Z) such that           t(fi ) +       t(wj ) ≤ 0.

                                           6
     Conditions 1 and 2 are about the feasibility of the matching function µ.
Condition 1 states that each agent a is either single or matched to an agent
a0 from the other side of the market and condition 2 guarantees that if it is
the latter case then agent a0 is also matched to agent a. On the other hand,
condition 3 is about the feasibility of the transfer function. It basically states
that the sum of the transfers for all of the agents should not be positive. In
the discrete case, the transfers are restricted to be integer multiples of some
positive real number ∆.
     A feasible matching hµ, ti is called optimal if the sum of the utilities
of all agents are maximized at hµ, ti. For an optimal matching condition 3
always binds. If hµ, ti is an optimal matching then hµ, t0 i such that t0 (fi )+
                                                                       P
P 0
    t (wj ) = 0 is also an optimal matching. In this case, µ is also called
an optimal matching without specifying any transfer function t for which
condition 3 binds. Usually there is a unique optimal matching µ, otherwise
a small adjustment in the utilities gives uniqueness.
     Given a matching c = hµ, ti, we let v(a | c) ≡ ua (µ(a)) + t(a) denote
the utility imputation of agent a ∈ A from the matching. We also use
v(a | c(a)) to denote the same utility imputation where c(a) = hµ(a), t(a)i
is the match of agent a from matching c. If the matching is clear from the
context then we use v(a) instead, without specifying the matching.

     Definition 2: A (discrete) feasible matching hµ, ti is (discrete) stable
if

     1. v(a) ≥ 0 for all a ∈ A

     2. For all (f, w) ∈ F × W there does not exist any x ∈ R(∆Z) such that
        v(f ) ≤ uf (w) − x and v(w) ≤ uw (f ) + x with one of these inequalities
        being strict.

    Condition 1 is about the individual rationality of the matching. It states
that no agent should be better off by staying alone and receiving zero payment
in a stable matching. Whereas condition 2 guarantees that no firm-worker

                                        7
pair can block the matching. If it fails for a pair (f, w) and a transfer x
then these agents can both be made as well off and one of them better off
by matching together and the firm paying the worker x. For the continuous
case condition 2 is equivalent to:

(1)          v(f ) + v(w) ≥ uf (w) + uw (f )f or all(f, w) ∈ F × W.


                             3.    An Example

    In this section we give an example to illustrate and motivate our results.
    There are two firms f1 and f2 and two workers w1 and w2 . The agents
have the following utility functions: uf1 (w1 ) = 2, uf1 (w2 ) = 1; uf2 (w1 ) =
2, uf2 (w2 ) = 0; uw1 (f1 ) = 2, uw1 (f2 ) = 0 and uw2 (f1 ) = 1, uw2 (f2 ) = 3. We
can write the production function φ(f, w) ≡ uf (w) + uw (f ) related to
these utility functions as:

                                  φ(·, ·) w1 w2
                                   f1       4   2
                                   f2       2   3

   Let us first characterize the continuous core.7 There is a unique optimal
matching which maximizes the sum of utilities of the agents in which f1
gets matched to w1 and f2 gets matched to w2 . Note that matchings in the
core must be optimal as the utilities of all agents can be improved with an
appropriate transfer function and the optimal matching.
   The sum of the transfers for a matched pair must be zero. This is easy
to see. By stability the sum of the transfers for a matched pair is non-
negative. On the other hand, by feasibility the sum of all transfers must be
non-positive. Hence the sum of the transfers must be zero for a matched
  7
    Matchings that are in the “core” and stable matchings coincide. See Shapley and
Shubik (1971) when transfers are continuous and Crawford and Knoer (1981) for the
discrete one. In this paper, we use these two concepts interchangeably.


                                        8
pair. Therefore, individual rationality constraints can be written as:

(2)                   4 ≥ v(f1 ) ≥ 0 and 3 ≥ v(f2 ) ≥ 0.

   There are two possible blocking pairs (f1 , w2 ) and (f2 , w1 ). Non-blocking
conditions for these pairs require:

(3)               v(f1 ) + v(w2 ) ≥ 2 and v(f2 ) + v(w1 ) ≥ 2.

Since the sum of the transfers must add up to zero for a matched pair in a
stable matching we have v(w2 ) = 3 − v(f2 ) and v(w1 ) = 4 − v(f1 ). Therefore,
(3) can be rewritten as:

(4)             v(f1 ) − v(f2 ) ≥ −1 and v(f2 ) − v(f1 ) ≥ −2.

    [INSERT FIGURE 1 HERE]
    Hence, the continuous core is characterized by the inequalities given in
(2) and (4) which is shown in Figure 1. The median utility imputation in
this example is constructed as follows. First we find the vertical line which
divides the core into two sets of equal area which is v(f1 ) = 2. Then we find
the horizontal line which divides the core into two sets of equal area which
is v(f2 ) = 3/2. The intersection of these two lines is (2, 3/2) which gives
the median utility levels for the firms. The corresponding median utility
levels for w1 and w2 are 2 and 3/2, respectively. Hence the median utility
imputation is (2, 3/2, 2, 3/2).
    Let us characterize the discrete core when ∆ = 3/4 (denote it by Core(3/4)).
Note that for this choice of ∆ no agent is indifferent between two different
feasible matchings.
    We claim that any stable matching is optimal. Assume otherwise. Then
f1 must be matched to w2 and f2 must be matched to w1 . The social surplus
is then four. Since the optimal social surplus is seven, we can give everyone


                                       9
more than what they are getting in a feasible way in an optimal matching.
We get a contradiction.
    Now, consider the Cartesian product of feasible utility imputations for
firms f1 and f2 in the optimal matching. First note that all the points of the
Cartesian product inside the continuous core are still in the core since the
discrete core restricts the feasible blocking pairs. Other than these nineteen
points which are denoted by nodes, there are six more points which satisfy
the individual rationality constraints (denoted by crosses in the figure). One
easily verifies that none of these six points are stable.
    Hence, there are nineteen points in Core(3/4). By calculating the tenth
utility level for each agent we get the median stable utility imputation which
is (2, 3/2, 2, 3/2) that coincides with the continuous median utility imputa-
tion. Note that there are multiple points in the core that give median utility
to f1 and there are many such points for f2 . It is not obvious that there exists
a stable matching that gives median utilities to both f1 and f2 . Moreover,
the same stable matching also gives median utilities to the workers. This
example illustrates the claims of Theorems 1 and 2.


                           4.    discrete case

    In this section we suppose that the transfer function can only take integer
multiples of a positive real number ∆. Formally, for any a ∈ A, t(a) ∈ ∆Z.
    Given a matching problem hF, W, U i with ∆, we know that the set of
stable matchings is finite and non-empty since there exist a worker-optimal
stable matching and a firm-optimal stable matching. For a given agent a
we want to be able to rank any two different choices of a without using any
tie-breaking rules. Hence, we make the following assumption:

   Assumption 1: Let u and ∆ be such that if c and c0 are two matchings
such that c(a) 6= c0 (a) for some agent a ∈ A then v(a | c) 6= v(a | c0 ).

   This assumption is satisfied for example if ua is one-to-one and ∆ is not an

                                       10
integer fraction of ua (µ(a)) − ua (µ0 (a)) where µ(a) and µ0 (a) are two different
partners of a (either a or an agent from the other side of the market) for all
agents a.
    Let {c1 , c2 , . . . , ck } be the set of all stable matchings. For every agent
a consider the set {c1 (a), c2 (a), . . . , ck (a)} with possible multiplicities and
order them such that agent a’s utility is non-increasing and denote the i-th
element in this non-increasing sequence by ci (a). Equivalently,

              {c1 (a), c2 (a), . . . , ck (a)} = {c1 (a), c2 (a), . . . , ck (a)}

and v(a | c1 (a)) ≥ v(a | c2 (a)) ≥ . . . ≥ v(a | ck (a)).
   For any i ∈ {1, 2, . . . , k} consider the following vector:

             xi ≡ (ci (f1 ), . . . , ci (fm ), ck+1−i (w1 ), . . . , ck+1−i (wn )).

   By definition, xi takes the i-th best match for the firms and the i-th worst
match for the workers. We next show that xi is a stable matching. To be
more explicit, we construct a stable matching using all the stable matchings
and then show that this coincides with xi .

   Theorem 1: For all i ∈ {1, 2, . . . , k}, xi is a stable matching.

   We can now define what the median stable matching is.

    Definition 3: If k is odd then let x k+1 be the median stable matching,
                                            2
otherwise let x k be the median stable matching. Denote the utility imputation
                2
of the median stable matching by vmedian (∆).

   Note that when k is even we could as well choose x k +1 to be the median
                                                      2
stable matching. Our results hold under both choices.

   Corollary 1: Median stable matching exists.

   Before we proceed with the proof of Theorem 1, we note in Lemma 1
that the set of stable matchings is closed with respect to two orders which
we define below.

                                              11
    With a slight abuse of notation we let mina S and maxa S denote the least
preferred and the most preferred choices respectively for an agent a from any
finite set S of partner-transfer pairs. This is well-defined and unique by
Assumption 1.
    Given two stable matchings c and c0 we let c ∧W c0 be the vector such
that for all workers w, (c ∧W c0 )(w) = minw {c(w), c0 (w)} and for all firms f ,
(c ∧W c0 )(f ) = maxf {c(f ), c0 (f )}. Similarly, let c ∨W c0 be the vector such
that for all workers w, (c ∨W c0 )(w) = maxw {c(w), c0 (w)}, and for all firms f ,
(c ∨W c0 )(f ) = minf {c(f ), c0 (f )}. Let c ∨F c0 ≡ c ∧W c0 and c ∧F c0 ≡ c ∨W c0 .

   Lemma 1: Let c and c0 be two stable matchings. Then c ∧W c0 and c ∨W c0
are also stable matchings.8

   Now, we are ready to prove our first theorem. Note here that our proof
parallels the proof of Theorem 3.2 in Klaus and Klijn (2006).

Proof of Theorem 1. Consider all combinations of i stable matchings d1 , d2 , . . . , di
where 1 ≤ i ≤ k. For each such combination construct d1 ∧F d2 ∧F . . .∧F di . By
Lemma 1, we get a stable matching in this way. There are l = ki of these sta-
                                                                                

ble matchings, denote them by e1 , e2 , . . . , el . Now let βi = e1 ∨F e2 ∨F . . .∨F el .
By Lemma 1, βi is also a stable matching. We claim that βi = xi .
     First, let us show that βi (f ) = xi (f ) for all firms f ∈ F . By definition of
ej we get that v(f | ci (f )) ≥ v(f | ej ) for all j which implies v(f | ci (f )) ≥
v(f | βi ) by definition of βi . Now if we let {d1 , d2 , . . . , di } to be a set of stable
matchings such that {d1 (f ), d2 (f ), . . . , di (f )} = {c1 (f ), c2 (f ), . . . , ci (f )} then
we get that v(f | ci (f )) = v(f | ej ) for ej = d1 ∧F d2 ∧F . . . ∧F di . Since
βi if formed by taking the best option for all firms among e’s we get that
ci (f ) = βi (f ) implying xi (f ) = βi (f ).
   8
    Similar results to Lemma 1 are well-known in the matching literature. However, we
were not able to find a direct reference for the assignment game with discrete transfers.
There is a related result in Hatfield and Milgrom (2005) which has a more general model
but the operation they use is different than ours. However, our lemma is straightforward
using their Theorem 3(a) and the idea in the proof of Theorem 4. Therefore, we do not
give a proof here.

                                             12
   Second, we show that βi (w) = xi (w). Since ∧F = ∨W and ∨F = ∧W , we
have:
d1 ∧F d2 ∧F . . . ∧F di = d1 ∨W d2 ∨W . . . ∨W di and βi = e1 ∧W e2 ∧W . . . ∧W el .
These inequalities and definition of ej imply that v(w | ej ) ≥ v(w | ck+1−i (w))
for all j. Now by taking {d1 , d2 , . . . , di } to be a set of stable matchings
such that {d1 (w), d2 (w), . . . , di (w)} = {ck+1−i (w), ck+2−i (w), . . . , ck (w)} we
get that ej (w) = ck+1−i (w) for some j. Hence we have established βi (w) =
ck+1−i (w). Therefore βi (w) = xi (w) by definition of xi .

   Hence, the median stable matching is well-defined.


                           5.    continuous case

    In the previous section we showed that the median stable matching is well-
defined. Now, let us define the median stable imputation for the continuous
case. Since we allow continuous transfers, our setup is the same as Shapley
and Shubik (1971). Then it is clear that every stable matching must be
optimal which follows immediately from inequality 1. The next lemma shows
that any stable utility imputation can be achieved via any optimal matching
µ.

    Lemma 2: (Shapley and Shubik) If v is a utility imputation of a sta-
ble matching then it can be achieved via any optimal matching µ with an
appropriate transfer function t.

    From now on, we fix an optimal matching µ̃. For any stable matching
hµ, ti we only consider the corresponding transfer function t̃ for µ̃ such that
v(a | hµ, ti) = v(a | hµ̃, t̃i) for all agents a ∈ A. Therefore, given any stable
matching we can concentrate only on the utility imputation which we call
the stable utility imputation.
    Note that for a stable matching hµ, ti, the sum of the transfers should
add up to zero. However, the feasibility allows not only transfers between

                                          13
firm-worker pairs but also between firms or between workers. Therefore it is
not clear a priori that the sum of the transfers for a matched firm-worker
pair should be zero. The next lemma shows that the only transfers made in
a stable matching are between matched firm-worker pairs.
   Lemma 3: (Roth and Sotomayor (1990), Lemma 8.5) Let hµ, ti be a stable
matching. Then
  (i) t(f ) + t(w) = 0 for matched pairs (f, w) ∈ F × W

 (ii) t(a) = 0 for all unmatched agents a ∈ F ∪ W .
    Given a matching problem with continuous transfers hF, W, U i we denote
the set of stable utility imputations in (m + n)-dimensional Euclidean space
by P . If we restrict our attention to only a subset A0 of k agents then we
denote the set of stable utility imputations in k-dimensional Euclidean space
by PA0 .
    If P is a single point then there exists a unique stable imputation and
it can naturally be defined to be the median stable imputation. For what
follows, we assume that there exist at least two stable imputations. Since
the transfers are continuous, there will be an uncountable number of stable
imputations. Therefore, a measure on P must be defined to be able to define
the median stable imputation.
    Theorem 2: Suppose the dimension of the core is equal to the number of
matched pairs r. And let F̂ and Ŵ be the set of matched firms and workers,
respectively. Then there exists a unique stable utility imputation vmedian such
that λr ({v ∈ PF̂ |v(f ) ≥ vmedian (f )}) = λr ({v ∈ PF̂ |v(f ) ≤ vmedian (f )}) for
every f ∈ F̂ and λr ({v ∈ PŴ |v(w) ≥ vmedian (w)}) = λr ({v ∈ PŴ |v(w) ≤
vmedian (w)}) for every w ∈ Ŵ .9
   9
    Here λr denotes the Lebesgue measure on Rr . Similarly, for every 0 < α < 1, there
exists a unique stable utility imputation vα such that α · λr ({v ∈ PF̂ |v(f ) ≥ vα (f )}) =
(1 − α) · λr ({v ∈ PF̂ |v(f ) ≤ vα (f )}) for all f ∈ F̂ and (1 − α) · λr ({v ∈ PŴ |v(w) ≥
vα (w)}) = α · λr ({v ∈ PŴ |v(w) ≤ vα (w)}) for all w ∈ Ŵ . The theorem is stated for
α = 1/2.

                                            14
    Obviously, the dimension of the core cannot exceed the number of matched
pairs. Unless there are degeneracies (arithmetic relations between the utili-
ties), the dimension of the core is equal to the number of matched pairs as
noted by Shapley and Shubik (1971).
    The main idea of the proof is finding hyperplanes of the form v(a) = c
which divide the core into two sets of equal λr -measure. The rest of the proof
shows that the intersection of these hyperplanes is in the core. See Appendix
A for the proof and also how this theorem can be extended to the case when
the dimension of the core is smaller than the number of matched pairs.

  5.1. Median Stable Matching for Monotone Supermodular Production
                                 Functions

    We have established the existence of vmedian when the side transfers are
continuous. However, the construction of vmedian needs full characterization
of the core which can be done by finding all the extreme points in P (see
Núñez and Rafels (2003) on the characterization of the extreme points).
    Instead of taking this approach, we give some conditions on the utility
functions of the agents such that vmedian coincides with the average of the
firm-preferred utility imputation vF and the worker-preferred utility impu-
tation vW which we call the mean stable utility imputation and denote
it by vmean .

   Proposition 1: The mean stable utility imputation is a core utility im-
putation.

Proof. Since the set of stable utility imputations is characterized by a set
of linear inequalities, it is a convex set. Therefore, vmean is a stable utility
imputation.

    The mean stable utility imputation is also a potential compromise solu-
tion along with the median stable utility imputation. We formulate some
conditions on the utility functions for which these two imputations coincide.

                                      15
   Now, we define the sufficient conditions for φ to satisfy vmedian = vmean .

   Definition 4: φ satisfies supermodularity if for all i ≥ i0 and j ≥ j 0
we have:

               φ(wi , fj ) + φ(wi0 , fj 0 ) ≥ φ(wi , fj 0 ) + φ(wi0 , fj ).

   Definition 5: φ satisfies monotonicity if φ(wi , fj ) ≥ φ(wi , fj 0 ) and
φ(wi , fj ) ≥ φ(wi0 , fj ) for all i ≥ i0 and j ≥ j 0 .

   Note that multiplicative production functions routinely used in the match-
ing literature are particular examples of monotone supermodular functions.

   Proposition 2: If φ satisfies monotonicity and supermodularity then
vmedian ≡ vmean .

    For simplicity we assume that the number of firms and workers are equal.
If there were excessive number of workers or firms, the first inequality for
v(w1 ) in the characterization below would have different boundaries but
everything else would be the same and our result goes through.
    Take an optimal matching. Consider its assortative counterpart where the
highest indexed matched firm gets matched to the highest indexed matched
worker, the second highest indexed matched firm gets matched to the second
highest indexed matched worker and so on... Because of supermodularity
the assortative matching must also be optimal. By monotonicity, if there
are r coupled pairs in an optimal matching then the assortative matching of
the highest r indexed firms and workers must also be optimal. Consider this
optimal matching. Now, we can also assume for simplicity that φ(w1 , f1 ) ≥ 0.
Otherwise we could exclude pairs (wi , fi ) with negative production functions.

   Lemma 4: Suppose φ satisfies monotonicity and supermodularity, then




                                           16
the following inequalities characterize the set of stable utility imputations:

                                      0 ≤ v(w1 ) ≤ φ(w1 , f1 )
            φ(w2 , f1 ) − φ(w1 , f1 ) ≤ v(w2 ) − v(w1 ) ≤ φ(w2 , f2 ) − φ(w1 , f2 )
                                              ..
                                               .
  φ(wr , fr−1 ) − φ(wr−1 , fr−1 ) ≤ v(wr ) − v(wr−1 ) ≤ φ(wr , fr ) − φ(wr−1 , fr ).

Proof. Let us first show that these inequalities are necessary.
    By individual rationality v(w1 ) ≥ 0, v(f1 ) ≥ 0 and v(f1 ) + v(w1 ) =
φ(w1 , f1 ) by Lemma 3, so we get that 0 ≤ v(w1 ) ≤ φ(w1 , f1 ).
    Consider the pair (wi−1 , fi ). They must not be a blocking pair. Hence,
(φ(wi , fi ) − v(wi )) + v(wi−1 ) = v(fi ) + v(wi−1 ) ≥ φ(wi−1 , fi ). Therefore,
v(wi ) − v(wi−1 ) ≤ φ(wi , fi ) − φ(wi−1 , fi ). This gives the right hand side of
the i-th inequality.
    Similarly, consider the pair (wi , fi−1 ). They don’t form a blocking coali-
tion, so (φ(wi−1 , fi−1 ) − v(wi−1 )) + v(wi ) = v(fi−1 ) + v(wi ) ≥ φ(wi , fi−1 ).
Hence, v(wi ) − v(wi−1 ) ≥ φ(wi , fi−1 ) − φ(wi−1 , fi−1 ). This is the left hand
side of the i-th inequality.
    We have shown necessity, next we show sufficiency. We need to show two
things. First, we need to show that for any vector of utilities for firms which
satisfy all the inequalities we get an individually rational matching. Second,
we need to show that for these utility vectors there are no blocking pairs.
    To show individual rationality, let us add up the first i inequalities to get:
     i−1
     P                                                i
                                                      P                     i−1
                                                                            P
           (φ(wj+1 , fj ) − φ(wj , fj )) ≤ v(wi ) ≤         φ(wj , fj ) −         φ(wj , fj+1 ).
    j=1                                               j=1                   j=1

The left hand side of this inequality is non-negative since each term in the
summation is non-negative by monotonicity. Now, let us rewrite the right
                         i−1
                         P
hand side as φ(wi , fi )+ (φ(wj , fj )−φ(wj , fj+1 )) which is less than φ(wi , fi )
                             j=1
since monotonicity implies that every term in the summation is non-positive


                                             17
by feasibility. Hence, we get 0 ≤ v(wi ) ≤ φ(wi , fi ). This also implies
0 ≤ v(fi ) ≤ φ(wi , fi ). Thus individual rationality is implied by this set
of inequalities.
    Now, let us show that (wi+k , fi ) and (wi , fi+k ) are not blocking pairs for
all i, k ∈ N such that i + k ≤ n.
    If we add up the inequalities from the (i + 1)-th to the (i + k)-th we get
the following inequalities:
(5)
i+k−1
 X                                                     i+k−1
                                                        X
       (φ(wj+1 , fj )−φ(wj , fj )) ≤ v(wi+k )−v(wi ) ≤       (φ(wj+1 , fj+1 )−φ(wj , fj+1 )).
 j=i                                                                j=i


Now, note that we have the following inequality by supermodularity:
                                   i+k−1
                                    P                       i+k−1
                                                             P
                 φ(wi+k , fi ) +           φ(wj , fj ) ≤            φ(wj+1 , fj ).
                                   j=i+1                     j=i

If we rewrite this inequality we get:
                                               i+k−1
                                                P
            φ(wi+k , fi ) − φ(wi , fi ) ≤              (φ(wj+1 , fj ) − φ(wj , fj )).
                                                j=i

Combining the last inequality with the left hand side of equation 5 we get:
                     φ(wi+k , fi ) − φ(wi , fi ) ≤ v(wi+k ) − v(wi ).
This proves that (wi+k , fi ) is not a blocking pair.
   Similarly, by supermodularity we get the following inequality:
              i+k−1
               P                        i+k−2
                                         P
                      φ(wj , fj+1 ) ≥           φ(wj+1 , fj+1 ) + φ(wi , fi+k ).
               j=i                       j=i

By rewriting this we get the following:
                                               i+k−1
                                                P
       φ(wi+k , fi+k ) − φ(wi , fi+k ) ≥               (φ(wj+1 , fj+1 ) − φ(wj , fj+1 )).
                                                j=i

With the last inequality and the right hand side of equation 5 we get:
                 φ(wi+k , fi+k ) − φ(wi , fi+k ) ≥ v(wi+k ) − v(wi ).
This proves that (wi , fi+k ) is not a blocking pair.


                                                18
    Hence, under supermodularity and monotonicity, it is sufficient to con-
sider individual rationality constraints of w1 and f1 , and only the non-
blocking constraints for pairs with adjacent numbers. Using this characteri-
zation of the set of stable utility imputations we give a proof of Proposition
2.

Proof of Proposition 2. Consider PF̂ . By Lemma 4, PF̂ is an r-dimensional
parallelotope.10 Therefore, there exists a point vO which is the center of
symmetry.
    Since vF |F̂ and vW |F̂ are two opposite corners of this parallelotope, we
get that vO = (vF |F̂ + vW |F̂ )/2 = vmean |F̂ .11
    Since vO is the center of symmetry we also have that λr ({v ∈ PF̂ |v(w) ≥
vO (w)}) = λr ({v ∈ PF̂ |v(w) ≤ vO (w)}). Hence vO = vmedian |F̂ which implies
that vmean |F̂ = vmedian |F̂ .
    Analogously, working with PŴ we get that vmean |Ŵ = vmedian |Ŵ . We
conclude that vmean = vmedian .


                               6.     Convergence

    We have defined the median utility imputations for the discrete and con-
tinuous cases. In this section, we show that the median stable utility impu-
tation in the discrete case converges to the median utility imputation in the
continuous case.
    Let Core be the set of stable utility imputations in the continuous case
and Core(∆) be the corresponding one in the discrete case with ∆ increment.
In this case also let F eas(∆) be the set of feasible utility imputations.
  10
     An r-dimensional parallelotope is the generalization of a parallelogram to r-
dimensional Euclidean space. It has 2r faces such that each face has a parallel face
opposite of it. The diagonals of a parallelotope intersect at a point which is called the
center of symmetry. Any hyperplane passing through the center of symmetry divides the
parallelotope into two sets of equal λr measure.
  11
     Here, v|A0 for a vector of utilities v and a set of agents A0 denotes a restricted vector
consisting of utilities of agents in A0 .


                                             19
  Assumption (Full-dimension): The dimension of Core is equal to the
number of matched pairs.

   This assumption ensures that for small enough ∆ there are stable utility
imputations which are in Core.

   Theorem 3: If the full-dimension assumption is satisfied then vmedian (∆) →
vmedian as ∆ → 0.

    This result makes the connection between the continuous and the dis-
crete median stable utility imputations and shows that our definitions are
consistent in some sense.
    A similar convergence result also holds between the discrete core and
the continuous core. Before proceeding to the result, we note that to have a
convergence result we need an underlying distance function. Since the core is
a set of points in the Euclidean space, we need to define the distance between
two sets in the Euclidean space. We use the following distance function.
    Let S and S 0 be two sets in a Euclidean space with the underlying distance
function d. Then the Hausdorff distance of S and S 0 is defined as follows:

            dH (S, S 0 ) = max{sup inf d(s, s0 ), sup inf d(s, s0 )}.
                                 s∈S s0 ∈S 0      s0 ∈S 0 s∈S

    Theorem 4: Core(∆) → Core with respect to dH as ∆ → 0 under the
full-dimension assumption.


                            7.     Conclusion

    Two-sided matching literature primarily considers two points in the core:
the worker-optimal stable matching and the firm-optimal stable matching.
These two extreme points are often viewed both as a metaphor of what hap-
pens in the labor market and a recipe for market design. They provide useful
insight into the workings of the labor market by choosing an outcome that
is most favorable for one side of the market. However, they seem somewhat

                                         20
arbitrary both as a modeling choice and as a market design choice. We con-
sider two-sided matching markets with wages, such as the labor market and
point out another stable outcome which has the property of being the median
outcome for all agents in the market.


                Appendix A: Proof of Theorem 2

    We now give a couple of mathematical definitions that we need for the
rest of the section.12
    A hyperplane in Rn is any affine subspace with dimension n − 1. In
other words, a hyperplane in Rn is given by {x = (x1 , x2 , . . . , xn ) ∈ Rn |a1 x1 +
a2 x2 + . . . + an xn = b} for some a ∈ Rn − {0} and b ∈ R. For example, in
R2 a line is a hyperplane, in R3 a plane is a hyperplane. Two hyperplanes
are parallel if they do not intersect.
    A polytope Q ⊆ Rn is a set characterized by the intersection of a finite
number of linear inequalities. Note that the core is a polytope.
    The dimension of a polytope Q in Rn is k if Q is locally homeomorphic
to Rk . For example, a circle has dimension 1, whereas a filled square has
dimension 2.
    A k-dimensional polytope in Rn possesses a k-dimensional density and
by integrating the polytope with respect to this density a measure. For
example, a circle still has a perimeter in higher dimensions or a square still
has an associated area. Therefore, for any polytope Q of dimension k, we
can use the k-dimensional Lebesgue measure λk to measure Q.
    We proceed with the proof.

Proof of Theorem 2. We start with showing that there exists a unique choice
vmedian (a) for each agent a. To complete the proof we need to argue that
  12
    These definitions are standard in mathematics and can be found in many textbooks,
see Lee (2000) for topological definitions and Duistermaat and Kolk (2004) for measuring
lower dimensional objects in higher dimensions.



                                          21
vmedian defined in this way is in P . We prove this in a couple of steps. First
we show that vmedian is such that for every pair (f, w) that is matched in
the optimal matching we get that vmedian (f ) + vmedian (w) = uf (w) + uw (f ).
Second we show that vmedian |F̂ ∈ PF̂ (analogously vmedian |Ŵ ∈ PŴ ). This
completes the proof.
    To show vmedian is well-defined: For all single agents a, vmedian (a) = 0.
Consider PF̂ . Let r be the dimension of PF̂ . Now define functions hf (vf ) ≡
λr ({x ∈ PF̂ |xf ≥ vf }) and gf (vf ) ≡ λr ({x ∈ PF̂ |xf ≤ vf }) for every f ∈ F̂ .
They are both monotone functions, so they can only have a countable number
of jumps. Since λr ({x ∈ PF̂ |xf = vf }) = 0 for any vf , there cannot be any
jumps, so both h and g are continuous. Moreover, for all vf we have that
hf (vf ) + gf (vf ) = λr (PF̂ ) which is a non-zero constant. If vf > sup({xf | x ∈
PF̂ }) then hf (vf ) = 0 and gf (vf ) = λr (PF̂ ) and if va < inf ({xf | x ∈ PF̂ })
then hf (vf ) = λr (PF̂ ) and gf (vf ) = 0. Hence, by continuity there exists a ṽf
such that hf (ṽf ) = gf (ṽf ) = λr (PF̂ )/2. Since P is an r-dimensional polytope
there cannot exist more than one. Let ṽf = vmedian (f ). We define vmedian (w)
for all w ∈ Ŵ analogously.
    To show vmedian (f ) + vmedian (w) = uf (w) + uw (f ) for a pair (f, w) which
is matched in an optimal stable matching: By Lemma 3, we get that v(f ) +
v(w) = uf (w) + uw (f ) for any stable utility imputation v. Hence, hf (v(f )) =
gw (v(w)) and hw (v(w)) = gf (v(f )). Therefore, vmedian (f ) + vmedian (w) =
uf (w) + uw (f ) by construction.
    To show vmedian |F̂ ∈ PF̂ : Assume for contradiction that it is not in PF̂ .
By the separating hyperplane theorem, there exists a hyperplane H through
vmedian |F̂ such that PF̂ lies entirely in one side of this hyperplane. Since PF̂
is a polytope we can take H to be parallel to a face of PF̂ . Moreover, H
cannot be a hyperplane parallel to vf = 0 for any f ∈ F̂ since vmedian (f ) is
the median utility level for f . Since all the faces of H of are either parallel to
vf = 0 or vf − vf 0 = 0, it must be the latter one. Now, consider the following
hyperplanes: vf = vmedian (f ) and vf 0 = vmedian (f 0 ). They partition the


                                        22
Euclidean space into four quadrants. Let A, B, C and D be the λr measures
of PF̂ within these four quadrants in the usual order. Since vf = vmedian (f )
and vf 0 = vmedian (f 0 ) divide PF̂ into two polytopes of equal measure then
we must have that A = C and B = D for the opposite quadrants. If
A = 0 then we get that PF̂ is divided into two sets within two opposite
quadrants which cannot be true since PF̂ is a convex r-dimensional set. Hence
A 6= 0 and similarly B 6= 0. Now, H is such that there exists at least one
quadrant in either side of H with a positive measure of H within. This gives
a contradiction to the fact that PF̂ lies completely on one side of H.

   For the rest of the appendix, we similarly construct vmedian even when
the dimension of the core is not equal to the number of matched pairs. To
do this, we use the characterization of the core given in Núñez and Rafels
(2008).13

     Lemma 5: (Núñez and Rafels) There exists a partition of firms {F0 , F1 , . . . , Fd }
such that F0 includes all the firms which get fixed utility in all stable match-
ings and for any f, f˜ ∈ Fi for i = 0, 1, . . . , d v(f |hµ, ti) − v(f˜|hµ, ti) is fixed
for all stable matchings hµ, ti. Moreover, if you take a representative firm
f˜i ∈ Fi for i = 1, 2, . . . , d then PF̃ , where F̃ = {f˜1 , f˜2 , . . . , f˜d }, has dimension
d.

    We explain how vmedian (f ) is constructed for firm f . For worker w,
vmedian (w) is 0 if w is unmatched in an optimal matching, otherwise it is
uf (w) + uw (f ) − vmedian (f ) where f is the firm that w is matched to.
    If f ∈ F0 then vmedian (f ) is the fixed utility that f is getting. Oth-
erwise, construct a set of representative firms including f : that is pick a
firm from each fi ∈ Fi where i = 1, 2, . . . , d such that fj = f for some
j ∈ {1, 2, . . . , d}. Let F̃ = {f1 , f2 , . . . , fd }. Consider PF̃ . Find hyperplanes
of the form v(fi ) = c that divide PF̃ into two sets of equal measure like in the
proof. The intersection of these hyperplanes lies within PF̃ just as before.
  13
       The first and second parts of Lemma 5 are Corollary 8 and Theorem 10 of their paper.

                                             23
Now use the first part of Lemma 5 to show that the choice of representative
firms do not change the median utility level of f .


           Appendix B: Proofs of Theorems 3 and 4

    Before we proceed to the proof of Theorem 3, we prove a couple of lemmas.
As a by-product we get that the discrete core converges to the continuous
core stated as Theorem 4 which is of independent interest from the rest of
the paper.
    First note that if ∆ is small enough then any discrete stable matching is
optimal.
    Each single agent has a utility level of zero and thus only affects the
lower bound of the utility levels of the agents on the other side of the market.
Therefore, we can restrict Core, Core(∆) and F eas(∆) to the space of utility
imputations of the matched agents. Moreover, since the sum of the transfers
are zero for matched agents by Lemma 3, we can further restrict these sets
to the space of utility imputations for the matched firms.14 Note that in this
space Core has full-dimension by the assumption.

       Lemma 6: Let v ∈ F eas(∆) ∩ Core then v ∈ Core(∆).

Proof. If a utility imputation is in Core and still feasible for some increment
∆ then it is also in Core(∆) as the discrete core considers blocking pairs
with only restricted transfers.

   Core is a polytope characterized by the following two types of hyper-
planes. One type is of the form c1 ≥ v(f ) ≥ c2 , and the other is of the form
d1 ≥ v(f ) − v(f 0 ) ≥ d2 . Let C∆ be a polytope with faces parallel to these
  14
     Lemma 3 states this result for the continuous case. Similarly, the same result holds
for the discrete case. This can be proven as follows. By stability the transfer of a single
agent or the sum of transfers for a matched pair cannot be negative. However, the sum of
all transfers must be non-positive by feasibility. Therefore we conclude that the transfer
of a single agent and the sum of transfers for a matched pair must be zero.


                                            24
hyperplanes defined as follows. The faces of Core of the first type are still
the faces of C∆ whereas the second type faces are shifted and can be written
as d1 + 2∆ ≥ v(f ) − v(f 0 ) ≥ d2 − 2∆. The next lemma shows that Core(∆)
has to lie inside this polytope.

    Lemma 7: For any ∆ > 0 we have Core(∆) ⊆ C∆ .

Proof. The individual rationality constraints and blocking pairs with one
unmatched agent give the same inequalities both in the continuous case and
the discrete case. Hence, inequalities of the form c1 ≥ v(f ) ≥ c2 do not
change.
    For any firm-worker pair (f, w0 ) where w0 = µ(f 0 ) the no-blocking condi-
tion in the continuous case can be written as v(f ) + v(w0 ) ≥ uf (w0 ) + uw0 (f ).
Since v(f 0 ) + v(w0 ) = uf 0 (w0 ) + uw0 (f 0 ) by Lemma 3 the last inequality is
equivalent to v(f ) − v(f 0 ) ≥ uf (w0 ) + uw0 (f ) − uf 0 (w0 ) − uw0 (f 0 ) = d2 . To
prove the claim we need to show that v(f ) − v(f 0 ) ≥ d2 − 2∆ for any utility
imputation in the discrete case.
    Assume for contradiction that v(f ) − v(f 0 ) < d2 − 2∆ which is the same
as v(f ) + v(w0 ) < uf (w0 ) + uw0 (f ) − 2∆ by footnote 14. Let v + (f ) =
min{uf (w0 ) + ∆k|uf (w0 ) + ∆k > v(f )}- the smallest real number greater
k∈Z
than v(f ) which is an integer multiple of ∆ away from uf (w0 ). Define
v + (w0 ) = min{uw0 (f ) + ∆k|uw0 (f ) + ∆k > v(w0 )} similarly. We claim
             k∈Z
that (f, w0 ) form a blocking coalition. Now, we get that v + (f ) + v + (w0 ) ≤
v(f ) + v(w0 ) + 2∆ < uf (w0 ) + uw0 (f ). Hence, (f, w0 ) forms a blocking pair
(with the appropriate transfer). A contradiction to the assumption.
    Analogously, we show that d1 + 2∆ ≥ v(f ) − v(f 0 ), which completes the
proof.

Proof of Theorem 4. By Lemma 7 every s0 ∈ Core(∆) has to be inside C∆
which implies that there exists s ∈ Core such that d(s, s0 ) ≤ 2∆. Hence,
  sup     inf d(s, s0 ) ≤ 2∆. Therefore, sup     inf d(s, s0 ) → 0 as
s0 ∈Core(∆) s∈Core                             s0 ∈Core(∆) s∈Core



                                          25
∆ → 0 by the squeeze theorem. To complete the proof we have to show that
 sup   inf d(s, s0 ) → 0 as ∆ → 0.
s∈Core s0 ∈Core(∆)
    Since F eas(∆) ∩ Core ⊆ Core(∆) by Lemma 6, we have
               sup          inf    d(s, s0 ) ≤ sup              inf       d(s, s0 ).
              s∈Core    s0 ∈Core(∆)             s∈Core   s0 ∈Core∩F eas(∆)

   As ∆ → 0, F eas(∆) becomes a finer lattice and hence
 sup     inf      d(s, s0 ) → 0 by the full-dimension assumption. There-
s∈Core s0 ∈Core∩F eas(∆)
fore, by the squeeze theorem we conclude that sup                       inf     d(s, s0 ) → 0 as
                                                              s∈Core s0 ∈Core(∆)
∆ → 0 since sup              inf      d(s, s0 ) ≥ 0 for every ∆.
               s∈Core s0 ∈Core(∆)

   For any finite set S let |S| be the number of elements of S. By the
next lemma, we get that the number of discrete core points outside of the
continuous core becomes insignificant compared to the number of discrete
core points when ∆ becomes small.
                     |Core(∆)−Core|
    Lemma 8:            |Core(∆)|
                                      → 0 as ∆ → 0.

Proof. This follows from the full-dimension assumption. Since Core(∆) ⊆
C∆ for all ∆ by Lemma 7 and Core(∆) ⊆ F eas(∆), we have Core(∆) −
Core ⊆ (C∆ ∩ F eas(∆)) − Core and hence |Core(∆) − Core|/|Core(∆)| ≤
|(C∆ ∩ F eas(∆)) − Core|/|Core(∆)|. As ∆ → 0, |(C∆ ∩ F eas(∆)) − Core|
grows at most linearly with ∆r−1 where r is the number of matched pairs and
hence the dimension of the core. On the other hand, |Core(∆)| grows linearly
with ∆r . Therefore, |(C∆ ∩ F eas(∆)) − Core|/|Core(∆)| → 0. Hence, by
the squeeze theorem we get |Core(∆) − Core|/|Core(∆)| → 0.

    Our last lemma shows that for any agent a, the ratio of the number of
discrete core points inside the continuous core which give the agent a utility
level bigger than vmedian (a) and the number of such points which give a utility
level smaller than vmedian (a) converges to one.
                     |v∈Core∩Core(∆) s.t. v(a)≤vmedian (a)|
    Lemma 9:         |v∈Core∩Core(∆) s.t. v(a)≥vmedian (a)|
                                                              → 1 as ∆ → 0 for all a ∈ A.

                                                26
Proof. By construction of vmedian we know that λr {v ∈ Core s.t. v(a) ≤
vmedian (a)} = λr {v ∈ Core s.t. v(a) ≥ vmedian (a)}. Moreover, as ∆ → 0 we
have:
                    |v∈Core∩Core(∆) s.t. v(a)≤vmedian (a)|
                      λr {v∈Core s.t. v(a)≤vmedian (a)}/∆r
                                                             → 1,
and
                    |v∈Core∩Core(∆)s.t.v(a)≥vmedian (a)|
                      λr {v∈Core|v(a)≥vmedian (a)}/∆r
                                                             → 1.
Therefore, as ∆ → 0,
                    |v∈Core∩Core(∆) s.t. v(a)≤vmedian (a)|
                    |v∈Core∩Core(∆) s.t. v(a)≥vmedian (a)|
                                                             → 1.



Proof of Theorem 3. By Lemma 8 as ∆ → 0 the number of stable utility
imputations in Core(∆) outside Core becomes insignificant compared to
those inside Core. By Lemma 9 vmedian is the median utility imputation for
those inside of Core for small enough ∆. Hence, we have that vmedian (∆) →
vmedian .


                               References

Bulow, J., and J. Levin (2006): “Matching and price competition,”
 American Economic Review, 96(3), 652–668.

Crawford, V. P. (2008): “The Flexible-Salary Match: A Proposal to In-
 crease the Salary Flexibility of the National Resident Matching Program,”
 Journal of Economic Behavior and Organization, 66(2), 149–160.

Crawford, V. P., and E. M. Knoer (1981): “Job Matching with Het-
 erogeneous Firms and Workers,” Econometrica, 49(2), 437–450.

Duistermaat, J., and J. Kolk (2004): Multidimensional Real Analysis
 II : Integration. Cambridge University Press.


                                         27
Fleiner, T. (2003): “A fixed point approach to stable matchings and some
  applications,” Mathematics of Operations Research, 28(1), 103–126.

Gale, D., and L. S. Shapley (1962): “College Admissions and the Sta-
 bility of Marriage,” American Mathematical Monthly, 69(1), 9–15.

Hatfield, J., and P. Milgrom (2005): “Matching with Contracts,”
 American Economic Review, 95(4), 913–935.

Kelso, A., and V. Crawford (1982): “Job Matching, Coalition Forma-
 tion and Gross Substitutes,” Econometrica, 50(6), 1483–1504.

Klaus, B., and F. Klijn (2006): “Median stable matching for college
 admissions,” International Journal of Game Theory, 34(1), 1–11.

Knuth, D. E. (1976): Mariages stables et leurs relations avec d’autres
 problemes combinatoires: Introduction a l’analyse mathematique des al-
 gorithmes. Presses de l’Universite de Montreal.

Kojima, F. (2007): “Matching and Price Competition: Comment,” Ameri-
 can Economic Review, 97(3), 1027–1031.

Lee, J. M. (2000): Introduction to Topological Manifolds. Springer-Verlag.

Niederle, M. (2007): “Competitive Wages in a Match with Ordered Con-
  tracts,” American Economic Review, 97(5), 1957–1969.

Núñez, M., and C. Rafels (2003): “Characterization of the extreme
  core allocations of the assignment game,” Games and Economic Behavior,
  44(2), 311–331.

        (2008): “On the dimension of the core of the assignment game,”
  Games and Economic Behavior, 64(1), 290–302.




                                    28
Roth, A. E. (2008): “Deferred Acceptance Algorithms: History, Theory,
 Practice and Open Questions,” International Journal of Game Theory,
 36(3), 537–569.

Roth, A. E., and M. A. Sotomayor (1990): Two-Sided Matching:A
 Study in Game-Theoretic Modeling and Analysis, Econometric Society
 Monographs. Cambridge University Press.

Sethuraman, J., C.-P. Teo, and L. Qian (2006): “Many-to-one Match-
  ing: Geometry and Fairness,” Mathematics of Operations Research, 31(3),
  581–596.

Shapley, L. S., and M. J. Shubik (1971): “The Assignment Game I: The
  Core,” International Journal of Game Theory, 1(1), 111–130.

Teo, C.-P., and J. Sethuraman (1998): “The Geometry of Fractional
 Stable Matchings and Its Applications,” Mathematics of Operations Re-
 search, 23(4), 874–891.




                                   29
Figure 1: An example demonstrating the continuous core and the discrete
core when ∆ = 3/4. The continuous core is the shaded area and the discrete
core is the union of the nineteen nodes.




                                   30
