                                NBER WORKING PAPER SERIES




   A MULTIPLIER APPROACH TO UNDERSTANDING THE MACRO IMPLICATIONS
                       OF HOUSEHOLD FINANCE

                                             YiLi Chien
                                            Harold Cole
                                            Hanno Lustig

                                        Working Paper 13555
                                http://www.nber.org/papers/w13555


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                    November 2007




We would like to thank Bernard Dumas, Francisco Gomes, Mark Hugget, Urban Jermann, Narayana
Kocherlakota, Dirk Krueger, Pete Kyle, Mark Loewenstein, Joseph Ostroy, Nikolai Roussanov, Viktor
Tsyrennikov, Stijn Van Nieuwerburgh and Amir Yaron for comments. Andrew Hollenhurst provided
excellent research assistance. We would also like to especially thank the editor Kjetil Storesletten and
two anonymous referees for their efforts to improve our paper. The views expressed herein are those
of the author(s) and do not necessarily reflect the views of the National Bureau of Economic Research.

© 2007 by YiLi Chien, Harold Cole, and Hanno Lustig. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.
A Multiplier Approach to Understanding the Macro Implications of Household Finance
YiLi Chien, Harold Cole, and Hanno Lustig
NBER Working Paper No. 13555
November 2007, Revised January 2010
JEL No. G12

                                              ABSTRACT

Our paper examines the impact of heterogeneous trading technologies for households on asset prices
and the distribution of wealth. We distinguish between passive traders who hold fixed portfolios of
stocks and bonds, and active traders who adjust their portfolios to changes in expected returns. To
solve the model, we derive an optimal consumption sharing rule that does not depend on the trading
technology, and we derive an aggregation result for state prices. This allows us to solve for equilibrium
prices and allocations without having to search for market-clearing prices in each asset market separately.
We show that the fraction of total wealth held by active traders, not the fraction held by all participants,
is critical for asset prices, because only these traders respond to variation in state prices and hence
absorb the residual aggregate risk created by non-participants. We calibrate the heterogeneity in trading
technologies to match the equity premium and the risk-free rate. The calibrated model reproduces
the skewness and kurtosis of the wealth distribution in the data. In contrast to existing models with
heterogeneous agents, our model matches the high volatility of returns and the low volatility of the
risk-free rate.


YiLi Chien                                           Hanno Lustig
403 West State Street                                UCLA Anderson School of Management
Krannert School of Management                        110 Westwood Plaza, Suite C413
Purdue University                                    Los Angeles, CA 90095-1481
West Lafayette                                       and NBER
IN 47907                                             hlustig@anderson.ucla.edu
yilichien@gmail.com

Harold Cole
Economics Department
University of Pennsylvania
3718 Locust Walk
160 McNeil Building
Philadelphia, PA 19104
and NBER
colehl@sas.upenn.edu
1         Introduction
Incomplete market models in which all households can only trade a highly limited menu of tradeable
assets were initially embraced to explain the strong correlation in the data between household
consumption and income. However, the actual menu of assets that household can trade is very
rich. At the same time, there is a growing body of empirical evidence that different households
behave as if they had access to different menus of tradeable assets.1 A majority of households does
not invest directly in equity, in spite of the sizeable historical equity premium, but even among those
who participate in equity markets, sophisticated investors invest a larger share of their wealth in
equity and realize higher returns, while less sophisticated investors take a more cautious approach.
As a result, sophisticated investors load up on aggregate consumption risk. The consumption of
the 10 % wealthiest households is five times more exposed to aggregate consumption growth than
that of the average US household (Parker and Vissing-Jorgensen (2009)).
  Heterogeneity in preferences cannot explain these differences. In a complete markets environ-
ment, when agents have constant relative risk aversion (CRRA) preferences, the most risk averse
end up being the poorest households in equilibrium, only because they are the least willing to
substitute intertemporally, not because of the risk preferences per se (Dumas (1989)). However, in
an incomplete markets environment, the least risk averse tend to accumulate less wealth because
their precautionary motive to save is not as strong, and hence they will be most exposed to both
aggregate consumption and idiosyncratic risk, while the wealthiest households would end up hold-
ing less equity and be less exposed to aggregate and idiosyncratic consumption growth risk. In the
data, the consumption of the wealthy is more exposed to aggregate but less to idiosyncratic risk.
   These empirical findings lead us to introduce heterogeneous trading technologies in an otherwise
standard incomplete markets model. To solve this model, we develop a new method that does
not rely on a price adjustment algorithm to clear each asset market separately. We introduce
heterogeneity in trading technologies into an endowment economy with a large number of agents
who are subject to both aggregate and idiosyncratic shocks, and who have CRRA preferences with
coefficient α. Our model distinguishes between passive traders, who trade fixed-weighted portfolios
of bonds and equities, and active traders, who optimally re-adjust their portfolio holdings over time.
We capture the differences in trading technologies by imposing different measurability restrictions
on the household’s time-zero trading problem. These restrictions govern how net wealth is allowed
to vary across different states of the world. We use the multipliers on these constraints to derive a
consumption sharing rule for households and an analytical expression for the stochastic discount
factor. Importantly, the household’s consumption sharing rule does not depend on the trading
technology, only the dynamics of the multipliers do. The equilibrium stochastic discount factor
only depends on aggregate consumption growth and a weighted average of these multipliers –the
    1
        Campbell (2006) refers to the body of literature that documents this heterogeneity as “household finance”.

                                                           2
−1/α-th moment. We refer to this simply as the aggregate multiplier.
   In our approach, this household multiplier is a new state variable that replaces wealth. We
characterize its dynamics by means of a simple updating rule that depends on the trading technol-
ogy of the household. The individual’s multiplier updating rule and the implied updating rule for
the aggregate multipliers completely characterize equilibrium allocations and prices. In continuous-
time finance, Cuoco and He (2001) and Basak and Cuoco (1998) used stochastic weighting schemes
to characterize allocations and prices. Our approach differs because it provides a tractable and
computationally efficient algorithm for computing equilibria in environments with a large number
of agents subject to idiosyncratic risk as well as aggregate risk, and heterogeneity in trading op-
portunities. The use of cumulative multipliers in solving macro-economic equilibrium models was
pioneered by Kehoe and Perri (2002), building on earlier work by Marcet and Marimon (1999).
Our use of measurability constraints to capture portfolio restrictions is similar to that in Aiyagari,
Marcet, Sargent, and Seppala (2002) and Lustig, Sleet, and Yeltekin (2007), who consider an op-
timal taxation problem, while the aggregation result extends that in Chien and Lustig (2009) and
Lustig and Nieuwerburgh (2005) to an incomplete markets environment.
   Our paper is closely related to work by Krusell and Smith (1997) and (1998). Krusell and
Smith (1998) consider a production economy with a large number of agents in which individual
labor supply is subject to exogenous idiosyncratic shocks, while the aggregate production function
is subject to aggregate productivity shocks. Households in this economy only trade claims to the
physical capital stock. In this model with a single asset, KS only need to solve a forecasting
problem for the return on capital. Similarly, we solve a forecasting problem for the growth rate of
this aggregate multiplier. However, as soon as KS add an additional asset ( e.g. a risk-free bond
in Krusell and Smith (1997)), KS need to solve for the market-clearing pricing function for this
asset.2 Applying this KS method in our model would require searching for a new pricing function
for each additional aggregate state in each iteration, not knowing the mapping from the wealth
distribution to state prices. Our aggregation result implies that we only need to forecast a single
moment of the multiplier distribution, regardless of the number and the nature of the different
trading technologies. We can directly compute the pricing kernel as a function of this moment.
Hence, there is no need to search for the vector of state prices that clears the various asset markets.
Finally, solving for the multiplier updating rule turns out to be simpler and faster than solving the
household’s Bellman equation or consumption Euler equation.
       We apply our method in a calibrated version of the model. To capture some of the richness
of trading behavior in the data, we distinguish between passive traders who hold no stocks, the
non-participants, and buy-and-hold passive traders who can only trade a fixed-weighted portfolio
of stocks and bonds. The heterogeneity in trading technologies is calibrated to match the equity
   2
     Storesletten, Telmer, and Yaron (2007) implement this procedure in an OLG model with trading in capital and
risk-free bonds.

                                                       3
risk premium and the risk-free rate for a risk aversion coefficient of five, but, as an out-of-sample
check, we show that the model also matches the relation between wealth and equity holdings in
the data. However, the welfare costs of operating an inferior trading technology in our calibrated
model are large.
   The interaction between a small segment of active traders and a larger segment of passive
traders improves the model’s match with asset prices in the data along two dimensions: the first
and the second moments of risk premia. Due to this interaction, equilibrium state prices are highly
volatile and counter-cyclical, which delivers a larger average equity premium, but the conditional
expectation of state prices –and hence the risk-free rate– is not. Instead, the equilibrium state
prices are highly volatile across aggregate states. The non-participants create residual aggregate
risk that ends up being absorbed only by the active traders, not by the buy-and-hold traders.
The non-participants create residual aggregate risk, because they consume “too much” in low
aggregate consumption growth states (recessions) and “too little” in high aggregate consumption
growth states (expansions). On the other hand, the active traders concentrate their consumption
in “cheap” aggregate states (states with low state prices for aggregate consumption). Hence, to
clear the goods market, the equilibrium state prices have to be much higher in recessions to induce
a small segment of active traders to consume less, and much lower in expansions to induce them
to consume more. This mechanism is similar to the one explored by Guvenen (2009), but it relies
on heterogeneity in trading technologies instead of preferences.
      Second, the model endogenously generates counter-cyclical variation in risk premia, even when
the aggregate consumption growth shocks are i.i.d. The share of total wealth owned by the active
traders declines in low aggregate consumption growth states, because they take highly leveraged
equity positions. As a result, the conditional volatility of state prices increases after each recession
since a larger adjustment in state prices is needed to induce the smaller mass of active traders
to clear the goods markets. As we increase the equity share in the passive trader portfolios, the
second channel actually strengthens, and the volatility of risk premia increases, even though the
first channel weakens, and average risk premia decline.
    Our quantitative results contribute to a growing literature on the asset pricing impact of lim-
ited stock market participation, starting with Saito (1996), Basak and Cuoco (1998) and Vissing-
Jorgensen (2002), and more recently, by Guvenen (2009) and Gomes and Michaelides (2008).
Guvenen (2009) argues that limited participation goes a long way towards explaining the eq-
uity premium in a model with a bond-only investor and a stockholder who have heterogeneous
willingness to substitute consumption intertemporally. We consider a model without preference
heterogeneity but with idiosyncratic risk and with heterogeneity in trading technologies among
market participants.3 Overall, the consensus in the literature is that stockholders hold too much
  3
     Gomes and Michaelides (2008) also consider a model with bond-and stockholders, but they add idiosyncratic
risk.

                                                      4
wealth in the data to fully explain the size of risk premia only by means of the limited partici-
pation mechanism. Our paper strengthens the limited participation explanation by showing that
it is really the fraction of wealth held by active investors that matters, not the fraction of wealth
held by all participants. In our calibrated model, more than half of the increase in the equity
premium relative to the complete markets case is due to the heterogeneity in trading technologies
in our model, rather than limited participation. At the same time, our model matches the asset
share distribution in the data closely, while the limited participation benchmark cannot match
the concentration of equity holdings in the data. More importantly, the heterogeneity in trading
technologies more than doubles volatility of the market price of risk, relative to the limited par-
ticipation benchmark, while the risk-free rate remains stable, and this volatility amplification does
not disappear as we increase the equity holdings of passive investors. In contrast, the preference
heterogeneity explored by Guvenen (2009) generates significant excess risk-free rate volatility.4
       In our model, the consumption of passive traders is more exposed to idiosyncratic risk, because
they fail to accumulate enough wealth to self-insure, while the consumption of active traders
is more exposed to aggregate risk. This heterogeneity in the responsiveness of consumption to
aggregate shocks in the model is consistent with recent evidence by Malloy, Moskowitz, and Vissing-
Jorgensen (2007) and Parker and Vissing-Jorgensen (2009), who find that wealthier stockholders
have consumption that is much more exposed to aggregate shocks. The active traders in our model
realize much higher returns, as documented by Calvet, Campbell, and Sodini (2007), and they
adopt a sophisticated market timing strategy that exploits the time variation in the risk premium
to do so. In the calibrated model, they accumulate on average three times more wealth than the
average household in our model, because of their superior trading technology. This mechanism
allows our model to match the skewness and kurtosis of the wealth distribution in the data, but
it falls short of matching the left tail of the wealth distribution. Since these active traders are
wealthy on average and since they have a high fraction of equities in their portfolio, the calibrated
model delivers a closer match between wealth and equity shares in the data.
   This paper is organized as follows. Section 2 describes the environment, the preferences and
trading technologies for all households. Section 3 characterizes the equilibrium allocations and
prices using cumulative multipliers that record all the binding measurability and solvency con-
straints. Section 4 describes a computational algorithm. In section 5 we study a calibrated version
of our economy, section 6 does a number of sensitivity experiments: (i) we increase the partici-
pation rate to 50 %, which reduces the equity premium by 80 basis points, and we compare the
current asset share and wealth distribution in the data to the the model’s, (ii) we compare our
model’s predictions to that of a model with only limited participation, without heterogeneity in
trading technologies, (iii) we change the composition of the passive trader segment to show that
   4
    In addition, the aggregate consumption growth implied by his production model is twice as volatile as consump-
tion growth in U.S. data.

                                                        5
only the average equity holdings of passive traders matters for the asset pricing results, and (iv) we
change the calibration of aggregate and idiosyncratic shocks. All the proofs are in the appendix.
A separate appendix with auxiliary results is available from the authors’ web sites. We have also
made the matlab code available on-line.


2     Model
In this section we describe the environment, and we describe the household problem for each of
the different asset trading technologies. We also define an equilibrium for this economy.


2.1     Environment
This is an endowment economy with a unit measure of households who are subject to both ag-
gregate and idiosyncratic income shocks. Households are ex ante identical, except for the access
to trading technologies. Ex post, the households differ in terms of their idiosyncratic income
shock realizations. All of the households face the same stochastic process for these shocks, and all
households start with the same present value of tradeable wealth.
    In the model time is discrete, infinite, and indexed by t = 0, 1, 2, ... The first period, t = 0,
is a planning period in which financial contracting takes place. We use zt ∈ Z to denote the
aggregate shock in period t and ηt ∈ N to denote the idiosyncratic shock in period t. z t denotes
the history of aggregate shocks, and, similarly, η t , denotes the history of idiosyncratic shocks for a
household. The idiosyncratic events η are i.i.d. across households. We use π(z t , η t ) to denote the
unconditional probability of state (z t , η t ) being realized. The events are first-order Markov, and
we assume that the transition probabilities can be decomposed as follows: π(z t+1 , η t+1 |z t , η t ) =
φ(zt+1 |zt )π(ηt+1 |zt+1 , ηt ). Since we can appeal to a law of large number, π(z t , η t )/π(z t ) also denotes
the fraction of agents in state z t that have drawn a history η t . We use π(η t |z t ) to denote that
fraction. We introduce some additional notation: z t+1 ≻ z t or y t+1 ≻ y t means that the left hand
side node is a successor node to the right hand side node. We denote by {z τ ≻ z t } the set of
successor aggregate histories for z t including those many periods in the future; ditto for {η τ ≻ η t }.
When we use , we include the current nodes z t or η t in the summation.
    We use [η t−1 , ηet ] to refer to a particular history of idiosyncratic events η0 , η1 , . . . , ηt−1 , ηet , where
we change only the last event. Similarly, we use [z t−1 , zet ] to refer to a particular history of aggregate
events z0 , z1 , . . . , zt−1 , zet . This notation will prove to be useful when we explain the measurability
constraints.
    There is a single final good in each period, and the amount of it is given by Y (z t ), which evolves
according to Y (z t ) = exp{zt }Y (z t−1 ), with Y (z 1 ) = exp{z1 }. This endowment good comes in two
forms. The first form is diversifiable income, which is not subject to the idiosyncratic shock, and is

                                                          6
given by (1 − γ)Y (z t ). The other form is non-diversifiable income which is subject to idiosyncratic
risk and is given by γY (z t )ηt ; hence γ is the share of income that is non-diversifiable.
    All households are infinitely lived and rank stochastic consumption streams {c(z t , η t )} according
to the following criterion
                                         X∞ X
                                                                   c(z t , η t )1−α
                                 U(c) =          β t π(z t , η t )                  ,                (2.1)
                                         t≥1 t t
                                                                      1−α
                                                         z ,η

where α > 0 denotes the coefficient of relative risk aversion, and c(z t , η t ) denotes the household’s
consumption in state (z t , η t ).


2.2      Asset Trading Technologies and Assets Traded
All households are endowed with a claim to their per capita share of both diversifiable and non-
diversifiable income. Households cannot directly trade their claim to non-diversifiable income.
   Households trade assets in securities markets and they trade the final good in spot markets
that re-open in every period. All of the households have access to only one of two asset trading
technologies. We assume households cannot switch between technologies. The active traders can
trade a complete menu of claims whose payoffs are contingent on the aggregate state z t , as well as
stocks and bonds. The other households are passive traders who can only trade a fixed-weighted
portfolio of bonds and stocks.
   In our model, equity is a leveraged claim to diversifiable income, following Abel (1999). Let
ψ denote the leverage parameter, let bt (z t ) denote the supply of one-period risk-free bonds, and
let Rtf denote the risk-free rate. We can decompose the aggregate payout that flows from the
diversifiable income claim (1 − γ)Y (z t ) into a dividend component dt (z t ) from equity and a bond
component Rtf (z t−1 )b(z t−1 ) − b(z t ). The bond supply adjusts in each node z t to ensure that the
bond/equity ratio equals ψ: b(z t ) = ψ [ω(z t ) − b(z t )] for all z t , where ω(z t ) denotes the price of a
claim to diversifiable income.


2.3      Measurability Constraints
To model these trading technologies, we make use of measurability constraints, a different one for
each trading technology. The rest of the household constraints are standard.
    We use q [(z t+1 , η t+1 ) , (z t , η t )] to denote the price of a unit claim to the final good in state
(z t+1 , η t+1 ) acquired in state (z t , η t ). The absence of arbitrage implies that there exist aggregate
state prices q(zt+1 , z t ) such that q [(z t+1 , η t+1 ) , (z t , η t )] = π(η t+1 |z t+1 , η t )q(zt+1 , z t ), where q(zt+1 , z t )
denotes the price of a unit of the final good in aggregate state z t+1 given that we are in aggregate
history z t .
    We let each household trade a complete set of contingent bonds subject to the appropriate

                                                                  7
measurability restrictions. Stocks and non-contingent bonds are redundant assets. For the sake
of tractability, we exclude these redundant securities altogether in this section. This exclusion of
redundant assets is without loss of generality, as we show in section D of the separate appendix.5
Given an equilibrium in the sequence economy with trade in redundant assets, there exists an
equivalent equilibrium in the sequence economy in which agents trade only state-contingent bonds
subject to the measurability constraints, and vice versa.
   The budget constraint for this trader in state (z t , η t ) is:
                                                            X                            X
      γY (z t )ηt + at−1 (z t , η t ) − c(z t , η t ) ≥                q(zt+1 , z t )              at (z t+1 , η t+1 )π(η t+1 |z t+1 , η t )   (2.2)
                                                          z t+1 ≻z t                    ηt+1 ≻ηt


where at−1 (z t , η t ) denotes the number of unit claims to the final good purchased at t − 1 for state
(z t , η t ). The period 0 spot budget constraint is given by
                                                  X                      X
                                    a−1 (z0 ) ≥           q(z1 , z 0 )         a0 (z 1 , η 1)π(η 1 |z 1 , η 0 ),                               (2.3)
                                                   z1                     η1


where z 0 and η 0 are degenerate states representing the initial position in the planning state at time
0 before any of the shocks have been realized and where q(z1 , z 0 ) denotes the price in this stage of
a claim to consumption in period 1.
   In addition to their spot budget constraint, these traders also face solvency constraints in the
form of a lower bound on the value of their net asset position, to rule out Ponzi games:

                                                   at (z t+1 , η t+1 ) ≥ M (η t+1 , z t+1 ).                                                   (2.4)

Active traders The active traders face the additional constraint that at (z t+1 , η t+1 ) be measur-
able with respect to (z t+1 , η t ) :
                                                                                        
                                         at (z t+1 , η t , ηt+1 ) = at (z t+1 , η t , η̃t+1 ),                                                 (2.5)

for all z t+1 , η t , and ηt+1 , η̃t+1 ∈ N. We refer this as the active trader’s measurability condition.
      The active trader’s problem is to choose {c(z t , η t ), at (z t+1 , η t+1 )}, a0 (z 1 , η 1 ) to maximize his
expected utility (2.1) subject to the constraints in (2.2-2.4) and the measurability constraint in
(2.5).

Passive traders The only source of state-contingency in the passive trader’s net wealth position
is the return on his fixed-weighted portfolio of stocks and bonds. Hence, his contingent bond payoff
in each state has to be proportional to the return on the portfolio. Let Rp (̟, z t ) denote the return
  5
      Of course, in this approach, the contingent bond positions have to add up to diversifiable income in equilibrium.

                                                                          8
on the passive trader’s total portfolio with fixed weight ̟ for equities. We can state the passive
trader’s measurability condition as:

                               at ([z t , zt+1 ] , [η t , ηt+1 ])   at ([z t , z̃t+1 ] , [η t , η̃t+1 ])
                                                                  =                                      ,   (2.6)
                                   Rp (̟, [z t , zt+1 ])                Rp (̟, [z t , zet+1 ])

for all z t , η t , zt+1 , z̃t+1 ∈ Z, and ηt+1 , η̃t+1 ∈ N.
   The passive trader’s problem is to choose {c(z t , η t ), at (z t+1 , η t+1 )}, a0 (z 1 , η 1 ) to maximize his
expected utility (2.1) subject to the constraints in (2.2-2.4) and the measurability constraint in
(2.6).
    We distinguish between two types of passive traders: non-participants (denoted np), who invest
in the risk-free one-period bond, and buy-and-hold traders (denoted bh), who hold positive amounts
of equity in their portfolio. The portfolio return of the non-participant (̟ = 0) is the risk-free rate:
Rp (0, z t ) = Rf (z t−1 ). The portfolio return of the buy-and-hold trader is the return on a portfolio
with a constant fraction ̟ invested in equities.
   Importantly, the active traders can fully hedge against aggregate shocks. We can think of them
as having access to a menu of stocks and bonds that is rich enough to span the aggregate shocks.
In our quantitative analysis, since we have only two aggregate states, active traders are effectively
only trading the stock and the bond, and hence we can back out their portfolio weights. The
passive traders cannot fully hedge against either aggregate or idiosyncratic risk.


2.4      Equilibrium
A fraction µz of households are active traders. The other households are passive traders who can
only trade a fixed-weighted portfolio of bonds and stocks. A fraction µbh of passive traders, the
buy-and-hold traders, can only trade a fixed-weighted portfolio of stocks and bonds, and a fraction
µnp , the non-participants, can trade only bonds. The market clearing condition in the contingent
bond market in each aggregate state z t is given by:
             X                                                     np          
                   µz azt−1 (z t , η t ) + µbh abh    t   t               t   t     t t                t
                                                t−1 (z , η ) + µnp at−1 (z , η ) π(η |z ) = (1 − γ)Y (z ),   (2.7)
              ηt


where az , ah , and anp denote the bond holdings of the active traders, the buy-and-hold traders and
the non-participants respectively.

Definition 2.1. A sequential equilibrium for this economy is defined in the standard way. It
consists of a list of contingent bond holdings {ajt−1 (z t , η t )}, j ∈ {z, bh, np}, a consumption allocation
{cj (z t , η t )}, j ∈ {z, bh, np}, and a list of contingent bond prices {q(zt+1 , z t )} such that: (i) given
these prices, a household’s asset and consumption choices maximize her expected utility subject to

                                                                   9
the budget constraints, the solvency constraints and the measurability constraints for her trading
technology j ∈ {z, bh, np}, and (ii) the contingent bond market clears in each node z t .

    The next section analytically characterizes the household consumption function and the equi-
librium pricing kernel in terms of the distribution of the household’s stochastic multipliers.



3     Solving for Equilibrium Allocations and Prices
This section reformulates the household’s problem in terms of a single present-value budget con-
straint, and sequences of measurability constraints and solvency constraints. We show how to use
the cumulative multipliers on these constraints in the saddle point problem as stochastic weights
that fully characterize equilibrium allocations and prices. Cuoco and He (2001) were the first to
use a similar stochastic weighting scheme in a discrete-time setup.
    From these contingent bond prices in the sequential equilibrium, we can back out the state
prices recursively as follows:

                                   π(z t )P (z t ) = q(zt , z t−1 )q(zt−1 , z t−2 ) · · · q(z1 , z 0 )q(z0 ).                    (3.1)

We use Pe(z t , η t ) to denote the Arrow-Debreu prices P (z t )π(z t , η t ). Let m(z t+1 |z t ) = P (z t+1 )/P (z t )
denote the stochastic discount factor that prices any random payoffs. We assume there is always a
non-zero measure of active traders. This guarantees the uniqueness of pricing of payoffs contingent
on aggregate events.
    By repeated backward substitution of the sequential budget constraint, and using the recursive
definition of the state prices in equation (3.1), we recover the static budget constraint:
                               X X                                                         
                                                  Pe(z t , η t ) γY (z t )ηt − c(z t , η t ) + a−1 (z 0 ) ≥ 0.                   (3.2)
                               t≥1   (z t ,ηt )


By the same token, repeated substitution delivers the following ‘static version’ of the measurability
constraints for active traders in node (z t , η t ):
            X              X
                                            Pe(z τ , η τ ) [γY (z τ )ητ − c(z τ , η τ )] = −Pe(z t , η t )at−1 (z t , η t−1 ).   (3.3)
             τ ≥t   (z τ ,ητ )(z t ,ηt )


For passive traders, we simply replace at−1 (z t , η t−1 ) on the right hand side by at−1 (z t−1 , η t−1 )Rp (̟, z t ).
The extension to static solvency constraints is obvious:
                            X               X
                       −                                 Pe(z τ , η τ ) [γY (z τ )ητ − c(z τ , η τ )] ≥ M (η t , z t ).          (3.4)
                            τ ≥t (z τ ,ητ )(z t ,ηt )


                                                                            10
In the static optimization problem, each household chooses a consumption plan to maximize her
expected utility subject to the static budget constraints in (3.2), the measurability constraints
for her trading technology j ∈ {z, bh, np} in (3.3) and the solvency constraints in (3.4). A static
equilibrium for this economy is defined in the standard way.

Definition 3.1. A static equilibrium consists of a consumption allocation {cj (z t , η t )}, j ∈ {z, bh, np}
and a list of state prices P (z t , η t ) such that: (i) given these prices, a household’s asset and con-
sumption choices maximize her expected utility subject to the static budget constraints in (3.2),
the solvency constraints in (3.4) and the measurability constraints for her trading technology j ∈
{z, bh, np} in (3.3), and the goods markets clears in each node z t .

   While every time-zero trading equilibrium has an equivalent sequential trading equilibrium, a
sequential trading equilibrium only has an equivalent time-zero trading equilibrium if the present
value of the aggregate endowment is finite under the constructed prices, or:

Condition 3.1. Interest rates are said to be high enough iff
                                  X X
                                                   Y (z t )π(z t , η t )P (z t , η t ) < ∞
                                  t>0 (z t ,ηt )


   This then implies that the present value of any individual’s initial endowment is also finite since
the idiosyncratic shock is assumed to have finite support. In economies with sequential trading
and solvency constraints, it does not immediately follow that endowments are finitely valued in
equilibrium (see Hellwig and Lorenzoni (2009)), because sequential budget and measurability con-
straints are implicity backward-looking, while the time-zero trading economy has forward looking
versions of these constraints.

Proposition 3.1. If condition (3.1) is satisfied, the sequential equilibrium allocations and prices
can be implemented as an equilibrium of the static economy. Let the contingent bond positions
{ajt−1 (z t , η t )}, j ∈ {z, bh, np}, the consumption allocation {cj (z t , η t )}, j ∈ {z, bh, np}, and the
contingent bond prices {q(zt+1 , z t )} be a sequential equilibrium. Then the state prices {P (z t , η t )}
implied by {q(zt+1 , z t )} and the consumption allocation {cj (z t , η t )} constitute a static equilibrium.

   Given these results, we can restate the household’s problem as one of choosing an entire con-
sumption plan from a restricted budget set. The central result is a martingale condition for the
stochastic multipliers.


3.1     Characterizing Equilibrium Allocations and Prices
In the static economy, markets open only once at time zero. The household chooses a consumption
plan and a net wealth plan subject to a single budget constraint at time zero, as well as an infinite

                                                              11
number of solvency constraints and measurability constraints. These measurability constraints
act as direct restrictions on the household budget set. This optimization problem has a convex
constraint set, as can easily be verified, because any convex combination of two allocations that sat-
isfy the budget constraint, the solvency constraints and the measurability constraints, also satisfies
these constraints. As a result of the convexity, if in addition we assume that the Markov process
for (z, η) satisfies the Feller condition and that the utility function is bounded, then (i) Lagrangian
multipliers exist for the budget constraint, the solvency and measurability constraints such that a
saddle point can be found for an optimum of the static optimization problem (see proposition 2 in
Marcet and Marimon (1999)) and (ii) the saddle point problem is well-defined in its own right, i.e.
it has a solution (see proposition 3 in Marcet and Marimon (1999)). The boundedness of utility
can be achieved by forcing the consumption shares (as a share of the aggregate endowment) to
lie on a bounded set. This is what we do in the computational section (see separate appendix for
details).
   We start off by considering the active traders.




Active Traders Let χ denote the multiplier on the present-value budget constraint, let ν(z t , η t )
denote the multiplier on the measurability constraint in node (z t , η t ), and, finally, let ϕ(z t , η t )
denote the multiplier on the solvency constraint. The saddle point problem of an active trader can
be stated as:
                             ∞
                             X             X
L=       min       max               βt                u(c(z t , η t ))π(z t , η t )
        {χ,ν,ϕ} {c,a−1 }
                              t=1         (z t ,ηt )
                                                                                                   
             X X                                                                                 
        +χ                        Pe(z t , η t ) γY (z t )ηt − c(z t , η t ) + a−1 (z 0 )
                                                                                                   
                 t≥1 (z t ,ηt )
                                                                                                                                            
            X X                           X                  X                                                                              
        +                 ν(z t , η t )                        Pe(z τ , η τ ) [γY (z τ )ητ − c(z τ , η τ )] + Pe(z t , η t )at−1 (z t , η t−1 )
                                                                                                                                               
          t≥1 (z t ,ηt )            τ ≥t (z τ ,ητ )(z t ,ηt )
                                                                                                                                             
          X X                                                            X          X                                                        
                            t   t               t   t e t         t                           e     τ     τ         τ              τ      τ
        +                ϕ(z , η ) −M t (z , η )P (z , η ) −                                  P (z , η ) [γY (z )ητ − c(z , η )] ,
                                                                                                                                             
            t≥1 (z ,η )
                 t t                                                             τ τ   τ ≥t (z ,η )(z ,η )
                                                                                          t t




Following Marcet and Marimon (1999), we can construct new weights for this Lagrangian as follows.
First, we define the initial cumulative multiplier to be equal to the multiplier on the budget
constraint: ζ0 = χ. Second, the multiplier evolves over time as follows for all t ≥ 1:
                                                                                     
                                      ζ(z t , η t ) ≡ ζ(z t−1 , η t−1 ) + ν z t , η t − ϕ(z t , η t ).                              (3.5)

                                                                              12
Substituting for these cumulative multipliers in the Lagrangian, we recover the following expression
for the constraints component of the Lagrangian for active traders:
    XX                                                                                  
                  Pe(z t , η t ) ζ(z t , η t ) γη t Y (z t ) − c(z t , η t ) + ν z t , η t at−1 (z t , η t−1 ) − ϕ(z t , η t )M (z t , η t )
    t≥1 z t ,ηt

    +χa−1 (z 0 ).

This is a standard convex programming problem –the constraint set is still convex, even with the
measurability conditions and the solvency constraints. The first order conditions are necessary
and sufficient. The first order condition for consumption implies that the cumulative multiplier
measures the household’s discounted marginal utility relative to the state price P (z t ):

                                                         β t u′(c(z t , η t ))
                                                                 t     t
                                                                               = P (z t ).                                             (3.6)
                                                             ζ(z , η )

This condition is common to all of our traders irrespective of their trading technology because
differences in their trading technology do not affect the way in which c(z t , η t ) enters the objective
function or the constraint portion of the Lagrangian. Hence, along the optimal consumption path,
the marginal utility of households is proportional to their cumulative multiplier, regardless of their
trading technology.

The first order condition with respect to net wealth at (z t+1 , η t ) is given by:
                              X                
      E ν z t+1 , η t+1 |z t+1 =   ν z t+1 , η t+1 π(z t+1 , η t+1 )P (z t+1 ) = 0, ∀(η t , z t+1 ).                                   (3.7)
                                              ηt+1 ≻ηt


We refer to this as the martingale condition. This condition is specific to the trading technology. For
the active trader, it implies that the average measurability multiplier across idiosyncratic states
η t+1 is zero since P (z t+1 ) is independent of η t+1 . In each aggregate node z t+1 , the household’s
marginal utility innovations not driven by the solvency constraints (νt+1 ) have to be white noise.
The trader has high marginal utility growth in low η states and low marginal utility growth in
high η states, but these innovations to marginal utility growth average out to zero in each node
(z t , zt+1 ). If the solvency constraints do bind, then the cumulative multipliers decrease on average:

                                                E{ζ(z t+1 , η t+1 )|z t+1 } ≤ ζ(z t , η t ),

which we obtained by substituting (3.5) into the first-order condition (3.7). Hence our recursive
multipliers are a bounded super-martingale. The cumulative multiplier is a martingale if the
solvency constraints do not bind for any η t+1 ≻ η t given z t+1 .

   The common characteristic for all unconstrained active traders is that their marginal utility

                                                                       13
innovations are orthogonal to any aggregate variables, because we know that E[νt+1 |z t+1 ] = 0 in
each node z t+1 . Below, we explore the implications of this finding, but first, we show that buy-
and-hold traders and non-participants satisfy the same martingale condition, but with respect to
a different measure.


Passive Traders For the passive investors, the constraints portion of the Lagrangian looks
somewhat different:
           XX                                                                                                                    
      +                  Pe(z t , η t ) ζ(z t , η t ) γη t Y (z t ) − c(z t , η t ) + ν z t , η t at−1 (z t−1 , η t−1 )Rp (̟, z t )
           t≥1 z t ,ηt
           XX                                                    
      −                  Pe(z t , η t ) ϕ(z t , η t )M(z t , η t ) + χa−1 (z 0 ).
           t≥1 z t ,ηt


The other components of the Lagrangian and the law of motion for the cumulative multiplier in
(3.5) are unchanged. The first order condition with respect to at (z t+1 , η t+1 ) is given by:
                                X                              
                                                ν z t+1 , η t+1 Rp (̟, z t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0.                      (3.8)
                         z t+1 ≻z t ,ηt+1 ≻ηt


The other conditions are identical. Using the recursive definition of the multipliers, the first order
condition in (3.8) can be stated as:
                                                  X
                         ζ(z t , η t ) ≥                          ζ(z t+1 , η t+1 )e
                                                                                   π (z t+1 , η t+1 |z t , η t ), ∀(η t , z t )     (3.9)
                                           z t+1 ≻z t ,ηt+1 ≻ηt


where the twisted probabilities are defined as:

                                                         m(z t+1 |z t )Rp (̟, z t+1 )
                  e(z t+1 , η t+1 |z t , η t ) =
                  π                                                                         π(z t+1 , η t+1 |z t , η t ),
                                                      E {m(z t+1 |z t )Rp (̟, z t+1 )|z t }

Relative to these twisted probabilities, the passive trader’s multipliers are a super-martingale.
Moreover, when the solvency constraints do not bind, the multipliers satisfy a martingale condition.
Different portfolio rules lead to differences in the rates of return and the twisting factor. In the
case of non-participants, Rp (0, z t+1 ) is the risk-free return Rf (z t ), which is measurable with respect
to the aggregate history at t.


Euler equations These martingale conditions enforce the Euler inequalities for the different
                                                             p
traders: (i) nthe passive traders:o u′ (ct ) ≥ βEt Rt+1           (̟, z t+1 )u′(ct+1 ) ,(ii) the active traders :
                                 t
u′ (ct ) ≥ βEt u′ (ct+1 ) PP(z(zt+1) ) |z t+1 . In the Euler equation of the active traders, we are averaging
across idiosyncratic states ηt+1 in the next period, conditional on some aggregate node z t+1 . These

                                                                           14
trading-technology-specific Euler equations follow directly from the martingale conditions, which
depend on the trading technologies, and the first order condition for consumption, which do not.
All households share the same first order condition for consumption, regardless of their trading
technology. This implies that we can derive a consumption sharing rule and an aggregation result
for prices.



3.2     Aggregate Multiplier
We can characterize equilibrium prices and allocations using the household’s multipliers and the
aggregate multipliers. We use C(z t ) to denote aggregate consumption.

Proposition 3.2. The household consumption share, for all traders is given by

                     c(z t , η t )   ζ(z t , η t ) α
                                                         −1
                                                                       X               −1
                                                                 t
                             t
                                   =          t
                                                     , where h(z   ) =    ζ(z t , η t ) α π(η t |z t ).                (3.10)
                      C(z )            h(z )                            t                 η


The SDF is given by the Breeden-Lucas SDF and a multiplicative adjustment:
                                                                              −α                         α
                                           t+1       t            C(z t+1 )                   h(z t+1 )
                                     m(z         |z ) = β                                                          .   (3.11)
                                                                   C(z t )                     h(z t )



Proof. The consumption sharing rule follows directly from the ratio of the first horder conditions    i
                                                                                        t t    (z t )
and the market clearing condition. Condition (3.6) implies that c(z t , η t ) = u′−1 ζ(z ,ηβ)P
                                                                                            t           . In
addition, the sum of individual consumptions aggregate up to aggregate consumption: C(z t ) =
P       t   t    t t             t t        t t       t                                                t
  ηt c(z , η )π(η |z ), where π(η |z ) = π(η , z )/π(z ) also denotes the fraction of agents in node z
who have drawn η t . This implies that the consumption share of the individual with history (z t , η t )
is                                                                        h                         i
                                                                              ζ(z t ,ηt )P (z t )
                                          t
                                      c(z , η )  t                 u′−1               βt
                                                =P                    h                         i                  .
                                       C(z t )         ′−1                ζ(z t ,ηt )P (z t )
                                                                                                    π(η t |z t )
                                                  ηt u                            βt

With CRRA preferences, this implies that the consumption share is given by equation (3.10).
Hence, the −1/αth moment of the multipliers summarizes the risk sharing within this economy.
We refer to this moment of the multipliers simply as the aggregate multiplier.
     Making use of (3.2) and the individual first-order condition, we get that
                           "                                                      #
                                     u′−1 [β −t ζ(z t , η t )P (z t )]
                  β t u′       P ′−1 −t t t                    t       t t
                                                                           C(z t ) = P (z t )ζ(z t , η t ).
                                ηt u    [β ζ(z , η )P (z )] π(η |z )

                                                                     15
If u′−1 is homogeneous, which it is with CRRA preferences, then this expression simplifies to
                                               "                                      #
                                                           C(z t )
                                      β t u′       P ′−1      t , η t )] π(η t |z t )
                                                                                        = P (z t ),
                                                    ηt u [ζ(z

which implies that the ratio of the state prices is given by
                                           h                                                        i
                                                                    C(z t+1 )
                                     βu′       P
                                                   t   u′−1 [ζ(z t+1 ,ηt+1 )]π(ηt+1 |z t+1 )                P (z t+1 )
                                                hη                                              i       =              .   (3.12)
                                           u′        P              C(z t )                                  P (z t )
                                                             u ′−1 [ζ(z t ,η t )]π(η t |z t )
                                                         η t



Given that we are assuming CRRA preferences, this implies the expression for the SDF in equation
(3.11). The equilibrium SDF is the standard Breeden-Lucas SDF times the growth rate of the ag-
gregate multiplier. This aggregate multiplier reflects the aggregate shadow cost of the measurability
and the solvency constraints faced by households.


   This aggregation result extends the complete market result in Chien and Lustig (2009) to
the case of incomplete markets and heterogeneous trading technologies. This proposition directly
implies that an equilibrium for this class of incomplete market economies can be completely char-
acterized by a process for these cumulative multipliers {ζ(η t, z t )}, and by the associated aggregate
multiplier process {h(z t )}. Section 4 describes a method to solve for these multipliers. We can use
the consumption sharing rule and the martingale condition to highlight the main features of the
savings and investment behavior of active traders.


Other Trading Technologies While we restrict ourselves to these trading technologies, our
framework is flexible enough to handle other trading technologies. The most obvious active tech-
nology is the complete markets one which allows for trading bonds contingent on both aggregate
and idiosyncratic shock realizations. In this case, there is no measurability constraint. Another
active technology precludes direct trade in state contingent bonds, but it allows for optimally
choosing the portfolio of equities and non-contingent bonds in each period. Since this trader’s
financial wealth tomorrow is determined by his savings and portfolio choice today ̟(z t , η t ), he still
faces the same measurability restriction as the passive trader (see equation (2.6)). However, the
ability to optimally choose ̟(z t , η t ) introduces an additional first-order condition of the form
                    X                                       d p
                                    ν z t+1 , η t+1            R (̟(z t , η t ), z t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0.
                                                            d̟
             z t+1 ≻z t ,ηt+1 ≻ηt


This condition implies that he is choosing ̟(z t , η t ) to relax his measurability constraint as much
as possible. In the case with only two aggregate states that we consider in the quantitative section,

                                                                                16
there is of course no difference between this stock/bond trading technology and the active trading
technology we consider in our paper.


Savings Investment Behavior The active trader increases his consumption as a share of the
aggregate endowment in aggregate states with low state prices, thus helping to clear the market.


Corrolary 3.1. If the state price is low and h(z t+1 )/h(z t ) ≤ 1, the unconstrained active trader’s
consumption share increases on average across η t+1 states in the next period. If the state price is
high and h(z t+1 )/h(z t ) > 1, her consumption share can increase or decrease.


   To understand this results, it helps to consider a hypothetical complete trader, who faces no
measurability restrictions and hence has a constant multiplier ζ in the absence of binding solvency
constraints, simply because his martingale condition reads as ν = 0. This complete trader changes
his consumption share at a rate −h(z t+1 ) /h(z t ) in each η t+1 , z t+1 state in the next period. This
is an even more aggressive trading strategy; our active trader is more conservative because he still
faces idiosyncratic risk.
   The martingale condition for active traders puts tight restrictions on the joint distribution of
returns and consumption growth. Using the SDF expression in (3.11), we can state the martingale
condition as Et [mt+1 νt+1 ] = 0 for non-participants and active traders. This gives rise to the
following expression for marginal utility growth of an unconstrained trader:
                                                                               
                                       ζt+1                   −1      ζt+1
                              Et              = 1 − Et [mt+1 ] covt        , mt+1                       (3.13)
                                        ζt                             ζt

The covariance term drops out for active traders because E[νt+1 |z t+1 ] = 0 in each node z t+1 . This
orthogonality condition is the hallmark of an “active trading” strategy. Active traders increase
their consumption growth when state prices are lower than in the representative agent model, and
they decrease consumption growth when state prices are higher than in the representative agent
model, thus satisfying the orthogonality condition. However, this covariance term is non-zero for
passive traders: their trading technology does not allow them to adjust consumption growth in
different aggregate states of the world.



3.3     Aggregate Wealth in Different Segments

We define the aggregate multiplier for each trading segment j ∈ {z, bh, np} by aggregating across
                                           P                   −1
all households in that segment: hj (z t ) = ηt ζ j (z t , η t ) α π(η t |z t ). By aggregating household wealth
across all households in a trading segment j, we can define the aggregate wealth for each group of

                                                         17
traders j ∈ {z, bh, np}:
                                                  X π(z t+1 )P (z t+1 )
                       j   t hj (z t )     j   t
                    A (z ) =      t
                                       − γµ C(z ) +         t       t
                                                                          Aj (z t+1 ),
                             h(z )                  t+1
                                                        π(z )P (z )
                                                                  z


where we use the linearity of the pricing functional. Finally, total aggregate wealth equals the
                  P j t            t               t
market portfolio:   j A (z ) = [ω(z ) + (1 − γ)Y (z )]. This follows directly from market clearing.
The measurability restrictions on the household wealth function in turn imply restrictions on the
aggregate savings share of each trader group. These restrictions will help us understand the results
in the quantitative section.
    For the remainder of the paper, we focus on buy-and-hold investors who hold debt and equity
in proportion to the market portfolio. These buy-and-hold trader invests a fraction ψ/(1 + ψ) in
bonds and the remainder 1/(1 + ψ) in equity. Hence, their portfolio return Rp (1/(1 + ψ), z t ) is
the return on a claim to all diversifiable income. This portfolio is a natural benchmark, because
this portfolio is the optimal one (and it is constant) in the case without non-participants in the
IID economy. In subsection 6.3, we vary the equity holdings of the buy-and-hold investors.
   Because the buy-and-hold traders hold the market, they do not bear any of the residual aggre-
gate risk, (in terms of their savings share) created by non-participants.
                                                                                            Abh (z t )
Proposition 3.3. Conditional on z t−1 , the aggregate wealth share                  [ω(z t )+(1−γ)Y (z t )]
                                                                                                              of buy-and-hold
traders with ̟ = 1/(1 + ψ) cannot depend on zt .

   Since the measurability constraints are satisfied for the individual household’s wealth, they also
need to be satisfied for aggregate wealth. So by the LLN:

                        Abh ([z t−1 , zt ])                             Abh ([z t−1 , z̃t ])
                                                           =
             [(1 − γ)Y ([z t−1 , zt ]) + ω([z t−1 , zt ])]   [(1 − γ)Y ([z t−1 , z̃t ]) + ω([z t−1 , z̃t ])]

where we have used the fact that the denominator is measurable w.r.t. z t . The household measur-
ability condition implies that the aggregate savings of the buy-and-hold traders be proportional
to the diversifiable income claim in all the aggregate states zt . This is not surprising, since the
buy-and-hold traders hold the market portfolio.
                                                         bh   t
    Constant aggregate consumption shares hh(z(zt ) ) for the buy-and-hold traders would trivially
satisfy this aggregate measurability constraint. Since any other consumption sequence would yield
less in total expected utility, this implies that the aggregate consumption share of the buy-and-hold
traders is constant.
                                                                                            hbh (z t )
Corrolary 3.2. Conditional on z t−1 , the aggregate consumption share                        h(z t )
                                                                                                         of the buy-and-hold
traders with ̟ = 1/(1 + ψ) cannot depend on zt .

   Second, the non-participants create residual aggregate risk.

                                                          18
                                                                                                                               Anp (z t )
Proposition 3.4. Conditional on z t−1 , the aggregate wealth share of non-participants                                [ω(z t )+(1−γ)Y       (z t )]
is inversely proportional to the aggregate endowment growth rate

    The proof is obvious and hence omitted. This follows directly from the measurability condition
of the non-participant households, which implies that their individual and hence their aggregate
wealth level cannot depend upon zt+1 .
   Finally, since the buy-and-hold traders have (conditionally) constant savings shares, and the
non-participant traders have counter-cyclical wealth shares, regardless of the {h(z t )} process, there
cannot be an equilibrium without active traders. The market simply cannot be cleared without
active traders, if there are non-participants.
    The next section derives a recursive set of updating rules for the aggregate multipliers.


4     Computation
This section describes a recursive, computational method that exploits the martingale conditions
for different traders and the consumption sharing rule to compute the equilibrium allocations and
prices.


4.1    System of Equations
To allow us to compute equilibrium allocations and prices for a calibrated version of this economy,
we recast our optimality conditions in recursive form. Making use of the consumption sharing rule,
we can express the household’s present discounted value of future consumption minus future labor
income or wealth as a function of the individual’s multiplier:
                                             "                −1
                                                                      #
                                                 ζ(z t , η t ) α
          at (ζ(z t , η t ); z t , η t ) =                       − γηt C(z t )                                                        (4.1)
                                                   h(z t )
                                                 X π(z t+1 , η t+1 )P (z t+1 )
                                       +                                           at+1 (ζ(z t+1 , η t+1 ); z t+1 , η t+1 ).
                                                           π(z t , η t )P (z t )
                                             z t+1 ,ηt+1


We refer to this as the recursive wealth equation. This recursive expression holds for all of our
different asset traders.
    The Kuhn-Tucker condition on the solvency constraint reads as:
                                                                                                   
                      ϕ(η t+1 , z t+1 ) −at (ζ(z t+1 , η t+1 ); z t+1 , η t+1 ) + M (z t+1 , η t+1 ) = 0.                             (4.2)

This condition is common to all traders, regardless of the trading technology. However, the mea-
surability and optimality conditions depend upon the trading technology.

                                                                  19
Active Traders We start with the case of active traders. Let az (·) denote the active trader’s
wealth. The measurability constraint requires that the discounted value of the future surpluses be
equal for each future η t+1 , or

                 azt+1 (ζ(z t+1 , [η t , ηt+1 ]); z t+1 , [η t , ηt+1 ]) = azt+1 (ζ(z t+1 , [η t , η̃t+1 ]); z t+1 , [η t , η̃t+1 ])

for all [η t , ηt+1 ], [η t , η̃t+1 ] and z t+1 . This implies the following Kuhn-Tucker condition for the mea-
surability constraints:
                                                                                                                   
        azt+1 (ζ(z t+1 , [η t , ηt+1 ]); z t+1 , η t+1 ) − azt+1 (ζ(z t+1 , [η t , η̃t+1 ]); z t+1 , [η t , η̃t+1 ]) ν(z t+1 , η t+1 ) = 0,
                                                                                                                                         (4.3)
for all [η t , ηt+1 ], [η t , η̃t+1 ] and z t+1 . Conditions (4.2-4.3) and the martingale condition (see eq. (3.7)),
reproduced here,
                                          X                      
                                                  ν z t+1 , η t+1 π(z t+1 , η t+1 )P (z t+1 ) = 0
                                         ηt+1 ≻ηt

determine the multiplier updating function: T z (z t+1 , η t+1 |z t , η t )(ζ(z t , η t )) = ζ(z t+1 , η t+1 ). T z is
determined by solving a simple set of simultaneous equations. Let # denote the cardinality of a
set. Using the martingale condition, note that in each node zt+1 , we have #Y − 1 measurability
equations to be solved for #Y − 1 multipliers ν(z t+1 , [η t , ηt+1 ]), one for each ηt+1 . In addition,
in each node zt+1 , we have #Y − 1 Kuhn-Tucker conditions to be solved for #Y − 1 multipliers
ϕ(z t+1 , [η t , ηt+1 ]), one for each ηt+1 . Finally, the law of motion for the cumulative multiplier ζ is
given in (3.5).




Passive Traders For passive traders, which includes both the buy-and-hold investors and the
nonparticipants as special cases, the measurability condition is given by:

  ajt+1 (ζ(z t+1 , η t+1 ); z t+1 , η t+1 )   ajt+1 (ζ([z t , z̃t+1 ], [η t , η̃t+1 ]); [z t , z̃t+1 ], [η t , η̃t+1 ])
                                            =                                                                           , j ∈ {bh, np} (4.4)
             Rp (z t , zt+1 )                                           Rp (z t , z̃t+1 )

for all η t+1 , [η t , η̃t+1 ], z t+1 and [z t , z̃t+1 ], the martingale condition becomes:
                                  X                              
                                                  ν z t+1 , η t+1 Rp (z t , z̃t+1 )π(z t+1 , η t+1 )P (z t+1 ) = 0.                    (4.5)
                           z t+1 ≻z t ,ηt+1 ≻ηt


The updating functions for the passive traders,

                                    T j (z t+1 , η t+1 |z t , η t )(ζ(z t , η t )), ∀(z t , η t ), j ∈ {bh, np}

                                                                        20
are the solution to conditions (4.2), the Kuhn-Tucker condition associated with the measurability
condition (4.4) and their martingale condition (4.5). For the buy-and-hold traders, the appropriate
return is the return on diversified wealth, and for the nonparticipants it is the risk-free rate.

Definition 4.1. The updating function T j (·), j ∈ {z, bh, np} is a solution to a system of equations
defined by:

  1. the measurability conditions using the recursive expression for aj

  2. the martingale conditions

  3. the solvency constraint using recursive expression for aj

Finally, these updating functions for each of the trading technologies T j (·), j ∈ {z, bh, np} determine
the law of motion for the aggregate multiplier:

                       XZ     X                                                   −1 π(η t+1 , z t+1 |η t , z t )
                                                                                                                       
      h(z   t+1
                  )=                     j
                                        T (z   t+1
                                                     ,η   t+1     t   t       t   t
                                                                |z , η )(ζ(z , η )) α                                      dΦjt ,
                       j∈T
                                                                                             π(z t+1 |z t )
                             ηt+1 ≻ηt


where Φjt is the joint distribution of multipliers and endowments and j ∈ {z, bh, np}.

     These aggregate multiplier dynamics govern the dynamics of the SDF, and hence of risk pre-
mia and asset prices. Clearly, this defines an aggregate multiplier updating operator {h1 (z t )} =
T h {h0 (z t )} that maps the initial multiplier function {h(z t )} into a new aggregate multiplier func-
tion. We are looking for a fixed point of this operator.


Independence When there are no non-participants, these multiplier updating functions T i do
not depend on the aggregate history z t , provided that (i) the aggregate shocks are i.i.d (φ(zt+1 |zt ) =
φ(zt+1 )) and (ii) the idiosyncratic shocks are independent of the aggregate shocks (π(ηt+1 , zt+1 |ηt , zt ) =
̺(ηt+1 |ηt )φ(zt+1 |zt )). This result is an extension of Krueger and Lustig (2010)’s result to the case
of segmented markets. As a result, the equilibrium distribution of the household multipliers (and
hence the second component of the SDF h(z t+1 )/h(z t ) in equation (3.11)) does not depend on the
realization of the aggregate shocks. In this case, the risk-free rate is lower than in the represen-
tative agent economy, but the risk premia are identical. Hence, we need non-participants to get
non-trivial asset pricing effects of heterogeneity in trading technologies. As long as all households
can trade a claim to diversifiable income, the lack of consumption smoothing has no bearing on
risk premia, and its only effect is to lower the equilibrium risk-free rate.
   We conclude this section by explaining the computational algorithm in detail.

                                                                      21
4.2     Algorithm
We forecast the growth rate of the aggregate multiplier [h(z t+1 )/h(z t )] by using a finite partition
of the history of aggregate shocks z t , with each element in the partition being assigned a distinct
forecast value.

Algorithm 4.1. We construct our partition of aggregate histories Σ by applying the following
two-step procedure. σ denotes an element of this partition.

   1. Truncated Histories: In a first step, we construct a partition based upon the last n aggregate
      shocks, which we denote by Z n . This partition simply consists of truncated aggregate histories:
      Σ = Z n . The number of elements in the partition is given by #Z n , where #Z is the number
       of aggregate states. We use s ∈ Z n to denote a truncated aggregate history with n lags.

   2. Refinement: In a second step, we further refine this partition in order to increase precision
      by constructing a statistic sb ∈ S b that summarizes the history of aggregate shocks realized
       prior to t − n, z t−n−1 . The refined partition of aggregate shocks is then given by Σ = Z n × S b .

   The rationale for the first partition with truncated aggregate histories is straightforward. All
households start off with the same multiplier at time 0. If we keep track of the history of aggregate
shocks z t through period t, then obviously we know the entire distribution of multipliers at t, and
we can compute all of its moments. Hence, the actual growth rate [h(z t+1 )/h(z t )] can be determined
exactly provided that one knows the entire history of the aggregate shocks z t . Of course, for large
t, keeping track of the entire aggregate history becomes impractical. However, if there is an ergodic
equilibrium6 , the effect of aggregate shocks has to wear off after some time has passed.7
   The additional state variable sb introduced in the second step soaks up residual variation in
the wealth distribution that is not captured by the truncated aggregate history and hence further
reduces the size of the allocation/forecast errors. We explain in detail how we implement this in
section 5.2. However, its inclusion does not materially change the asset pricing results.
    We define b    g (σ, σ ′ ), where σ = (s, sb ), as the forecast of the aggregate multiplier growth rate
[h(z t+1 )/h(z t )], conditional on the long-run weighted average of consumption growth rate being
equal to sb , the last n elements of z t equaling s, and the last n elements of z t+1 equaling s′ .

Algorithm 4.2. The algorithm we apply is:

                            g0 (σ, σ ′ ) = 1.
   1. conjecture a function b
   6
     By ergodic equilibrium, we mean that, if we were to simulate a large number of these economies simultaneously,
then the cross-sectional average of prices and allocations is well-defined and converges to a constant.
   7
     As n → ∞, the forecasts based upon this partition will converge to the actual realized growth rate. We found
that we obtained reasonably accurate approximation results with n = 6 in a calibrated version of the economy.

                                                        22
   2. solve for the equilibrium updating functions T0j (σ ′ , η ′|σ, η)(ζ) for all trader groups j ∈ {z, bh, np}.

   3. By simulating for a panel of N households for T time periods, we compute a new aggregate
                                  g1 (σ, σ ′ ).
      weight forecasting function b

   4. We continue iterating until gbk (σ, σ ′ ) converges.

    In our approximation, we allocate consumption to households with a version of the consump-
                                                                     g (σ, σ ′ ) in each aggregate node
tion sharing rule that uses our forecast of the aggregate multiplier b
       −1                                                                                                ′
        g (σ, σ ′ ). Prices are set using the forecast as well: m(σ ′ , σ) ≡ βe−αz b
σ, ζ α /b                                                                          g (σ, σ ′ )α . Of course,
this implies that actually allocated aggregate consumption C a differs from actual aggregate con-
sumption C:
                                                            g(z t+1 )
                                         C a (z t+1 ) =                 Y (z t+1 ),
                                                            g (σ, σ ′ )
                                                            b
where g(z t+1 ) is the actual growth rate of the aggregate multiplier in that aggregate node z t+1 .
This equation simply follows from aggregating our consumption sharing rule across all households.
When the forecast gb(σ, σ ′ ) deviates from the realized growth rate g(z t+1 ), this causes a gap between
total allocated consumption and the aggregate endowment. Hence, the percentage forecast errors
                     g ) are really allocation errors (log C a − log Y ).8
(log e = log g − log b
    With a slight abuse of notation, we use z t−n ∈ sb to denote that the long-run weighted average
growth rate equals sb . We use z t ∈ s to denote that the last n aggregate shocks equal s. The
forecasts are simply the conditional sample means of the realized aggregate growth rates in each
node (σ, σ ′ ):
                                                 1                   X
                               g (σ, σ ′ ) =
                           log b                                                        log g(z t+1 ),
                                               N(σ, σ ′ )
                                                            (z t−n ,z t ,z t+1 )∈σ×σ′

where N(σ, σ ′ ) denotes the number of observations of this aggregate history in our panel. As one
metric of the approximation quality, we report the standard deviation of the forecast errors:
                                                                                 
                                                       g (σ, σ ′ ) − log g(z t+1 ) .
                             std [log et+1 ] = std log b

                                       g (σ, σ ′ ) as the fitted value in a regression of realized growth
Equivalently, we can also think of log b
rates gt+1 on dummy variables d(σt , σt+1 ), one for each node:
                                           X
                          log gt+1 =                   log g(σt , σt+1 )d(σt , σt+1 ) + et+1 .               (4.6)
                                       (σt ,σt+1 )∈Σ


As a second metric, we also report the R2 in the forecasting regression in equation (4.6).
   8
    However, the household’s Euler equation holds exactly in each node, given that we have set the prices and
allocated consumption in each node on the basis of the forecasted aggregate multiplier, not the realized one.

                                                             23
Advantages of our Approach Our forecasting method, which uses only the history of ag-
gregate shocks, has several advantages. First, by using truncated aggregate histories, we avoid
imposing ex ante restrictions on the relation between these histories and the growth rate of the
aggregate multiplier. In the simplest case with only truncated aggregate histories in the state, we
use the conditional mean, the best predictor conditional on this history, as our forecast. Second,
because our forecasting relationship does not involve any equilibrium objects, we can construct the
law of motion for the state variables from the primitives of our economy, before we compute an
equilibrium. Third, for the same reason, the domain for the state variables can easily be determined
from the primitives of the economy in our approach. Fourth, the household’s state variables are
given by her multiplier ζ, the finite aggregate history s, the weighted average sb , and her individual
shock η. Since there is only a single continuous state variable in the household decision problem,
the multiplier ζt , we can use linear interpolation on a grid to solve the individual’s problem. This
solution technique is appropriate for dealing with the kink induced by the individual’s solvency
constraint; most of the approximation methods that are typically used to deal with continuous
state variables are not. Finally, the approach that relies on equilibrium prices is more difficult to
implement in our setting because it is not clear which prices should be used in the state space:
all current state prices, one for each aggregate state, an average of these state prices, the price of
a claim to aggregate consumption, or the price of a claim to aggregate dividends? Furthermore,
there is no reason to assume that these state prices are first-order Markov.

   A detailed description of the implementation of this algorithm is available in the separate
appendix. Next, we solve a calibrated version of this economy numerically, to examine the quan-
titative importance of heterogeneous trading opportunities for asset prices.




5    Quantitative Results in Benchmark Model

This section evaluates a calibrated version of the model. The benchmark model has no aggregate
consumption growth predictability (IID economy). Hence, all of the dynamics are generated by
the heterogeneity of trading technologies. We start with the calibration of the model in subsection
5.1, while subsection 5.2 discusses the approximation in detail. Subsection 5.3 shows that the
model with heterogeneous trading opportunities manages to reconcile the low volatility of the risk
free rate with the large and counter-cyclical volatility of the stochastic discount factor. Finally,
subsection 5.4 gives us detailed account of how the heterogeneity in trading technologies affect the
household’s consumption and portfolio.

                                                  24
5.1     Calibration
The model is calibrated to annual data. We choose a coefficient of relative risk aversion α of 5 and
a time discount factor β of .95. These preference parameters allow us to match the collaterizable
wealth to income ratio in the data when the tradeable or collateralizable income share 1 − γ is
10%, as estimated by Lustig, Van Nieuwerburgh, and Verdelhan (2009). Non-diversifiable income
includes both labor income and entrepreneurial income, among other forms. The average ratio
of household wealth to aggregate income in the US is 4.30 between 1950 and 2005. The wealth
measure is total net wealth of households and non-profit organizations (Flow of Funds Tables).
The implied ratio of wealth to consumption is higher (6.3) in the model’s benchmark calibration,
mainly because of the low risk-free rate. The households face exogenous limits on their net asset
positions. The value of the household’s net assets must always be greater than −ψ times the value
of their non-diversifiable income, where ψ ∈ (0, 1). We define the lower bound M(η t , z t ) as follows:

                                           X            X                             π(z τ , η τ )P (z τ , η τ )
                     M (η t , z t ) = −ψ                                γY (z τ )ητ                                 (5.1)
                                           τ ≥t
                                                                                      π(z t , η t )P (z t , η t )
                                                  {z τ z t ,ητ ηt }


We set the solvency constraint equal to zero: M = 0.
    In our benchmark model, 70% of households only trade the riskless asset. The remaining 30%
is split between buy-and-hold investors and active traders. This market segmentation was chosen
to match the key moments of asset prices in the post-war period. In section 6, we increase the
participation rate to 50 %. This number is more appropriate for the last two decades of the US
experience. To check the plausibility of this calibration, we show that this segmentation allows
for a close match of the recent asset share distribution and a better match of the recent wealth
distribution in the US. This is an out-of-sample test of our calibration strategy.
    In the benchmark calibration, there is no predictability in aggregate consumption growth,
as in Campbell and Cochrane (1999) –we impose φ(zt+1 |zt ) = φ(zt+1 ). We refer to this as the
IID economy. This is a natural benchmark case because all of the equilibrium dynamics in risk
premia flow from the binding borrowing and measurability constraints, not from the dynamics of
the aggregate consumption growth process itself. The other moments for aggregate consumption
growth are taken from Mehra and Prescott (1985). The average consumption growth rate is 1.83%.
The standard deviation is 3.57%. Recessions are less frequent: 27% of realizations are low aggregate
consumption growth states.
   In addition, we impose independence of the idiosyncratic risk from aggregate shocks on the
labor income process – the following condition holds: π(ηt+1 , zt+1 |ηt , zt ) = ̺(ηt+1 |ηt )φ(zt+1 |zt ). By
shutting down counter-cyclical cross-sectional variance (CCV) of labor income shocks, we want
to focus on the effects of concentrating aggregate risk among a small section of households, as
opposed to concentrating income risk in recessions. The Markov process for log η(y, z) is taken

                                                                25
from Storesletten, Telmer, and Yaron (2007) (see page 28). The standard deviation is .71, and the
autocorrelation is 0.89. We use a 2-state discretization. The elements of the process for log η are
{0.38, 1.61}.
   This section discusses the asset pricing implications of heterogeneous trading opportunities
in the IID version of our economy. We use the IID economy as a laboratory for understanding
the interaction between active and passive traders and its effect on asset prices. This interaction
generates counter-cyclical state price volatility without risk-free rate volatility, unlike other het-
erogeneous agent models (see e.g. Chien and Lustig (2009), Alvarez and Jermann (2001), and
Guvenen (2009)). The IID economy provides a natural benchmark because all investors hold the
market and the risk premium is the Breeden-Lucas one if there are no non-participants. In subsec-
tion 6.4, we activate the CCV mechanism and we allow for predictability in aggregate consumption
growth.
   We consider two cases in the HTT (heterogeneous trading technology) economy. In the first 2
cases (reported in columns (2) and (3)), only a fraction of the market participants are active traders.
In the LP (Limited Participation) economy (reported in columns (4) and (5)), all participants are
active traders. Case (1) is the benchmark. The active traders make up 10 % of the population. The
remaining 90% is split between 20% buy-and-hold traders and 70% non-participants. We choose
a low participation rate because the model’s market segmentation was calibrated to match the
moments of asset prices for the entire post-war period. Case (2) considers the case with only 50 %
non-participants, while the active traders still make up only 10 % of the population. This case offers
a better description of market segmentation in the last two decades. As an out-of-sample check
of the model’s market segmentation, we compare the implications of these choices for the wealth
distribution and the asset class share distribution against the data in subsection 6.1. Finally, Case
(3) and (4) (reported in columns (4) and (5)) report the results for the LP economy; all equity
market participants are active traders. This is the standard case considered in the literature on
limited participation. The difference between Case (1) and (3) (as well as the difference between
Case (2) and Case (4)) show the effect of the heterogeneity in trading technologies. Finally, the
last column reports the moments in the data.



5.2    Approximation

The simulation moments are generated by T = 10, 000 draws from an economy with N = 3, 000
agents. To refine the partition of aggregate histories, we construct a weighted average of aggregate
shocks:
                                              K−n
                                              X
                                         bt =      λj zt−n−j ,                                 (5.2)
                                               j=1


                                                  26
where K denotes the maximum lag considered and λ >> 0 is chosen to optimize the forecasts.
bt−n−1 summarizes the history of aggregate shocks realized prior to t − n. The statistic bt is a
continuous state variable on B; we discretize B into #S b states. To construct this grid, we selected
cut-off values to equally divide the set of realizations into #S b different bins. We chose K = 200,
and a three-part partition of B. Using a truncation of n = 5, we found that a value of λ = .95
generated the largest improvement in forecast accuracy. We assign each aggregate history z t a spot
on the grid Σ = Z n × S b using the corresponding [st , bt ].
   To assess the accuracy of the approximation method, we report the standard deviation of the
log forecast errors std(log e), conditioning on the truncated history s of length 5, and the weighted
average of consumption growth, sb , in the last row of Table I. In the IID economy, this measure
varies between .027% and .064%. So, the forecasting/allocation errors are small. The truncated
aggregate history explains most of the variation in log g. As is clear from the table, the quality
of the approximation does not depend on the composition of the passive trader pool. Table (V)
in Section B of the Separate Appendix reports a second metric: the R2 in forecasting regressions
of log g(z ′ , z) on (s, sb ), as explained in equation (4.6). In Case (1) of the IID economy, these R2
exceed .9939 for (z ′ z)-specific state-to-state regressions and .9997 for z ′ -specific regressions. In Case
(2), these R2 exceed .9962 and .9999 respectively. A natural question is whether we could increase
the accuracy by including a small number of moments of the multiplier distribution. Section B in
the Separate Appendix provides a negative answer.


5.3     Asset Pricing Results
The asset pricing statistics were generated by drawing 10,000 realizations from the model, simulated
with 3,000 agents. The left panel of Table I reports the asset pricing results in our baseline IID
experiment; the right panel reports the result for the Non-IID economy with autocorrelation in
aggregate consumption growth shocks and CCV in labor income risk. We discuss the non-IID
economy in section 6.4.
   Equity in our model is simply a leveraged claim to diversifiable income. In the Flow of Funds,
the ratio of corporate debt-to-net worth is around 0.65, suggesting a leverage parameter ψ of 2.
However, Cecchetti, Lam, and Mark (1990) report that the standard deviation of the growth rate
of dividends is at least 3.6 times that of aggregate consumption, suggesting that the appropriate
leverage level is over 3. Following Abel (1999) and Bansal and Yaron (2004) , we choose to set the
leverage parameter ψ to 3 in the IID economy. The returns on this security are denoted Rlc .
  As a benchmark, the first column in the table also reports the corresponding numbers for the
RA (representative agent) IID economy. This case is relevant, because, in the IID Economy, all
of the moments of risk premia reported in column (1) are identical in the HTT economy without
non-participants, regardless of the composition of the pool of participants. Hence, we need non-

                                                     27
participants to get non-trivial asset pricing effects of heterogeneity in trading technologies. The
composition of the other trader segments has no effect on the equity premium; the Breeden-Lucas
(RA) risk premium obtains and all traders hold the market portfolio. However, as soon as there
is a positive fraction of non-participants, this irrelevance result disappears, and the active traders
increase their exposure to market risk.
   In the RA economy, the maximum Sharpe ratio is .19 and the equity risk premium (E [Rlc − Rf ])
is 3.08%. The conditional market price of risk [σt [m]/Et [m]] is constant, because the aggregate
consumption growth shocks are i.i.d. Hence, the risk premia are constant as well. Finally, the
risk-free rate in the RA economy is 13% and it is also constant. As a result, there is no risk in
bond returns (E[Rb − Rf ] = 0). Hence, all of the dynamics reported below are generated by the
heterogeneity in trading technologies.
    In the HTT economy, the interaction between active and passive traders generates volatile
state prices and a stable risk-free rate. In case (1) of the HTT economy, the maximum Sharpe
ratio,(σ[m]/E[m]), is 0.44. The risk premium on equity is 6.7% (E [Rlc − Rf ]), while the stan-
dard deviation of returns (σ [Rlc − Rf ]) is 15.3%. This is only slightly below the average realized
excess return in post-war US data of 7.5%. The risk-free rate Rf is low (1.73%) and essentially
constant. The standard deviation of the risk-free rate is 0.10%. There is also substantial time
variation in expected excess returns; the standard deviation of the conditional market price of
risk Std [σt [m]/Et [m]] is 5.3%. The conditional market price of risk varies between 0.35 and 0.60.
Variation in γ, the tradeable income share, only affects the average risk-free rate, but it does not
affect the risk premia in this economy. If we increase γ to 0.20, the equity premium drops a mere 5
basis points and the maximum SR drops from 0.448 to 0.443. However, the risk-free rate increases
to 3.06 percent per annum (not shown in the table).
   To illustrate the time variation in risk prices, figure 1 plots a simulated path of 100 years for
the {h′ /h} shocks to the aggregate multiplier process, the conditional risk premium on equity
and the conditional market price of risk in the bottom panel. The shaded areas in the graph
indicate low aggregate consumption growth states. As is clear from the top panel in Figure 1,
[h′ /h] is large in recessions -low aggregate consumption growth states- to induce the active traders
to consume less in that state of the world, because the passive traders consume “too much” in
those states. Similarly, [h′ /h] needs to be small in high aggregate consumption growth states, to
induce the active traders to consume more in those states. The volatility in state prices induces
the small segment of active traders to reallocate consumption across aggregate states and absorb
the residual aggregate risk from the non-participants. The middle panel plots the expected excess
return on equity E [Rlc − Rf ]. Clearly, the IID economy produces counter-cyclical variation in the
risk premium. The underlying mechanism is shown the Net Wealth panel. The interaction between
active and passive traders generates counter-cyclical variation in the conditional market price of

                                                 28
risk [σt [m]/Et [m]]. In high [h′ /h] states, active traders realize low portfolio returns. The wealth
of active traders decreases as a fraction of total wealth. This means, that in order to clear the
market, the future [h′ /h] -shocks need to be larger (in absolute value), and this in turn increases
the conditional volatility of the stochastic discount factor. As a result, the conditional market
price of risk [σt [m]/Et [m]] increases after each low aggregate consumption growth realization. The
driving force behind the time variation is the time-varying exposure of active traders to equity
risk. We explore this in the next subsection.

                                       [Figure 1 about here.]


5.4    Household Portfolio Choice and Consumption
The welfare costs of being stuck with an inferior trading technology are large. The costs are
reported in percentage of lifetime consumption on the bottom of Table I. They vary from 8.6 % for
the buy-and-hold investor to 14.4 % for non-participants. These calculations are done assuming
the agent starts with the average level of wealth. In the IID economy the gains to switching are
monotonically increasing in initial wealth. If we start the agents off with only 20 % of average
wealth, the welfare costs drop to 5.9 and 9.0 % respectively.
    The size of these costs is not surprising when we consider the impact on household consump-
tion and wealth. The reason for the heterogeneity in portfolio choice is not only the heterogene-
ity in trading technologies, but also the presence of non-participants. In the case without non-
participants, all households, complete, active and buy-and-hold traders would choose the same
market portfolio: 25% equity and 75% bonds, given the leverage of 3, and the welfare costs of
being a buy-and-hold investor are zero. This result is derived in the separate appendix; it is an
extension of Krueger and Lustig (2010) to the case of segmented markets. However, in the case of
non-participation, the fraction active traders invest in equity varies over time and across traders.
On average, the equity share is 84% for the active trader. These fractions are highly volatile as
well. The standard deviation is 21% for the active trader. Not surprisingly, the heterogeneity in
portfolio choice shows up in portfolio returns. The second panel in Table I reports the average
portfolio returns realized by all traders in a segment and the average wealth they accumulate. We
take case (1) as our benchmark. We start with the active investors. Their investment strategy
                                                                           
delivers an average excess return on their portfolio of 5.77% (E RaW − Rf ) or roughly 100 basis
points less than the equity premium. The buy-and-hold investor earns excess returns of around
1.68% while the non-participants realize zero excess returns. As a result, these investors do not
manage to accumulate wealth. Because of his superior trading technology, the active traders accu-
mulates 2.77 times the average wealth level (E[Wi /W ]), while the diversified trader is right at the
average. Non-participants fail to accumulate wealth; on average, their holdings amount to only
76% of the average. This will severely limit the amount of self-insurance these non-participant

                                                 29
households can achieve. On average, an active trader accumulates 3.43 times more wealth than
the non-participant. Because the active trader invests a large fraction of his wealth in the risky
asset, his wealth share is highly volatile. The coefficient of variation (ratio of standard deviation
to average) for the active trader’s wealth share is 51%. However, most of this reflects aggregate
rather than idiosyncratic risk. On the other hand, these coefficients of variation for the passive
traders are higher, but that reflects mostly idiosyncratic risk.
   On average, the active trader invests 84% in equity, but the fraction is highly volatile (21%).
Figure 1 also plots the active investor’s net wealth and his equity share (share of total portfolio in-
vested in leveraged consumption claim’s). The equity share varies substantially over time, between
50 and 150%. Their equity exposure tracks the variation in the conditional market price of risk and
the equity premium perfectly. Since the active traders are more exposed to aggregate risk, their
share of total wealth (see top panel) declines substantially after a low aggregate shock, and their
“market share” declines. As a result, the conditional volatility of the aggregate multiplier shocks
increases; larger shocks are needed to get the active traders to clear the markets. In response to
the increase in the conditional market price of risk, the active traders increase their leverage.
   This heterogeneity in portfolio choice shows up in household consumption and aggregate con-
sumption for each trader segment as well. We report moments for household consumption as well
as for average consumption aggregated across all households in a trader segment in Table II. The
left panel reports the moments for consumption as a share of the aggregate endowment. The
right panel reports the moments for consumption. The standard deviation of household consump-
tion share growth can be ranked according to the trading technology, from 7.8% for the active
traders to 12.4% for the non-participants. The standard self-insurance mechanism breaks down for
non-participants and buy-and-hold traders; they fail to accumulate enough assets to self-insure.
However, the standard deviation of the growth rate of the cross-sectional average of household
consumption in a trader segment actually is highest for more sophisticated traders: the volatility
is 7.55 %, the same number is only 3.61% for buy-and-hold traders and 2.53 % for non-participants.
We pointed out that constant aggregate consumption as a share of the aggregate endowment for
the buy-and-hold traders trivially satisfy the aggregate measurability constraint. This turns out
to be roughly what we find is the equilibrium outcome. The volatility for the aggregate group
consumption shares of the buy-and-hold investors is 0.3%.
    Financially sophisticated households load up on aggregate consumption risk, but they are
less exposed to idiosyncratic consumption risk. This is broadly in line with the data. Malloy,
Moskowitz, and Vissing-Jorgensen (2007) find that the average consumption growth rate for stock-
holders is between 1.4 and two times as volatile as that of non-stock holders. They also find
that aggregate stockholder consumption growth for the wealthiest segment (upper third) is up to
3 times as sensitive to aggregate consumption growth shocks as that of non-stock holders. The

                                                  30
same number for all stockholders is only 1.4. We report the beta of group consumption growth
w.r.t. aggregate consumption growth β [∆ log(Ci ), ∆ log(Ca )]) in the lower panel of Table II. In
our model, this number is 1.91 for the active traders. For buy-and-hold traders, the beta is one,
as predicted by the theory.
   Next, we look at the correlation with the return on equity in the bottom panel. As a useful
benchmark, recall the case without non-participants. Household consumption shares do not depend
on aggregate shocks z t , regardless of their trading technology, and the correlation of consumption
share growth with returns is zero ρ [Rlc , (∆ log(bci )] = 0 for all households. In the HTT economy,
because of the presence of non-participants, the correlation of consumption share growth with stock
returns is highest for active traders (.498), 0 for buy-and-hold traders and -.053 for non-participants.
   Of course, the active traders absorb the residual of aggregate risk created by the passive traders.
The aggregate consumption share growth of this trader segment (C        bj (z t ) = hj (z t )/h(z t )) has a
correlation of .95 with stock returns. The same correlation for buy-and-hold investors is .141,
while the correlation for non-participants is -.97.


6     Sensitivity Analysis
We conduct a series of additional experiments to develop an understanding of the effects of hetero-
geneity in trading technologies on asset prices. In the first experiment in subsection 6.1, we increase
the rate of participation to match the current participation rate. The equity premium drops by
71 basis points as a result. We look at the wealth and asset share distribution implications of
this calibration and compare these to current data from the Survey of Consumer Finances. In the
second experiment in subsection 6.2, we replace the passive stockholders with active stockholders
to decompose the results into a limited participation effect and a HTT effect. In the third experi-
ment, we change the composition of the passive trader segment (subsection 6.3) to show that only
the average equity holdings of the passive traders matters, not the actual composition. Finally, we
relax the i.i.d. assumption for aggregate consumption growth in subsection 6.4.


6.1    Increased Participation
Case (2) (reported in column (3) of Table I) reports the effect on asset prices in the HTT economy
when participation increases to 50%. This is also closer to the actual participation rate in the US
economy in the last decade. Active traders still make up 10% of the population. The market price
of risk drops from 0.45 to 0.41 and the equity premium drops by 71 basis points to 6.01%. Hence,
our model predicts a substantial decrease in the risk premium as a result of recent increases in
participation, consistent with the evidence reported in Fama and French (2002) and Jagannathan,
McGrattan, and Scherbina (2000). However, the equity premium is still almost 300 basis points

                                                    31
larger than in the representative agent economy. In addition, the increased participation reduces
the volatility of the market price of risk from 5.3 to 4.2%.


Implications for the Wealth Distribution Table III compares the wealth distribution impli-
cations of this version of the calibrated model to wealth data from the 2004 Survey of Consumer
Finances. We introduce permanent income differences to match the joint income distribution and
wealth distribution in the data, while keeping the fraction of human wealth in each trader segment
constant. This way, the asset pricing implications of the model are preserved because of the ho-
mogeneity that is built into the model. In the twisted calibration, the active traders make up 5 %
of the population and hold 10 % of human wealth. The buy-and-hold traders hold 40 % of human
wealth but make up 35 % of the population. Finally, the non-participants hold 50 % of wealth but
make up 60 % of the population. The first two columns display the model’s income distribution
vs that in the data at different percentiles of the wealth distribution. We obtain a close match of
the income distribution in the data.
    We consider two benchmark models. The IC (Incomplete Markets) model has no heterogeneity
in trading technologies. This is a standard incomplete markets model. All agents are buy-and-hold
traders who hold the market. Note that this is the optimal portfolio choice given that there are no
non-participants. We also consider a LP (limited participation) version of the model with 50 % of
wealth held by active traders and 50 % of wealth held by non-participants.9 However, they make
up 35 % and 65 % of the population respectively.
      The top panel in Table III reports the summary statistics for the IC model and the HTT
model. We contrast the model’s predictions with the same statistics from the 2004 SCF for US
households. The Gini coefficient in the data is .793 (.697 for total assets, source: SCF, 2004). Our
model produces a Gini coefficient of .56. The model without heterogeneous trading opportunities
produces a Gini coefficient of .47. So, the heterogeneity in trading opportunities bridges half of
the gap with the data, by producing fatter tails and a more skewed distribution. The skewness of
the wealth distribution increases from .9 to 2.81 (compared to 3.6 in the data) while the kurtosis
increases from 3.2 to 14.7. (compared to 15.9 in the data).
   The 75/25 ratio increases to 7.51 from 4.78 while the 85/25 ratio increases to 9.81 from 6.39.
The 90/10 ratio increases to 195 from 82. However, the HTT model still falls well short of the data.
The poor households accumulate too much wealth in the model compared to the data. However,
the model does quite well in matching the right tail of the wealth distribution in the data.


Implications for the Asset Share Distribution Finally, we turn to the asset class share
distribution, and we check whether our model can replicate the distribution of equity shares in
  9
      This corresponds to case (4) in Table I.

                                                 32
the data. We also consider the LP (limited participation) version of our economy with 50% non-
participants and 50 % active traders. Table III shows the equity share (as a fraction of the household
portfolio) at different percentiles of the wealth distribution in the model and the data. In the data,
we rank households in terms of net worth and we backed out their equity holding as a fraction
of net wealth. We include private businesses in equity. In the IC model, all households hold the
market portfolio. Hence, the IC model over-predicts the equity shares for all households below the
80% and under-predicts for the wealthier households. The LP model model tends to over-predict
equity shares below the 95-th percentile, and it under-predicts for the higher percentiles. Clearly,
the HTT model delivers an improvement of the match with the equity share distribution in the
data compared to existing models.


6.2    Limited Participation
To disentangle the effects of heterogeneity in trading technologies from the effects of limited par-
ticipation, Cases (3) and (4) report the same moments of asset prices that obtain when all stock
market participants are active traders. Hence, we eliminate the heterogeneity in trading technolo-
gies among market participants altogether. This is the standard case considered in the literature
on limited participation (see e.g. Gomes and Michaelides (2008)). By comparing case (1) and (3)
((2) and (4) respectively), we get a precise measure of the impact of the heterogeneity in trading
technologies. The impact is substantial. In case (1), the equity premium drops 197 basis points
when we replace the 20 % buy-and-hold traders with active traders. In other words 54 % of the
increase in the equity premium (relative to the RA case) is due to the heterogeneity in trading
technologies, not limited participation. The market price of risk decreases from 0.45 to 0.33 and
its volatility drops from 5.3 % to 2.0 %. In case (2), the drop in the equity risk premium is 228
basis points (compare to case (4)). The equity premium is only 64 basis points higher than the
RA case. In this case, the heterogeneity accounts for 78% of the increase in the equity premium.


6.3    Composition of the Passive Trader Pool
Clearly, the composition of the pool of participants (active v.s buy-and-hold investors) matters
for the size of the risk premium. However, the exact composition of the pool of passive traders is
much less important. To make this point, Table IV fixes the average equity holdings of all passive
traders at the level in the benchmark model reported in case (1) in Table I but it changes the
composition of the passive trader pool . This experiment is labeled ‘1x’. In this benchmark case,
the average passive trader holds 5.56% in equity: 77 % of passive traders (non-participants) hold
no equity while 23 % (buy-and-hold traders) hold 25% equity. In the IID economy (left panel in
IV), changes in the composition of the pool have only small effects on risk premia. What matters

                                                 33
for risk premia is the average equity holdings of the passive traders. The equity risk premium is
roughly constant across Case (a)-Case (c).
    We also double the level of equity holdings of the passive traders. This experiment is labeled
‘2x’ The equity risk premium declines from 6.71 % in the ‘1x’ case to 5.53% in the ‘2x’ case.
However, interestingly, the volatility of risk premia seems largely unaffected by the increase in
average equity participation. In fact, in case (a), the benchmark case, the volatility of the market
price of risk increases from 5.3% to 5.7%. Passive traders’s demand for risky assets is inelastic
with respect to variation in state prices. Hence, the required variation in the size of state price
adjustments to clear asset markets do not decline as equity holdings increase.


6.4      Non-IID Economy
Finally, in another robustness check, we relax the i.i.d. assumption for aggregate consumption
growth and we allow for counter-cyclical cross-sectional variation in labor income. The aggregate
consumption growth dynamics match those in Mehra and Prescott (1985): we set the first-order
autocorrelation to −.14. The other moments of aggregate consumption growth are unchanged. In
addition, we allow for a concentration for income risk in recessions, as suggested by Mankiw (1986),
Constantinides and Duffie (1996) and documented in the data by Storesletten, Telmer, and Yaron
(2004). To determine the idiosyncratic shocks in this case, we follow Alvarez and Jermann (2001)
                        ′   ′
                  std( ln η |z =R)
and impose that std(   ln η′ |z ′ =E)
                                      = 1.88. We reduce the leverage parameter ψ from 3 to 2 in this case,
because the interest rate variation imputes more volatility to dividend growth and returns. This
also implies that the buy-and-hold investor now invests 33 % in equities and 66 % in the risk-free
asset.


Asset Pricing Results The asset pricing results are reported in the right panel of Table I. In
column (1), we report the results for the RA economy. The negative autocorrelation in aggregate
consumption growth imputes volatility to the risk-free rate of about 3% per annum. However,
we adjusted the leverage parameter from 3 to 2, to target the volatility of stock excess returns of
about 16% per annum in the data; without this adjustment, the volatility implied by the Non-IID
model is 21.5%. In the benchmark case (Case (1)), the maximum Sharpe ratio increases from 0.45
to 0.47 per annum. The actual Sharpe ratio on equity is 0.45. More importantly, the negative
autocorrelation makes longer bonds risky again, and thus delivers an upward sloping real yield
curve. This is not shown in the Table.


Approximation The quality of the approximation does depend on the properties of aggregate
consumption growth and labor income. In the non-IID economy, the size the approximation error
statistic std(log e) varies between 0.05% and 0.095%, about double the size of the errors in the IID

                                                   34
economy, mainly because the volatility of the shocks to g more than doubles.


7    Conclusion
To solve a dynamic incomplete markets model populated by agents with different trading technolo-
gies, we show that the same consumption sharing rule, which relates the household’s multiplier, its
state variable, to its consumption, applies to all households, regardless of their trading technology,
even though the multiplier’s dynamics are different for different trading technologies. This allows
to derive an expression for state prices as a function of the aggregate multiplier, which is one spe-
cific moment of the distribution of multipliers across households and trading technologies. To solve
for the equilibrium allocations and market-clearing prices, we simply need to forecast the growth
rate of this aggregate multiplier in each aggregate state of the world. In a calibrated version of the
model, we show that a truncated version of the history of aggregate shocks does well in forecasting
this growth rate.
    In the quantitative section of the paper, we calibrate a model with heterogeneity in trading
technologies to match the historical average of the risk-free rate and the equity premium. The
heterogeneity in trading opportunities that we introduce brings the standard model much closer to
matching the asset class share and wealth distribution in the data. The passive traders in our model
accumulate much less wealth than the active traders, even though they have identical preferences,
simply because the latter are compensated for bearing the residual aggregate risk created by the
non-participants. Hence, it is imperative to study the wealth and asset share distribution in a model
that generates large and volatile risk premia. However, the heterogeneity in trading opportunities
cannot fully account for the lack of wealth accumulation among US households that are part of
the middle class.


References
Abel, A. B. (1999): “Risk Premia and Term Premia in General Equilibrium,” Journal of Mone-
 tary Economics, 43, 3–33.

Aiyagari, S. R., A. Marcet, T. J. Sargent, and J. Seppala (2002): “Optimal Taxation
  Without State-Contingent Debt,” Journal of Political Economy, 110(6), 1220–1254.

Alvarez, F., and U. Jermann (2001): “Quantitative Asset Pricing Implications of Endogenous
  Solvency Constraints,” Review of Financial Studies, 14, 1117–1152.

Bansal, R., and A. Yaron (2004): “Risks for the Long-Run: A Potential Resolution of Asset
 Pricing Puzzles,” Journal of Finance, 59(4), 1481–1509.

                                                 35
Basak, S., and D. Cuoco (1998): “An Equilibrium Model with Restricted Stock Market Par-
 ticipation,” Review of Financial Studies, Vol. 11(2), pp. 309–341.

Calvet, L. E., J. Y. Campbell, and P. Sodini (2007): “Down or Out: Assessing The Welfare
  Costs of Household Investment Mistakes.,” Journal of Political Economy, 115(5), 707–747.

Campbell, J. Y. (2006): “Household Finance,” Journal of Finance, LXI(4), 1553–1607.

Campbell, J. Y., and J. H. Cochrane (1999): “By Force of Habit: A Consumption-Based
 Explanation of Aggregate Stock Market Behavior,” Journal of Political Economy, 107(2), 205–
  251.

Cecchetti, S. G., P.-S. Lam, and N. C. Mark (1990): “Mean Reversion in Equilibrium Asset
 Prices,” American Economic Review, Vol. 80, No. 3, 398–418.

Chien, Y.-L., and H. Lustig (2009): “The Market Price of Aggregate Risk and the Wealth
  Distribution,” Review of Financial Studies, Advance Access published online on October 8,
  2009, 1–55.

Constantinides, G. M., and D. Duffie (1996): “Asset Pricing with Heterogeneous Con-
 sumers,” Journal of Political Economy, 104, 219–240.

Cuoco, D., and H. He (2001): “Dynamic Equilibrium in Infinite Dimensional Economies with
 Incomplete Financial Markets,” Annals of Economics and Finance, 2, 265–296.

Dumas, B. (1989): “Two-Person Dynamic Equilibrium in the Capital Markets,” Review of Fi-
 nancial Studies, 2(2), 157–188.

Fama, E. F., and K. R. French (2002): “The Equity Premium,” Journal of Finance, 57(2),
  637–659.

Gomes, F., and A. Michaelides (2008): “Asset Pricing with Limited Risk Sharing and Het-
 erogeneous Agents,” Review of Financial Studies, 21(1), 415–448.

Guvenen, F. (2009): “A Parsimonious Macroeconomic Model for Asset Pricing,” Econometrica,
 77(6), 1711 – 1750.

Hellwig, C., and G. Lorenzoni (2009): “Bubbles and Self-Enforcing Debt,” Econometrica,
 77, 1137–1164.

Jagannathan, R., E. R. McGrattan, and A. Scherbina (2000): “The Declining U.S.
  Equity Premium,” Federal Reserve Bank of Minneapolis Quarterly Review, 24(4), 3–19.

                                             36
Kehoe, P. J., and F. Perri (2002): “International Business Cycles with Endogenous Incomplete
 Markets,” Econometrica, 70(3), 907–928.

Krueger, D., and H. Lustig (2010): “When is Market Incompleteness Irrelevant for the Price
 of Aggregate Risk (and when is it not)?,” Journal of Economic Theory, 145(1), 1–41.

Krusell, P., and A. Smith (1997): “Income and Wealth Heterogeity, Portfolio Choice, and
 Equilibrium Asset Returns,” Macroeconomic Dynamics, 1, 387–422.

        (1998): “Income and Wealth Heterogeneity in the Macroeconomy,” Journal of Political
  Economy, 6, 867–896.

Lustig, H., and S. V. Nieuwerburgh (2005): “Housing Collateral, Consumption Insurance
  and Risk Premia: an Empirical Perspective,” Journal of Finance, 60(3), 1167–1219.

Lustig, H., C. Sleet, and S. Yeltekin (2007): “Fiscal hedging with nominal assets,” Journal
  of Monetary Economics, 55(4), 710–727.

Lustig, H., S. Van Nieuwerburgh, and A. Verdelhan (2009): “The Wealth-Consumption
  Ratio,” Working Paper.

Malloy, C., T. Moskowitz, and A. Vissing-Jorgensen (2007): “Long-Run Stockholder
 Consumption Risk and Asset Returns,” .

Mankiw, G. N. (1986): “The Equity Premium and the Concentration of Aggregate Shocks,”
 Journal of Financial Economics, 17, 211–219.

Marcet, A., and R. Marimon (1999): “Recursive Contracts,” Working Paper Universitat
 Pompeu Fabra.

Mehra, and E. Prescott (1985): “The Equity Premium: A Puzzle.,” Journal of Monetary
 Economics, 15(2), 145–161.

Parker, J. A., and A. Vissing-Jorgensen (2009): “Who Bears Aggregate Fluctuations and
  How?,” NBER Working Paper No. 14665.

Saito, M. (1996): “Limited Participation and Asset Prices,” Working Paper University of British
  Columbia.

Storesletten, K., C. Telmer, and A. Yaron (2004): “Cyclical Dynamics in Idiosyncratic
  Labor-Market Risk,” Journal of Political Economy, 112, 695–717.

                                              37
        (2007): “Asset pricing with idiosyncratic risk and overlapping generations,” Review of
  Economic Dynamics, 10(4), 519–548.


Vissing-Jorgensen, A. (2002): “Limited Asset market Participation and Elasticity of Intertem-
  poral Substitution,” The Journal of Political Economy, 110(4), 825–853.




A      Proofs

    • Proof of Corollary 3.1:



      Proof. We know that E{ζ(z t+1 , η t+1 )|z t+1 } ≤ ζ(z t , η t ). This implies that

                   E{ζ −1/α (z t+1 , η t+1 )|z t+1 } ≥ E{ζ(z t+1 , η t+1 )|z t+1 }−1/α = ζ(z t , η t )−1/α .

      Assume h(z t+1 ) ≤ h(z t ). Then the risk-sharing rule in (3.10) implies the unconstrained active
      trader’s consumption share increases over time.



    • Proof of proposition 3.1:



      Proof. We have shown that, if interest rates are high enough (i.e. if the present value of the
      aggregate endowment is finite), any feasible allocation in the sequential economy satisfies the
      static budget constraints, using the recursive definition of state prices, as well as the static
      version of the solvency and the measurability constraints. Hence, the sequential equilibrium
      allocation is feasible in the static economy. It is sufficient to define Lagrangian multipliers
      for the static budget constraints, solvency constraints and measurability constraints, and
      verify that these are a saddle. The initial multiplier on the static budget constraint χ are
      identical for all households. Subsequently, the cumulative multipliers in each node (z t , η t )
      can be constructed recursively from the prices

                                            β t u′ (c(z t , η t )) = P (z t )ζ(z t , η t )                     (A.1)

      These multipliers are non-negative because state prices are. The saddle point property fol-

                                                            38
  lows. We define the Lagrangian as follows:
                                                                                                                 ∞
                                                                                                                 X            X
                                                             L({c}, {a−1 }, {γ}, {ν}, {ϕ}) =                            βt                u(c(z t , η t ))π(z t , η t )
                                                                                                                  t=1        (z t ,ηt )
                                                                                                                                                                  
                                                                        X X                                                                                     
                                                                   +χ                        Pe(z t , η t ) γY (z t )ηt − c(z t , η t ) + a−1 (z 0 )
                                                                                                                                                                  
                                                                            t≥1 (z t ,ηt )
                                                                                                                                                                  
      X X                           X                 X                                                                                                           
  +                 ν(z t , η t )                        Pe(z τ , η τ ) [γY (z τ )ητ − c(z τ , η τ )] + Pe(z t , η t )at−1 (z t , η t−1 )
                                                                                                                                         
    t≥1 (z t ,ηt )            τ ≥t (z τ ,ητ )(z t ,ηt )
                                                                                                                                       
    X X                                                             X         X                                                        
                      t   t               t   t e t          t                           e     τ    τ          τ              τ      τ
  +                ϕ(z , η ) −M t (z , η )P (z , η ) −                                   P (z , η ) [γY (z )ητ − c(z , η )] ,
                                                                                                                                       
      t≥1 (z ,η )
           t t                                                              τ ττ ≥t (z ,η )(z ,η )
                                                                                     t t




  First, note that the ζ we constructed minimizes L({c}, {γ}, {ν}, {ϕ}) for the sequential equi-
  librium allocations {c} because the multipliers are zero when the constraints do not bind, by
  construction from the sequential equilibrium allocations. Define
                             ∞
                             X            X                                             X X                                                      
      L({c}, {ζ}) =                 βt                u(c(z t , η t ))π(z t , η t ) −                    Pe(z t , η t ) ζ(z t , η t )c(z t , η t ) ,
                             t=1         (z t ,ηt )                                     t≥1 (z t ,ηt )


  where we have left out the rest of the Lagrangian that does not depend on {c}. To show that
  this is a saddle point, it only remains to show that the sequential equilibrium allocations {c}
  maximize the Lagrangian L({c}, {ζ}: L({c}, {ζ}) ≤ L({c}, {ζ}), which follows directly from
  the first order condition in (A.1) and from the fact that by concavity and differentiability
  we have that u(c) ≤ u(c) + u′ (c)[c − c]. To derive the saddle point result, it is sufficient to
  substitute the right hand side of this last equation into the Lagrangian.

• Proof of proposition 3.3:

  Proof. First, since the measurability constraints are satisfied for the individual household’s
  savings function, they also need to be satisfied for the aggregate savings function. So by the
  LLN:

                              Abh (z t+1 )                          Abh (z t , z̃t+1 )
                                                      =
                      [(1 − γ)Y (z t+1 ) + ω(z t+1 )]   [(1 − γ)Y ([z t , z̃t+1 ]) + ω([z t , z̃t+1 ])]

  where we have used the fact that the denominator is measurable w.r.t. z t . Note that
  P k t+1                                                                                      P
    k A (z     ) = − [(1 − γ)Y (z t , z̃t+1 ) + ω(z t , z̃t+1 )] . Hence the ratio Abh
                                                                                    a (z
                                                                                         t+1
                                                                                             )/ k Ak (z t+1 ) =
  κ(z t ) cannot not depend on zt , because of the measurability condition.


                                                                          39
                                 Table I: Moments of Asset Prices and Composition of Market Participant Pool


                                                 Benchmark IID Economy                                           Non-IID Economy with CCV

                                RA Economy          HTT Economy              LP Economy            RA Economy          HTT Economy              LP Economy          Data

                                                   Case (1)   Case (2)    Case (3)    Case (4)                       Case (1)    Case (2)    Case (3)    Case (4)
    active                                             10%         10%         30%         50%                           10%         10%         30%         50%
    buy-and-hold                                       20%         40%          0%          0%                           20%         40%          0%          0%
    non-part                                           70%         50%         70%         50%                           70%         50%         70%         50%

                                                     Asset Prices ψ = 3                                                 Asset Prices ψ = 2

    E[Rf ]                           12.96            1.728       1.919       2.232       2.496         13.04           1.315       1.579       1.895       2.277    1.049
    σ[Rf ]                           0.000            0.102       0.092       0.074       0.042         3.144           3.085       3.060       3.026       2.952    1.560

    σ[m]/E[m]                        0.193            0.448       0.409       0.326       0.259         0.193           0.471       0.427       0.354       0.280
    Std[σt [m]/Et [m]]               0.000            0.053       0.042       0.020       0.008         0.011           0.061       0.047       0.029       0.018

    E[Rlc − Rf ]                     3.081            6.714       6.008       4.740       3.725        3.325            7.376       6.613       5.516       4.361    7.531
    σ[Rlc − Rf ]                     15.94           15.297      14.881      14.634      14.459        17.282          16.106      15.787      15.768      15.686    16.94
    E[Rlc − Rf ]/σ[Rlc − Rf ]        0.193            0.439       0.404       0.324       0.258        0.192            0.458       0.419       0.350       0.278    0.444

    E[W Coll/C]                      0.855            6.473       6.404       6.400       6.365         0.835           5.586       5.539       5.688       5.691    3.870




                                                                                                                                                                                  40
                                                        Portfolio Returns and Wealth                                      Portfolio Returns and Wealth

    E[RW
       z     − Rf ]                                   5.768       4.935       3.081       1.703                         6.590       5.630       3.949       2.301
    E[RW
       bh    − Rf ]                                   1.681       1.504         −−          −−                          2.450       2.196         −−          −−
    E[RW
       np    − Rf ]                                       0           0           0           0                             0           0           0           0

    E[Wz /W ]                                         2.766       2.147       1.413       1.140                         3.117       2.328       1.532       1.175
    E[Wbh /W ]                                        0.958       0.976         −−          −−                          0.953       0.982         −−          −−
    E[Wnp /W ]                                        0.761       0.791       0.823       0.859                         0.711       0.749       0.772       0.825

                                                                 Welfare Costs                                                     Welfare Costs

    buy-and-hold                                     8.6445      6.2271         −−          −−                         6.5383      4.5080         −−          −−
    non-part                                         14.363      10.979      5.3751      2.3705                        14.668      11.257      6.6986      3.4630

                                                                Approximation                                                      Approximation

    std[log(e)](%)                                   0.0645      0.0414      0.0465      0.0279                        0.0952      0.0588      0.0782      0.0502


Notes: Parameters setting: γ = 5, β = 0.95, collateralized share of income is 0.1. The simulation moments are generated by 10, 000 draws from an economy with 3, 000 agents.
The IID Economy panel reports results for the Benchmark calibration of idiosyncratic shocks and i.i.d. calibration of aggregate shocks; the leverage parameter ψ is 3 in the
IID economy. The non-IID Economy panel reports results for the STY calibration of idiosyncratic shocks and MP calibration of aggregate shocks; the leverage parameter ψ
is 2 in the non-IID economy. The table reports the moments of asset prices for the RA (Representative Agent) economy, for the HTT (Heterogeneous Trading Technology)
economy, the LP (limited participation) economy and for the data. We use post-war US annual data for 1946-2005. The market return is the CRSP value weighted return for
NYSE/NASDAQ/AMEX. We use the Fama risk-free rate series from CRSP (average 3-month yield). To compute the standard deviation of the risk-free rate, we compute the
annualized standard deviation of the ex post real monthly risk-free rate. The welfare cost is the percentage of consumption that the non-participant (buy-and-hold investor) is
willing to give up to become an active trader. The last row (std[log(e)](%)) reports the standard deviation of the allocation error in percentage points.
                                  Table II: Moments of Household and Group Consumption in IID Economy for Case (1)


                            Panel I: moments of consumption share growth                                Panel II: moments of consumption growth

                               Household                      Group Average                           Household                       Group Average

                     σ [∆ log(b
                              cz )]            7.802            bz )]
                                                        σ[∆ log(C               4.111      σ[∆ log(cz )]            10.127   σ[∆ log(Cz )]                  7.547
                     σ [∆ log(b
                              cbh )]          11.344            bbh )]
                                                        σ[∆ log(C               0.304      σ[∆ log(cbh )]           12.112   σ[∆ log(Cdiv )]                3.612
41




                     σ [∆ log(b
                              cnp )]          12.427            bnp )]
                                                        σ[∆ log(C               1.081      σ[∆ log(cnp )]           12.908   σ[∆ log(Cnp )]                 2.534

                     ρ [Rlc , (∆ log(b
                                     cz )]     0.498                  bz )]
                                                        ρ[Rlc , ∆ log(C         0.948      ρ [Rlc , (∆ log(cz )]     0.726   β [∆ log(Cz ), ∆ log(Ca )]     1.912
                     ρ [Rlc , (∆ log(b
                                     cbh )]    0.003                  bbh )]
                                                        ρ[Rlc , ∆ log(C         0.141      ρ [Rlc , (∆ log(cbh )]    0.198   β [∆ log(Cdiv ), ∆ log(Ca )]   1.007
                     ρ [Rlc , (∆ log(b
                                     cnp )]   −0.053                  bnp )]
                                                        ρ[Rlc , ∆ log(C        −0.974      ρ [Rlc , (∆ log(cnp )]    0.143   β [∆ log(Cnp ), ∆ log(Ca )]    0.761


     Notes: Parameters setting: γ = 5, β = 0.95, collateralized share of income is 0.1. The simulation moments are generated by 10, 000 draws from an economy with 3, 000
     agents. Benchmark calibration of idiosyncratic shocks and IID calibration of aggregate shocks. The HTT model has 10% active traders, 20% buy-and-hold traders and 70%
     non-participants. This is Case (1) in Table I. The first panel reports the moments for household consumption share growth and the growth rate of the cross-sectional average
     of household consumption in each trader segment. The second panel reports the moments for household consumption growth and for the growth rates of the cross-sectional
     average of household consumption in each trader segment. Hatted variables denote shares of the aggregate endowment.
                                       Table III: Household Wealth Distribution in IID Economy for Case (2)


                                        Income                                 Wealth                                            Equity Share

                                     Model     Data              Model                         Data                                    Model             Data

                                                         IC       LP       HTT                                                   IC      LP     HTT

                                               Data                                 Net Worth     Total Assets

                kurtosis                                3.18     4.01      14.73       15.87          48.85
                skewness                                0.93     1.32      2.81        3.616          6.250
                Gini                                    0.47     0.55      0.56        0.793          0.697

                Percentile Ratio                                                                                  Percentile




                                                                                                                                                                                   42
                75/25                4.719      3.44    4.78     8.05      7.512       25.09          10.64       15%          25.00    10.92    3.85    3.231
                85/25                5.414      4.66    6.39     11.51     9.813       45.66          16.83       35%          25.00    7.21     3.40    8.579
                90/25                6.309      5.61    7.32     14.46    11.488       67.92          22.96       50%          25.00    10.83    7.68    3.381
                85/15                6.730      7.02    15.65    31.22    28.019       211.9          55.75       65%          25.00    16.92   10.89    11.79
                90/10                11.11     11.64    82.20   181.27    195.616      999.1          580.5       75%          25.00    18.21   12.73    12.46
                                                                                                                  80%          25.00    23.79   13.72    19.84
                                                                                                                  90%          25.00    41.67   22.28    25.99
                                                                                                                  95%          25.00    42.02   30.74    32.20
                                                                                                                  100%         25.00    40.77   66.86    57.61


Notes: Parameters setting: γ = 5, β = 0.95, collateralized share of income is 0.1. The simulation moments are generated by 10, 000 draws from an economy with 3, 000 agents.
Benchmark calibration of idiosyncratic shocks and aggregate shocks. The wealth data are from the 2004 SCF. The HTT model has 10% active traders, 40% buy-and-hold traders
and 50 % non-participants. The IC has 100% buy-and-hold traders. The LP model has 50 % non-participants and 50 % active traders. The income data are from the 2004 SCF.
The wealth data are from the 2004 SCF. The equity share reported is the share of equity (including private business) as a fraction of net worth. The data are from the 2004 SCF.
                                     Table IV: Moments of Asset Prices and the Composition of the Passive Trader Pool


                                                        Benchmark IID Economy                                               Non-IID Economy with CCV

                                                   1x                                 2x                                 1x                                 2x

                                      Case (a)   Case (b)   Case (c)   Case (d)    Case (e)    Case (f )   Case (a)   Case (b)    Case (c)    Case (d)    Case (e)   Case (f )
         active                           10%        10%        10%         10%        10%         10%         10%         10%         10%        10%         10%        10%
         buy-and-hold                     20%        40%        60%         20%        40%         60%         20%         40%         60%        20%         40%        60%
         non-participant                  70%        50%        30%         70%        50%         30%         70%         50%         30%        70%         50%        30%
43




         E[Rf ]                          1.728      1.700      1.692       2.058       1.937      1.900       1.315       1.274       1.264      1.916       1.577      1.515
         σ[Rf ]                          0.102      0.098      0.104       0.133       0.104      0.096       3.085       3.091       3.096      3.019       3.071      3.081

         σ[m]/E[m]                       0.448      0.452      0.454       0.378       0.406      0.413       0.471       0.476       0.478      0.367       0.428      0.438
         Std[σt [m]/Et [m]]              0.053      0.052      0.052       0.057       0.044      0.042       0.061       0.060       0.060      0.084       0.048      0.046

         E[Rlc − Rf ]                    6.714      6.794      6.853       5.530       5.982      6.104       7.376       7.479       7.575      5.626       6.691      6.838
         σ[Rlc − Rf ]                   15.297     15.336     15.426      15.039     14.975      14.991      16.105      16.138     16.273      16.278      15.974     15.935
         E[Rlc − Rf ]/σ[Rlc − Rf ]       0.439      0.443      0.444       0.368       0.399      0.407       0.458       0.463       0.465      0.346       0.419      0.429


     Notes: Parameters setting: γ = 5, β = 0.95, collateralized share of income is 0.1. The simulation moments are generated by 10, 000 draws from an economy with 3, 000 agents.
     The IID Economy reports results for the Benchmark calibration of idiosyncratic shocks and i.i.d. calibration of aggregate shocks. The non-IID Economy reports results for the
     STY calibration of idiosyncratic shocks and MP calibration of aggregate shocks. Reports the moments of asset prices for the HTT (Heterogeneous Trading Technology) economy.
     The ‘1x’ case fixes the equity holdings of all passive traders at 5.6 %. The ‘2x’ case fixes the equity holdings of all passive traders at 11.2 %
                              Figure 1: Conditional Risk Premium and Market Price of Risk



                                    predicted vs realized h/h shocks                                                 h/h shocks

               1.6                                                                         1.6


               1.2                                                                         1.2


               0.8                                                                         0.8
                     0         20           40          60             80      100               10   20     30    40    50    60    70       80   90 100

                                       Conditional Risk Premium                                            Conditional Market Price of Risk

              0.09                                                                        0.65


             0.075                                                                         0.5


              0.06
                                                                                          0.35
                         10    20     30    40    50    60    70       80   90 100               10   20     30    40    50    60    70       80   90 100

                                              Net Wealth                                                       Porfolio Share of Equity
                                                                                           1.5
               30

               20                                                                           1

               10

                                                                                           0.5
                         10    20     30    40    50    60    70       80   90 100               10   20     30    40    50    60    70       80   90 100




 Notes: Market Segmentation Case (1): 10% in active, 20% buy-and-hold and 70% non-participants. Parameters setting: γ = 5,
β = 0.95, collateralized share of income is 0.1. Plot of 100 draws from an economy with 3, 000 agents. Benchmark calibration of
idiosyncratic shocks and IID calibration of idiosyncratic shocks. The shaded are indicates low aggregate consumption growth states.




                                                                                     44
