                              NBER WORKING PAPER SERIES




                        A THEORY OF HOUSING DEMAND SHOCKS

                                           Zheng Liu
                                          Pengfei Wang
                                            Tao Zha

                                       Working Paper 25667
                               http://www.nber.org/papers/w25667


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                    March 2019




The research is supported in part by the National Science Foundation Grant SES 1558486
through the NBER and by the National Natural Science Foundation of China Project Numbers
71633003, 71742004, and 71473168. For helpful comments, we are grateful to Regis Barnichon,
Adam Guren, Oscar Jorda, Greg Kaplan, Monika Piazzesi, Amir Sufi, and Gianluca Violante.
We also thank seminar and conference participants at the Federal Reserve Bank of San Francisco,
Academia Sinica (Taipei), the 2018 AFR Summer Institute of Economics and Finance at
Zhejiang University, University of California Santa Cruz, University of Chicago, and the 2018
HKUST Workshop on Macroeconomics. Eric Tallman provided excellent research assistance.
The views expressed herein are those of the authors and do not necessarily reflect the views of the
Federal Reserve Banks of Atlanta and San Francisco, the Federal Reserve System or National
Bureau of Economic Research, or the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2019 by Zheng Liu, Pengfei Wang, and Tao Zha. All rights reserved. Short sections of text, not
to exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.
A Theory of Housing Demand Shocks
Zheng Liu, Pengfei Wang, and Tao Zha
NBER Working Paper No. 25667
March 2019
JEL No. E21,E44,G21

                                         ABSTRACT

Aggregate housing demand shocks are an important source of house price fluctuations in the
standard macroeconomic models, and through the collateral channel, they drive macroeconomic
fluctuations. These reduced-form shocks, however, fail to generate a highly volatile price-to-rent
ratio that comoves with the house price observed in the data (the “price-rent puzzle”). We build a
tractable heterogeneous-agent model that provides a microeconomic foundation for housing
demand shocks. The model predicts that a credit supply shock can generate large comovements
between the house price and the price-to-rent ratio. We provide empirical evidence from cross-
country and cross-MSA data to support this theoretical prediction.


Zheng Liu                                             Tao Zha
Federal Reserve Bank of San Francisco                 Emory University
101 Market Street, MS 1130                            1602 Fishburne Drive
San Francisco, CA 94105                               Atlanta, GA 30322-2240
zheng.liu@sf.frb.org                                  and Federal Reserve Bank of Atlanta
                                                      and also NBER
Pengfei Wang                                          tzha@emory.edu
Department of Economics
Business School
Hong Kong University of Science and Technology
Hong Kong
pfwang@ust.hk
                           A THEORY OF HOUSING DEMAND SHOCKS                             1

                                   I. Introduction

  The 2008 financial crisis was triggered by a collapse of the U.S. housing market.
The empirical macroeconomic literature suggests that housing demand shocks be the
primary driving force for the house price fluctuation (Davis and Heathcote, 2007).
Working through the collateral channel, these shocks also drive a large fraction of
business-cycle fluctuations (Iacoviello and Neri, 2010; Liu et al., 2013). In these stan-
dard macroeconomic models, aggregate housing demand shocks are proxied by shifts
in the representative agent’s preference for housing services. Such taste shifts are
of reduced form without an explicit microeconomic justification. A housing demand
shock drives the house price fluctuation through the fluctuation of the implicit rent,
implying a counterfactually large volatility of rent.
  In the data, however, the house price fluctuates much more than the rent, and
the price-to-rent ratio is highly volatile and strongly comoves with the house price.
These patterns are observed not only in the United States (Figure 1) but also in other
OECD countries as well as in various U.S. Metropolitan Statistical Areas (MSAs)
(Figure 2). Why does the price-to-rent ratio fluctuate so much, which we call the
“price-rent puzzle?” This paper develops a tractable heterogeneous-agent model that
provides a microeconomic foundation for aggregate housing demand shocks. Built on
this foundation, we offer a theoretical explanation of the observed large fluctuation in
the price-to-rent ratio.
  Our baseline model features a large number of household members, each facing an
idiosyncratic shock to their utility of housing services. In the decentralized housing
market, agents finance house purchases with both internal funds and external debts.
External financing is subject to a collateral constraint. For a given loan-to-value ratio,
there exists a cutoff point in the support of the idiosyncratic shock distribution such
that agents with the marginal utility of housing services above the cutoff point face
binding collateral constraints, whereas those below the cutoff point are unconstrained.
The cutoff point is endogenous. It depends on the distribution of idiosyncratic shocks
and it varies with changes in the credit supply condition.
  The house price in the model is determined by the the marginal rate of substitution
(MRS) between housing services and non-housing consumption for the marginal agent,
who has an idiosyncratic shock at the cutoff level. Since credit-constrained agents
have a higher marginal utility than unconstrained agents, the marginal agent has the
lowest MRS among all constrained agents or the highest MRS among all unconstrained
agents. A credit supply expansion changes not only the identity of the marginal agent
                       A THEORY OF HOUSING DEMAND SHOCKS                                 2

(the extensive margin) but also the quantity of house purchases by the new marginal
agent (the intensive margin). In particular, an increase in credit supply makes some
agents with high MRS who were initially credit-constrained become unconstrained.
As a result, the new marginal agent has a higher MRS, and this extensive margin
of adjustments tends to raise the house price. On the other hand, an increase in
credit supply also reallocates more housing to the new marginal agent, reducing the
agent’s MRS because of the diminishing marginal utility. The relative strength of the
two opposing effects depends on the risk aversion with respect to housing services.
If the housing risk version is sufficiently large, the diminishing marginal utility effect
dominates; thus, an increase in credit supply reduces the marginal agent’s MRS and
the house price falls. If the housing risk aversion is low, the opposite is true and an
increase in credit supply raises the house price.
  With a relatively low risk aversion with respect to housing services, an expansion in
credit supply raises the house price but it does not have a direct impact on the rent.
Heterogeneity in the marginal utility of housing services, together with credit con-
straints, is the key to understanding the difference between the dynamic responses of
the house price and the rent. Aggregation results in a mapping between the reduced-
form housing demand shock in the representative-agent model and the sum of the
implicit rent and the liquidity premium in the heterogeneous-agent model. This map-
ping provides a microeconomic foundation for aggregate housing demand shocks. As a
result, the equilibrium house price depends on the present values of two components:
(1) the rent that equals to the average MRS across all agents and (2) the liquidity
premium that arises from binding collateral constraints for a subset of agents with
a high marginal utility of housing services. The liquidity premium drives a wedge
between the house price and the rent, creating room for the price-to-rent ratio to
fluctuate in response to a credit supply shock.
  Two important works, Favilukis et al. (2016) and Kaplan et al. (2017), study the
driving forces of the house price as well as the price-to-rent ratio in two different
models: one with overlapping generations and the other with incomplete markets.
Favilukis et al. (2016) emphasize the importance of aggregate business-cycle risks
and the wealth distribution driven by bequest heterogeneity in preferences in under-
standing the house price boom. Kaplan et al. (2017) argue that shifts in belief about
future housing demand drives movements of the house price and the price-to-rent ratio
around the Great Recession. Our heterogeneous-agent model places a different empha-
sis: we study how a credit supply shock affects the composition of credit-constrained
                          A THEORY OF HOUSING DEMAND SHOCKS                                    3

and unconstrained agents and how changes in the composition affect the liquidity
premium. The compositional effect is consistent with Landvoigt et al. (2015) who
find that increased credit availability for poor households with low-end homes was
a major driver of the house price boom in the early 2000s because households with
smaller houses have a higher marginal utility of housing services.1
  We provide empirical evidence, across countries and across U.S. MSAs, to corrob-
orate our theoretical finding that a credit supply shock drives a large fluctuation in
the house price but not the rent as well as a strong comovement between the house
price and the price-to-rent ratio.2 For the cross-country data from 1965 to 2013, we
use an unbalanced panel of 25 advanced economies. Following the approach of Mian
et al. (2017), we construct credit supply shocks based on accelerations in household
credit growth in periods when mortgage spreads were low, where the mortgage spread
is the difference between the mortgage interest rate and 10-year sovereign bond yield.
We find that an increase in credit supply is followed by a significant and persistent
increase in the house price and the price-to-rent ratio, but it has no significant impact
on the rent. For the MSA data from 1978 to 2017, we use an unbalanced panel of
21 MSAs within the U.S. and find that a credit supply shock generates the dynamic
responses of the house price, the rent, and the price-rent ratio very similar to those
obtained from the international data. These empirical findings lend credence to our
model’s mechanism.
  The rest of the paper is organized as follows. We present a stylized representative-
agent model in Section II to highlight the price-rent puzzle. We then present in
Section III a baseline heterogenous-agent model with idiosyncratic shocks to individual
preferences for housing services. In Section IV, we characterize the equilibrium of
the heterogeneous-agent economy and show how changes in credit supply can drive
aggregate housing demand and the price-to-rent ratio. To gain the key insight of the
equilibrium, we provide an illustrative example, in Section V, that enables us to derive
the closed-form solution to the equilibrium. Section VI provides empirical evidence in
support of the model’s main prediction with panel regressions based on two distinct
datasets. Section VII concludes.

  1
   Agents with higher marginal utility in our model can be broadly interpreted as corresponding
to households with smaller houses (low-end homes). This interpretation is formalized in an alter-
native setup in which household heterogeneity stems from idiosyncratic income shocks, as shown in
Appendix A.
  2
   For more empirical studies that stress the importance of credit supply shocks in housing boom-
bust cycles, see the survey of Mian and Sufi (2018) and the references therein.
                         A THEORY OF HOUSING DEMAND SHOCKS                                     4

                     II. A simple representative-agent model

  In this section, we provide a stylized representative-agent model to illustrate how
housing demand shocks used in the macroeconomics literature drive the house price.
To sharpen the exposition of our analysis, we focus on an endowment economy such
that the house price does not interact with consumption and production.3
  Following the literature, we assume that the economy has one unit of housing supply
(e.g., the limit of land usable for housing). The representative household is endowed
with yt units of consumption goods and has the expected utility function
                               ∞
                                                h1−θ
                              X                     
                                   t             t
                           E0     β log ct + ϕt        ,                                     (1)
                              t=0
                                                1−θ

where ct denotes consumption, ht housing, and ϕt a housing demand shock—its micro
foundation is a focus of this paper. The parameter β ∈ (0, 1) is the subjective discount
factor and θ > 0 is a parameter that measures the curvature of the utility function
with respect to housing services. Our analytical results depend on the value of θ.
  The household chooses consumption (ct ), an additional house purchase (ht − ht−1 ),
and holdings of the risk-free bond (bt ) to maximize the utility function (1) subject to
the flow-of-funds constraint
                                                           bt
                            ct + qt (ht − ht−1 ) ≤ yt +       − bt−1 ,                       (2)
                                                           Rt
where qt is the house price and Rt is the risk free interest rate, both prices taken as
given by the household. The initial bond holdings b−1 and the initial housings of h−1
are also taken as given.
  The optimizing decisions lead to the Euler equation for house purchases
                                   qt       qt+1
                                      = βEt      + ϕt h−θ
                                                       t ,                                   (3)
                                   ct       ct+1
and for bond holdings
                                                     ct
                                       1 = βRt Et          .                                 (4)
                                                    ct+1
  A competitive equilibrium consists of sequences of allocations {ct , bt , ht } and prices
{qt , Rt } such that (i) taking the prices as given, the allocations solve the household’s
utility maximization problem and (ii) the markets for goods, bond, and housing all
clear: ct = yt , bt = 0, and ht = 1.
  3
   The key insight about the role of housing demand shocks in driving the house price fluctuation
carries over to a general environment with consumption and production (Iacoviello and Neri, 2010;
Liu et al., 2013).
                       A THEORY OF HOUSING DEMAND SHOCKS                                5

  Using the market clearing conditions for goods and housing, we can solve for the
equilibrium house price:                  "         ∞
                                                                   #
                                                    X
                                                           j
                                qt = yt Et                β ϕt+j .                    (5)
                                                    j=0

The implicit rent is pinned down by the household’s MRS between housing services
and non-housing consumption, which is given by

                                          rht = ϕt yt .                               (6)

Thus, the price-to-rent ratio is given by
                                                     ∞
                                 qt   1 X j
                                     = Et    β ϕt+j .                                 (7)
                                 rht  ϕt j=0

  Eq. (5) reveals that the volatility of house prices stems primarily from the housing
demand shock (ϕt ). Eq. (6) shows that this shock also drives rent fluctuations. Thus,
the representative-agent model has difficulty in generating a large volatility of the
price-to-rent ratio.
  To illustrate this point in a concrete example, consider the stationary process for
the housing demand shock
                                    ϕ̂t = ρϕ̂t−1 + et ,                               (8)
where ϕ̂t ≡ log ϕϕt denotes the log-deviation of the housing demand shock from its
steady state value and et is a white noise innovation to the shock. Log-linearizing
equation (5) around the steady state and imposing the shock process in equation (8),
we obtain                                 "   ∞
                                                               #
                                              X                          1−β
                  q̂t = ŷt + (1 − β)Et             β j ϕ̂t+j = ŷt +         ϕ̂ ,    (9)
                                              j=0
                                                                        1 − βρ t
where ŷt is a log-linearized process of yt . The log-linearized solution for the rent is
given by
                                      r̂ht = ŷt + ϕ̂t .                             (10)
The log-linearized price-to-rent ratio becomes
                                                     β(1 − ρ)
                                q̂t − r̂ht = −                ϕ̂ .                   (11)
                                                      1 − βρ t
  There are two important facts contradicted by the implications of this representative-
agent model. First, the model implies that the price-to-rent ratio falls when the house
price rises, as shown by equation (11). In the data, however, the price-rent ratio are
highly positively correlated with house prices (see Figures 1-2).
                           A THEORY OF HOUSING DEMAND SHOCKS                            6

  Second, the model cannot generate a large volatility of the price-to-rent ratio as in
the data. To illustrate this point, we keep the endowment constant so that ŷt = 0.
The model thus implies that
                                     STD(q̂t )     1−β
                                                =        < 1,                       (12)
                                     STD(r̂ht )   1 − βρ
so that the house price is less volatile than the rent, opposite of the fact discussed
above. We call these two counterfactual model implications the “price-rent” puzzle.

             III. A heterogenous-agent model of housing demand

  In this section, we argue that the price-rent puzzle is a direct result of treating the
housing demand shock as a reduced-form shock. To this end, we develop a simple
heterogeneous-agent model with an idiosyncratic shock to the household’ taste for
housing services to (a) provide a microeconomic foundation for the housing demand
shock and (b) illustrate that this micro foundation helps resolve the price-rent puzzle.
Such idiosyncratic shocks are meant to capture potential heterogeneity in households’
desires to purchase homes for reasons such as job relocations, schooling choices, and
health care needs. To obtain the key insight, we simplify the model by postulating the
existence of some implicit financial arrangement to insure non-housing consumption
against realizations of idiosyncratic taste shocks. We also abstract from labor supply
and capital investment decisions in this basic model.4

III.1. The model. Consider a large household family with a continuum of members.
Each member has an idiosyncratic taste for housing services. The idiosyncratic shock
εt follows an i.i.d. process (across members and across time) drawn from the distri-
bution F (·). Because of the complete insurance against non-housing consumption
risks, all members enjoy the same consumption ct . Housing services, however, must
be indexed by ε. The expected utility function of the family is given by
                      ∞
                            "                                      #
                                        Z ∞         1−θ
                     X                      [h (ε
                                              t t )]
                  E0     β t log ct + ϕ                 εt dF (εt ) ,               (13)
                     t=0                 0     1 − θ

where ht (εt ) denotes the housing stock owned by the member with shock εt and the
parameter ϕ measures the utility weight for housing. Note that ϕ is constant so that
there is no reduced-form aggregate housing demand shock in this heterogeneous-agent
model. The parameter θ ≥ 0 is the relative risk aversion parameter with respect to
housing services.
  4See   Appendix B for various generalizations of this stylized model.
                         A THEORY OF HOUSING DEMAND SHOCKS                                 7

  The resources available to the family at the beginning of period t includes an ex-
ogenous labor income yt and the resale value of the existing housing stock, which is
carried over from t − 1 to t by all members after paying off the matured debts for the
family. The family uses these resources to fund consumption ct shared by all members
and disperse the remaining funds at equally among members for purchasing houses in
the decentralized housing market. Since housing services are perfectly tradable across
all family members, there is an equilibrium house price qt .
  The budget constraint faced by the family is
                           Z                        Z
          ct + at = yt + qt ht−1 (εt−1 )dF (εt−1 ) − bt−1 (εt−1 )dF (εt−1 ).           (14)

In the decentralized housing market, a family member with idiosyncratic shock εt
finances her new house purchase qt ht (εt ) through both internal funds at and external
borrowings bt (εt ) at the interest rate Rt :
                                                        bt (εt )
                                   qt ht (εt ) ≤ at +            .                     (15)
                                                          Rt
As in Kiyotaki and Moore (1997), imperfect contract enforcement implies that the
external debt cannot exceed a fraction of the collateral value:
                                 bt (εt )
                                          ≤ κt qt ht (εt ),                            (16)
                                   Rt
where κt ∈ [0, 1] represents an exogenous shock to the credit availability. We impose
a constraint on short-selling the housing stock so that

                                         ht (εt ) ≥ 0.                                 (17)

Combining the flow-of-funds constraint (15) and the collateral constraint (16) gives
                                                at
                                qt ht (εt ) ≤        .
                                              1 − κt
As κt → 1, there will be no limit on house spendings. In what follows, we assume
κt < 1 to exclude this extreme case.
  The family chooses ct and at and each member with εt chooses ht (εt ) and bt (εt ) to
maximize the utility function (13), subject to the family budget constraint (14) as well
as the individual member’s flow-of-funds constraint (15), borrowing constraint (16),
and short-sell constraint (17). The initial values of b−1 and h−1 and the prices qt and
Rt are taken as given.
  Denote by λt , η t (εt ), π t (εt ) and µt (εt ) the Lagrangian multiplers associated with
constraints (14), (15), (16), and (17) respectively. In the discussions below, we con-
sider a general case with θ > 0 so that the short-sell constraint (17) is not binding,
                            A THEORY OF HOUSING DEMAND SHOCKS                               8

implying that µt (εt ) = 0. We leave the special case θ = 0 to Section V when we study
a numerical example.
  The first-order condition with respect to at is
                                     Z
                                λt = η t (εt )dF (εt ),                                  (18)

An extra unit of funds allocated to family members for purchasing new houses reduces
family consumption by one unit with the utility cost λt . The utility gain from this
allocation is the average shadow value of newly purchased houses across all members.
  The first order condition with respect to ht (εt ) is

                     η t (εt )qt = ϕεt [ht (εt )]−θ + βEt λt+1 qt+1 + κt qt π t (εt ).   (19)

For member ε, the utility cost of purchasing a unit of housing is qt η(εt ). The ex-
tra unit of housing yields the utility gain ϕεt [ht (εt )]−θ from housing services. The
unit of housing can be sold at the price qt+1 next period, yielding the present value
βEt λt+1 qt+1 . Having an extra unit of housing also increases the collateral value and
helps relax the collateral constraint, with the shadow utility value of κt qt π t (εt ). The
optimal choice of ht (εt ) implies that the marginal cost must equal the sum of these
marginal benefits.
  The first-order condition with respect to bt (εt ) is

                                   η t (εt ) = βRt Et λt+1 + π t (εt ).                  (20)

Borrowing an extra unit of funds yields the utility value η t (εt ). The family repays
the debt next period at the interest rate Rt , with the present value of the utility cost
of βRt Et λt+1 . The increase in borrowings tightens the collateral constraint with the
utility cost π t (εt ). For an optimal choice of bt (εt ), the utility gain must equal to the
sum of these two utility costs.

III.2. Equilibrium. A competitive equilibrium is a collection of prices {qt , Rt } and
allocations {ct , at , ht (εt ), bt (εt )} such that
    (1) taking the prices as given, the allocations solve the household’s utility maxi-
         mizing problem;
    (2) the markets for goods, housing, and credit all clear so that

                                                       ct = y t                          (21)
                                        Z
                                            ht (ε)dF (ε) = 1                             (22)
                                        Z
                                            bt (ε)dF (ε) = 0.                            (23)
                        A THEORY OF HOUSING DEMAND SHOCKS                                 9

                      IV. Characterizing the equilibrium

  We now characterize the equilibrium of the heterogeneous-agent model.

IV.1. The cutoff point among heterogeneous agents. Family members with
sufficiently high marginal utility (i.e., high εt ) faces binding borrowing constraints.
Thus, we conjecture that there exists a cutoff point ε∗t in the support of the distribution
F (ε) such that the borrowing constraints are binding if and only if εt > ε∗t . Lemma 1
below gives the solution for the equilibrium housing demand ht (εt ) as well as the cutoff
point ε∗t .

Lemma 1. There exists a cutoff point ε∗t in the support of the distribution F (ε), such
that                                         (          θ1    )
                                                  εt                  1
                           ht (εt ) = min                      ,1          .          (24)
                                                  ε∗t               1 − κt
  The cutoff point ε∗t is determined by
                         Z      (  1 )
                                      ε θ
                            min 1, ∗      f (ε)dε = 1 − κt .                          (25)
                                     εt

Proof. If εt ≥ ε∗t , then the borrowing constraint (16) is binding. The flow-of-funds
constraint (15) implies that
                                             bt (εt )
                        qt ht (εt ) = at +            = at + κt qt ht (εt ).          (26)
                                               Rt
Integrating over ε and imposing the market clearing conditions lead to at = qt . Sub-
stituting out at in Eq. (26), we obtain
                                                 at          1
                               ht (εt ) =                =        .                   (27)
                                            qt (1 − κt )   1 − κt
  If εt < ε∗t , then π t (εt ) = 0. From Eq. (19) and (20), we have
                                                                   −θ
                                   −θ    ∗      ∗ −θ     ∗     1
                     ϕεt [ht (εt )] = ϕεt [ht (εt )] = ϕεt              .             (28)
                                                             1 − κt
  Eq. (24) follows immediately from Eq. (27) and (28).
  Integrating Eq. (24) over εt and imposing the housing market clearing condition (22),
we obtain Eq (25).

  The proposition below establishes that, under some mild restriction on the distri-
bution of ε, the cutoff ε∗t increases with κt . Thus, a credit-supply expansion leads to
fewer credit-constrained agents.
                               A THEORY OF HOUSING DEMAND SHOCKS                                            10

Proposition 1. Assume that the support of the distribution of εt is [0, ε̄] and that κt
                            R ε̄  1
is bounded above by κ̄ ≡ 1 − 0 εε̄ θ f (ε)dε such that ε∗ (κt ) ∈ (0, ε̄) for κt ∈ (0, κ̄).
                 ∂ε∗ (κt )
Then we have       ∂κt
                             > 0.

Proof. For any ε̃ ∈ (0, ε̄),
                          Z         ε̄
                                      1 
                                        ε θ
                   lim           min 1,      f (ε)dε = 1 − κ̄ < 1 − κ,
                    ε̃→εmax 0           ε̃
                            Z ε̄      1 
                                         ε θ
                        lim      min 1,       f (ε)dε = 1 > 1 − κ.
                        ε̃→0 0           ε̃
By the Intermediate Value Theorem, equation (25) has an interior solution ε∗ (κt ) ∈
(0, ε̄). Since the left-hand side of the equation strictly decreases with ε∗t and the
                                                                                ∂ε∗ (κt )
right-hand side strictly decreases with κt , it follows that                      ∂κt
                                                                                            > 0.

IV.2. Aggregate housing demand and the house price. Integrating equation (19)
across εt , we obtain the expression for the house price
                            Z ε̄                             Z ε̄
                                           −θ
  qt λt = Et βλt+1 qt+1 + ϕ      [ht (εt )] ε dF (ε) + κt qt      π t (ε)dF (ε), for θ > 0                (29)
                                         0                                ε∗t

where the first integral on the right-hand side of the equation is the average marginal
utility (the rent) and the second integral is the liquidity premium, which is positive
if and only if εt > ε∗t . This result is formally stated in the following proposition.

Proposition 2. The equilibrium house price satisfies the Euler equation

                                             qt λt = Et βλt+1 qt+1 + ξ(κt ),                              (30)

where
                                                                                    ε̄
                                                                 ϕ(1 − κt )θ
                                                                                Z
           ξ(κt ) ≡ ϕ(1 − κt )           θ
                                             E max {ε, ε∗t }+ κt                     (ε − ε∗t ) dF (ε),   (31)
                    |          {z                         }        1 − κt        ε∗t
                             Average marginal utility            |                  {z               }
                                                                       Liquidity premium Πt

Proof. See Appendix C.

  The following proposition, built on Proposition 2, provides a microeconomic foun-
dation for the reduced-form housing demand shock.

Proposition 3. If ξ(κt ) = ϕt , then the equilibrium house price in the heterogeneous-
agent model coincides with that in the representative agent model.

Proof. The housing Euler equation (30) in the heterogeneous-agent economy is
                              qt        qt+1
                                 = βEt       + ξ(κt ).                       (32)
                              ct        ct+1
                           A THEORY OF HOUSING DEMAND SHOCKS                                       11

The housing Euler equation in the representative-agent model, represented by (3), is
rewritten for referencing convenience:
                                      qt       qt+1
                                         = βEt      + ϕt h−θ
                                                          t
                                      ct       ct+1
In equilibrium, the housing market clears so that ht = 1. Thus, if ξ(κt ) = ϕt , the
housing Euler equations in the two different economies are identical. Since goods
market clearing implies that ct = yt in both models, the equilibrium house price is
also identical.

  Clearly from Proposition 3, aggregate housing demand is a function of credit sup-
ply κt .5 Equation (31) shows that aggregate housing demand and the house price
depend on two forces: (i) the average MRS between housing services and non-housing
consumption across all agents (the implicit rent) and (ii) the liquidity premium de-
riving from binding collateral constraints for a subset of agents with high MRSs. It is
the liquidity premium that drives a wedge between price and rent, creating room for
potentially large fluctuations in the price-to-rent ratio with changes in the leverage
condition.

IV.3. The relation between credit supply and the house price and rent: the
role of the marginal agent. The house price in our model always satisfies the Euler
equation for the marginal agent, who faces the idiosyncratic shock ε∗t and is not credit
constrained:
                               η ∗t    λt+1       ϕ
                             qt = Et β      qt+1 + ε∗t (1 − κt )θ ,                             (33)
                               λt       λt        λ
                                                  | t {z        }
                                                              M RSt∗

where η ∗t = Rt Et β λλt+1
                        t
                           is an increasing function of the interest rate Rt and M RSt∗
denotes the marginal agent’s MRS between housing services and non-housing con-
sumption. For any given interest rate, the house price increases with M RSt∗ .
  To see how credit supply affects the house price through M RS ∗ , consider the cu-
mulative density function for the idiosyncratic shock
                                             ε η
                                    F (ε) =        ,                                            (34)
                                              ε̄
                                                                                             1+η
where η > 0 is the shape parameter and we normalize the scale parameter ε̄ =                  η
                                                                                                   so
that the mean of the idiosyncratic shock is one.
  5In   general, any shock that shifts the cutoff point ε∗t would shift the aggregate housing demand,
thereby driving the house price fluctuation. We focus on credit supply shocks because this mechanism
is supported by empirical evidence discussed in Section VI.
                          A THEORY OF HOUSING DEMAND SHOCKS                                    12

Proposition 4. Assume that the idiosyncratic shock follows the distribution (34). The
                                                                        1−κt
marginal agent’s MRS increases with κt if and only if θ <                ηκt
                                                                             .

Proof. Under the distribution function (34), the cutoff point is given by
                                                             1
                                        ε∗t = [(1 + θη)κt ] η ε̄.

Using the expression for M RSt∗ in Eq (33), we obtain the elasticity of M RSt∗ with
respect to κt as
                                        ∂M RSt∗ κt    1     κt
                         eM RS ∗ ,κ ≡              ∗
                                                     = −θ        .                           (35)
                                         ∂κt M RSt    η   1 − κt
Hence,
                                                                    1 − κt
                           eM RS ∗ ,κ > 0 if and only if θ <               .                 (36)
                                                                     ηκt


  Proposition 4 shows that the relation between the marginal agent’s MRS and credit
supply is non-monotonic, depending on θ, the value of the agent’s risk aversion with
respect to housing services.
  An increase in credit supply has two opposing effects on the marginal agent’s MRS.
First, according to Proposition 1, an increase in κt raises the cutoff point ε∗t , and the
new marginal agent has a higher MRS than in the original equilibrium (the extensive
margin). All else equal, this extensive-margin effect raises the house price. However,
a relaxation of the credit constraint also enables the new marginal agent to enjoy
more housing services, lowering her MRS through the diminishing marginal utility
(the intensive margin). The intensive-margin effect reduces the house price.
  The net effect depends on how risk-averse the agent is. If the marginal agent has
a sufficiently low risk aversion with respect to housing services (a low value of θ), the
extensive-margin effect dominates through a shift of the cutoff point and an increase
in κt raises the housing demand and the house price. If the marginal agent has a high
risk aversion, the intensive-margin effect dominates through the diminishing marginal
utility and an increase in κt reduces the housing demand and the house price.
  No matter what value θ is, however, the relation between the rental rate and credit
availability (κt ) remains ambiguous.6 Thus, we define the implicit rent as the average

  6We    abstract from an explicit rental market to simplify the analysis. We discuss an extension
of the model with an explicit rental market in Appendix D, where we show that that the market
rental rate equals the average MRS between housing services and non-housing consumption across
all agents.
                            A THEORY OF HOUSING DEMAND SHOCKS                                                              13

MRS across all agents:
                                              Z     ε̄
                                        ϕ
                                  rht =                  εt [ht (εt )]−θ dF (εt ).                                      (37)
                                        λt      0

Since high-MRS agents face binding borrowing constraints, a change in credit avail-
ability (κt ) affects the marginal utilities of those agents and thus the rent.

Proposition 5. For θ > 0, the rent is given by
                                           ϕ
                                  rht =       (1 − κt )θ E max {ε, ε∗t } .                                              (38)
                                           λt
The effect of a change in κt on rht is ambiguous.

Proof. In (38), (1−κt )θ decreases with κt while E max {ε, ε∗t } increases with κt , because
ε∗t itself increases with κt according to Proposition 1. Thus, the effect on rht is
ambiguous.

                                 V. A closed-form example

  In this section, we obtain closed-form solutions for the house price, the rent, and the
price-to-rent ratio by considering a special case with θ = 0 and using the distribution
function specified in equation (34). We use this example to illustrate the mechanism
through which credit market conditions can affect the house price and the price-to-rent
ratio.
  With θ = 0, the no-short-sale restriction (17) is binding for the agents with low
realizations of ε. The housing Euler equation (29) becomes
                              Z ε̄                 Z ε̄                 Z ε̄
    qt λt = Et βλt+1 qt+1 + ϕ      εdF (ε) + κt qt      π t (ε)dF (ε) +      µt (ε)dF (ε),                              (39)
                                       0                            ε∗t                     0

where the Lagrangian multiplier µt (ε) for the no-short-sale restriction is positive if
and only if ht (ε) = 0. Specifically, it is given by µt (ε) = ϕ max{ε∗t − ε, 0}.
  Equation (39) can be written in the compact form

                                       qt λt = Et βλt+1 qt+1 + ξ(κt ),                                                  (40)

where
                                                          Z   ε̄                                Z   ε∗t
                                              1
ξ(κt ) ≡            ϕE(ε)              + κt                        ϕ(εt −   ε∗t )dF (εt )
                                                                                        +ϕ                (ε∗t − εt )dF (εt ).
                    | {z }                  1 − κt          ε∗t                                 0
            Average marginal utility        |                       {z                 } |                     {z          }
                                                         Liquidity premium Πt                       Option value Ot

         = ϕ + ϕκt (1 − κt ) + ϕκ2t = ϕ(1 + κt ).
                          A THEORY OF HOUSING DEMAND SHOCKS                                 14

Thus, housing demand ξ(κt ) increases with κt , implying that the house price increases
with κt as well. However, the average marginal utility of housing (ϕ) is independent
of κt , as is the rent.
  This example illustrates that our model is capable of generating a much larger fluc-
tuation in the house price than in the rent. Consequently, the price-to-rent ratio is
as volatile as the house price and the two variables comove. This result from the
heterogeneous-agent model stands in sharp contrast to that from the representative-
agent model discussed in Section II, which fails to generate the observed large fluctu-
ation in the price-to-rent ratio and the observed comovement between the house price
and the price-to-rent ratio.




                                 VI. Empirical evidence

  In previous sections, we develop a theoretical model to show that a credit supply
shock can have a large impact on the house price, but not on rent. Therefore, the
model predicts that a boom in credit supply should raise both the house price and the
price-to-rent ratio. In this section, we present relevant empirical evidence to support
the model’s prediction.
  To obtain dynamic responses of the house price, the rent, and the price-to-rent ratio
to a credit supply shock, we follow the approach of Mian et al. (2017) and identify a
credit supply shock as an acceleration in credit growth during periods when mortgage
spreads are low. We use two distinct datasets: (i) international data and (2) U.S.
regional data. For international data from 1965 to 2013, we use an unbalanced panel
of 25 advanced economies. We follow Mian et al. (2017) and measure credit growth
by year-over-year changes in the ratio of household debt to GDP in each country. The
mortgage spread for each country is the spread between the mortgage interest rate
and the 10-year sovereign bond yield.
  For U.S. regional data from 1978 to 2017, we use an unbalanced panel of 21 MSAs
in the United States. Credit growth is measured by year-over-year changes in the
ratio of mortgage loans to the house price in each MSA, and the mortgage spread is
the effective mortgage interest rate minus the 10-year U.S. Treasury yield.7



  7Data   details and summary statistics are presented in Tables S1 and S2 of Appendix E.
                       A THEORY OF HOUSING DEMAND SHOCKS                                 15

  Using each panel dataset, we estimate the dynamic responses of housing-market
variables (price, rent, price-rent ratio) to a credit supply shock using the local-
projection approach of Jorda (2005). Specifically, we estimate the instrumental-
variable local-projection (IV-LP) model
                                               8
                                               X
                log Yi,t+h − log Yit = αh0 +         β hj ∆Di,t−j
                                                            HH
                                                                  + γ hi + uhi,t+h ,   (41)
                                               j=0

where Yi,t denotes a housing-market variable of interest in country or region i and year
t, ∆DitHH denotes a credit growth rate in country or region i from t−1 to t, γ hi captures
the country/region fixed effect, and uhi,t+h is a regression residual. The parameters
αh0 and β hj are common for all countries or regions. Following Mian et al. (2017),
we instrument credit growth by a dummy variable that equals one if the mortgage
spread is below the median and zero otherwise. The F-statistics from the first-stage
regressions suggest that we do not have a weak-instrument problem; the instrumental
variable (the mortgage spread dummy) is highly and positively correlated with the
variable of credit growth for both international and regional samples (Table 1).
  Figure 3 displays the estimated dynamic responses of house price and rent to an
expansionary credit supply shock and Figure 4 displays the responses of the price-
to-rent ratio . The left column of both figures uses the cross-country data and the
right column uses the U.S. MSA data. In both cases, an expansionary credit supply
shock leads to a large, persistent, and statistically significant increases in the house
price. One percentage-point increase in credit supply growth leads to an increase of
approximately 7.5 percentage points in the house price at its peak. This finding is
consistent with what is found in the literature (Mian et al., 2017; Jordà et al., 2016).
By contrast, the rent responses to the credit supply shock is small and statistically
insignificant (middle panels of Figure 3). The estimated rent responses from the
MSA data become marginally significant after 3 years following the impact of the
shock, but the magnitude of the rent response is small compared with the house
price response. As a result, the credit supply shock leads to a large and persistent
increase in the price-to-rent ratio (Figure 4). These empirical findings lend support
to our theoretical prediction that a credit supply shock can drive large comovements
between house price and price-to-rent ratio.

                                   VII. Conclusion

  The standard macroeconomic models that rely on reduced-form housing demand
shocks have difficulties in generating the observed large fluctuation of both the house
                       A THEORY OF HOUSING DEMAND SHOCKS                              16

price and the price-to-rent ratio. We develop a heterogeneous-agent model with
credit constraints and build a microeconomic foundation of aggregate housing de-
mand shocks. Since agents with idiosyncratic shocks have different marginal utilities
of housing services, a subset of high-marginal utility agents face binding credit con-
straints, giving rise to an endogenous liquidity premium. The liquidity premium drives
a wedge between the house price and the rent, allowing a credit supply expansion to
generate a simultaneous increase in both the house price and the price-to-rent ratio.
  Our model’s main prediction that a credit supply shock has a large impact on
the house price but not on the rent is supported by cross-country and cross-MSA
evidence. Understanding the microeconomic forces that underpin aggregate housing
demand shocks and the price-to-rent fluctuation is a critical first step for contemplat-
ing appropriate policy interventions in the housing market. We hope that our work
contributes to this important research area.
                             A THEORY OF HOUSING DEMAND SHOCKS                                      17

                Table 1. First-stage regression for the IV-LP estimation

                                       International sample MSA sample
                                                  (1)                   (2)
                     ItM S                     0.75***                0.48**
                                                (0.23)                (0.21)
                       HH
                     ∆Dt−1                     0.38***               -0.13***
                                                (0.06)                (0.04)
                       HH
                     ∆Dt−2                       0.04                  -0.04
                                                (0.05)                (0.05)
                       HH
                     ∆Dt−3                     0.09**                -0.17***
                                                (0.04)                (0.05)
                       HH
                     ∆Dt−4                       0.09                -0.25***
                                                (0.08)                (0.03)
                       HH
                     ∆Dt−5                      -0.11                  -0.07
                                                (0.11)                (0.05)
                       HH
                     ∆Dt−6                       0.03                 -0.09**
                                                (0.08)                (0.03)
                       HH
                     ∆Dt−7                     -0.15**                 0.006
                                                (0.05)                (0.03)
                       HH
                     ∆Dt−8                    -0.15***               -0.13***
                                                (0.05)                (0.03)
                     Observations                451                    558
                     F-Stat                     32.48                  34.50

Note: The table displays the first-stage regression results for the local-projection regression
specified in (41). With international data (Column (1)), the table reports the regression of a
year-over-year change in the ratio of household debt to GDP in country i and year t on its own lags
                                                                   MS
and the instrumental variable, which is the mortgage spread dummy Iit that equals one if the
mortgage spread is below its median and zero otherwise. With U.S. regional data (Column (2)),
the table reports the regression of a year-over-year change in the ratio of mortgage loans to the
house price in region (MSA) i and year t on its own lags and the mortgage spread dummy.
                                            A THEORY OF HOUSING DEMAND SHOCKS                                        18

                            10
                                                                                        Real house price
                                                                                        Price-to-rent ratio



                              5
Year-over-year change (%)




                              0




                             -5




                            -10




                            -15
                              1970   1975   1980   1985   1990   1995   2000   2005   2010     2015           2020

                            Figure 1. The real house price and the price-to-rent ratio in the United
                            States. Data source: Haver Analytics and OECD.
                                                A THEORY OF HOUSING DEMAND SHOCKS                                               19

                            Quarterly year-over-year change (%)                               Quarterly year-over-year change (%)
                      80                                                                80

                      60                                                                60

                      40                                                                40
Price-to-rent ratio




                                                                  Price-to-rent ratio
                      20                                                                20

                        0                                                                 0

                      -20                                                               -20

                                   y=-0.25+0.91x                                                    y=0.45+1.01x
                      -40                                                               -40
                                   R2 = 0.75                                                        R2 = 0.90

                      -60                                                               -60
                             -50            0             50                                  -50            0             50
                                       Real house price                                                 Real house price

                             Figure 2. The real house price and the price-to-rent ratio in OECD
                             countries (left panel) and in U.S. MSA regions (right panel). Data
                             source: see Appendix E.
                                                   A THEORY OF HOUSING DEMAND SHOCKS                            20

                                           International                                        MSA
                       15                                                     15
Real house price (%)


                       10                                                     10

                         5                                                      5

                         0                                                      0

                        -5                                                     -5

                       -10                                                    -10
                             0        2        4        6       8        10         0       2           4       6



                       15                                                     15

                       10                                                     10
Real rent (%)




                         5                                                      5

                         0                                                      0

                        -5                                                     -5

                       -10                                                    -10
                             0       2     4        6       8       10              0   2         4         6   8
                                                                                                Years

                                 Figure 3. The dynamic responses of the house price and rent to an
                                 expansionary credit supply shock. The left column (“International”) dis-
                                 plays the responses estimated with the data from 25 OECD economies.
                                 The right column (“MSA”) displays the responses estimated with the
                                 data from 21 U.S. MSAs. The solid line in each panel reports the point
                                 estimate of the dynamic responses of each variable to an increase in
                                 credit supply with the local-projection approach of Jorda (2005); the
                                 two dashed lines display one-standard-deviation confidence bands of the
                                 estimated responses.
                                                  A THEORY OF HOUSING DEMAND SHOCKS                          21

                                            International                                    MSA
                          16                                               16

                          14                                               14

                          12                                               12
Price-to-rent ratio (%)




                          10                                               10

                           8                                                8

                           6                                                6

                           4                                                4

                           2                                                2

                           0                                                0

                          -2                                               -2

                          -4                                               -4
                               0       2      4      6      8     10            0        2           4       6
                                                                                             Years

                                   Figure 4. The dynamic responses of the price-to-rent ratio to an ex-
                                   pansionary credit supply shock. The left column (“International”) dis-
                                   plays the responses estimated with the data from 25 OECD economies.
                                   The right column (“MSA”) displays the responses estimated with the
                                   data from 21 U.S. MSAs. The solid line in each panel reports the point
                                   estimate of the dynamic responses of each variable to an increase in
                                   credit supply with the local-projection approach of Jorda (2005); the
                                   two dashed lines display one-standard-deviation confidence bands of the
                                   estimated responses.
                     A THEORY OF HOUSING DEMAND SHOCKS                           22

                                     References

Davis, M. A. and J. Heathcote (2007): “The Price and Quantity of Residential
  Land in the United States,” Journal of Monetary Economics, 54, 2595–2620.
Dong, F. and Y. Wen (2019): “Long and Plosser meet Bewley and Lucas,” Journal
  of Monetary Economics, forthcoming.
Favilukis, J., S. C. Ludvigson, and S. van Nieuwerburgh (2016): “The
  Macroeconomic Effects of Housing Wealth, Housing Finance, and Limited Risk-
  Sharing in General Equilibrium,” Journal of Political Economy, 125, 140–223.
Iacoviello, M. and S. Neri (2010): “Housing Market Spillovers: Evidence from
  an Estimated DSGE Model,” American Economic Journal: Macroeconomics, 2.
Jorda, O. (2005): “Estimation and Inference of Impulse Responses by Local Projec-
  tions,” American Economic Review, 95, 161–182.
Jordà, O., M. Schularick, and A. M. Taylor (2016): “The Great Mortgaging:
  Housing Finance, Crises and Business Cycles,” Economic Policy, 107–152.
Kaplan, G., K. Mitman, and G. Violante (2017): “The Housing Boom and
  Bust: Model Meets Evidence,” Unpublished Manuscript.
Kiyotaki, N. and J. Moore (1997): “Credit Cycles,” Journal of Political Economy,
  105, 211–248.
Lagos, R. and R. Wright (2005): “A Unified Framework for Monetary Theory
  and Policy Analysis,” Journal of Political Economy, 113, 463–484.
Landvoigt, T., M. Piazzesi, and M. Schneider (2015): “The Housing Market(s)
  of San Dieg,” American Economic Review, 105, 1371–1407.
Liu, Z., P. Wang, and T. Zha (2013): “Land-Price Dynamics and Macroeconomic
  Fluctuations,” Econometrica, 81.
Mian, A. and A. Sufi (2018): “Finance and Business Cycles: The Credit-Driven
  Household Demand Channel,” Journal of Economic Perspectives, 32, 31–58.
Mian, A., A. Sufi, and E. Verner (2017): “Household Debt and Business Cycles
  Worldwide,” Quarterly Journal of Economics, 132, 1755—1817.
Wen, Y. (2009): “An Analytical Approach to Buffer-Stock Saving under Borrowing
  Constraints,” Federal Reserve Bank of St. Louis Working Paper 2009-026B.
——— (2015): “Money, Liquidity, and Welfare,” European Economic Review, 76, 1–
  24.
                           A THEORY OF HOUSING DEMAND SHOCKS                                         23

  The appendices contain a proof to Proposition 2 in the main text (Appendix C),
some details of the data used in our empirical analysis (Appendix E), and several vari-
ations of the baseline heterogeneous-agent model (Appendix A, B, and D). All labels
for equations, figures, tables, definitions, and propositions begin with S, standing for
supplement to the main text.



                     Appendix A. Heterogeneity in income

  In our benchmark model, we assume that the source of heterogeneity lies in the
agent’s tastes for housing. Idiosyncratic taste shocks give rise to differences in the
marginal utility of housing across agents. Our framework with heterogenous marginal
utilities, combined with credit constraints, provides a microeconomic foundation for
housing demand shocks. More importantly, it gives rise to an empirically plausible
mechanism that can potentially generate the observed large fluctuations in the price-
to-rent ratio and its strong comovement with the house price.
  The main insights, however, do not hinge upon the particular way of modeling
heterogeneity. We now consider a different type of heterogeneity. Instead of assuming
idiosyncratic preference shocks, we consider idiosyncratic income shocks. We show
that all the main results obtained above carry over to this alternative setup.
  Consider a household family with a continuum of members. All members enjoy
the same consumption ct . Each member gets a transfer payment at from the family
for purchasing houses in the decentralized housing market. Before their house pur-
chase decisions, they each receives an idiosyncratic shock ω t so that their effective net
worth is ω t at . Since households with different realizations of ω t make different house
purchasing decisions, the housing services in the utility function for each member are
indexed by ω t . The household utility function is given by

                           ∞
                                     "                                             #
                                                       ∞
                                                           [ht (ω t )]1−θ
                           X                      Z
                      E0         β t log ct + ϕ                           dF (ω t ) ,              (S1)
                           t=0                     0          1−θ

where ht (ω t ) denotes housing held by the household member with the shock ω t , drawn
from the distribution F (ω). All the other variables and parameters have the same
interpretations as in the benchmark model.
  The family faces the flow budget constraint
                                 Z                                 Z
           ct + at = y t + q t       ht−1 (ω t−1 )dF (ω t−1 ) −        bt−1 (ω t−1 )dF (ω t−1 ),   (S2)
                         A THEORY OF HOUSING DEMAND SHOCKS                              24

where yt denotes endowment (or labor income), qt denotes the house price, and
bt−1 (ω t−1 ) denotes the last-period borrowing of the member with idiosyncratic income
shock ω t−1 .
  In the decentralized housing markets, the household member with shock ω t finances
house purchases with both internal funds ω t at and external debt b(ω t ), subject to the
flow-of-funds constraint
                                                             bt (ω t )
                                   qt ht (ω t ) ≤ ω t at +             ,              (S3)
                                                               Rt
and the borrowing constraint
                                       bt (ω t )
                                                 ≤ κt qt ht (ω t ),                   (S4)
                                         Rt
where Rt denotes the risk-free interest rate and κt denotes the loan-to-value ratio,
which is common for all borrowers.
  Denote by λt , η t (ω t ), and π t (ω t ) the Lagrangian multiplers associated with the
constraints (S2), (S3), and (S4), respectively. The first order condition with respect
to ct is given by
                                        1
                                          = λt .                                      (S5)
                                       ct
The first order condition with respect to at implies
                                     Z
                                λt = η t (ω t )dF (ω t ).                             (S6)

The first order condition with respect to ht (ω t ) is given by

                    η t (ω t )qt = ϕ [ht (ω)]−θ + βEt λt+1 qt+1 + κt qt π t (ω t ).   (S7)

The first order condition with respect to bt (ω t ) is
                               1                         1
                                  η t (ω t ) = βEt λt+1 + π t (ω t ).                 (S8)
                               Rt                        Rt
These optimizing conditions have similar interpretations as in the benchmark model.
   Aggregating the binding flow-of-funds constraints across all members, we obtain
               Z ∞                           Z                Z
                                                                bt (ω t )
                   qt ht (ω t )dF (ω t ) = at ω t dF (ω t ) +             dF (ω t ).
                0                                                 Rt
                                                  R                                  R
Imposing the market clearing conditions that ht (ω)dF (ω) = 1 and that bt (ω)dF (ω) =
                                                       R
0, along with the normalization assumption that ω t dF (ω t ) = 1, we have

                                               q t = at .                             (S9)

A household member with a sufficiently high ω t does not face a binding borrow-
ing constraint, so that π t (ω t ) = 0. From Eq. (S7) and (S8), we obtain that those
                                  A THEORY OF HOUSING DEMAND SHOCKS                                                   25

unconstrained agents have the identical marginal utility of housing and thus iden-
tical holdings of housing units. A low-income member will face binding borrowing
constraints, leading to an endogenenous cut-off point ω ∗t in the support of the dis-
tribution of the idiosyncratic income shocks, such that the liquidity constraint (S4)
binds if and only if ω t < ω ∗t . The following proposition summarizes the allocation of
housing across constrained vs. unconstrained members and also the determination of
the cutoff point.

Proposition S1. There exist an unique cut-off ω ∗t such that the borrowing constraint
(S4) binds if and only if ω t < ω ∗t . The housing demand for each member is given by
                                        ( ∗                  )
                                            ωt             ∗
                                           1−κt
                                                if ω t ≥ ω t
                            ht (ω t ) =     ωt             ∗
                                                               ,                 (S10)
                                           1−κt
                                                if ω t < ω t

The cutoff point ω ∗t is determined from the housing market clearing condition, and it
is given by
                                  Z   ω ∗t
                                             ωf (ω)dω + (1 − F (ω ∗t ))ω ∗t = 1 − κt .                             (S11)
                                  ω min

which define an implicit function of ω ∗t = ω ∗ (κt ).

Proof. The proof is analogous to that in the baseline model with idiosyncratic taste
shocks.

  It is also straightforward to show that the Lagrangian multipliers η t (ω t ) and π t (ω t )
are given by
                   (                                                                                       )
                                                                                                     ∗
    η t (ω t ) =
                                                    Rt βEt λt+1h                        i if ω t ≥ ω t         .   (S12)
                       Rt βEt λt+1 +            1
                                                qt
                                                   (1   − κt )θ−1   (ω t )−θ − (ω ∗t )−θ if ω jt < ω ∗t

                                  (                                                                )
                                                                                               ∗
                   π t (ω t ) =                              h0                   i if ω t ≥ ω t       .           (S13)
                                        1
                                        qt
                                           (1   − κt )θ−1     (ω t )−θ − (ω ∗t )−θ if ω t < ω ∗t

It then follows from the Euler equation (S6) and Eq. (S12) that
                                               Z ω∗t
                                ϕ                      −θ
                                           θ−1
                                                       ω − ω ∗−θ
                                                                 
              λt = Rt βEt λt+1 + (1 − κt )                   t     f (ω)dω.                                        (S14)
                                qt              ω min

  Aggregating the housing Euler equations across individuals and using the housing
allocations in Eq (S10), we obtain the aggregate housing Euler equation

                                              λt qt = Et βλt+1 qt+1 + ζ(κt ),                                      (S15)
                         A THEORY OF HOUSING DEMAND SHOCKS                                      26

where
                             −θ                            ω ∗t
                      ω ∗t
                                                       Z
                                                  θ−1
                                                                   ω −θ − ω ∗−θ
                                                                                
         ζ(κt ) ≡ ϕ                + ϕ(1 − κt )                             t     f (ω)dω.   (S16)
                    1 − κt                              ω min

In the expression for ζ(κt ), the first term is the average marginal utility across all
home buyers and the second term is the liquidity premium, which is positive if and
only if ω < ω ∗t .
  The aggregated housing Euler equation (S15) provides a mapping between our
model here with heterogeneous incomes and the representative-agent economy. In
particular, if ζ(κt ) = ϕt , then the equilibrium house price in this heterogeneous-
agent model coincides with that in the representative agent model. Thus, this model
with heterogeneous income also provides a microeconomic foundation for aggregate
housing demand shocks. The presence of the liquidity premium here breaks the tight
link between the house price and the rent, creating room for large fluctuations in the
price-to-rent ratio following credit supply shocks.
  Similar to the benchmark heterogeneous-agent economy, changes in credit supply
conditions represented by changed in κt can drive changes in aggregate housing de-
mand and thus the house price as well. To see this, note that the house price needs
to satisfy the marginal agent’s housing Euler equation
                                   η ∗t        λt+1
                              qt        = Et β      qt+1 + M RSt∗ ,                          (S17)
                                   λt           λt
where η ∗t = Rt Et β λλt+1
                        t
                           increases with the risk-free interest rate Rt and the term M RSt∗
denotes the marginal agent’s marginal rate of substitution between housing and non-
housing consumption. For any given interest rate, the house price increases with the
marginal agent’s MRS, which is given by
                                     ϕ
                          M RSt∗ = (ω ∗t )−θ (1 − κt )θ .                                    (S18)
                                     λt
The housing market clearing condition in Eq. (S11) implies that ω ∗ decreases with κ.
In particular,
                              ∂ω ∗t         1
                                    =−               < 0.                                    (S19)
                               ∂κt     1 − F (ω ∗t )
We can then derive the elasticity of M RSt∗ with respect to κt given by
                       ∂M RSt∗ κt
                                                                        
                                                      1             1
          eM RS ∗ ,κ ≡                = θκt ∗                    −         >0                (S20)
                        ∂κt M RSt∗            ω t [1 − F (ω ∗t )] 1 − κt
where the last inequality follows from the housing market clearing condition in equa-
tion (S11). Thus, an increase in credit supply raises the MRS of the marginal agent.
It follows that, for any given interest rate, the house price increase with credit supply.
                        A THEORY OF HOUSING DEMAND SHOCKS                              27

  Appendix B. A heterogeneous-agent model with endogenous labor
                                supply and capital accumulation

  This section shows that the benchmark heterogeneous-agent model that we pre-
sented in Section III can be generalized to incorporate endogenous labor supply and
capital accumulation. We follow Lagos and Wright (2005) and Wen (2009) by as-
suming quasi-linear preferences to keep the model tractable (see also Wen (2015) and
Dong and Wen (2019)).
  The economy is populated by a continuum of households with unit measure indexed
by j. The household has quasi-linear preferences, with the period utility function

                                                   (hjt )1−θ
                            ujt = log cjt + ϕεjt             − ψnjt ,
                                                    1−θ

where cjt , hjt , and njt denote the household’s consumption, housing, and labor supply,
respectively; the term εjt is an idiosyncratic shock to housing preferences, as in our
baseline model; and the parameters ϕ and ψ measure the relative utility weights on
housing and leisure, respectively. The linearity of the utility function in labor hours
is the key to simplifying aggregation, as we show below.
  Households supply labor and capital to firms. They also trade houses and a risk-
free bond. Each period is divided into two sub-periods. In the first sub-period,
households decide their labor supply, consumption, and investment in capital; and
firms make production decision. In the second sub-period, idiosyncratic shocks are
realized and households trade houses and bonds. Let bjt−1 , kt−1
                                                             j
                                                                 , hjt−1 denote household
j’s pre-determined stocks of bonds, capital, and housing, respectively. The household
faces the flow-of-funds constraint

                                                      bjt
                                qt (hjt − hjt−1 ) ≤       + mjt ,                  (S21)
                                                      Rt

where

                 mjt ≡ wt njt + rt kt−1
                                    j
                                        − bjt−1 − cjt − ktj − (1 − δ)kt−1
                                                                      j
                                                                         
                                                                            .      (S22)

Here wt and rt are real wage and rental rate of capital, respectively. In the first sub-
period, the household j receives labor income and capital rents, which are used to
finance consumption spending and capital investment after paying off the debt bjt−1 .
At the end of the first sub-period, the household has a remaining balance of mjt . In
the second sub-period, the household uses the internal funds mjt and external debt bjt
to finance new house purchases at the price qt .
                             A THEORY OF HOUSING DEMAND SHOCKS                                                      28

   Borrowing is subject to the collateral constraint
                                                     bjt
                                                         ≤ κt qt hjt .                                          (S23)
                                                     Rt
   The household’s optimizing decision problem can be separated into a decision for
consumption, labor supply, and capital investment in the first sub-period and subse-
quently, a decision for housing and borrowing in the second sub-period.
   Denote by ajt ≡ mjt + qt hjt−1 the total wealth of the household. The first sub-period
decision problem can be described by the value function
                                                       Z
             j      j      j
        Vt (kt−1 , bt−1 , ht−1 ) = jmax
                                     j j
                                         log ct − ψnt + Jt (ktj , ajt , εjt )dF (εjt ),
                                              j     j
                                                                                                                (S24)
                                      ct ,kt ,nt

subject to the budget constraint

                ajt = wt njt + rt kt−1
                                   j
                                       + qt hjt−1 − bjt−1 − cjt − [ktj − (1 − δ)kt−1
                                                                                 j
                                                                                     ].                         (S25)
          j
Here Vt (kt−1 , bjt−1 , hjt−1 ) is his value function in the beginning of first sub-period and
Jt (ktj , ajt , εjt ) is the value function in the second sub-period, which is defined as
                                                            (hjt )1−θ
                    Jt (ktj , ajt , εjt ) = max  {ϕεjt                + βEt Vt+1 (ktj , bjt , hjt )},           (S26)
                                             j j
                                         ht ,bt              1−θ
subject to the budget constraint in the second sub-period
                                                              bjt
                                                   qt hjt   ≤     + ajt ,                                       (S27)
                                                              Rt
and the collateral constraint (S23).
   To solve the household’s problem, we adopt a conjecture and verification strategy.
In particular, based on the quasi-linear preferences, we conjecture that the value
function takes the form
                         j
                    Vt (kt−1 , bjt−1 , hjt−1 ) = Vkt kt−1
                                                      j
                                                          − Vbt bjt−1 + Vht hjt−1 + V0t ,                       (S28)

where the coefficients Vkt , Vbt ,Vht and V0tZ depends on the aggregate state variables. We
also conjecture that the value function                       Jt (ktj , ajt , εjt )dF (εjt ) is a quasi-linear function
of the state variables, and it is given by
                         Z
                           Jt (ktj , ajt , εjt )dF (εjt ) = Jkt ktj + gt (ajt ),                                (S29)

where Jkt depends on the aggregate state variables and gt (ajt ) is a nonlinear function.
   With these conjecture, we can rewrite the household problem as
     j
Vkt kt−1 − Vbt bjt−1 + Vht hjt−1 + V0t = jmax
                                           j j
                                               log cjt − ψnjt + βEt Vkt+1 ktj + gt (ajt ) + βEt V0t+1 ,
                                               ct ,kt ,nt
                              A THEORY OF HOUSING DEMAND SHOCKS                                     29
                  Z
and gt (ajt ) =       Gt (ajt , εjt )dF (εjt ), with Gt (ajt , εjt ) given as

                                                  (hjt )1−θ
                  Gt (ajt , εjt ) = max  {ϕεjt              + βEt Vht+1 hjt − βEt Vbt+1 bjt }.
                                     j j
                                    ht ,bt         1−θ

Thus, hjt , and bjt depend only on εjt and ajt .
  Denote by λjt , η jt , and π jt as the Lagrangian multipliers associated with constraints
(S25), (S27), and (S23) respectively. The first order conditions for consumption, labor,
capital are
                                                       1     j
                                                        j = λt ,                                 (S30)
                                                       ct
                                                     wt λjt = ψ,                                 (S31)

and
                                                  λjt = βEt Vkt+1 ,                              (S32)

respectively. Equations (S30) and (S31) imply that consumption is equal across all
households. The first-order condition with respect to ajt yields
                                                                  ψ
                                             gt0 (ajt ) = λjt =      ≡ λt ,                      (S33)
                                                                  wt
which implies that ajt is identical across households. Thus, independent of the realized
idiosyncratic shocks, all households enter the second sub-period with identical holdings
of total wealth, because they can adjust labor supply to completely insure against the
idiosyncratic risks. This is only true if the marginal utility of increasing labor is
constant.
  Applying the envelop theory, we have
                                                                    ψ
                              Vkt = λt (1 + rt − δ) =                  (1 + rt − δ),             (S34)
                                                                    wt
                                              ψ
                              Vbt = λt =         ,                                               (S35)
                                              wt
                                                ψ
                              Vht    = λt qt = qt .                                              (S36)
                                               wt
So indeed Vkt , Vbt and Vht depends only on aggregate variables, verifying our initial
conjecture. In addition, V0t can be written as
                                         cjt
         V0t = max{log cjt − ψ               + βEt V0t+1 } = log wt − log ψ − 1 + βEt V0t+1
                j
                      ct                 wt
Thus, V0t also depends on aggregate variables only.
                               A THEORY OF HOUSING DEMAND SHOCKS                                              30

   The optimizing investment decision (S32) then implies that

                                            λt = βEt λt+1 (1 + rt − δ)                                   (S37)

   We summarize these results in the following Lemma.

Lemma S1. All households will have the same level of consumption and same level of
wealth in the second sub-period. In particular, ajt = at for all j.

   The first order condition with respect to hjt , and bjt yields

                                               ϕεjt
                                  η jt qt =          + βEt λt+1 qt+1 + κt qt π jt ,                      (S38)
                                              (hjt )θ |     {z     }
                                                                βEt Vht+1

and
                                               η jt = Rt βEt λt+1 + π jt .                               (S39)
                                                         | {z }
                                                            βEt Vbt+1

To see that the function gt (ajt ) indeed has some curvature, we need to compute hjt , η jt
and π jt as functions ajt and εjt . The above two equations yields
                                   "                                          #
                                        j
                           1         ϕεt
                η jt =                     + βEt λt+1 qt+1 − κt qt βRt Et λt+1 ,                         (S40)
                       (1 − κt )qt (hjt )θ

and
                        "                                         #
                             j
                 1        ϕε
      π jt =                 t
                           j θ + βEt λt+1 qt+1 − κt qt βRt Et λt+1 − Rt βEt λt+1 .                       (S41)
             (1 − κt )qt (ht )

Let us denote hjt = ht (ajt , εjt ), η jt = η t (ajt , εjt ), and π jt = π t (ajt , εjt ). Define ε̄jt ≡ ε̄(ajt )
such as
                                                                                        
                          ϕε̄jt
                                                                                        
              1                                                                         
                        h j iθ + βEt λt+1 qt+1 − κt qt βRt Et λt+1 = Rt βEt λt+1
          (1 − κt )qt 
                         at                                      
                                                                  
                             qt (1−κt )


Notice that ε̄jt increases with ajt , or we have ε̄0 (ajt ) > 0. Notice π jt is increases in εjt
                  ajt
and hjt ≤     qt (1−κt )
                         , so π jt > 0 if εjt ≥ ε̄(ajt ). Likewise, π jt = 0 if εjt < ε̄(ajt ).       Suppose
                                               ajt
for εjt < ε̄(ajt ), π jt > 0, then hjt = qt (1−κ   t)
                                                      . But since π jt is increasing in εjt , so     we must
π jt < 0 if εjt < ε̄(ajt ). We hence reach an contradiction. Notice that equation                     (S40)
                                                                    ϕ
                       η t (ajt , εjt ) − η t (ajt , ε̄jt ) =               max{0, εjt − ε̄jt },
                                                                (1 − κt )qt
                              A THEORY OF HOUSING DEMAND SHOCKS                                              31

and equation (S39) implies that η t (ajt , ε̄jt ) = Rt βEt λt+1 . So we have
                            ∂Gt (ajt , εjt )
                         Z                               Z
               0 j
              gt (at ) =            j        dF (εt ) = η t (ajt , εjt )dF (εjt )
                                                    j
                                ∂at
                                                         Z εmax
                                                   ϕ
                       = Rt βEt λt+1 +                           [εjt − ε̄jt ]dF (εjt ),
                                            (1 − κt )qt ε̄jt
Notice that ε̄jt is an strictly increasing function of ajt , so the last term is a decreasing
                                 00
function of ajt . Namely gt (ajt ) < 0, or gt (ajt ) is a concave function. Then equaiton
(S33) can indeed implies that ajt = at . Then we have ε̄jt = ε̄t (at ) ≡ ε∗t . Drop the
superscript j, we hence obtain the same equations as equations (19) and (20). Finally
by noticing that in equilibrium bjt dj = 0, and hjt dj = 1, then we obtain at = qt by
                                R              R

equation (S27) as in Section III. In particular, we have

                                       qt λt = Et βλt+1 qt+1 + ξ(κt ),                                    (S42)

where the term ξ t ≡ ξ(κt ) is given by
                                                            Z   εmax
                                                     1
   ξ(κt ) ≡ ϕ(1 − κt )  θ
                            E max {ε, ε∗t }   + κt                     (1 − κt )θ ϕ(εt − ε∗t )dF (εt ),   (S43)
                                                   1 − κt   ε∗t

which is the same housing demand shifter as in the baseline model. To close the model,
we assume a competitive firm that produces final output according to Yt = AXtα Nt1−α ,
where Xt is its capital input and Nt is the labor input. The problem for the firm is

                                      max AXtα Nt1−α − rt Xt − wt Nt
                                                                                           j
so we have rt = α XYtt , and wt = (1 − α) NYtt . In equilibrium Xt =
                                                                                      R
                                                                                          kt−1 dj ≡ Kt−1 , and
Nt = njt dj. Define Ct = cjt dj, we must have
     R                       R

                                                  1
                                                     = λt ,                                               (S44)
                                                  Ct
And equation (S31) can be written as
                                              1          Yt
                                                 (1 − α)    =ψ                                            (S45)
                                              Ct         Nt
Equation (S37) then becomes
                                                                 
                                      1         1       Yt+1
                                         = βEt        α      +1−δ                                         (S46)
                                      Ct       Ct+1      Kt
Finally, aggregating Eq (S25) across all households yields

                           Ct + Kt − (1 − δ)Kt = AKtα Nt1−α ,             (S47)
                                         R j       R j
where we have used the conditions wt nt dj + rt kt−1 dj = wt Nt + rt Kt−1 = Yt ,
qt hjt−1 dj = at = ajt dj, and bjt−1 dj = 0.
  R               R            R
                         A THEORY OF HOUSING DEMAND SHOCKS                                     32

  With the Lagrangian multiplier λt substituted out using Eq. (S44), the equilibrium
paths of the endogenous variables {qt , Ct , Nt , Kt }∞
                                                      t=0 are completely characterized by
Equations (S42), (S45)-(S47).
  To see the mapping between the heterogeneous-agent model and the representative-
agent model, consider the representative household’s utility-maximizing problem
                                                 ∞
                                                 X                         Ht1−θ
                           max              E0         β t [log Ct + ξ t         − ψNt ],
                     {Ct ,Ht ,Kt+1 ,Nt }
                                                 t=0
                                                                           1−θ

subject to
                  Ct + qt (Ht − Ht−1 ) + Kt − (1 − δ)Kt−1 ≤ AKtα Nt1−α .

It is easy to see that the equilibrium paths for {qt , Ct , Nt , Kt+1 }∞
                                                                       t=0 in this representative-
agent economy are governed by the same equations (S42), and (S45)-(S47). If the
reduced-form housing demand shock ξ t in this representative-agent model equals to
the housing demand shifter ξ(κt ) in the heterogeneous-agent model (see Eq. (S43)),
then we obtain an observational equivalence between the two models.


                       Appendix C. Proof to Proposition 2

Proof. Eq. (24) implies that
                                                 (
                                                       ϕε(1 − κt )θ ,       if ε ≥ ε∗t ,
                        ϕε(ht (ε))−θ =                                                      (S48)
                                                       ϕε∗t (1 − κt )θ , if ε < ε∗t .

Integrating over ε yields the average marginal utility in (31).
  To obtain the liquidity premium, we combine (19) and (20) to obtain
                              "                                            #
                         1      ϕε [ht (ε)]−θ + βEt λt+1 qt+1
             π t (ε) =                                        − βRt Et λt+1 .               (S49)
                       1 − κt                 qt

It follows that
                                               1 ϕε [ht (ε)]−θ − ϕε∗t [ht (ε∗t )]−θ
                  π t (ε) −   π t (ε∗t )   =                                        .       (S50)
                                             1 − κt             qt
Since π t (ε∗t ) = 0, we obtain
                                         ϕ
                       π t (ε) =                 max{0, (ε − ε∗t )(1 − κt )θ },             (S51)
                                     (1 − κt )qt

where we have substituted out ht (ε) using (24). Multiplying (S51) by κt qt and inte-
grating over ε ∈ [ε∗t , ε̄], we obtain the expression for the liquidity premium in (31).
                        A THEORY OF HOUSING DEMAND SHOCKS                                33

                           Appendix D. Rental markets

  We now introduce an explicit rental market for housing into our model. We show
that, in this environment with a frictionless rental market, the market rental rate for
housing corresponds to the average MRS across all agents, as does the implicit rent in
the benchmark model (see Eq. (37)). The incorporation of a frictionless rental market
represents a minimal departure from our benchmark model.
  Consider a model economy in which the household enjoys utility from consumption
of non-housing goods ct and housing services. Housing services are derived from either
rental units or owner-occupied units. The household family can perfectly insure risks
in goods consumption and rental services, so that those markets are frictionless. How-
ever, owner-occupied housing markets have frictions; and in particular, members with
different taste shocks trade owner-occupied housing units in a decentralized market
subject to collateral constraints. We implement this model structure by adopting a
particular timing of decisions. In the beginning of each period t, the household family
chooses goods consumption ct and rental services `t , as well as some internal funds
at to be allocated to individual members in the decentralized owner-occupied housing
market. After these decisions, an idiosyncratic taste shock ε drawn from the distri-
bution F (ε) is realized, and household members go out to the decentralized housing
market to purchase additional housing units. Such purchases can be financed by either
internal funds or external debt (or both). The borrowing capacity of an individual
member with taste shock ε is limited by a fraction κt of the value of the housing unit
h(ε).
  The household has the expected utility function
                   ∞
                         "                                          #
                                     Z ∞                1−θ
                  X                      ε  [`
                                           t t + h (ε
                                                  t t )]
               E0     β t log ct + ϕ                        dF (εt ) ,               (S52)
                  t=0                 0        1 − θ

where `t denotes the rental housing services, and the other notations are identical to
those in the benchmark model. The decisions for both goods consumption and rental
services consumption are made in the beginning of the period, before the realization
of the idiosyncratic shock εt . Once the idiosyncratic shock is realized, the household
is split into a continuum of members, each indexed with the realized taste shock εt ,
and they all go out to a decentralized housing market to purchase owner-occupied
units h(εt ). We assume that the household is endowed with a fixed amount of rental
housing units `. The household faces the budget constraint
                            Z                        Z
  ct + at + rht `t = yt + qt ht−1 (εt−1 )dF (εt−1 ) − bt−1 (εt−1 )dF (εt−1 ) + rht `. (S53)
                            A THEORY OF HOUSING DEMAND SHOCKS                                        34

  In the decentralized housing markets, a member with idiosyncratic shock εt finances
his spending on new housing qt ht (εt ) using both internal funds at received from the
household family and external borrowing bt (εt ) at the interest rate Rt . The flow-of-
funds constraint for the member indexed by εt is given by
                                                             bt (εt )
                                        qt ht (εt ) ≤ at +            .                           (S54)
                                                               Rt
  The borrowing capacity of the member with εt is subject to the collateral constraint
                                          bt (εt )
                                                   ≤ κt qt ht (εt ),                              (S55)
                                            Rt
where the loan-to-value ratio κt ∈ [0, 1] represent exogenous shocks to credit con-
ditions. We further impose the short-sale restriction on owner-occupied units, such
that
                                        ht (εt ) ≥ 0, ∀εt ∼ F (ε).                                (S56)
  Denote by λt , η t (εt ), π t (εt ) and µt (εt ) the Lagrangian multipliers associated with
Equations (S53)-(S56), respectively. Then the first order condition with respect to ct
is given by
                                        1
                                           = λt .                                                 (S57)
                                        ct
The first order condition with respect to at implies
                                      Z
                                 λt = η t (εt )dF (εt ).                                          (S58)

A marginal unit of goods transferred to individual members for housing purchases
reduces family consumption by one unit and hence the utility cost is λt . The utility
gain from this transfer is the shadow value of newly purchased housing (i.e., η t (εt ))
averaged across all members.
  The first order condition with respect to `t implies
                                   Z
                               1
                         rht = ϕ εt [`t + ht (εt )]−θ dF (εt )                                    (S59)
                               λt
Thus, the market rental price equals the average MRS between housing and non-
housing consumption across all members of the household.
  The first order condition with respect to ht (εt ) yields

              η t (εt )qt = ϕεt [`t + ht (εt )]−θ + βEt λt+1 qt+1 + κt qt π t (εt ) + µt (εt ).   (S60)

  The first-order condition with respect to bt (εt ) is given by

                                    η t (εt ) = βRt Et λt+1 + π t (εt ).                          (S61)
                          A THEORY OF HOUSING DEMAND SHOCKS                                                    35

  The solution to this problems can be characterized by two cutoffs. Intuitively, a
member with a sufficiently high marginal utility of housing (i.e., high εt ) wants to pur-
chase as much owner-occupied housing units as allowed by the borrowing constraint,
whereas a member with a sufficiently low marginal utility would not want to buy new
owner-occupied units at all. The solution to the owner-occupied housing is formally
described by the following proposition.

Proposition 1. There exists a cutoff point ε∗t in the support of the distribution F (ε),
such that
                                                       1
                                                                               if εt ≥ ε∗t ,
                                  1  1−κt
                         
               ht (εt ) =                                                                                   (S62)
                                                                            
                                  εt θ                         1
                           max   ε∗
                                        `t +                  1−κt
                                                                     − `t , 0  otherwise,
                                         t


In equilibrium `t = `. Define ε∗`t as
                                                                    !θ
                                                          `t
                                       ε∗`t =                1           ε∗t                                (S63)
                                                      `t + 1−κ t


The cutoff point ε∗t is determined by
     Z ε∗t "  θ1                      #           Z εmax
              εt              1                                1
                       `t +          − `t   f (ε)dε +               f (ε)dε = 1                             (S64)
       ε∗`t   ε∗t           1 − κt                     ε∗t   1 − κt

Proof. For a household member with εt ≥ ε∗t , the borrowing constraint is binding and
hence the flow of funds constraint yields
                                                     at          1
                                  ht (εt ) =                 =        ,                                     (S65)
                                                qt (1 − κt )   1 − κt
which is independent of εt .
  If εt < ε∗t , then π t (εt ) = 0. We have

                              η t (εt ) = βRt Et λt+1 = η t (ε∗t ) ≡ η ∗t .

Furthermore, with π t (εt ) = 0, Eq. (19) implies that

                     η ∗t qt = ϕεt [`t + ht (εt )]−θ + βEt λt+1 qt+1 + µt (εt ),

if µt (εt ) = 0, then we must have
                                                                                                 −θ
                              −θ                                                           1
            ϕεt [`t + ht (εt )]    =   ϕε∗t   [`t +    ht (ε∗t )]−θ   =   ϕε∗t    `t +                  .
                                                                                         1 − κt
                                                θ1
Simple algebra yields that ht (εt ) =           εt
                                                ε∗t
                                                            (`t +    1
                                                                    1−κt
                                                                         )   − `t . By the definition of ε∗`t we
have ht (εt ) ≥ 0 if εt ≥ ε∗`t . Finally, if εt < ε∗`t , ht (εt ) = 0. The housing market clearing
                         A THEORY OF HOUSING DEMAND SHOCKS                                36

condition then implies
       Z ε∗t "  θ1                   #          Z ε̄
               εt             1                            1
                ∗
                       `t +          − `t f (ε)dε +             f (ε)dε = 1.           (S66)
         ε∗`t  εt           1 − κt                   ε∗t 1 − κt




  We now consider how aggregate housing demand and thus the house price are
determined in equilibrium. For simplicity, we focus on the special case with θ = 0.
The following proposition summarizes the main result.

Proposition 2. In the special case with θ = 0, the aggregate housing Euler equation
is given by
                                   qt λt = βEt λt+1 qt+1 + ξ t ,                       (S67)

where the term ξ t is given by
                   "            Z ε̄                      Z ε∗t                   #
                            κt
            ξt = ϕ 1 +               (εt − ε∗t )f (ε)dε +       (ε∗t − εt )f (ε)dε ,   (S68)
                          1 − κt ε∗t                       0


which is increasing in credit availability κt . The market rent is given by
                                                    ϕ
                                            rht =      ,                               (S69)
                                                    λt
which is independent of κt .

Proof. The proof is analogous to that in the baseline heterogeneous-agent model with
no explicit rental market.

  It follows that the equilibrium house price in this heterogeneous-agent model with
a rental market is identical to that in the benchmark model, and both coincides
with the house price in the representative-agent economy if ξ t = ϕt . Furthermore,
since the house price increases with credit availability κt , whereas the market rent is
independent of κt , the price-to-rent ratio increases with κt .
  Thus, in this model with an explicit rental market, we obtain qualitatively similar
results as those in the benchmark model.


                         Appendix E. Data and regressions

  In the empirical analysis in Section VI, we use both cross-country data and U.S.
regional data.
                       A THEORY OF HOUSING DEMAND SHOCKS                             37

E.1. International data. The cross-country data are an unbalanced panel of 25
advanced economies, covering the years from 1965 to 2013. The time series in each
country includes the household debt-to-GDP ratio, the mortgage spread, the house
price, and the rent. The household debt-to-GDP ratio and the mortgage spread are
the same as those used by Mian et al. (2017). The house price and the rent series
are taken from the OECD Main Economic Indicators through Haver Analytics. We
deflate the nominal rent series using the consumer price index in each country (or the
Harmonized Index of Consumer Prices for the European countries in our sample).
  Table S1 presents the list of the countries and some summary statistics of the data.

E.2. U.S. regional data. The U.S. regional data are an unbalanced panel, consisting
of 21 MSAs, covering the years from 1978 to 2017. The time series in each MSA
includes the housing loan-to-price ratio and the effective mortgage interest rate, both
taken from the Federal Housing Finance Board (FHFB). The effective mortgage rate
is defined as the contract mortgage rate plus fees and charges amortized over a 10-year
period, the estimated average life of conventional mortgages. The mortgage spread
used in our regression is the spread between the effective mortgage rates and the 10-
year Treasury yields. The data include the house price index in each MSA from the
Federal Housing Finance Agency (FHFA), the rent index, which is measured by the
“rent of primary residence” in the expenditure categories of the consumer price index
(CPI-All Urban Consumers) for each MSA. We convert the nominal house price and
the nominal rent into real units by using the MSA-level CPI.
  Table S2 presents the list of the MSAs and some summary statistics of the data.
                                A THEORY OF HOUSING DEMAND SHOCKS                                                  38

            Table S1. Summary of countries in the sample and key statistics

 Country          Start Year   Mean ∆D HH   SD ∆D HH   Mean I M S   SD I M S   Mean ∆ln(P )   SD ∆ln(P )   Mean ∆ln(R)   SD ∆ln(R)
 Australia           1979          2.22        2.58      1.14         1.65         3.19          6.60          0.56         2.03
 Austria             1997          0.69        1.30      0.98         0.54         1.62          2.82          1.09         2.05
 Belgium             1982          0.86        1.13      0.94         0.71         2.40          4.15          0.46         1.38
 Canada              1971          1.44        2.40       2.10        0.72         2.51          6.28         -1.23         2.17
 Czech Republic      2003          2.06        1.21       1.40        0.61        -2.88          2.71          2.98         4.85
 Denmark             1996          3.65        4.06      0.31         0.52         2.87          7.90          0.58         0.77
 Finland             1981          1.22        2.47      -0.33        1.28         2.19          9.40          0.09         3.57
 France              1979          1.10        1.22       0.36        0.85         2.04          5.44          0.82         1.37
 Germany             1972          0.50        1.82       0.98        0.69        -0.30          2.39          0.39         1.67
 Greece              2000          4.00        2.18       1.23        0.36         0.06          8.67         -0.40         2.79
 Hungary             2000          2.14        3.21       3.76        2.56        -7.07          5.03          1.46         3.32
 Ireland             2004          5.01        8.46       0.54        0.73        -4.10         11.50          3.08        18.87
 Italy               1996          1.59        1.16      1.52         1.06         0.57          5.20          0.62         1.67
 Japan               1981          0.57        1.94       0.64        0.80        -0.19          4.02          0.46         1.20
 Korea, Rep.         2001          2.86        3.28      -0.04        0.19         2.06          4.87         -0.38         1.69
 Mexico              2005          0.51        0.65      7.26         0.78         0.01          2.07         -1.44         0.83
 Netherlands         1992          3.76        2.73      1.24         0.72         3.16          6.17          1.17         1.65
 Norway              1988          0.56        3.44      1.14         1.16         2.88          7.93          0.87         1.38
 Poland              2003          2.18        2.46       0.96        0.87        -5.20          1.86          0.77         1.52
 Portugal            1991          3.50        2.49       1.56        2.09        -1.22          4.03          1.05         3.08
 Spain               1982          1.80        2.69      1.01         1.37         3.01          9.87          0.63         2.13
 Sweden              1987          1.19        2.83       0.32        0.58         3.35          7.20          1.93         3.90
 Switzerland         2001          1.25        3.22      0.98         0.58         2.91          2.88          0.87         0.88
 U.K.                1974          1.55        2.52      0.70         0.67         2.24          9.31          1.61         3.13
 U.S.                1965          0.69        2.21       1.74        0.54         1.22          4.19          0.66         1.48

Notes: This table lists the 25 countries and the years covered used in the international data
sample. The variable ∆DHH denotes the year-over-year changes in the household debt-to-GDP
ratio, I M S denotes the mortgage spread dummy, which equals one if the mortgage spread is below
the median and zero otherwise (the mortgage spread is the difference between the mortgage
interest rate and the 10-year sovereign bond yields), ∆ln(P ) denotes the year-over-year log-changes
in the real house price, and ∆ln(R) denotes the year-over-year log-changes in the real rent.
                            A THEORY OF HOUSING DEMAND SHOCKS                                                   39

           Table S2. Summary of countries in the sample and key statistics

 MSA   Start Year   Mean ∆D HH   SD ∆D HH   Mean I M S   SD I M S   Mean ∆ln(P )   SD ∆ln(P )   Mean ∆ln(R)   SD ∆ln(R)
 ATL      1979          0.13        2.65      1.69         0.99         0.46          4.27          0.35         2.43
 BON      1979          0.20        4.39      1.81         1.03         2.40          7.43          0.75         2.44
 BTM      1979          0.10        2.39      1.69         0.95         1.04          5.78          1.36         1.86
 CHG      1979          0.49        3.68      1.71         0.98         0.59          5.49          0.81         1.73
 DAA      1979          0.25        3.12      1.73         0.95        -0.01          7.81          0.09         2.10
 DFW      1979         -0.04        3.48      1.72         0.99        -0.01          4.12          0.21         2.68
 DNV      1979          0.02        2.86      1.60         1.04         1.33          4.54          0.51         2.37
 HON      1979          0.01        3.99      1.35         1.04         2.44         20.53          0.52         1.76
 HTN      1979         -0.09        2.55      1.74         1.03         0.22          4.43          0.36         3.17
 LNA      1979          0.00        2.87      1.53         1.06         1.84          9.50          0.97         2.19
 MIM      1979          0.12        2.95      1.76         1.04         1.21          9.52          0.46         2.18
 MSP      1979          0.36        3.06      1.60         1.00         0.53          5.08          0.25         2.16
 NYT      1979          0.38        2.54      1.72         1.11         1.88          7.27          0.88         1.44
 PHI      1979          0.26        2.36      1.79         1.02         1.59          5.45          0.53         2.04
 PHO      2002         -0.04        2.40      2.01         0.68         1.69         14.77          0.60         2.86
 SDI      1979         -0.26        3.54      1.40         1.13         1.19          8.80          0.65         3.01
 SFC      1979          0.01        3.76      1.44         1.07         2.81          8.18          1.23         2.83
 STL      1979          0.18        3.69      1.72         0.99         0.23          3.84          0.09         1.76
 STW      1979          0.00        2.81      1.60         1.01         1.95          6.48          0.60         2.34
 TMA      1997         -0.06        2.49      2.06         0.64         2.01         10.50          0.72         1.87
 WSH      1979          0.10        2.39      1.69         0.95         1.43          6.86          1.30         1.39

Notes: This table lists the 21 MSAs and the years covered in the U.S. regional data sample. The
variable ∆DHH denotes the year-over-year changes in the housing loan-to-price ratio, I M S denotes
the mortgage spread dummy, which is one if the mortgage spread is below median (the mortgage
spread is the difference between the effective mortgage interest rate and the 10-year Treasury
yields), ∆ln(P ) denotes the year-over-year log-changes in the real house price, and ∆ln(R) denotes
the year-over-year log-changes in the real rent.

  Federal Reserve Bank of San Francisco, Hong Kong University of Science and
Technology, Federal Reserve Bank of Atlanta, Emory University, and NBER
