                               NBER WORKING PAPER SERIES




                                    RISK PRICE DYNAMICS

                                         Jaroslav Borovi…ka
                                         Lars Peter Hansen
                                          Mark Hendricks
                                        José A. Scheinkman

                                    WORKING PAPER 15506
                               http://www.nber.org/papers/w15506


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                    November 2009




This paper was originally presented as the Journal of Financial Econometrics Lecture at the June 2008
SoFiE conference. We gratefully acknowledge support by the National Science Foundation under
Award Numbers SES0519372 (Borovi…ka, Hansen and Hendricks) and SES0718407 (Scheinkman)
The views expressed herein are those of the author(s) and do not necessarily reflect the views of the
National Bureau of Economic Research.

© 2009 by Jaroslav Borovi…ka, Lars Peter Hansen, Mark Hendricks, and José A. Scheinkman. All
rights reserved. Short sections of text, not to exceed two paragraphs, may be quoted without explicit
permission provided that full credit, including © notice, is given to the source.
Risk Price Dynamics
Jaroslav Borovi…ka, Lars Peter Hansen, Mark Hendricks, and José A. Scheinkman
NBER Working Paper No. 15506
November 2009
JEL No. C52,E44,G12

                                            ABSTRACT


We present a novel approach to depicting asset pricing dynamics by characterizing shock exposures
and prices for alternative investment horizons. We quantify the shock exposures in terms of elasticities
that measure the impact of a current shock on future cash-flow growth. The elasticities are designed
to accommodate nonlinearities in the stochastic evolution modeled as a Markov process. Stochastic
growth in the underlying macroeconomy and stochastic discounting in the representation of asset
values are central ingredients in our investigation. We provide elasticity calculations in a series of
examples featuring consumption externalities, recursive utility, and jump risk.


Jaroslav Borovi…ka                                    Mark Hendricks
Department of Economics                               Department of Economics
The University of Chicago                             The University of Chicago
1126 East 59th Street                                 1126 East 59th Street
Chicago, IL 60637                                     Chicago, IL 60637
borovicka@uchicago.edu                                hendricks@uchicago.edu

Lars Peter Hansen                                     José A. Scheinkman
Department of Economics                               Department of Economics
The University of Chicago                             Princeton University
1126 East 59th Street                                 Princeton, NJ 08544-1021
Chicago, IL 60637                                     and NBER
and NBER                                              joses@princeton.edu
l-hansen@uchicago.edu
1    Introduction
We propose a new way to characterize risk price dynamics. In the methods of mathematical
ﬁnance, risk prices are encoded using the familiar risk neutral transformation and the in-
stantaneous risk-free rate. In structural models of macroeconomic risk, they are encoded in
the stochastic discount factor process used to represent prices at alternative payoﬀ horizons.
As an alternative, we depict asset pricing dynamics by extending two types of methods:
local risk prices and impulse response functions. Local risk prices give the reward expressed
in terms of expected returns for alternative local exposures to risk such as shocks to the
macro-economy. Impulse response functions characterize how shocks today contribute to
future values of a stochastic process such as macroeconomic growth or future cash ﬂows.
First we develop a related concept but tailored to the pricing of the exposure to macroeco-
nomic risk, and then we extend the concept of a local risk price by asking how the reward to
shock exposure changes as we alter the terminal or maturity date for the payoﬀ. This leads
us to construct shock-exposure and shock-price elasticities as functions of payoﬀ horizons.
Structural asset pricing models feature state dependence in risk premia as well as sensitivity
to the payoﬀ horizon. These risk premia depend on shock exposures and prices, and the
elasticities we propose reﬂect both dependencies.
    We believe that uncertainty about macroeconomic growth has important welfare impli-
cations and major consequences to market valuations of forward-looking assets. To explore
these phenomena requires the simultaneous study of stochastic growth and discounting, in
contrast to the extensive literature on ﬁxed income securities and the term structure of in-
terest rates that abstracts from growth. Previous work has sought to provide informative
characterizations of risk premia for cash ﬂows that grow stochastically over time and to
extract the distinct contributions of risk exposure (the asset pricing counterpart to a quan-
tity) and risk prices. See, for instance, Lettau and Wachter (2007), Hansen and Scheinkman
(2009a,b) and Hansen (2009).
    While there have been quantitative and empirical successes through the use of ad hoc
models of stochastic discount factors speciﬁed ﬂexibly to enforce the absence of arbitrage,
we continue to be interested in structural models that allow us to truly answer the question
“how does risk or uncertainty get priced?” The promise of such models is that they will allow
researchers to assign values to the shocks identiﬁed in macroeconomic models and support
welfare analyses that are linked to uncertainty. While reduced-form models continue to
provide a convenient shortcut for presenting empirical evidence, we aim to provide a dynamic
characterization of risk pricing that will support structural investigations that stretch models
beyond the support of the existing data.
   The methods we develop are applicable to models with small shocks, increments to Brow-

                                               2
nian motions, as well as large shocks, jumps with Poisson arrivals. We illustrate our approach
with a series of examples. For lognormal models we derive shock exposure elasticities which
coincide with impulse response functions familiar from the VAR literature. In more com-
plicated models, our methodology allows us to characterize nonlinearities in the dynamics
of asset prices. We contrast the habit formation models of Campbell and Cochrane (1999)
and Santos and Veronesi (2008), and we document important diﬀerences in the risk price
elasticities across investment horizons. We also derive elasticities for a model with recursive
utility in the spirit of Hansen et al. (2008), and for a model with jump risk where the state
variable evolves as a ﬁnite state Markov chain.


2     Markov pricing with Brownian information struc-
      tures
We follow the construction in Hansen and Scheinkman (2009a,b) and Hansen (2009). Con-
sider a Markov diﬀusion that solves:

                                 dXt = μ(Xt )dt + σ(Xt )dWt .

where W is a multivariate standard Brownian motion. In this model nonlinearity is captured
by the speciﬁcation of μ and σ. While the state variable X may well be stationary, we will
use it as a building block for processes that grow or decay over time.


2.1    Growth and discounting
In econometric practice we often build models for the logarithms of processes. An example
of such a model is               t             t
                           At =     β(Xu )du +     α(Xu ) · dWu .
                                   0              0

We call the resulting process, denoted by A, an additive functional because it depends
entirely on the underlying Markov process and it is constructed by integrating over the time
scale. Nonlinearity may be present in the speciﬁcation of β and α.
   While it is convenient to take logarithms when building time series models, to represent
values and prices it is necessary to study levels instead of logarithms. Thus to represent
growth or decay, we use the exponential of an additive functional, Mt = exp(At ). We will
refer to M as a multiplicative functional parameterized by (β, α). Ito’s Lemma guarantees




                                              3
that the local mean of M is                                
                                                  |α(Xt )|2
                                      Mt β(Xt ) +             .
                                                     2
The multiplicative functional is a local martingale if its local mean is zero:

                                                         |α(Xt )|2
                                          β(Xt ) +                 = 0.
                                                            2

   There are two types of multiplicative functionals that we feature: we use one to represent
stochastic growth and another for decay. For future reference, let G be a stochastic growth
functional parameterized by (βg , αg ). The second will be a stochastic discount functional S
parameterized by (βs , αs ). The stochastic growth functional grows exponentially over time
and the stochastic discount functional decays exponentially.


2.2    Perturbations
To compute elasticities we construct perturbations to multiplicative functionals. A per-
turbation to M is MH(r) where we parameterize H(r) using a pair (βh (x, r), rαd (x)) with
βh (x, 0) = 0. The function αd deﬁnes the direction of risk exposure. Thus
                                             t                              t
                       log Ht (r) =               βh (Xu , r)du + r               αd (Xu ) · dWu .
                                          0                               0


As r declines to zero, the perturbed process MH(r) collapses to M. Let
                                                                
                                                   d            
                                          βd (x) =    βh (x, r)
                                                   dr            r=0


and consider the additive functional:
                                 t               t
                          Dt =      βd (Xu )du +     αd (Xu ) · dWu .
                                      0                        0


   We use this additive functional to represent the derivative:
                                                  
                      d                               E [Mt Dt |X0 = x]
                         log E [Mt Ht (r)|X0 = x] =                    .                           (1)
                      dr                           r=0  E [Mt |X0 = x]

See Hansen and Scheinkman (2009b) for a formal derivation including certain regularity
conditions that justify this formula. Interestingly, formula (1) gives an additive decomposition
of the derivative using the additive functional D.
    In what follows we will build an alternative formula for the derivative in (1). This will


                                                           4
require two steps. First we build a factorization of the multiplicative functional, and then we
construct a nonlinear moving-average representation for a particular function of the Markov
state.


3    Factorization
We obtain an alternative and convenient representation of (1) by applying a change of
measure as in Hansen and Scheinkman (2009a). They provide suﬃcient conditions for the
existence of a factorization of a multiplicative process M:

                                                       e(X0 )
                                   Mt = exp(ηt)M̂t                                         (2)
                                                       e(Xt )

where M̂ is a multiplicative martingale and e is a strictly positive, smooth function of the
Markov state. The parameter η is a long-term growth or decay rate. We use the martingale
M̂ to deﬁne a new probability measure ˆ· on the original probability space. The multiplicative
property of M̂ insures that X remains Markovian in the new probability space. While this
factorization may not be unique, there is only one such factorization in which the change in
measure imposes stochastic stability and preserves the Markov structure.
    This factorization is distinct from that of Ito and Watanabe (1965). The Ito and Watan-
abe (1965) factorization for a multiplicative supermartingale results in the product of a local
martingale and decreasing functional. This factorization delivers the Markov counterpart to
the risk neutral transformation used extensively in mathematical ﬁnance when it is applied
to a stochastic discount factor functional. In this case the decreasing functional M d is
                                              t          
                                 Mtd   = exp −    ρ(Xu )du
                                                   0


where ρ is the instantaneous interest rate. State dependence in the decreasing component
makes it less valuable as a device to characterize risk price dynamics because even locally
deterministic variation in instantaneous interest rates induces risk adjustments for cash ﬂows
over ﬁnite time intervals. This leads us instead to extract a long-term growth or discount
rate η as in (2).
   If M is parameterized by (βm , αm ), Girsanov’s Theorem assures that the increment dWt
can be written as:

                             dWt = [αm (Xt ) + ν(Xt )] dt + dŴt .                         (3)



                                               5
Here ν is the exposure of log e(x) to dWt :
                                                                
                                                      ∂ log e
                                         ν=σ                                               (4)
                                                         ∂x

and Ŵ is a Brownian motion under the alternative probability measure ˆ·.
   To use this factorization in practice, we must compute e and η. Hansen and Scheinkman
(2009a) show how to accomplish this. Solve

                               E [Mt e(Xt )| X0 = x] = exp(ηt)e(x)

for any t where e is strictly positive. This is a (principal) eigenfunction problem, and since
it holds for any t, it can be localized by computing

                             E [Mt e(Xt )| X0 = x] − exp(ηt)e(x)
                         lim                                     =0                        (5)
                         t→0                  t

which gives an equation in e and η to be solved. The local counterpart to this equation is

                                              Be = ηe                                      (6)

where                                                           
                                       d                        
                               Be(x) =    E [Mt e(Xt )| X0 = x]
                                       dt                         t=0

It can be shown that for a diﬀusion model, if f is smooth,
                                                           2
                                                                  
                      1     2                ∂f  1          ∂ f
             Bf = βm + |αm | f + (σαm + μ) ·    + trace σσ
                      2                      ∂x 2           ∂x∂x

    We illustrate this computation in two examples that we develop throughout the text into
stylized economic models. The ﬁrst example features lognormal dynamics commonly used
in VAR analysis. The second example speciﬁes a state variable that forms the basis of the
consumption externality model of Santos and Veronesi (2008).

Example 3.1. Suppose that
                                      dXt = μ̄Xt dt + σ̄dWt ,

where μ̄ and σ̄ are matrices of size n×n and n×k, respectively. The multiplicative functional
M is parameterized by

                                                    
                                         βm (x) = β̄m x
                                         αm (x) = ᾱm .

                                                   6
Conjecturing that the function e(x) satisﬁes log e(x) = λ x, equation (6) yields:

                                                           1             2
                                     η = β̄m x + λ μ̄x +     |σ̄ λ + ᾱm | .
                                                            2

Thus λ = −(μ̄ )−1 β̄m . Under the change of measure,

                                  dXt = μ̄Xt dt + σ̄(ᾱm + σ̄  λ)dt + σ̄dŴt .

                                                                                            2

Consider now the second example. In this example the process for X is a member of Wong
(1964)’s class of scalar Markov diﬀusions built to imply stationary densities that are in the
Pearson family.1

Example 3.2. Let the univariate Markov state X evolve as:

                               dXt = − μ̄1 (Xt − μ̄2 )dt − σ̄Xt dWt ,      Xt > 0

where μ̄1 , μ̄2 , and σ̄ are positive constants.
    Rather than specifying the multiplicative functional M and then calculating the factoriza-
tion, we construct the multiplicative components directly as
                                                                  
                                                          1 + Xt
                                  Mt = exp (ηt) M̂t
                                                          1 + X0
                                                                       
                                              1     2
                                  M̂t = exp − (α̂m ) t + α̂m (Wt − W0 )
                                              2

where α̂m is a constant.
         Then formula (3) implies that the evolution of X under the change of measure is given
by

                              dXt = − [σ̄ α̂m Xt + μ̄1 (Xt − μ̄2 )] dt − σ̄Xt dŴt ,

and the risk exposure for log M is

                                                                x
                                           αm (x) = α̂m − σ̄       .
                                                               1+x

By construction, the eigenfunction is e(x) = (1 + x)−1 with eigenvalue η.                   2
     1
         See process F in Wong (1964).



                                                        7
   We use the alternative probability measure to absorb the martingale component of the
multiplicative functional in our formula (2). The derivative of interest is:
                                                      
                          d                                 Ê [ê(Xt )Dt |X0 = x]
                             log E [Mt Ht (r)|X0 = x]    =
                          dr                           r=0     Ê [ê(Xt )|X0 = x]

where ê = 1e . Moreover,
                   t                         t                                                    t
         Dt =           βd (Xu )du +               αd (Xu ) · [αm (Xu ) + ν(Xu )]du +                    αd (Xu ) · dŴu .
                0                          0                                                     0


    For our analysis, we will seek a related representation without resort to stochastic inte-
grals. Prior to achieving this, we will present a nonlinear moving-average representation for
ê(X).


4     Nonlinear moving-average representation
We build a nonlinear moving-average representation for a particular function of the Markov
state. This formula can be viewed as a special case of the Haussmann-Clark-Ocone formula
that holds under additional smoothness conditions. For example see Haussmann (1979). Let
Tτ denote the conditional expectation operator under the change in probability measure over
an interval of time τ . The process {Tt−u ê(Xu ) : 0 ≤ u ≤ t} is a martingale since

                                               Tt−u ê(Xu ) = Ê [ê(Xt )|Fu ]

where Fu is the σ-algebra generated by the Brownian motion until date u. This martingale
can be represented as a stochastic integral against the Brownian motion, and, in particular,
there exists an adapted process R such that:
                                                               t
                                       ê(Xt ) =                    Ru · dŴu + Tt ê(X0 ).                                  (7)
                                                            0


The following assumption and our Markov speciﬁcation allows us to characterize Ru .

Assumption 4.1. Tt−u ê(x) has a continuous second derivative with respect to x and a
continuous ﬁrst derivative with respect to u.

    It is an immediate application of Ito’s lemma that in this case,
                                                                                           
                                                                            ∂
                                        Ru = σ(Xu )                             Tt−u ê(Xu ) .
                                                                             ∂x

                                                                             8
This construction motivates a deﬁnition of a nonlinear version of an impulse response func-
tion as                                                
                                            ∂
                                    σ(x)        Tt ê(x) ,
                                             ∂x
the response of ê(Xt ) to a shock dŴ0 .2
   Recall that e (and hence ê) is strictly positive, and construct
                                                                                  
                                                               ∂
                                              φ(x, t) = σ(x)        log Tt ê(x)
                                                              ∂x
                                                             ∂
                                                        σ(x) ∂x   Tt ê(x)
                                                      =                      .
                                                             Tt ê(x)

Note in particular that
                                                      ν(x) = −φ(x, 0)

where ν is given by (4). With this construction, we may represent (7) equivalently as:
                                         t
                      ê(Xt ) =               [Tt−u ê(Xu )] φ(Xu , t − u) · dŴu + Tt ê(X0 ).        (8)
                                      0


The function φ will play a central role in our representation of elasticities.


4.1     Examples
We now apply these calculations and compute the impulse response of ê(x) for the lognormal
example introduced earlier.

Example 4.2. Consider again Example 3.1. Recall ê(x) = exp (−λ x) for λ = −(μ̄ )−1 β̄m ,
and conjecture that
                                              Tt ê(x) = exp [a0 (t) + a1 (t) x] .
   2
     The existing econometrics literature contains many deﬁnitions of nonlinear impulse response functions.
Koop et al. (1996) and Potter (2000) examine four deﬁnitions used with linear series and assess the merits
of the nonlinear analogue of each. They work in discrete time and argue that the most sensible deﬁnition is
one motivated by the linear updating function used for linear series. In the Markov case their construction
is based on
                                            Tt− ê(X ) − Tt ê(X0 )
over a prediction interval . In our continuous time limit, this increment becomes:
                                                         
                                             ∂
                                                Tt ê(X0 ) σ(X0 )dŴ0
                                             ∂x

where we take the vector multiplying the shock dŴ0 as the state-dependent impulse response.




                                                                  9
Under this conjecture, a0 (0) = 0, a1 (0) = −λ, and
                                                                               
                    d                                      da0 (t)     da1 (t)
                       Tt ê(x) = exp [a0 (t) + a1 (t) x]           +             x .                  (9)
                    dt                                        dt          dt

Alternatively, from Ito’s Lemma the drift of Tt ê(x) is given by:
                                                                                                 
    d                                                                     1          
       Tt ê(x) = exp [a0 (t) + a1 (t) x] a1 (t) μ̄x + a1 (t) σ̄(ᾱm + σ̄ λ) + a1 (t) σ̄σ̄ a1 (t)     (10)
    dt                                                                        2

Equating (9) and (10) gives

             a1 (t) = − exp(μ̄ t)λ
                       t
                           1 
             a0 (t) =        λ exp(μ̄u)σ̄σ̄  exp(μ̄ u)λ − λ exp(μ̄t)σ̄(ᾱm + σ̄  λ) du
                       0   2

Thus,
                                     φ(x, u) = σ̄  exp(μ̄ u)(μ̄)−1 β̄m

since the nonlinear moving-average coeﬃcient for ê(x) is:

                     Tt ê(x)φ(x, t) = exp [a0 (t) + a1 (t) x] σ̄  exp(μ̄ t)(μ̄ )−1 β̄m .

                                                                                                        2
To further illustrate these methods, let us develop Example 3.2.
Example 4.3. For notational simplicity rewrite the evolution of X under the change of
measure as

                                  dXt = − μ̂1 (Xt − μ̂2 ) dt − σ̄Xt dŴt .
                                   μ̂1 =μ̄1 + σ̄ α̂m
                                         μ̄1 μ̄2
                                   μ̂2 =
                                           μ̂1

Use the distorted evolution equation and expression for ê(x) to calculate

                               Tu ê(x) = 1 + μ̂2 + exp(−μ̂1 u)(x − μ̂2 ).

As a consequence,

                                                      σ̄ exp(−μ̂1 u)
                             φ(x, u) = −                                     x                        (11)
                                             1 + μ̂2 + exp(−μ̂1 u)(x − μ̂2 )

                                                       10
             0

         −0.05

          −0.1

         −0.15

          −0.2

         −0.25

          −0.3


                 0                  50       100              150        200           250
                                                   quarters

Figure 1: Plot of φ(x, t) in Example 4.3 at the 25th , 50th , and 75th quantile values of x. The
parameterization is μ̄1 = 0.04, μ̄2 = 2.28, σ̄ = 0.6853, γ̄ = 0.0054.


Thus, the nonlinear moving-average representation for ê(x) is
                           t
          ê(Xt ) =      Tt−u ê(Xu )φ(Xu , t − u)dŴu + 1 + μ̂2 + exp(−μ̂1 t)(X0 − μ̂2 )
                        0
                         t
                     =−     exp [−μ̂1 (t − u)] σ̄Xu dŴu + 1 + μ̂2 + exp(−μ̂1 t)(X0 − μ̂2 )
                                0




Notice that unlike in the lognormal model of Example 3.1, the function φ is state-dependent.
Figure 1 displays the function at each quartile of the stationary distribution for X, with
parameterization given in the ﬁgure.
                                                                                              2


4.2    Malliavin derivative
There is an alternative way to construct the nonlinear moving-average representation that
is both more general and of interest in its own right. This construction is based on the
Malliavin derivative, which we develop in this subsection. It is not necessary to understand
this section in order to follow the remainder of our paper. We include this discussion because
Malliavin diﬀerentiation is prevalent in mathematical ﬁnance.


                                                    11
   Consider the following perturbations to the Brownian motion between date zero and
date t. Let q be a function in Ln2 [0, t] that is,
                                               t
                                                    |q(v)|2dv < ∞.
                                            0


The perturbed process is:
                                        Ŵu + rQu , 0 ≤ u ≤ t
                u
where Qu = 0 q(v)dv, and r ∈ R. Recall that we can identify each path of a Brownian mo-
tion in [0, t] with an element of Ω = C0 ([0, t), Rn ), the set of continuous Rn -valued functions
starting at 0. Given a random variable Φ deﬁned on Ω we are interested in the derivative
of Φ(Ŵ + rQ) with respect to r. The Malliavin derivative is a process Du Φ(Ŵ ) that is
motivated3 by the following representation:
                                                             
                             Φ(Ŵ + rQ) − Φ(Ŵ )                     t
                         lim                     =                       Du Φ(Ŵ ) · q(u)du.           (12)
                         r→0          r                          0


The value of the Malliavin derivative at u quantiﬁes the contribution of dŴu to Φ. This
contribution will, in general, depend on the entire Brownian path from 0 to t.
   Fix an initial condition x and a time t and consider the random variable Φ deﬁned by

                                               Φ(Ŵ ) = ê(Xt )

where X solves

                    dXu = [μ(Xu ) + σ(Xu )(α(Xu ) + ν(Xu ))]du + σ(Xu )dŴu
                        .
                        = μ̂(Xu )du + σ(Xu )dŴu .

If the functions μ̂ and σ are smooth and with bounded derivatives then the random variable
Xt is the domain of the Malliavin derivative. In fact let Y be the ﬁrst variation process
associated to X, that is Y0 = In and

                             dYu = ∂ μ̂(Xu )Yu du +                  ∂σi (Xu )Yu dŴui .               (13)
                                                             i


Here, ∂F denotes the Jacobian matrix of an Rn valued function F and σi is the i-th column
   3
     The construction of the Malliavin derivative usually starts by considering a subset of random variables
called the Wiener polynomials and deﬁning the Malliavin derivative using equation (12). The Malliavin
derivative is then extended to a larger class of random variables using limits. Equation (12) does not
necessarily hold for every random variable which has a Malliavin derivative.


                                                        12
of the matrix σ. Then, for u ≤ t, the n × n matrix

                                                 Du Xt = Yt Yu−1 σ(Xu ).                             (14)

In addition, if ê has bounded ﬁrst derivatives, then Φ is in the domain of the Malliavin
derivative and
                                  Du Φ = ∇ê(Xt ) Du Xt .                           (15)

where ∇ is used to denote the gradient. The Haussmann-Clark-Ocone formula provides a
representation of the integrator R in equation (7) in terms of a Malliavin derivative:4
                                                                   
                                                Ru = Ê Du Φ(Ŵ )|Fu ,

and thus5                              t                 
                    ê(Xt ) =               Ê Du Φ(Ŵ )|Fu · dŴu + Ê [ê(Xt )|X0 = x] .
                                    0

Furthermore, it follows directly from equations (13)–(15) that
                                                              
                                Ê Du Φ(Ŵ )|Fu = Ê Du Φ(Ŵ )|Xu .

When the smoothness required by Assumption 4.1 is not satisﬁed, we may as an alternative
write the function φ via
                                                                           
                                                        Ê Du Φ(Ŵ )|Xu = y
                                    φ(y, t − u) =                                                    (16)
                                                          Ê [ê(Xt )|Xu = y]

where we have initialized X0 at x and Φ depends implicitly on t.6


5       Representing elasticities
We now have the core ingredients for representing the elasticities that interest us. These
ingredients include:

  i) the coeﬃcient αm used in the construction of the multiplicative functional M;
    4
     For a statement of this formula and the results concerning the Malliavin derivative of functions of a
Markov diﬀusion see, for instance, Fournié et al. (1999), pages 395 and 396.
   5
     Haussmann (1979) gives formulas for Markov dynamics for more general functions Φ.
   6
     Gourieroux and Jasiak (2005) suggest basing impulse response functions on the pathwise contribution
to changing a shock at a given date. This leads them to explore more general distributional consequences
of a shock. The Malliavin derivative is the continuous-time counterpart and depends on the entire shock
process up to date t.

                                                           13
 ii) the coeﬃcients βd and αd used in the construction of the additive functional D;

iii) a change of probability measure and function ê from factorization (2);

iv) the function φ(x, t) constructed from the state-dependent coeﬃcients in a moving-
    average representation for ê(Xt ) given in (16).

   The integral representation of the logarithmic derivative is given by:

Proposition 5.1. (Hansen and Scheinkman (2009b))
                               
   d                           
      log E [Mt Ht (r)|X0 = x] =
   dr
                               r=0
                                                                                             
                     t
        Ê ê(Xt ) 0 (βd (Xu ) + αd (Xu ) · [αm (Xu ) + φ(Xu , t − u) − φ(Xu , 0)]) du|X0 = x
      =                                                                                        .
                                            Ê [ê(Xt )|X0 = x]

Exchanging orders of integration, the date u contribution to the integrand is:

                                 Ê [ê(Xt )ψ(Xu , t − u)|X0 = x]
                                        Ê [ê(Xt )|X0 = x]

where ê(Xt ) is an extra weighting function and

                             .
                    ψ(x, τ ) = βd (x) + αd (x) · [αm (x) + φ(x, τ ) − φ(x, 0)].               (17)

   In formula (17), αd parameterizes the local exposure to risk that is being explored and
βd is determined as a consequence of the the nature of the perturbation. The coeﬃcient
αm is the local exposure to risk of the baseline multiplicative functional. To interpret the
logarithmic derivative as an elasticity, we restrict |αd (Xt )|2 to have a unit expectation in
order that αd · dWt has a unit standard deviation. The dependence of ψ on the horizon to
which the perturbation inﬂuences, that is the dependence on τ , is only manifested in the
function φ.
   The function ψ captures the impact of the shock that occurs in the next instant. The
impact of a shock at a future date will be realized through a distorted conditional expectation:

                                 Ê [ê(Xu+τ )ψ(Xu , τ )|X0 = x]
                                                                                              (18)
                                      Ê [ê(Xu+τ )|X0 = x]

for u ≥ 0 and τ ≥ 0. Speciﬁcally, this formula captures the date zero impact of a shock at
date u on the logarithmic derivative for date u + τ = t. Since the process X is stochastically


                                                14
stable under the change of measure, the limiting version of formula (18) as the shock date t
is shifted oﬀ to the future is
                                   Ê [ê(Xu+τ )ψ(Xu , τ )]
                                                                                       (19)
                                         Ê [ê(Xu+τ )]
which is independent of u but continues to depend on τ .
   We now add some structure to perturbations in order to produce formulas for βd .


5.1    Martingale perturbations
Suppose that
                                               1
                                  βh (x, r) = − r2 |αd (x)|2 .
                                               2
Thus H(r) is a local martingale for any r and

                                                βd = 0.

In this case the date zero contribution is:

                                  .
                          (x, t) = αd (x) · [αm (x) + φ(x, t) − φ(x, 0)],             (20)

which we refer to as a shock elasticity function (of M in the direction αd ) when viewed
as a function of t. It gives a nonlinear counterpart to an impulse response function by
characterizing the (local) impact of a shock today on the expected future values of the
multiplicative functionals. When the process X is stationary, this function will typically
have a well deﬁned limit given by

                                      .
                              (x, ∞) = αd (x) · [αm (x) − φ(x, 0)].

This nonzero limit reﬂects the fact that shocks are permanent.
   To see the connection between our elasticity and an impulse response function, consider
again Example 3.1.

Example 5.2. Use φ(x, t) as computed in Example 4.2 in equation (20) to get the shock
elasticity function:
                                                                               
                         (x, t) = ᾱd · ᾱm − σ̄  [I − exp(μ̄ t)](μ̄ )−1 β̄

This coincides with the impulse response function for A = log M where the vector ᾱd selects
the shock combination of interest.

   In this example the shock elasticity function is not state dependent, but this outcome

                                                   15
is special. Nonlinearity in the growth rate or stochastic volatility alter this conclusion. We
analyze such examples in Section 6.


5.2    Pricing growth-rate risk
Following Hansen et al. (2008), Hansen and Scheinkman (2009a), and Hansen (2009) we
consider the pricing of exposure to growth-rate risk. We study the pricing of cash ﬂows that
are multiplicative martingales in order to feature the pricing dynamics. We investigate the
pricing of what is sometimes referred to as zero coupon equity (see Wachter (2005) or Lettau
and Wachter (2007)), that is a claim to a single random payoﬀ at a point in time t.
  To feature price dynamics, suppose that the growth functional G and each perturbation
GH(r) are multiplicative martingales:

                                                 1
                           βg (x) + βh (x, r) = − |αg (x) + rαd (x)|2 .
                                                 2

The price of cash ﬂow G is
                                                E (St Gt |X0 = x) .

Since Gt has conditional expectation equal to one,

                                             1
                                            − log E (St Gt |X0 = x) ,
                                             t

is the expected rate of return.
   Given a direction αd , construct the additive functional:
                                      t                                 t
                      Dt = −               αd (Xu ) · αg (Xu )du +            αd (Xu ) · dWu
                                   0                                  0


Then the growth-rate risk price for direction αd is deﬁned to be the marginal change in
the negative logarithm of the price (logarithm of the expected return) with respect to the
exposure to a shock αd (Xt ) · dWt . Formally it is given by
                                                  1
                                                      E (St Gt Dt |X0 = x)
                                       ρt = − t                            .                   (21)
                                                      E (St Gt |X0 = x)

We take the negative because risk exposure is typically unwelcome to investors. We make ρt
an elasticity by normalizing the long-run riskiness of the exposure to be one per unit time.
Speciﬁcally we restrict
                                      E[|αd (Xt )|2 = 1.



                                                           16
   We decompose this risk price by applying Proposition 5.1. The shock-price elasticity
function

                        π(x, t) = −αd (x) · [αs (x) + φ(x, t) − φ(x, 0)]                                     (22)

represents the time u = 0 contribution to the risk price. We call the price elasticities to
shocks at intermediate dates u risk-price increments. These intermediate contributions are
of the form (18) and Proposition 5.1 shows how to write the growth-rate risk price (21) as
the integral of the incremental prices over the lifetime of the cash ﬂow.


5.3     Alternative perturbations
In order to focus exclusively on price elasticities, in section 5.2 we structured our perturba-
tions so that GH(r) is a martingale for each r. Suppose instead we follow the approach in
section 5.1, by constructing a martingale perturbation:
                                                                          
                                   r2           t
                                                               2
                                                                                 t
                    log Ht (r) = −                  |αd (Xu )| du + r                αd (Xu ) · dWu .
                                   2        0                                0


Typically GH(r) will not be a martingale, and as a consequence in our study of returns we
must also take account of how the perturbation alters the expected payoﬀ.
   The return of interest is given by:

                                               Gt Ht (r)
                                                                .
                                        E [St Gt Ht (r)|X0 = x]

In our study of the dynamics of expected rates of return we have to consider contributions
from both the expected payoﬀ and from the price:

                   1                           1
                     log E [Gt Ht (r)|X0 = x] − log E [St Gt Ht (r)|X0 = x] .
                   t                           t

   In light of these two contributions, we compute two elasticity functions: the shock-
exposure elasticity of G in the direction αd and the shock-exposure elasticity of SG in the
same direction. The ﬁrst elasticity imitates our earlier calculation with
                                                                                                        
                                                                   t
                                                                                            − u)du|X0 = x
           d                                 Êg                  0 g
                                                                      ê (Xt )g (Xu , t
              log E [Gt Ht (r)|X0 = x]    =
           dr                           r=0                             Êg [êg (Xt )|X0 = x]

where
                                  .
                       g (x, τ ) = αd (x) · [αg (x) + φg (x, τ ) − φg (x, 0)],                              (23)

                                                          17
This gives the exposure contribution over an interval t and its decomposition using dis-
counted shock-exposure elasticities for shocks at intermediate dates u. In this formula we
use the subscript g because we chose M = G, and the elasticity measures how a shock today
inﬂuences the growth functional in future time periods.
                                                                  .
   The second elasticity is entirely analogous except that M = SG = V and measures value
responses:                                                                   
                                          t
                               Êv       0 v
                                            ê (Xt )v (Xu , t   − u)du|X0 = x
                                              Êv [êv (Xt )|X0 = x]
where
                                     .
                          v (x, τ ) = αd (x) · [αv (x) + φv (x, τ ) − φv (x, 0)].

In this formula,
                                                  αv = αs + αg

Combining these two integral contributions, we obtain a risk price elasticity that takes into
account the predictability of G and its perturbed counterpart:
                                                                   
        d                                                          
           log E [Gt Ht (r)|X0 = x] − log E [St Gt Ht (r)|X0 = x]       =
        dr                                                          r=0
                                                                                          
               t                                            t
         Êg 0 êg (Xt )g (Xu , t − u)du|X0 = x      Êv 0 êv (Xt )v (Xu , t − u)du|X0 = x
                                                   −                                           .
                    Êg [êg (Xt )|X0 = x]                       Êv [êv (Xt )|X0 = x]

From the instantaneous contribution to these integrals, we construct an alternative shock-
price elasticity function:

                   π(x, t) = −αd (x) · [αs (x) + (φv − φg )(x, t) − (φv − φg )(x, 0)].             (24)

When G is a multiplicative martingale, φg is identically zero and this coincides with our
previous construction of a shock price elasticity. The integral contributions, or risk-price
increments, will still be diﬀerent because G and V are associated with two diﬀerent changes
in measure.


6     Example economies
To illustrate the methods we developed, we provide the elasticity calculations for several
models from the existing asset pricing literature. First we contrast the price elasticities
implied by two models in which investors have preferences that reﬂect external habits or
consumption externalities. Next we postulate consumption dynamics that contain a small

                                                         18
predictable component in macroeconomic growth and stochastic volatility. We investigate
how the price elasticities change when we alter the investors’ preferences from a baseline
power utility speciﬁcation to a recursive utility counterpart.


6.1    External habit models
The class of external habit models includes a variety of speciﬁcations that strive to explain
empirical characteristics of the asset price dynamics. One important aspect, analyzed in
Santos and Veronesi (2008) and other papers, are the diﬀerences in returns on cash ﬂows of
alternative maturities. We share a similar interest and focus on the implied pricing dynamics
as reﬂected in the term structure of shock-price elasticities. We calculate these elasticities for
the models of Campbell and Cochrane (1999) and Santos and Veronesi (2008) (abbreviated
as CC and SV, respectively) and highlight important diﬀerences. We start with the SV model
for which there are closed-form solutions for the shock-price elasticities. For comparison we
use a continuous-time version of the CC model and rely on numerical calculations similar to
those in Wachter (2005).
   Both models specify the stochastic discount factor as a multiplicative functional
                                                        −γ
                                                Ct − Ct∗
                                 St = exp(−δt)
                                                C0 − C0∗
                                                −γ
                                                Ct     e (X0 )
                                    = exp(−δt)                  .
                                                C0      e (Xt )

C ∗ is an external consumption reference process and C is aggregate consumption, evolving
as a geometric Brownian motion

                                        d log Ct = β̄c dt + ᾱc dWt .

The growth functional of interest is the aggregate consumption process itself, G = C.
   Santos and Veronesi (2008) specify the transitory component as
                                                    −γ
                                       −1        Ct∗
                             e (Xt )        = 1−         = 1 + Xt ≥ 1,
                                                 Ct

where the process X evolves as in Example 3.2. Then M = SC is a multiplicative functional
of the form in Example 4.3, where ᾱm = (1 − γ)ᾱc . Additionally, the loading of X on the
shock, σ̄, is expressed as a factor of ᾱc , σ̄ = χᾱc . The local risk price (identical to the local
shock-price elasticity) is
                                                        Xt
                                        γ ᾱc + χᾱc        .
                                                     1 + Xt

                                                     19
       In Campbell and Cochrane (1999), the transitory component is given by

                                       e (Xt )−1 = exp (γ (Xt + b))

and the process X follows

                                dXt = −ξ (Xt − μx ) dt + λ (Xt ) σc dWt

with the volatility factor λ(x) = 1 − (1 + ζx)1/2 and ζ = 2ξ/(γ |ᾱc |2 ). This implies the local
shock-price elasticity

                                   γ ᾱc − γλ(x)ᾱc = γ(1 + ζx)1/2 ᾱc .

The SV and CC models thus amplify the local shock-price elasticities in the power utility
model, γ ᾱc , by a state-dependent factor.
  To facilitate comparisons between the SV and CC speciﬁcations, we ﬁx γ = 2 for both
models but set the parameters of the SV model so that the distribution of local risk prices is
similar to that in the CC model. Formally, the parameters μx and χ are chosen to minimize
the Kullback-Leibler divergence (the log-likelihood ratio) with respect to the local risk price
density of the CC model.7 Figure 2 reports the stationary densities for the local risk prices
in the two models. The densities have rather diﬀerent shapes even after we have adjusted
the SV parameter values to make them look as similar as possible.
   For simplicity we consider only the single shock case and set αd to unity. We use formula
(22) to calculate the following shock-price elasticity function, which in this example is state-
dependent:
                                                  exp(−μ̂1 t)
                      π(x, t) = γ ᾱc +                                   χᾱc x
                                        1 + μ̂2 + exp (−μ̂1 t) (x − μ̂2 )
For the CC model we do not have quasi-analytical formulas at our disposal and instead rely
on numerical methods to compute the function.
    The top panel of Figure 3 displays the elasticity function for the quartiles of the stationary
distribution of the state variable X, and the bottom panel compares with the shock-price
elasticity function implied by Campbell and Cochrane (1999). The elasticity function of the
SV model decays relatively quickly and is near its limiting value by about 50 quarters.8 On
the other hand, that of CC remains relatively ﬂat for 100 quarters and does not approach its
   7
     When the original SV parameterization is used the local risk prices in CC are roughly twice as large
as those of SV. For the SV speciﬁcation, it is tricky to change γ. If the speciﬁcation of the consumption
externality is held ﬁxed the convenient functional form for the state evolution is lost.
   8
     This limiting value as the maturity t → ∞ is equal to the elasticity from the power utility model, γ ᾱc .



                                                      20
      4

      3

      2

      1

      0
          0       0.1            0.2         0.3          0.4          0.5           0.6

      4

      3

      2

      1

      0
          0       0.1            0.2         0.3          0.4          0.5           0.6

Figure 2: The top panel displays the stationary density of local risk prices in the Santos
and Veronesi (2008) model. The 25th , 50th , and 75th quantiles are marked with circles. The
parameterization is χ = 126.9, μ1 = 0.04, μ2 = 2.280, ᾱc = 0.0054, γ = 2. The bottom panel
compares with the model of Campbell and Cochrane (1999) as outlined in Hansen (2009)
with parameter values ξ = 0.035, μx = 0.4992, ᾱc = 0.0054, and γ = 2.


limiting value until about 300 quarters. Thus, the SV model implies a much less persistent
impact of exposure to a current shock on the prices of cash ﬂows further in the future.
   Recall that the shock-price elasticities depict the impact for valuation of shock exposure
that occurs over the next instant. We now shift forward the date of the exposure to be u
periods into the future. This gives the risk-price increments which are a distorted conditional
expectation of the shock-price elasticity function reported in Figure 3:

                        Ê [ê(Xu+τ ) [αs (Xu ) + φ(Xu , τ ) − φ(Xu , 0)] |X0 = x]
                 −                                                                         (25)
                                      Ê [ê(Xu+τ )|X0 = x]
                                                μ̂2 + exp(−μ̂1 u)(x − μ̂2 )
                 = γ ᾱc + exp (−μ̂1 τ ) χ                                        ᾱc
                                           1 + μ̂2 + exp(−μ̂1 (u + τ ))(x − μ̂2 )

where u + τ = t is the investment horizon. These curves (indexed by u) have a well deﬁned




                                                   21
            0.4

            0.3

            0.2

            0.1

              0
                  0           50             100              150           200             250

            0.4

            0.3

            0.2

            0.1

              0
                  0           50             100              150           200             250
                                                   quarters

Figure 3: The top panel displays the shock-price elasticity function in the Santos and Veronesi
(2008) model, while the bottom panel compares with the Campbell and Cochrane (1999)
model. The solid curve conditions on the median state, while the dot-dashed curves condition
on the 25th and 75th quantiles. Both parameterizations are as in Figure 2.


limit as u → ∞ given by formula (19), which in the case of the SV model is

                                                               μ̂2
                                     γ ᾱc + exp (−μ̂1 τ )           χᾱc
                                                             1 + μ̂2

For the CC model counterpart we again rely on numerical calculations.
   Figure 4 compares the limiting shock-price elasticities in the SV and CC models. The
upper panel shows that in Santos and Veronesi (2008) the limiting shock-price elasticity
decays exponentially, and it sits somewhat higher than the local elasticity conditioned on
the upper quartile. This upward pull is due to the heaviness of the upper tail of the stationary
distribution of X.
    The bottom panel shows that in the CC model, this upward pull on the limiting elasticity
is extreme — the limiting local contribution is higher by a factor of 30 compared to the local
elasticity at the median state.9 The limiting elasticity curves sharply contrast what the SV
   9
    To elucidate the calculation, consider the numerator of the limiting contribution in formula (19) for
τ = 0: Ê [ê(Xu )π(Xu , 0)] = − q̂(x)ê(x)αm (x)dx where q̂(x) denotes the stationary density for the state
variable√under the change of measure. Hansen (2009) shows that   √ the large x approximation of q̂(x)ê(x) is
exp(−k x) with a small coeﬃcient k while −αm (x) behaves as x for large x. The slow decay of q̂(x)ê(x)
combined with the unboundedness of the local risk price function leads to the high limiting contributions
displayed in the bottom panel of Figure 4.


                                                     22
     0.4


     0.2


      0
           0           50              100              150            200             250

      8

      6

      4

      2

      0
           0           50              100              150            200             250
                                             quarters

Figure 4: A comparison of the limiting shock-price elasticities of the Santos and Veronesi
(2008) model (top panel) with the Campbell and Cochrane (1999) model (bottom panel).
Both parameterizations are as in Figure 2.


and CC models imply about how tail risk aﬀects the prices of cash ﬂows with long maturities.
   So far, we have analyzed the shock-price elasticity π(x, t) and its limiting counterpart.
We now consider pricing growth rate risk as in Hansen and Scheinkman (2009a) and Hansen
(2009) where we parameterize the exposure to risk to occur over the entire investment hori-
zon. These growth-rate risk prices are integrals of the price elasticities discussed previously
as depicted in Section 5.1 and scaled by the investment horizon t. Hansen (2009) discusses
the computation of the risk prices in more detail.
   We plot the risk prices for the two models in Figure 5 as functions of the investment
horizon. The top panel shows that the risk prices in the SV model show a similar decaying
pattern as the shock-price elasticities. The decay rate for the risk prices is slower relative to
the elasticity function because risk prices aggregate the elasticity contributions at intermedi-
ate shock dates. In the CC model, the growth-rate risk prices increase with maturity up until
about 200 quarters. This is consistent with the dramatic upward shift in the shock-price
elasticity function for the CC model as we move forward the exposure date, thus approaching
the limit curve depicted in Figure 4. It is only after 200 quarters that the growth-rate risk
prices start to decrease. Thus the risk price dynamics are very diﬀerent for the SV and CC


                                               23
      0.4

      0.3

      0.2

      0.1

       0
            0         50              100              150           200             250


      1.5


       1


      0.5


       0
            0         50              100              150           200             250
                                            quarters

Figure 5: The top panel displays risk prices as a function of investment horizon in the Santos
and Veronesi (2008) model. The solid curve conditions on the median state, while the dot-
dashed curves condition on the 25th and 75th quantiles. The bottom panel compares with
the Campbell and Cochrane (1999) model. Both parameterizations are as in Figure 2.


models even though they were designed to capture similar empirical phenomenon, larger risk
prices in bad times than good times.


6.2     Breeden-Lucas and Epstein-Zin preferences
The literature on “long-run risk” features models with a small predictable component in the
growth rate of consumption and investors endowed with recursive utility preferences for which
the intertemporal composition of risk matters. Stochastic volatility in the macroeconomy
is included in part as a mechanism for risk prices to ﬂuctuate over time. Hansen et al.
(2007) and Hansen (2009) present an example that is the continuous-time counterpart to
the model of Bansal and Yaron (2004). This example generalizes the log-normal dynamics
introduced in Examples 3.1 and 4.2 by the inclusion of a square root process for the evolution
of macroeconomic volatility.




                                              24
6.2.1   State dynamics

In line with the example in Hansen (2009), we specify the dynamics for the state vector
         [1]   [2]
Xt = (Xt , Xt ) as
                                                                                     
                                      μ̄1 x[1]                               √         σ̄1
                         μ(x) =                                σ(x) =            x[2]
                                   μ̄2 (x[2] − 1)                                      σ̄2

and consider a multiplicative functional for consumption parameterized by
                                                                                      √
                     β(x) =β̄0 + β̄1 x[1] + β̄2 (x[2] − 1)                   α(x) =    x[2] ᾱ.   (26)

This speciﬁcation of the dynamics contains a predictable component in the multiplicative
functional modeled by X [1] , and allows for stochastic volatility modeled by the scalar variance
process X [2] . Our variance process stays strictly positive, and we prevent it from being pulled
to zero by imposing the restriction μ̄2 + 12 |σ̄2 |2 < 0. To guarantee stationarity, assume that
μ̄1 has eigenvalues with strictly negative real parts.

6.2.2   Investors’ preferences

We compare the shock-price elasticities for two speciﬁcations of investors’ preferences. In the
Breeden (1979) and Lucas (1978) speciﬁcation, investors have time-separable power utility
with relative risk aversion coeﬃcient γ. In the second case, we endow investors with recursive
preferences of the Kreps and Porteus (1978) or Epstein and Zin (1989) type, analyzed in
continuous time by Duﬃe and Epstein (1992). We refer to the ﬁrst model as the BL model
and the second as the EZ model.
   In the BL model, we immediately have the stochastic discount factor as:
                                                                  −γ
                                                              Ct
                                       St = exp(−δt)                     .
                                                              C0

   In the EZ model the stochastic discount factor requires more calculation. Let {Vt } denote
the continuation value for the recursive utility speciﬁcation, and denote the inverse of the
elasticity of intertemporal substitution by . The continuous-time recursive utility evolution
is restricted by:
                                                                            
                         δ        1−         1−                 λt
                     0=      (Ct )     − (Vt )          
                                                   (Vt ) +                     Vt
                        1−                                  (1 − γ)(Vt )1−γ




                                                     25
where λt is the local mean:

                                             E [(Vt+ )1−γ − (Vt )1−γ |Ft ]
                                 λt = lim                                   .
                                       ↓0                 

Notice that this recursion is homogeneous of degree one in consumption and the continuation
value process. The limiting version for  = 1 is given as:
                                                                       
                                                              λt
                          0 = δ (log Ct − log Vt ) Vt +                   Vt .                         (27)
                                                        (1 − γ)(Vt )1−γ

In what follows we impose the unitary elasticity of substitution restriction as a device to
obtain quasi-analytical solutions.10 The stochastic discount factor is then:
                                                                   −1
                                                               Ct
                                      St = exp(−δt)                       S̃t                          (28)
                                                               C0

where S̃t is the multiplicative martingale component of
                                                         1−γ
                                                     Vt
                                                                                                       (29)
                                                     V0

given by the Ito and Watanabe (1965) decomposition described previously.11 This martingale
component inherits the forward-looking features of the continuation value process.
   Hansen (2009) shows that both stochastic discount factors share the same martingale
component when δ      0, and thus the long-term pricing implications for both the BL and
EZ models coincide in this limiting case.
   Given the state dynamics, constructing this martingale component is straightforward.
The necessary calculations to arrive at the stochastic discount factor are detailed in Ap-
pendix A. Appendix C provides an alternative derivation.

6.2.3    Elasticities

This model speciﬁcation implies two useful properties in calculating shock elasticities. First,
for a multiplicative functional parameterized by (26), the principal eigenfunction associated
with the martingale decomposition is loglinear in the state variables, e(x) = exp(λ x). Note
then that {e(Xt )/e(X0 ) : t ≥ 0} is also a multiplicative functional of form (26). Second, con-
ditional expectations of such a multiplicative functional are loglinear in the state variables,
  10
     The impact of the intertemporal elasticity on the risk prices vanishes as we let the subjective rate of
discount approach unity.
  11
     The martingale contribution is well known to support an interpretation of a model in which beliefs are
distorted as a device to enforce a concern about model misspeciﬁcation or a preference for robustness.

                                                      26
with time-varying coeﬃcients given as solutions to a set of ﬁrst-order ordinary diﬀerential
equations. See Appendix A for details.
   Using the two properties of process (26) mentioned above,
                                                                                
                              Tt ê(x) = exp θ0 (t) + θ1 (t) · x[1] + θ2 (t)x[2]

where the coeﬃcients θ(t) are given in Appendix A. This implies
                                                                             √
                                     φ(x, t) = [σ̄1 θ1 (t) + σ̄2 θ2 (t)]       x[2]

      The shock-price elasticities follow, and are displayed in Figure 6 for both the BL and EZ
models. The growth functional that we use is the martingale component of the multiplicative
factorization (2) of consumption.
   The calculation is parameterized such that the innovations to log C, X [1] , and X [2] are
mutually uncorrelated. We interpret these innovations as consumption, growth-rate, and
volatility shocks, although a structural model of the macro-economy would, among other
things, lead to more interesting labels assigned to shocks. We plot the shock-price elasticities
for the volatility shock with opposite sign because a surprise increase in volatility is bad for
agents.
    Since the consumption shock has only a permanent impact on consumption, the asso-
ciated risk price elasticities coincide for the two utility speciﬁcations. In contrast, local
elasticities for the growth-rate and volatility risk in the BL model are zero, while in the
forward-looking EZ model the elasticities for arbitrarily short investment horizons remain
bounded away from zero. The shock price elasticities for the BL model mirror closely the
shock exposure elasticities for aggregate consumption scaled by γ. The exposure elasticities
are reported in Figure 7. This close link reﬂects the underlying time separability in prefer-
ences. In the EZ model exposure of future consumption to growth-rate and volatility risk
induces ﬂuctuations in the continuation utility. As a consequence both the growth-rate state
and volatility state evolution directly inﬂuence the equilibrium stochastic discount factor
in the EZ model with recursive utility investors. The corresponding shock-price elasticity
function is close to ﬂat for this model with the limits being essentially the same as for the
BL model.12 This reﬂects the importance of the martingale component S̃ in the stochastic
discount factor process. Notice that overall the shock-exposure elasticities are larger for
exposure to growth rate risk than volatility risk.
 12
      They are identical in the limiting case in which the subjective rate of discount is zero.




                                                         27
                                   Consumption Price Elasticity
            0.2

           0.15

            0.1

           0.05

              0
                  0   20      40      60       80       100        120   140   160

                                   Growth−Rate Price Elasticity
            0.2

           0.15

            0.1

           0.05

              0
                  0   20      40      60       80       100        120   140   160

                                     Volatility Price Elasticity
            0.1

           0.08

           0.06

           0.04

           0.02

              0
                  0   20      40      60      80      100          120   140   160
                                             quarters

Figure 6: Shock-price elasticities under both the BL (dashed) and EZ (solid) preference
speciﬁcations. The parameterization is β̄c,0 = 0.0015, β̄c,1 = 1, β̄c,2 = 0, μ̄1 = −0.021,
μ̄2 = −0.013, ᾱc = [0.0078 0 0] , σ̄1 = [0 0.00034 0], σ̄2 = [0 0 0.038].



7    Incorporating jump risk
So far, we have analyzed models formulated under Brownian information structures. In this
section, we develop formulas that incorporate jumps in levels of the stochastic processes. We
focus on a discrete state space speciﬁcation with a ﬁnite number of states, where jumps are


                                              28
                                Consumption Exposure Elasticity
           0.02

          0.015

           0.01

          0.005

             0
                  0        20          40              60          80      100

                                Growth−Rate Exposure Elasticity
           0.02

          0.015

           0.01

          0.005

             0
                  0        20          40              60          80      100

                      −3          Volatility Exposure Elasticity
                  x 10
             2

            1.5

             1

            0.5

             0
                  0        20          40              60          80      100
                                            quarters

Figure 7: Shock-exposure elasticities for the aggregate consumption process parameterized
as in Figure 6.


modeled as Poisson arrivals.




                                             29
7.1       Basics
Consider a functional M of the form
                                                                 t                                  t
                                                                            
                    log Mt =          (Zu− ) κZu +                    (Zu− ) βdu +                        (Zu− ) αdWu .   (30)
                                0<u≤t                         0                                   0


Here Z evolves as an n-state Markov chain with intensity matrix A and the realizations of
Z are identiﬁed by a coordinate vector in Rn . We write Zt− for the pre-jump (left) limit at
date t. Abusing notation a bit, we now let β be an n-dimensional vector and α an n × k
matrix. The functional is now parameterized by the triplet (β, α, κ), representing the local
mean conditional on no jumps, the local diﬀusive volatility and the jumps in the functional.
In this speciﬁcation, the local trend and volatility depend (linearly) on the Markov state.
   In our calculations in this section we use the following notational conventions. dvec{·}
applied to a square matrix returns a column vector with the entries given by the diagonal
entries of the matrix, and diag{·} applied to a vector produces a diagonal matrix from a
vector by placing entries of the vector on the corresponding diagonal entries of the con-
structed matrix. The symbol × used in conjunction with two matrices forms a new matrix
by performing multiplication entry by entry. exp∗ (·) when applied to a vector or matrix
performs exponentiation entry by entry. Finally, a real-valued function on the state space of
coordinate vectors can be represented as a vector.

7.1.1      Multiplicative martingales

We construct a multiplicative martingale decomposition by computing an eigenfunction of
the form e · z where the vector e has all positive entries. The vector e must solve the
eigenvalue problem:13
                                                  Be = ηe                                                                  (31)

where
                                .         1
                              B = diag β + dvec {αα } + A × exp∗ (κ)
                                          2
Then                                                                                 
                                                                             e · Z0
                                        Mt = exp(ηt)M̂t                                                                    (32)
                                                                             e · Zt
and we can represent the martingale M̂ as
                                                         t                                  t
                                                                        
                  log M̂t =       (Zu− ) κ̂Zu +               (Zu− ) βdu +                        (Zu− ) αdWu − ηt        (33)
                              0<u≤t                   0                                   0

 13
      Details on the construction of the eigenvalue problems can be found in Appendix B.1.

                                                              30
where
                               κ̂ = κ + 1n (log e) − (log e) 1n  .                     (34)

   We use the multiplicative martingale M̂ to change the probability measure. This measure
change leads to a Brownian motion Ŵ under the new measure that satisﬁes

                                  dWt = (Zt− ) αdt + dŴt .

Under the new measure, the process Z has intensity matrix

                                Â = −ηI + diag (ê) Bdiag (e)

where e and η are given by the solution of the eigenvalue problem (31), and ê is the vector
of reciprocals of the entries in e.

7.1.2   Additive martingales

In order to construct perturbations corresponding to permanent shocks, we will extract the
martingale component of an additive functional. Consider the martingale decomposition of
the additive functional log M in (30)

                           log Mt = ρt + log M̄t − h · Zt + h · Z0 .                     (35)

   To ﬁnd the martingale component log M̄, let q denote a vector with positive entries that
sum to one and satisfy
                                       q  A = 0.                                      (36)

The long-run growth trend of the process is then given by

                                   ρ = q  dvec {κA } + q  β.                          (37)

The vector h determining the transient component can be found as the solution to

                               Ah = −dvec {κA } − β + 1n ρ.                             (38)

Notice that the vector on the right-hand side is orthogonal to q, which is consistent with the
fact that vectors in the image of A are orthogonal to q (see (36)). We solve equation (38)
for h restricting ourselves to the n − 1 dimensional subspace of vectors that are orthogonal




                                                31
to q. The martingale component is then given by
                                                             t                             t
                                                                              
                    log M̄t =           (Zu− ) κ̄Zu +             (Zu− ) β̄du +                  (Zu− ) αdWu   (39)
                                0<u≤t                     0                              0


where

                                           β̄ = β − 1n ρ
                                           κ̄ = κ + 1n h − h1n .

Observe that κ̄ has again zeros on the main diagonal. The permanent component of the
jump risk is thus given by
                                 (Zt− ) κ̄Zt + (Zt− ) β̄dt.

   We will also directly construct martingales. Consider an n × n matrix κ̃ with zeros on
the diagonal, and build the additive martingale
                                                                         t
                                                  
                       log M̃t =           (Zu− ) κ̃Zu −                      (Zu− ) dvec {κ̃A } du.
                                   0<u≤t                              0


For instance, we could specify all of the entries of κ̃ to be zero except for a single one.
   Additive martingales scaled by the √1t obey the Central Limit Theorem. To deduce the
variance ς 2 associated with the normal approximation, the conditional second moment of
the increment (per unit of time) is:14

                                                  z  (κ̃ × κ̃)A z.

Using the stationary distribution to average over alternative realizations of z,

                                          ς 2 = q · dvec {(κ̃ × κ̃)A } .                                       (40)

By scaling the matrix κ̃ by the scalar 1ς , we obtain an additive martingale with a unit variance
per unit of time.
 14
      Locally the second moment and variance coincide.




                                                         32
7.1.3   Jump-risk perturbations

Our jump-risk perturbations of a functional M are of the form MH (r) where
                                                                          t
                                                    
                       log Ht (r) =           (Zu− ) (rκd ) Zu +               (Zu− ) βh (r) du   (41)
                                      0<u≤t                            0


where the direction matrix, κd , is the appropriately scaled (say 1ς κ̃) jump risk component in
the direction of the desired perturbation, and βh (r) is a vector that induces H (r) or GH (r)
to be a martingale, depending on the application. For the former, βh (r) needs to satisfy

                                 0 = βh (r) + dvec {exp∗ (rκd ) A } .

Deﬁning βd analogously to the diﬀusion case, we have
                                               
                                      dβh (r) 
                                 βd =            = −dvec {κd A }
                                        dr r=0

   For the latter, recall that G is parameterized by (βg , αg , κg ). Since the coeﬃcients are
additive, the appropriate martingale restriction determining βh (r) is

                       1
                    0 = dvec {αα } + β + βh (r) + dvec {exp∗ (κg + rκd ) A } .
                       2

   Diﬀerentiating with respect to r and evaluating this derivative at zero, we have

                                 βd = −dvec {[exp∗ (κg ) × κd ] A } .

7.1.4   Constructing the nonlinear moving-average representation

We perform a direct calculation of the nonlinear moving-average coeﬃcients needed for
computing the elasticities that interest us. Recall that ê is the vector of reciprocals of the
entries of e. Then
                                                        t                        
        ê · Zt =                       
                          (Zu − Zu− ) exp Â(t − u) ê −     (Zu− ) Â exp Â(t − u) êdu         (42)
                     0<u≤t                                         0
                                 
                             
                     + (Z0 ) exp Ât ê

where Â is the intensity matrix under the change in measure. The new information at time
u is                                                                     
                    (Zu − Zu− ) exp Â(t − u) ê − (Zu− ) Â exp Â(t − u) êdu,


                                                        33
and the ﬁrst two terms in the decomposition (42) form a martingale.
   Next we scale by ζ(t − u) Zu− where
                                                            
                                     ζ(t − u) = exp Â(t − u) ê

and produce a new representation that will be useful in our elasticity calculations. We do
this in two steps:

  1. First construct the matrix Ξ(t − u) such that

                                                                  ζ(t − u) z ∗
                                     z  [Ξ (t − u)] z ∗ =                      −1
                                                                  ζ(t − u) z

  2. Second construct the vector ξ(t − u) by dividing each entry of Âζ(t − u) by the corre-
     sponding entry of ζ(t − u).

   Then write
                                                    
                ê · Zt =           [ζ(t − u) Zu− ] (Zu− ) Ξ(t − u)Zu −                            (43)
                            0<u≤t
                                            t
                                −                [ζ(t − u) Zu− ] [ξ(t − u) Zu− ] du + ζ(t) Z0 .   (44)
                                         0


7.1.5   Shock-price elasticities

The moving-average representation for ê · Zt derived in Section 7.1.4 allows us to state a
counterpart of Proposition 5.1 for the jump risk case.

Proposition 7.1. Let M be a multiplicative functional parameterized by (β, α, κ) with mar-
tingale decomposition outlined in Section 7.1.1, H(r) a jump perturbation of the form (41)
parameterized by (βh (r), 0, rκd ), and βd = dβh (r)/dr|r=0 . Then
                                   
     d                             
        log E [Mt Ht (r)|Z0 = z] =                                                    (45)
     dr
                                  r=0
                                                                                      
                          t                                               
           Ê (ê · Zt ) 0 (Zu− ) βd + dvec κd Â + dvec (Ξ(t − u) × κd ) Â     du|Z0 = z
        =
                                            Ê [ê · Zt |Z0 = z]

   The proof is deferred to Appendix B.2. Switching the order of integration in the nu-
merator of formula (45), the shock elasticity function for a direction κd is the time u = 0
contribution to the integral across the time dimension, viewed as a function of the maturity
date t. As in the Brownian case, we obtain the shock-price elasticity function in the special

                                                           34
case when M = SG and both G and GH(r) are martingales, attaching a minus sign by
signing convention. We write the shock-price elasticity function as a vector
                                                                    
                       π(t) = −βd − dvec κd Â − dvec [Ξ(t) × κd ] Â .                             (46)


7.2     Growth and discounting
Our construction of the multiplicative functional M in (30) that explicitly allows for jumps
in the levels of the functional is motivated by the implications of continuous-time Markov
switching models for the dynamics of equilibrium quantities that are of interest to us. For
the sake of illustration we introduce jumps directly in the growth or consumption processes,
but production economies are also of interest and can be, and in fact have been, investigated
using computational methods.
   There are also other potential sources of jumps. We have already shown that even if a
stochastic growth or discount functional contains no jumps in the sample paths (κ = 0),
its martingale component both in additive and multiplicative form will generically contain
a jump component provided there are jumps in either the conditional mean of the growth
or conditional volatility. As we will see, when consumers have EZ preferences the forward-
looking continuation values may exhibit jumps even if the consumption process has a con-
tinuous sample path.15 Jumps thus become relevant when pricing permanent components of
asset payoﬀs.
   In some models with production and capital accumulation, jumps in the equilibrium
consumption process may arise endogenously. In the Cagetti et al. (2002) model, the dis-
crete Markov state determines the mean growth rate of the technology process, but the
process itself has continuous trajectories. Since a regime shift discretely changes the instan-
taneous mean growth rate of the technology process and the conditional distribution of the
future technology, there is also a discrete adjustment in the consumption and investment
processes.16
   In the following subsections, we construct the stochastic discount factor functional for the
continuous-time version of the Epstein and Zin (1989) preferences when intertemporal elas-
ticity of substitution is equal to one. We will subsequently use the stochastic discount factor
to calculate the shock-price elasticities for consumption dynamics estimated by Bonomo and
  15
     Calvet and Fisher (2008), Chen (2008), and Bhamra et al. (2008) generate stochastic discount factors
with discontinuous trajectories using the continuous-time version of Epstein and Zin (1989) preferences.
  16
     David (1997) produces a model along similar lines with two diﬀerent linear technologies where jumps
in the mean growth rates of the two technologies exactly oﬀset each other, so that the distribution of
the aggregate production possibility set is independent of the current state. In this case, the equilibrium
consumption process remains continuous.



                                                    35
                     βc     αc                             A
                   0.0355 0.0330                -0.4627 0.4627        0
                   0.0127 0.0484                 0.1709 -0.1938 0.0229
                   0.0193 0.0163                 0.0554       0 -0.0554


Table 1: Parameterization of the jump risk example, annualized quantities. The intensity
matrix is calculated by taking the matrix logarithm of the transition probability matrix
from Bonomo and Garcia (1996), and setting all negative oﬀ-diagonal terms equal to zero.
This produces an intensity matrix with zeros in the same entries as in the original transition
probability matrix. Original parameters estimated using yearly data from 1889–1985 (for
details on the data sources, see Appendix A of the cited paper).

Garcia (1996).


7.3     Example economy with jumps
7.3.1   State dynamics

For illustrative purposes, we consider an example of consumption dynamics with three states,
estimated by Bonomo and Garcia (1996). We focus on the pricing of permanent jump shocks
to the equilibrium consumption stream in the Breeden-Lucas (BL) and Epstein-Zin (EZ)
speciﬁcation of preferences.
   Bonomo and Garcia (1996) specify the consumption dynamics as a conditionally Gaussian
discrete-time process with jumps in the conditional growth rate and volatility. This leads
us to parameterize consumption as a multiplicative functional given by (βc , αc , κc ) where
κc = 0 and scaled by the initial condition C0 . Table 1 provides the parameter values βc and
αc estimated by Bonomo and Garcia (1996), while Figure 8 gives the ﬁltered probabilities
of the three states. Before 1950, the economy was mostly switching between states 1 and 2,
with longer spells spent in state 2. These were the more volatile times in the ﬁrst half of
the 20th century. After 1950, the economy switches to the highly persistent, low-volatility,
average-mean growth rate state 3, where it resides for most of the remainder of the sample
(at least until recent events).

7.3.2   Investors’ preferences

As in Section 6.2 we consider two models of preferences. Recall that in model BL the
stochastic discount functional is:
                                                           −γ
                                                       Ct
                                  St = exp (−δt)                  .
                                                       C0

                                             36
Figure 8: This is Figure 3 from Bonomo and Garcia (1996). The curve with boxes depicts
the ﬁltered probabilities for state two and the solid curve without boxes depicts the ﬁltered
probabilities for state three.

   In model EZ we use the continuous-time speciﬁcation of recursive utility preferences given
in Section 6.2. As we saw, when preferences have a unitary elasticity the stochastic discount
functional has a particularly simple form:
                                                             
                                                         C0
                                  St = exp(−δt)                   S̃t                   (47)
                                                         Ct

where S̃t is the multiplicative martingale component of
                                                 1−γ
                                             Vt
                                                         .
                                             V0

   As in Hansen (2007), the continuation value is of the form

                                   log Vt = v · Zt + log Ct

where v solves the continuous-time discrete-state Bellman equation:

                             1                                1−γ
           0 = −δv + βc +       dvec {exp∗ [(1 − γ)κv ]A } +     dvec {αc αc  } .     (48)
                            1−γ                                2

                                              37
and17
                                               κv = (1n v  − v1n  ) + κc .

To construct this martingale component, write

       (1 − γ)(log Vt − log V0 ) = (1 − γ) [v · (Zt − Z0 ) + log Ct − log C0 ]
                                                                 t                t             
                                 = (1 − γ)         Zu−  κv Zu +     Zu−  βc du +     Zu−  αc dWu .
                                                         0<u≤t                          0                  0


Then
                                                                    t
                                                 
               log S̃t =(1 − γ)           Zu− κv Zu −                    dvec {exp∗ [(1 − γ)κv ]A } · Zu− du
                                  0<u≤t                          0



                                                                    
                                          t
                                                     
                                                                             t
                                                                                        (1 − γ)2
                        + (1 − γ)             Zu− αc dWu −                       dvec            αc αc    · Zu− du.
                                      0                                  0                 2

The coeﬃcients in the stochastic discount functional thus are

                                                                                                 (1 − γ)2
                βs = −δ1n − βc − dvec {exp∗ [(1 − γ)κv ]A } − dvec                                       αc αc 
                                                                                                    2
                   = −δ1n − (1 − γ)δv − γβc
                αs = −αc + (1 − γ)αc = −γαc
                κs = −κc + (1 − γ)κv = −γκc + (1 − γ) (1n v  − v1n  ) .

where we have used equation (48) for the vector δv.

7.3.3       Elasticities and risk-price increments

We specify the growth functional G as the multiplicative martingale component of the con-
sumption functional C, extracted using the procedure outlined in Section 7.1.1. The ﬁrst
perturbation we consider is the jump component of the permanent shock to log C. Let κ¯c
denote the corresponding jump matrix, dictating how the shock is constructed as function
of the jumps in Z. We parameterize the perturbation H(r) using (βh (r) , 0, rκ̄c ) where βh (r)
makes GH (r) a martingale, and then we scale the perturbation by the reciprocal of the long-
run volatility as in Section 7.1.2. This scaling normalizes the risk exposure of the shock.
  17
   This equation is more general than the corresponding equation in Hansen (2007) because it allows for
jumps in the consumption process and heteroskedasticity in the loading on the Brownian increment.




                                                                 38
                       Current state 1                                     Current state 2
       0.5                                                 0.5



     0.25                                                 0.25



        0                                                   0
             0   20       40     60      80    100               0   20       40     60      80    100

                       Current state 3                                        Long run
     0.01                                                  0.5



        0                                                 0.25



    −0.01                                                   0
             0   20      40       60      80   100               0   20      40       60      80   100
                      maturity (quarters)                                 maturity (quarters)



Figure 9: Shock-price elasticities for the Bonomo and Garcia (1996) consumption dynam-
ics under the Breeden-Lucas (dot-dashed lines) and Epstein-Zin (solid lines) utility speci-
ﬁcations. The priced growth functional is the martingale component in the multiplicative
decomposition of C, and the direction of the perturbation is given by the jump component
of the martingale in the additive decomposition of log C. Preference parameters are γ = 10
and δ = 0.01.

The resulting direction matrix is:
                                         ⎛                      ⎞
                                              0 -2.1804 -0.1139
                               1       ⎜                        ⎟
                                 κ̄c = ⎝ 2.1804       0 2.0664 ⎠                                         (49)
                               ς
                                         0.1139 -2.0664       0

As reﬂected by the ﬁrst row of this matrix, a movement from the ﬁrst state to either of
the other states had an adverse consequence on this permanent shock to consumption. In
contrast, movements from the second state to either of the ﬁrst two states has a positive
impact on the permanent shock. From the third state, a movement to the high growth ﬁrst
state has a positive impact and to the low growth second state a negative impact.
    The shock-price elasticities (46) for the two utility speciﬁcations are shown in Figure 9.
We plot the elasticities conditional on each of the three states, as well as the limiting con-
tribution (19).
    In the BL model the paths of the stochastic discount factor S are continuous. Since

                                                     39
                      Current state 1                                     Current state 2
      0.2                                                 0.2
       0                                                  0.1

                                                           0
    −0.4                                                                            jump to state 1
                                                         −0.1                       jump to state 2
                                                                                    jump to state 3
    −0.8                                                 −0.2
            0   20       40     60      80    100               0   20       40     60      80        100

                      Current state 3                                        Long run
      0.2                                                 0.2

      0.1                                                 0.1

       0                                                   0

    −0.1                                                 −0.1

    −0.2                                                 −0.2
            0   20      40       60      80   100               0   20      40       60      80       100
                     maturity (quarters)                                 maturity (quarters)



Figure 10: Shock-price elasticities for the Bonomo and Garcia (1996) consumption dynamics
for the BL speciﬁcation. The growth functional G is the martingale component in the
multiplicative decomposition of C. We set the direction matrices to feature each of the three
states, adjust the local mean to make GH(r) a martingale, and scale by the reciprocal of the
long-run volatility. The preference parameters are γ = 10 and δ = 0.01.

the diﬀusion and jump terms are constructed as having independent increments, the local
elasticity with respect to the jump component is zero. However, as we have already indicated,
our construction of the growth functional G as the martingale component of C includes a
nonzero jump part. The elasticity functions ﬂatten out for maturities over 5 years. In the
EZ speciﬁcation, the elasticity trajectories are almost ﬂat, reﬂecting the dominance in the
martingale component of the stochastic discount factor.
    From Figure 9, we see that the elasticity functions ﬂatten out for maturities over 5 years.
In the EZ speciﬁcation, the elasticity trajectories are almost ﬂat, reﬂecting the dominance in
the martingale component of the stochastic discount factor. Also the price of the immediate
exposure to permanent jump shock varies substantially depending upon the current state.
While the state one prices are sizeable, the state three prices are tiny. Recall that ﬁltered
state probabilities indicate that the economy was switching between states 1 and 2 until
about 1950, while in the post-1950 era the economy mostly resided in state 3. The limiting
shock-price trajectory, (19), is plotted in the bottom right panel of Figure 9. This curve
shows that a forward shift in the time of exposure in the case of state three will substantially

                                                    40
increase the risk prices while the same shift in case of state one leads to a drop by about
ﬁfty percent.
    We explore the pricing of exposure to each of the states for the BL speciﬁcation of
preferences. We construct direction matrices κd to feature jumps into the three states. For
each state we start with a direction matrix of zeros except in the column corresponding
to the state of interest say jump state j. Column j has ones in all entries except for the
diagonal entry. We again divide by the long-run volatility, and we make the appropriate
drift compensations so that GH(r) is a martingale. The resulting shock-price elasticities are
shown in Figure 10. Each of three panels corresponds to a diﬀerent current state. For each
current state we depict the shock-price elasticities for jumping into the other states. Some
of these curves are degenerate because it is not possible to jump immediately from state 3
to state 2 and from state 1 to state 3. (See Table 1.)
    The speed of convergence of the nondegenerate elasticity functions is dictated by the
implied jump intensities. Recall that state 2 is the low-growth, high volatility state. Exposure
to an upward jump from state 1 to state 2 is desirable and purchasing a claim on such
an outcome provides insurance. As a consequence the shock-price elasticity function is
negative. Exposure to transition from state 3 to 1 is also associated with a negative shock-
price elasticity for long-horizon cash ﬂows. This reﬂects in part the indirect eﬀect that if
state 1 is realized this increases the possibility that low growth-high volatility state 2 will be
reached prior to the date of the payoﬀ. We also include the limiting shock price trajectories
in the bottom-right panel. In the long-term the jump exposure to state 1 exceeds that of
state 3. The exposure to state 2 commands a negative shock price, again because of the
insurance motive.
   The constructed shock-price elasticities represent the sensitivity of values of cash ﬂows to
a shock over the next instant. We now consider the impact of shocks at intermediate dates
between now and the maturity of the cash ﬂow. Recall that we termed these intermediate
contributions risk-price increments because they eﬀectively integrate to risk price (elasticity)
over the payoﬀ horizon. (See Proposition 7.1.) As in the continuous-state case, we calculate
the risk-price increments by taking conditional expectations of the shock-price elasticities
at intermediate dates using distorted probability distributions. This calculation combines
the state dependence of the elasticity function with the impact of stochastic growth and
discounting in the conditional expectation. Formula (45) implies a time u, 0 ≤ u ≤ t,
contribution
                                      
               − (diag {ζ (t)})−1 exp Âu ζ (t − u) ×                                        (50)
                                                                         
                                                                          
                              × βd + dvec κd Â + dvec [Ξ (t − u) × κd ] Â


                                               41
               Maturity = 10 quarters                              Maturity = 10 quarters
    0.4                                                 0.4
                                    state 1
                                    state 2
    0.3                                                 0.3
                                    state 3

    0.2                                                 0.2


    0.1                                                 0.1


      0                                                  0
          0   2       4      6       8        10              0   2       4      6       8    10

               Maturity = 50 quarters                              Maturity = 50 quarters
    0.4                                                 0.4


    0.3                                                 0.3


    0.2                                                 0.2


    0.1                                                 0.1


      0                                                  0
          0   10      20      30     40       50              0   10      20      30     40   50
               time of shock (quarters)                            time of shock (quarters)



Figure 11: Risk-price increments for the Bonomo and Garcia (1996) consumption dynamics
for the BL (left column) and EZ (right column) preference speciﬁcations. Individual panels
depict the risk-price increments for payoﬀs of diﬀerent maturities. The solid black line
corresponds to the long-run elasticity curve from Figure 9, plotted backwards from the
maturity date. Risk prices are obtained by integrating under the individual curves and
scaling by 1/t. The preference parameters are γ = 10 and δ = 0.01.

   We depict these risk-price increments for the BL and EZ models in Figure 11 for exposure
to the jump component of the permanent shock to consumption constructed previously. Each
panel represents the decomposition of the risk price for the cash ﬂow of a given maturity
into the contributions of shocks at diﬀerent horizons.
   We ﬁrst focus on the risk-price increments for the BL model shown in the left column
of Figure 11. The plots capture substantial state dependence in risk-price increments for
proximate shocks, and their convergence as the time of the shocks moves further to the
future. Consistent with the plot for the shock-price elasticities, the risk-price increments in
model BL diminish to zero as the time of shock approaches the maturity date. Notice that in
state three, the state commonly visited during the post war, the risk-price increments remain

                                                   42
small for an investment horizon of ten quarters but the increments are more notable for the
ﬁfty-quarter horizon as the probability of transiting to a bad state becomes less negligible.
Thus in state three the risk prices are more substantial over the longer time horizons in the
BL model.
  Next we compare the risk-price increments in the BL model to those in the EZ model.
The EZ model risk-price increments are displayed in the right column of Figure 11. The
important diﬀerences are in the risk-price increments that are close to the maturity date.
In the EZ model there is no drop oﬀ in the price increments near the terminal date of
the payoﬀ. For the ten quarter maturity the overall diﬀerence between models remains
substantial. As the payoﬀ date is extended to ﬁfty quarters the risk-price increments behave
similarly across models for the ﬁrst forty quarters (ten years) and then the BL risk-price
increments diminish to zero over the remaining quarters of the investment horizon. Shock-
price elasticities and their counterparts for shocks at intermediate dates thus reveal pricing
subtleties across models that are disguised by the prices of risk exposures over the entire
investment horizon.


8    Conclusion
Stochastic dynamic model economies inform us how alternative shocks inﬂuence key eco-
nomic variables at alternative time horizons. Structural models of asset valuation tell us
even more. They inform us how the exposure to nondiversiﬁable macroeconomic shocks is
compensated over alternative investment horizons. To understand better such implications,
we proposed shock-price elasticities that measure this compensation and are valuation coun-
terparts to impulse response functions. These price elasticities are also the dynamic extension
of local risk prices familiar from ﬁnance. Similarly, we constructed shock-exposure elasticities
which capture the sensitivity of expected cash ﬂows. We produced tractable continuous-time
formulas for structural models that explicitly account for stochastic discounting and macroe-
conomic growth. Thus this paper provides an additional tool for analyzing structural models
that connect macroeconomics and asset pricing.
   In this paper we deduced price and exposure elasticities by deconstructing the risk premia
of conveniently chosen cash ﬂows. Risk premia on speciﬁc assets depend on the exposure
of an underlying cash ﬂow to risk along with the price of that exposure. By design our
elasticity calculations explore marginal changes in exposures in alternative directions, and
in models with nonlinearities these elasticities depend on what benchmark cash ﬂow is used
in their construction and on the evolution of the Markov state. Constructing risk premia
thus requires that we integrate the marginal contributions over the range of the relevant


                                              43
exposures. This integration is implicit when we confront empirical evidence using a limited
set of asset payoﬀs and prices. While we have not proposed a new set of statistical procedures
for testing, we believe the deconstruction of risk premia to be of interest in understanding
better the implications of alternative asset pricing models.
   In a series of examples, we showed how to construct the shock elasticities in models
where investors’ preferences include external habit or recursive utility, and where there is
consumption predictability and stochastic volatility, so called “long-run risks.” We also
explored models where the dynamics are driven, at least in part, by a ﬁnite-state Markov
chain. We showed examples in which models that have similar implications for local risk
prices have dramatically diﬀerent implications over long investment horizons, and examples
of models that have very similar long-term price implications but substantially diﬀerent
implications for shorter horizons.
   While our examples feature alternative speciﬁcations of investor preferences, the starting
point for the methods we develop is a benchmark macroeconomic growth process and a
corresponding stochastic discount factor process. It is well known that models with explicit
investor heterogeneity in opportunities and limitations to the nature of asset trading can
still be captured by appropriately speciﬁed stochastic discount factors. For instance, see
Hansen and Renault (2009). We anticipate that a more comprehensive study of the pricing
implications of these models will reveal interesting comparisons to some of the models that
we have explored in this paper.
   Finally, we have abstracted from econometric and empirical challenges. While we leave
this to future work, we do not wish to diminish the importance of these tasks. In regard
to empirical implications, Bansal and Lehmann (1997), Alvarez and Jermann (2005), and
Koijen et al. (2009) use the holding period return on long-term bonds and the maximal
growth portfolio to gain information about the one-period stochastic discount factor in a
discrete-time asset pricing model. The risk premium on the maximal growth portfolio re-
veals information on the volatility of the logarithm of the stochastic discount factor and
the limiting holding-period return on a discount bond reveals the one-period ratio of the
dominant eigenfunction (e(Xt+1 )/e(Xt ) in our notation) in a multiplicative factorization of
the stochastic discount factor. Taken together, they construct informative bounds on the
logarithm of the stochastic discount factor and its components. The speciﬁcation of stochas-
tic growth risk exposure plays no role in their analyses, and thus empirical extensions of this
literature that explicitly confront the valuation of stochastic growth is a potentially fruitful
direction for future research. The initial steps by Lettau and Wachter (2007) and Hansen
et al. (2008) are promising starts in this direction.




                                              44
A       Derivations for Section 6.2
Consider recursive preferences in the case of unitary elasticity of intertemporal substitution.
Hansen (2009) shows that when the subjective rate of time preference δ        0, the stochastic
discount factor is of the following form:

                                                          e(Xt )
                                     St∗ = exp(−ηt)St
                                                          e(X0 )

where S is the Breeden-Lucas stochastic discount factor speciﬁed in Section 6.2, and η and
e(x) = exp(λ x) are the eigenvalue and eigenfunction associated with the principal martingale
decomposition of C 1−γ .
   In order to ﬁnd the eigenvalue and eigenfunction for a general multiplicative functional
M of form (26), decompose λ into a vector λ1 and its ﬁnal entry, λ2 . Then λ solves the pair
of equations

                            0 =μ̄1 λ1 + β̄1
                                                 1                       2
                            0 =μ̄2 λ2 + β̄2 +      |λ1 σ̄1 + λ2 σ̄2 + ᾱ|                 (51)
                                                 2

Additionally, the associated eigenvalue is given by

                                      η = β̄0 − (μ̄2 λ2 + β̄2 )

Since equation (51) has in general multiple solutions, we follow Hansen and Scheinkman
(2009a) and choose the solution that is associated with the smallest eigenvalue. This solution
is the one that leads to stable dynamics of the Markov process X under the change of measure.
    It follows from the speciﬁcation of e(x) that the stochastic discount factor S ∗ is also of
form (26). The coeﬃcients are given by

                              ∗
                            β̄s,0 = − δ − β̄c,0 + (1 − γ)β̄c,2 + λ2 μ̄2
                              ∗
                            β̄s,1 = − γ β̄c,1 + λ1 μ̄1
                              ∗
                            β̄s,2 = − γ β̄c,2 + λ2 μ̄2
                             ᾱs∗ = − γ ᾱc + λ1 σ̄1 + λ2 σ̄2

    Finally, Hansen (2009) shows that for a multiplicative functional M parameterized by
(26),
                                                                             
                    E [Mt | X0 = x] = exp θ0 (t) + θ1 (t) · x[1] + θ2 (t)x[2]


                                                  45
where the θi (t) coeﬃcients satisfy the following set of ordinary diﬀerential equations, each
with initial condition θi (0) = 0.

                     d
                        θ1 (t) =β̄1 + μ̄1 θ1 (t)
                     dt
                     d                              1                              2
                        θ2 (t) =β̄2 + μ̄2 θ2 (t) + |ᾱ + θ1 (t) σ̄1 + θ2 (t)σ̄2 |
                     dt                             2
                     d
                        θ0 (t) =β̄0 − β̄2 − μ̄2 θ2 (t)
                     dt


B     Derivations and proofs for Section 7
B.1        Eigenvalue problems
For the multiplicative decomposition in Section 7.1.1, guess that the martingale component
takes the form (33). The martingale restriction for an increment in M̂ conditional on state
Zt− = zi is
                            1
                         0 = zi ααzi + βi − η +     Aij exp (κ̂ij )
                            2                       j

Plugging this restriction into decomposition (32) and comparing coeﬃcients, we obtain the
condition
                                    κ̂ij = log ej − log ei + κij

which yields equation (34) by stacking. Using this condition in the martingale restriction
leads to
                            1                                       ej
                         0 = zi αα zi + βi − η +            Aij      exp (κij )
                            2                             j
                                                                    ei

which, after multiplying by ei and stacking the equations, yields the eigenvalue equation
(31).
   The additive decomposition in Section 7.1.2 is obtained in a similar way. Guess the
form of the martingale component log M̄ given by equation (39). The additive martingale
restriction conditional on state Zt− = zi is

                                        0=         κ̄ij Aij + β̄i
                                               j


Using this restriction in (35), and comparing coeﬃcients, we have

                                        β̄i = βi − ρ
                                       κ̄ij = κij + hj − hi

                                                   46
Thus the martingale restriction implies

                                     ρ=               κij Aij +            Aij hj + βi               (52)
                                              j                       j


Stacking this set of equations and premultiplying by q yields equation (37). The vector
of transient components h can then be found (up to scale) as a solution to the system of
equations (52).


B.2     Proof of Proposition 7.1
Proof. Notice that
                                                 
                   d                                  Ê [(ê · Zt ) Dt | Z0 = z]
                      log E [Mt Ht (r) | Z0 = z] =
                   dr                              r=0    Ê [ê · Zt | Z0 = z]

where                                                                          t
                                                         
                              Dt =            (Zu− ) κd Zu +                        (Zu− ) βd du.
                                      0<u≤t                                 0

Notice that the additive functional
                                                                     t                     
                                                                                         
                      D̄t =           (Zu− ) κd Zu −                      (Zu− ) dvec κd Â du
                              0<u≤t                               0


is a martingale under the change of probability measure. In order to ﬁnd the expression for
   
Ê (ê · Zt ) D̄t | Z0 = z , we calculate the local covariance between corresponding increments
in D̄ and the moving-average decomposition of ê · Zt in formula (43). We have
           
         Ê (ê · Zt ) D̄t | Z0 = z =
                      t
                                                                                          
              = Ê                                 
                             ζ (t − u) Zu− (Zu− ) dvec (Ξ (t − u) × κd ) Â     
                                                                                    du  Z0 = z
                         0
                      t                                                        
              = Ê                           
                            (ê · Zt ) (Zu− ) dvec (Ξ (t − u) × κd ) Â      
                                                                           du  Z0 = z
                      0


where we used                                                                    
                          z  [(Ξ(t − u) × κd )Â ]z = z  dvec [Ξ(t) × κd ] Â

and
                                  
                                   ζ (t − u) Zu− = Ê [ê · Zt | Zu− ] .




                                                             47
                                                                  
Combining this result with the expression for Ê (ê · Zt ) Dt − D̄t | Z0 = z completes the
proof.


C     Stochastic discount factor
An alternative derivation of the continuous-time stochastic discount factor follows from the
approach in Duﬃe and Epstein (1992).

 i) Take a monotone transformation of the utility index:

                                              Wt = (Vt )1−γ

    For γ > 1, the case that interests us, this transformation is decreasing, so we will have
    to make an appropriate sign adjustment.

 ii) Notice that λt is the local mean for W . Solve (27) for λt :
                                                             
                                                     1
                           λt = δ(γ − 1) log Ct +         log Wt Wt
                                                    γ−1
                              = Φ(Ct , Wt )


iii) Following Duﬃe and Epstein (1992) (see their formula (35)),
                                t                    
             Φc (Ct , Wt )
        St =               exp −       Φw (Cu , Wu )du
             Φc (C0 , W0 )          0
                        1−γ                          t                        
               C0      Wt                                                  1
           =                    exp −δt − δ(γ − 1)            log Cu +          log Wu du
               Ct      W0                                 0               γ−1
                          1−γ                         t                    
                           C0    Vt
           = exp(−δt)                      exp δ(γ − 1) (log Vu − log Cu )du
                           Ct    V0                         0
                          1−γ                         t           
                           C0    Vt
           = exp(−δt)                      exp δ(γ − 1)       v · Zu du
                           Ct    V0                         0


    where we have placed a minus sign in front Φw to oﬀset the fact that we used a monotone
    decreasing transformation of the utility index. This formula is consistent with our
    conclusion in Section 6.2.




                                                 48
References
Alvarez, Fernando and Urban J. Jermann. 2005. Using Asset Prices to Measure the Persis-
  tence of the Marginal Utility of Wealth. Econometrica 73 (6):1977–2016.

Bansal, Ravi and Bruce N. Lehmann. 1997. Growth-Optimal Portfolio Restrictions on Asset
  Pricing Models. Macroeconomic Dynamics 1:333–354.

Bansal, Ravi and Amir Yaron. 2004. Risks for the Long Run: A Potential Resolution of
  Asset Pricing Puzzles. The Journal of Finance 59 (4):1481–1509.

Bhamra, Harjoat S., Lars-Alexander Kuehn, and Ilya A. Strebulaev. 2008. The Levered
  Equity Risk Premium and Credit Spreads: A Uniﬁed Framework.

Bonomo, Marco and René Garcia. 1996. Consumption and Equilibrium Asset Pricing: An
  Empirical Assessment. Journal of Empirical Finance 3 (3):239–265.

Breeden, Douglas T. 1979. An Intertemporal Asset Pricing Model with Stochastic Consump-
  tion and Investment Opportunities. Journal of Financial Economics 7 (3):265–296.

Cagetti, Marco, Lars Peter Hansen, Thomas J. Sargent, and Noah Williams. 2002. Robust-
  ness and Pricing with Uncertain Growth. The Review of Financial Studies 15 (2):363–404.

Calvet, Laurent E. and Adlai J. Fisher. 2008. Multifrequency Jump-Diﬀusions: An Equilib-
  rium Approach. Journal of Mathematical Economics 44 (2):207–226.

Campbell, John Y. and John Cochrane. 1999. By Force of Habit: A Consumption-Based Ex-
  planation of Aggregate Stock Market Behavior. Journal of Political Economy 107 (2):205–
  251.

Chen, Hui. 2008. Macroeconomic Conditions and the Puzzles of Credit Spreads and Capital
  Structure. Forthcoming in Journal of Finance.

David, Alexander. 1997. Fluctuating Conﬁdence in Stock Markets: Implications for Returns
  and Volatility. The Journal of Financial and Quantitatuve Analysis 32 (4):427–462.

Duﬃe, Darrell and Larry G. Epstein. 1992. Asset Pricing with Stochastic Diﬀerential Utility.
 The Review of Financial Studies 5 (3):411–436.

Epstein, Larry G. and Stanley E. Zin. 1989. Substitution, Risk Aversion, and the Temporal
  Behavior of Consumption and Asset Returns: A Theoretical Framework. Econometrica
  57 (4):937–969.


                                            49
Fournié, Eric, Jean-Michel Lasry, Jérôme Lebuchoux, and Pierre-Louis Lions. 1999. Applica-
  tions of Malliavin Calculus to Monte-Carlo Methods in Finance. Finance and Stochastics
  3 (4):391–412.

Gourieroux, C. and J. Jasiak. 2005. Nonlinear Innovations and Impulse Responses with
 Application to VaR Sensitivity. Annales d’Economie et de Statistique 78:1–33.

Hansen, Lars Peter. 2007. Beliefs, Doubts and Learning: Valuing Macroeconomic Risk.
  American Economic Review 97:1–30.

———. 2009. Modeling the Long Run: Valuation in Dynamic Stochastic Economies. Fisher-
  Schultz Lecture at the European Meetings of the Econometric Society.

Hansen, Lars Peter and Eric Renault. 2009. Pricing Kernels. Forthcoming in Encyclopedia
  of Quantitative Finance.

Hansen, Lars Peter and José A. Scheinkman. 2009a. Long-Term Risk: An Operator Ap-
  proach. Econometrica 77 (1):177–234.

———. 2009b. Pricing Growth-Rate Risk. Forthcoming in Finance and Stochastics.

Hansen, Lars Peter, John C. Heaton, Junghoon Lee, and Nikolai Roussanov. 2007. Intertem-
  poral Substitution and Risk Aversion. In Handbook of Econometrics: Volume 6A, chap. 61,
  3967–4056. Elsevier.

Hansen, Lars Peter, John C. Heaton, and Nan Li. 2008. Consumption Strikes Back?: Mea-
  suring Long-Run Risk. Journal of Political Economy 116:260–302.

Haussmann, Ulrich G. 1979. On the Integral Representation of Functionals of Ito Processes.
  Stochastics and Stochastics Reports 3 (1):17–27.

Ito, Kiyosi and Shin Chi Watanabe. 1965. Transformation of Markov Processes by Multi-
   plicative Functionals. Annals of Institute Fourier 15:13–30.

Koijen, Ralph S.J., Hanno Lustig, and Stijn van Nieuwerburgh. 2009. The Cross-Section
 and Time-Series of Stock and Bond Returns.

Koop, Gary, M. Hashem Pesaran, and Simon M. Potter. 1996. Impulse Response Analysis
 in Nonlinear Multivariate Models. Journal of Econometrics 74 (1):119–147.

Kreps, David M. and Evan L. Porteus. 1978. Temporal Resolution of Uncertainty and
  Dynamic Choice Theory. Econometrica 46 (1):185–200.


                                             50
Lettau, Martin and Jessica Wachter. 2007. Why is Long-Horizon Equity Less Risky? A
  Duration-Based Explanation of the Value Premium. Journal of Finance 62:55–92.

Lucas, Jr., Robert E. 1978. Asset Prices in an Exchange Economy. Econometrica 46 (6):1429–
  1445.

Potter, Simon M. 2000. Nonlinear Impulse Response Functions. Journal of Economic Dy-
  namics and Control 24 (10):1425–1446.

Santos, Tano and Pietro Veronesi. 2008. Habit Formation, the Cross Section of Stock Returns
  and the Cash-Flow Risk Puzzle. Working paper, University of Chicago.

Wachter, Jessica. 2005. Solving Models with External Habit. Finance Research Letters
 2:210–226.

Wong, Eugene. 1964. The Construction of a Class of Stationary Markoﬀ Processes. In
 Stochastic Processes in Mathematical Physics and Engineering, edited by Richard E. Bell-
 man, no. 17 in Proceedings of Symposia in Applied Mathematics, 264–276. American
  Mathematical Society.




                                            51
