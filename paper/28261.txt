                              NBER WORKING PAPER SERIES




              SELF-FULFILLING PROPHECIES, QUASI NON-ERGODICITY
                            & WEALTH INEQUALITY

                                         Roger Farmer
                                    Jean-Philippe Bouchaud

                                      Working Paper 28261
                              http://www.nber.org/papers/w28261


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                  December 2020




This paper was written after J. Doyne Farmer suggested that we collaborate as co-leaders of the
Instability Hub for the ESRC funded Network Plus, Rebuilding Macroeconomics. We thank
Angus Armstrong, Pablo Beker, Michael Benzaquen, Leland E. Farmer, Alan Kirman, Robert
McKay, Ian Melbourne, José Moran, Patrick Pintus and Ole Peters for many insightful
discussions on the topic of the paper. Thanks to C. Roxanne Farmer for helpful suggestions. We
reserve a special thanks to J. Doyne Farmer for his insight that two people with such disparate
backgrounds would have something to learn from each other. The views expressed herein are
those of the authors and do not necessarily reflect the views of the National Bureau of Economic
Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2020 by Roger Farmer and Jean-Philippe Bouchaud. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full
credit, including © notice, is given to the source.
Self-Fulfilling Prophecies, Quasi Non-Ergodicity & Wealth Inequality
Roger Farmer and Jean-Philippe Bouchaud
NBER Working Paper No. 28261
December 2020
JEL No. E0,G0,G12,G14

                                          ABSTRACT

We construct a model where people trade assets contingent on an observable signal that reflects
public opinion. The agents in our model are replaced occasionally and each person updates
beliefs in response to observed outcomes. We show that the distribution of the observed signal is
described by a quasi non-ergodic process and that people continue to disagree with each other
forever. Our model generates large wealth inequalities that arise from the multiplicative nature of
wealth dynamics which makes successful bold bets highly profitable. The flip side of this
statement is that unsuccessful bold bets are ruinous and lead the person who makes such bets into
poverty. People who agree with the market belief have a low expected subjective gain from
trading. People who disagree may either become spectacularly rich, or spectacularly poor.


Roger Farmer
University of California, Los Angeles
Department of Economics
Box 951477
Los Angeles, CA 90095-1477
and CEPR
and also NBER
rfarmer@econ.ucla.edu

Jean-Philippe Bouchaud
23 Rue de L'Université
75007 Paris
Jean-Philippe.BOUCHAUD@cfm.fr
Self-Fulfilling Prophecies, Quasi Non-Ergodicity & Wealth
                          Inequality

                 By Jean-Philippe Bouchaud and Roger E.A. Farmer


           We construct a model where people trade assets contingent on an
          observable signal that reflects public opinion. The agents in our
          model are replaced occasionally and each person updates beliefs in
          response to observed outcomes. We show that the distribution of
          the observed signal is described by a quasi non-ergodic process and
          that people continue to disagree with each other forever. Our model
          generates large wealth inequalities that arise from the multiplica-
          tive nature of wealth dynamics which makes successful bold bets
          highly profitable. The flip side of this statement is that unsuccess-
          ful bold bets are ruinous and lead the person who makes such bets
          into poverty. People who agree with the market belief have a low
          expected subjective gain from trading. People who disagree may
          either become spectacularly rich, or spectacularly poor.



                                         I.   Introduction

                               A.    Quasi Non-Ergodic Economies

   Almost all quantitative work in macroeconomics and finance assumes that eco-
nomic and financial time series can be represented by an ergodic stochastic pro-
cess. Ergodicity means that the average over a single long trajectory is equal to
the average over multiple realisations of trajectories drawn from the same process.
In this paper we construct a model of asset prices where this assumption holds
over very long time periods, but breaks down for time periods that might realis-
tically characterize the decision window of any living human being. Processes of
this kind are referred to in the natural sciences as quasi-non-ergodic.1
   Our work is closely related to the P´
                                       olya urn model reviewed in Pemantle (2007).
In this model, an urn contains M red balls and (N - M ) black balls. A ball is
    Bouchaud: Capital Fund Management and Institut de France Jean-Philippe.Bouchaud@academie-
sciences.fr. Farmer: Department of Economics, University of Warwick and Department of Economics,
UCLA, r.farmer.1@warwick.ac.uk. This paper was written after J. Doyne Farmer suggested that we
collaborate as co-leaders of the Instability Hub for the ESRC funded Network Plus, Rebuilding Macroe-
conomics. We thank Angus Armstrong, Pablo Beker, Michael Benzaquen, Leland E. Farmer, Alan
Kirman, Robert McKay, Ian Melbourne, Jos´     e Moran, Patrick Pintus and Ole Peters for many insightful
discussions on the topic of the paper. Thanks to C. Roxanne Farmer for helpful suggestions. We reserve
a special thanks to J. Doyne Farmer for his insight that two people with such disparate backgrounds
would have something to learn from each other.
    1 Quasi-non-ergodicity is common to many physical systems where ergodicity appears to be broken at
intermediate times but is restored at very long (sometimes astronomical) times, as in the case of glasses
and "spin-glasses" (Debenedetti and Stillinger, 2001; Anderson, 1989).
                                                   1
2                           A BOUCHAUD-FARMER WORKING PAPER


chosen at random. If it is red (respectively black) then 2 red balls (respectively
black balls) are re-introduced in the urn, which now contains N + 1 balls. The
probability of drawing a ball with a specific colour therefore increases with the
number of times this colour was selected in the past. The long term fate of
this simple dynamic is surprising. As t  , the probability Pt to draw a
red ball converges to some limiting value P , but the value of this asymptotic
probability is itself random. Starting from the very same urn with N0 /2 red balls
and N0 /2 black balls, two different runs of the dynamics will lead to two different
values of P , although each of them becomes stable over time, corresponding to
a stationary process. To completely characterize the behaviour of this process
one must introduce probabilities over probabilities.2 The P´  olya urn model is an
example of a non-ergodic stochastic process.
  We construct an economic model where a mechanism similar to the one at play
in P´ olya urns is present. In our model, economic agents attempt to predict a
binary outcome s  S  {0, 1} which might represent, for example, high or low
output in the next month. Each agent has a time dependent belief of the proba-
bility of the good outcome which she updates from observation. Importantly, we
assume that the true probability of the realized outcome is equal to the average
of the subjective probabilities of the agents.
  We show that the coupling of individual and aggregate beliefs leads to a process
in which the true probability of a high outcome wanders randomly in the unit
interval. The conditional distribution of this random variable converges, in the
limit, to an invariant unconditional probability distribution which is uniform on
[0, 1]. Although the unconditional probability of a good outcome is always one
half, it is always better to use recent information to predict the next draw than
to use very long time-series averages. Our self-referential learning model is an
example of a quasi-non-ergodic stochastic process.

                                B.    Beliefs and Wealth Inequality

  In many economic models where people begin with different prior beliefs, their
belief differences do not survive repeated interactions in markets. That turns
out, in our model, not to be true. We endow our probabilistic world with a
market that allows agents to trade two securities. One security pays one unit
of consumption if and only if s = {1} and a second security pay one unit if
and only is s = {0}. Securities with these characteristics are referred to as Arrow
securities (Arrow, 1964). Agents solve an inter-temporal optimisation programme
to determine how much of each security they wish to hold at time t and, because
agents have different beliefs, they are willing to trade.
  Naively, one would expect the market clearing price should reveal the average
     2 Whereas the precise value of P
                                      is unpredictable, the probability P of the probability P is a  (a, b)
distribution over [0, 1] where the parameters a and b depend on the initial distribution of balls. Starting
from an urn with two balls, one red and one black, P has a  (1, 1) distribution which is uniform on
[0, 1] implying that the limiting probability, P , can be anywhere in [0, 1] with equal probability.
VOL.    NO.                             SELF-FULFILLING PROPHECIES                                      3


belief and cause traders to coordinate on the true probability. But in our model
this is not the case. We show that the probability implied by market prices is a
wealth-weighted average of individual subjective beliefs. The wealth of each agent
fluctuates with time and some people accidentally, and temporarily, predict the
true probability better than others. Interestingly, the distribution of wealth is
so unequal that the probability implied by market prices is dominated by the
wealthiest agents and fails to reveal the true probability of the good outcome.
Because markets fail to aggregate private information correctly, they cannot be
used by individuals to reveal the truth.

                                       C.    Literature Review

   There is an extensive literature on self-fulfilling prophecies in rational expecta-
tions models. Early versions of this literature that rely on dynamic indeterminacy
are discussed in Farmer's (1999) textbook and more recent models that display
hysteresis and steady-state indeterminacy are reviewed in Farmer (2020).3 The
literature on self-fulfilling prophecies explains how beliefs drive economic fluctu-
ations, but as with all rational expectations models, eventually everybody agrees
with everybody else. Our current paper, in contrast, explains how a large num-
ber of agents interacting in a complete set of financial markets can continue to
disagree forever.
   The title of our paper, which features the concept of quasi non-ergodicity, is
inspired by the observation that although ergodicity may be a feature of very
long sequences of random variables, it may not hold on time scales relevant to the
lifetimes of economic decision makers. Our model is a close cousin of Kirman's
ant model (Kirman, 1993), also known as the Moran model in the theory of
population dynamics (Moran, 1958).
   We are not the first to explore the topic of non-ergodicity for economics. Brock
and Durlauf (2001) have shown that interaction effects can trap the economy in
a path-dependent state. Horst (2017) reviews the literature on path dependence
and, more recently, Moran et al. (2020b) show that ergodicity breaking occurs in
models of habit formation. In contrast to these papers, we focus on a case where
ergodicity is not strictly broken but where the time scale over which it applies
may be astronomically long.
   Peters (2019) has pointed out that identifying time averages over a single trajec-
tory with ensemble averages can lead to misleading conclusions, and that special
care should be devoted to the choice of an appropriate, process dependent, utility
function. Our model, on the other hand, illustrates a rather different facet of
non-ergodicity, where agents adapt their beliefs based on a observation window
much shorter than the time needed to reach ergodicity.
   Our paper deals with the asymptotic properties of a multi-agent complete-
market economy where agents have heterogeneous priors. Previous related work
   3 The importance of correctly modelling beliefs in models of self-fulfilling prophecies is further dis-
cussed in Farmer (2021).
4                            A BOUCHAUD-FARMER WORKING PAPER


includes Blume and Easley (2006) who study the asymptotic properties of con-
sumption and Cogley and Sargent (2008, 2009) who study asset prices in an
economy with informed and uninformed agents. The closest previous paper to
ours is by Beker and Espino (2011) who study a stochastic endowment economy
populated by infinitely-lived Bayesian updaters.
   In Beker and Espino (2011), agents have different priors but, in their central case
everyone eventually learns the truth. We modify the Beker-Espino environment
in two ways. First, the process that generates the states is self-referential and
leads to a quasi non-ergodic process. Second, we modify the environment to allow
replacement of agents and we endow new agents with a random prior. Our work
is similar to the stochastic extensions by Farmer et al. (2011) and Farmer (2018)
of Blanchard's (1985) perpetual youth model. The replacement of agents with
new people with random priors is central to our demonstration that beliefs never
converge.
   A second important assumption that drives our results is the assumption that
agents use constant gain learning to update their beliefs. Adam et al. (2016)
and Adam et al. (2017) also drop Bayesian updating and use constant gain learn-
ing. Unlike those papers, we study a multi-agent economy and we link the true
stochastic process to subjective beliefs through a beauty contest game. As a con-
sequence, the event probability itself is time dependent in our model, and the
wealth distribution is non-trivial, even in the limit.

                   D.    Fat-tailed Wealth Distributions and Wealth Inequality

  In most countries, the wealth distribution has fat tails, a.k.a. Pareto tails
Gabaix (2009); Piketty and Zucman (2014). One measure of this property is
described by a log-log plot of the complementary cdf of wealth on the y-axis
against wealth on the x-axis, for all values of wealth greater than the mode. The
slope of this plot provides an estimate of the rate at which the right tail of the
wealth distribution decays with wealth. If the absolute value of this slope is
between 0 and 1, there is a well defined invariant wealth distribution, but the
mean of this distribution does not exist. If the absolute value of this slope is
between 1 and 2, the mean of the wealth distribution is finite, but the second
and all higher moments do not exist. Empirical estimates of the tail parameter of
the U.S. wealth distribution are centered around 1.5. This fact implies that there
exists a well defined wealth distribution with a finite mean, but the variance and
higher moments do not exist.
  One might think that the wealth distribution is unequal because people are
endowed with different abilities and some individuals are able to exploit these
abilities to earn more than others. Although the income distribution, like the
wealth distribution, has a fat right tail, the magnitude of the tail parameter is
too large to explain wealth inequality.4 This fact suggests that we should look
    4 Benhabib   and Bisin (2011) show that some simple economic theories constrain the tail parameter on
VOL.    NO.                            SELF-FULFILLING PROPHECIES                                     5


elsewhere for an explanation of wealth inequality.
  In their survey of this topic, Benhabib and Bisin (2011) point out that models
where people earn different rates of return on the same asset can explain a fat
tailed wealth distribution (see also Bouchaud and M´  ezard (2000); Gabaix et al.
(2016)). Our model provide a mechanism where this happens in equilibrium as
a consequence of persistent differences in individual assessments of risk. In our
model, everyone has the same income but the wealth distribution is highly unequal
as a consequence of the multiplicative nature of wealth accumulation.

                     II.   A Two-Outcome, Self-Referential Model

  We will build up our argument in three stages. In stage one, we describe a
game in which agents form beliefs about a binary outcome and we show that our
game leads to a quasi-non-ergodic process for the true belief. In stage two, we
embed our agents in an endowment economy and we allow them to trade Arrow
securities contingent on the realization of the binary random variable. In stage
three, we show that the contingent securities market can be replaced by debt and
equity and that the equilibria of this more realistic version of our model is the
same as the model in which agents trade Arrow securities.

                                 A.    The Beauty Contest Game

  We assume that N agents play a game in which each person must forecast
the average belief of the other agents about the outcome of a sequence of binary
random events {st  S}     t=1 . This is a simple version of a game that Keynes
famously used in The General Theory (Keynes, 1936) to motivate his view that
the stock market is driven by what he called `animal spirits'.
  We represent the belief held at date t - 1 of agent i of the probability that
st = {1} as Pi,t (s = {1}) and we model the self-referential nature of beliefs by
assuming that the true probability of the event, Pt (s = {1}), is equal to the average
belief,5
                                                   N
                                                        Pi,t
(1)                                        Pt                .
                                                        N
                                                  i=1

where throughout the paper, we will drop the argument s = {1} after P, unless
we explicitly need to distinguish the two outcomes.
  People communicate with each other on social networks and a central player
generates the random variable st which takes the value {1} with probability Pt

the wealth distribution to be greater than the tail parameter on the income distribution, implying that
wealth should be less unequally distributed than income. But estimates by e.g. Badel et. al. (2017) of
the tail parameter for the U.S. income distribution are close to 2; a number greater than 1.5. Similarly
the Gini coefficient for income is always found to be smaller than the one for wealth.
   5 More generally, one can consider a model where the true probability is a non linear, sigmoidal
function F of the average belief: see Appendix A.A2.
6                           A BOUCHAUD-FARMER WORKING PAPER


and {0} with probability 1 - Pt . At this point this is an abstract game with no
economic consequences.
  One interpretation of our model is that Pi,t is the degree of confidence that
people have in the future. A mechanism by which this confidence impacts real
outcomes may be the following. People communicate their beliefs through social
interaction and the central player in our game represents an influential financial
journalist. The journalist aggregates information and, with probability Pt he
writes an article with a positive outcome and, with probability 1 - Pt he writes
an article with a negative outcome.

                                  B.   How People Update Beliefs

  The properties of an economic model will depend heavily on the assumptions
we make about how the players change over time. One can show that, if agents
are infinitely lived Bayesian updaters with different priors, that P converges to a
number in [0, 1], but that number is different for every realization of {Pt }t=1 . This
setup is an economic analog of the P´   olya urn model and although the example is
instructive, it is not very interesting as a theory of asset market trade. Everyone
eventually converges on the truth and although the truth is itself a function of
history, eventually people all agree with one another.
  To generate a theory of permanent disagreement we modify the model in two
ways. First, we replace the assumption of Bayesian updating with an alternative
constant gain learning algorithm in which people discount the past at rate .
Second, we allow the set of decision makers to change over time by recognizing
that people have finite lives. We assume that people die with probability  but
the death probability is independent of age. When a person dies, she is replaced
by a new person with belief Pi = zi where zi is a random variable drawn from a
uniform measure on [0, 1]. In Section III we will use these assumptions to generate
simple expressions for aggregate asset prices in a market economy.6
  We keep track of who lives and who dies by introducing a random vector xt 
X  {0, 1}N , where xi,t = 1 with probability 1 -  and 0 with probability  . If a
person who was alive in period t - 1 survives into period t then xi,t = 1. If she
dies then xi,t = 0. We assume that the evolution of the beliefs of the person with
index i is given by the expression

(2)                    Pi,t+1 = xi,t [(1 - )Pi,t + st ] + (1 - xi,t )zi,t ,

where z t  Z  [0, 1]N and each of element of z t is an independent draw from a
uniform distribution.7
   6 Our model is a version of the perpetual youth model of Blanchard (1985) as extended to the stochastic
case by Farmer et al. (2011) and Farmer (2018).
   7 The exact form of the distribution of z is not important for any of our results. One could also
                                               t
assume that zi,t is a weighted sum of the average belief Pt and a uniform random variable. This would
not change the structure of the model at all, only the meaning of the parameters.
VOL.   NO.                           SELF-FULFILLING PROPHECIES                         7


  The term in square brackets on the right side of Eq. (2) represents the way
that a person who is alive in two consecutive periods updates her belief. She uses
constant gain learning with gain parameter  where a value of  closer to 1 means
that the person puts more weight on recent outcomes. This term is multiplied by
xi,t to reflect the fact that it applies only if person i survives into the period. The
second term on the right side of Eq. (2) is multiplied by 1 - xi,t . This reflects the
assumption that if agent i dies, her position is filled by a new-born person who
starts life with a random subjective belief, zi,t . We assume that zi,t is distributed
uniformly on [0, 1].

                      C.   The Behaviour of Beliefs in the Large N Limit

  In Section V we will use Eq. (2) to simulate data from an economy with a
large but finite number of agents. To better understand the properties of those
simulations, in this subsection we study the properties of Eq. (2) as N   and
as the length of a period converges to zero. We refer to this case as the continuous-
time, large N limit. First, we retain the discrete time assumption, and study the
behaviour of Eq. (2) for large N . We refer to this as the discrete-time, large N
limit.
  To arrive at expressions for the discrete-time large N limit we combine equations
(1) and (2) and we take N  . This leads to the expression,

(3)                        Pt+1 = (1 -  ) [(1 - )Pt + st ] +  E[z ],

where E[z ] = 1
              2 . Eq. (3) defines a Markov process for the random variable P with
a transition operator T [P ] for its probability P that is defined by the integral
equation,

                  1
                                                                   
(4) T [P]             dP P (P) P d P - (1 -  )[(1 - )P + ] -
              0                                                    2
                                                                               
                                           + (1 - P) d P - (1 -  )(1 - )P -         ,
                                                                               2

where d(·) is Dirac's delta function.
  Let Pt (P) be the probability density at date t that Pt+1 takes any given value
in [0, 1]. Then
                                Pt+1 (P) = TPt (P),
is the probability density at date t + 1 and

                                     PT (P) = T T P0 (P ),

is the probability density at date T where T T is the T 'th iterate of the operator
T . Notice that P defines a probability density over probabilities.
   Introducing the change of variable u such that u = P - 1     2 , we show in Ap-
8                          A BOUCHAUD-FARMER WORKING PAPER


pendix A that in the continuous time limit, Pt (u) converges to a symmetric beta-
distribution with parameter  = /2 ,
                                                                 -1
                                            (2)        1
(5)                            P (u) =                   - u2         .
                                            2 ()       4

This distribution is U-shaped when  < 2 and hump-shaped for  > 2 . In
our simulations we calibrate the model by choosing  = 2 , a case for which the
invariant measure is uniform on [0, 1].8
  In the continuous time limit (,   0), we are able to derive an exact expression
for the degree of disagreement which we define as the difference between the belief
of agent i and the average belief. In symbols,

                                          Dt  Pi,t - Pt .

Combining this definition with equations (2) and (3) and rearranging terms leads
to the following equation which determines the stochastic evolution of Di,t+1 ,


                                                                1
(6)            Di,t+1 = xi,t (1 - )Di,t +  (1 - )Pt + (st - )
                                                                2
                                                                  
                      + (1 - xi,t ) zi - (1 -  ) (1 - )Pt + st +                      .
                                                                  2

  We show in Appendix B, that the unconditional expectation of Di , converges
to zero almost surely and that, in the large N , small  limit its variance is given
by the expression,

                                              ( + 2)                               
(7)           V[Di ] =                                 + O(3 ),              =       .
                           2 + (1 - )         6(2 + 1)                             2

The standard deviation of Di is a measure of disagreement between agents in
the unconditional limiting distribution. For our calibration,  = 1 and for this
parameterisation
                                    
                                      
(8)                        V[Di ]       ,    (    1).
                                     12
This expression implies that the typical disagreement between agents, as measured
by the standard deviation of Di , only vanishes at rate  1/4 , as   0, i.e. very
slowly. Even for long lifetimes, people still disagree significantly.

    8 When   0, the distribution of P becomes highly peaked around 0 and 1. This model is studied
in detail in Moran et al. (2020a) who show that the time spent by Pt in the vicinity of 0 or 1 is equal
to  -1 and is independent of . This switching time also corresponds to the ergodic time defined as the
time required for P to approach the stationary distribution P0 .
VOL.    NO.                             SELF-FULFILLING PROPHECIES                                        9


  In our simulations we chose a time interval of one week and we set  = 3.9×10-4 .
These choices imply that life expectancy, averaged over people of all ages, is
approximately 50 years which accords well with crude estimates from US actuarial
tables. For this calibration, the standard deviation of Di is approximately 4% for
 = 1. This level of disagreement between agents is quite reasonable and, as we
will show in our simulations, large enough to generate substantial discrepancies
between the market price and the true price, and a "fat" power-law right tail of
the wealth distribution when people make bets based on their subjective beliefs.

                  III.    Heterogeneous Beliefs in a Market Economy

  We have built a model to describe the evolution of aggregate opinions. But
what happens if people trade with other people with different beliefs? To answer
that question we construct an endowment economy where each person is endowed
with  units of a non-storable commodity in every period in which she is alive.
We further assume that people trade a complete set of Arrow securities, indexed
to the exogenous state, which we represent by  . We use the adjective exogenous,
to distinguish the vector  from a vector of endogenous states that we introduce
in Section III.C.

                           A.    The Definition of the Exogenous State

   The exogenous state has three elements. The first element, s  S  {0, 1},
is the realization of a public signal. The second element, x  X  {0, 1}N ,
is a vector that differentiates newborns from survivors and the third element,
z  Z  [0, 1]N , encodes the conditional probabilities of newborns.9 Putting
these pieces together we have that   {s, x, z }    S × X × Z. We use a
prime to denote the state in period t + 1.
   At each date, people trade a complete set of Arrow securities which depend not
just on s , but also on the realizations of x which encodes who lives and who dies.
There are 2N possible realizations of x where the i'th element of x equals {1}
if person i survives and {0} if she dies. The  = (s , x ) security costs Q( | )
commodities at date t and pays 1 commodity at date t + 1 if and only if state
 occurs. We assume that everybody knows the probability of birth and death
of everyone alive today but they have different beliefs, represented by Pi , of the
probability that s = {1}.
   We refer to a realization x as a mortality state and we denote the probability
of a realization of x by p(x ). We assume that p(x ) is common knowledge and
that x is independent of s . These assumptions allow us to factor Pi ( ) into two
components, Pi (s ), which is person i's subjective conditional probability that

    9 We generate this vector for all i, including survivors from the previous period. Notice, however, that
zi only enters the model when multiplied by 1 - xi which is zero for survivors.
10                       A BOUCHAUD-FARMER WORKING PAPER


s = {1} and p(x ), which is the objective probability of the mortality state.

(9)                               Pi ( ) = Pi (s )p(x ).

This completes our definition of the exogenous state. In the subsequent subsection
we define the objectives and constraints of individual agents and we derive a set
of rules that represents their behaviour in an exchange economy.

                            B.    A Model of Rational Choice

   We assume that agents maximize the discounted expected utility of the loga-
rithm of consumption. This assumption implies that our agents choose to spend
a fixed fraction of wealth in each period on the consumption good. The novel
aspect of our approach is the decision rule we derive which shows how agents
allocate their wealth to the two Arrow securities. This decision rule depends on
their subjective beliefs, which evolve in the manner described in Section II.B.
   First, we break wealth into two components; human wealth and financial wealth.
The human wealth of person i is defined by the recursion,

(10)                      Hi ( ) =  +       Q( | ) xi Hi ( ),
                                         

and aggregate human wealth H ( ) is the sum of individual human wealth over all
living persons,

(11)                              H ( ) = N ( )Hi ( ).

  Next, we define financial wealth of person i, ai ( ), to be the value of Arrow
securities brought into period t. The total wealth of person i is the sum of human
wealth and financial wealth

(12)                             Wi ( ) = Hi ( ) + ai ( ).

     Each period, the agent faces the following budget equation,

(13)                     xi ( )Q( | )ai ( ) + ci ( ) = ai ( ) + .
                      

The right side of Eq. (13) represents a person's available resources at date t. The
left side represents the ways those resource can be allocated; to consumption or
to the accumulation of a bundle of Arrow securities that will be available for
consumption or saving in the subsequent period.
   We model the consumption and asset allocations of each person as the unique
solution to the following maximization problem:
VOL.   NO.                        SELF-FULFILLING PROPHECIES                     11


PROBLEM 1:

(14)         Vi [Wi ( )] = max    log ci ( ) +       Pi ( )xi ( )Vi [Wi ( )]
                         Wi ( )
                                                  

such that

(15)                 Pi ( ) = xi [(1 - )Pi ( ) + s] + (1 - xi )zi ,

and

(16)                      xi ( )Q( | )Wi ( ) + ci ( )  Wi ( ).
                      

In Section II.B we derived an expression for the evolution of person i's beliefs.
Eq. (15) reproduces that equation using the definition of  and replacing time
subscripts with prime notation.
   Eq. (16) is derived by combining equations (10) and (13). Vi [Wi ( )] is the max-
imum attainable utility given wealth Wi ( ), ci ( ) is date t consumption and 
is the common discount rate. Following common usage we refer to the consump-
tion decision that solves Problem 1 as the policy function and to the maximum
attainable utility as a function of wealth as the value function.

PROPOSITION 1: The policy function and the value function for Problem 1 are
given by Equations (17) and (18),

(17)                      ci ( ) = [1 -  (1 -  )]Wi ( ),

                                           1
(18)                  Vi [Wi ( )] =                log[Wi ( )] + B,
                                      1 -  (1 -  )

where B is a constant that can be computed but its value is irrelevant for our
purpose.
  The wealth of the person with label i evolves according to Eq. (19)

                                   Pi ( )
(19)               Wi ( ) = xi            Wi ( ) + (1 - xi )Hi ( ),
                                  Q( | )

where H ( ) is defined by the recursion Eq. (10).

  The first term on the right side of Eq. (19) is the wealth evolution equation
for person i if she survives into period t + 1. The second term on the right side
of the equation resets person i's wealth to H ( ) if she dies and is replaced by a
newborn. For a proof of Proposition 1, see Appendix C.
12                       A BOUCHAUD-FARMER WORKING PAPER


                              C.   Definition of Equilibrium

   We have constructed a theory of individual choice. According to this theory,
peoples' decisions are a function of the exogenous state and of the stochastic
process for prices. In this section we construct an equilibrium theory where prices
are determined to set the excess demands for goods and the excess demands for
Arrow securities, in every period, to zero. First, we define a new object; the
endogenous state.
   The endogenous state has two elements. The first element, P  P  [0, 1]N
is a vector of subjective conditional probabilities with generic element Pi . The
second element, W  W  RN           + is a vector of wealth positions with generic
element Wi . Putting these pieces together, the endogenous state is represented
by y  {P, W }  Y  P × W.
   Next, we derive a function G (·) to explain how the endogenous state evolves
through time. Our approach is a relatively standard application of recursive equi-
librium theory (Stokey et al., 1989). Our innovation, over conventional dynamic
stochastic general equilibrium models, is to provide a self-referential theory of
learning in which the economy does not converge to a rational expectations equi-
librium.
   We begin with a definition of recursive equilibrium:
DEFINITION 1 (Recursive Equilibrium): A recursive equilibrium is a price func-
tion Q : 2  Q  [0, 1]2N and a state evolution function G : Y ×  × Q  Y
with the following properties:
     1) The state evolution function, G , is given by equations (15) and (19). This
        function determines the evolution of the vector of beliefs, P , and the vector
        of wealth positions, W .
     2) When the Arrow security prices are given by Q( | ) and when y = G (y )
        the implied consumption plan solves Problem 1.
     3) The goods market clears for all  where ci ( ) solves Problem 1:
                                        N
        (20)                                 ci ( ) = N .
                                       i=1


     4) The Arrow securities markets clear for all  where ai ( ) = Wi ( ) - H ( ):
                                         N
        (21)                                  ai ( ) = 0.
                                        i=1


  In Proposition 2, we show that, in equilibrium, human wealth is a number that
does not depend on the state and we derive an expression for the equilibrium
price function Q( | ).
VOL.   NO.                         SELF-FULFILLING PROPHECIES                   13


PROPOSITION 2: In a recursive equilibrium:

  1) Individual human wealth is given by Eq. (22),
                                                   
       (22)                           H=                   .
                                              1 -  (1 -  )

  2) The price of an Arrow security is given by Eq. (23),
                                                   N
                                                   i=1 Pi (s
                                                           )xi Wi ( )
       (23)                    Q( | ) = p(x )                         ,
                                                       N ( )H

       where N ( ) = i xi is the number of surviving agents at time t + 1 and
       N ( )H is aggregate human wealth.

For a proof of Proposition 2 see Appendix D. In the next section, we will show how
the pricing function, Q( | ), depends on the assumptions about the information
structure and the number of agents.

        IV.    Equilibrium Behaviour Under Two Different Assumptions

  Next, we study the evolution of asset prices and the wealth distribution under
two different assumptions. First, in Section IV.A, we assume that Pi (s ) = P(s )
for all i We call this the common knowledge economy and we refer to the outcome
of this version of our model as a rational expectations equilibrium. In Section
IV.B we allow beliefs to differ and we ask and answer the question: Do markets
reveal enough information for the economy to converge to a rational expectations
equilibrium? We call this the heterogeneous beliefs economy.

                          A.    The Common Knowledge Economy

  When beliefs about the probability of s are common, we can factor out Pi (s )
from the sum in Eq. (23) and write the expressions for Q( | ) as follows,

(24)                            Q( | ) =  P(s )p(x )(x ),
                 N
where, using     i=1 xi   = N ( ),
                                                N
                                                i=1 ai ( )xi
                                 (x ) = 1 +                    .
                                                N ( )H

The term (x ) corrects Arrow security prices for mortality risk and we need to
keep track of this term in our simulations to ensure that asset markets clear. This
term disappears in the large N limit because each cohort is perfectly insured. As
14                       A BOUCHAUD-FARMER WORKING PAPER


N  , (x )  1 and we obtain the limiting expression10

(25)                              Q( | ) =  P(s )p(x ).

  Consider next how the wealth distribution evolves over time. The wealth evo-
lution equation is given by Eq. (19), which we reproduce below,

                                                  Wi ( )
(26)                Wi ( ) = xi P(s )p(x )               + (1 - xi )H.
                                                  Q( | )

Combining this with Eq. (24) and using the fact that H is state-independent gives

(27)                          Wi ( ) = xi Wi ( ) + (1 - xi )H.

In the large N limit, there is no aggregate mortality risk and, in this case, we
obtain an equivalent expression for Wi (s)

(28)                          Wi (s ) = xi Wi (s) + (1 - xi )H.

Eq. (28) implies that in the large N economy, the wealth of the person with index
i, contingent on her survival, is time invariant.
   In a finite population, the variable (x ) plays a non-trivial role. Suppose, for
example, that in period 1 there are two people. One person has positive financial
assets equal to a and the other has negative financial assets equal to -a. In
that economy, the rich person consumes more than the poor person for as long
as they are both alive. But if one person dies and is replaced by a new person
with wealth H , all debts are cancelled and the economy enters an absorbing state
with an egalitarian wealth distribution. The wealth reallocation that occurs as a
consequence of mortality risk is encoded into the random variable (x ).

                         B.    The Heterogeneous Belief Economy

  Next, we turn to the case where people have different beliefs. In this case, Pi (s )
can no longer be factored out of the summation in Eq. (23) and instead of Eq.
(24) we obtain the following expression for the price of an Arrow security,
                                      N
                                      i=1 Pi (s
                                              )Wi ( )xi
(29)        Q( | ) = p(x )                                    Pimp ( )p(x ),
                                          N ( )H

where Pimp ( ) is the probability of state  that would be inferred from market
prices if market participants believed that they were living in a common knowledge
economy. We henceforth refer to Pimp ( ) as the implied probability.
   10 Notice that plim         -1
                       N  N         i ai ( )xi   = 0, using market clearing and assuming that
plimN  N -2 i a2   i  =  0, which turns   out to be true provided  remains fixed as N  . Hence
plimN  (x ) = 1.
VOL.      NO.                              SELF-FULFILLING PROPHECIES                               15


  Now, since who dies and who survives is independent from both wealth and
beliefs one has, in the large N limit,11
                            N                                             N
                            i=1 Pi (s
                                    )Wi ( )xi                             i=1 Pi (s       )Wi (s)
(30)              plim                        = plim
                 N              N ( )H          N                                   NH

In the large N limit, the implied probability only depends on the future realisation
of s but not on the mortality state. It is given by
                                                        N
                                                        i=1 Pi (s     )Wi (s)
(31)                               Pimp (s )                                    .
                                                            NH
It is the wealth weighted average probability, and therefore differs from the true
probability, P(s ), which is the flat average of individual subjective probabilities.
  Using the definition of Pimp (s ), the analogue of Eq. (28) for the heterogeneous
belief case is given by Eq. (32),

                                               Pi (s )
(32)                       Wi (s ) = xi                 Wi (s) + (1 - xi )H.
                                              Pimp (s )

As we explain in Section V.A, Pi and Wi are strongly coupled by the dynamics,
Eq. (32). Therefore, we cannot split Pimp (s ) into the product of P(s ) and
plimN  i {Wi ( )/N } as we did in the common knowledge economy. This
failure of independence generates fat-tails in the wealth distribution and it implies
that the implied probability, Pimp (s ), and the true probability, P(s ), can differ
even in the large N limit.
  In Section V.D we will use these expressions to study the implications of our
self-referential economy for the prices of debt and equity.

                              V.      Results from Simulated Data

   In Section V we illustrate the properties of our model by reporting some statis-
tics for simulated data in a calibrated version. In subsection V.A we report the
results of these simulations and in subsection V.C we derive the properties of
some statistics for the large N continuous time limit.

                                      A.     A numerical simulation

  We simulated an economy with one million agents for 300 years and we chose
the period length to be one week. We normalized the weekly endowment to 1 and
  11 We   use here the fact that if i and i are independent random variables, then
                                     N                          N                   N
                         plim N -1         i i = plim    N -1         i    N -1           i   ,
                         N           i=1        N               i=1                 i=1

and choose i = Pi Wi and i = xi .
16                        A BOUCHAUD-FARMER WORKING PAPER


we chose the annual discount rate to be 0.97 which corresponds to an equilibrium
annual real interest rate, in an endowment economy, of 3%. These are relatively
uncontroversial choices. In Figure 1 we graph some data from a single simulation
of this calibrated version of our model.




     Figure 1. 300 Years of Simulated Weekly Data in an Economy with One Million People




   The properties of our simulations are sensitive to two key parameters. The first
is  which governs the replacement rate of new agents. The second is , which
governs the weight that agents place on new information in updating their beliefs.
We chose  = 3.9 × 10-4 which gives a life expectancy for the average agent of
50 years for the chosen time step of one week. In our model, life expectancy
is independent of age and our choice for  is consistent with US life expectancy
tables for which a crude age-weighted average of survival probabilities delivers a
number close to 50 years.
   We chose a value for  equal to  1/2 , i.e  = 1. For our calibrated value of  ,
this choice implies that it takes 50 weeks (approximately one year) for the effect
of the prior to be swamped by new data. We constrained  and  to be linked in
VOL.    NO.                            SELF-FULFILLING PROPHECIES                                     17


this way because, in the large N continuous time limit, this choice of parameters
implies that P (P) is uniform on [0, 1] ­ cf. Eq. (5).12
   The top left panel of Figure 1 graphs the invariant measure P (P). The other
three panels present some key data for a single simulation of 300 years of weekly
data. The top right panel is the percentage difference between P(s ) and Pimp (s ).
This difference is a measure of how wrong the market can be as a measure of the
true probability. For much of the sample this difference is less that 1% but there
are times when this deviation exceeds ±15%. Such large discrepancies are quite
remarkable in view of the size of the market (one million participants) and are
the consequence of the emergent wealth inequalities in our model.
   The bottom right panel shows the time series behaviour of the price for de-
livery of a commodity in the high state. This price wanders randomly over the
interval [0, 1] and sometimes it moves substantially in a short period of time. The
bottom left panel is the log of the wealth distribution. In the following subsec-
tion we explore the properties of this distribution and we show that it shares
many characteristics in common with empirical wealth distributions in Western
economies.

                       B.    Exploring the Empirical Wealth Distribution

   When we embed our learning mechanism in a market economy, a somewhat
unexpected effect appears. While our model is constructed in such a way that no
agent is better informed than any other, some agents are by chance, and temporar-
ily, much more successful than others. This allows these agents to accumulate
wealth through the multiplicative process described in Eq. (32), reproduced below

                                            Pi (s )
(32)                        Wi (s ) = xi             Wi (s) + (1 - xi )H.
                                           Pimp (s )

Multiplicative wealth processes of this form are well-known to generate important
wealth inequalities, as we explain in Section V.C. In Figure 2 we graph the
Lorenz curve for the time average of 250 equally spaced samples of the wealth
distribution in our simulated data. The Lorenz curve is a graphical representation
of inequality which plots the cumulative percentage of wealth on the y-axis against
the percentile of the population on the x-axis. One popular index of inequality
is the Gini coefficient which is equal to twice the area between the 45 degree line
and the Lorenz curve.
   For our numerical data, the Gini coefficient is equal to 0.7. A value of 0 would
represent a completely equal distribution and a value of 1 would represent a
   12 Our parameterisation is consistent with the fact that although many financial time series appear to
be non -stationary, they do not appear to pile up around a small number of values. A value of 2 that
was greater than  would imply that P piles up around 1/2. A value less than  would cause P to spend
a lot of time around P = 0 or to jump occasionally and spend a similar amount of time around P = 1.
Because we do not observe either of those features in data we chose a value of 2 =  which implies that
P wanders randomly in [0, 1].
18                         A BOUCHAUD-FARMER WORKING PAPER




                      Figure 2. The Lorenz Curve for a Single Simulation




distribution where one person owns everything. As we show below a value of 0.7
is close to observed Gini coefficients for the wealth distribution in the data.
   Table 1 reports data from a selection of countries. This table shows that a Gini
coefficient of 0.7 is well within the bounds of empirical data which varies between
a low of 0.55 for China in 2008 and a high of 0.85 for the United States in 2019.
To explore the nature of the wealth distribution further we define F (W ) to be the
cumulative distribution function (cdf) of wealth and define G(W )  1 - F (W )
to be the complementary cdf. In Figure 3, we plot log G(W ) against log(W ) for
values of log(W ) greater than zero. This figure reveals a power-law tail of the form
G(W )  W -µ , and a regression of log(G(W )) on log(W ) for the linear portion of
the plot provides an estimate of the tail index of µ = 1.4. Note that G(W )  W -µ

   13 Wikipedia https://en.wikipedia.org/wiki/List of countries by wealth equality Retrieved December
6'th 2020.
VOL.    NO.                              SELF-FULFILLING PROPHECIES                                         19

                                  Country                    2008      2019
                                  China                      0.55      0.7
                                  United Kingdom             0.7       0.75
                                  Italy                      0.7       0.77
                                  France                     0.73      0.7
                                  Switzerland                0.74      0.87
                                  United States              0.8       0.85
            Table 1--Wealth Ginis' For a Selection of Countries in 2008 and 201913



corresponds to a probability distribution function (pdf) (W )  W -1-µ . A
person who is neither a borrower nor a lender has zero financial assets and her
net worth would be equal to the discounted present value of her labour income.
For our calibration, this number, which we refer to as human wealth, is equal
to 1,032 weeks of income.14 In the common knowledge economy, the wealth
distribution would be egalitarian, the Gini coefficient would be 0 and everyone
would have wealth equal to H . Instead, in our economy, there is considerable
inequality.
  A person at the 50'th percentile of the wealth distribution is a net borrower
who has total wealth equal to 39% of human wealth. In contrast, a person at
the 99 th percentile in the wealth distribution has total wealth equal to 892% of
human wealth and the person at 99.9 th percentile has total wealth of 4, 999%.
Wealth becomes highly concentrated because market prices do not reflect average
beliefs. Instead they reflect wealth weighted beliefs. In equilibrium, wealth and
market prices are correlated in a way that leads to a self-reinforcing mechanism
whereby a few people, by chance, get lucky and become very rich.

                      C.    The Behaviour of Wealth in the Large N Limit

   We can learn quite a bit about the dynamics of wealth by analyzing the proper-
ties of Eq. (32). Using this equation, one may derive the following expression for
the average return for agent i between dates t and t +1, conditional on surviving:15

                                      Wi      (P - Pimp )(Pi - Pimp )
(33)                     Ri  Et          -1 =                         .
                                      Wi         Pimp (1 - Pimp )

   14 Human wealth is defined by the expression H = 1/(1 -  (1 -  )). For our calibration the weekly

discount rate is 0.971/52 and the survival probability, (1 -  ), is equal to 3.9 × 10-4 . This leads to a value
of H = 1, 031 measured in weeks of income.
   15 Eq. (33) follows since


                                  Wi          Pi               1 - Pi
                       Ri  Et        -1 = P×      + (1 - P) ×          -1
                                  Wi         Pimp             1 - Pimp
                                                (P - Pimp )(Pi - Pimp )
                                            =                           .
                                                   Pimp (1 - Pimp )
20                       A BOUCHAUD-FARMER WORKING PAPER




     Figure 3. Estimate of the Tail Parameter in 1,000 Years of Simulated Monthly Data




Several interesting conclusions can be drawn from Eq. (33). First, in the common
knowledge economy where P  Pimp , agents cannot expect to make money on
average, even temporarily.
  Second, when an agent's belief Pi is larger than the market probability Pimp ,
her expected gain is positive if the actual probability P is also greater than Pimp ,
and negative otherwise.
  Finally, since agents are assumed to act on the assumption that their estimate
of the probability is an unbiased estimate of the true probability, they also believe
that their trades will be profitable on average and proportional to (Pi - Pimp )2 . In
other words, they expect to make a larger profit, the further is their belief from the
probability implied by the market price. This implies that there is no incentive
for agents to align their beliefs with the observable implied probability, since
this would reduce their subjective expected profit. Everybody in this economy,
believes that they know more than the market.
VOL.         NO.                             SELF-FULFILLING PROPHECIES                          21


  In Eq. (34) we derive an expression for the average of the square of the relative
change of wealth for surviving agents:16

                             Wi          2       P - 2PPimp + P2
                                                               imp (Pi - Pimp )
                                                                               2
(34)                 Et         -1           =                                               .
                             Wi                            P2
                                                            imp (1 - Pimp )
                                                                           2


One sees from this equation that "bold beliefs", corresponding to a large differ-
ence between Pi and the market probability Pimp , leads to a larger variance of
gains. Eq. (34) explains why our model generates large wealth inequalities. For
surviving agents, the wealth dynamic is a multiplicative random process with
a time dependent and agent dependent variance. This multiplicative process is
reset to 1 at a Poisson rate  , i.e. when an agent dies.
   Multiplicative random process with reset have been widely studied in the lit-
erature (see e.g. Kesten (1973); Bouchaud and M´    ezard (2000); Benhabib et al.
(2018); Gabaix (2009); Benhabib and Bisin (2011); Gabaix et al. (2016)) and it
is known that such processes lead to a stationary distribution with a power-law
tail with a pdf (W ) and a complementary cdf G(W ) of the form,

(35)                 (W ) W  W -1-µ ,                          G(W ) W  W -µ ,

where the exponent µ depends on the parameters of the problem. We discuss in
Appendix E how µ can be approximately computed. We find, in particular, that
µ > 1 whenever  > 0.
  Random variables that behave `like' the Pareto distribution for large W are
said to possess a `Pareto tail'. These distributions can be sorted into three classes
depending on the value of the tail parameter µ. A Pareto-tailed distribution is
well defined for all positive µ but when 0 < µ  1, the mean and all higher
moments do not exist. When 1 < µ  2, the mean exists but the variance and
higher moments do not exist and for µ > 2, the distribution has a finite mean and
a finite variance. In our example, as in the data, we find a value of µ between 1
and 2 which implies that the wealth distribution has a finite first moment but all
higher order moments are not well defined.
  In conclusion, wealth inequalities in our model arise from the multiplicative
nature of wealth dynamics which makes successful bold bets highly profitable.
The flip side of this statement is that unsuccessful bold bets are ruinous and lead
the person who makes such bets into poverty. People who agree with the market
    16 Eq.   (34) follows since
                                     2                     2                             2
                             Wi                   Pi                        1 - Pi
                       E        -1       = P          -1       + (1 - P)            -1
                             Wi                  Pimp                      1 - Pimp

                                              P - 2PPimp + P2
                                                            imp (Pi - Pimp )
                                                                            2
                                         =                                      .
                                                     P2
                                                      imp (1 - Pimp )
                                                                     2

.
22                     A BOUCHAUD-FARMER WORKING PAPER


belief have a low expected subjective gain from trading. People who disagree may
either become spectacularly rich, or spectacularly poor.

             D.   Debt and Equity in the Heterogeneous Belief Economy

  In this section, we flesh out the idea that s is a signal, transmitted through a
social network, of the public's commonly held belief that the stock market will
take on a high value, rather than a low value. We assume that N is large and we
derive formulae that hold exactly in the large N limit.




 Figure 4. The Behaviour of the Price of Equity in 300 Years of Simulated Monthly Data




  We derive trading rules for traders who buy and sell Arrow securities. But
there is no reason to restrict ourselves to securities of this kind and the same
equilibrium we have described above can be supported by any set of securities
with independent payoffs that span the space of possible outcomes. Here, we show
that the equilibrium can be supported by a security that pays one commodity in
both states; we call this security debt, and a security that pays d units if s = {1}
and zero otherwise. We call this security equity.
PROPOSITION 3: For the large N economy, equilibrium can be supported by
trades in debt and equity. Debt is a security that costs Q units of commodities
VOL.   NO.                        SELF-FULFILLING PROPHECIES                      23


in state s and pays 1 commodity in state s . Equity is a security that costs pE (s)
units of commodities in state s and pays pE (s ) + d in state s = {1} and pE (s )
in state s = {0}, where


                                  d   2Pimp - 1     1
(36)                   pE (s) =                  +     ,
                                   2 1 -  (1 -  ) 1 - 


(37)                                     Q = .

For a proof of Proposition 3 see Appendix F. In Figure 4 we have graphed
the value of pE (s) for the data simulated in Figure 1. To compute this series
we normalized the dividend payment to 1/52 to make the units comparable to
an expected weekly dividend payment. This series has many characteristics in
common with the price dividend ratio in US data for realized values of the S&P.
  In the introduction to this paper, we promised to develop a model in three
stages. In stage 1, we presented a model where people disagree about the value
of a public signal, but where that signal has no economic consequences. In stage
2, we allowed people to trade Arrow securities, conditional on that signal, but
we did not explain how Arrow securities are related to real world trades in debt
and equity. In stage 3, discussed in this section, we have shown that, in the large
N limit, trades in a pair of Arrow securities can be replicated by trades in two
securities that resemble debt and equity.
  In the world where agents trade debt and equity, firms pay dividends contingent
on the realization of a public signal. As we suggested in the introduction, one
possible interpretation of this signal is the publication of an optimistic article by
a journalist for a national newspaper which triggers a dividend payout by firms.
The fact that firms react to the signal by making a dividend payment in good
states, but not in bad states, is a self-fulfilling action which confirms the beliefs
of market traders that they should be willing to pay more for shares in the firm.

                                   VI.   Conclusion

  We have a constructed a theory of beliefs in which people exchange information
through both market and non-market interactions. Non-market interaction in so-
cial networks generates an aggregate signal which reflects average public opinion.
Market exchange through the purchase and sale of financial assets allows peo-
ple to bet on their beliefs. Importantly, market prices reveal information about
wealth weighted beliefs but it is flat weighted beliefs which generate the public
signal.
  One is led to the question: Why do people continue to bet with each other
when these bets are highly risky? The answer we propose is that everyone in our
economy thinks that the market is wrong and that by betting, they will be able
to make money on average. They do not use the implied probability revealed
24                           A BOUCHAUD-FARMER WORKING PAPER


by the markets to improve their estimate of P, since this trading strategy is, in
their opinion, sub-optimal. Quite remarkably, the coupled dynamics of individual
wealth and beliefs leads to a fat-tailed distribution of wealth that prevents markets
to faithfully reflect agents' beliefs, therefore preventing agents to learn the true
value of P.17
  Why are there no Warren Buffets who invest for the long run by guessing
that the probability of a successful outcome will be equal to the mean of the
invariant distribution? Our answer is that for any reasonable time period, the
future value of s is far better approximated from averaging the frequency of its
recent realizations than by assuming that it is drawn form the unconditional long-
run measure. In the long run the expected probability that s = {1} is 1/2, but,
as Keynes famously quipped: "In the long run we are all dead". We believe that
our quasi non-ergodic model aptly illustrates what Keynes had in mind.

                                          REFERENCES

Klaus Adam, Albert Marcet, and Juan Pablo Nicolini. Stock market volatility
  and learning. Journal of Finance, 71(1):33­82, 2016.
Klaus Adam, Albert Marcet, and Johannes Beute. Stock price booms and ex-
  pected capital gains. American Economic Review, 107(8):2352­2408, 2017.
Philip W. Anderson. Spin glass vi: Spin glass as cornucopia. Physics Today, 42
  (9):9­11, 1989.
Kenneth J. Arrow. The role of securities in the optimal allocation of risk bearing.
  Review of Economic Studies, 31(2):91­96, 1964.
Alejandro Badel, Moira Daly, Mark Huggett, and Martin Nybom. Top earners:
  Cross-country facts. Institute for Evaluation of Labour Market and Education
  Policy Working Paper 2017:9, 2017.
Pablo Beker and Emilio Espino. The dynamics of efficient asset trading with
  heterogeneous beliefs. Journal of Economic Theory, 166:189­229, 2011.
Jess Benhabib and Alberto Bisin. The distribution of wealth and fiscal policy in
  economies with finitely lived agents. Econometrica, 79(1):123­157, 2011.
Jess Benhabib, Alberto Bisin, and Shenghao Zhu. Skewed wealth distributions:
  Theory and empirics. Journal of Economic Literature, 56(4):1261­91, 2018.
Olivier J. Blanchard. Debt, deficits, and finite horizons. Journal of Political
  Economy, 93(April):223­247, 1985.
Lawrence Blume and David Easley. If you're so smart, why aren't you rich?
  Econometrica, 74(4):929­966, 2006.
  17 Introducing a wealth tax, or an inheritance tax, tends to reduce inequalities and helps prices reveal
private beliefs ­ see Appendix E.
VOL.   NO.                    SELF-FULFILLING PROPHECIES                      25


Jean-Philippe Bouchaud and Marc M´  ezard. Wealth condensation in a simple
  model of the economy. Physica A: Statistical Mechanics and its Applications,
  282(3-4):536­545, 2000.

William A. Brock and Steven N. Durlauf. Discrete Choice with Social Interactions.
 The Review of Economic Studies, 68(2):235­260, 04 2001.

Timothy Cogley and Thomas J. Sargent. The market price of risk and the equity
  premium: A legacy of the great depression? Journal of Monetary Economics,
  5(3):454­476, April 2008.

Timothy Cogley and Thomas J. Sargent. Diverse beliefs, survival and the market
  price of risk. Economic Journal, 119:354­376, March 2009.

Pablo G. Debenedetti and Frank H. Stillinger.      Supercooled liquids
  and the glass transition.  Nature, 410(6825):259­267, 2001.    URL
  http://dx.doi.org/10.1038/35065704.

Roger E. A. Farmer. The Macroeconomics of Self-Fulfilling Prophecies. MIT
  Press, Cambridge, MA, second edition, 1999.

Roger E. A. Farmer. Pricing assets in a perpetual youth model. Review of
  Economic Dynamics, 30:106­124, 2018.

Roger E. A. Farmer. The indeterminacy school in macroeconomics. Oxford Re-
  search Encyclopedia of Economics and Finance, online publication, April 2020.

Roger E. A. Farmer. The importance of beliefs in shaping macroeconomic out-
  comes. Oxford Review of Economic Policy, forthcoming, 2021.

Roger E. A. Farmer, Carine Nourry, and Alain Venditti. Debt deficits and finite
  horizons, the stochastic case. Economics Letters, 111:47­49, 2011.

Xavier Gabaix. Power laws in economics and finance. Annual Review of Eco-
  nomics, 1(1):255­294, 2009.

Xavier Gabaix, Jean-Michel Lasry, Pierre-Louis Lyons, and Benjamin Moll. The
  dynamics of inequality. Econometrica, 84(6):2071­2111, 2016.

Peter H´anggi, Peter Talkner, and Michal Borkovec. Reaction-rate theory: fifty
  years after Kramers. Reviews of modern physics, 62:251­341, 1990.

Ulrich Horst. Ergodicity and Nonergodicity in Economics, pages 1­6. Palgrave
  Macmillan UK, London, 2017.

Harry Kesten. Random difference equations and renewal theory for products of
  random matrices. Acta Math., 131:207­248, 1973. doi: 10.1007/BF02392040.
  URL https://doi.org/10.1007/BF02392040.
26                   A BOUCHAUD-FARMER WORKING PAPER


John Maynard Keynes. The General Theory of Employment, Interest and Money.
  MacMillan and Co., London and Basingstoke, 1936. 1973 edition published for
  the Royal Economic Society, Cambridge.
Alan Kirman. Ants, rationality, and recruitment. The Quarterly Journal of
  Economics, 108:137­156, 1993.
Jos´
   e Moran, Antoine Fosset, Michael Benzaquen, and Jean-Philippe Bouchaud.
  Schrodinger's ants: a continuous description of kirman's recruitment model.
  Journal of Physics: Complexity, 1(3):035002, Aug 2020a.
Jos´
   e Moran, Antoine Fosset, Davide Luzzati, Jean-Philippe Bouchaud, and
  Michael Benzaquen. By force of habit: Self-trapping in a dynamical utility
  landscape. Chaos: An Interdisciplinary Journal of Nonlinear Science, 30(5):
  053123, 2020b. doi: 10.1063/5.0009518.
Patrick A.P. Moran. Random processes in genetics. Mathematical Proceedings of
  the Cambridge Philosophical Society, 54:60­71, 1958.
Federico Guglielmo Morelli, Michael Benzaquen, Marco Tarzia, and Jean-
  Philippe Bouchaud. Confidence collapse in a multihousehold, self-reflexive
  dsge model. Proceedings of the National Academy of Sciences, 117(17):
  9244­9249, 2020. ISSN 0027-8424. doi: 10.1073/pnas.1912280117. URL
  https://www.pnas.org/content/117/17/9244.
Robin Pemantle. A survey of random processes with reinforcement. Probability
  surveys, 4:1­79, 2007.
Ole Peters. The ergodicity problem in economics. Nature Physics, 15(12):1261­
  1221, 2019.
Thomas Piketty and Gabriel Zucman. Capital is Back: Wealth-Income Ratios
  in Rich Countries 1700­2010 . The Quarterly Journal of Economics, 129(3):
 1255­1310, 05 2014.
Nancy L. Stokey, Robert E. Lucas, Jr., and with Edward C. Prescott. Recursive
  Methods in Economic Dynamics. Harvard University Press, Cambridge, MA,
  1989.
VOL.   NO.                   SELF-FULFILLING PROPHECIES                                    27


                   Appendix A: The continuous time limit


                            A1.   Derivation of Eq. (5)


                                                          1
  Introducing a change of variable u such that P =        2   + u, one can convert Eq.
(4) into:

                           1-^- ^              ^ 2
                                           u - /                        ^ 2
                                                                    u + /
(A1) (1 - ^)2 Pt+1 (u) =          Pt                  + Pt
                             2              1-  ^                    1-  ^
                                                         ^ 2
                                                     u - /                        ^ 2
                                                                              u + /
                                          + u Pt                     - Pt
                                                      1-  ^                    1-  ^

where ^ = (1 -  ) and ^= +^.
  In the following analysis we assume long memory (   1) and rare mistakes
(     1) by focusing on the limit where ,   0 with  = 2 for fixed  = O(1).
Expanding Eq. (A1) to order 3 yields:

                     2 1
(A2) t =  [uQ] +       ( - u2 )Q         - 2 u2 Q
                     2  4
                                      3  u  u3         5
                                  -     ( - )Q - u2 Q + Q                       + O(4 ),
                                      2  12 3          12

where primes denote derivatives with respect to u, P (u)  (1 -  ^)Q(u(1 -   ^)),
and t  Qt+1 (u) - Qt (u). Note that the last two terms of Eq. (A2) are of order
3 , and we will neglect them in the following approximation.
  In the small ,  limit, Eq. (A2) converges to the following continuous time
Fokker-Planck equation for P :

                      1 P            1 1
(A3)                      =  [uP ] +   ( - u2 )P                .
                      2 t            2 4

This equation coincides with the continuous time description of Kirman's ant
recruitment model (Kirman, 1993), for which a lot is known (see Moran (1958)
for recent results and references).
  In particular the stationary distribution P  is is described by the following
second order differential equation.

                                      1 1
(A4)                    [uP  ] +        ( - u2 )P      = 0.
                                      2 4
28                    A BOUCHAUD-FARMER WORKING PAPER


The solution to this equation is given by
                                                          -1
                                          (2)    1
(A5)                        P (u) =                - u2        ,
                                          2 ()   4

which corresponds to Eq. (5) in the text.

                      A2.    Generalisation: non-linear feedback

  The Fokker-Planck equation Eq. (A3) corresponds to the following stochastic
differential equation:
                                1
(A6)                 dP = - (P - )dt +             P(1 - P)dWt ,
                                2
where Wt is a Wiener noise. More generally, one can consider a sigmoidal feedback
term F (P) mapping the average belief onto the true probability,

(A7)                                  Pt+1 = F (Pt )

with F (P) = P throughout the main part of the paper and in section above. In
this case, one obtains as a stochastic differential equation

(A8)                  dP = -P V (P)dt +           P(1 - P)dWt ,

where we have introduced a "potential function" V (x) such that
                                       1
(A9)                   x V (x) :=  (x - ) + (x - F (x)).
                                       2
For definiteness, consider a sigmoidal function F (x) defined as:

                                      1                 1
(A10)                       F (x) =        1 + tan[ (x - )]
                                      2                 2

The corresponding potential V (x) is then given by

                     1                                                    1
(A11)         V (x) = ( + )u2 -   log cosh u;                  u := x -
                     2          2                                         2

For small  , V (x) has a unique minimum corresponding to x = 1/2. For  > c =
2(1 + /), V (x) has two minima x < 1/2 and 1 - x > 1/2 and one maximum
at x = 1/2.
  In the absence of the Wiener noise term, the dynamics of x would just be "rolling
down" the potential slopes, selecting one of the minima of V (x) (corresponding
to the stable solutions of F (x) = x).
  In the presence of noise and for  > c , the dynamics becomes a succession
VOL.     NO.                      SELF-FULFILLING PROPHECIES                       29


of long phases where Pt remains close to either x or 1 - x , separated by rapid
switches from one minimum to the other. The time × needed to "climb up the
hill" separating the two minima can be however very long when   0.
  In fact, this time can be rather accurately computed by changing variables
from P to  where P = (1 + sin )/2, which allows one to get rid of the factor
   P(1 - P) in front of the Wiener noise, see e.g. Moran et al. (2020a). Using a
standard approach (e.g. H´  anggi et al. (1990)), one can then show that

                               ×  -1 e/ ,             (  0),

where  can be fully computed (at least numerically) for any potential V (x). The
exponential dependence of × in  implies that (a) there is a strong separation
of timescales in such models and (b) the precise value of × is unknowable in
practice, as it is highly sensitive on the detailed value of the parameters of the
model. Hence agents cannot be assumed to use the same learning rule. Since
these switches can be interpreted as "crashes", the probability of such crashes is,
in our simple model, unknowable much as the trajectories of a chaotic system are
unknowable (for a related discussion, see Morelli et al. (2020)).


                         Appendix B: Dispersion of opinions


     Taking the expectation of Eq. (6) over the realisation of st one gets:

                                                       1             1
(B1)       E[Di,t+1 ] = (1 -  ) (1 - )E[Di,t ] +  (Pt - ) +  (1 -  )   - Pt ,
                                                       2             2
or

(B2)                        E[Di,t+1 ] = (1 -  )(1 - )E[Di,t ]

which shows that E[Di,t ] tends to zero when t  .
     Now let us square Eq. (6) before taking the average over st . One now gets:

                                                               1 2
(B3)           E[D2                        2  2       2
                  i,t+1 ] = (1 -  ) (1 - ) E[Di,t ] +  E[(Pt - ) ]
                                                               2
                                        2  
                          +  E[z 2 ] +    - + (1 -  )2 (1 - 2 )(P2
                                                                 t - Pt ) .
                                       4   2

Now taking further the expectation over the distribution P of the probability P,
and using
                                           1+               
(B4)                        EP [P2 ] =            ,     =     ,
                                         2(1 + 2)           2
30                        A BOUCHAUD-FARMER WORKING PAPER


we obtain, in the limit ,   0, with  fixed,
                                                               2+
(B5)           E [D2                      2    2
                   i,t+1 ] = (1 -  )(1 - ) E [Di,t ] +                + O( 2 ),
                                                              6 1 + 2
where E means an expectation both over s and P .
 Hence in the stationary state where E [D2
                                         i,t ] is independent of t one finds:

                                                       2+
(B6)                   E [D2
                           i]                       2
                                                             ,
                                 6(1 - (1 -  )(1 - ) ) 1 + 2

and hence the result Eq. (7).

            Appendix C: Solving the individual optimization problem

     We conjecture that the value function has the form

(C1)                               A log Wi ( ) + B,

for unknown constants A and B . Substituting from Eq. (16) for ci ( ) in Eq.
(14) and taking derivatives with respect to Wi ( ) leads to the following Euler
equation,

                           xi ( )Q( | )   A Pi ( )xi ( )
(C2)                                    =                ,
                               ci ( )        Wi ( )

which holds state by state. Using the envelope condition Aci ( ) = Wi ( ), which
holds at every date and in every state, we can write Eq. (C2) as

(C3)                 xi ( )Q( | )Wi ( ) =  Pi ( )xi ( )Wi ( ).

Combining the budget equation, Eq. (16), which holds with equality with Eq.
(C3) leads to the expression,

                                                   Wi ( )
(C4)                       Pi ( )xi ( )Wi ( ) +           = Wi ( ).
                                                    A
                       

Because s is independent of x

(C5)                 Pi ( )xi (x ) =       p(x )xi (x )        Pi (s ) = 1 - 
                                       x                  s

and thus by canceling terms and rearranging Eq. (C3) we arrive at the following
value for A.
                                                1
(C6)                               A=
                                           1 -  (1 -  )
VOL.   NO.                      SELF-FULFILLING PROPHECIES                         31


The constant B does not affect the solution and can be solved for by plugging
the value of A into the expression

                                        Wi
(C7)           A log(Wi ) + B = log            +  (1 -  ) [A log(Wi ) + B ]
                                        A

and equating the coefficients on the constant terms.
  It follows from Eq. (C3) that for all xi (x ) = 1, that is, those who survive,

                                             Pi ( )
(C8)                          Wi ( ) =              Wi ( ).
                                             Q( | )

This establishes the first term on the right side of Eq. (19). If xi (x ) = 0 the
newborn with index i has wealth H by assumption. This establishes the second
term on the right side of Eq. (19).


             Appendix D: Establishing the Properties of Equilibrium


  From Eq. (10), we have the following equation for human wealth,

(D1)                      Hi ( ) =  +         Q( | ) xi Hi ( ).
                                         

From the definition of total wealth we have that Wi ( ) - Hi ( ) = ai ( ) where
ai ( ) is the amount of Arrow security held by agent i that pays one unit if  is
realized. Assuming market clearing means that for each  ,
                                N
(D2)                                 ai ( ) = 0,        ,
                               i=1

and hence, using Eq. (C8), we have that
                N                                           N
                                               1
(D3)                 Wi ( ) = N ( )Hi ( ) =                      Pi ( )Wi ( ).
                                             Q( | )
               i=1                                         i=1

Rearranging this equation and factoring Pi ( ) using Eq. (9) gives the following
expression for the pricing kernel
                                               N
                                                      )xi Wi ( )
                                               i=1 Pi (s
(D4)                     Q( | ) = p(x )                          ,
                                                N ( )Hi ( )

which establishes Eq. (23) from Proposition 2.
32                       A BOUCHAUD-FARMER WORKING PAPER


     Replacing Eq. (D4) in Eq. (D1) and reversing the order of summation gives
                           N
                                                   
(D5)        H ( ) =  +         Wi ( )                     Pi (s )p(x ) xi H ( ) .
                                               N ( )H ( )
                         i=1            

Next, cancel H ( ) from top and bottom,
                                   N
                                                        p(x ) xi
(D6)             H ( ) =  +             Wi ( )                           Pi (s ).
                                                        N (x )
                                  i=1             x                  s

                                                 p(x ) xi                   N
Using the facts that Pi (s ) = 1,          x      N (x )    = 1 -  and      i=1 Wi ( )   = H ( )
this expression simplifies to,

(D7)                             H ( ) =  + H ( )(1 -  ),

or
                                                     
(D8)                               H ( ) =
                                                1 -  (1 -  )

which established Eq. (22) in Proposition 2.


            Appendix E: Multiplicative Random Process with Reset



  Consider the simplest case where, conditioned on survival, returns are IID ran-
dom variables, i.e.:

                                        Wi (1 +  ) w.p. 1 - ,
(E1)                           Wi =
                                             1     w.p.   

where  is the date t element of a sequence of IID random variables with zero
mean and variance equal to  2 . For this simple case the sequence of conditional
probability measures (W ) obeys the operator equation,

(E2)      (W ) = (1 -  )       dW (W )         dp( ) d W - W (1 +  ) +  d(W - 1),

where d is Dirac's delta function. For large W this equation delivers a power-
law tail, with an exponent µ which is implicitly defined by the self-consistency
condition

(E3)                           1 = (1 -  )       d p( ) (1 +  )µ .
VOL.   NO.                       SELF-FULFILLING PROPHECIES                             33


In the limit when  and  2 are small, the solution for µ is approximated by the
expression,

                                       1             8
(E4)                           µ=        1+     1+     .
                                       2             2

For the wealth process considered in the paper, however, the  are correlated
in time (since agent i will consistently make/lose money as long as the sign of
Pi (t) - P(t) is constant, i.e. during a time  -1 ), and its variance is time
dependent (see Eqs. (33) and (34)).
   A simplified analysis assumes that  is constant during a time -1 . This pro-
vides the following approximation for µ in this case:

                          1              8
(E5)              µ         1+      1+       ,       ¯ 2 := E[ 2 (t)].
                                                     
                          2               ¯2
                                          

   Note that µ  1 from this formula, meaning that the wealth distribution always
has a finite mean when  > 0.
   A way to decrease wealth inequalities is to introduce a wealth tax. If at each
time step a small fraction  of the wealth of each individual is levied and redis-
tributed across the economy, the value of µ in the simple IID model above changes
to:
                                   + 2 + 2 2
                              µ=                     .
                                          2
Hence, as expected, increasing  increases µ and decreases both the Gini coef-
ficient, thereby making markets more efficient in the sense that the difference
between P and Pimp is reduced.


                      Appendix F: Proof of Proposition 3


  We now seek an expression for the price of a security that pays a dividend d
every time st = {1}. This is given by the expression,

(F1)                     pE ( ) =      Q( | ) d s ,1 + pE ( )
                                    

where  = (x , s ) is tomorrow's state, with x encoding who survives and who
dies and s ,1 is the index function which equals 1 when s = 1 and 0 otherwise.
Iterating Eq. (F1) gives the following infinite series:

(F2)     pE ( ) = d       Q( | )s ,1 + d         Q( | )Q( | )s           ,1   + ··· ,
                                            ,
34                       A BOUCHAUD-FARMER WORKING PAPER


where, from Eq. (29),
                                                N
                                                i=1 Pi (s )Wi ( )xi
(F3)                 Q( | ) = p(x )                                     .
                                                      N ( )H

As we have shown in the main text, this object converges, for large N , to

(F4)                          Q( | ) = p(x )Pimp (s ),

where
                                                N
                                            1
                           Pimp (s ) :=               Pi (s )Wi (s).
                                           NH
                                                i=1
Hence,

(F5)                                 Q( | )s ,1   Pimp
                                

where recall that dropping the argument s implicitly means s = {1}. The first
contribution to pE is thus simply

                                           d Pimp .

     Now let us turn to the second term, which takes the form

(F6)         Q( | )Q( | )
          
                                    p(x )
                                =                          xj (x )Pj (s |s )Wj (s ) Q( | ).
                                    N ( )H
                                                       j

Expressing Wj (s ) thanks to Eq. (32), the right-hand side reads:
                
            
(F7)                    xj (x )p(x )Pj (s |s )xj (x )Pj (s )Wj (s)
         N ( )H
                   j,
                                                                                        

                              +          xj (x )p(x )Pj (s |s )(1 - xj (x ))HQ( | ) ,
                                   j,s

where the first term corresponds to surviving agents in the next time step, and
the second term to dying agents that are replaced with new born agents with
wealth H .
     Consider the two terms of Eq. (F7) in turn. The first term contains a factor
VOL.   NO.                         SELF-FULFILLING PROPHECIES                               35


xj (x )xj (x ) which equals 1 if an agent j survives for both of the next two periods
and zero otherwise. We now use the update rule of agents' beliefs to compute
Pj ( | ). One finds, for s = {1},

                  Pj (1|1) = (1 - )Pj + ;                Pj (1|0) = (1 - )Pj ,

where we recall that Pj := Pj (1). Hence

             Pj (1|s )Pj (s ) = [(1 - )Pj + ] Pj + [(1 - )Pj ] (1 - Pj ) = Pj .
         s

In words, conditional on survival, the agent's belief is a martingale. Conditioning
on s = {1}, one has:

            p(x )        xj (x )Pj (s |s )xj (x )p(x )Pj (s )Wj ( ) = N H (1 -  )2 Pimp .
x ,s ={1}           j,

In the large N limit, N ( ) = N (1 -  ) and this term gives a contribution to
pE ( ) equal to
                              d 2 (1 -  )Pimp .

   Let us now look at the second term. Because of the 1 - xj (x ) term, we are
looking at states of the world where agent j has died and is replaced by a new
agent with an idiosyncratic probability of the next state Pj (s = {1}) equal to
z , which is uniformly distributed between 0 and 1, with no memory of the past.
Therefore, the sum over  can be taken independently of the future and gives:

               p(x )xj (x )Pj (s = {1})              (1 - xj (x ))Q( | ) =  (1 -  )E[z ].
   x ,s ={1}                                  x ,s

Hence, we find that dying agents give a contribution to pE ( ) equal to
                                                  1
                                              d 2  ,
                                                  2
where we have replaced E[z ] by 1/2, and again used the fact that N ( )  N (1- )
when N     1.
   Generalising to all  1 time steps in the future, each agent j can either survive
  times, with probability (1 -  ) or die at least once, with probability 1 - (1 -  ) .
In the first case, his/her belief is a martingale. In the second case, the last death
cuts all dependence from the past. The calculation above can thus be generalised
to give a contribution to pE ( ) equal to:

                                       -1                         -1       1
                         d   (1 -  )        Pimp + (1 - (1 -  )        )     .
                                                                           2
36                    A BOUCHAUD-FARMER WORKING PAPER


Summing over     yields our final result for the price of equity in our economy:

                              d   2Pimp - 1     1
(F8)                   pE =                  +     .
                               2 1 -  (1 -  ) 1 - 

If agents never die, we recover
                                            Pimp
                                  pE = d         ,
                                           1-
                                                           1
as expected. If agent die at every time step, then Pimp    2   and one also recovers
the expected result.
