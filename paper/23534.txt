                               NBER WORKING PAPER SERIES




    A FRAMEWORK FOR SHARING CONFIDENTIAL RESEARCH DATA, APPLIED
   TO INVESTIGATING DIFFERENTIAL PAY BY RACE IN THE U. S. GOVERNMENT

                                       Andr√©s F. Barrientos
                                        Alexander Bolton
                                           Tom Balmat
                                         Jerome P. Reiter
                                      John M. de Figueiredo
                                     Ashwin Machanavajjhala
                                            Yan Chen
                                         Charles Kneifel
                                          Mark DeLong

                                       Working Paper 23534
                               http://www.nber.org/papers/w23534


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                      June 2017




This research was supported by NSF grants ACI-14-43014 and SES-11-31897, as well as the Alfred
P. Sloan Foundation grant G-2-15-20166003. The views expressed herein are those of the authors
and do not necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

¬© 2017 by Andr√©s F. Barrientos, Alexander Bolton, Tom Balmat, Jerome P. Reiter, John M. de Figueiredo,
Ashwin Machanavajjhala, Yan Chen, Charles Kneifel, and Mark DeLong. All rights reserved. Short
sections of text, not to exceed two paragraphs, may be quoted without explicit permission provided
that full credit, including ¬© notice, is given to the source.
A Framework for Sharing Confidential Research Data, Applied to Investigating Differential Pay
by Race in the U. S. Government
Andr√©s F. Barrientos, Alexander Bolton, Tom Balmat, Jerome P. Reiter, John M. de Figueiredo,
Ashwin Machanavajjhala, Yan Chen, Charles Kneifel, and Mark DeLong
NBER Working Paper No. 23534
June 2017
JEL No. C51,C53,C55,C81,J15,J45

                                          ABSTRACT

Data stewards seeking to provide access to large-scale social science data face a difficult
challenge. They have to share data in ways that protect privacy and confidentiality, are
informative for many analyses and purposes, and are relatively straightforward to use by data
analysts. We present a framework for addressing this challenge. The framework uses an
integrated system that includes fully synthetic data intended for wide access, coupled with means
for approved users to access the confidential data via secure remote access solutions, glued
together by verification servers that allow users to assess the quality of their analyses with the
synthetic data. We apply this framework to data on the careers of employees of the U. S. federal
government, studying differentials in pay by race. The integrated system performs as intended,
allowing users to explore the synthetic data for potential pay differentials and learn through
verifications which Àùfindings in the synthetic data hold up in the confidential data and which do
not. We find differentials across races; for example, the gap between black and white female
federal employees' pay increased over the time period. We present models for generating
synthetic careers and differentially private algorithms for verification of regression results.

Andr√©s F. Barrientos                             John M. de Figueiredo
Department of Statistical Science                The Law School and Fuqua
Duke University, Box 90251                       School Duke University
Durham, NC 27708                                 210 Science Drive, Box 90360
afb26@stat.duke.edu                              Durham, NC 27708
                                                 and NBER
Alexander Bolton                                 jdefig@duke.edu
Emory University
201 Dowman Drive                                 Ashwin Machanavajjhala
Atlanta, GA 30322                                Department of Computer Science
alexander.bolton@duke.edu                        Duke University, Box 90129
                                                 Durham NC 27709
Tom Balmat                                       ashwin@cs.duke.edu
Social Science Research Institute
Gross Hall 235                                   Yan Chen
140 Science Drive                                Department of Computer Science
Durham, NC 27708                                 Duke University, Box 90129
thomas.balmat@duke.edu                           Durham NC 27709
                                                 yanchen@cs.duke.edu
Jerome P. Reiter
Department of Statistical Science                Charles Kneifel
Duke University, Box 90251                       Duke University
Durham, NC 27708                                 Office of Information Technology
jerry@stat.duke.edu                              334 Blackwell Street
                                                 Durham, NC 27701
                                                 Charley.Kneifel@duke.edu
Mark DeLong
Duke University
Office of Information Technology
334 Blackwell Street
Durham, NC 27701
mark.delong@duke.edu



Supplemental material is available at
http://www.nber.org/data-appendix/w23534
 A Framework for Sharing Con dential Research Data, Applied to
   Investigating Di erential Pay by Race in the U. S. Government

 Andres F. Barrientos, Alexander Bolton, Tom Balmat, Jerome P. Reiter, John M. de Figueiredo
                  Ashwin Machanavajjhala, Yan Chen, Charley Kneifel, Mark DeLong



                                                   Abstract
          Data stewards seeking to provide access to large-scale social science data face a dicult chal-
      lenge. They have to share data in ways that protect privacy and con dentiality, are informative
      for many analyses and purposes, and are relatively straightforward to use by data analysts. We
      present a framework for addressing this challenge. The framework uses an integrated system
      that includes fully synthetic data intended for wide access, coupled with means for approved
      users to access the con dential data via secure remote access solutions, glued together by veri-
       cation servers that allow users to assess the quality of their analyses with the synthetic data.
      We apply this framework to data on the careers of employees of the U. S. federal government,
      studying di erentials in pay by race. The integrated system performs as intended, allowing
      users to explore the synthetic data for potential pay di erentials and learn through veri cations
      which ndings in the synthetic data hold up in the con dential data and which do not. We nd
      di erentials across races; for example, the gap between black and white female federal employ-
      ees' pay increased over the time period. We present models for generating synthetic careers and
      di erentially private algorithms for veri cation of regression results.
    Andres F. Barrientos is Postdoctoral Associate, Department of Statistical Science, Duke University, Durham,
NC 27708 (email: afb26@stat.duke.edu); Alexander Bolton is Assistant Professor, Department of Political Science,
Emory University, Atlanta, GA 30322 (abolton@emory.edu); Tom Balmat is Statistician, Social Science Research
Institute, Duke University, Durham, NC 27708 (thomas.balmat@duke.edu); Jerome Reiter is Professor, Department
of Statistical Science, Duke University, Durham, NC 27708 (jerry@stat.duke.edu); John de Figueiredo is Edward
and Ellen Marie Schwarzman Professor, Law School and Fuqua School of Business, Duke University, Durham NC
27708 (jde g@duke.edu); Ashwin Machanavajjhala is Assistant Professor, Department of Computer Science, Duke
University, Durham, NC 27708 (ashwin@cs.duke.edu); Yan Chen is Graduate Student, Department of Computer
Science, Duke University, Durham, NC 27708 (yanchen@cs.duke.edu); Charley Kneifel is Senior Technical Director,
Oce of Information Technology, Duke University, Durham, NC 27701 (charley.kneifel@duke.edu); and, Mark De-
Long is Director of Research Computing, Oce of Information Technology, Duke University, Durham, NC 27701
(mark.delong@duke.edu). This research was supported by NSF grants ACI-14-43014 and SES-11-31897, as well as
the Alfred P. Sloan Foundation grant G-2-15-20166003.

                                                       1
   Key Words:      Access, Disclosure, Privacy, Synthetic, Veri cation.

1 Introduction
Widespread access to large-scale social science datasets greatly enhances the work of evidence-
based policy makers, social scientists, and statisticians. Yet, widespread dissemination of large
scale social science data also carries a signi cant social cost: it puts data subjects' privacy and
con dentiality at risk. Simply stripping unique identi ers like names and exact addresses, while
necessary, generally does not suce to protect con dentiality. As is well documented (e.g., Sweeney,
1997, 2013; Narayanan and Shmatikov, 2008; Parry, 2011), ill-intentioned users may be able to
link records in the released data to records in external les by matching on variables common to
both sources. These threats are particularly serious for large-scale social science data. Such data
often come from administrative or privately collected sources so that, by de nition, someone other
than the organization charged with sharing the data knows the identities and (a large number of)
attributes of data subjects. Large-scale social science data also typically include many variables
that, since the data arguably are known by others, could serve as matching variables.
    As the size, richness, and quality of social science data have increased, so too have the threats
to con dentiality. Confronted with these risks, responsible data stewards face a dicult dilemma:
how can they provide access to con dential social science data while protecting con dentiality
of data subjects' identities and sensitive attributes? Often data stewards|whether in academia,
government, or industry|default to restricting access to carefully vetted and approved researchers
via licensing arrangements or physical data enclaves. This is only a partial solution. It denies the
bene ts of data access to broad subsets of society including, for example, students who need data
for learning the skills of data analysis and citizen scientists seeking to understand their society.
    In this article, we describe and illustrate a general framework for providing access to large-scale
social science data. The framework integrates three key ideas from the literature on con dentiality
protection and data access. The rst idea is to provide synthetic public use les, as proposed by
Rubin (1993) and others (e.g., Little, 1993; Fienberg, 1994; Raghunathan et al., 2003; Reiter,
2005a; Reiter and Raghunathan, 2007; Drechsler, 2011; Callier, 2015). Such les comprise individ-
ual records with every value replaced with simulated draws from an estimate of the multivariate

                                                  2
distribution of the con dential data. When generated appropriately, synthetic data can preserve
many, but certainly not all, important associations in the con dential data. They also should carry
low disclosure risks, since the released data are not actual records. This largely eliminates the kinds
of record linkage attacks that have broken typical disclosure control methods, as it is nonsensical
for ill-intentioned users to match synthetic records to external les.
    While synthetic data have been used to release public use versions of several high pro le social
science datasets (Abowd et al., 2006; Hawala, 2008; Machanavajjhala et al., 2008; Drechsler et al.,
2008; Kinney et al., 2011), at present they have a critical weakness. Users of synthetic data cannot
determine how much their analysis results have been impacted by the synthesis process. This
limitation leads to the second idea that we integrate in the framework: provide users access to
veri cation servers (Reiter et al., 2009). A veri cation server is a query-based system that (i)
receives from the user a statistical query that enables comparison of results from the synthetic and
con dential data, and (ii) returns an answer to the query without allowing the user to view the
con dential data directly (Karr and Reiter, 2014). With the output from a veri cation server, users
can decide whether or not results based on the synthetic data are of satisfactory quality for their
particular purposes.
    Undoubtedly, some analyses will not be adequately preserved. The veri cation server will
help users learn this, thereby reducing the chances of false ndings based on the synthetic data.
These users may desire access to the con dential data, which motivates the third prong of our
integrated data access system: provide remote access to con dential data to approved users via
virtual machines on a protected research data network (PRDN). We do not describe how to set up
the architecture for a PRDN in this article, although we use one in our illustrative application.
    Integrating all three ideas in a single system creates synergies. Users start with the synthetic
data, which has low barriers to access. They can use the synthetic data to investigate distributions
and relationships, determine what questions might be answerable with the data (e.g., are there
enough cases of interest to support accurate modeling?), examine the need for transformations and
recoded variables, and develop appropriate code. The veri cation server can enable researchers
and policy makers to know when to trust and act on their results, and when perhaps not to do so.
Even users who are not satis ed with the quality of the results can bene t from starting with the
synthetic data. Storage and processing of large-scale data are costly to data stewards, who likely
                                                  3
will pass some costs to users. Analysts who have an informed analysis plan|for example, they know
the approximate marginal distributions of the data and have a sense of the data structure|can
improve their eciency when using the server, thereby saving their own time and money. Crucially,
by performing their data explorations outside the PRDN, these analysts will use up fewer cycles
on the protected systems and open opportunities for more ecient use of those systems. Finally,
with a system that allows analysts to make informed decisions and a convenient means to access
con dential data remotely, data stewards can facilitate the highest quality analyses to trusted
individuals in ways that are (i) more cost-e ective to establish and sustain, and more readily
modi ed and updated to incorporate new technologies, than physical enclaves, and (ii) more secure
than distributing licensed datasets to researchers for use on their own machines.
    We apply and illustrate the framework on data comprising the workforce of the United States
federal government from 1988 to 2011. Speci cally, we generate an entirely synthetic federal work-
force, including new methodology for modeling and generating career trajectories. Using the syn-
thetic data, we estimate regression models that assess systematic di erences in employee salaries
by race and gender, and investigate how such di erences change over time. We present several
new veri cation measures that satisfy di erential privacy (Dwork, 2006), a criterion with strong
and formal guarantees of data privacy. We apply these measures to the synthetic data results,
and ultimately verify the nal models using the con dential data inside a PRDN at Duke Uni-
versity (https://oit.duke.edu/what-we-do/services/protected-network). The ndings are
remarkable for both methodological and substantive reasons. For the former, the integrated system
performs as advertised, allowing us to see the validity, and shortcomings, of the synthetic data
results. For the latter, the con dential data suggest that (i) the di erential in pay for white and
black female employees has been increasing over time, and that (ii) Asian male employees make
substantially less on average than white male employees over much of the time frame we analyzed.
As far as we know, neither of these ndings have been previously documented in the public sector
at this magnitude or detail.
    The remainder of this article is organized as follows. In Section 2, we describe the data in more
detail and outline the procedures used to generate the synthetic data, including the approach for
generating synthetic careers. In Section 3, we describe the veri cation measures. In Section 4,
we mimic a usage of the integrated system to analyze the di erential pay gap: we start with the
                                                 4
synthetic data, verify ndings using the di erentially private measures, and repeat the analysis on
the con dential data. In Section 5 we discuss some issues on implementation of this framework.

2 Description of Data
2.1 Overview of the con dential data
The Oce of Personnel Management (OPM) maintains the personnel records for all civil servants in
the United States. We work with a subset of the data from the OPM's Central Personnel Data File
(CPDF) and Enterprise Human Resources Integration system (EHRI), which we jointly refer to as
the Status File (SF). The SF we use is a snapshot of the civil service on every September 30 (the end
of the scal year), comprising approximately 2 million employees per year from 1988 to 2011. For
each employee, the le includes annual data on characteristics like age, agency, education level, pay
grade, occupation, supervisory status, entry and departure, and other background characteristics.
The data are longitudinally linked. We exclude employees from the armed services, the Department
of Defense, the U. S. Postal Service, and individuals who work in classi ed roles, sensitive agencies,
and sensitive occupations as de ned by OPM. The nal analysis le includes personnel records
from 3,511,824 employees.
    The OPM data are valuable because they allow researchers to investigate many key questions
in the study of human capital in large organizations and government organizations in particular.
For example, researchers can use the OPM data to examine government agencies' ability to recruit
high quality individual talent, to develop their employees' expertise within those agencies, and to
retain the best and brightest in government service (e.g., Lewis and Durst, 1995; Bolton and de
Figueiredo, 2016). These are important and complicated challenges; public agencies must cope
with episodic turnover of political appointees, limited ability to adjust worker compensation in
response to outside market pressures, diculty in performance measurement due to the nature of
governmental tasks, and constraints on frictionless alterations to the government workforce because
of employment terms for civil servants (Borjas, 1980; Bolton et al., 2016). Ultimately, research with
these data can shed light on the relative costs and bene ts of human capital management strategies.
    The OPM data les are currently housed in a PRDN at Duke University with strict access
and con dentiality standards under an IRB-approved protocol. The data have not been released
                                                  5
by OPM to the general public in as comprehensive form as we propose, primarily because of
con dentiality concerns. OPM is required by regulation to disclose the name, agency, location,
position, grade, and salary of each civil service employee upon request. In fact, it produces annually
an identi able list of all federal employees with these six elds. This poses a disclosure risk problem.
If the SF data were \anonymized" by standard techniques, an ill-intentioned user might be able to
reverse engineer a large percentage of the OPM database by matching the six known elds to the
same elds in the anonymous data. They subsequently could retrieve the private and con dential
data of a large percentage of the federal personnel.

2.2 Overview of synthetic data creation
To reduce these re-identi cation risks, the OPM could create a fully synthetic version of the SF,
as we do for this article. In this section, we provide an overview of our process for generating
the synthetic data, mainly to provide context for the framework of synthetic data coupled with
veri cation. Our emphasis for this article is the big picture|the concept of an integrated system
for data access|rather than the speci cs of creating or evaluating synthetic data for this le.
We do include more details on the methods for generating synthetic careers, races, and wages
in this section; these variables are central to our illustrative analysis of wage di erentials. The
synthesis models for other variables are described in the online supplementary material. We do not
discuss additional evaluations of the usefulness or disclosure risks in the synthetic data, as these
are ancillary to the objectives of this article. We note that, as of this writing, the OPM has not
yet determined whether or not to make the synthetic data available to a broader set of researchers.
    The SF data are complicated, making the task of generating useful synthetic data challenging.
The employees are measured on 29 variables over the course of 24 years. They work across 607
agencies, some of which have only a handful of employees and some of which have thousands of
employees. The variables are mostly nominal with levels ranging from 2 (sex) to 803 (occupation),
and also include a small number of numerical variables. For any employee, most variables can change
annually, although a few demographic variables remain constant or change deterministically (age).
Many pairs of variables have theoretically impossible combinations, such as certain occupations
being restricted to certain education and degree types. Some variables should be non-decreasing
over time, such as months of military service and educational levels, although the con dential data
                                                  6
have records that violate those restrictions, presumably due to reporting errors.
    Broadly, we use sequential conditional modeling to make the synthetic data, as done in Kinney
et al. (2011). We order the variables from the rst to last to be synthesized. Let Vij be the value of
the j -th ordered variable for the i-th employee, where j = 1; : : : ; 29. We seek the joint distribution,

                     p(Vi1 ; : : : ; Vi29 ) = p1 (Vi1 )  p2 (Vi2 jVi1 )  : : :  p29 (Vi29 jVi1 ; : : : ; Vi28 );                                 (1)

where each pj denotes the conditional distribution of Vj given V ; : : : ; Vj . We let V correspond  1              1                           1


to the sequence of agencies where the employee has worked, which de nes the employee's career.
Nearly all other variables depend on when and where the employee works, so modeling this variable
  rst facilitates the synthesis process. We let (V ; : : : ; V ) be, in order, gender, race, educational
                                                                            2            7


level, age in years, years since the employee earned the degree mentioned in educational level,
and an indicator for ever having served in the military. These demographic variables are, for
the most part, straightforward to model because either (1) they remain constant across time or
change in a deterministic manner after the initial year, or (2) change with only low probabilities.
We let (V ; : : : ; V ) include the remaining variables, which depend on the characteristics of the
             8            29


employee's job that year. Examples of these variables include occupation, part-time or full-time
status, grade and step classi cation, supervisory status, and pay. A full list of variables is in the
online supplementary material.
     For Vj that can change annually, where j > 1, we generally apply lag-one modeling strategies
to simplify computation. Speci cally, let Vijt be the j -th variable at year t for the i-th employee.
Let ti < : : : < tin be the ni years when employee i has values (is working), and set Vij =
         1                     i


(Vijt 1 ; : : : ; Vijt ). For longitudinal Vj , we use the conditional representation,
     i              ini



                                                     ni
                                                     Y                                                                              
              pj (Vij jVi1 ; : : : ; Vij    1   )=         pj;til Vijtil Vi1 ; : : : ; Vij 1 ; Vijti1 ; : : : ; Vijtil          1       ;           (2)
                                                     l=2


where pj;t denotes the distribution of Vijt conditioned on the previous j 1 variables and the
             il                                                     il


values of Vij up to time til . We assume that
                                        1



                                                                                                                                           
 pj;til Vj;til Vi1 ; : : : ; Vij 1 ; Vj;ti1 ; : : : ; Vijtil    1        = pj;t il
                                                                                     Vj;til Vi1til ; : : : ; Vij   1;til   ; Vijtil     1       :   (3)

                                                                            7
       Employee               Employee's career              G      Z             W
           e1       0 0 A A 0 0 C C C C 3 (3,5,7)                              (0,A,0,C)
           e2       0 0 0 0 0 0 0 0 0 B 2                           10           (0,B)
           e3       A 0 B C C A A A 0 0 4 (2,3,4,6,9) (A,0,B,C,A,0)
Table 1: Illustration of how to de ne (G; Z; W ) using three hypothetical employees and 10 years.
Each column in the employee's career represents a year; a 0 means the employee did not work that
year; and, A, B, and C represent three di erent agencies. For example, employee e did not work
                                                                                        1
in years 1 and 2, worked in agency A for two years, stopped working in years 5 and 6, and worked
in agency C during the last four years.

Thus, the conditional distribution of Vijt depends only on current values of Vij0 , 1 < j 0 < j 1,
                                           il


and the nearest past value of Vij .

2.2.1 Modeling strategy for employees' careers (V1 )
We de ne an employee's career as the sequence of agencies where the employee has worked through-
out the 24 years. Since most employees have not worked in all 24 years, we create an additional
\agency" corresponding to the status of not working. With this additional level, all employees'
sequences have length 24.
    To model these sequences, we create three additional variables. Let G be the number of agencies
where the employee has worked over the 24 years. Let Z be the list of years in which the employee
moved to a new agency, including a change in working status. Let W be the ordered sequence of
unique agencies where the employee has worked. The values of (G; Z; W ) completely describe the
entire career of any employee, as illustrated in Table 1.
    De ning a model for employees' careers is equivalent to de ning a model for (G; Z; W ), which
we do sequentially. For G, we use a discrete distribution on f1; : : : ; 24g with probabilities equal to
the observed frequencies of each value, from which we randomly generate the values of G associated
with the synthetic employees. For Z jG, we create a one-to-one function TG to map Z into a space
of permutations dependent on G. We model TG(Z )jG using a latent model de ned on the simplex
space. The latent model is de ned using mixtures of Dirichlet distributions. This model allows us
to borrow information across di erent agency patterns (given G) and, therefore, to give positive
probability to unobserved values of Z jG. Since we use a one-to-one mapping, the model for TG(Z )jG
can be easily used to generate values from Z jG. Finally, we model W jZ; G using a Markov chain

                                                   8
of order one. A formal description of the three sub-models is in the online supplementary material.
While targeted at modeling careers, this model can be applied more generally for other sequences
of categorical variables.

2.2.2 General strategy for race (V3 )
Almost all employees report the same value of race in all 24 years. However, 2.7% of employees
report di erent values across the years, usually changing values only once or twice. Rather than
model longitudinal changes in race across time for all employees, which easily could result in far
more switching than observed in the data, we instead create an auxiliary binary variable that
indicates whether the values of race remain the same across all years or not. We estimate a model
for this binary outcome using classi cation and regression trees (CART), conditioning on sex and
predictors derived from the employee's career. We use this model to generate synthetic values of this
variable (Reiter, 2005b). For employees whose race values do not change, we estimate a predictive
model for their rst observed race using CART, again conditioning on (V ; V ), and synthesize V
                                                                           1   2                   3


based on the synthetic values of careers and gender. Finally, for employees whose values change
across time, we model the race at each year using (2) and (3), using CART for each p ;t where
                                                                                           3


t = 1; : : : ; 24.


2.2.3 General strategy for wages (V27 )
Federal employees' basic pay (salary before any location adjustments) is set by tables known as pay
plans. For example, most government employees in white collar occupations fall under the General
Schedule pay plan. For most pay plans, basic pay is a deterministic function of a combination
of variables, usually including the employee's grade and step. Thus, in theory, you can nd any
federal employee's pay by locating their grade and step on their pay plan table. However, in the
SF, some employees' basic pay is not consistent with their pay plan, grade, and step; when this
happens, usually the pay coincides with a value in the pay table associated with a neighboring step.
    To capture these features, we synthesize pay plan, grade, and step before basic pay, thereby
allowing us to \look up" the pay for the synthetic employees. We model basic pay using (2) and
(3) with a CART synthesizer, assuming that basic pay is a nominal variable. This essentially is
equivalent to sampling from the values of basic pay reported in grade and step for a given pay plan,
                                                 9
but also allowing for other variables on the le to explain deviations from the pay plan.
   We note that the government has been releasing employees' basic pay to the public in recent
years (see https://www.fedsdatacenter.com/federal-pay-rates/), so that the values of basic
pay that occur in any year can be considered publicly available information.

3 Veri cation Measures
The quality of inferences from synthetic data depend entirely on the quality of the models used to
generate the data, as the synthetic data only can re ect distributional assumptions in the synthesis
models (Reiter, 2005a). Analysts of the synthetic data need some way to assess the accuracy of
their particular inferences based on the synthetic data. Veri cation servers provide an automated
means to provide such feedback.
    In designing a veri cation server, the agency must account for a crucial fact: veri cation mea-
sures leak information about the con dential data (Reiter et al., 2009; McClure and Reiter, 2012).
Clever data snoopers could submit queries that, perhaps in combination with other information,
allow them to estimate con dential values too accurately. To reduce and quantify these risks, one
approach is to require veri cation measures to satisfy -di erential privacy (-DP), which we now
explain brie y.
    Let A be an algorithm that takes as input a database D and outputs some quantity o, i.e.,
A(D) = o. In our context, these outputs are used to form veri cation measures. De ne neighboring
databases, D and D0, as databases that di er in one row and are identical for all other rows.
De nition 1 (-di erential privacy.) An algorithm A satis es -di erential privacy if for any
pair of neighboring databases (D; D0 ), and any output o 2 range(A), the P r(A(D) = o) 
exp()P r(A(D0) = o):
Intuitively, A satis es -DP when the distributions of its outputs are similar for any two neighboring
databases, where similarity is de ned by the factor exp(). The , also known as the privacy
budget, controls the degree of the privacy o ered by A, with lower values implying greater privacy
guarantees. -DP is a strong criterion, since even an intruder who has accss to all of D except any
one row learns little from A(D) about the values in that unknown row when  is small.

                                                 10
    Di erential privacy has three other properties that are appealing for veri cation measures. Let
A () and A () be  -DP and  -DP algorithms. First, for any database D, releasing the outputs
    1                   2                1               2


of both A (D) and A (D) ensures ( +  )-DP. Thus, we can quantify and track the total privacy
                    1                        2               1   2


leakage from releasing veri cation measures. Second, releasing the outputs of both A (D ) and             1   1


A (D ), where D \ D = ;, satis es maxf ;  g-DP. Third, for any algorithm A (), releasing
    2       2                    1               2                   1   2                        3


A (A (D)) for any D still ensures  -DP. Thus, post-processing the output of -DP algorithms
    3       1                                                1


does not incur extra loss of privacy.
    A common method for ensuring -DP, which we utilize for -DP veri cation measures, is the
Laplace Mechanism (Dwork, 2006). For any function f : D ! Rd, let (f ) = max D1;D2 jjf (D )  (           )       1


f (D )jj , where (D ; D ) are neighboring databases. This quantity, known as the global sensitivity
        2       1                    1           2


of f , is the maximum L distance of the outputs of the function f between any two neighboring
                                                     1


databases. The Laplace Mechanism is LM(D) = f (D)+ , where  is a d  1 vector of independent
draws from a Laplace distribution with density p(x j ) = (1=(2)) exp( jxj=), where  = (f )=.
    We now present veri cation measures that satisfy -DP and help analysts assess the importance
of regression coecients. We derive the measures for linear regression, as we use these models in
the analysis of wage di erentials by race. To x notation for describing the measures, let D include
all n individuals in the subset of the con dential data that is of interest for analysis. For any
individual i belonging to D, let yi 2 R be the response variable and xi = (1; xi; ; : : : ; xi;p)T 2 Rp
                                                                                      1
                                                                                                                      +1


be a set of predictors, where both are transformed as desired for regression modeling. Hence,
D = f(xi ; yi )gni , where all values are from the con dential data. Let E (yi j xi ) = T xi , where
                            =1

   = ( ; : : : ; p)T 2 Rp .
                0
                                                 +1




3.1 Measures for importance of regression coecients
In many contexts, analysts are interested in whether or not the value of some j exceeds some
threshold, say . For example, users of the SF data (economists, policy makers, lawyers) might
                            0


consider a value of j corresponding to 1% or larger di erential in average pay to be practically
signi cant evidence of wage discrimination. But, they might be less concerned when j corresponds
to a di erential less than 1%. Without loss of generality, assume that we want to determine if
some j < . Corresponding to this decision, we de ne the parameter  = I 1; 0 ( j ), where
                        0                                                         0       (           ]

I 1; 0 ( j ) is an indicator function that equals one when j 2 ( 1; ] and equals zero otherwise.
(               ]                                                             0



                                                                         11
We note that the measure can be used for any interval, for example, of the form [l; u] or (u; 1].
    Because of the large sample sizes in the SF data, con dence intervals for all j of practical
interest, including those for the race dummy variables, are extremely narrow. For these j and
most , the MLE of j e ectively tells the analyst whether  = 1 or  = 0. To formalize this
       0                                                          0          0


notion, let ^jN be the MLE of j based on a sample with N individuals (where N stands for a
generic sample size). We approximate  by using the pseudo-parameter,
                                         0


                                        8
                                        >
                                        <1 if P [ ^jN  ]           ;
                                  N =
                                                           0     1

                                       : 0 if P [ ^N  ] <
                                       >
                                                                     :
                                                   j       0     1



Here, 2 (0; 1) re ects the degree of certainty required by the user before she decides there is
       1


enough evidence to conclude that  = 1. When ^jN is a consistent estimator of j , we can guarantee
                                   0


that limN !1 N =  .0


    Unfortunately, we cannot release ^jN , nor other deterministic functions of D, directly and satisfy
-DP. Instead, we release a noisy version of the key quantity in N , namely r = P ( ^jN  ). We
                                                                                               0


do so using the sub-sample and aggregate method (Nissim et al., 2007). We randomly split D into
M disjoint subsets, D ; : : : ; DM , of size N (with inconsequential di erences when N = n=M is not
                         1


an integer), where M is selected by the user. We discuss the choice of M in Section 5. In each
Dl , where l = 1; : : : ; M , we compute the MLE bjl of j . The (bj ; : : : ; bjM ) can be treated as M
                                                                         1


independent draws from the distribution of ^jN , where N = n=M . Let Wl = I 1; 0 (bjl ). Each Wl
                                                                                 (     ]

is an independent, Bernoulli distributed random variable with parameter r. Thus, inferences for
                                   P
r can be made based on S = M       =1l   Wl . However, we cannot release S directly and satisfy -DP;
instead, we generate a noisy version of S using the Laplace Mechanism with  = 1=, resulting in
S R = S +  . The global sensitivity equals 1, since at most one of the partitions can switch from
zero to one (or vice versa).
    The noisy S R satis es -DP; however, interpreting it directly can be tricky. First, S R is not
guaranteed to lie in (0; M ) nor even to be an integer. Second, alone S R does not provide estimates of
uncertainty about r. We therefore use a post-processing step|which has no bearing on the privacy
properties of S R |to improve interpretation. We nd the posterior distribution of r conditional on
S R and using the noise distribution, which is publicly known. Using simple MCMC techniques, we


                                                  12
estimate the model,

                S R jS  Laplace(S; 1=);   S j r  Binomial(M; r); r  Beta(1; 1):                (4)

Here, we treat S as an unobserved random variable and average over it.
    The veri cation server reports back the posterior distribution of r to the analyst, who can
approximate N for any speci ed simply by nding the amount of posterior mass below .
                                      1                                                              1


Alternatively, analysts can interpret the posterior distribution for r as a crude approximation to
the Bayesian posterior probability,  j  jS R . For instance, if the posterior mode for r equals
                                              0


0:87, we could say that the posterior probability that j < is approximately equal to 0:87. We
                                                                0


caution that this latter interpretation may not be sensible for small sample sizes.

3.2 Measures for longitudinal trends in regression coecients
With longitudinal data, analysts often are interested in how the value of some j changes over
time. For example, in the SF analysis, we want to know whether the racial wage gap is closing or
growing as the years advance. Suppose for a moment that we knew the values of j for all years.
One simple way to characterize the trend in j over time is to break the data into K consecutive
periods and, in each time period, nd the OLS line predicting j from year. The slopes of these
lines pasted together represent a piece-wise approximation to the trend. Of course, we do not know
the values of j ; we must use D to learn about these slopes.
    We use this idea to construct a veri cation measure for longitudinal trends in regression co-
ecients. Speci cally, the analyst begins by selecting K periods of interest. In each period, the
analyst posits some interval for the slope and requests an -DP veri cation of whether the values
of j are consistent with that posited interval. For example, the analyst might split D in K = 2
consecutive intervals, and posit that the slope of j over the years is negative in the rst period
and positive in the second period. In the wage gap analysis, this would correspond to a growing
wage gap in the rst period, followed by a shrinking wage gap in the second period. The analyst
can use the synthetic data to identify the periods of interest and set the intervals for the slopes, as
we illustrate in Section 4.4. E ectively, this evaluates whether the trends in j estimated with the
con dential data match the trends estimated with the synthetic data.

                                                  13
      Formally, suppose that D can be divided into nonempty subsets, fDtgt2T , where Dt denotes all
the data points in D at year t, and T is some period of years under study. Further, suppose that for
every (yit; xit) 2 Dt, E (yitjxit) = Tt xit, where t = ( t; : : : ; pt)T is the vector of coecients at
                                                                     0


time t. Let Tk  T be a subset of years. The analyst seeks to learn the overall trend in the values of
  jt , where t 2 Tk , during that time. To characterize this trend, let m (f(t; jt )gt2T ) be a real-valued
                                                                                                         k


function that returns the slope of the OLS line passing through the points f(t; jt)gt2T . The analyst        k


might be interested in, for example, whether m (f(t; jt)gt2T ) < 0 indicating a decreasing trend,
                                                                             k


m (f(t; jt )gt2T ) > 0 indicating an increasing trend, or more generally, m (f(t; jt )gt2T ) 2 Ck for
                  k                                                                                              k


some interval Ck , e.g., Ck is tight around zero for a at trend. Hence, for any interval Ck , the
analyst seeks to learn  = IC (m (f(t; jt)gt2T )), where IC (m (f(t; jt)gt2T )) is an indicator
                           0           k                    k                    k                   k


function that equals one when m (f(t; jt)gt2T ) 2 Ck and equals zero otherwise.
      Because  is a binary parameter, we can use the methods in Section 3.1 to release an -DP
              0


version of it. Here we outline the procedure; formal details are in the online supplement. We
split D into M partitions of employees. In each Dtl, we compute the MLE bjtl of jt. We let
                                         P
Wl = IC (m (f(t; bjtl )gt2T ) and S = M
        k                      k           l   =1Wl . Following the logic of Section 3.1, we use (4) to get
posterior inferences for r = P [m(f(t; ^jtN )gt2T ) 2 Ck ], where ^jtN is the MLE of jt based on a
                                               t
                                                        k
                                                                                         t



sample with Nt individuals.
      When trends over the entire T are of interest, analysts can partition T into K consecutive
periods, Tk = ftk ; tk + 1; : : : ; tk g, where k = 1; : : : ; K and t < t < : : : < tK . For a given set
                      1    1                                                         0           1


of intervals fCk gKk , the analyst can do the veri cation separately for each interval, and interpret
                      =1

the set of results. Alternatively, the analyst can perform a single veri cation across all intervals,
setting the parameter of interest to  = QKk IC (m (f(t; jt)gt2T )). Here,  equals one when
                                           0        =1           k                           k       0


m (f(t; jt )gt2T ) 2 Ck for every k = 1; : : : ; K , and equals zero otherwise. For example, to examine
whether the trend of jt is decreasing during the rst 9 years and is increasing during the last 15
years, the analyst would set C = ( 1; 0), C = (0; 1), T = f1; : : : ; 9g, and T = f10; : : : ; 24g. If
                                   1                2                    1                           2


the mode of the posterior probability for r equals 0:93, we say that the posterior probability that
  jt decreases during the rst 9 years and increases over the last 15 years approximately equals 0:93.

      When setting Ck to ( 1; 0) or (0; 1), i.e., simply estimating whether the slope of j over Tk is
negative or positive, the posterior modes have predictable behavior. Values are close to one when
the true slope has the sign implied by Ck and is far from zero; values are close to zero when the
                                                            14
true slope has opposite sign and is far from zero; and, values are close to .5 when the true slope
itself is close to zero. This last feature arises when the slopes in the partitions bounce randomly
around zero.
    The analyst who requests a single veri cation for T spends only  of the privacy budget. How-
ever, this analyst only can tell if the whole trend over T in the con dential data matches that in the
synthetic data. In contrast, the analyst who requests K veri cations, one for each Tk , spends K
of the budget. But, this analyst gets ner details of the trend. For this reason, when the privacy
budget allows, we recommend using K > 1 periods for veri cation, as we do in the analysis of the
racial wage gap, to which we now turn.

4 Wage Di erentials in the Federal Government
We now illustrate how synthetic data, veri cation, and a PRDN could be used together to analyze
pay di erentials by race in the federal government. Section 4.1 provides background on estimating
pay di erentials. Section 4.2 introduces our general regression modeling approach for the SF data
analysis. Section 4.3 describes an overall analysis of average di erences in pay across races, pooling
all years of data. Section 4.4 investigates the trends in pay di erentials over time.

4.1 Prior research on pay di erentials
Social scientists have spent decades measuring the race wage gap. Estimates based on data from
the Current Population Survey, the National Longitudinal Survey of Youth, and the Panel Study
of Income Dynamics, among other datasets, put the unconditional black wage gap over the past
thirty years between 16% { 40%. When controlling for individual demographic and job-related
variables, such as education, age, gender, occupation, and industry, estimates put the gap between
0% { 15%, depending upon the precise dataset, controls, and statistical methods used (Altonji
and Blank, 1999; Cancio et al., 1996; Card and Lemieux, 1994; Maxwell, 1994; McCall, 2001; Neal
and Johnson, 2003; O'Neill, 1990). Estimates of the race wage gap have been declining or steady
over the past few decades (Hoover et al., 2015; Sakano, 2002). For example, Altonji and Blank
(1999) estimate that the black wage gap for full time, year-round workers, controlling for education,
experience, region, industry, and occupation remained steady at approximately 6.5% from 1979 to

                                                 15
1995. Other studies controlling for only age, education, and location have found the gap drop from
47% in 1940 to 18% in 2000 (Black et al., 2013).
    While most research on the race wage gap has focused on private sector labor markets, there
is a steady literature measuring it in the public sector (Borjas, 1982, 1983; Kim, 2004; Charles,
2003; McCabe and Stream, 2000; Llorens et al., 2007; Lewis and Nice, 1994), and particularly in
the federal government. Lewis (1998) found that between 1976 and 1986, the conditional race wage
gap for black men declined from 21.0% to 16.7%, but for black women declined only from 29.7%
to 27.9%; for Hispanic men the move was from 17.9% to 13.0%, and for Hispanic women it was
27.9% to 23.3%. Lewis (1998) also found that black men with educations and work experiences
comparable to those for white men encounter a wage gap of 4%. He concluded that minorities made
substantial progress in closing the wage gap between 1975 and 1995, especially at the very senior
levels of the government. More recent work on the U. S. federal government found the race wage
gap, controlling for demographic and agency characteristics, between 1988 and 2007 closed slightly
for blacks from 7.9% to 7.4%, closed for Asians from 1.5% to 0.5%, and closed for Hispanics from
4.5% to 2.8% (Government Accountability Oce, 2009, 57). In the GAO report, the wage gaps
were not broken out separately by sex.

4.2 General modeling approach
We estimate the race wage gap using linear regression techniques (Blau and Kahn, 2017), running
the same models on both the synthetic and con dential SF datasets. The dependent variable is
the natural logarithm of an employee's in ation adjusted basic pay in a given year. Basic pay is
an individual's base salary and excludes any additional pay related to geographic location, award
payments, or other monetary incentives paid out to employees. We exclude any observations with
pay values of 0 or codes indicating the record is invalid, according to the OPM. We use all available
cases (Little and Rubin, 2002) for regression modeling, as we have no reason to think values are
systematically missing.
    The central independent variable is the race with which individual employees identify. Prior
to 2005, employees could choose to identify with 16 categories. The largest ve utilized were
American Indian or Alaska Native, Asian or Paci c Islander, black, Hispanic, and white. The other,
substantially less-utilized categories were Asian Indian, Chinese, Filipino, Guamanian, Hawaiian,
                                                 16
Japanese, Korean, Samoan, Vietnamese, Other Asian/Paci c Islander, and Not Hispanic in Puerto
Rico. We group these categories (save the last) with the Asian or Paci c Islander category and drop
the (very small) category of Not Hispanic in Puerto Rico in accordance with government practice
given the ambiguity in this category (Springer, 2005, footnote 9). After 2005, OPM created a new
combined race and ethnicity variable that enables respondents to select both a race and a Hispanic
ethnicity. Additionally, OPM collapsed the various Asian national categories into a single Asian
category, and separated out Native Hawaiian and/or Other Paci c Islander into its own category.
    To make races comparable across years, we follow OPM's guidance and aggregate the Asian
and Native Hawaiian and/or Other Paci c Islander categories to a single Asian category that is
consistent with the aggregation for the pre-2005 data. Additionally, we code individuals that report
a Hispanic ethnicity as Hispanic and disregard their self-reported race (if they did report one). In
the regressions, we include indicator variables for four racial groups: American Indian/Alaska
Native (AI/AN), Asian, black, and Hispanic. The omitted reference category is white.
    We also include other variables plausibly correlated with race and pay. These include the
employee's age as well as its square, and years of educational attainment after high school. We
include xed e ects for the bureau in which an individual works to account for time-constant
organizational factors that may a ect wages, and over eight hundred indicators for individuals'
occupations to account for di erences in pay structures across occupations. This is the most
disaggregated occupational measure available.
    Previous research on the racial wage gap in the federal government has found substantial dif-
ferences between male and female employees (e.g. Lewis, 1998). We therefore perform analyses
separately by gender.
    There is some question as to how general the occupational information included in regression
analyses of pay disparities should be. On the one hand, if individuals are systematically excluded
from di erent occupations on the basis of race, because of discrimination or some other factor, for
instance, then including information on that occupation may lead to a biased estimate of racial
pay disparities. However, at the same time, there are important di erences across occupations in
terms of pay structures and career advancement for which analysts would like to control (Bolton
and de Figueiredo, 2017). Here, we report results conditional on occupation; the online supplement
includes results that condition only on six broad occupation classi cations.
                                                17
4.3 Overall di erentials
In the overall analysis, each observation is an employee-year. Most individuals are observed for
multiple years, so these observations are not independent. We therefore use robust standard errors
that account for clustering at the employee level (Cameron and Miller, 2015). We also include
indicators for the year in which the observation occurs, thereby accounting for year-level shocks to
wages that are experienced by all employees.
    Mimicking the way analysts would use the integrated system, we start by estimating separate
models for male and female employees using the synthetic data. The results in Table 2 reveal
important relationships between race and pay in the federal government. In particular, according
to the synthetic data results, men who identify as AI/AN, Asian, black, and Hispanic are paid
signi cantly less than comparable white male employees. The same holds for women of all race
categories except black, where the e ect is not distinguishable from zero in terms of both practical
or statistical signi cance. Male (female) employees that identify as AI/AN earn approximately
0.6% (0.9%) less than similarly situated white male (female) employees. The gaps for Asian and
black male employees relative to white male employees appear to be signi cantly larger at 2.8%
and 2.1% percent, respectively. These gaps are noticeably smaller for women of these two race
categories, even non-existent for black female employees. Hispanic men and women take home
about 1.4% less than comparable white employees.
    The analyst next would submit requests for veri cation of these results. For each race coecient
in Table 2, we make a separate veri cation query using the method in (4) with  = 1; hence, the
total privacy loss for both regressions equals 4. We group employees into m = 50 partitions, so that
each employee is a member of only one partition. Thus, in the language of -DP, the neighboring
databases di er in one employee, as opposed to one employee-year observation. The former is
more sensible for veri cations of the overall regression. A data snooper with knowledge of all
but one employee-year observation could gure out many, if not all, of the values for the missing
observation by logical deduction, e.g., easily inferring the age of the missing year and bounding
the salary between the previous and successive years. We set the threshold = :01, and target
                                                                              0


queries at whether j < :01 or not.
    As evident in Table 2, the posterior modes of the veri cation measure clearly indicate that the

                                                18
                               Males' Regression                      Females' Regression
  Variable               Synthetic r^ Con dential                Synthetic r^ Con dential
  AI/AN                    -.006 (4) .76       -.019 (12)          -.009 (7) .97 -.027 (19)
  Asian                  -.028 (30) .99        -.040 (43)        -.011 (13) .42 -.010 (11)
  Black                  -.021 (39) .99        -.036 (61)      .00013 (.3) .003 -.003 (8)
  Hispanic               -.014 (22) .99        -.029 (42)        -.013 (19) .99 -.021 (30)
  Age                   .033 (365)            .043 (480)        .023 (286)            .032 (404)
  Age Sq.           -.00027 (269)          -.00036 (352) -.00019 (205)              -.00027 (295)
  Education             .013 (122)            .021 (180)        .014 (130)            .023 (198)
  Employee-years 13,008,298                   12,720,500       12,263,514             11,874,048
  Employees              1,446,499              1,430,238        1,390,611             1,348,381
Table 2: Coecients from overall regression models and posterior modes r^ of veri cation measures.
AI/AN stands for American Indian and Alaska Native, and Asian includes individuals that identify
as Native Hawaiian or Paci c Islander. Absolute values of t-statistics are in parentheses. Disparities
in sample sizes arise from deletions of cases with missing values in the con dential data analyses.

wage gaps for male employees who are black, Asian, and Hispanic are all at least 1%. The evidence
of at least a 1% wage gap for AI/AN men is less obvious but still suggestive, with a posterior mode
around .75. Thus, the veri cation measures validate the ndings from the synthetic data regressions
of substantial racial wage gaps for black male, Asian male, and Hispanic male employees, and they
suggest the synthetic data results for AI/AN male employees are close to accurate as -.006 is not far
from -0.01. For women, the posterior models of the veri cation measure clearly indicate at least 1%
wage gaps for Hispanic and AI/AN employees. They also provide strong evidence against a wage
gap of at least 1% for female black employees, with a posterior mode near zero. For female Asian
employees the veri cation measure suggests the wage gap could be almost equally likely above or
below 1%, as the posterior mode equals .42. This suggests that the true coecient is likely near
-0.01. Thus, the veri cation measures validate the ndings from the synthetic data that the wage
gap for Hispanic female employees is at least 1%, but that there is not a substantial wage gap
for black female employees. They also suggest that the estimate for AI/AN (-.009) could be an
underestimate, since the veri cation measures suggest that the true coecient is indeed less than
-.01. Finally, they suggest that the synthetic data coecient for female Asian employees is likely
accurate, since it is close to -.01.
    We expect that some users might be satis ed with this level of veri cation, and thus can publish
the synthetic data results plus the veri cation answers. However, others may want to perform the

                                                 19
analysis on the con dential data via the remote access component of the system. As shown in
Table 2, in the con dential data regression the estimated coecients for all four race indicators are
negative and statistically signi cant for both genders, suggesting that non-white employees earn less
than white employees. The estimated gaps for men are at least 1.9% across races, with particularly
large gaps for black men (3.6%) and Asian men (4.0%). For women, AI/AN, Asian, and Hispanic
employees earn 2.7%, 1.0%, and 2.1% less than comparable white female workers. Strikingly, the
coecient estimate for black women is essentially zero, suggesting parity with similarly situated
white women. The wage gaps for black women and Asian women are substantially smaller than for
men of those race categories.
    The e ect sizes from the con dential data are fairly similar to those from the synthetic data.
This is in accord with the conclusions from the veri cation measure. The most practically relevant
di erence in the synthetic and con dential data results exists for employees that identify as AI/AN:
the synthetic data show gaps of less than 1% whereas the con dential data show gaps of at least
1.9%. This group of employees is the smallest racial group in the federal government, making it
challenging to create accurate synthetic data for them.

4.4 Year-by-year results
We next turn to year-by-year estimates of pay gaps in order to examine potential trends over time.
We estimate the same models used in Table 2, except run on each year of data separately. As
before, we start with the synthetic data. The synthetic data results in Figure 1 suggest that the
wage gap for men has shrunk steadily over the period of the study in all race groups but black
males. For black males, the estimated gap appears to be relatively stable throughout the time
period. By 2011 in the synthetic data, the wage gap appears to have disappeared for AI/AN and
Hispanic men, and reduced to around -1% for Asian men.
    For female employees, the story from the synthetic data is more complicated. Figure 2 suggests
that AI/AN, Asian, and Hispanic women all had declining wages relative to white women until the
early 2000s, when the trend largely reversed, with all three groups making progress toward parity.
Indeed, the synthetic results indicate that AI/AN women actually earned more than comparable
white women after 2006. For black women, the synthetic data estimates of the wage gap change
only slightly, from 0.1% in 1988 to -0.2% in 2011, suggesting negligible wage gaps at any time point
                                                 20
                                       American Indian/Alaska Native Males (S)                                                         American Indian/Alaska Native Males (A)

                        0.02
Estimated Coefficient




                                                                                                Estimated Coefficient

                                                                                                                        ‚àí0.02
                        ‚àí0.01




                                                                                                                        ‚àí0.06
                        ‚àí0.04




                                1990   1995               2000               2005       2010                                    1990   1995               2000               2005   2010

                                                        Year                                                                                            Year



                                                   Asian Males (S)                                                                                Asian Males (A)
                        0.02
Estimated Coefficient




                                                                                                Estimated Coefficient

                                                                                                                        ‚àí0.02
                        ‚àí0.01




                                                                                                                        ‚àí0.06
                        ‚àí0.04




                                1990   1995               2000               2005       2010                                    1990   1995               2000               2005   2010

                                                        Year                                                                                            Year



                                                   Black Males (S)                                                                                 Black Males (A)
                        0.02
Estimated Coefficient




                                                                                                Estimated Coefficient

                                                                                                                        ‚àí0.02
                        ‚àí0.01




                                                                                                                        ‚àí0.06
                        ‚àí0.04




                                1990   1995               2000               2005       2010                                    1990   1995               2000               2005   2010

                                                        Year                                                                                            Year



                                                 Hispanic Males (S)                                                                              Hispanic Males (A)
                        0.02
Estimated Coefficient




                                                                                                Estimated Coefficient

                                                                                                                        ‚àí0.02
                        ‚àí0.01




                                                                                                                        ‚àí0.06
                        ‚àí0.04




                                1990   1995               2000               2005       2010                                    1990   1995               2000               2005   2010

                                                        Year                                                                                            Year




Figure 1: Estimated racial wage gaps (coecients of race indicators) for yearly males' regressions
in synthetic data (left) and con dential, authentic data (right).
in time during the study.
    To verify these trends, we estimate the longitudinal measure described in Section 3.2. Looking
at Figure 1 for male employees, analysts might consider two sets of time periods fTk g. The rst
is an overall trend, setting K = 1 and T = T for all races. The second uses K = 2 periods, with
                                                                                    1


a bifurcation at a year where the pattern deviates most noticeably. These are the years 2003 for
AI/AN men, 2002 for Asian men, 1998 for black men, and 1997 for Hispanic men. We do the
same for female employees, using Figure 2 to identify bifurcations at 1998 for AI/AN women, and
at 2000 for all other female employees. We set each Ck to indicate whether the slope is positive
(Ck = [0; 1]) or negative (Ck = [ 1; 0]). Of course, one could examine other time periods and
intervals. For each veri cation, we use  = 1 and M = 50 partitions, ensuring that each employee
appears only once in each partition.
    Table 3 displays the posterior modes of the veri cation measures for the two sets of periods.
For men, the posterior modes are all at least 0.7 for all time periods and all races, with most

                                                                                               21
                                       American Indian/Alaska Native Females (S)                                                          American Indian/Alaska Native Females (A)

                        0.02
Estimated Coefficient




                                                                                             Estimated Coefficient

                                                                                                                     0.00
                        0.00




                                                                                                                     ‚àí0.04 ‚àí0.02
                        ‚àí0.02




                                1990    1995               2000               2005   2010                                          1990     1995              2000               2005   2010

                                                         Year                                                                                               Year



                                                  Asian Females (S)                                                                                  Asian Females (A)
                        0.02
Estimated Coefficient




                                                                                             Estimated Coefficient

                                                                                                                     0.00
                        0.00




                                                                                                                     ‚àí0.04 ‚àí0.02
                        ‚àí0.02




                                1990    1995               2000               2005   2010                                          1990     1995              2000               2005   2010

                                                         Year                                                                                               Year



                                                  Black Females (S)                                                                                  Black Females (A)
                        0.02
Estimated Coefficient




                                                                                             Estimated Coefficient

                                                                                                                     0.00
                        0.00




                                                                                                                     ‚àí0.04 ‚àí0.02
                        ‚àí0.02




                                1990    1995               2000               2005   2010                                          1990     1995              2000               2005   2010

                                                         Year                                                                                               Year



                                                 Hispanic Females (S)                                                                               Hispanic Females (A)
                        0.02
Estimated Coefficient




                                                                                             Estimated Coefficient

                                                                                                                     0.00
                        0.00




                                                                                                                     ‚àí0.04 ‚àí0.02
                        ‚àí0.02




                                1990    1995               2000               2005   2010                                          1990     1995              2000               2005   2010

                                                         Year                                                                                               Year




Figure 2: Estimated racial wage gaps (coecients of race indicators) for yearly females' regressions
in synthetic data (left) and con dential, authentic data (right).
above 0.9. This indicates that the trends in the synthetic data coecients accord well with the
trends in the con dential data regressions for these two sets of periods. For women, however, the
veri cation results give reason to doubt some of the trends in the synthetic data regressions. For
AI/AN women, we see strong agreement in the overall trend over all years and the trend from
1998 onward, but some uncertainty about the trend between 1998 and 2008. Veri cation values
around .50 are consistent with a nearly at trend in the con dential data coecients, which is
also the trend in the synthetic data. For Asian women, we see strong agreement in the synthetic
and con dential regression trends over 1998 to 2011, modest agreement from 1988 to 2000, and
poor agreement over the whole period. The synthetic data trend suggests the wage gap for Asian
women in 2011 is nearly the same value as in 1988; however, the veri cation measures suggest
that is not the case. For black women, the veri cation results con rm that the wage gap increased
over the 24 years as a whole, and in particular between 1988 and 1998. However, the trend in the
synthetic data coecients|which suggests black women actually caught up to white women|is

                                                                                            22
                                         Males                Females
                     Coecient Interval r^                 Interval r^
                     AI/AN         1988 - 2011 .94 1988 - 2011 .94
                                   1988 - 2003 .82 1988 - 1998 .60
                                   2003 - 2011 .91 1998 - 2011 .98
                     Asian         1988 - 2011 .99 1988 - 2011 .33
                                   1988 - 2002 .89 1988 - 2000 .72
                                   2002 - 2011 .96 1998 - 2011 .98
                     Black         1988 - 2011 .89 1988 - 2011 .99
                                   1988 - 1998 .74 1988 - 2000 .98
                                   1998 - 2011 .71 2000 - 2011 .14
                     Hispanic 1988 - 2011 .99 1988 - 2011 .55
                                   1988 - 1997 .85 1988 - 2000 .74
                                   1997 - 2011 .99 2000 - 2011 .97
Table 3: Posterior modes r^ of veri cation measures for year-by-year trends. AI/AN stands for
American Indian and Alaska Native, and Asian includes individuals that identify as Native Hawaiian
or Paci c Islander.

not accurate. With a posterior mean of .14, we clearly should not trust the trend for black women
in the synthetic data after 1998. For Hispanic women, we see strong agreement in the synthetic
and con dential regression trends after 2000, and modest agreement from 1988 to 2000. Between
1998 and 2011, however, the veri cation measure is close to 0.5, suggesting that the trend line from
the con dential data is nearly at for Hispanic women.
    Turning to the results on the con dential data, Figures 1 and 2 show that the race wage gap has
been shrinking for all groups except black female employees. In the con dential data, we estimate
a signi cant decline in the position of black women relative to white women in the federal service
during the time period of our study. In 1988, we estimate that black women earned 0.3% more
than similar white counterparts. By 2011, black women were earning approximately 1.4% less than
white women with similar demographics and occupations.
    The trends observed in the synthetic dataset are largely mirrored in the con dential data,
with the exception of black female employees. This was apparent in the veri cation measures, as
well, which highlighted the mismatch in the trends for black women after 2000. In both analyses,
however, it is clear that black women have not experienced the gains that women identifying with
other races have relative to white women. In general, estimated coecients from the synthetic data
analyses tend to be smaller in magnitude than those from the con dential data analyses. There

                                                23
are some sign discrepancies for the estimated coecients as well. For instance, in the synthetic
results, Hispanic males are estimated to have higher levels of pay relative to comparable white men
in the nal years of the analysis. However, the coecient estimates from the con dential data for
Hispanic males never exceed zero.

5 Concluding Remarks
The integrated system is based on synthetic data plus veri cation, coupled with access to the
con dential data via a PRDN. It seems natural to ask, why bother releasing record-level data at
all? Why not only allow users to query a system for disclosure-protected outputs of analyses?
This perspective is evident in some literature on di erential privacy (e.g., Dwork et al., 2009;
Ullman and Vadhan, 2011), although it is feasible in some settings to generate synthetic data
that satisfy, at least approximately, some variant of di erential privacy (e.g., Barak et al., 2007;
Abowd and Vilhuber, 2008; Blum et al., 2008; Machanavajjhala et al., 2008; Charest, 2010; Hardt
et al., 2012; Mir et al., 2013; Karwa and Slavkovic, 2015). We believe that releasing some form of
record-level data has enormous bene ts. Record-level data provide readily accessible testbeds for
methodological researchers to evaluate their latest techniques. They help students and trainees,
who may not be able to gain approval to use a PRDN or other secure data enclave, learn the skills
of data analysis. Even for experienced researchers, large-scale data can be dicult to \get your
head around" because of complexities and structural subtleties that are dicult to learn without
seeing the data. Researchers often do not know in advance which are the right questions to ask
of the data or the best modeling choices for addressing those questions. As noted by Karr and
Reiter (2014), exploratory analyses dealing with the data themselves are a fruitful path to the right
questions.
    The key to the integrated system is the di erentially private veri cation measures, which are
based on binary variables computed on sub-samples of the con dential data. This is a generic
method that can be adapted to handle many types of comparisons, making it a exible strategy
for veri cation. For some analyses and datasets, however, the partitioning process can result in
inestimable regressions. For example, the random sub-sampling may result in partitions that have
perfect co-linearities or dummy variables with all values equal to zero. Many software packages

                                                 24
automatically drop such variables and report coecients from the remaining variables, making it
still possible to compute the measures although complicating interpretations of the results. When
errors make it impossible to obtain results, we suggest adapting the binary measure by adding a
third category of counts corresponding to the number of errors. Here, the outputs of the measure
include the number of ones, zeros, and errors. We can protect these counts using the Laplace
Mechanism, and report posterior modes of the number of errors and the fraction of ones among
cases without errors. In the wage gap analyses, tting errors did not occur due to the large sample
sizes.
     The choice of the number of partitions is up to the data analyst; we used M = 50 in the
OPM analyses. Analysts should strive to make M as large as possible to minimize the impact of
the Laplace noise on the veri cation counts. On the other hand, users should allow r to be as
close to one (or zero) as possible, as these values are easiest to interpret. Making M too large
  attens the distribution of the MLEs in the partitions, thereby moving r toward 0.5 and more
uncertain veri cation decisions. We found that M = 50 gave a satisfactory trade o in the OPM
data. Analysts can experiment with the synthetic data to nd a suitable M for their sample size.
Another possibility is to spend some of the privacy budget on selecting an optimal M from a
discrete set of choices, according to some loss function that depends on M and r. Developing such
measures is an area for future research.
     An advantage of -DP is that one can quantify the leakage from each additional release. If one
follows -DP strictly, at some point the total privacy budget allowed by the owner of the data will
be exhausted, at which point no new analysis results may be released. With a nite budget, one
has to decide who gets access to the system and in what order. These raise complicated issues of
fairness and evaluation of the importance of analyses, which have yet to be addressed in production
settings. Clearly these are opportunities for research.
     Finally, we conclude by noting that we are developing a veri cation server and associated R
package that implements the veri cation measures from Section 3. The package also o ers methods
for generating di erentially private plots of residuals versus predicted values for regressions, thereby
helping users assess the reasonableness of the assumptions of a posited model when applied on the
con dential data (Chen et al., 2017). The server keeps track of the total  used and ensures that the
system returns the same noisy answer whenever it is asked for veri cation of the same query. This
                                                  25
package will be available on CRAN, so that data stewards and other researchers can experiment
with and further develop this framework for providing access to con dential social science data.

References
Abowd, J., Stinson, M., and Benedetto, G. (2006). Final report to the Social Security Administra-
 tion on the SIPP/SSA/IRS Public Use File Project. Tech. rep., U.S. Census Bureau Longitudinal
 Employer-Household Dynamics Program. Available at http://www.census.gov/sipp/synth_
 data.html.

Abowd, J. and Vilhuber, L. (2008). How protective are synthetic data? In J. Domingo-Ferrer and
 Y. Saygun, eds., Privacy in Statistical Databases, 239{246. New York: Springer-Verlag.
Altonji, J. G. and Blank, R. M. (1999). Race and gender in the labor market. Handbook of Labor
  Economics 3, 48, 3143{3259.

Barak, B., Chaudhuri, K., Dwork, C., Kale, S., McSherry, F., and Talwar, K. (2007). Privacy,
  accuracy, and consistency too: a holistic solution to contingency table release. Proceedings of the
  27th ACM SIGMOD International Conference on Management of Data / Principles of Database
  Systems   .
Black, D. A., Kolesnikova, N., Sanders, S. G., and Taylor, L. J. (2013). The role of location in
  evaluating racial wage disparity. IZA Journal of Labor Economics 2, 2.
Blau, F. D. and Kahn, L. M. (2017). The gender wage gap: extent, trends, and expectations.
  Journal of Economic Literature forthcoming.

Blum, A., Ligett, K., and Roth, A. (2008). A learning theory approach to non-interactive database
  privacy. Proceedings of the 40th ACM SIGACT Symposium on Thoery of Computing .
Bolton, A. and de Figueiredo, J. M. (2016). Why have federal wages risen so rapidly? Tech. rep.,
  Duke University Law School.
Bolton, A. and de Figueiredo, J. M. (2017). Meausuring and explaining the gender wage gap in the
  U. S. federal government. Tech. rep., Duke University Law School.
                                                 26
Bolton, A., de Figueiredo, J. M., and Lewis, D. E. (2016). Elections, ideology, and turnover in
  the U.S. federal government. Tech. rep., National Bureau of Economics Research Working Paper
  22932.
Borjas, G. J. (1980). Wage determination in the federal government: The role of constituents and
  bureaucrats. The Journal of Political Economy 88, 1110{1147.
Borjas, G. J. (1982). The politics of employment discrimination in the federal bureaucracy. Journal
  of Law and Economics 25, 2, 271{299.

Borjas, G. J. (1983). The measurement of race and gender wage di erentials: Evidence from the
  federal sector. ILR Review 37, 1, 79{91.
Callier, V. (2015). How fake data could protect real people's privacy. The Atlantic July 30.
Cameron, A. C. and Miller, D. L. (2015). A practitioner's guide to cluster-robust inference. Journal
  of Human Resources 50, 317{373.

Cancio, A. S., Evans, T. D., and Maume, D. J. J. (1996). Reconsidering the declining signi cance
  of race: Racial di erences in early career wages. American Sociological Review 61, 4, 541{556.
Card, D. and Lemieux, T. (1994). Changing wage structure and black-white wage di erentials.
  American Economic Review 84, 2, 29{33.

Charest, A. S. (2010). How can we analyze di erentially private synthetic datasets.       Journal of
 Privacy and Con dentiality 2:2, Article 3.

Charles, J. (2003). Diversity management: An exploratory assessment of minority group represen-
 tation in state government. Public Personnel Management 32, 4, 561{577.
Chen, Y., Machanavajjhala, A., Reiter, J. P., and Barrientos, A. F. (2017). Di erentially private
 regression diagnostics. In Proceedings IEEE International Conference on Data Mining, 81{90.
 ICDM.
Drechsler, J. (2011).   Synthetic Datasets for Statistical Disclosure Control.   New York: Springer-
  Verlag.

                                                  27
Drechsler, J., Dundler, A., Bender, S., Rassler, S., and Zwick, T. (2008). A new approach for
  disclosure control in the IAB Establishment Panel{Multiple imputation for a better data access.
  Advances in Statistical Analysis 92, 439 { 458.

Dwork, C. (2006). Di erential privacy. In 33rd International Colloquium on Automata, Languages,
 and Programming, part II, 1{12. Berlin: Springer.

Dwork, C., Naor, M., Reingold, O., Rothblum, G., and Vadhan, S. (2009). When and how can
 privacy-preserving data release be done eciently? In Proceedings of the 41st ACM Symposium
 on Theory of Computing (STOC), 381{390.

Fienberg, S. E. (1994). A radical proposal for the provision of micro-data samples and the preser-
  vation of con dentiality. Tech. rep., Department of Statistics, Carnegie-Mellon University.
Government Accountability Oce (2009). Gender pay gap in the federal workforce narrows as
 di erences in occupation, education, and experience diminish. Tech. rep., Government Account-
 ability Oce, Washington, DC.
Hardt, M., Ligett, K., and McSherry, F. (2012). A simple and practical algorithm for di erentially
  private data release. Advances in Neural Information Processing Systems 25, 2348{2356.
Hawala, S. (2008). Producing partially synthetic data to avoid disclosure. In Proceedings of the
  Joint Statistical Meetings. Alexandria, VA: American Statistical Association.

Hoover, G. A., Compton, R. A., and Giedeman, D. C. (2015). The impact of economic freedom
 on the black/white income gap. American Economic Review: Papers & Proceedings 105, 5,
 587{592.
Karr, A. F. and Reiter, J. P. (2014). Using statistics to protect privacy. In J. Lane, V. Stodden,
 S. Bender, and H. Nissenbaum, eds., Privacy, Big Data, and the Public Good: Frameworks for
 Engagement, 276{295. Cambridge University Press.

Karwa, V. and Slavkovic, A. S. (2015). Inference using noisy degrees: Di erentially private -model
 and synthetic graphs. Annals of Statistics 44, 87{112.


                                               28
Kim, C.-K. (2004). Women and minorities in state government agencies.        Public Personnel Man-
  agement 33, 2, 165{180.

Kinney, S. K., Reiter, J. P., Reznek, A. P., Miranda, J., Jarmin, R. S., and Abowd, J. M. (2011). To-
  wards unrestricted public use business microdata: The synthetic Longitudinal Business Database.
  International Statistical Review 79, 363{384.

Lewis, G. B. (1998). Continuing progress toward racial and gender pay equality in the federal
  service: An update. Review of Public Personnel Administration 18, 2, 23{40.
Lewis, G. B. and Durst, S. L. (1995). Will locality pay solve recruitment and retention problems
  in the federal civil service? Public Administration Review 55, 371{380.
Lewis, G. B. and Nice, D. (1994). Race, sex, and occupational segregation in state and local
  governments. American Review of Public Administration 24, 4, 393{410.
Little, R. J. A. (1993). Statistical analysis of masked data. Journal of Ocial Statistics 9, 407{426.
Little, R. J. A. and Rubin, D. B. (2002).   Statistical Analysis with Missing Data: Second Edition.
  New York: John Wiley & Sons.
Llorens, J. J., Wenger, J. B., and Kellough, J. E. (2007). Choosing public sector employment: The
  impact of wages on the representation of women and minorities in state bureaucracies. Journal
  of Public Administration Research and Theory 18, 3, 397{413.

Machanavajjhala, A., Kifer, D., Abowd, J., Gehrke, J., and Vilhuber, L. (2008). Privacy: Theory
 meets practice on the map. In IEEE 24th International Conference on Data Engineering, 277{
 286.
Maxwell, N. L. (1994). The e ect of black-white wage di erences of di erences in the quantity and
 quality of education. Industrial and Labor Relations Review 47, 2, 249{264.
McCabe, B. C. and Stream, C. (2000). Diversity by the numbers: Changes in state and local
 government workforces, 1980-1995. Public Personnel Management 29, 1, 93{106.
McCall, L. (2001). Sources of racial wage inequality in metropolitan labor markets: Racial, ethnic,
 and gender di erences. American Sociological Review 66, 4, 520{541.
                                                 29
McClure, D. and Reiter, J. P. (2012). Towards providing automated feedback on the quality of
 inferences from synthetic datasets. Journal of Privacy and Con dentiality 4:1, Article 8.
Mir, D., Isaacman, S., Caceres, R., Martonosi, M., and Wright, R. N. (2013). DP{WHERE:
 Di erentially private modeling of human mobility. In Proceedings of the IEEE Conference on
 Big Data, 580{588.

Narayanan, A. and Shmatikov, V. (2008). Robust de-anonymization of large sparse datasets. In
  IEEE Symposium on Security and Privacy (SP).

Neal, D. and Johnson, W. R. (2003). The role of pre-market factors in black-white wage di erences.
  Journal of Political Economy 87, 3, 567{594.

Nissim, K., Raskhodnikova, S., and Smith, A. (2007). Smooth sensitivity and sampling in private
  data analysis. In Proceedings of the thirty-ninth annual ACM symposium on Theory of computing,
  75{84. ACM.
O'Neill, J. (1990). The role of human capital in earnings di erences between black and white men.
  Journal of Economic Perspectives 108, 937{975.

Parry, M. (2011). Harvard researchers accused of breaching students' privacy.     The Chronicle of
  Higher Education .

Raghunathan, T. E., Reiter, J. P., and Rubin, D. B. (2003). Multiple imputation for statistical
  disclosure limitation. Journal of Ocial Statistics 19, 1{16.
Reiter, J. P. (2005a). Releasing multiply-imputed, synthetic public use microdata: An illustration
  and empirical study. Journal of the Royal Statistical Society, Series A 168, 185{205.
Reiter, J. P. (2005b). Using CART to generate partially synthetic, public use microdata. Journal
  of Ocial Statistics 21, 441{462.

Reiter, J. P., Oganian, A., and Karr, A. F. (2009). Veri cation servers: Enabling analysts to assess
  the quality of inferences from public use data. Computational Statistics and Data Analysis 53,
  1475{1482.

                                                30
Reiter, J. P. and Raghunathan, T. E. (2007). The multiple adaptations of multiple imputation.
  Journal of the American Statistical Association 102, 1462{1471.

Rubin, D. B. (1993). Discussion: Statistical disclosure limitation. Journal of Ocial Statistics 9,
 462{468.
Sakano, R. (2002). Are black and white income distributions converging? time series analysis.
  Review of Black Political Economy 30, 1, 91{106.

Springer, L. M. (2005). Memorandum for chief human capital ocers. Oce of Personnel Manage-
  ment, 11/09/05.
Sweeney, L. (1997). Weaving technology and policy together to maintain con dentiality.     Journal
  of Law, Medicine, & Ethics 25, 98{110.

Sweeney, L. (2013). Matching known patients to health records in Washington state data. Tech.
  rep., Data Privacy Lab, Harvard University.
Ullman, J. and Vadhan, S. P. (2011). PCPs and the hardness of generating private synthetic data.
  In Proceedings of the 8th Theory of Cryptography Conference (TCC), 400{416.




                                                31
