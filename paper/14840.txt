                                NBER WORKING PAPER SERIES




              DECENTRALIZED MATCHING WITH ALIGNED PREFERENCES

                                           Muriel Niederle
                                            Leeat Yariv

                                        Working Paper 14840
                                http://www.nber.org/papers/w14840


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                      April 2009




We are grateful to Attila Ambrus, Federico Echenique, Guillaume Haeringer, Fuhito Kojima, and Al
Roth for many useful conversations and suggestions. This work is supported by NSF and the Sloan
Foundation. The views expressed herein are those of the author(s) and do not necessarily reflect the
views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2009 by Muriel Niederle and Leeat Yariv. All rights reserved. Short sections of text, not to exceed
two paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.
Decentralized Matching with Aligned Preferences
Muriel Niederle and Leeat Yariv
NBER Working Paper No. 14840
April 2009
JEL No. C78

                                            ABSTRACT

We study a simple model of a decentralized market game in which firms make directed offers to workers.
We focus on markets in which agents have aligned preferences. When agents have complete information
or when there are no frictions in the economy, there exists an equilibrium that yields the stable match.
In the presence of market frictions and preference uncertainty, harsher assumptions on the richness
of the economy have to be made in order for decentralized markets to generate stable outcomes in
equilibrium.


Muriel Niederle
Department of Economics
579 Serra Mall
Stanford University
Stanford, CA 94305-6072
and NBER
niederle@stanford.edu

Leeat Yariv
Division of Humanities & Social Sciences, Caltech
1200 E. California Blvd
Pasadena, CA 91125
lyariv@hss.caltech.edu
                     Decentralized Matching with Aligned Preferences                                        1

                                          1.    Introduction

1.1 Overview

       The theoretical literature on two sided matching markets has focused predominantly on the
analysis of outcomes generated in centralized markets. There are many examples in which two
sided matching markets are centralized (e.g., the medical residency match, school allocations,
the U.S. market for reform rabbis, etc.). Nonetheless, many markets are not fully centralized
(for instance, college admissions in the U.S., the market for law clerks, junior economists,
and so on). Furthermore, almost all centralized markets are preceded by decentralized oppor-
tunities for participants to match. Understanding the outcomes generated by decentralized
markets is therefore important to the design of institutions, both fully decentralized ones, as
well as ones followed by centralized procedures.1 The current paper o¤ers a …rst step in that
direction.
       The key feature of centralized clearinghouses that empirically predicts their continued use
in a market is whether they produce a stable outcome.2 From a theoretical perspective, the
set of stable outcomes coincides with the core in environments such as the ones we study.
The assumption that markets achieve the core is, in fact, utilized in empirical work that
uses stability constraints to deduce market participants’characteristics.3 Our results provide
conditions under which a (non-cooperative) decentralized market game yields a core outcome,
and the econometric identifying assumption of stability is likely to hold. When the structure
of the economy does not guarantee existence of a stable outcome, there may be room for
market design if stability is taken as a goal.4
       We study a simple model of a decentralized market game in which …rms make directed
   1
     See Roth (1984, 2008). For the recent literature on di¤erences in outcomes between centralized clearing-
houses and decentralized markets see Frechette, Roth, and Unver (2007) and Niederle and Roth (2003). They
also show that the consequences of a decentralized matching process prior to a centralized match can be large,
as documented by the collapse of the market for gastroentorology fellows. On rare occasions, decentralized
bargaining prior to the centralized match is prohibited by design, such as in some residency matches in the
UK (Roth, 1991).
   2
     A stable match is a pairing of workers and …rms (where some workers and some …rms may be left alone),
in which no …rm (worker) who is matched to a worker (…rm), prefers to be alone, and no …rm and worker pair
prefer to jointly deviate by matching to one another. For empirical evidence on the importance of stability
for a centralized clearinghouse see Roth (1991).
   3
     See, e.g., Hitsch, Hortacsu, and Ariely (2006), Sorensen (2007) and Lee (2009).
   4
     This includes the introduction of a centralized clearinghouse (Roth, 1984) or e¤orts to ease information
transmission in the presence of signi…cant frictions and congestion (Coles and Niederle, 2009).
                  Decentralized Matching with Aligned Preferences                              2

o¤ers to workers. In our setup, a market game is identi…ed by three components: the preference
distribution of agents (workers and …rms), the information agents have about their own and
others’realized preferences, and the extent of frictions in the economy.
   In more detail, we focus on markets in which …rms can employ up to one worker, who can
work for at most one …rm. We assume that a match with any agent is preferred to remaining
unmatched. We consider environments in which there is a unique stable match. This allows
us to sidestep coordination problems. Furthermore, we concentrate on a special class of
preferences that guarantee uniqueness of the stable match that we term aligned preferences.
Aligned preferences require that the preferences of …rms and workers can be represented by a
joint ordinal potential. Alignment implies that there is always a …rm-worker pair that are each
other’s …rst choice. Many prominent cases studied in the literature entail aligned preferences.
For instance, alignment is guaranteed whenever …rms and workers generate revenue they
split in …xed proportions, or when all participants on one side of the market share the same
preference ranking of the other side’s participants (that can have arbitrary preferences).
   In our decentralized market game, in every period, each …rm can make up to one o¤er to
a worker of her choice if she does not already have an o¤er held by a worker in the market.
Workers can accept, reject, or hold on to an o¤er, in which case it is available also in the next
period. Firms and workers share a common discount factor, and receive their match utilities
as soon as they are matched (by having an o¤er accepted), or leave the market. This allows
us to study the e¤ect of frictions through discounting.
   We study two cases of information agents have about their own and each others’prefer-
ences: (a) complete information in which all market participants are fully informed of the
realized match utilities; (b) private information in which each agent is fully informed only of
her own match utilities. While the extant literature has mostly focused on complete informa-
tion environments (see below), we …nd the case of private information particularly important
from an empirical point of view.
   Throughout our analysis, we concentrate on equilibria in weakly undominated strategies.
   Under complete information, all agents can compute the stable match and we show that
the stable match is an equilibrium outcome in the market game we analyze. Still, there may
be equilibria that yield unstable matches, highlighting a …rst contrast with …ndings from the
                     Decentralized Matching with Aligned Preferences                                       3

case in which agents use a centralized market, where all equilibria in weakly undominated
strategies yield the stable match. Nonetheless, simple re…nements (namely, iterated elimina-
tion of weakly dominated strategies) restore uniqueness of the stable match as an equilibrium
outcome.5
       When information is private, in a frictionless economy, stable matches may still be imple-
mented as an equilibrium outcome. Underlying this result is the idea that …rms and workers
can replicate, in essence, the …rm proposing Gale-Shapley deferred acceptance algorithm (Gale
and Shapley, 1962) as part of an equilibrium pro…le: …rms make o¤ers to workers in order
of their preferences, and workers accept o¤ers when they are made by their most preferred
…rms. The fact that aligned preferences assure there is always a …rm-worker pair that are each
others’…rst choice guarantees that at least one …rm and worker are matched in every period.
In particular, such a strategy pro…le leads to a market match in …nite time.
       However, as soon as there are frictions in the market, agents may have incentives to deviate
from these strategies to speed up the matching process, or a¤ect market participants’learning
regarding their expected stable matches. Our analysis then follows two steps. First, ignoring
incentive compatibility constraints, we characterize the class of strategy pro…les that generate
stable outcomes. Second, we identify economies under which at least one of these (possibly
mixed) pro…les is incentive compatible. The message that emerges is that when the economy is
su¢ ciently rich in terms of possible market realizations, there is a Bayesian Nash equilibrium
that implements the unique stable match.

1.2 Related Literature

       There are several recent theoretical advances that inspect market outcomes as consequences
of a dynamic interaction. Haeringer and Wooders (2009) and Pais (2008) consider the case of
complete information, and restrict …rms’strategies in that they cannot make o¤ers to workers
who had rejected them previously. Haeringer and Wooders (2009) study a game similar to ours
in which …rms can only make exploding o¤ers (that have to be accepted or rejected right away).
In Pais (2008) one …rm is chosen randomly each period to make an o¤er. She characterizes
the set of (ordinal) subgame perfect equilibria and shows that outcome multiplicity may arise
   5
    This is in line with laboratory observations of decentralized markets with complete information, in which
stability frequently achieved, see Echenique, Katz, and Yariv (2009) and Niederle and Roth (2009).
                     Decentralized Matching with Aligned Preferences                                        4

even when the underlying market has a unique stable match.6,7
       Our setup bears some similarity to that considered in the search literature on matching
(e.g., Burdett and Coles, 1997, Eeckhout, 1999, and Shimer and Smith, 2000). There, each
period, workers and …rms randomly encounter each other, observe the resulting match utilities,
and decide jointly whether to pursue the match and leave the market or to separate and wait
for future periods. As in our setting, equilibrium outcomes depend on the distribution of
match utilities. Unlike our setting, the perceived distribution of potential partners does not
change with time, and each side of the market solves an option value problem.
       Regarding our assumptions, alignment is reminiscent of some identi…ed su¢ cient conditions
for uniqueness of a stable match (Clark, 2006 and Eeckhout, 2000).

                                            2.   The Model

2.1 The Economy

    A market is a triplet M = (F; W; U ), where F = f1; :::; F g and W = f1; :::; W g are
                                                               nn o         o
disjoint …nite sets of …rms and workers, respectively, and U =   ufij ; uw
                                                                         ij   are agents’
match utilities.8 Each …rm i 2 F has match utility ufij from matching to worker j 2 W [ ?;
where matching to ? is interpreted as no match. Similarly, for each worker j 2 W; uw
                                                                                   ij is

the match utility from matching to …rm i 2 F [ ?. We denote by U f = ufij                                 and
                                                                                               i2F ;j2W
U w = uw
       ij     i2F ;j2W
                         the matrices corresponding to utilities from …rm-worker pairs for both sides
of the market.
       For simplicity we assume that: (1) …rms and workers have strict preferences. That is, for
any …rm i; ufij 6= ufij 0 for any j; j 0 2 W [ ? and for any worker j; uw      w                0
                                                                        ij 6= ui0 j for any i; i 2 F [ ?;

   6
     The role of commitment in dynamic games as ours with complete information is highlighted in Diaman-
toudi, Miyagawa, and Xue (2007). Similarly, Blum, Roth and Rothblum (1997) study dynamics when the
…rms’but not the workers’commitments are binding.
   7
     There is also some work analyzing endogenous salaries in decentralized markets with complete informa-
tion and limited dynamics see Konishi and Sapozhnikov (2008). For the analysis of wages in a centralized
clearinghouse, see Crawford and Knoer (1981) and Kelso and Crawford (1982). Related empirical work (such
as Choo and Siow, 2006 and Fox, 2008) has used constraints derived from stability with transferable utility
to estimate underlying preference parameters. The link between dynamic interaction and stability has been
suggested in the context of implementation as well. With complete information, Alcalde and Romero-Medina
(2000) study a game of two stages. First, …rms make o¤ers. Then, workers reply. They demonstrate that this
game implements the stable matches (see also Alcalde, Pérez-Castrillo, and Romero-Medina, 1998).
   8
     Cardinal utilities are required to trade o¤ matchings at di¤erent points in time and examine the impacts
of discounting.
                  Decentralized Matching with Aligned Preferences                                     5

(2) match utilities are strictly positive –for all i 2 F and j 2 W [ ?, ufij > 0; and similarly
for all j 2 W and i 2 F [ ?; uw
                              ij > 0; (3) all agents prefer to be matched over remaining

unmatched. Therefore, for any i 2 F, all workers j 2 W are acceptable, ufij > ufi? , and for
any j 2 W, all …rms i 2 F are acceptable, uw     w
                                           ij > u?j :

   For …xed sets F and W of …rms and workers, an economy is a …nite collection of markets
f(F; W; U )gU 2U together with a distribution G over possible utility levels U 2 U:
   A match is a function      : F [ W ! F [ W [ ? such that for all i 2 F; (i) 2 W [ ?
and for all j 2 W;   (j) 2 F [ ?: Furthermore, if (i; j) 2 F           W then (i) = j if and only if
 (j) = i. If (k) 6= ? for k 2 F [ W; we say that k is matched under : A blocking pair for
a match    is a pair (i; j) 2 F   W such that ufij > ufi   (i)   and uw     w
                                                                      ij > u (j)j : A match is stable if

it is not blocked by any pair (note that matches are not blocked by individuals, as all agents
prefer to be matched over remaining unmatched).
   Gale and Shapley (1962) showed that any market has a stable match, and provided an
algorithm that identi…es one. In the …rm proposing deferred acceptance algorithm, in step 1,
each …rm makes an o¤er to its most preferred worker. Workers collect o¤ers, hold the o¤er
from their most preferred …rm, and reject all other o¤ers. In a general step k; …rms whose
o¤er got rejected in the last step make an o¤er to the most preferred worker who has not
rejected them yet. Workers once more collect o¤ers, including, possibly, an o¤er held from a
previous step, keep their most preferred o¤er, and reject all other o¤ers. The algorithm ends
when there are no more o¤ers that are rejected, that is, any …rm either has their o¤er held by
a worker, or has been rejected by all workers. Once the algorithm ends, held o¤ers turn into
matches.
   The resulting match is the …rm optimal stable match, i.e., for any …rm it is the stable
match that is not dominated by any other stable match. It is in turn the least preferred stable
match for workers. Similarly, there always exists a worker optimal stable match, which is the
least preferred stable match for …rms. In general, these two matches can be di¤erent, and
many other stable matches can exist.
   In this paper we do not want problems of coordination on a speci…c stable match to be
the hurdle to the existence of an equilibrium yielding a stable outcome in the market game
(the details of which we soon describe). Therefore, we only consider markets M = (F; W; U )
                     Decentralized Matching with Aligned Preferences                                                            6

that have a unique stable match denoted by               M.         In such markets a centralized mechanism, to
which agents submit rank ordered lists of preferences, has an equilibrium that always generates
the stable outcome, while this is not the case when there are multiple stable matches (see e.g.,
Roth and Sotomayor, 1990, and section 3 in the paper).

2.2 Aligned Preferences

   The literature has not identi…ed general necessary and su¢ cient conditions on a market for
the stable match to be unique. Throughout our analysis, we will focus on a class of preferences,
termed aligned preferences, that guarantees uniqueness of the stable match.

De…nition (Aligned Preferences) Firms and workers have aligned preferences if there ex-
     ists an ordinal potential        =(     ij )i2F ;j2W       ;    ij   2 R; such that for any workers j; j 0 2 W
     and …rms i; i0 2 F:

                     If uw     w
                         ij > ui0 j ; then   ij   >    i0 j ,   and if ufij > ufij 0 ; then      ij   >   ij 0 :



   The notion of ordinal potential is analogous to that of a potential in two player games
                                                                             f
in which agents’match utilities replace the payo¤ matrix U w ; U f = (uw
                                                                       ij ; uij )                                             (see
                                                                                                                   i2F ;j2W
Monderer and Shapley, 1994).
   Conceptually, preference alignment imposes a link between …rms’and workers’(ordinal)
preferences through the ordinal potential. The preference ranking of both sides of the market
can be captured using one common matrix . Let U^ f = U^ w = ( ij )         , then U^ f and U^ w
                                                                                          i2F ;j2W
                                                                             f   w
capture the same ordinal preferences over partners as U ; U :
   Most applied papers implicitly assume that preferences are aligned (see, e.g., Sorensen,
2007, and references therein). In particular, two prominent examples of aligned preferences
are the following:

Examples of Aligned Preferences

  1. Firms and workers have a joint production output they share in …xed proportions when
     they are matched. That is, there exists a number                                > 0 such that for all (i; j) 2
                      f
     F     W : uw
                ij = uij > 0: Here,               =(    ij )i2F ;j2W        de…ned as     ij   = ufij for all i; j; serves
     as an ordinal potential.
                     Decentralized Matching with Aligned Preferences                                                7

  2. Suppose one side of the market has the same preference ranking over participants on
      the other side of the market (the preferences of whom can be arbitrary). To see that
      these preferences are aligned, assume without loss of generality that it is the …rms
      who share the same preference ordering over workers. Order the workers according to
      this ranking, with worker 1 being the least preferred worker and worker n being the
      most preferred worker. Normalize each worker’s match utilities to u~w
                                                                          ij , such that for all

      (i; k) 2 F; j 2 W: 0 < u~w           ~w
                               ij < 1; and u      ~w
                                             ij < u
                                                          w     w
                                                    kj , uij < ukj : Then                   =(    ij )i2F ;j2W   with
        ij   =j+   u~w
                     ij   for all i; j is an ordinal potential.

   As it turns out, Clark (2006) assures uniqueness of the stable match when preferences are
aligned:

Remark (Alignment –Uniqueness) When preferences are aligned, there is a unique sta-
      ble match.

   Providing the intuition for uniqueness will be substantially easier once we present other
properties of aligned preferences.
   One important attribute of preference alignment is that when …rms make o¤ers in the
order of their preferences, a rejected o¤er of a worker cannot trigger a chain of o¤ers and
rejections that results in an o¤er from a more desirable …rm. That is, if a worker j rejects
an o¤er from …rm i, then the resulting chain of o¤ers can only result in o¤ers to worker j
that he prefers less than the o¤er from …rm i: Formally, there is no sequence i1 ; :::; in 2 F and
j1 ; :::; jn 2 W such that j1 by rejecting i2 can trigger an o¤er from a preferred i1 :

                      f        f                          f        f                               f        f
   uw        w                          w        w                               w        w
    i1 j1 > ui2 j1 ; ui2 j1 > ui2 j2 ; ui2 j2 > ui3 j2 ; ui3 j2 > ui3 j3 ; :::; uin jn > ui1 jn ; ui1 jn > ui1 j1


   Note that such a chain would be equivalent to having a cycle in the payo¤ matrix U w ; U f .
We then say that preferences satisfy the no cycle property. As it turns out, the characteri-
zation of potential games by Voorneveld and Norde (1997) assures that preference alignment
is equivalent to the no cycle property.
    A market (F;~ W;
                   ~ U~ ) is a sub-market of (F; W; U ) if F~  F; W~     W; and 8i; j 2 (F~ [
?) (W   ~ [ ?)n f?; ?g ; u~w = uw and u~f = uf : A second implication of preference alignment
                           ij    ij     ij    ij
                        Decentralized Matching with Aligned Preferences                                            8

                            ~ W;
is that for any sub-market (F;  ~ U~ ) there is a …rm i and a worker j that form a top top
match, i.e. worker j is …rm i0 s most preferred worker within W  ~ and …rm i is worker j 0 s
                          ~ We say that preferences satisfy the top-top match property.9
most preferred …rm within F.
Intuitively, when preferences are aligned, the original market, as well as any sub-market, has
an ordinal potential. Suppose ~ is an ordinal potential of the sub-market (F;
                                                                            ~ W;~ U~ ): Consider
a pair (i; j) 2 arg max(i0 ;j 0 )2F~   ~
                                           ~ i0 j 0 : It follows that (i; j) is a top-top match in (F;
                                                                                                    ~ W;
                                                                                                       ~ U~ ):
                                       W

Hence preference alignment implies the top-top match property.
       This observation provides the intuition for the fact that a stable match is unique. In fact,
it can be identi…ed through a recursive process. In the initial step, …nd the …rm-worker pairs
that constitute top top matches, pairs (i; j) at which the ordinal potential                    =(   ij )   achieves
a local maximum. The corresponding …rms and workers must be matched to each other for the
match to be stable. The remaining …rms and workers form a market with aligned preferences
and we can continue recursively. By construction, this procedure generates the unique stable
match.
       Finally, preferences admit a stable blocking pair whenever for any match                      6=     M   there
exists a blocking pair (i; j) such that              M (i)    = j: Note that when preferences are not aligned
(even if there is a unique stable match                M ), any unstable match      will allow for a blocking
pair (i; j) 2 F         W such that ufi      M (i)
                                                        ufi (i) and uwM (j)j uw(j)j . That is, both i and j
prefer the outcome in the stable match                    M   to the outcome in       (see Roth and Sotomayor,
1990). When preferences are aligned there exists a stable blocking pair: a blocking pair (i; j)
for which      M (i)   = j. Indeed, suppose          6=       M:   Going through the recursive process described
above (to illustrate uniqueness), at some stage a discrepancy must arise between                          M   and :
At that stage, a match that occurs under                  M    does not get formed. In fact, the corresponding
worker and …rm form a stable blocking pair. Proposition 1 summarizes all these claims.10

Proposition 1 (Alignment –Properties)

   1. Preferences are aligned if and only if the no cycle property holds.

   2. If preferences are aligned then the top-top match and stable blocking pair properties hold.
   9
    The top-top match property is referred to as -reducibility in Clark (2006).
  10
    Alignment is a stronger property than the property proposed by Eeckhout (2000) in Theorem 1. This is
easy to see, as Eeckhout’s condition does not imply the top-top match property.
                   Decentralized Matching with Aligned Preferences                                   9

   Note that there are markets that ful…ll the top-top match property, and the stable blocking
pair property, but in which preferences are not aligned (and, therefore, do not exhibit the no
cycle property). Consider for example the following market with three …rms and three workers
and match utilities:

                                                              3; 5 1; 1 5; 2
                                   (ufij ; uw
                                            ij )i2F ;j2W   = 4; 4 2; 3 7; 7 :
                                                              1; 1 7; 2 6; 3
   It easy to check that the top-top match and stable blocking pair properties hold. Nonethe-
less, U exhibits a rejection chain, and hence does not correspond to aligned preferences:
             f     f                 f     f                     f     f
uw     w                 w     w                 w     w
 11 > u21 , u21 > u22 , u22 > u32 , u32 > u33 , u33 > u13 , and u13 > u11 .


2.2 A Decentralized Market

   For a given economy f(F; W; U )gU 2U together with a distribution G over utility realizations
U , we analyze the following market game. The economy, together with the distribution G; is
common knowledge to all agents. At the outset of the game, the market is realized according
to the distribution G. Firms make o¤ers over time, indexed by t = 1; 2; ::: and workers react to
them. Speci…cally, each period has three stages. In the …rst stage, eligible …rms simultaneously
decide whether and to whom to make an o¤er and whether to exit the market. In the second
stage of any period, workers observe which …rms exited, and observe only the o¤ers they
received themselves. Each worker j who has received an o¤er from …rm i can accept, reject,
or hold the o¤er. Once an o¤er is accepted, worker j is matched to …rm i: Workers can also
decide to exit the market. In the third stage, …rms observe rejections and deferrals of their
own o¤ers. Finally, all participants are informed of the agents who exited the market and the
participants who got matched.
   Eligible …rms are …rms i that have not yet hired a worker and have no o¤er held by a
worker. In each period t, eligible …rms can make up to one o¤er to any worker that has not
yet been matched.
   We consider market games without frictions, and market games with frictions, which take
                                                                                                   t f
the form of discounting. If a …rm i is matched to worker j at time t; …rm i receives                uij
                          t w
and worker j receives      uij ;   where      2 [0; 1] is the market discount factor. As long as agents
                    Decentralized Matching with Aligned Preferences                                        10

are unmatched, they receive 0 in each period. One interpretation is that once a worker and
a …rm are matched, they receive their match utility, or, equivalently, they receive a constant,
perpetual stream of payo¤s, the present value of which is their match utility. One can also
interpret the discount factor        as the probability of market collapse, or the probability that
each …rm loses its position and receives a payo¤ of 0 (and, analogously, the probability that
each worker leaves the market and receives 0 as well).
       The fact that time is valuable as described through discounting provides a major obstacle
to the decentralized market game reaching a stable outcome. In the conclusions we address
other ways in which congestion and market frictions might arise, e.g., …xed costs for making
o¤ers, and other possible rules of the market game.
       We focus on two con…gurations of information in the economy. The simplest is that of
complete information in which both …rms’ and workers’ match utilities are common knowl-
edge.11 This is the case that most of the literature on decentralized matching has tackled.
Note that in this case, both …rms and workers can deduce the stable outcome                   M.

       The second information structure we analyze is that of private information. In that setup,
each agent is informed only of her own match utilities. In the case of private information, for
an equilibrium of the market game to be a stable outcome, information has to be transmitted
to allow agents to deduce their stable match partner.
       Each of these information structures de…nes a Bayesian game where type spaces correspond
to the available private information of each agent. The equilibrium notion we use is that of
Bayesian Nash equilibrium. When information is complete, type spaces are singletons and we
essentially characterize the Nash equilibria of the corresponding game.
       Our analysis concentrates on equilibria of decentralized market games in which all agents
use weakly undominated strategies. For both information structures, weak undominance
imposes several restrictions on equilibrium play:

   1. A worker who accepts an o¤er always accepts his best available o¤er. In particular, a
         worker cannot exit and simultaneously reject an o¤er (since, by de…nition, o¤ers always
         lead to a higher payo¤).
  11
    The crucial assumption in the analysis of the complete information case is that each agent knows all other
agents’preference ordering.
                     Decentralized Matching with Aligned Preferences                                         11

   2. When        < 1; a worker who receives an o¤er from his most preferred unmatched …rm
         accepts it immediately and, similarly, if only agents on one side of the market are
         unmatched, they exit immediately.

       Note that restriction 2 is due to the fact that all payo¤s are strictly positive.

                                     3.   Centralized Matching
Before analyzing decentralized markets, we analyze the case of a centralized clearinghouse
(such as ones used by medical markets and many school districts) to which agents simulta-
neously submit preferences. The centralized clearinghouse uses an algorithm that produces
a stable outcome given the submitted preferences. We show that, in our environment, with
a centralized clearinghouse it is always possible to elicit preferences of agents in a way that
yields the stable match as an equilibrium outcome. To ease analogies between centralized and
decentralized markets, we assume that agents in a centralized market report match utilities
that are then translated into ordinal preferences. That is, each agent submits a vector of pos-
itive match utilities.12 Technically, this is equivalent to having agents simply report ordinal
preferences directly.
       For each type of agent        2 ff; wg; and each agent l; let P (ul ) be the strict ordinal
preferences associated with l’s reported match utilities; in which ties are broken depending
on the index of the relevant match partners and in favor of being matched.13 Speci…cally,
consider …rm i; then ufij > ufik implies jP (ufi )k, for j; k 6= ?; ufij = ufik and j < k implies
jP (ufi )k and for j 6= ?, ufij = ufi? implies jP (ufi )i:
       We de…ne a deferred acceptance mechanism as a mechanism in which each agent l of
type       2 ff; wg reports their match utilities ul simultaneously (after receiving all private
information). The mechanism then computes the corresponding ordinal preferences P and
associates them with the stable match induced by the …rm proposing deferred acceptance
algorithm on P: The payo¤s of …rms and workers correspond to their match utilities given by
their match partner. Throughout the paper, we will use the shorthand of DA for the label of
“deferred acceptance”.
  12
     The restriction to positive numbers is made only for presentation simplicity. The su¢ cient restriction is
that the set of available reports contains as many elements as the maximal number of di¤erent match utilities.
  13
     Note that even though agents never experience indi¤erence in their realized match utilities, they may still
report indi¤erences.
                 Decentralized Matching with Aligned Preferences                                12

   It follows directly from incentive compatibility attributes of the DA algorithm that the DA
mechanism allows for a Bayesian Nash equilibrium in weakly undominated strategies in which
the resulting match corresponds to the unique stable match in each market of the economy
(see Roth and Sotomayor, 1990). That is,

Lemma (Centralized Matching)

  1. For any economy with a unique market all Nash equilibria in weakly undominated strate-
     gies of the game associated with the DA mechanism yield the unique stable match            M:


  2. For any economy there exists a Bayesian Nash equilibrium in weakly undominated strate-
     gies of the game associated with the DA mechanism such that the corresponding match
     is the unique stable match     M   in each market.

   It is important to note that even though implementing the stable match is always pos-
sible through the centralized clearinghouse, the stable match is not necessarily the unique
equilibrium outcome in the presence of uncertainty (see Niederle and Yariv, 2009).

                               4.   Complete Information
We start by analyzing economies in which all participants are informed of the realized market.
That is, there is complete information regarding all match utilities, and all agents can com-
pute the stable match. In particular, achieving the stable match can be done in one period.
Intuitively, consider strategies where each …rm makes an o¤er to its stable match partner, or
exits the market if it is unmatched under the unique stable match         M:   Each worker accepts
his best available o¤er in period 1, and if he receives no o¤ers, exits the market. This pro…le
constitutes an equilibrium in weakly undominated strategies that yields the match         M:

   Ruling out weakly dominated strategies is not su¢ cient to guarantee uniqueness. First,
there may still be multiple equilibria generating       M.   Indeed, for su¢ ciently high discount
factors, an alternative way involves emulating the DA algorithm. Since this pro…le may entail
several periods of market activity, it would generate di¤erent equilibrium payo¤s.
   Furthermore, there may be outcomes generated by equilibria in weakly undominated strate-
gies that do not coincide with the stable match     M   as the following example illustrates.
                    Decentralized Matching with Aligned Preferences                                         13

       Example 1 (Multiplicity with Complete Information). Consider an economy with
four …rms fF 1; F 2; F 3; F 4g and four workers fW 1; W 2; W 3; W 4g ; in which ufij = uw
                                                                                        ij : The

following matrix de…nes the payo¤s of all matches:

                                                    1     2     7     4
                                                    5     6     3     8
                                    Uf = Uw =                             ;
                                                    9    10 11       12
                                                    13 14      15    16

where bold entries correspond to the unique stable match:                     M (F i)   = W i for all i: Con-
sider the following pro…le of weakly undominated strategies yielding the match :                      (F 1) =
W 2; (F 2) = W 1; (F 3) = W 3 and (F 4) = W 4 (corresponding to the underlined entries
in the matrix). In period 1; …rms F 2 and F 4 make an o¤er to worker W 1 =                         (F 2) and
W 4 = (F 4) respectively. W 1 and W 4 accept these o¤ers immediately, while workers W 2
and W 3 do not accept any o¤er (unless from their most preferred unmatched …rm). In period
2; …rms F 1 and F 3 make an o¤er to W 2 = (F 1) and W 3 = (F 3); respectively, who accept
their o¤er. O¤ equilibrium, if workers W 1 and W 4 do not receive an o¤er from any …rm in
period 1 they exit, otherwise all workers reject any o¤er they receive (as long as they’re not
from their …rst choice …rm) and stay in the market until period 2. In period 2; if …rms F 2 and
F 4 have not matched with (F 2) and (F 4) respectively, F 3 makes an o¤er to W 2 instead
of W 3 = (F 3) if possible. If W 2 has already exited the market, F 3 makes an o¤er to its
most preferred unmatched worker, and exits in case all workers left the market. Furthermore,
in period 2, any worker who does not receive o¤ers exits immediately, otherwise accepts his
best o¤er. Any …rm that gets rejected in period 1 exits the market in the beginning of period
2. This pro…le constitutes an equilibrium.

       The crux of the problem generating the multiplicity above is that elimination of weakly
dominated strategies provides little restraint on o¤-equilibrium behavior. Speci…cally, F 3
could “punish”F 2 for not making an o¤er to W 1 = (F 2) in period 1.14 Iterated elimination
  14
    When …rms and workers can use weakly dominated strategies, there are even more equilibrium pro…les
and outcomes. For instance, it is an equilibrium for all agents to exit the market in period 1, resulting in no
individual matches. Weak dominance rules this out, as it does not allow a worker to exit the market when he
has an acceptable o¤er in hand.
                     Decentralized Matching with Aligned Preferences                                     14

of weakly dominated strategies rules out such strategies, and in fact, guarantees that the
stable match is the unique equilibrium outcome, as the following proposition summarizes.

Proposition 2 (Complete Information) For any economy, there exists a Nash equilibrium
         in weakly undominated strategies that yields the stable match for each realized market.
         Furthermore, the stable match of each realized market is the unique Nash equilibrium
         outcome surviving iterated elimination of weakly dominated strategies.

       When using strategies that survive iterated elimination of weakly dominated strategies,
…rms and workers that form top-top matches must be matched in period 1: Consider the
top-top matches in the remaining sub-market. Since the corresponding workers realize the
top-top matches in the original market are formed in period 1; iterated elimination of weakly
dominated strategies assures that they accept their top-top matches in the remaining market,
and therefore the corresponding …rms make those o¤ers and are matched in period 1 as
well. Continuing recursively we get that iterated elimination of weakly dominated strategies
guarantees the unique stable match of the market being implemented in one period.15
       Note that this construction hinges on the fact that all agents are completely informed of the
realized market, and hence each …rm and worker can compute the stable match. Proposition
2 shows that a robust non-cooperative market game equilibrium results necessarily in the
unique stable match (the unique core outcome in this market). In what follows we illustrate
the impact of preference uncertainty in the economy.

                               5.   Economies with Uncertainty
For a decentralized market to reach a stable outcome, su¢ cient information has to be trans-
mitted to ensure that (i) workers only accept o¤ers from …rms that are their stable match and
(ii) …rms make o¤ers to those workers. Furthermore, the decentralized market has to allow
for this information to be transmitted in an incentive compatible way.
       There are three channels through which information ‡ows in the market game. First,
information is publicly transmitted when agents exit the market or form a match. Second, in-
formation is privately transmitted when workers receive o¤ers from …rms and workers respond
  15
    The uniqueness of equilibrium outcomes is due to preference alignment. In fact, Niederle and Yariv
(2009) show that without preference alignment, equilibria surviving iterated elimination of weakly dominated
strategies may generate multiple outcomes, even when information is complete.
                   Decentralized Matching with Aligned Preferences                                          15

to those o¤ers (unless o¤ers are accepted, in which case that information becomes public).
The third component of information is time –all participants are aware of the period they are
in.
      Recall that alignment implies the top      top match property. Hence, if …rms and workers
follow strategies that resemble the DA algorithm (namely, …rms make o¤ers to workers in
order of their preferences and workers hold on to their best available o¤er and only accept
an o¤er only from their most preferred available …rm), then in every period some agents are
matched and public information is transmitted. Furthermore, this process yields the stable
outcome.
      The main hurdle for establishing stability is that these DA strategies may not be incentive
compatible. First, agents may have an incentive to speed up the timing of matches. Second,
market activity throughout the game allows participants to learn about the realized market.
Since updating a¤ects the …nal matching outcomes, agents may have incentives to deviate
from DA strategies in order to manipulate the updating process of other participants.

5.1 Learning in a Decentralized Market

      Before investigating strategies of …rms and workers, we describe the information agents
have at each period t. Let Mt         (F [ ?)      (W [ ?) denote the matches formed at time t
(including …rms and workers who leave the market by themselves), and let the set of agents
who exited the market up to, but excluding, period t be

      Xt   fj j 9k s.t. (j; k) 2 M for some      < tg [ fi j 9l s.t. (l; i) 2 M for some           < tg :

Let MtF      F    ? be the set of …rms that leave the market in the …rst stage of period t:
      At the beginning of period t; each active …rm i observes a history that consists of the
(timed) o¤ers the …rm made, the responses of workers to those o¤ers, denoted by r for rejection
and h for holding (where we use the notational convention that an o¤er to no worker is denoted
as an o¤er to ? that is immediately rejected), and the (timed) set of agents that have left the
market:
                                                                         tQ1
                              hft;i 2 ((W [ ?)     fr; hg)t     1
                                                                               M :
                                                                          =0

In addition, at each period t; suppose workers j1 ; :::; jk(t       1)   rejected o¤ers from …rm i in periods
                    Decentralized Matching with Aligned Preferences                                        16

1; :::; t                ~ it = jjj 2
            1: Denote by W          = j1 ; :::; jk(t    1)    the set of workers that have not rejected
…rm i yet.
     Each unmatched worker acts in the interim stage of each period t and observes a history
that consists of all (timed) o¤ers he received, a (timed) sequence of o¤ers he held, the (timed)
set of agents that have left the market prior to t, and the set of …rms that left the market at
time t:16
                                                             tQ1
                                              t         t
                                 hw
                                  t;j 2 2
                                         F
                                                   2F              M   MtF
                                                             =0

In addition, at each period t; suppose …rms i1 ; :::; ik(t) made o¤ers to worker j in periods 1; :::; t.
Denote by F~ t = ijuw max uw jl = i1 ; :::ik(t) the set of …rms that have not made an o¤er
               j        ij            lj

to worker j yet and that he weakly prefers to any …rm that has made him an o¤er thus far.
     Agents use the observed history to update the posterior on the realized markets, and
the resulting potential stable match partners. For a given prior distribution G over possible
utility levels U 2 U; for any private information ul (:) of agent l of type            2 ff; wg regarding
the realized market, let G(ul (:)) denote the posterior distribution over utility realizations.
Let Sl (ul (:)) = f (U )(l) j U 2 supp G(ul (:))g denote the set of all ex ante potential stable
match partners of agent l. That is, agents that could conceivably be part of a stable match,
under the distribution over market match utilities updated by the private information ul (:):
Analogously, given the strategies played by all agents, Sl (ul (:); ht;l ) denotes the set of all
interim potential stable match partners given agent’s l available information at t.

5.2 Frictionless Economies

     Suppose there is no discounting, i.e.,       = 1: Then, one way in which information may be
transmitted in the market is if agents simply follow DA strategies. That is, …rms make o¤ers
to workers according to their match utilities, and exit the market only when all workers have
rejected them. Workers hold on to their best available o¤er, and accept an o¤er only once the
o¤er is from the …rm that yields the highest match utility given the set of …rms that are still
unmatched. These prescriptions are followed by all agents after any detectable deviations as
well.
   16
      An o¤er of …rm i to worker j that is held from period t to t’ is recorded as an o¤er made in periods
t; t + 1; :::; t’that is held by the worker in each of these periods. We use a similar convention for workers.
                  Decentralized Matching with Aligned Preferences                               17

Proposition 3 (No Discounting) Suppose                = 1, then DA strategies constitute a Bayesian
      Nash equilibrium in weakly undominated strategies and yield the stable match.

   Intuitively, when all agents use DA strategies, workers ultimately hold o¤ers from their
stable match partners. The top-top match property implies that in every period either a match
is formed, or only agents on one side remain unmatched. In particular, the process stops in
…nite time. When       = 1; the timing of matches is of no importance to market participants
and unilateral deviations cannot generate a better match.

5.3 Economies with Frictions

   When      < 1, DA strategies are in general no longer incentive compatible. As an example,
consider a complete information economy with two workers and two …rms, for which ufij = uw
                                                                                         ij

for all i; j: Match utilities are given as follows:

                                                       4   1
                                        Uf = Uw =              :
                                                       3   2
   Firm 2 knows that worker 2 is the unique stable match partner and, furthermore, that
worker 2 would accept an o¤er from …rm 2 immediately, as …rm 2 is worker 20 s …rst choice.
Hence, it cannot be an equilibrium for …rm 2 to …rst make an o¤er to worker 1 and lose a
period. Firms may therefore be tempted not to make all o¤ers in order of their preferences,
but rather concentrate on o¤ers to potential stable match partners. Similarly, workers may
accept an o¤er from their highest potential stable match partner, even if more preferred …rms
are still unmatched.
   Before we attack the general problem of su¢ cient incentive compatible information trans-
mission in decentralized markets, we start by analyzing some minimal conditions strategies
have to satisfy in a centralized mechanism in order to generate the stable match. This al-
lows us to temporarily avoid incentive compatibility hurdles that are due to interim learning.
That is, our …rst step is a generalization of the Lemma in Section 3, which illustrated the
existence of a Bayesian Nash equilibrium yielding the stable match (namely, one involving
agents submitting their preference pro…le truthfully). The second step of our analysis entails
a characterization of economies in which emulating the class of identi…ed strategies (from step
1) in a decentralized market is incentive compatible for all participants.
                   Decentralized Matching with Aligned Preferences                           18

   Certainly, if there is any hope of achieving the stable match (in a centralized setting) for
any market realization, agents must declare potential stable matches acceptable. Furthermore,
consider, e.g., the …rms. Since the centralized mechanism achieves the …rm optimal stable
match for the submitted preferences, changing the ranking of agents that are preferred to the
stable match would not change the resulting match in the centralized market. However, it is
crucial that any agents ranked above any potential stable match are, in fact, preferred to that
stable match. These restrictions suggest the following class of strategies, termed reduced
DA strategies.
   Formally, for each agent l 2 F [ W who submits utilities v corresponding to preferences
P (v), let P (v; ?) = fk : kP (v)?g [ f?g where P (v; ?)     W [ f?g if l 2 F and P (v; ?)
F [ f?g if l 2 W. That is, P (v; ?) is the union of no partner (i.e., unmatched) and the set of
match partners l strictly prefers to being unmatched given P (v): Denote ul (k) = uflk if   =f
(and l 2 F) and ul (k) =       uw
                                kl   otherwise.

De…nition (Reduced DA Strategies) Let E be an economy and assume agents participate
     in a centralized match: each agent l 2 F [ W submits utilities v corresponding to
     preferences P (v): Agents use reduced DA strategies if for each l 2 F [ W with           2
     ff; wg :

  1. Sl (ul (:))    P (v; l)

  2. For each k; m 2 Sl (ul (:)) ; kP (v)m , ul (k) > ul (m):

  3. For each k 2 P (v; l)nSl (ul (:)) and each m 2 Sl (ul (:)) ; kP (v)m ) ul (k) > ul (m).

   The intuitive interpretation of the three conditions required by reduced DA strategies
is the following. First, any potential stable match (using the agent’s private information on
match utilities) is declared acceptable. Second, potential stable matches are ranked truthfully.
Third, rankings of agents who are not potential stable matches above potential stable matches
must be truthful with respect to the stable matches.
   We now show that reduced DA strategies in a sense place minimal requirements for securing
stability in centralized markets. Note that the conditions of reduced DA strategies depend
only on the support of stable matches, and not their precise likelihood of occurrence. We
                    Decentralized Matching with Aligned Preferences                                         19

consider economies with a …nite number of potential markets, and so strategy pro…les that
generate the stable match need to be robust to how these markets are distributed. We say an
agent l uses a rule if, for any economy E containing agent l; the agent uses a strategy that
depends only on the set of market participants, the agent’s realized match utilities, and the
set of potential stable match partners. Agent l uses a reduced DA rule if the used strategy
is a reduced DA strategy.17

Proposition 4 (Centralized Aligned Economies with Discounting)

   1. If all agents use a reduced DA rule then for any economy E the outcome produced by the
      DA mechanism is the stable match.

   2. Suppose there is an agent a 2 F [ W who uses a rule that is not a reduced DA rule.
      Then there exists an economy E for which the DA mechanism produces an outcome that
      is not stable in some market realization.

   3. Given an economy E; all agents using reduced DA strategies constitutes a Bayesian Nash
      equilibrium of the game associated with the DA mechanism.

    Proposition 4 illustrates the e¤ectiveness of reduced DA rules in generating the stable
match outcome. Part 2 of the Proposition highlights the necessity of the conditions imposed
by reduced DA strategies for implementing stable outcomes in any economy.
    When moving from a centralized mechanism to a decentralized market, we need to translate
reduced DA strategies to strategies in decentralized markets. For …rms the translation is
straightforward. Whenever …rm i would submit a reduced DA strategy v; …rm i does the
following in the decentralized market. In each period in which …rm i is not matched and does
not have an o¤er held by a worker, …rm i makes an o¤er to its most preferred unmatched
worker who has not rejected …rm i yet according to v (where ties are broken according to the
same rules determining P (v) in the centralized setting). When …rm i gets rejected by the last
  17
     Reduced DA rules impose restrictions on the details of the economy agents can utilize in their strategies.
In particular, suppose E1 and E2 are two economies with the same set of …rms and workers, both containing
a market M = (U; F; W) such that for some agent l 2 F [ W of type 2 ff; wg the set of a-priori stable
matches Sl (ul (:)) is identical when M is realized in either economy. Then, if agent l uses a reduced DA rule,
they must use the same reduced DA strategy in both E1 and E2 ; whenever observing ul (:):
                   Decentralized Matching with Aligned Preferences                          20

acceptable worker, the last worker who is still unmatched and has a higher utility than …rm i
itself according to v; …rm i exits the market.
   For workers, there are two aspects of strategies that are important. The …rst is when to
start accepting o¤ers, and the second is which o¤er to accept. In terms of the latter, the
use of weakly undominated strategies implies that when a worker accepts an o¤er, he has to
accept the best available o¤er. Thus, each worker has to rank all …rms in the “right” order.
However, in a decentralized market a worker may accept an o¤er even if it is not the o¤er
from his most preferred unmatched …rm. The translation of a reduced DA strategy v to a
decentralized market will be captured by “threshold …rms”. At each point in time, a worker
accepts the best available o¤er whenever he receives an o¤er that he likes at least as much
as his most preferred unmatched …rm ranked according to v; the “threshold …rm”. So, if the
reduced DA strategy v only ranks potential stable match partners, the worker accepts an o¤er
as soon as he receives an o¤er he prefers at least as much as the most preferred unmatched
potential stable match partner. Beyond that, we require workers to hold their best available
o¤er as long as the o¤er is at least as good as their lowest potential stable match, and reject
all other o¤ers.
   A second element to account for when moving from a centralized to a decentralized market
is that agents may use strategies in which actions depend on the history of play. Speci…cally,
note that reduced DA strategies depend on the set of potential stable match partners. In
decentralized markets, given the strategy pro…le of all other agents, each …rm or worker
can recalculate and possibly re…ne their set of potential stable match partners over time.
Decentralized reduced DA strategies are therefore strategies that can be derived as
above when allowing agents to submit a new reduced DA strategy every period. This allows
them to take information they have accumulated into account. For a …rm this implies that
the …rm makes an o¤er to workers that are at least as good as her most preferred unmatched
potential stable match who has not rejected her yet. For a worker this implies that the best
o¤er that is weakly preferred to his least preferred potential stable match is not rejected.
Furthermore, upon receiving an o¤er at least as good as his most preferred unmatched …rm
according to v, the worker immediately accepts that o¤er. The worker rejects all o¤ers that
are not as good as the least preferred potential stable match, and only holds one o¤er. Note
                    Decentralized Matching with Aligned Preferences                                       21

that for any agent l 2 F [ W of type               2 ff; wg ; given the actions of all other agents,
the actions of agent l using a decentralized reduced DA strategy up to any period t can be
described by a single reduced DA strategy using Sl ul (:); ht;l as the set of potential stable
match partners.18
       In centralized markets, we have seen that reduced DA strategies impose minimal restric-
tions on strategies to achieve stability and are incentive compatible. However, the decen-
tralized counterpart of many such strategies is generally not incentive compatible in markets
with frictions, as agents care about when matches are created. This may create incentives
to make less o¤ers than those required by decentralized reduced DA strategies. Furthermore,
the fact that agents update the set of potential stable match partners using the history of
play opens room for a di¤erent class of manipulations intended to a¤ect the learning that
occurs in the market (and, consequently, agents’perception of their conceivable stable match
partners). Proposition 4 above suggested that decentralized reduced DA strategies are natural
candidates for strategy pro…les that yield stable outcomes. Our goal now is to characterize
the class of economies for which a subset of these strategies are incentive compatible.
       When all agents in the market follow decentralized reduced DA strategies, …rms may at
times be able to speed up the process by altering the ranking of agents. Intuitively, suppose
that all other players use strategies that implement the stable outcome. There are economies
in which a …rm’s o¤er to a worker j who is not its …rst choice worker will be accepted only
if that worker is actually its stable match partner. Then the …rm may have an incentive to
make that o¤er …rst, in order to speed up the timing of its match, as such an “out of order”
o¤er entails no risk of “wrong acceptance”if all other agents use strategies that implement the
stable outcome. Below is a simple example of such a case in which no equilibrium implements
the stable outcome with certainty.19

       Example 2 (Timing of Matches). Consider an economy with two …rms fF 1; F 2g
and two workers fW 1; W 2g with ufij = uw
                                        ij for each of 6 potential markets, described by the

  18
     As time progresses, learning can only lead to the elimination of previously perceived potential stable
matches. Thus, the conditions imposed by reduced DA strategies are weakened in the interim stages.
  19
     Note that workers cannot speed things up by holding on to o¤ers that are not from potential stable match
partners. However, holding such o¤ers is not necessarily strictly harmful to the worker, since the no cycle
property assures that the rejection of an o¤er cannot trigger a chain yielding a more preferred o¤er.
                     Decentralized Matching with Aligned Preferences                                           22

following match utilities (notation as before):

             3   6            3   6            3   2            3   2            9    6            7   3
   U1 =              ; U2 =           ; U3 =           ; U4 =           ; U5 =            ; U6 =           :
             4   7            4   5            4   8            1   7            8    5            8   5

       We will show that there are no equilibria in weakly undominated strategies that always
implement the stable outcome.
       U3 and U4 guarantee that F 1 sometimes makes an o¤er to W 1 in any equilibrium when
W 10 s match utilities are (3; 4):20 Similarly, U5 and U6 guarantee that W 2 with match utilities
(6; 5) will in equilibrium sometimes receive no o¤er in period 1; but only in period 2.21 From
now on, we focus on U1 and U2 :22
       Note that W 1 and W 2 always accept an o¤er from F 2 immediately in U1 : Hence for any
  < 1; F 2 must make an o¤er to W 2 when U1 is realized.
       Assume given F 1’s match utilities (3; 6); the probability of U1 is p and that of U2 is 1               p:
       Suppose F 1 makes an o¤er to W 2 (in U1 and U2 ) in period 1. Then when U2
prevails, F 2; that is aware U2 is realized, makes an o¤er to W 1 in period 1; who will accept
that o¤er. These strategies generate a payo¤ for F 1 of 6(1              p) + 3p :
       Consider F 1’s deviation to making an o¤er to W 1 in period 1: Note that along the equi-
librium path F 1 makes an o¤er to W 1 with match utilities of (3; 4) only in U3 ; when F 1 is
the stable match, hence W 1 accepts an o¤er from F 1 whenever W 10 s match utilities are (3; 4)
(and that is the only o¤er he observes): Hence W 1 accepts F 10 s o¤er also in U1 . In U2 the o¤er
is rejected, and F 1 matches to W 2 in period 2 (as W 2 does not leave the market in period
1 when observing match utilities (6; 5); see above), resulting in payo¤s 6(1                 p) + 3p: This
deviation is pro…table when p > 2=3 (independent of ): The idea is that F 1 can assure that
  20
     Indeed, in U4 , W 1 accepts an o¤er from F 1 immediately. Therefore, F 1 has an incentive to make an o¤er
to W 1 in period 1 whenever U4 is realized. However, F 1 cannot distinguish between U3 and U4 ; so what are
possible consequences of an o¤er to W 1 in U3 ? Given an o¤er from F 1; W 1 cannot exit (but he can reject
the o¤er from F 1): Note that in U3 it must be the case that F 2 makes an o¤er to W 2 that gets immediately
accepted. Therefore, in period 2; if W 1 rejected the o¤er of F 1; F 1 can remake that o¤er, in which case W 1
has to acept it whenever using a weakly undominated strategy. Hence, in equilibrium, F 1 best responds by
making an o¤er to W 1 whenever her match utilities are (3; 2):
  21
     In U5 , F 1 makes an o¤er to W 1 who accepts immediately. In U6 ; to guarantee a stable outcome, in period
1; F 2 with utilities (8; 5) cannot make an o¤er to W 2 and hence has to make an o¤er to W 1: This implies
that in U5 , W 2 does not receive any o¤ers in period 1 in equilibrium: However, W 2 receives an o¤er from F 2
in period 2: Therefore, W 2 cannot exit the market when he receives no o¤er in period 1:
  22
     In particular, F 1 observes (3; 6), W 1 observes (3; 4); and they cannot distinguish between U1 and U2 .
                    Decentralized Matching with Aligned Preferences                                    23

when approaching W 1 in period 1; its o¤er gets accepted only when W 1 is the stable match.
The e¤ect of such a deviation is therefore to speed up the creation of its match when U1 is
realized. The cost is the delay of a match with W 2 in U2 . However, when U1 is su¢ ciently
more likely ex-ante (given F 1’s private information), the bene…ts outweigh the costs.
       Suppose F 1 makes an o¤er to W 1 with probability q 2 (0; 1] (in U1 and U2 ) in
period 1: First, note that this implies that W 1 has to accept the o¤er from F 1 with positive
probability, m 2 (0; 1]:23 In order for the market to always yield a stable outcome, it has to
be the case that F 2 makes an o¤er to W 1 with probability 1 in period 1 when U2 prevails,
which implies that W 1 has to accept the o¤er from F 1 whenever he receives that o¤er. Now,
F 1 has the same trade-o¤ as before, and hence, F 1 strictly prefers making an o¤er to W 1;
implying that q = 1: Can we induce F 2 to make an o¤er to W 1 with certainty? When U2
prevails, an o¤er to W 1 yields 4: An o¤er to W 2 yields 5 , which is bigger than 4 for           > 4=5:
Hence, for large enough ; F 1 making an o¤er to W 1 with positive probability cannot be part
of an equilibrium.
       Suppose F 1 simply delays making an o¤er and makes an o¤er to its most preferred available
worker in period 2: This clearly cannot be part of an equilibrium since F 1 can pro…tably
deviate by making an o¤er to W 2 in period 1; which will be accepted with probability 1                p.

       Assumption 1 rules out economies as in the example above. It makes sure that when
all market participants follow decentralized reduced DA strategies, a …rm has no incentive
to make an o¤er to a worker who is ranked below her favorite unmatched potential stable
match partner that has not rejected her yet. If the …rm makes such an o¤er, Assumption 1
guarantees the …rm runs the risk of one of two eventualities. Either the …rm will have her
o¤er held or accepted, as it is better than the stable match of the worker in the realized
market.24 Alternatively, in case the worker uses a decentralized reduced DA strategy that
speci…es …rms that are less preferred than all potential stable matches as unacceptable, the
…rm will be rejected immediately. Then, making an o¤er to that worker triggers no chain of
o¤ers, rejections, or acceptances, and as such has no bene…t over not making an o¤er at all.
  23
     Suppose W 1 accepts F 1 with probability 0 in period 1: Then F 1’s payo¤ from making an o¤er to W 1
in period 1 is 3p + 6(1 p) ; an o¤er to W 2 yields however 3p + 6(1 p);and F 1 would have a pro…table
deviation.
  24
     Therefore, in that realized market, the worker is a worse match for the …rm than her stable match, as
otherwise the worker and …rm would constitute a blocking pair.
                   Decentralized Matching with Aligned Preferences                                     24

Assumption 1 Suppose all agents use decentralized reduced DA strategies. Consider any
      …rm i and market realization with match utilities U . At each period t; for all available
      workers j that are worse than …rm i0 s most preferred potential stable match partner
      that has not rejected the …rm yet: either there exists U~ 2 supp G uf ; hf such that
                                                                                       i   t;i

      u~w    ~w(U~ )(j)j or for all U~ 2 supp G ufi ; hft;i , u~w
        ij > u                                                           uw
                                                                ij < minf~
                                                                                     w
                                                                                       ~wj ; hw
                                                                           kj : k 2 Sj u      t;j g.


   Decentralized reduced DA strategies require that in each period t and for each history
hft;i …rm i makes an o¤er that corresponds          to some reduced DA strategy given information
(ufi ; hft;i ): This implies that …rm i makes an    o¤er to a worker who is at least as good for her
as her highest ranked unmatched potential stable match partner who has not rejected her
yet. If workers always hold the best available o¤er that is at least as desirable as their lowest
potential stable match partner (unless they accept an o¤er), then the set of potential stable
matches after some history is given by:
                                                     n                       o
           Sif ufi ; hft;i      BS fi ufi ; hft;i     jjj 2 Sif ufi \ W  ~ t n X t;
                                                                           i
                                                     n                     o
           Sjw uwj ; hw
                      t;j       BS w  w     w
                                   j u j ; ht;j        iji 2 Sjw uwj \ F~it n X t [ MtF :

   The inclusion above may certainly be strict. For instance, consider an economy comprised
only of U1 and U2 of Example 2. In that case, if …rms use a decentralized reduced DA strategy,
worker W 1 who receives an o¤er from F 1 only in period 1 can infer that he will not receive
another o¤er and that F 1 is his stable match partner. In particular, he could accept that o¤er,
even though it is not from his …rst choice …rm. In fact, such examples hinge on there being
e¤ectively only two relevant …rms and workers. However, such examples can be embedded in
larger markets.

De…nition (Top Sub-economy) Suppose all agents use decentralized reduced DA strate-
      gies. A top sub-economy for worker j1 consists of two …rms i1 and i2 and an additional
      worker j2 such that in period t, worker j1 has su¢ cient information to infer that:

        1. for any j 2 fj1 ; j2 g: i1 ; i2 2 Sjw uwj ; hw
                                                        t;j and no other potential stable match is

           ranked higher than i1 or i2 :
                     Decentralized Matching with Aligned Preferences                                          25

           2. Both i1 and i2 either have an outstanding o¤er to j 2 fj1 ; j2 g or make an o¤er to
               them in period t.

       The generalization of the example above imposes a restriction on updating when a top
sub-economy is reached. Indeed, suppose all agents use decentralized reduced DA strategies
and that in period t worker j has a top sub-economy with …rms fi1 ; i2 g. If i is the most
preferred …rm among those with an o¤er to j in period t then Sjw uwj ; hw
                                                                        t;j = fig (even when

i is only the second choice …rm among fi1 ; i2 g).
       As it turns out, in general cases in which Sl (ul (:); ht;l ) ( BS l (ul (:); ht;l ) for an agent l
of type       2 ff; wg; decentralized reduced DA strategies may be sensitive to manipulations.
Speci…cally, timing of o¤ers can be used to a¤ect the set of perceived potential stable partners.
The following example illustrates the power of such manipulations in an economy in which
there does not exist a Bayesian Nash equilibrium in weakly undominated strategies that always
yields the stable outcome.
       Example 3 (Manipulability of O¤er Timing). Consider an economy with three
…rms fF 1; F 2; F 3g and three workers fW 1; W 2; W 3g in which ufij = uw
                                                                        ij for each of 4 potential

markets described by the following match utilities:25

                5    4   3               5    9    4               5    4    3                5   4    3
        U1 = 7      10   2 ;     U2 = 7      10    3 ;     U3 = 9       7   10 ;      U4 = 2      6    9 :
                6    8   9              6     8    2               6    8    2                1   8    7

       Suppose there exists an equilibrium in weakly undominated strategies that always imple-
ments the stable match.
       U3 guarantees that in such an equilibrium F 3 with match utilities (6; 8; 2) always makes
an o¤er to W 2 in period 1:26 Furthermore, U4 guarantees that in any such equilibrium F 1
with match utilities (5; 4; 3) makes an o¤er to W 1 with probability 1.27 From now on we
  25
     Note that the economy satis…es Assumption 1.
  26
     Such an o¤er will be immediately accepted in U3 : Furthermore, if W 2 makes an o¤er to W 1 with some
probability p > 0 in period 1; then in U3 , W 1 is aware that the stable match partner is F 1 yelding match
utility of 5; so W 1 will accept that o¤er, yielding an unstable outcome.
  27
     In U4 ; W 1 accepts an o¤er from F 1 immediately. Note that in U3 ; F 2 matches with W 3 and F 3 with
W 2 in period 1 (see above). Hence, in U3 , W 1 will match to F 1 in period 2 at the latest, so F 1 does not lose
anything from making an o¤er to W 1 in period 1:
                 Decentralized Matching with Aligned Preferences                               26

concentrate on U1 and U2 :
   Suppose F1 makes an o¤er to W3 in U2 in period 1 with certainty. In this case,
W 1 receives an o¤er from F 1 only when F 1 is the stable match partner (as in U2 , F 3 makes
an o¤er to W 2 in period 1 and to W 1 only in period 2). So in equilibrium W 1 will accept an
o¤er from F 1 in period 1 if it is the only o¤er he receives. This provides strict incentives for
F 1 to make an o¤er to W 1 even in U2 ; resulting in an outcome that is not stable.
   Suppose F1 makes an o¤er to W1 in U2 with probability q 2 (0; 1]: When F 1
makes an o¤er to W 3; F 1 receives a payo¤ of 4, as W 3 accepts immediately. In order for the
market to always yield a stable outcome, it has to be the case that W 1 never accepts an o¤er
from F 1 in period 1 when he receives only that o¤er. Therefore, the expected payo¤ of F 1
from making an o¤er to W 1 is 4 < 4; in contradiction to F 1 playing a best response.

   In the example, W 1 cannot distinguish U1 from U2 . Hence, his set of potential stable match
partners at t = 1 is fF 1; F 3g when either is realized: The crux of the problem is the fact that
W 1 cannot be certain whether he will receive his best o¤er in period 1 or period 2: W 1 tries
to infer that from o¤ers received in period 1: However, o¤ers can then be manipulated. The
example illustrates the potential for manipulation of o¤ers when information regarding the
set of potential stable match partners is transmitted by the mere timing of an o¤er (or the
acceptance of an o¤er). This form of information transmission needs to be restricted to allow
for equilibria that yield the stable match. In what follows we will identify economies that are
consistent with these restrictions.
   Assumption 2 simply poses that when all market participants follow decentralized reduced
DA strategies, the ordering of o¤ers and matches does not convey information in and of itself
to either workers or …rms, with the caveat that there is no top sub-economy. Formally,

Assumption 2 Suppose all agents follow decentralized reduced DA strategies. Let U be in
      the support of G and l be an agent of type     2 ff; wg: Assume that in period t if    =w
      the worker l has no top sub-economy. For each j; k 2 BS l ul (:); ht;l ; if ul (j) > ul (k)
      and k 2 Sl ul (:); ht;l ; then j 2 Sl ul (:); ht;l .

   Assumption 2 assures …rms cannot cross out their favorite available potential stable match
from the set of perceived potential stable matches Sif (ufi ; hft;i ) when using updating based on
                     Decentralized Matching with Aligned Preferences                                      27

worker matches, exits, and rejections (generating BS fi (ufi ; hft;i )). Similarly for workers. An
exception occurs when a worker is in a top sub-economy. In that case, when a worker receives
only one o¤er, he believes the o¤ering …rm is his stable match.28
       Assumptions 1 and 2 prove crucial in assuring incentive compatibility of decentralized
reduced DA strategies. We therefore introduce:

De…nition (Rich Economy) An economy is rich if it satis…es Assumptions 1 and 2.

       Note that richness refers to the support of potential match utilities. It does not rule out
probabilistic updating on the likelihood of di¤erent agents being one’s stable match in the
realized market. While richness is certainly restrictive (we shall return to some important
examples later on), it is an assumption that is satis…ed in several leading examples:

Examples of Rich Economies

   1. Complete Information Economies. Under complete information, agents know their
         stable match at the outset (it is a singleton).

   2. Full Support Economies. For a …xed set of …rms F and workers W, let U( ) denote
         the set of all aligned match utilities in which each match utility is taken from a set of
         potential payo¤s    . Consider the economy in which full support is put on elements of
         U( ): When       contains enough elements, say, 2W F + W + F (so that some elements
         of U( ) are such that all match utilities in the market are di¤erent from one another),
         the economy is rich.

       The examples highlight the idea that richness essentially implies that there is either a lot of
correlation between agents’realized preferences (the extreme case corresponding to complete
information), in which no learning at all takes place during the decentralized market game,
or very little correlation (the extreme case being a full support economy), so that learning
occurs only by eliminating agents who have exited the market or been involved in a rejection.
  28
    Any decentralized reduced DA strategy pro…le leads to the same learning pattern regarding stable matches,
and so the main requirement of Assumption 2 is not a¤ected by which particular pro…le is used. Which reduced
DA strategy pro…le is used may, however, a¤ect the time at which a top sub-economy occurs.
                     Decentralized Matching with Aligned Preferences                           28

      Before stating our existence result, we introduce a mixed decentralized reduced DA
strategy which puts positive probability only on pure decentralized reduced DA strategies.
Recall that decentralized reduced DA strategies are weakly undominated. The equilibrium
implementability of stable outcomes is captured by the following proposition.

Proposition 5 (Aligned Preferences –Existence) Suppose the economy is rich. For
        su¢ ciently high     ; there exists a Bayesian Nash equilibrium in weakly undominated
        strategies of the decentralized market game in which workers use decentralized reduced
        DA strategies and …rms use mixed decentralized reduced DA strategies. Furthermore, the
        outcome is the unique stable match.

      The proof of Proposition 5 follows three steps. First, we set the decentralized reduced DA
strategy of workers to be minimal, so that they only rank potential stable match partners.
When …rms use arbitrary mixed decentralized reduced DA strategies we show that: 1. Workers
are best responding, and 2. Each …rm’s best responses is within the set of decentralized reduced
DA strategies (though not necessarily coinciding with those prescribed by the original pro…le
considered). Second, we consider a restricted (…nite) market game in which agents’strategies
are restricted so that workers use minimal decentralized reduced DA strategies and …rms use
arbitrary decentralized reduced DA strategies. We …nd an equilibrium in that game. From
the …rst step, it follows that this is an equilibrium in the full game. These two steps establish
the existence of an equilibrium in which all agents use (possibly mixed) decentralized reduced
DA strategies. The third step uses Proposition 4 to deduce that in any such equilibrium, the
market outcome is stable. Note that these strategies survive iterated elimination of weakly
dominated strategies.
      Proposition 5 implies that, as long as learning in the market is restricted in terms of what
can be deduced from the mere timing of events, stability can arise as an equilibrium outcome.29

                                 6.   Conclusions and Extensions
We analyzed when a decentralized market game in which …rms make o¤ers and workers react to
them allows for an equilibrium in weakly undominated strategies that yields the stable match.
This is the case when the economy consists of a single market, and hence all agents know who
 29
      Uniqueness, however, is generally not guaranteed.
                    Decentralized Matching with Aligned Preferences                                       29

their stable match partner is. It is also the case when there are no market frictions (taking
the form of discounting in our model). When there are both uncertainty and discounting, the
economy needs to be su¢ ciently rich and discounting has to be insubstantial enough for there
to be an equilibrium that yields a stable outcome.30
       The paper studied the link between a cooperative concept, the core (which is equivalent
to the set of stable outcomes) and (Bayesian) Nash equilibrium in a market game. In our
environments there is always a way to implement the stable outcome as a (Bayesian) Nash
equilibrium using a centralized clearinghouse to which agents (strategically) report (ordinal)
preferences. Hence, the paper emphasizes the di¤erences between markets organized in a
decentralized as opposed to a centralized way.
       A …rst di¤erence is that in a decentralized market game, actions, i.e., o¤ers, (temporary)
acceptances, and rejections can depend on past histories. The consequences of such contingent
actions are easily seen in the case of complete information. Decentralized markets allow for
Nash equilibria in which the outcome may be unstable, even though a centralized clearing-
house implements only stable outcomes through Nash equilibrium. Our alignment assumption
assures that simple re…nements restore uniqueness in decentralized markets. However, when
preferences are not aligned, multiplicity of equilibrium outcomes withstands these re…nements
(see Niederle and Yariv, 2009). Indeed, for general preferences, markets with a unique stable
match may contain sub-markets admitting more than one stable match. This may introduce
incentives for …rms to deviate from the equilibrium that yields the stable outcome of the whole
market.
       A second di¤erence between a centralized clearinghouse and a decentralized market game
concerns whether su¢ cient information is transmitted to allow agents to infer the stable
outcome. In a decentralized market game enough information has to be transmitted in an
incentive compatible way so that: …rst, workers end up with o¤ers from the right …rms and,
second, workers know when to accept o¤ers. Here too alignment is important. Indeed, consider
even the frictionless decentralized market game that always admits an equilibrium yielding
the stable outcome. The construction of such an equilibrium hinges on the fact that, due to
alignment, in every period there is a top-top match. That is, there is a …rm and worker pair
  30
    When discounting is substantial, in the presence of uncertainty richness is not su¢ cient to guarantee an
equilibrium that yields the stable outcome.
                    Decentralized Matching with Aligned Preferences                                    30

that exits the market. This makes the market conclude in …nite time. When preferences are
not aligned, it is less obvious whether workers perceive when the market is over, potentially
providing …rms with incentives to manipulate these perceptions by withholding o¤ers for a
few periods.31
       Finally, a centralized clearinghouse can implement in equilibrium the stable outcomes in
the presence of both uncertainty and frictions (the latter playing no role in the centralized
setting). In decentralized markets, stable outcomes can be generated through Bayesian Nash
equilibria only when the economy is rich. As it turns out, the su¢ ciency of our richness as-
sumption relies on preference alignment. Indeed, the stable blocking pair property of aligned
preferences assures that …rms making o¤ers only to potential stable match partners is su¢ -
cient to eventually generate the stable outcome. This is not necessarily the case for general
preferences (again, see Niederle and Yariv, 2009).
       Our analysis also highlights the importance of frictions, captured by discounting or the
probability of a market breakdown. We note that frictions can take a variety of forms that
would lead to similar conceptual insights. For instance, frictions could take the form of costly
o¤ers. Suppose generating an o¤er costs an amount of c: All of our existence results would
carry through where, in analogy to a vanishing discounting factor, c would become su¢ ciently
small.
       We posed a particular normal form game as a model for decentralized markets. Namely, we
assumed that in every period …rms …rst simultaneously decide whether and to whom to make
an o¤er. Workers collect all their o¤ers and decide whether to accept, reject, hold o¤ers or exit
the market. We stress that these market rules are not only natural on realistic grounds, but
also (possibly consequently) shared by the vast majority of papers on decentralized markets.
Furthermore, our conceptual results are robust to several modi…cations. Indeed, the model
can be directly extended to allow for markets in which only a fraction of …rms are able to
make o¤ers in every period. The results can also be directly translated to a symmetric world
in which workers make o¤ers and …rms collect them. Nonetheless, we view the market game
analyzed in this paper as a starting point.
       Ultimately, the paper shows that when studying markets, it is generally crucial to under-
  31
    Without alignment, this discussion suggests the need for fuller monitoring of actions in the market to
generate stable outcomes in equilibrium, even without discounting (see Niederle and Yariv, 2009).
                        Decentralized Matching with Aligned Preferences                                             31

stand market characteristics that go beyond the identi…cation of market participants and their
preferences. Indeed, it is important to describe markets in detail, in terms of the information
available to participants and the plausibility of frictions, in order to be able to predict which
outcomes they may achieve. This, in turn, implies that channels by which information can be
transmitted among market participants can be a critical element of market design.

                                            7.   Appendix - Proofs
The following notation will be useful for some of our proofs. Suppose preferences are aligned
with ordinal potential        =(    ij ).
                                                                                                  (1)
     Let M (1) = f(i; j) 2 F        W s.t. (i; j) 2 arg max(i;j)2F        W     ij g:      De…ne FM = fjj9i 2 W
                              (1)                                                                   (1)
s.t. (i; j) 2 M (1) g and WM = fij9j 2 F s.t. (i; j) 2 M (1) g: Denote F (2) = F nFM ; W (2) = W n
  (1)
WM : The sub-market corresponding to F (2) and W (2) has aligned preferences and the same
ordinal potential and the procedure above can be replicated. That is, for any k; de…ne M (k) =
                                                                               (k)
f(i; j) 2 F (k)     W (k) s.t. (i; j) 2 arg max(i;j)2F (k)    W (k)   ij g,   FM = fj : 9i 2 W s.t. (i; j) 2
                  (k)                                                                (k)                           (k)
M (k) g, and WM = fi : 9j 2 F s.t. (i; j) 2 M (k) g; F (k+1) = F n FM ; and W (k+1) = W n WM :
Note that the unique stable match                M   can then be identi…ed using recursion: for each k;
whenever (i; j) 2 M (k) ;       M (i)   = j (and any unmapped remaining agents are unmatched
under    M ).


Proof of Proposition 1.
     1. Notice that a rejection cycle is equivalent to the existence of a weak improvement cycle
                                                  f
in the two player game with payo¤ matrix ((uw
                                            ij ; uij ))i;j : Our claim then follows directly from

Voorneveld and Norde (1997).
   2. Suppose preferences are aligned with ordinal potential = ( ij ). For any sub-market
 ~ W;
(F; ~ U~ ), any pair (i; j) 2 arg max           ij constitutes a top-top match and the top-top
                                     (i;j)2F~ W
                                              ~

match property holds.
     In addition, suppose       is a match di¤erent than the unique stable match                   M:     Reconstruct
 M   as above. Consider the smallest k such that there is a pair (i; j) that is matched under
 M   and not under : In that case, (i; j) blocks              and (i; j) 2 M (k) form a top-top match in
the sub-market corresponding to F (k) , W (k) . As this is the …rst discrepancy between                        M   and
  in the iterative process, the match partner (i) of i and (j) of j are part of the remaining
                     Decentralized Matching with Aligned Preferences                                      32

set of …rms and workers and hence inferior to           M (i)   = j and       M (j)   = i; respectively. That
is, the stable blocking property holds.

Proof of Proposition 2.
   Consider any Nash equilibrium that survives iterated elimination of weakly dominated
strategies. Workers using weakly undominated strategies assures that, at any stage, a worker
who receives an o¤er from their most preferred available …rm accepts that o¤er immediately.
                                (1)
At period 1; any …rm i 2 FM must make an o¤er to                M (i),   who will accept immediately. Any
             (2)                                                            (2)
worker in   WM     should therefore accept an o¤er from …rms in FM immediately. It follows that
                   (2)
each …rm i 2 FM must make an o¤er to           M (i)   in period 1 as well. Continuing recursively we
get that all …rms that are matched under       M   must make o¤ers that get accepted immediately
to their corresponding match partner under         M:   It then follows that …rms or workers that are
not matched under        M   must exit the market in period 1: In particular, any pro…le surviving
iterated elimination of weakly dominated strategies must then entail the match                      M   being
realized in period 1:

Proof of Proposition 3.
   Since preferences are aligned, in every period with unmatched agents, there is either a top-
top match that is formed, or only agents on one side of the market are unmatched. Thus, DA
strategies generate a market match in …nite time. From the convergence of the Gale-Shapley
algorithm to a stable match it follows that DA strategies yield the stable match.
   We now show that DA strategies constitute a Bayesian Nash equilibrium.
   Workers can deviate in two ways. First, a worker j can reject an o¤er from …rm i instead
of holding it. From the no cycle property, such a rejection cannot launch a chain generating a
superior o¤er for j. Therefore, if i a potential stable match partner, then such a rejection may
lead j to forgo his best o¤er in some market. Such a deviation could therefore be pro…table
only if it makes the worker su¢ ciently better o¤ in some market realization in which …rm
i is not his stable match. However, in any market, it cannot be that i is strictly better
than j’s stable match partner, as then j should never receive an o¤er from i (indeed, by the
construction of DA strategies; …rm i and worker j would form a blocking pair to the stable
match). The second potential deviation of a worker is the acceptance of an o¤er that is not
                       Decentralized Matching with Aligned Preferences                                   33

from his most preferred unmatched …rm. However, with time workers are made better o¤, as
they receive new o¤ers. Therefore, accepting an o¤er early cannot be a pro…table deviation
when    = 1:
   Consider now the …rms. Suppose …rm i deviates and makes an o¤er to worker j who is not
the most preferred worker among workers who have not rejected i yet. Since                     = 1, if there
is a market in which i strictly bene…ts from this deviation, it must be the case that i ends
up matching with a strictly preferable worker. Suppose the resulting match in the market
(assuming all other agents follow the DA strategies) is . The match                has the property that
                       0
the set of …rms F ; who prefer this match to the stable match            M;   is not empty, as it contains
at least …rm i: By the Blocking Lemma there exists a blocking pair (i ; j ) with i not in F 0 such
that j is matched in         to a …rm in F 0 (see, e.g., Roth and Sotomayor, 1990). However, since
i and j follow DA strategies, i must have made an o¤er to j ; in contradiction.

Proof of Proposition 4.
   1. Assume all agents use a reduced DA rule and suppose E is an economy with a market
                                        0
realization in which the outcome            is di¤erent than the stable match      M.   By Proposition 1,
there exists a pair (i ; j ) that blocks        with   M (i   ) = j . This implies that ufi j > ufi      (i )

and j 2   Sif   (ufi   ): Hence, if …rm i uses a reduced DA strategy, i must rank j above (j ):
For worker j ; since i 2 Sjw uwj       ; j cannot be matched with someone other than i unless,
within the DA algorithm, he receives a better o¤er. However, uw      w
                                                              i j > u (j                )j   implies that j
does not reject i ’s o¤er, in contradiction.
   2. Suppose a 2 F [ W is an agent who does not use a DA rule. That is, agent a ranks
some agent (including potentially a themselves) as preferred to a potential stable match when
match utilities prescribe otherwise. Whenever there is only one worker or only one …rm, the
claim follows trivially. Assume then that jFj ; jWj            2:
   Certainly, if a ranks a potential stable match as unacceptable, then whenever the market
in which the unique stable match entails that individual match for a, the centralized outcome
is not stable.
   Suppose that a 2 W ranks a potential stable match i below a …rm i0 who is not a potential
stable match when observing uwa and the set of potential stable matches is S. Assume uw
                                                                                      ia >

uw
 i0 a : Let j 2 W be another worker (other than a).
                        Decentralized Matching with Aligned Preferences                                                34

    Consider an economy in which there are three markets characterized by match utilities
U; U~ ; and U^ in which in the corresponding stable matches all agents A other than i; i0 ; a; and
j are prescribed to be matched to agents in A or remain unmatched. It therefore su¢ ces to
focus on match utilities corresponding to agents fi; i0 ; a; jg:
   We construct U and U~ so that they satisfy the following:32
       a. Firm i0 cannot distinguish between the two markets, while all other agents can:
       b. Firm i0 prefers worker a to worker j in both markets.
       c. Under U; i and a; and i0 and j; are part of the stable match, while under U~ ; i0 and a
are part of the stable match.
   d. Under U~ ; i0 is both a’s and j’s most preferred …rm.
   U^ is such that u^wj = u~wj ; so that worker j cannot distinguish U~ from U^ ; and j is the most
preferred worker for i0 .
       Each of the remaining markets in the economy is one in which a’s match utilities are given
by uwa and the stable match is an element i00 2 S n fig.
   If the stable match is achieved under U^ ; worker j must rank …rm i0 as acceptable when
observing u^wj = u~wj : Therefore, if the stable match is achieved under U~ ; it must be the case
that i0 ranks a higher than j (and acceptable) when observing ufi0 : But then, under U , it
cannot be the case that the stable match is established. Indeed, the centralized mechanism
generates a stable match for the submitted preference rankings, and i0 and a would form a
blocking pair.
       A similar construction can be presented if a 2 W ranks a potential stable match i below
a less preferred potential stable match i0 when observing uwa and the set of potential stable
matches is S. Furthermore, analogous constructions follow when agent a is a …rm that does
not follow a reduced DA rule.
  32
    These conditions are consistent with alignment: Indeed, assuming without restriction that uw      ~fkl > 2 for
                                                                                                 kl ; u
                                                                                                ~ in which we
any k 2 f?; a; jg and l 2 f?; i; i0 g the reader can think of the following manifestation of U; U
summarize preferences through the following two matrixes, where the …rst number in each rubric corresponds
to the …rm’s preference and the second number to the appropriate worker:

                         a                    j                                     a                   j
        U:    i    uw ia ; uia
                              w
                                     uwia    1; uw
                                                 ia     1    ~:
                                                             U    i    ~fi? 1; u
                                                                       u              ~w   1   ~fi?
                                                                                               u          ~w
                                                                                                       2; u      1 .
                                                                                       ?a                   ?j
                     w        w
              i0   u i0 a ; u i0 a   uw
                                      i0 a   1; uw
                                                 i0 a    1        i0        w
                                                                          u i0 a ; u w
                                                                                   ~?a + 1     uw
                                                                                                i0 a      ~w
                                                                                                       1; u ?j + 1
                      Decentralized Matching with Aligned Preferences                                    35

   3. Assume all agents follow a pro…le v of reduced DA strategies. For …rms, since truthful
revelation is a weakly dominant strategy in the …rm-proposing DA algorithm, which the
centralized market emulates, no deviation can be strictly pro…table.
   Suppose a worker j has a strictly pro…table deviation to a strategy       j.   If   j   is also a reduced
DA strategy, then by part 1 above the outcome is unchanged, in contradiction. Suppose then
that   j   yields a match     such that uw(j)j > uwM (j)j : Then, by Proposition 1, there exists a
pair (i ; j ) that blocks    such that   M (i   ) = j : First, it is clear that j 6= j since j strictly
prefers     to   M:   Since both i and j submit reduced DA strategies, i must rank j above
 (i ): Hence, it must be that j rejects i through the centralized mechanism, contradicting
the fact that (i ; j ) are a blocking pair to :

Proof of Proposition 5. We …rst note that for su¢ ciently high ; whenever all other
workers use minimal reduced DA strategies, specifying only potential stable match partners
as acceptable, and …rms use mixed decentralized reduced DA strategies, using a minimal
reduced DA strategy is a best response for a worker.
   Indeed, at each period t; for su¢ ciently high ; a worker cannot bene…t by exiting the
market whenever a potential stable match is still available, nor from accepting an o¤er from
a …rm who is not his most preferred potential stable match. Last, a worker having o¤ers at
hand cannot bene…t by rejecting a set of …rms di¤erent than the set of all …rms but his most
preferred (in case it is more preferred than his lowest potential stable match). From the no
cycle property, rejection of …rms cannot generate the arrival of an o¤er from a preferred …rm,
and reduced DA strategies assure that rejected …rms will not make future (repeat) o¤ers. In
particular, such deviations cannot speed up matches, nor alter positively the ultimate match.
   We now show that richness assures that whenever workers use a minimal decentralized
reduced DA strategy and …rms use mixed decentralized reduced DA strategies, a …rm’s best
responses are within the class of reduced DA strategies.
   Consider …rst a …rm i that in period t has no outstanding o¤ers, and whose updated strate-
gies suggest worker j as the most preferred stable match. There are two kinds of deviations
from a decentralized reduced DA prescription: (1) make no o¤er, or (2) make an o¤er to some
other worker k who is ranked below j: The bene…ts of such deviations can be either through
speeding up the time at which the …rm’s o¤er is accepted, or through generating a preferred
                    Decentralized Matching with Aligned Preferences                                         36

ultimate match.
       Regarding (1), if …rm i does not make an o¤er at period t; there are three potential
implications. First, if making an o¤er according to any decentralized reduced DA strategy
would not have a¤ected market participants’history following period t;33 then the only e¤ect
of this deviation could be the prolonging of its match creation. If not making an o¤er a¤ects
certain participants’ histories, then due to Assumption 2; this cannot a¤ect the …rm’s …nal
match. Again, such a deviation can only prolong the timing of the match. Finally, suppose
that the …rm’s most preferred potential stable match has a top sub-economy at period t that
contains …rm i: If the worker receives an o¤er from the other …rm in his top sub-economy,
he will accept that o¤er immediately, even if he prefers …rm i; in which case …rm i is strictly
worse o¤.
       Regarding (2), suppose …rm i makes an o¤er to a worker k who is lower ranked than her
most preferred potential stable match j. By Assumption 1; either the …rm will be immediately
rejected, in which case she does not bene…t, or with positive probability her o¤er will be held
or accepted by k in a market in which she would have otherwise gotten a preferable worker:
Such a deviation can never lead to a better ultimate match from the incentive compatibility
inherent in the …rm-proposing DA algorithm. Indeed, note that such a deviation would be
tantamount to submitting an untruthful preference list when the …rm proposing DA algorithm
is used (as, from Assumption 2, such an o¤er will not make other participants change their
e¤ective rank orderings). However, revealing preferences truthfully is a dominant strategy for
…rms.
       Consider now the restricted centralized market game in which workers’ strategy set is
con…ned to minimal decentralized reduced DA strategies, and …rms’strategy set is con…ned
to decentralized reduced DA strategies (mixed or pure). Since there is a …nite number of …rms’
decentralized reduced DA strategies, an equilibrium (possibly mixed) exists in this restricted
game. From the above, for su¢ ciently high ; the corresponding strategy pro…le is also an
equilibrium in our original decentralized market game, as required.

  33
    For instance, in the case in which any such strategy suggests an o¤er to j; who gets matched in that period
with probability 1:
                    Decentralized Matching with Aligned Preferences                     37

                                      8.   References


   Alcalde, José, David Pérez-Castrillo, and Antonio Romero-Medina. 1998. “Hir-
ing procedures to implement of stable allocations,”Journal of Economic Theory, 82, 469-480.
   Alcalde, José and Antonio Romero-Medina. 2000. “Simple Mechanisms to Imple-
ment the Core of College Admissions Problems,”Games and Economic Behavior, 31, 294–302.
   Blum, Yosef, Alvin E. Roth, and Uri Rothblum. 1997. “Vacancy chains and
equilibrium in senior-level labor markets,”Journal of Economic Theory, 76, 362-411.
   Burdett, Ken and Melvyn G. Coles. 1997. “Marriage and Class,” The Quarterly
Journal of Economics, 112(1), 141-168.
   Choo, Eugene and Aloysius Siow. 2006. “Who Marries Whom and Why,”Journal of
Political Economy, 114(1), 175-201.
   Clark, Simon. 2006. “The Uniqueness of Stable Matchings,” BE Press - Contributions
to Theoretical Economics, 6(1), Article 8.
   Coles, Peter and Muriel Niederle. 2009. “Signaling in Matching Markets,”mimeo.
   Crawford, Vincent P., and Elsie Marie Knoer. 1981. “Job Matching with Heteroge-
nous Firms and Workers,”Econometrica, 49(3), 437-450.
   Diamantoudi, E¤rosyni, Eiichi Miyagawa, and Licun Xue. 2007. “Decentralized
Matching: The Role of Commitment,”mimeo.
   Echenique, Federico, Gabriel Katz, and Leeat Yariv. 2009. “An Experimental
Study of Decentralized Matching,”mimeo.
   Eeckhout, Jan. 1999. “Bilateral Search and Vertical Heterogeneity,”International Eco-
nomic Review, 40(4), 869-887.
   Eeckhout, Jan. 2000. “On the uniqueness of stable marriage matchings,” Economic
Letters, 69, 1-8.
   Frechette, Guillaume, Alvin E. Roth, and M. Utku Unver. 2007. “Unraveling
Yields Ine¢ cient Matchings: Evidence from Post-Season College Football Bowls,” RAND
Journal of Economics, 38(4), 967-982.
   Fox, Jeremy. 2008. “Estimating Matching Games with Transfers,”mimeo.
   Gale, David, and Lloyd S. Shapley. 1962. “College Admissions and the Stability of
                Decentralized Matching with Aligned Preferences                      38

Marriage,”American Mathematical Monthly, 69, 9-15.
   Haeringer, Guillaume and Myrna Wooders. 2009. “Decentralized Job Matching”,
mimeo.
   Hitsch, Guenter J., Ali Hortacsu, and Dan Ariely. 2006. “What Makes You Click?
Mate Preferences and Matching Outcomes in Online Dating,”mimeo.
   Kelso, Alexander S., and Vincent P. Crawford. 1982. “Job Matching, Coalition
Formation, and Gross Substitutes,”Econometrica, 50(6), 1483-1504.
   Konishi, Hideo and Margarita Sapozhnikov. 2006. “Decentralized Matching Mar-
kets with Endogeneous Salaries,”mimeo.
   Lee, Soohyung. 2009. “Preferences and Choice Constraints in Marital Sorting: Evidence
From Korea,”mimeo.
   Monderer, Dov and Lloyd S. Shapley. 1994. “Potential Games,” Games and Eco-
nomic Behavior, 14, 124-143.
   Niederle, Muriel and Alvin E. Roth. 2003. “Unraveling reduces mobility in a la-
bor market: Gastroenterology with and without a centralized match,” Journal of Political
Economy, 111(6), 1342-1352.
   Niederle, Muriel, and Alvin E. Roth. 2009. “Market Culture: How Rules Governing
Exploding O¤ers A¤ect Market Performance”, American Economic Journal: Microeconomics,
forthcoming.
   Niederle, Muriel, and Leeat Yariv. 2009. “Matching through Decentralized Markets,”
mimeo.
   Pais, Joana V. 2008. “Incentives in decentralized random matching markets,” Games
and Economic Behavior, 64, 632-649.
   Roth, Alvin E. 1984. “The evolution of the labor market for medical interns and resi-
dents: A case study in game theory,”Journal of Political Economy, 92, 991-1016.
   Roth, Alvin E. 1991. “A Natural Experiment in the Organization of Entry Level La-
bor Markets: Regional Markets for New Physicians and Surgeons in the U.K.,” American
Economic Review, 81, 415-440.
   Roth, Alvin E. 2008. “What have we learned from market design ?,”Economic Journal,
118, 285-310.
                    Decentralized Matching with Aligned Preferences               39

   Roth, Alvin E. and Marilda Sotomayor. 1990. Two-Sided Matching: A Study in
Game-Theoretic Modeling and Analysis. Econometric Society Monograph Series, Cambridge
University Press.
   Shimer, Robert and Lones Smith. 2000. “Assortative matching and search,” Econo-
metrica, 68(2), 343-369.
   Sorensen, Morten. 2007. “How Smart is Smart Money? A Two-Sided Matching Model
of Venture Capital,”Journal of Finance, 62, 2725-2762
   Voorneveld, Mark and Henk Norde. 1997. “A Characterization of Ordinal Potential
Games,”Games and Economic Behavior, 19, 235-242.
