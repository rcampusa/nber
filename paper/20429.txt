                               NBER WORKING PAPER SERIES




 RISK SORTING, PORTFOLIO CHOICE, AND ENDOGENOUS INFORMAL INSURANCE

                                          Xiao Yu Wang

                                       Working Paper 20429
                               http://www.nber.org/papers/w20429


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                    August 2014




I am indebted to Abhijit Banerjee, Esther Duflo, and Rob Townsend for their insights, guidance, and
support. I thank Attila Ambrus, Dan Bennett, Gabriel Carroll, Arun Chandrasekhar, Sebastian Di Tella,
Erica Field, Ben Golub, Rachel Kranton, Andy Newman, Debraj Ray, Chris Walters, Juan Pablo Xandri,
and seminar and conference participants at the CEAR Household and Risk Symposium, Cornell, Chicago,
Duke, NEUDC at Dartmouth, Notre Dame, Stanford, ThReD at Oslo, Yale, Warwick, and the World
Bank for helpful comments. Any errors are my own. Support from the National Science Foundation
is gratefully acknowledged. The views expressed herein are those of the author and do not necessarily
reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2014 by Xiao Yu Wang. All rights reserved. Short sections of text, not to exceed two paragraphs,
may be quoted without explicit permission provided that full credit, including © notice, is given to
the source.
Risk Sorting, Portfolio Choice, and Endogenous Informal Insurance
Xiao Yu Wang
NBER Working Paper No. 20429
August 2014, Revised February 2015, Revised February 2016
JEL No. C78,O1,O17

                                                ABSTRACT

Heterogeneously risk-averse individuals who lack access to formal insurance build and use relationships
with each other to manage risk. I study the formation of these relationships. I show that the composition
of equilibrium groups under pairwise matching and when group size is endogenous is determined by
a trade-off in expected return and variance of return (captured by the coefficient of variation) across
differentially risky productive opportunities, even when output distributions are skewed and have infinitely-many
nonzero cumulants. This has important policy implications. For example, a policy which ignores the
equilibrium response of informal institutions may exacerbate inequality and hurt most those it intended
to help: a reduction in aggregate risk may lead to an increase in risk borne by the most risk-averse
individuals, as the least risk-averse abandon their roles as informal insurers. Understanding informal
occupations as equilibrium choices as opposed to exogenous assignments generates insights into the
role played by endogenous insurance relationships in shaping informal firm structure and the development
of entrepreneurship.


Xiao Yu Wang
Department of Economics
Duke University
213 Social Sciences Building
Box 90097
Durham, NC 27708
and NBER
xy.wang@duke.edu
       Risk Sorting, Portfolio Choice, and Endogenous Informal
                                               Insurance
      (previously circulated as "Endogenous Informal Insurance
                                          Relationships")
                                               Xiao Yu Wang

                                               April 12, 2015



                                                  Abstract
          Heterogeneously risk-averse individuals who lack access to formal insurance build and use
      relationships with each other to manage risk. I study the formation of these relationships. I
      show that the composition of equilibrium groups under pairwise matching and when group size is
      endogenous is determined by a trade-o¤ in expected return and variance of return (captured by
      the coe¢ cient of variation) across di¤erentially risky productive opportunities, even when out-
      put distributions are skewed and have in…nitely-many nonzero cumulants. This has important
      policy implications. For example, a policy which ignores the equilibrium response of informal
      institutions may exacerbate inequality and hurt most those it intended to help: a reduction
      in aggregate risk may lead to an increase in risk borne by the most risk-averse individuals, as
      the least risk-averse abandon their roles as informal insurers. Understanding informal occupa-
      tions as equilibrium choices as opposed to exogenous assignments generates insights into the
      role played by endogenous insurance relationships in shaping informal …rm structure and the
      development of entrepreneurship.




1    Introduction
    Risk imposes a serious burden on the poor, and the absence of formal insurance and credit
a¤ects their lives through many channels.1 In order to better understand these channels, this
     Department of Economics, Duke University, 213 Social Sciences, Box 90097, Durham NC 27708. Email:
xy.wang@duke.edu. I am indebted to Abhijit Banerjee, Esther Du‡o, and Rob Townsend for their insights, guidance,
and support. I thank Attila Ambrus, Dan Bennett, Gabriel Carroll, Arun Chandrasekhar, Sebastian Di Tella, Erica
Field, Ben Golub, Rachel Kranton, Andy Newman, Debraj Ray, Chris Walters, Juan Pablo Xandri, and seminar
and conference participants at the CEAR Household and Risk Symposium, Cornell, Chicago, Duke, NEUDC at
Dartmouth, Notre Dame, Stanford, ThReD at Oslo, Yale, Warwick, and the World Bank for helpful comments. Any
errors are my own. Support from the National Science Foundation is gratefully acknowledged.
   1
     For background and institutional details, see, for example, Alderman and Paxson (1992), Dercon (2004),
Fafchamps (2008, and Morduch (1995). Empirical risk-sharing papers include Dercon and Krishnan (2000), Fafchamps


                                                       1
paper develops a theory of the equilibrium formation and structure of the relationships which poor,
risk-averse people build with each other, when they lack access to formal markets. The risk-sharing
literature has so far focused on analyzing the insurance agreement reached by a …xed, isolated group
of individuals, or by individuals who match with a …xed probability. By contrast, this paper studies
what groups exist and coexist in the …rst place. Approaching risk-sharing from this angle reveals
that endogenizing the structure of informal insurance plays an important role in policy analysis
by enabling policymakers to account for the re-optimization of informal institutions. A concrete
example in Section 4 demonstrates that accounting for this re-optimization can substantially alter
policy evaluation and design. In addition, endogenizing informal insurance yields insights into the
connections between informal insurance and income inequality, entrepreneurship, and the structure
of informal …rms.
    The in‡uence of risk management on the lives of poor individuals is well-documented in the
literature. For example, Rosenzweig and Stark (1989) show that daughters of more risk-averse
farmers are married to more distant villages, to minimize the correlation between farming incomes.
Stiglitz (1974) shows that sharecropping arises when landowners layer insurance provision on top of
incentives for tenant farmers, and Ackerberg and Botticini (2002) …nd evidence that heterogeneously
risk-averse tenant farmers and landlords in medieval Tuscany strategically formed sharecropping
relationships based on di¤ering risk attitudes. These are just a few examples of the creative ways
in which the poor use relationships with each other in response to the risks they face. Risk attitude
is evidently an important characteristic in a risk-sharing partner, and patterns of matching in risk
attitude range between the extremes.
    The theory has the following key elements. Risk-averse individuals with exponential utility
undertake productive opportunities together. For example, in an agricultural village, some indi-
viduals own land but would prefer not to farm it themselves, while other, landless individuals have
both the willingness and the skill to farm. Alternatively, an investor and an entrepreneur, or two
entrepreneurs with di¤erent sets of skills and resources, must work together to launch a business.
Matching is assumed to be pairwise in the benchmark model, but this is later relaxed to allow
group size itself to be endogenous.
    There are two key types of heterogeneity: heterogeneity of preferences, and heterogeneity of
technology. Individuals vary in their degree of constant absolute risk aversion, and a matched group
chooses a joint income distribution from a set of di¤erentially risky options, or "projects". (This
is substantively equivalent to the case where individuals each choose an income distribution and
share the pooled realizations.2 ) Projects with higher expected return also have higher variance of
and Lund (2003), Mazzocco and Saini (2012), and Townsend (1994). Theoretical papers on informal insurance in-
clude Bloch et. al. (2008), Genicot and Ray (2003), and Ligon et. al. (2002). Theoretical and empirical papers
on risk-sharing networks include Ambrus et al. (2013), Bramoulle and Kranton (2007), and Fafchamps and Gubert
(2007).
   2
     A simpli…ed intuition for the equivalence is that even if individuals choose their own income distributions, the
matching is driven by individuals’anticipation of what their joint income distribution would be with di¤erent partners.
Thus, matched individuals are e¤ectively jointly choosing a distribution of pooled income. Please see Appendix 1 for
more details.



                                                          2
return, and members of a group share the realized return of their chosen project according to a rule
they set before returns are realized. Thus, agents are able to share risk ex ante and ex post–they
can choose the riskiness of the income stream they face (income-smoothing), and they can choose
how to share a given risk (consumption-smoothing). For example, investors seeking to form joint
ventures are presented with business proposals of di¤ering riskiness and must decide how to share
the returns, and a landowner and her tenant farmer face a spectrum of portfolios of crops, land
plots, inputs, and farming methods, which each yield di¤erent pro…t distributions, and must decide
on a compensation scheme. I allow for a large class of symmetric and skewed return distributions.
Importantly, distributions may have in…nitely many higher order cumulants (substantially more
general than the case of two nonzero cumulants, that is, the normal distribution).3
       The results reveal that accounting for the endogeneity of informal institutions can be essential
for policymaking. I show that a policy which reduces aggregate risk is a strict Pareto improvement
if informal insurance is assumed to stay …xed. However, accounting for the endogenous network
response may change this analysis entirely. Those the policy is particularly intended to help, the
most risk-averse, are in fact particularly harmed: the change in the risk environment incentivizes the
less risk-averse agents to abandon their roles as informal insurers of the more risk-averse, in favor of
partnerships with other less risk-averse agents. The least risk-averse agents can now take advantage
of the risk-reduction policy and choose the entrepreneurial projects with higher expected return.
However, the most risk-averse agents are left to match with each other, leaving them strictly worse
o¤ through two channels. First, they’ve lost insurance through weakened consumption-smoothing–
each member wants her consumption to depend as little as possible on her income realization, but
neither partner is willing to absorb the volatility to provide this. This is compounded for these
more risk-averse agents by an additional channel: the loss of consumption-smoothing means that
the group must rely especially on income-smoothing to manage risk. But this means selecting
projects with particularly low expected return, so that the more risk-averse agents are unable to
take advantage of a policy which reduces the variance of the entrepreneurial projects with higher
expected return.
       Notably, this is the case despite the ability of individuals to commit ex ante to a return-
contingent sharing rule. Attanasio and Rios-Rull (2000) study informal insurance from the per-
spective of limited commitment, where members of an exogenously-speci…ed group punish those
who renege by consigning them to autarky. They …nd that aggregate risk reduction resulting
from the strengthening of formal insurance may decrease welfare by making autarky more appeal-
ing, thereby weakening the punishment for reneging. This channel of limited commitment di¤ers
dramatically from the channel of endogeneity explored in this paper.4 Mobarak and Rosenzweig
(2012) study a di¤erent interaction between formal and informal insurance. They …nd that formal
insurance, which comes with basis risk, acts as a complement to informal insurance when informal
methods manage idiosyncratic risk well, and acts as a substitute when they don’t. However, the
   3
    Recall that the cumulant-generating function is the log of the moment-generating function.
   4
    Although the intent of the model is to focus on the endogeneity of informal insurance and shut down commitment
problems, I discuss the e¤ect of introducing limited commitment in Appendix 12.


                                                        3
strength of informal insurance is …xed exogenously. By endogenizing informal insurance, this paper
suggests a variety of interesting ways to build on these …ndings–for example, this paper ties an
understanding of when informal insurance is relatively strong or weak to data-based conditions,
suggesting an approach for policymakers to know when to expect formal and informal insurance to
be complements or substitutes, and how to in‡uence this relationship.
      The theory suggests that a key characteristic of the environment which drives equilibrium match-
ing is the set of risky opportunities available. I show that, although the return distributions may
have in…nitely many nonzero cumulants, unique assortative matching in risk attitude is determined
by the …rst two cumulants alone (the mean and the variance), and does not depend on any aspect
of the distribution of risk attitudes in the population. Speci…cally, if the coe¢ cient of variation of
return (the ratio of the standard deviation to the mean) across all possible projects is decreasing
in the mean (that is, projects with higher expected return have a smaller coe¢ cient of variation),
then unique positive assortative matching results in the pairwise equilibrium, while if the coe¢ cient
of variation is increasing in the mean, unique negative assortative matching results in the pairwise
equilibrium. Note that the preference structure is not driving this result–for example, the entire
sequence of cumulants matters when the set of return distributions does not satisfy the properties
described in the model.5
      But when is the coe¢ cient of variation decreasing or increasing in expected return? Think of
the function describing the variance of project return when the mean return is p as the "cost" of
obtaining an expected return p. Then the coe¢ cient of variation is decreasing (increasing) in mean
return if and only if the marginal cost function is concave (convex) in the mean p. Intuitively,
equilibrium matching is driven by the trade-o¤ between preference for a similar partner when
choosing risk ex ante, and preference for a dissimilar partner when sharing risk ex post, and the
curvature of the marginal cost function captures this trade-o¤. I show that when the ability to share
risk ex post is shut down, e.g. because the government passes a wage law which e¤ectively …xes
sharing rules, positive assortative matching is always the unique equilibrium. This is supported
by the experimental …nding of Attanasio et al. (2012), who …nd that individuals match positive
assortatively in risk type when they know each other’s types, and when they are able to choose
what risky gamble to face, but must equally share returns. By contrast, when the ability to choose
risk ex ante is shut down, negative assortative matching is always the unique equilibrium. This
coincides with the theoretical …nding of Legros and Newman (2007), Schulhofer-Wohl (2006), and
Chiappori and Reny (2006), and is supported by the empirical …nding discussed earlier of Ackerberg
and Botticini (2002) that landowners and farmers matched negative assortatively in risk attitude.
      Finally, I allow group size itself to be endogenous. Using coalitional stability as the equilib-
rium criterion, I show that, under the condition yielding unique positive assortative matching in
the pairwise case, whole-group matching (maximal connectedness) is the unique equilibrium, while
under the condition yielding unique negative assortative matching in the pairwise case, negative
  5
   See Appendix 9 for more detail.
  Note that the reciprocal of the coe¢ cient of variation is known as the Sharpe ratio (Sharpe (1966).



                                                         4
assortative, pairwise matching (minimal connectedness) continues to be the unique equilibrium.
Thus, extremal network shapes are tied to extremal within-group composition, which yields in-
triguing predictions for the structure of informal …rms. The result provides an interesting contrast
to Genicot and Ray (2003), who …nd that, under limited commitment, whole-group matching can
never be sustained. In their model, because individuals cannot choose what risk they face and
cannot commit to a sharing rule, the marginal bene…t of an additional member is eventually neg-
ative: an individual’s expected income is independent of group size, but she becomes increasingly
likely to bear a partner’s downside risk as the group grows. In my model, it is possible for the
marginal bene…t of an additional member to be positive even for arbitrarily large groups, since the
trade-o¤ is slightly di¤erent: adding a member allows the group to take on additional risk because
of the increased ability to share risk ex post, which the group can leverage into taking up a higher
mean, higher variance project. However, now the realized surplus must be divided across more
people. I show that the curvature of the marginal variance cost function again determines which
force outweighs.
         In the next section, I set up the benchmark model with pairwise matching and provide the
main matching results. I then study a hypothetical policy, show how it maps into the theoretical
framework, and demonstrate that the evaluation of the welfare impact changes dramatically after
accounting for the response of the network. Following this, I extend the model and allow group
size itself to be endogenous. Then, I discuss falsi…ability of the theory, and show support for the
theory in the existing empirical literature. Finally, I conclude. Technical details are relegated to
the Appendix (A).


2         The Model
         In the benchmark model, matching is restricted to be pairwise. In Section 5, I relax the
constraint of partnerships and analyze this model when group size itself is endogenous.

2.1         Setup
         The population of agents: the economy is populated by two groups of agents, G1 and G2,
where jG1j = jG2j = Z, Z 2 f2; 3; 4; :::g.6 (The case jG1j =
                                                           6 jG2j does not substantively change
the results: the most risk-averse individuals of the larger group simply remain unmatched. See
Appendix 3 for details.) Agents di¤er in their Arrow-Pratt degree of absolute risk aversion r,
where an agent i of type ri receives utility ui (x) =             e   ri x   from consuming x units of output. Let
ri > 0: each individual is risk-averse to some extent. De…ne agent ri ’s degree of risk tolerance:
           1
Ri         ri .
     6
    Matching is assumed to be across two groups rather than within a single group because assortative matching
patterns are well-de…ned under the former, not because it is necessary for the results. To see this, suppose that
matching is within a group of four people, fr1 ; r2 ; r3 ; r4 g, ordered from least to most risk-averse. Then there are two
possible positive assortative matchings: f(r1 ; r2 ); (r3 ; r4 )g, and f(r1 ; r3 ); (r2 ; r4 )g.




                                                            5
       No assumptions are imposed on the distributions of risk preferences within each group, or across
groups.
       The risky environment: a spectrum of risky projects is available, with return distributions
parameterized by p 2              R+
                                   0 . A project p returns Yp , a random variable described by:

                                                                 1
                                                Yp = p + V (p) 2 Y

where Y is a random variable with a well-de…ned cdf FY : R ! [0; 1], and E(Y ) = 0; V (Y ) = 1.
Note that this allows for a large class of possible distributions for project returns, which may be
symmetric or skewed, including the Normal, Laplace, Logistic, Student, and generalized extreme
value (e.g. Gumbel) distributions.7 (Appendix 10 re-expresses this portfolio choice problem as a
decision between investing in a risky and a risk-free asset, for readers who …nd that formulation more
intuitive. Section 4 provides a concrete example of how farmers choosing between crop portfolios
with varying pro…t distributions can be represented in this way.)
       Hence:

                                                E(Yp ) = p
                                                V (Yp ) = V (p)

       The function V :        ! R+
                                  0 describes the variance of a project with expected return p. Assume
that       = R+
              0 , so that there exists a portfolio which is not strictly dominated achieving expected
return p for each p       0.
       Let V ( ) be thrice-di¤erentiable, and:

   1. V (0) = 0, V (p) > 0 for p > 0.

   2. V 0 (0) = 0, V 0 (p) > 0 for p > 0.

   3. V 00 (p) > 0.

       The …rst property ensures that variance is nonnegative, and that an action which returns 0 with
certainty exists (e.g. "do nothing").8 The second property ensures that projects with higher mean
return also have higher variance of return.9 Finally, the third property ensures an interior solution
for project choice for any agent r.
       A subset of the risky projects available might therefore be represented like this:
   7
      A family of distributions with this property is sometimes called a location-scale family.
   8
      Imagine instead that the variance of a project with mean p were given by V (p) + c, where V (0) = 0, c > 0.
Then the level c a¤ects what an individual’s project choice is, but does not a¤ect the marginal variance cost across
projects, which is what’s crucial for matching. Thus, I simply assume c = 0, which has the e¤ect of a normalization.
    9
      This is not a strong assumption in the sense that this spectrum of portfolios maps into the standard problem of
choosing how much to invest in a risky and a risk-free asest, and Appendix 10 shows that the mean return of the
risky asset being greater than the risk-free return guarantees V 0 (p) > 0:




                                                         6
   Production: Assume that any project p requires the partnership of two agents, one from
G1 and one from G2. For example, a landowner and a tenant farmer must work together to
choose inputs and grow crops, two adults marry to form a productive household, an investor funds
an entrepreneur with a business proposal, two entrepreneurs with di¤erent skill sets and time
constraints work together to form a successful joint venture, and so on. A matched pair (r1 ; r2 )
jointly selects a project. (See Appendix 1 for a proof that this is equivalent to one where each
partner individually chooses a project and both share the pooled returns.)
   All matched pairs face the same spectrum of projects, each agent can be involved in at most
one project, and there are no "project externalities". That is, one pair’s project choice does not
a¤ect availability or returns of any other pair’s project.
   To focus on the impact on equilibrium matching of the trade-o¤ in ex ante and ex post risk
management across partnerships of di¤erent risk compositions, there is no moral hazard in this
model, although it is straightforward to allow for observable, contractible actions. Please refer to
Wang (2013b) for an explicit treatment of moral hazard and informal insurance in an endogenous
matching problem.
   Information and commitment: all agents know each other’s risk types and the risk envi-
ronment.
   A given matched pair (r1 ; r2 ) undertaking project p12 observes the realized output yp12 of their
partnership, and is able to commit ex ante to a feasible return-contingent sharing rule s : R ! R
(there is no limited liability). Denote r2 ’s share of realized output by s(yp12 ). Feasibility implies


                                                  7
that the income r1 receives must be less than or equal to yp12                           s(yp12 ). Since all agents have
monotonically increasing utility, r1 ’s share will be equal to yp12                   s(yp12 ).
       The equilibrium: An equilibrium            is10 :

   1. The matching pattern: a match function                       : R+ ! R+ , mapping each agent in group 1 to
        a single agent in group 2. Thus, r1 ’s partner is denoted by (r1 ), and ( ) assigns distinct
        members of group 1 to distinct partners in group 2.11
        Moreover, the matching pattern described by ( ) must be stable. It must be that no agent
        is able to propose a feasible project and sharing rule to an agent not matched to her under ,
        such that both agents are happier when matched with each other in this proposed arrangement
        than they are with the partners assigned by                  ("no blocks").12

   2. The risky projects: a project choice for each matched pair, such that no pair can achieve
        weakly better outcomes for both partners (and a strictly better outcome for at least one
        partner) by choosing a di¤erent project. In other words, the project chosen by a matched
        pair must be optimal for that pair.

   3. Individual payo¤ s and sharing rules: a sharing rule for each matched pair, describing the
        amount each partner receives given each possible return realization, where the sum of shares
        cannot exceed the total return (feasibility). The sharing rule must be such that no pair can
        achieve weakly better outcomes for both partners (and a strictly better outcome for at least
        one partner) by choosing a di¤erent sharing rule. In other words, the sharing rule chosen by
        a matched pair must be optimal for that pair.
        Individual payo¤s will not be unique in the equilibrium of this model. Instead, the stability
        conditions will determine a set of equilibrium surplus divisions. For a matched pair (ri ; (ri )),
        let vi denote the expected utility of (ri ) in equilibrium, and (ri ; (ri ); vi ) denote ri ’s max-
        imal expected utility given that           (ri )’s expected utility is vi . Then a vector of individual
        payo¤s described by (v1 ; :::; vN ) can be supported in equilibrium if and only if for each ri :

                                           (ri ; (ri ); vi )        (ri ; (rj ); vi ) 8j 6= i


        That is, given the divison of surplus described by (v1 ; :::; vN ), no two individuals who are
        unmatched are able to match with each other instead, and split the surplus they generate in
        such a way that they are both weakly better o¤, and at least one of them is strictly better
        o¤.
  10
     Existence is assured by Kaneko (1982).
  11
     In practice, characteristics other than risk aversion, such as kinship and friendship ties, surely factor into matching
decisions. However, the model is still key for understanding the equilibrium match. For example, friends and family
are more likely to know each other’s risk types, and are more likely to trust each other, and to monitor and discipline
each other. Hence, an individual might …rst identify a pool of feasible risk-sharing partners, where this pool would
be shaped by kinship and friendship ties, due to good information and commitment properties. Individuals would
then choose their risk-sharing partners from these pools based on risk attitude.
  12
     Individual rationality holds, as individuals cannot produce on their own.


                                                               8
    Matching patterns: Let Gj = frj1 ; rj2 ; :::; rjZ g, j 2 f1; 2g, ordered from least to most risk-
averse. Under "positive assortative matching" (PAM), the ith least risk-averse person in G1 is
matched with the ith least risk-averse person in G2:                 (r1i ) = r2i , i 2 f1; :::; Zg. For example, (r11 ; r21 )
are matched under PAM.
    On the other hand, under "negative assortative matching" (NAM), the ith least risk-averse
person in G1 is matched with the ith most risk-averse person in G2:                       (r1i ) = r2Z   i+1
                                                                                                               , i 2 f1; :::; Zg.
For example,    (r11 ; r2Z )   are matched under NAM.
    The unique equilibrium matching pattern is PAM (NAM) i¤ the only                               which is stable under
optimal within-pair sharing rules and projects is the match function which assigns agents to each
other positive (negative) assortatively in risk attitudes.
    The next section discusses the results for this model, with technical details relegated to the
Appendix.


3     Results
    The …rst step is to identify a transferable utility representation for this model.13 The hetero-
geneity of risk-aversion makes this a model of matching under nontransferable utility: one unit of
output yields utility u1 (1) =           e   r1   for an agent with risk aversion r1 , but utility u2 (1) =                e   r2

6= u1 (1) for an agent with risk aversion r2 . Thus, an individual evaluates potential partners based
not only on how much output they can produce together, as in the standard case, but also on how
happy the partner is with a given level of output–a partner who produces a lot but then demands
a large transfer might be less desirable than a partner who produces less but is satis…ed with little.

Lemma 1 Expected utility is transferable in this model. Denote a matched pair by (r1 ; r2 ) and
their chosen project by p (r1 ; r2 ). Let CE(r1 ; r2 ; p (r1 ; r2 )) describe the certainty-equivalent of a
matched pair in equilibrium; it is twice continuously di¤ erentiable in each argument. Then:

                                 @CE(r1 ; r2 ; p (r1 ; r2 ))
                                                                   > 0 , unique P AM
                                         @r1 r2
                                 @CE(r1 ; r2 ; p (r1 ; r2 ))
                                                                   < 0 , unique N AM
                                         @r1 r2

    The equilibrium matching maximizes the sum of certainty-equivalents, and is Pareto e¢ cient.

    A quick sketch of the proof of Lemma 1 provides a useful understanding of the matching problem,
but all technical details for the proof of the lemma are relegated to Appendix 2.
    First, we characterize the optimal project and sharing rule chosen by a matched pair (r1 ; r2 ).
Suppose r1 and r2 have already selected a project p. Let v 2 R parameterize the division of surplus
  13
     Schulhofer-Wohl (2006) identi…es conditions on preferences under which expected utility is transferable in a more
basic risk-sharing problem, where agents face an exogenous risk and can commit ex ante to a return-contingent
sharing rule. That is, they are not able to choose what risk they face.
  Because the risk-sharing problem is di¤erent, we can’t directly apply Schulhofer-Wohl’s conditions, and it is nec-
essary to prove that expected utility is transferable in this set up.


                                                               9
between the two partners. Then the program below characterizes the equilibrium sharing rule,
given v. (Symmetry implies that the program could also have been set up …xing r1 ’s expected
utility.)                                  Z   1
                                                             r1 [yp s(yp )]
                                 max                    e                     f (yp jp)dyp s:t:
                                 s(yp )         1
                                       Z   1
                                                        r2 s(yp )                               v
                                                    e                 f (yp jp)dyp          e
                                            1

       Solving this program shows that the optimal sharing rule is linear, where the more risk-averse
partner’s transfer is less dependent on realized output yp . That is, if r1 < r2 (so r2 is more risk-
                                             r1              1
averse), then r2 receives a share          r1 +r2       <    2    of realized output, plus a constant. The division of
surplus v a¤ects only the constant part of the total transfer.
       Since r2 ’s expected utility is …xed at v, it’s clear that, for each v, both members "agree" on
project choice–they want to maximize surplus, given the division.14 The optimal project can thus
be characterized by maximizing r1 ’s objective function under s (yp ; v). Crucially, this shows that
there exists a unique optimal project for the pair, which depends only on their risk tolerances and
not on the division v.
       We can now express the certainty-equivalent for each member of the pair, given v:
                                                                  Z   1
                                       1   1                                   r1 r2
                                                                                     y
                                                                              r1 +r2 p
                                                                                                                   1
                 CEr1 (v) =              +                  log           e              f (yp jp (r1 ; r2 ))dyp      v
                                       r1 r2                          1                                            r2
                                1
                 CEr2 (v) =        v
                                r2

       This makes it clear that r2 gains one unit of certainty-equivalent at the expense of exactly one
unit of certainty-equivalent for r1 . Since the certainty-equivalent is just a monotonic transformation
of expected utility, this shows the transferability of expected utility. Hence, conditions under which
CE : G1        G2 ! R exhibits increasing and decreasing di¤erences in risk types are necessary and
su¢ cient for unique PAM and NAM, respectively. Proposition 1 provides these conditions.

Proposition 1 Recall that V (p) describes the variance cost of a project with mean return p. Then
M (p)       V 0 (p) describes the marginal variance cost of a project with mean return p.
       (a) A su¢ cient condition for PAM to be the unique equilibrium match is M 00 (p) < 0 for p > 0
(concavity).
       (b) A su¢ cient condition for NAM to be the unique equilibrium match is M 00 (p) > 0 for p > 0
(convexity).
       (c) A su¢ cient condition for any match to be sustainable as an equilibrium is M 00 (p) = 0 for
p > 0 (linearity).

       Note that while the curvature of marginal variance cost is su¢ cient for assortative matching
in a known population of individuals, it is both necessary and su¢ cient to guarantee assortative
  14
    Wilson (1968) showed that, as a consequence of CARA utility, any pair acts as a syndicate and "agrees" on
project choice.


                                                                      10
matching for any possible population G1              G2         R+     R+ (for the matching conditions to be
independent of what risk types are in the population).
   Note that Proposition 1 tells us that equilibrium matching depends only on the relationship
between the mean and the variance of the risky project returns, even though the return distributions
may have in…nitely many nonzero higher order cumulants (Appendix 9 shows why this is not a direct
consequence of CARA preferences).
   The following corollary provides intuition for this result by relating the curvature of the marginal
variance function to properties of the risk environment.
                                      1
                                  V (p) 2
Corollary 1 Let CV (p) =             p      represent the coe¢ cient   of variation of a project p. Then:
   (a) CV   0 (p)   < 0 8p > 0           00
                                 i¤ M (p) < 0 8p > 0 (P AM )
   (b) CV 0 (p) > 0 8p > 0 i¤ M 00 (p) > 0 8p > 0 (N AM )

   Recall that the coe¢ cient of variation is unitless (dimensionless), and thus a convenient tool for
comparing portfolios.
   As the proof of Proposition 1 involves a novel approach to portfolio problems with higher order
cumulants, I sketch it here. Details for the proofs of the proposition and the corollary can be found
in Appendix 4.
   De…ne the representative risk tolerance of a matched pair (r1 ; r2 ):

                                                 R         R1 + R2
                                                           1    1
                                                              +
                                                           r1 r2

   Then observe that the sum of certainty-equivalents of the pair, CE(r1 ; r2 ), depends only on
each individual’s risk tolerance through the representative risk tolerance of the pair:

                            CE(r1 ; r2 ) = CE(R(r1 ; r2 ))
                                                  Z 1
                                                                     1
                                                                       y
                                                                     R p
                                         =  R log      e                   f (yp jp (R))dyp
                                                                1

   Moreover, CE(r1 ; r2 ) exhibits supermodularity (submodularity) in r1 ; r2 precisely when CE(R)
exhibits convexity (concavity) in R.
   The key is to observe that CE(R) is the product of                  R and the cumulant-generating function
KYp (t) of the distribution of project returns Yp . The cumulant-generating function (cgf) is the log
of the moment-generating function (mgf), and the …rst two cumulants of any distribution are the
                                                       1
mean and the variance. Since Yp = p + V (p) 2 Y , the sequence of cumulants for each Yp can be
expressed as a function of the sequence of cumulants for Y .
   Using the series expansion of the cgf, where kn (y) denotes the nth cumulant of Y , we see that:
                                                      1
                                                      X ( 1)n         n
                                   CE(p; R) = p             n 1
                                                                V (p) 2 kn (y)
                                                        n!R
                                                      n=2


                                                           11
   A pair with representative risk tolerance R chooses p to maximize CE(p; R). Thus, the optimal
project balances the marginal bene…t of increased mean with the marginal cost of higher "general-
ized variance" (the aggregated higher-order cumulants which form a polynomial in V (p)), where a
given level of "generalized variance" is less costly for more risk-tolerant pairs. Hence, the curvature
of the marginal variance cost M (p) is at the heart of the curvature of CE(R) and of assortative
matching.
   Corollary 1 sheds light on how the curvature of M (p) shapes the set of portfolios available to a
population, providing further intuition for the connection between M (p) and equilibrium matching.
A less risk-averse person enjoys the premium a more risk-averse partner is willing to pay her to
smooth his consumption, but acting as the informal insurer and bearing her partner’s risk forces
the pair to choose a safer project with lower expected return. If she instead matches with a less
risk-averse partner, she forgoes the premium from providing insurance, but she and her partner
are able to undertake a riskier project with higher expected return. Whether a less risk-averse
individual prefers to be an informal insurer or an entrepreneur, and thus whether negative or
positive assortative matching results, depends on whether partnerships generate the most value
through insurance or production. When the ratio of standard deviation to expected return is
higher for projects with higher expected return, the less risk-averse will prefer to be informal
insurers; when the ratio is lower, the less risk-averse will prefer to be entrepreneurs and choose high
risk, high return projects.
   Thus, the key trade-o¤ is between sharing a given risk, and choosing what risk to share. Propo-
sitions 2 and 3 make this clear by shutting down each channel in turn and characterizing the
equilibrium match. I show that, when individuals face a …xed risk and partner choice a¤ects only
how that risk is shared, negative assortative matching is the unique equilibrium, and the less risk-
averse act as informal insurers. When individuals face a …xed sharing rule and partner choice
a¤ects only what risk is faced, positive assortative matching is the unique equilibrium, and the less
risk-averse are entrepreneurs.

Proposition 2 Suppose that all agents in G1 draw income iid from a distribution M , and all
agents in G2 draw income iid from a distribution W , so that all possible pairs face the same joint
income distribution. Once matched, agents can commit ex ante to a return-contingent sharing rule.
Then the unique equilibrium matching is NAM.

   See Appendix 5 for the proof.
   This coincides with the theoretical …nding of Legros and Newman (2007), Schulhofer-Wohl
(2006), and Chiappori et al. (2006), and with the empirical …nding of Ackerberg and Botticini
(2002), who …nd that heterogenously risk-averse landlords and tenant farmers who chose sharing
rules but who couldn’t choose which crop portfolios to grow matched negative assortatively in
medieval Tuscany.

Proposition 3 Suppose that the slope of the sharing rule s(Rp ) = a + bRp is …xed. For example, a
wage law requires a 50-50 split of output. However, a matched pair is able to choose a risky project

                                                  12
                         1
p, where Yp = p + V (p) 2 Y as in the benchmark model. Then the unique equilibrium matching is
PAM.

    See Appendix 6 for the proof.
    When the dependence of each agent’s consumption on realized return is …xed exogenously, less
and more risk-averse agents can no longer capitalize on gains from trade: more risk-averse agents
are unable to o¤er the less risk-averse higher premiums to bear their risk. Hence, partnerships
are motivated by production (project choice), and positive assortative matching is the unique
equilibrium. This aligns with the experimental …nding of Attanasio et al. (2012), who …nd that
agents match positive assortatively in risk preference when they can choose the riskiness of the
gamble they face, but the sharing rule is …xed at equal division.
    Finally, Proposition 4 tells us that positive (negative) assortative matching corresponds to a con-
vex (concave) relationship between the mean joint incomes of matched pairs and the representative
risk tolerances of those matched pairs.

Proposition 4 Let p (ri ; (ri )) denote the mean return of the project chosen by a matched pair
(ri ; (ri )). Then:
    (a) If M 00 (p) < 0 for p > 0, then p (ri ; (ri )) is convex in representative risk tolerance
R(ri ; (ri )).
    (b) If M 00 (p) > 0 for p > 0, then p (ri ; (ri )) is concave in representative risk tolerance
R(ri ; (ri )).

    See Appendix 7 for the proof.
    This result suggests a falsi…ability test for the theory which requires observing only the actual
matching and mean incomes (e.g. average household income). Importantly, the test would not
require any data on higher-order moments of income distributions (such as the variance), or any
counterfactual matching data (such as how agents would have behaved had they been matched
with other partners). Falsi…ability is discussed in detail in Section 6.


4    Policy
    This section uses the paper’s theoretical framework and main results to demonstrate concretely
how the evaluation of a policy’s welfare impact can change substantially depending on whether the
endogenous response of informal institutions is accounted for. An important and salient example
of such a policy is crop price stabilization, which directly a¤ects the risk environment farmers face.
Many of the world’s poor depend on agriculture for a livelihood, and a common governmental
measure to reduce the risk burden for poor farmers is to stabilize crop prices by imposing price
‡oors and ceilings. Notable examples include the stabilization of maize, sorghum, and rice prices
in Venezuela, the Andean Price Band system between Colombia, Ecuador, and Venezuela, and
bananas and grains in Ethiopia (Knudsen and Nash (1990), Minot (2010)).


                                                  13
    The hypothetical policy studied in this section is one which places price bands on crops (main-
taining the mean pro…tability of each crop but reducing each variance). The policy is shown to
be a strict Pareto improvement when informal relationships are static, but that in fact the most
risk-averse agents are made worse o¤, potentially signi…cantly, once the re-formation of informal
relationships is accounted for. Price stabilization has a clear and direct impact on the spectrum of
risky portfolio choices, which makes it an appealing policy to study as an example. This exercise is
not meant to be the last word on crop price stabilization, which can take many di¤erent forms, but
rather is meant to provide a clear illustration of the channels by which using the theory to account
for endogeneity of an informal institution can alter policy evaluation.
    Suppose a benevolent government contemplates solutions for its many poor farmers, who face an
unforgiving risk environment, and who lack access to formal insurance.15 Because a slight increase
in mean pro…tability of crop portfolio comes at the cost of extremely high variance, farmers grow
crops that are safer but not very pro…table–they forgo innovations for less pro…table, traditional
seeds and methods. To encourage the take up of seeds and methods with higher expected return,
the government places price bands of the form [pL ; pH ] on each crop’s price. If the world price of
a crop happens to fall within this band, that is the price the farmer faces. However, if the world
price falls below the price ‡oor, the farmer is guaranteed to receive pL , and if the world price is
above the price ceiling, the farmer faces pH . The marginal impact of stabilization is largest for
crops with the most volatile prices: the variance of every crop falls, but the variance of the riskiest
crops falls by the largest amount. Thus, the policy may lead to a change in the curvature of the
marginal variance cost M (p) across di¤erent crop portfolios.
    To see this more concretely, let Qi represent the yield of crop i, and Pi the net price of crop
i. Assume that an individual farmer’s production does not a¤ect the world price, so that Pi is
independent of Qi . Then, for a given production level Qi (letting (i) denote the pro…t of crop i):



                                          E( (i)) = E(P (i)Qi )
                                                      = Qi E(P (i))
                                          V ( (i)) = V (P (i)Qi )
                                                      = Q2i V (P (i))

    Now, suppose Pi       uni[a(i); b(i)], where 0      a(i)     b(i) for each crop i. Then:

                                                            a(i) + b(i)
                                       E( (i)) = Qi
                                                                 2
                                                       Q2i
                                       V ( (i)) =          (b(i)    a(i))2
                                                       12
  15
     I abstract from possible governmental and other frictions in policy implementation, in order to study how ac-
counting for the equilibrium response of informal institutions might substantially alter policy analysis even in a
"politically ideal" world.




                                                       14
      Under what conditions do crops with higher mean have higher variance? Suppose that crops
are ordered from lowest to highest expected return: that is, if i < i0 , then E( (i)) < E( (i0 )).
Then:

                                             @E( (i))
                                                               > 0 , a0 (i) + b0 (i) > 0
                                                @i
                                             @V ( (i))
                                                               > 0 , b0 (i) > a0 (i)
                                                @i

      For example, this is satis…ed for a(i); b(i) where b0 (i) > a0 (i)                         0.
      By Corollary 1, we know that a change in the curvature of the marginal variance cost across
the di¤erent crops is equivalent to a change in the monotonicity of the coe¢ cient of variation
across crops. For example, if pre-policy, the coe¢ cient of variation is lower for projects with
lower expected return, and post-policy, the coe¢ cient of variation is lower for projects with higher
expected return, then the unique matching pre-policy is negative-assortative, while post-policy, it
is positive-assortative.
      So, when is the coe¢ cient of variation lower for projects with lower expected return, and when
is it lower for projects with higher expected return? Assuming b0 (i) > a0 (i)                              0 (so that crop i0 has
higher mean and variance than i if i0 > i):16

                                            @CV (i)
                                                            > 0 , a0 (i)b(i) < a(i)b0 (i)
                                              @i
                                            @CV (i)
                                                            < 0 , a0 (i)b(i) > a(i)b0 (i)
                                              @i

      Natural choices for a(i); b(i) which satisfy these conditions exist. Suppose that pre-policy, the
price of each crop i is distributed:

                                             Pipre        [1; P (i)]; P (i)     1; P 0 (i) > 0

      The government imposes a price ‡oor and a price ceiling, to reduce price volatility, so that
post-policy:
                                                         P (i) + 1             P (i) + 1
                                         Pipost      [                 c(i);             + c(i)]
                                                             2                     2
                                                                                                                      P (i)+1
      Then this policy maintains the expected pro…tability of each crop (E(Pi ) =                                         2     in both
cases) and reduces the variance of each crop.
      Now:17
                                   @CV (i)
                                           < 0 if (1 + P (i))c0 (i) < (1 + c(i))P 0 (i)
                                     @i
                                                                                                            h                    i
                                                                                                                P (i) 2P (i)
      For example, c(i) = 31 P (i)            1 satis…es this condition, so that Pipost               uni        3 ; 3         +1 .
                       1
               V ( (i)) 2
 16
      CV (i) =  E( (i))
                           = p(b(i)    a(i))
                                 3(a(i)+b(i))
 17
    CV post (i) = p3(2c(i)
                        P (i)+1)
              p
 @CV (i)     2 3((1+P (i))c0 (i) (1+c(i))P 0 (i))
    @i
         =                3(P (i)+1)2



                                                                     15
       Thus, by Corollary 1, the unique matching pattern pre-policy is negative-assortative, and post-
policy, it is positive-assortative: informal insurance relationships endogenously re-form in response
to the policy.
       Note that we can express the spectrum of risky crop portfolios in the "language" of the theo-
                                                    1
retical framework: Yi = E(Yi ) + V (Yi ) 2 Y0 , where Yi represents the pro…t of crop i, and Y0 is the
uniform random variable with E(Y0 ) = 0, V (Y0 ) = 1.18 Then, pre-policy, the spectrum of risky
projects can be described by:

                                                        P (i) + 1     (P (i) 1)
                                              Yi = Qi             + Qi p        Y0
                                                            2               12

       And post-policy, the spectrum of risky projects can be described by:

                                                           P (i) + 1      c(i)
                                                 Yi = Qi             + Qi p Y0
                                                               2            3

       Now that we’ve seen how crop portfolio choice maps into the theoretical framework, and how
crop price stabilization may generate an important change in the set of risky portfolios, let us
compare the welfare impacts of the risk-reduction policy in a more general environment, ignoring
and then accounting for the endogeneity of informal insurance institutions.
       Assume that the returns of di¤erent crop portfolios are distributed normally.19 In particular,
                                                                                                   pre
suppose that pre-policy, the pro…ts of a crop with mean p are described by                         p      N (p; pN1 ),
N1 > 2. Thus, the marginal variance cost function is Mpre (p) = N1 pN1                    1,   which is convex in p.
The government then implements a stabilization policy to di¤erentially reduce the risk of higher
                                                                         post
mean portfolios. Post-policy, pro…ts are described by                    p       N (p; pN2 ), where N2 2 (1; 2), so
that Mpost (p) is now concave in p.20 According to Proposition 1, the unique equilibrium match is
negative assortative pre-policy, and positive assortative post-policy (N = 2 is the "tipping point",
at which every matching pattern is stable).
       Importantly, the risk-reduction policy a¤ects level as well as curvature of risk. Reducing the
variance of every portfolio to 0 would clearly make everyone happier: the positive impact of the
change in levels outweighs any impact the change in curvature might have. However, policy is
generally only able to achieve small reductions in risk levels before returns are a¤ected. Moreover,
                           h   p      p i
  18                           12      12
       That is, Y0   uni       2
                                  ;    2
                                          .
  19
     This simpli…es the form of the joint certainty-equivalent of a matched pair, since the normal distribution is the
only absolutely continuous distribution such that the only nonzero cumulants are the mean and the variance.
  20
     Note that modeling V (p) as a power function has one small drawback. It’s a natural choice, since we want
to analyze a policy that reduces the variance of every project, and particularly reduces the variance of the riskiest
projects, which is captured by "decreasing N ". However, when N falls, pN for p 2 (0; 1) actually increases. Hence,
assume that G1 and G2 are such that no possible pair ever wishes to undertake a project p 2 (0; 1) pre-policy:
                                                     1          1        N1
                                                            +
                                                   max(r1 )   max(r2 )   2
  This is for convenience, and does not substantively in‡uence the intuition or the policy analysis, since the matching
results are free of any assumption on the distribution of risk types. If the above condition did not hold, the policy
would be a bad idea without considering informal institutions, since individuals choosing p < 1 would be worse o¤.


                                                                16
we know from Proposition 1 that the composition of partnerships is driven by curvature, not levels.
Thus, setting N1 = 2 + " and N2 = 2       ", " small, maximizes the change in curvature resulting from
the policy relative to the change in levels, and enables us to isolate the impact stemming from the
endogenous response of the informal insurance network. For this example, let " = 0:05.
   Suppose G1 = f0:6; 0:7; 0:8; 0:9g, and G2 = f1; 1:1; 2; 2:1g. For example, G1 may be the
less risk-averse landowners in a region, and G2, the more risk-averse tenant farmers. (However,
the matching results and intuition about the policy do not depend on which risk types are chosen).
Then the e¤ect of the policy without accounting for the response of informal institutions is described
by the lemma below.

Lemma 2 A policy which reduces the variance of every available project is a strict Pareto improve-
ment if the composition of partnerships does not change.

   The proof is intuitive: each matched partnership can stay on the same project post-policy, or
can choose a di¤erent project. If a partnership retains its original project, it is strictly better
o¤, since the project has the same mean as it did before the policy, but a lower variance. If a
partnership switches to a di¤erent project, then by revealed preference, they must be even better
o¤ facing the new project than facing the old project with decreased variance. But this means that
each partnership is strictly better o¤.
   Now, suppose individuals re-form partnerships in response to the policy. How does this a¤ect
the evaluation of the policy impacts?
   First, consider the e¤ect on individual payo¤s. Note that, while Proposition 1 provides con-
ditions under which the equilibrium matching and joint payo¤s are unique, individual payo¤s are
never unique. Instead, the stability conditions (that is, the requirement that no two unmatched
agents prefer to defy the match and partner with each other instead) determine the sets of individ-
ual payo¤s which support the equilibrium matching. Thus, once the payo¤ of one agent is …xed,
the equilibrium payo¤s of the (2N       1) other agents in the population are determined.
                                                                        pre       post
   To be perfectly clear about individual payo¤s in this setting, let CEij  and CEij   denote the
certainty-equivalent generated by a partnership between the ith agent in G1 and the j th agent in G2
in the pre- and post-policy cases, respectively (note that agents are ordered from least to most risk-
averse. The certainty-equivalent generated by a matched partnership (i; j) di¤ers pre-policy and
post-policy because the policy alters the spectrum of portfolio choices by altering the mean-variance
tradeo¤ across risky projects). Then the pre-policy individual payo¤s of the eight individuals in
this example (who are matched negative-assortatively, by Proposition 1) can be described by:




                                                   17
           8
           >            pre
           >
           > uG1;1 = CE14         v4
           >
           < u          pre          pre        pre
              G1;2 = CE23         (CE13       CE14  )    v4
           >            pre          pre        pre         pre         pre
           >
           > uG1 ;3 = CE32        (CE22       CE23  )    (CE13        CE14  )    v4
           >
           : u          pre          pre        pre         pre         pre         pre      pre
              G1;4 = CE41         (CE31       CE32 )     (CE22        CE23  )    (CE13     CE14  )     v4
           8
           >             pre           pre        pre          pre        pre      pre
           > uG2;1 = (CE31
           >                         CE32  ) + (CE22         CE23  ) + (CE13     CE14  ) + v4
           >
           < u           pre           pre        pre          pre
              G2;2 = (CE22           CE23  ) + (CE13         CE14  ) + v4
           >             pre           pre
           >
           > uG2;3 = (CE13           CE14  ) + v4
           >
           : u
                G2;4=v     4


      Recall that CEij > CEij 0 if j is less risk-averse than j 0 (j < j 0 ). The structure of the individual
payo¤s is nicely intuitive: for example, consider the agents in G2. The payo¤ of the most risk-
averse agent (G2; 4) is …xed at v4 . Then the next most risk-averse agent, (G2; 3), receives the most
risk-averse agent’s payo¤, plus an extra wedge to make (G1; 1), the least risk-averse person in G1
(who is partnered with the most risk-averse person in G2, in the equilibrium negative-assortative
match), indi¤erent between partnering with (G2; 4) and (G2; 3): the most (G1; 1) could gain from
switching to (G2; 3) is CE13           CE14 . Similarly, (G2; 2) receives (G2; 3)’s payo¤, with an extra
wedge to prevent deviation, and so on.
      Post-policy, the equilibrium match is positive-assortative, and individual payo¤s are described
by:

         8
         >            post         post        post         post        post        post      post
         >
         > uG1;1 = CE11         (CE21        CE22   )    (CE32        CE33   )   (CE43      CE44   )        v4
         >
         < u          post         post        post         post        post
            G1;2 = CE22         (CE32        CE33   )    (CE43        CE44   )   v4
         >            post         post        post
         >
         > uG1 ;3 = CE33        (CE43        CE44 )      v4
         >
         : u          post
            G1;4 = CE44         v4
         8
         >             post        post        post        post        post         post
         > uG2;1 = (CE21
         >
         >
                                 CE22   ) + (CE32        CE33   ) + (CE43         CE44   ) + v4
         < u           post        post        post        post
            G2;2 = (CE32         CE33   ) + (CE43        CE44   ) + v4
         >             post        post
         >
         > uG2;3 = (CE43         CE44   ) + v4
         >
         : u
              G2;4=v   4


      When equilibrium individual payo¤s are nonunique, the convention is to focus on speci…c cases.
Below, I consider two standard cases: the "best case scenario for the most risk-averse agent" (Case
1), and the "worst case scenario for the most risk-averse agent" (Case 2). All other cases are
intermediate. The "best case scenario for the most risk-averse agent" is the vector of payo¤s in
which the most-risk averse agent (agent 4 in G2) receives a payo¤ that is larger than the payo¤ she
receives in any of the other possible vectors of equilibrium individual payo¤s. More speci…cally, in




                                                        18
Case 1, the "best case scenario for the most risk-averse agent":

                                         v4pre = CE14
                                                   pre


                                         v4post = CE44
                                                    post



   Figures 2a and 2b plot the payo¤s of each individual in G1 and G2 against each individual’s
coe¢ cient of absolute risk aversion. The red line with circular markers depicts pre-policy payo¤s,
while the blue line with square markers depicts post-policy payo¤s. Recall that the less risk-averse
agents are in G1, and the more risk-averse agents are in G2.




                                                19
   What happens in Case 2, the "worst case scenario for the most risk-averse agent"? The "worst
case scenario for the most risk-averse agent" is the vector of payo¤s in which the most-risk averse
agent (agent 4 in G2) receives a payo¤ that is smaller than the payo¤ she receives in any of the other
possible vectors of equilibrium individual payo¤s. More speci…cally, in the "worst case scenario for
the most risk-averse agent":



             v4pre =        pre
                         (CE31        pre
                                    CE32  )       pre
                                               (CE22        pre
                                                          CE23  )        pre
                                                                      (CE13      pre
                                                                               CE14  )
            v4post =        post
                         (CE21        post
                                    CE22   )       post
                                                (CE32        post
                                                           CE33   )        post
                                                                        (CE43       post
                                                                                  CE44   )

   Figures 3a and 3b plot the payo¤s of each individual in G1 and G2 against each individual’s
coe¢ cient of absolute risk aversion. The red line with circular markers depicts pre-policy payo¤s,
while the blue line with square markers depicts post-policy payo¤s.




                                                 20
21
   Clearly, this risk-reduction policy is not a Pareto improvement.21 We see that the more risk-
averse agents are worse o¤ after implementation of the policy, purely as a result of the endogenous
network response: the policy causes the least risk-averse agents to abandon their roles as informal
insurers of the most risk-averse agents, in favor of entrepreneurial partnerships with fellow less
risk-averse agents. The poorest, most risk-averse agents are harmed via two channels: …rst, they’ve
lost their informal insurers, and this weakens their capacity to smooth consumption, which reduces
their welfare. To make matters worse, because the most risk-averse agents, who are now paired
with each other, have very little capacity to smooth a given risk (as neither is willing to bear the
volatility to smooth her partner’s consumption), they must instead manage risk through income-
smoothing, by choosing projects with low variance, which traps them into growing crop portfolios
with low mean returns.
   On the other hand, the least risk-averse agents, who are now paired with each other, no longer
play the role of informal insurer, and this enables them to take advantage of the decreased aggregate
risk and undertake the higher mean, entrepreneurial projects (e.g. adopt a new technology). They
are better o¤ post-policy. Thus, we see that the emergence of enterpreneurship corresponds to
gains for the less risk-averse and losses for the more risk-averse.
   How do the risky projects (in this case, crop portfolios) chosen in the economy di¤er pre- and
  21
     See Appendix 11 for a discussion of the general conditions under which a policy that triggers a change in
partnership composition improves the welfare of the less risk-averse at the expense of the more risk-averse.




                                                     22
post-policy? The change is depicted in Figure 4:




   There is much more variation in the projects which are undertaken post-policy: the least risk-
averse pairs choose riskier, more entrepreneurial projects post-policy, while the most risk-averse
pairs choose safer projects.
   These insights provide an interesting complement to existing literature. Attanasio and Rios-Rull
(2000) model the introduction of formal insurance as a policy which reduces the aggregate riskiness
of the environment. They also …nd that such a policy may hurt the welfare of the most risk-averse
agents. However, their model, which builds o¤ Ligon, Thomas, Worrall (2002), considers a …xed
group of risk-sharing members whose informal insurance arrangement is constrained by limited
commitment. Two agents sustain informal risk-sharing by threatening credibly to cut o¤ all future
ties if someone reneges, that is, does not honor the risk-sharing agreement (e.g. a member keeps her
own income realization instead of transferring some of it to an unlucky partner). Thus, anything
that lowers the cost of autarky (the state of being alone and unable to share risk with somebody
else) will decrease the level of informal insurance that can be sustained, because the punishment
has become less costly. Since the introduction of formal insurance reduces aggregate risk, such a
policy reduces the cost of autarky, and as a consequence informal insurance is weakened.
   However, if commitment were perfect in Attanasio and Rios-Rull (2000), the introduction of


                                                23
formal insurance would strictly improve welfare, because lowering the cost of autarky matters only
through the punishment of cutting o¤ future ties, which would no longer be relevant. One contri-
bution of this example, then, is to show that, even when commitment is perfect, introducing formal
insurance might still reduce the welfare of the most risk-averse agents, because the composition of
the informal risk-sharing network changes in response. Reducing the riskiness of the environment
does increase the value of autarky, but it also increases the value of being in a relationship, and
increases it heterogeneously across partnerships of di¤erent risk compositions.
         This example also contrasts with Chiappori et al. (2011), who estimate that the least risk-
averse individuals are the ones left worse o¤ after the introduction of formal insurance, since they
have been displaced as informal insurers. However, this illuminates the need for a model of the
equilibrium network of relationships–I show that the least risk-averse agents do leave their roles as
informal insurers, but only because they prefer to undertake entrepreneurial pursuits instead. It
would be interesting to see how their estimation of the welfare impacts changes when they account
for this endogenous response.


5         Endogenous Group Size
         The focus thus far has been on conditions under which assortative matching emerges as the
unique equilibrium when groups are constrained to be of size two. However, we know that a
matched pair behaves like a single agent with representative risk tolerance R. In fact, the proof of
Lemma 1 shows that this is a property of a matched group of any size (echoing Wilson (1968)).
This suggests de…ning the representative risk tolerance of a group of N matched people:

                                                         N
                                                         X 1
                                                      R=
                                                           ri
                                                            i=1

         In order to think about equilibrium matching when group size itself is endogenous, we need to
make a few adjustments to the benchmark model. Instead of matching across two distinct groups,
individuals all belong to one group, G, and match within this group (this simply allows for group
size to be an odd number). As before, production requires at least two collaborators (discussed in
Appendix 1), and a matched group of agents jointly chooses a risky project p                       0 from a spectrum
                                                                                                    1
of risky projects, where a project p’s returns are described by Yp = p + V (p) 2 Y , Y a random
variable with well-de…ned cdf and E(Y ) = 0, V (Y ) = 1.22 Individuals in an N -person group
commit to a feasible return-contingent sharing rule s2 (yp ); s3 (yp ); :::; sN (yp ), which describes the
share of realized output each member receives, for each possible level of output.
         De…ne an equilibrium matching to be one that is stable to all coalitional deviations. That is,
    22
     The key assumption is that the spectrum of projects available to a group does not depend on its size. Of course,
this is more realistic in some settings than others. This can be interpreted several ways. For example, in the context of
agriculture, the robustness of di¤erent seeds to rainfall and planting time di¤erentiates the riskiness of di¤erent crops,
and does not depend on the number of people in a group. Alternatively, there may be constraints to diveresi…cation,
which is particularly plausible in a developing environment. Thus, adding more people to a group may not a¤ect the
spectrum of portfolios available to the group.


                                                           24
a group is stable if no strict subset of the group is able to break away and choose a project and
sharing rule such that every member of the deviating coalition is weakly better o¤, and at least
one member is strictly better o¤.
   Proposition 5 relates familiar conditions on the risk environment to the size and composition of
matched groups in equilibrium in this more general model.

Proposition 5 Let M (p)       V 0 (p) describe the marginal variance cost of each project p. Then:
   (a) If M 00 (p) < 0, the unique equilibrium is maximal-connectedness: the whole group, G, is
matched.
   (b) If M 00 (p) > 0, the unique equilibrium is minimal-connectedness. Individuals match in nega-
tive assortative pairs: the ith least risk-averse person in G is matched with the ith most risk-averse.
(If jGj is odd, then the most risk-averse individual in the population remains unmatched.)

   See Appendix 8 for the details of the proof.
   Proposition 5 shows that when the marginal variance cost is concave in expected return, the
unique equilibrium matching coincides with the matching when group size is restricted to two.
That is, pairwise matching is actually the optimal matching structure in this case, and the network
is minimally-connected. On the other hand, when the marginal variance cost is convex in expected
return, all individuals match in one big group, and the network is maximally-connected. Thus, the
curvature of the marginal variance cost is tied both to extremal match compositions, as well as to
extremal structures of the network of matches.
   This result reveals an interesting relationship between the strength of formal insurance institu-
tions and the structure of …rms in developing economies. Because poor entrepreneurs lack access to
formal insurance, their need to share risk informally in‡uences the nature of the …rms they build.
When achieving a higher expected return comes at an increasingly steep escalation in risk cost, in
the sense that the coe¢ cient of variation (ratio of the standard deviation of returns to the mean) is
larger for projects with higher expected return, a less risk-averse individual provides more value by
informally insuring a more risk-averse individual. However, this informal insurance provision, which
causes the less risk-averse person to bear most of the risk, comes at the cost of investing in higher
mean, higher variance projects. Thus, the economy is characterized by a minimally-connected net-
work of many small, heterogeneously-composed …rms, each choosing safe, non-innovative projects
with low mean and low variance of return.
   On the other hand, when the coe¢ cient of variation is smaller for projects with higher expected
return, the less risk-averse individuals can bear some risk and still be able to choose entrepreneurial
projects, since the increase in risk is outweighed by the increase in expected return. In particular,
accepting a less risk-averse partner enables the take up of a project with much higher mean return,
and this bene…t outweighs the cost of having to share good outcomes. Moreover, the less risk-averse
are also happy to insure the more risk-averse, since projects with higher mean return no longer come
at such a steep escalation in risk cost. Thus, the economy is characterized by a maximally-connected
network: one large …rm choosing a risky, entrepreneurial project.


                                                  25
    This result contrasts interestingly with Genicot and Ray (2003), who …nd that, under limited
commitment, whole-group matching can never be sustained as a coalitionally-stable equilibrium in
a model where individuals are homogeneously risk-averse and draw their income realization inde-
pendently from the same exogenously-speci…ed income distribution. In their framework, because
individuals cannot choose what risk to face, the marginal bene…t of an additional member is in-
evitably eventually negative: an individual’s expected income is independent of group size, but
she becomes increasingly likely to bear a partner’s downside risk as the group grows, and limited
commitment implies that individuals cannot be compelled to bail partners out after some point.
Thus, a subgroup will always pro…tably deviate if the whole group tries to match, when the number
of people in the population is large.


6    Falsi…ability and Empirical Support for the Theory
    While the previous sections are devoted to exploring interesting implications of the theory, this
section provides a variety of empirical approaches for testing the theory.
    One such approach is to check directly the conditions of Proposition 1 or Corollary 1. That is,
the interested researcher could elicit the risk attitudes of individuals in a population (e.g. using
Binswanger (1980) gambles, or a host of other techniques in the literature), as well as record network
connections between individuals. The remaining component is the mean and variance of return for
each of the risky projects individuals are able to undertake. For example, Appendix 13 contains
tables showing the mean and variance of yield of a variety of crops available to farmers in di¤erent
regions–this data has been collected extensively for agriculture. Alternatively, the coe¢ cient of
variation of each project could be calculated. This approach also suits a lab experiment, since
the researcher is able to design the set of projects o¤ered to di¤erent pools of subjects (and thus
determine the coe¤cients of variation at the outset). Hence, a variety of di¤erent methods enable the
researcher to construct V (p) (the variance of return associated with a mean return p), or CV (p) (the
coe¢ cient of variation associated with mean return p), and verify or falsify the theoretical prediction
regarding the relationship of the curvature of the marginal variance cost, the monotonicity of the
coe¢ cient of variation in expected return, and equilibrium matching patterns.
    However, the researcher may not always be able to reliably construct V (p) or CV (p). Proposi-
tion 4 suggests another approach. Instead of constructing V (p), it is only necessary to collect the
mean incomes of matched groups, in addition to the data on which individuals are matched and
their risk attitudes. Then, the theory predicts that positive assortative matching corresponds with
convexity of mean incomes in the representative risk tolerances of matched groups, while nega-
tive assortative matching corresponds with concavity. Importantly, this approach does not require
knowing anything about the set of risky production opportunities available in the economy, does not
require knowing any counterfactuals, such as what projects individuals would have chosen had they
matched with di¤erent partners, and does not require knowing any moments of the distributions
of returns beyond the mean. (Note that another interesting application of Proposition 4 is that it


                                                  26
enables policymakers to identify when an economy is near a "tipping point" of the kind discussed
in the policy section–when mean incomes are close to being linear in risk tolerances, we can infer
that even a small change in the risk environment could "tip" the matching from one extreme to
the other, and could lead to the sorts of adverse welfare consequences illustrated by the crop price
stabilization example.)
     To …x ideas, consider the following example. Suppose G1 = fr1A ; r2A ; r3A g and G2 = fr1B ; r2B ; r3B g,
where r1A;B < r2A;B < r3A;B .
     Then, suppose the underlying (unobservable) marginal variance cost function is concave: M 00 (p) <
0. Suppose we observe agents matching positive assortatively in risk attitude, as Proposition 1 pre-
dicts. Suppose we also observe the mean incomes of each pair, p(r1A ; r1B ); p(r2A ; r2B ); and p(r3A ; r3B ),
as well as the risk types of each agent. Note that we aren’t able to force the agents to match in di¤er-
ent ways, so we cannot observe what they would have chosen with di¤erent partners. Furthermore,
we do not observe higher-order moments of the income distributions, including the variance.
     Hence, we follow the approach suggested by Proposition 4, and use the observed matchings
                                                                                                      1         1
(r1A ; r1B ),   (r2A ; r2B ); and (r3A ; r3B ) to calculate the representative risk tolerance Ri =   riA
                                                                                                           +   riB
                                                                                                                     of each
matched pair. Then, to check for concavity or convexity of mean incomes in representative risk
tolerances, regress pi          p(riA ; riB ) on a constant, as well as Ri and Ri2 (to use a crude second-order
polynomial approximation):

                                                                          2
                                             pi =   1   +   2 Ri   +   3 Ri   + "i

     If ^ 3 > 0, this suggests that pi is convex in Ri , and this is evidence supportive of the theory,
since we have established the following: (a) individuals are matched positive assortatively in risk
preferences, and (b) the mean incomes of the matched pairs are convex in the representative risk
tolerances of those pairs. On the other hand, ^ < 0 would be evidence against the theory, since
                                                             3
individuals are matched positive assortatively, but the mean incomes of the matched pairs are
concave in the representative risk tolerances. (Of course, more sophisticated techniques may be
used to test for concavity or convexity.)
     I apply a combination of these approaches to the dataset from Attanasio et al. (2012) to seek
preliminary support or falsi…cation of the theory in the existing literature. Attanasio et al. (2012)
run a unique experiment with 70 Colombian communities, where they invite individuals to match
in risk-sharing groups in a lab setting. Individuals are able to choose what gamble they face from a
set of gambles o¤ered by the experimenters, where higher mean gambles come at the cost of higher
variance. However, the sharing rule for each risk-sharing group is …xed at equal division. Thus,
a group is able to choose what risk to face, but cannot control how to share a given risk. Risk
attitudes are elicited by privately asking each subject to select a gamble before the risk-sharing
round is played. In addition, data on pre-existing kinship and friendship networks are gathered.
Kinship and friendship ties matter for two important reasons: …rst, individuals are likely to know
the risk attitudes of family and friends, and unlikely to know the risk attitudes of strangers. Second,
individuals are likely to trust and therefore commit to family and friends over strangers. Indeed,


                                                             27
Attanasio et al. …nd experimentally that family and friends strongly prefer to match with each
other rather than with strangers, and that they match positive assortatively in risk attitude.
       To provide some theoretical backbone for this …nding, Attanasio et al. study a simpli…ed model
of their experimental setting. They assume that individuals have CARA utility and either low or
high risk aversion (type is binary). Group size is restricted to pairs. Individuals choose which
risky project to undertake from a continuous spectrum of projects, but the sharing rule is …xed at
equal division. They show that under the assumptions of this model, individuals match positive
assortatively, that is, high types match with other high types while low types match with other low
types.
       Because Attanasio et al. …x the sharing rule at equal division, the data cannot be used for a full
test of the model and theoretical predictions of this paper, which studies risk-sharing groups when
individuals choose how to share a given risk as well as what risk to face. However, an interesting
partial test is still possible: Propositions 2 and 3 are exactly focused on the "corners" of the model,
and describe equilibrium matching when the project choice and sharing rule choice channels are
each shut down in turn. Additionally, we can test Proposition 4, which describes the relationship
between the curvature of mean incomes in the representative risk tolerances of matched groups,
and the curvature of marginal variance cost.
       Like the model in Attanasio et al., Proposition 3 predicts unique positive assortative matching
when the sharing rule channel is shut down. However, Proposition 3 is proved under more general
conditions, including arbitrarily many risk types rather than binary type, and this generality is
useful for interpreting the experimental results. In particular, Attanasio et al. assume that the
sharing rule is exactly equal division, that is, s(Yp ) = 12 Yp , and provide a variety of reasons why
they don’t think side transfers were a concern in practice. Proposition 3 shows that, even with
side transfers c, as long as the sharing rule is of the form s(Yp ) = 21 Yp + c, the unique equilibrium
matching should still be positive assortative, as it is in the experimental …ndings.
       While it is encouraging that the matching pattern predicted by Proposition 3 bears out in the
experiment, the predictions of Proposition 4 provide a more rigorous test of the theory. For this,
we need to characterize V (p) or CV (p), based on the set of gambles designed by the experimenters.
The discrete nature of the gambles suggests drawing upon Corollary 1 and checking for one of
the following relationships in the data: either the coe¢ cient of variation is increasing in expected
return and mean incomes are concave in risk tolerance, or the coe¢ cient of variation is decreasing
in expected return and mean incomes are convex in risk tolerance.
       The set of gambles in Attanasio et al. is described in the table below (payo¤s are in Colombian
pesos)23 . Each gamble had an equally-likely bad and good payo¤, where riskier gambles had worse
  23
    The standard deviations reported in the table in Attanasio et al. (2012) are the experimental, not analytical,
standard deviations. The discrepancy results from altruism on the part of the experimenters, who were sometimes
found to give the subject the high payo¤ even when the subject lost the gamble. Here, I consider the analytical
variance, since Attanasio et al. state that subjects were unaware of the bias in probabilities. Hence, subjects should
have chosen gambles based on the analytical variance.




                                                         28
bad payo¤s but better good payo¤s.

                   Gamble         Mean    Standard Deviation                Coe¤. of Variation
                   1              3000    0                                 0
                   2              4200    1500                              0:36
                   3              4800    2400                              0:5
                   4              5400    3600                              0:67
                   5              6000    5000                              0:83

    It’s clear that the coe¢ cient of variation is larger for gambles with higher expected return.
Hence, …nding that mean incomes are concave in risk tolerance would be evidence for the theory,
while …nding that mean incomes are convex in risk tolerance would be evidence against the theory.
    I regress the mean returns of the chosen gambles on risk tolerance and squared risk tolerance.
A positive coe¢ cient    3   indicates convexity, while a negative                  3   indicates concavity:

                                                                                2
                                                     1                 1
                                   pi =   1+     2             +   3                + "i
                                                     ri                ri

    The OLS estimates are reported in Table 1:




    In line with the theoretical prediction, we see that mean project returns are concave in risk
tolerance. Moreover, individuals with a higher risk tolerance (less risk-averse individuals) choose
riskier (higher mean, higher variance) gambles. Hence, the experimental results lend preliminary
support to the theory.


7    Conclusion
    This paper enriches our understanding of informal insurance by developing a theory of endoge-
nous relationship formation between heterogeneously risk-averse people who lack access to formal


                                                          29
insurance and credit markets who choose both what risk to face as well as how to share a given
risk. The strength of informal insurance is described by how well-insured a population of risk-averse
individuals is when they must rely only on interactions with fellow risk-averse individuals to man-
age risk, rather than how well-insured individuals are when the formal contracting environment
is weak. Importantly, this approach reveals that what we can learn from endogenizing informal
insurance isn’t limited to insurance: the need to manage risk informally in an economy in‡uences
the strength of entrepreneurship, the correspondence of entrepreneurship with income inequality,
and the optimal structure of informal …rms.
   Existing literature has focused on analyzing the insurance agreement reached by a …xed group
of individuals, isolated outside of the equilibrium network, or by individuals who match with a …xed
probability. By contrast, this paper studies how the network shape that emerges in equilibrium
is determined by the possibilities of other shapes the network could have assumed, and identi…es
important connections between the equilibrium network and the risk environment. In particular,
while income distributions may have in…nitely many nonzero higher-order cumulants, equilibrium
matching is found to be determined by the …rst two: a mean-variance trade-o¤ across portfolio
choices, which is captured by the coe¢ cient of variation.
   This paper highlights the especial importance of accounting for, rather than abstracting away
from, heterogeneity in developing economies. The absence of formal institutions causes individuals
to use interpersonal relationships to address their unmet needs. Thus, we see that a natural
constraint on informal insurance, apart from any aspect of the formal contracting environment, is
simply that all individuals are risk-averse. However, some individuals are more risk-averse than
others, and this enables some degree of informal insurance. Yet, just like the formal economy, the
informal economy too is endogenous: individuals switch between and assume di¤erent informal
roles in the economy as circumstances change.
   Accounting for this endogeneity may substantially alter our design and evaluation of a variety
of policies. While crop price stabilization was explicitly discussed in the paper, the framework
is also useful for thinking about land reform. For example, Banerjee (2000) points out that the
e¤ects of land redistribution cannot be estimated without …rst understanding the reasons behind
the distribution of landholdings in the status quo. If land ownership is related to risk-sharing (for
example, large landowners provided informal insurance to the landless), then land redistribution
could actually decrease welfare.
   The model also provides an interesting lens through which to view regulation of wages. We
know that employment contracts (such as the sharecrop contract) often balance multiple needs,
such as insurance and incentive provision. The results of this paper show that legislation which
places restrictions on the set of permissible rental contracts diminishes the power of individuals to
share a given risk, which may cause the less risk-averse to cease acting as informal insurers.
   Finally, while informal insurance served as the matching motivation in this paper, the ideas
of the model are more general and can be applied to other important questions. For example,
understanding the equilibrium matching between individuals with di¤erent risk attitudes and the


                                                 30
risky health behaviors they choose may help us design more e¤ective approaches to encouraging
vaccination, boosting health investments and sanitation practices, and preventing and treating HIV.
   Many challenges remain. This model can be enriched in a variety of ways–by generalizing
preferences, by introducing limited commitment, by adding dynamic re-matching and dynamic
investment. I leave these tasks for future research. Developing economies are distinguished by
uniquely complex environments and uniquely lofty stakes. That is why they are formidable, and
that is why they are important.




                                                31
8     References
    1. "2012 National Trade Estimate Report: Foreign Trade Barriers." 2012. U.S. Wheat Asso-
      ciates.

    2. Abebe, T., K.F. Wiersum, and F. Bongers. 2010. "Spatial and Temporal Variation in Crop
      Diversity in Agroforestry Homegardens of Southern Ethiopia." Agroforestry Systems 78: 309-
      322.

    3. Ackerberg, D. and M. Botticini. 2002. "Endogenous Matching and the Empirical Determi-
      nants of Contract Form." Journal of Political Economy 110: 564-590.

    4. Akanda, M., H. Isoda, and S. Ito. 2008. "Problem of Sharecrop Tenancy System in Rice
      Farming in Bangladesh: A Case Study on Alinapara Village in Sherpur District." Journal of
      International Farm Management 4: 23-30.

    5. Alderman, H. and C. Paxson. 1992. "Do the Poor Insure? A Synthesis of the Literature on
      Risk and Consumption in Developing Countries." Economics in a Changing World 4: 49-78.

    6. Ambrus, A., M. Mobius, and A. Szeidl: 2014. "Consumption Risk-sharing in Social Net-
      works." American Economic Review 104(1): 149-182.

    7. Antle, J. 1987. "Econometric Estimation of Producers’ Risk Attitudes." American Journal
      of Agricultural Economics 69: 509-522.

    8. Attanasio, O., A. Barr, J. Cardenas, G. Genicot, and C. Meghir. 2012. "Risk Pooling,
      Risk Preferences, and Social Networks." American Economic Journal: Applied Economics 4:
      132-167.

    9. Attanasio, O. and J. Rios-Rull. 2000. "Consumption Smoothing in Island Economies: Can
      Public Insurance Reduce Welfare?" European Economic Review 44: 1225-1258.

10. Banerjee, A. 1999. "Prospects and Strategies for Land Reforms." Annual World Bank Con-
      ference on Development Economics 1999, eds. B. Pleskovic and J. Stiglitz. 253-284.

11. Bardhan, P. 1980. "Interlocking Factor Markets and Agrarian Development: A Review of
      Issues." Oxford Econ. Papers 32: 82-98.

12. Basu, K. 1992. "Limited Liability and the Existence of Share Tenancy." Journal of Develop-
      ment Economics 38(1): 203-220.

13. Becker, G.S. 1973. "A Theory of Marriage: Part I." Journal of Political Economy 81: 813-846.

14. Bellemare, M. 2009. "Sharecropping, Insecure Land Rights and Land Titling Policies: A Case
      Study of Lac Alaotra, Madagascar." Development Policy Review 27: 87-106.



                                                32
15. Besley, T. 1995. "Savings, Credit, and Insurance." Handbook of Development Economics 3:
   2123-2207.

16. Binswanger, H.P. 1980. "Attitudes towards Risk: Experimental Measurement in Rural India."
   American Journal of Agricultural Economics 62: 395-407.

17. Bloch, F., G. Genicot, and D. Ray. 2008. "Informal Insurance in Social Networks." Journal
   of Economic Theory 143(1): 36-58.

18. Bold, T. 2009. "Implications of Endogenous Group Formation for E¢ cient Risk-Sharing."
   The Economic Journal 119: 562-591.

19. Bramoulle, Y. and R. Kranton. 2007. "Risk Sharing Networks." J. Econ. Behavior and
   Organization 64: 275-294.

20. Cervantes-Godoy, D. and J. Dewbre. 2010. "Economic Importance of Agriculture for Poverty
   Reduction." OECD Food, Agriculture, and Fisheries Working Papers No. 23.

21. Chambers, C. and F. Echenique. "When Does Aggregation Reduce Risk Aversion?" Games
   and Economic Behavior (76) 2012 582-595.

22. Chiappori, P-A., K. Samphantharak, S. Schulhofer-Wohl, and R. Townsend. 2011. "Hetero-
   geneity and Risk-Sharing in Village Economies." Working Paper.

23. Chiappori, P-A. and P. Reny. 2006. "Matching to share Risk." Working Paper.

24. Dawe, D. 2001. "How far down the path to free trade? The importance of rice price stabi-
   lization in developing Asia." Food Policy 26: 163-175.

25. Dercon, S. 1996. "Risk, Crop Choice, and Savings: Evidence from Tanzania." Economic
   Development and Cultural Change 44: 483-513.

26. Dercon, S. and P. Krishnan. 2000. "In Sickness and in Health: Risk Sharing within House-
   holds in Rural Ethiopia." Journal of Political Economy 108: 688-727.

27. Eeckhout, J. and K. Munshi. 2010. "Matching in Informal Financial Institutions." Journal
   of the European Economic Association 8: 947-988.

28. Fafchamps, M. 2008. "Risk-sharing Between Households." Handbook of Social Economics.

29. Fafchamps, M. and A. Lund. 2003. "Risk-sharing Networks in Rural Phillippines." Journal
   of Development Economics 71: 261-287.

30. Fafchamps, M. and F. Gubert. 2007. "The Formation of Risk-Sharing Networks." Journal of
   Development Economic 83: 326-350.




                                             33
31. Genicot, G. and D. Ray. 2003. "Group Formation in Risk-Sharing Arrangements." Review
   of Economic Studies 70: 87-113.

32. Gine, X., P. Jakiela, D. Karlan, and J. Morduch. 2010. "Micro…nance Games." American
   Economic Journal: Applied Economics 2(3): 60-95.

33. Grinstead, C. and J. Snell. 1997. "Introduction to Probability." American Mathematical
   Society.

34. Harrison, G., S. Humphrey, and A. Verschoor. 2010. "Choice Under Uncertainty: Evidence
   from Ethiopia, India, and Uganda." The Economic Journal 120: 80-104.

35. Kaneko, M. 1982. "The Central Assignment Game and the Assignment Markets." Journal of
   Mathematical Economics 10: 205-232.

36. Knudsen, O. and J. Nash. 1990. "Domestic Price Stabilization Schemes in Developing Coun-
   tries." Economic Development and Cultural Change 38: 539-558.

37. Kurosaki, T. 1999. "Risk-Sharing Arrangements and the Structure of Risk and Time Prefer-
   ences: Theory and Evidence from Village India." Working Paper.

38. Legros, P. and A. Newman. 2007. "Beauty is a Beast, Frog is a Prince: Assortative Matching
   with Nontrasferabilities." Econometrica 75(4): 1073-1102.

39. Li, Sunxi, H. Sun, and P. Chen. 2012. "Assortative Matching of Risk-Averse Agents with
   Endogenous Risk." Journal of Economics (online only).

40. Ligon, E., J. Thomas, and T. Worrall. 2002. "Informal Insurance Arrangements with Limited
   Commitment: Theory and Evidence from Village Economies." Review of Economic Studies
   69: 209-244.

41. Mazzocco, M. 2007. "Household intertemporal behavior: a collective characterization and a
   test of commitment." Review of Economic Studies 74: 857-895.

42. Meyer, J. 1987. "Two-Moment Decision Models and Expected Utility Maximization." Amer-
   ican Economic Review 77(3):421-430.

43. Mobarak, A. M. and M. Rosenzweig. 2012. "Selling Formal Insurance to the Informally
   Insured." Working Paper.

44. Minot, N. 2010. "Food Price Stabilization: Lessons for Eastern and Southern Africa." Risk
   Management in African Agriculture Seminar Presentation.

45. Morduch, J. 1995. "Income Smoothing and Consumption Smoothing." J. Econ. Perspectives
   9: 103-114.



                                             34
46. Rathore, V.S., J.P. Singh, and R.K. Beniwal. 2009. "Rainfed Farming Systems of Hyper Arid
   Northwestern Rajasthan: an Analysis." Annals of the Arid Zone 48: 125-131.

47. Rosenzweig, M. 1988. "Risk, Implicit Contracts, and the Family in Rural Areas of Low-
   Income Countries." Economic Journal 98: 1148-1170.

48. Rosenzweig, M. and H.P. Binswanger. 1993. "Wealth, Weather Risk, and the Composition
   and Pro…tability of Agricultural Investments." The Economic Journal 103: 56-78.

49. Rosenzweig, M. and O. Stark. 1989. "Consumption Smoothing, Migration, and Marriage:
   Evidence from Rural India." Journal of Political Economy 97: 905-926.

50. Schulhofer-Wohl, S. 2006. "Negative Assortative Matching of Risk-Averse Agents with Trans-
   ferable Expected Utility." Economic Letters 92: 383-388.

51. Shapley, L. and M. Shubik. 1971. "The assignment game I: The Core." International Journal
   of Game Theory 1: 111-130.

52. Sharpe, William F. 1966. "Mutual Fund Performance". Journal of Business 39: 119–138.

53. Singh, H., G. Singh, J. Samuel, and R. Pathak. 2003. "Precision Farming in Horticulture."
   Proceedings of the National Seminar Workshop on Hi-Tech Horticulture and Precision Farm-
   ing.

54. Stiglitz 1974. 1974. "Incentives and Risk Sharing in Sharecropping." Review of Economic
   Studies 41: 219-255.

55. Townsend, R. 1994. "Risk and Insurance in Village India." Econometrica 62(3): 539-591.

56. Townsend, R. and R. Mueller. 1998. "Mechanism Design and Village Economies: From Credit
   to Tenancy to Cropping Groups." Review of Economic Dyanmics 1: 119-172.

57. Wang, X. 2013a. "A Note on Moral Hazard and Linear Compensation Schemes." Working
   Paper.

58. Wang, X. 2013b. "Risk, Incentives, and Contracting Relationships." Working Paper.

59. Wang, X. 2015 (forthcoming). "Policymaking and the Adaptability of Informal Institutions."
   World Bank Economic Review.

60. Wilson, R. 1968. "The Theory of Syndicates." Econometrica 36: 119-132.

61. Wright, B. 2001. "Storage and Price Stabilization." Handbook of Agricultural Economics 1:
   818-861.




                                             35
9     Appendix
9.1   A.1: Equivalence of matching when choosing joint income distribution and
      when choosing individual income distribution and sharing the pooled re-
      turns
    This discussion clari…es the relationship between a model where matched individuals jointly
choose which income distribution to face, and then share the realized return, versus a model where
individuals choose their own income distribution, then match and share the pooled realized returns.
    Suppose that, as in the benchmark model, a spectrum of projects p                            0 is available, where
                1
Yp = p + V (p) Y , E(Y ) = 0, V (Y ) = 1, and V (p) > 0, V
                2                                                             0 (p)   > 0, and V 00 (p) > 0. Each
individual chooses a personal income distribution from the spectrum Yp , and pools realized returns
with her partner. An individual can always choose autarky if she prefers this to matching with any
possible partner. A matched pair commits ex ante to a sharing rule contingent on pooled income,
s(Yp1 + Yp2 ). (For ease of notation, let Yk      Ypk .)
    Assume that incomes are correlated.          Recall that V ar(Y1 + Y2 ) = V ar(Y1 ) + V ar(Y2 ) +
2Cov(Y1 ; Y2 ), where Cov(Y1 ; Y2 ) = EY1 Y2      EY1 EY2 = EY1 Y2             p1 p2 .
                            1                                1
    Since Y1 = p1 + V (p1 ) Y and Y2 = p2 + V (p2 ) Y :
                            2                                2


                                                    1                1                   1        1
               E(Y1 Y2 ) = E(p1 p2 + p1 V (p2 ) 2 Y + p2 V (p1 ) 2 Y + V (p1 ) 2 V (p2 ) 2 Y 2 )
                                    h        1         1
                                                             i
                         = p1 p2 + E V (p1 ) 2 V (p2 ) 2 Y 2

    And:

                                        E(Y 2 ) = V (Y )         (EY )2
                                                 = 1

    So:

                                                                 1        1
                                E(Y1 Y2 ) = p1 p2 + V (p1 ) 2 V (p2 ) 2
                                                                 1        1
                           Cov(Y1 ; Y2 ) = p1 p2 + V (p1 ) 2 V (p2 ) 2           p1 p2
                                                                                 1           1
                         V ar(Y1 + Y2 ) = V (p1 ) + V (p2 ) + 2V (p1 ) 2 V (p2 ) 2

    Thus, members of a matched pair can choose individual income distributions p1 and p2 in a
number of ways to achieve mean pooled income p = p1 + p2 for any p > 0. The optimal strategy
for the partners in this model, given that they want expected joint income to be p, is to choose p1
and p2 to minimize the variance of joint income, given p1 + p2 = p (Appendix 4 shows why this is
the case).




                                                        36
   Solving:

                                                                                   1             1
                                   min V (p1 ) + V (p2 ) + 2V (p1 ) 2 V (p2 ) 2 s:t:
                                   p1 ;p2

                                                             p1 + p2 = p

                                                                                                                             1
   it is straightforward to see that p1 = p2 = p2 , so that V (pjp1 ; p2 ) = 2V                               p
                                                                                                              2   + 4V   p
                                                                                                                         2
                                                                                                                             2
                                                                                                                                 .
   Hence, matched pairs choose from a frontier of joint income distributions described by: Yp =
                         1 1
          p          p
p + [2V   2   + 4V   2     ] Y , where E(Y ) = 0, V (Y ) = 1.
                         2 2


   Thus, although individuals ostensibly choose own income in this model, they are actually choos-
ing a distribution of pooled income as a matched pair, and each prefers her equilibrium outcome as
a matched pair to her equilibrium outcome in autarky. Hence, this is substantively equivalent to
the benchmark model, where matched pairs choose their joint income distribution, and each person
is assumed to prefer being matched to being unmatched. I work with the joint choice model in this
paper because it illustrates the dependence of the equilibrium matching on the trade-o¤ between
production and insurance more cleanly.

9.2    A.2: Proof of Lemma 1 (NTU problem has TU representation)
   Lemma 1: Expected utility is transferable in this model. Denote a matched pair by (r1 ; r2 ) and
their chosen project by p (r1 ; r2 ). Let CE(r1 ; r2 ; p (r1 ; r2 )) describe the certainty-equivalent of a
matched pair in equilibrium; it is twice continuously di¤ erentiable in each argument. Then:

                               @CE(r1 ; r2 ; p (r1 ; r2 ))
                                                                          > 0 , unique P AM
                                       @r1 r2
                               @CE(r1 ; r2 ; p (r1 ; r2 ))
                                                                          < 0 , unique N AM
                                       @r1 r2

   The equilibrium matching maximizes the sum of certainty-equivalents, and is Pareto e¢ cient.
   Proof : The following program characterizes the optimal contract and project choice for a
matched pair (r1 ; r2 ):                     Z   1
                                                             r1 [yp s(yp )]
                                    max                  e                    f (yp jp)dyp s:t:
                                    s(yp )       1
                                        Z    1
                                                         r2 s(yp )                               v
                                                     e               f (yp jp)dyp            e
                                             1

   An increase in r2 ’s expected utility strictly corresponds to a decrease in r1 ’s expected utility,
since more output for r2 means less output for r1 , so the constraint binds.
   Solving shows that r2 ’s share of realized output yp is:
                                                                      Z   1
                                    r1       1                                     r1 r2
                                                                                         y
                                                                                  r1 +r2 p
                                                                                                              1
                     s (yp jp) =         yp + log                             e              f (yp jp)dyp +      v
                                 r1 + r2     r2                           1                                   r2




                                                                     37
    Plug this expression into r1 ’s objective function. Then the optimal project solves

                                           r1
                                                      Z   1            r1 r2
                                                                                                           r
                                                                                                        1+ r1
                                              v                              y                              2
                                max e      r2                 e       r1 +r2 p      f (yp jp)dyp
                                 p2                       1

                   r1
                      v
    where      e r2 is just a scaling factor.
    So, we can write the indirect utility of an agent r1 who ensures his partner, r2 , a level of expected
utility   e   v:


                                                      r1
                                                              Z   1                r1 r2
                                                                                                                   r
                                                                                                                1+ r1
                                                         v                               y                          2
                             (r1 ; r2 ; v) =      e   r2                  e       r1 +r2 p   f (yp jp)dyp
                                                                      1

    Partner r2 receives expected utility:


                                                                                        v
                                               EUr2 (v) =                           e
                                                                                        r2 rv
                                                                      =             e        2




    The certainty-equivalent CEi for an individual ri facing risky income stream Yi is:

                                               ri CEi
                                          e                   = E[ e ri Yi ] )
                                                                  1
                                               CEi            =     log E[e ri Yi ]
                                                                 ri

    Clearly, the certainty-equivalent is a monotonic transformation of expected utility. Hence,
showing that the slope of the Pareto frontier of certainty-equivalents is                                              1 shows expected utility
is transferable.
    The certainty-equivalent of each member is:

                                                                  Z   1
                                      1   1                                         r1 r2
                                                                                          Y
                                                                                   r1 +r2 p
                                                                                                                               v
                   CEr1 (v) =           +              log                    e                  f (yp jp (r1 ; r2 ))dyp
                                      r1 r2                           1                                                        r2
                                v
                   CEr2 (v) =
                                r2

    There is clearly a one-to-one trade-o¤ between the certainty-equivalent of r1 and the certainty-
equivalent of r2 . In other words, the slope of the Pareto frontier of expected utility (modulo a
monotonic transformation) is          1. Hence, expected utility is transferable.
    The proof that the equilibrium matching maximizes the sum of certainty-equivalents and the
sum of expected project returns, and is Pareto e¢ cient, is straightforward. First, if a matching
where each pair is engaged in their optimal project and sharing rule does not maximize the sum of
certainty-equivalents, there would be at least one pro…table blocking. Second, the sum of certainty-
equivalents is a social welfare function, so as the matching maximizes this, it must be Pareto
e¢ cient. (Another way to see this is by recalling the no-blocking condition of the equilibrium.)


                                                                      38
9.3   A.3: Di¤erently-sized groups
   We know (see Appendix 2) that the sum of certainty-equivalents for a given pair (r1 ; r2 ) with
                                     1        1
representative risk tolerance R =    r1   +   r2   in the benchmark case is given by:



                             CE(R) =                 R log KYp     (R)
                                                             1
                                                             X ( 1)n         n
                                           = p                        V (p ) 2 kn (y)
                                                               n!Rn 1
                                                             n=2

   Then:


                                            1
                                            X
                             @CE              ( 1)n (n 1)        n
                                          =             n
                                                          V (p ) 2 kn (y)
                              @R                n!    R
                                              n=2
                               @R                  1
                                          =
                               @r2                 r22

   But we know that the risk premium for any risk-averse individual facing any risky project p is
positive:
                                      1
                                      X ( 1)n         n
                             RP (p) =       n 1
                                                V (p) 2 kn (y) > 0 ,
                                        n!R
                                                   n=2
                                                         1
                            1                      1 X ( 1)n        n
                              RP (p) =                    n 1
                                                              V (p) 2 kn (y) > 0
                            R                      R  n!R
                                                     n=2

   Hence:
                                              1
                                              X
                             @CE                ( 1)n (n 1)        n
                                          =               n
                                                            V (p ) 2 kn (y)
                              @R                  n!    R
                                              n=2
                                                     1
                                               1 X ( 1)n        n
                                          >           n 1
                                                          V (p) 2 kn (y)
                                               R  n!R
                                                    n=2
                                          > 0

   But:

                                              @CE              @CE @R
                                                             =
                                               @r2               @R @r2
                                                             < 0

   Hence, CE(r1 ; r2 ) is decreasing in the risk aversion of any partner, since CE( ; ) is symmetric
in each of its arguments.
   Thus, if jG1j < jG2j, for example, it is the most risk-averse excess agents of G2 who will



                                                              39
remain unmatched in equilibrium. Why? The following example best illustrates the intuition: let
G1 = fr1A ; r2A g and G2 = fr1B ; r2B ; r3B g, where agents are ordered from least to most risk-averse.
Suppose that it is not the most risk-averse agent who remains unmatched in equilibrium–suppose
r2B is unmatched (which is the least favored option for all agents), while (r1A ; r1B ) and (r2A ; r3B ) are
matched, and individual payo¤s for the matched pairs are (CE11                            v1 ; v1 ) and (CE23    v3 ; v3 ). But
then   r2B   can o¤er to match with               r2A   and receive individual payo¤ v3 , which she prefers to being
unmatched, and this leaves                r2A   with CE22          v3 > CE23     v3 , since CE(r1 ; r2 ) is decreasing in risk
aversion as proved above. Thus,                 r2A   and   r2B   will deviate and match with each other instead, meaning
that   f(r1A ; r1B ); (r2A ; r3B )g   is not stable. The general point is that, because less risk-averse partners
can always generate more surplus together, they can always …nd a division of the surplus which
beats the best o¤er the most risk-averse agent can make. (Remember, the equilibrium matching
pattern itself is determined by whether it’s the less risk-averse agent or the more risk-averse agent
who experiences a larger di¤ erence between matching with a less risk-averse versus a more risk-
averse partner.)
   Thus, in this simple example, it is r3B who will be unmatched in equilibrium. Then the main
matching results apply to the remaining agents, G1 = fr1A ; r2A g and G2 = fr1B ; r2B g.

9.4      A.4: Proof of Proposition 1 (main matching result) and Corollary 1 (coef-
         …cient of variation result)
   Proposition 1: Recall that V (p) describes the variance cost of a project with mean return p.
Then M (p)          V 0 (p) describes the marginal variance cost of a project with mean return p.
             (a) A su¢ cient condition for PAM to be the unique equilibrium match is M 00 (p) < 0 for
p > 0 (concavity).
             (b) A su¢ cient condition for NAM to be the unique equilibrium match is M 00 (p) > 0 for
p > 0 (convexity).
             (c) A su¢ cient condition for any match to be sustainable as an equilibrium is M 00 (p) = 0
for p > 0 (linearity).
   Proof : Suppose a matched pair (r1 ; r2 ) has to choose from a family of income distributions
                                      1
de…ned by Yp = p + V (p) 2 Y , where Y is a random variable with well-de…ned cumulants: k1 (y) =
E(Y ) = 0, k2 (y) = V (Y ) = 1, in…nite support. (The cumulant-generating function of a random
variable is the log of the moment-generating function; the nth order cumulant is the nth derivative
of the cumulant-generating function evaluated at 0.)
   Recall that the representative risk tolerance of a matched group is the sum of the risk tolerances
                                                                                               1        1
of the members. So, the representative risk tolerance of (r1 ; r2 ) is R =                     r1   +   r2 .
   We know from Appendix 2 that the expected utility of a group with representative risk aversion
r (reciprocal of representative risk tolerance R) which has chosen a project p with risky stream of
returns Yp is:




                                                                       40
                                              1
                                                                            Z                   1
                                    r[p+V (p) 2 Y ]                    rp                rV (p) 2 y
                          E     e                        =         e             e                    f (y)dy
                                                                   Z         1
                                                                                 h             1    i
                                                                                     p+V (p) 2 y
                                                         =              e    R
                                                                                                        f (y)dy

   Divide by ( 1), transform by log, and multiply by ( R) for the certainty-equivalent. Since we
want to maximize expected utility, this implies we want to choose p to maximize the certainty-
equivalent:


                                                                   1                 1
                                                                     [p+V    (p) 2 Y ]
                         CE(p; R) =               R log E e        R



                                                         1                1      1
                                       =          R        p + log E e R V (p) 2 Y
                                                         R
                                                        "1                         #
                                                         X ( 1)n          n
                                       = p            R             V (p) 2 kn (y)
                                                              n!Rn
                                                         n=2
                                                                       1
                                                                       X
                                                       1                 ( 1)n         n
                                       = p               V (p)               n 1
                                                                                 V (p) 2 kn (y)
                                                      2R                 n!R
                                                                       n=3

   Then:

                          @CE    1            X ( 1)n (n 1)        n
                              =    2
                                     V (p ) +             n
                                                            V (p ) 2 kn (y)
                           @R   2R                n!    R
                                                         n=3

   And:


     @ 2 CE          1            1            @p    X ( 1)n n(n 1)                n
                                        0
                =      V (p  ) +      V   (p )                              V (p ) 2 kn (y)
      @R2           R3           2R2           @R            n!     Rn+1
                                                     n=3
                    X ( 1)n (n 1) n               n            @p
                  +                 n
                                           V (p ) 2 1 V 0 (p )     kn (y)
                           n!     R      2                     @R
                    n=3
                                          "                                                           #
                      2 V (p )    @p        X ( 1)n 1                 n                     1
                                                                         1 0                    0
                =               +                              V (p ) 2 V (p )kn (y) +         V (p )
                     R V 0 (p )   @R            (n 2)! 2Rn                                 2R2
                                                  n=3

                                                                                                                                  1
   where we know this second bracketed term is positive because it is bounded below by                                            R   > 0.
We establish this bound by recalling the …rst-order condition of the optimization problem:

                              1   1            X ( 1)n 1           n
                                                                                                         1
              F OCp = 0 :       +   2
                                      V (p ) +            n
                                                            V (p ) 2                                         V 0 (p )kn (y) = 0
                              R 2R              (n 1)! 2R
                                                        n=3

   This implies:
                        1            X ( 1)n 1           n                                                        1
                                                                                     1
                          2
                            V (p ) +            n
                                                  V (p ) 2                               V 0 (p )kn (y) =
                       2R             (n 1)! 2R                                                                   R
                                        n=3


                                                              41
     And the …rst term of the second bracketed expression:
             X ( 1)n 1           n                                   X ( 1)n 1           n
                                              1
                        n
                          V (p ) 2                V 0 (p )kn (y) >              n
                                                                                  V (p ) 2       1
                                                                                                     V 0 (p )kn (y)
              (n 2)! 2R                                               (n 1)! 2R
             n=3                                                     n=3

     Now, we seek conditions such that:

                                                         @ 2 CE
                                                                >; < 0
                                                          @R2
                                    d2 CE
     Using the expression for        dR2
                                          ,   and the fact that the second bracketed expression is a positive
constant, we know that:


                                                   @ 2 CE
                                                            > ;< 0 ,
                                                    @R2
                                                       @p             2 V (p )
                                                            > ;<
                                                       @R             R V 0 (p )

                   @p
     Now, …nd      @R    by implicitly di¤erentiating F OCp = 0:

                                   1            X ( 1)n 1           n                                     1
                                                                                   1
                   F OCp = 0 :       2
                                       V (p ) +            n
                                                             V (p ) 2                  V 0 (p )kn (y) =
                                  2R             (n 1)! 2R                                                R
                                                      n=3



             @p         1 0           1             @p         X ( 1)n      n 1          n
                :         3
                            V (p ) +    2
                                          V 00 (p )                         n+1
                                                                                  V (p ) 2 1 V 0 (p )kn (y)
             @R         R            2R             @R             (n 1)! R     2
                                                               n=3
    X ( 1)n 1 1 n                             n                @p     X  ( 1) n   1 1         n      00        @p         1
                                                   2 0
+                               1 V (p ) 2          V (p )2 kn      +                  V (p ) 2 1 V (p )kn (y)    =
     (n 1)! Rn 2 2                                             @R       (n 1)! R 2 n                           @R         R2
    n=3                                                                    n=3

     Hence:

                 R 00      @p       X ( 1)n 1 n                n                     R @p     V (p )
          V 0 (p ) +V (p )    + R2                  n
                                                        V (p ) 2 2 V 0 (p )2 kn (y)
                  2        @R            (n 1)! R 2                                   2 @R   V 0 (p )
                                    n=3
                 X ( 1)n 1 1           n                  @p V (p )V 00 (p )
             +R3                V (p ) 2
                                          2 0
                                           V  (p )k n (y)                          V 0 (p ) = R
                    (n 1)! Rn 2                           @R       V 0 (p )
                   n=3

     This expression can be rearranged using the …rst-order condition:

               V 0 (p ) @p               V 0 (p ) V 00 (p ) V 0 (p )     1
                       +          R                  0
                                                                      + V 00 (p )
                  R       @R                 2      V (p )    V (p )     2
   2
  R @p X  ( 1) n    1 n        n                        X   ( 1) n   1 n        n
+                       V (p ) 2 2 V 0 (p )2 kn (y) R                    V (p ) 2 1 V 0 (p )kn (y) =                  1
  2 @R   (n 1)! Rn 2                                       (n 1)! Rn 2
             n=3                                                       n=3




                                                               42
   So we see that:
                               V 0 (p )              P         ( 1)n 1 n          n
                                                                                    1 0
           @p                     R           1+R          n=3 (n 1)! Rn 2 V (p )
                                                                                  2  V (p )kn (y)
              = V 00 (p )            0 (p )       V 0 (p )2       P           n            n
                                R VV (p                                  (  1)
                                                                2
           @R  R V (p )                       +               R                  1 n         2 0
                                                                                                     )2 kn (y)
                                                  2V (p ) + 2       n=3 (n 1)! Rn 2 V (p )    V (p
                                                                                           2
                                          )

   Hence:

                                               @p         2 V (p )
                                                    > ;<             ,
                                               @R         R V 0 (p )
                                          V 0 (p )2 > ; < 2V (p )V 00 (p )

   Call the left-hand side of this inequality LHS , and the right-hand side, RHS. Observe that
at R = 0 (zero risk tolerance), LHS = RHS = 0, since p = 0 is the safest project available, so
p (0) = 0, and it is assumed that V (0) = V 0 (0) = 0.
                      @LHS         @RHS
   So, compare         @R    and    @R :      both LHS and RHS are 0 at R = 0. As R increases, if LHS
either increases faster in R or decreases slower than R at every point R in comparison to RHS,
           @LHS        @RHS                              @ 2 CE
that is,    @R    >     @R for all R >        0, then     @R2
                                                                  > 0 since LHS > RHS in the above inequality.
And, vice versa,      if @LHS   @RHS
                          @R < @R .
   Thus:

                                    V 0 (p )2 > ; < 2V (p )V 00 (p ) ,
                                                                      @p
                                            0 > ; < 2V (p )V 000 (p )    ,
                                                                      @R
                                            0 > ; < V 000 (p )

   where the last equivalency holds because 2V (p ) @p
                                                    @R > 0.
   Hence, Proposition 1 is proven:

                                                     @ 2 CE
                       V 000 (p) < 0 8p           0,        > 0 8R          0 ) unique P AM
                                                      @R2
                                                     @ 2 CE
                       V 000 (p) > 0 8p           0,        < 0 8R          0 ) unique N AM
                                                      @R2

   Note that if our focus were not on identifying conditions for assortative matching that are
independent of risk type distributions, we could easily write a necessary and su¢ cient condition
for PAM and NAM. Instead of seeking conditions for global convexity and concavity of CE(R) in
R, the condition simply has to hold for each set of representative risk tolerances for every possible
matching in the given population of risk types.




                                                              43
    A quick …nal note: we need CE(p; R) to be concave in p for a well-de…ned maximum:

                                  ( 1)n n h n                                                                                      i
                              X1
@ 2 CE             1 00                                                     n
                                                                                    2                          n
            =         V (p)                                 1 V (p) 2                   V 0 (p)2 + V (p) 2             1
                                                                                                                           V 00 (p) kn (y)
 @p2              2R              n!Rn 1 2   2
                              n=3
                    "                                                                                                                                     #
                  1 1 00        X1
                                      ( 1)n 1           hn              n                                  n
                                                                                                                                                         i
                                                                                2        0       2                 2               00         0      2
            =           V (p) +                                 V (p)   2           V (p) + V (p)          2               V (p)V (p)        V (p)
                  2 R               (n 1)!Rn 1              2
                                n=3
            < 0
                                           1
                                      V (p) 2
    Corollary 1: Let CV (p) =            p      denote the ratio of a project’s mean return to its standard
deviation for p > 0. Then:
           (a) CV 0 (p) < 0 8p > 0 i¤ M 00 (p) < 0 8p > 0 (P AM )
           (b) CV 0 (p) > 0 8p > 0 i¤ M 00 (p) > 0 8p > 0 (N AM )
    Proof : Recall that the Sharpe ratio is the reciprocal of the coe¢ cient of variation: SR(p)
  1
CV (p) .   Thus, proving that the Sharpe ratio monotonically increases (decreases) in mean return i¤
the marginal variance cost is concave (convex) in mean return proves the corollary.

                                                        p
                                  SR(p) =                       1
                                                   V (p) 2
                                                                1                            1
                                      0            V (p) 2           p 12 V (p)              2   V 0 (p)
                                  SR (p) =
                                                                      V (p)

    Then:

                                            1       1                           1
                  SR0 (p)   > ; < 0 , V (p) 2 >; < p V (p)                      2   V 0 (p) [since V (p) > 0 8p]
                                                    2
                                         1 0
                            , V (p) >; < pV (p)
                                         2
                                                            1
    Then note that LHS(p = 0) = V (0) = 0 =                 2       0 V 0 (0) = RHS(p = 0). So, look at derivatives
of LHS and RHS, since the domain is p              0.

                                                V 0 (p) >; < pV 00 (p)

    But we don’t know under what conditions this inequality holds. So we again note that LHS(p =
0) = V 0 (0) = 0 = 0 V 00 (0) = RHS(p = 0), and di¤erentiate LHS, RHS again:

                                   V 00 (p) > ; < V 00 (p) + pV 000 (p) ,
                                          0 > ; < pV 000 (p)




                                                            44
   Since the domain is p             0, this means that:

                                           V 000 (p)     >      0 , SR0 (p) < 0 8p                  0
                                                         ,       !N AM
                                                         , CV 0 (p) > 0
                                                           @2p
                                                         ,       <0
                                                           @R2

   and:

                                           V 000 (p)     <      0 , SR0 (p) > 0 8p                  0
                                                         ,       !P AM
                                                         , CV 0 (p) < 0
                                                           @2p
                                                         ,       >0
                                                           @R2

9.5   A.5: Proof of Proposition 2 (NAM when income-smoothing is shut down)
   Proposition 2: Suppose that all agents in G1 draw income iid from a distribution M , and all
agents in G2 draw income iid from a distribution W , so that all possible pairs face the same joint
income distribution. Once matched, agents can commit ex ante to a return-contingent sharing rule.
Then the unique equilibrium matching is NAM.
   Proof : Suppose that all pairs must undertake the same project, p. For instance, the government
mandates that all farmers must grow rice. This e¤ectively shuts down the income-smoothing
channel.
   Di¤erentiate CE(r1 ; r2 ) with respect to r1 and r2 when there is no project choice, so that all
                                                                                                                    d2 CE(r1 ;r2 )
pairs (r1 ; r2 ) face the same risky income stream f (Yp jp). The cross-partial                                        dr1 dr2       is:


                     R         r1 r2                     R            r1 r2                         hR           r1 r2                     i2
                                     y                                      y                                          y
          r1 r2          e    r1 +r2 p   f (yp jp)dyp        yp2 e   r1 +r2 p   f (yp jp)dyp             yp e   r1 +r2 p   f (yp jp)dyp
                                                               hR                                   i2
       (r1 + r2 )3                                                         r1 r2
                                                                                 y
                                                                          r1 +r2 p
                                                                     e               f (yp jp)dyp

   But we know that:
           Z        r1 r2
                                             Z            r1 r2
                                                                                             Z            r1 r2                       2
                          y                                     y                                               y
               e   r1 +r2 p   f (yp jp)dyp       yp2 e   r1 +r2 p        f (yp jp)dyp >          yp e    r1 +r2 p   f (yp jp)dyp

   since we know variance is always positive. Therefore:
                                Z                  Z                                   Z                        2
                                    f (yp jp)dyp         yp2 f (yp jp)dyp       >          yp f (yp jp)dyp
                          r1 r2
                                Y
                         r1 +r2 p
   and g(Yp ) = e                   is a convex function.


                                                                          45
   Hence:

                                                     @ 2 CE(r1 ; r2 )
                                                                      <0
                                                         @r1 @r2
   and negative assortative matching therefore results as the unique equilibrium.
   Chiappori and Reny (2006) and Schulhofer-Wohl (2006) also …nd that the unique matching
pattern is negative-assortative when heterogenously risk-averse agents who are matched can commit
ex ante to a return-contingent sharing rule of a given risk, but cannot choose what risk to face.

9.6   A.6: Proof of Proposition 3 (PAM when consumption-smoothing is shut
      down)
   Proposition 3: Suppose that the slope of the sharing rule s(Rp ) = a + bRp is …xed. For
example, a wage law requires a 50-50 split of output. However, a matched pair is able to choose a
                                             1
risky project p, where Yp = p + V (p) 2 Y as in the benchmark model. Then the unique equilibrium
matching is PAM.
   Proof : We know from the main matching result that the optimal sharing rule is linear. Suppose
the slope of the sharing rule s(Yp ) = a + bYp is …xed at b for all possible pairs of risk types. (For
example, the government mandates an equal split of the output, but is unable to prevent partners
                                                                                                  1
from making …xed transfers to one another.) Recall from the set up that Yp = p + V (p) 2 Y ,
E(Y ) = 0, V (Y ) = 1.
   Fixing b removes consumption-smoothing as an e¤ective risk management tool (since trans-
fers can no longer be conditioned on the realized return), leaving only income-smoothing (project
choice). What happens to equilibrium risk-sharing relationships?
   A matched pair (r1 ; r2 ) chooses the relationship-speci…c transfer a and project p:
                                         Z
                                                     r1 [ a+(1 b)yp ]
                                 max             e                      f (yp jp)dyp s.t.
                                 a;p

                                     Z
                                                 r2 [a+byp ]                         v
                                             e                 f (yp jp)dyp      e

   Using the structure on Yp :
                                     Z                                    1
                                                 r1 [ a+(1 b)(p+V (p) 2 y)]
                            max              e                                 f (y)dy s.t.
                             a;p

                                 Z                               1
                                             r2 [a+b(p+V (p) 2 y)]                       v
                                         e                           f (y)dy         e

   The transfer a is chosen to satisfy the constraint (which clearly binds in equilibrium), since the
division of output is …xed at b by the government. Basically, the transfer a that r1 must make to
a partner r2 to ensure her each level of expected utility v measures the value of that relationship.




                                                                46
    Therefore:
                                                               Z                                             1
                                                         e r2 [a+b(p+V (p) 2 y)] f (y)dy = e                                                       v
                                                                                                                                                       ,
                                                          Z                 1
                                                     r2 a
                                                   e        e r2 b(p+V (p) 2 y) f (y)dy = e                                                        v
                                                                                                                                                       ,
                                                            Z
                                    1                                      1
                                            v + r2 bp log e r2 bV (p) 2 y f (y)dy = a
                                    r2

    Then the equilibrium project selected is:

                                              Z                      1
                                                                                                         R                 1
                                                                                                                        ~ 2 y f (y)dy
                                                                                                                 r2 bV (p)
                                                                                                                                                                   1
                                                           r1       r2
                                                                                 v+r2 b~
                                                                                       p log                 e                          +(1 b)(~
                                                                                                                                               p+V (~
                                                                                                                                                    p) 2 y
      p (r1 ; r2 ) = arg max                          e                                                                                                                    f (y)dy
                                      p~2
                                                  r1                     r          R                     1                Z                               1
                                                     v     r1 p~+ r1 log                e              ~ 2 y f (y)dy
                                                                                                r2 bV (p)
                                                                                                                                   r1 (1 b)V (~
                                                                                                                                              p) 2 y
                    = arg max e                   r2                     2                                                     e                               f (y)dy
                                      p~2


    Transform the objective function by dividing by                                                          1 and taking logs:
                                                           Z                                                              Z
                        r1                    r1                         r2 bV (~
                                                                                p) 2 y
                                                                                            1
                                                                                                                                   r1 (1 b)V (~
                                                                                                                                              p) 2 y
                                                                                                                                                           1
              max          v        r1 p~ +      log            e                                f (y)dy + log                 e                               f (y)dy
              p~2       r2                    r2

    Then the …rst-order condition characterizing equilibrium project choice is:

                   1         R                1                                                                   1         R                  1
       b 21 V (p ) 2 V 0 (p ) ye r2 bV (~p) 2 y f (y)dy                                 (1           b) 12 V (p ) 2 V 0 (p ) ye r1 (1 b)V (~p) 2 y f (y)dy
1                  R               1                                                                           R                  1                        =0
                      e r2 bV (~p) 2 y f (y)dy                                                                   e r1 (1 b)V (~p) 2 y f (y)dy

    Then the certainty-equivalent of r1 is:

                                   r1             r        R                    1                            Z                             1
                                      v   r1 p + r1 log         e    r2 bV (p ) 2 y f (y)dy
          r1 CE                                                                                                        r1 (1 b)V (p ) 2 y
      e             =          e   r2             2                                                               e                            f (y)dy ,
                                                                    Z                                                                  Z
                               1                      1                           r2 bV (p ) 2 y
                                                                                                     1
                                                                                                                            1                                          1
                                                                                                                                                       r1 (1 b)V (p ) 2 y
          CEr1      =             v+p                    log                 e                           f (y)dy               log             e                            f (y)dy
                               r2                     r2                                                                    r1

    Then the sum of certainty-equivalents for (r1 ; r2 ) is:
                                                       Z                                                                       Z
                                            1                       r2 bV (p ) 2 y
                                                                                        1
                                                                                                                      1                 r1 (1 b)V (p ) 2 y
                                                                                                                                                               1
          CE(r1 ; r2 ) = p                     log         e                                    f (y)dy                  log       e                               f (y)dy
                                            r2                                                                        r1




                                                                                                47
     Using the …rst-order condition:

                                                       1              R                                                    1
                                                                                                                                                         Z
@CE              @p            1        r2 b 12 V (p ) 2 V 0 (p ) @p
                                                                  @r1    ye r2 bV (p                                   ) 2 y f (y)dy
                                                                                                                                              1                                        1
                                                                                                                                                                       r1 (1 b)V (p ) 2 y
           =                                           R               1                                                                    + 2 log              e                          f (y)dy
 @r1             @r1           r2                         e r2 bV (p ) 2 y f (y)dy                                                           r1
                          h                                  1                                               1
                                                                                                                                   iR                                  1

                     1         (1            b)V (p ) 2               r1 (1        b) 12 V (p ) 2 V 0 (p ) @p
                                                                                                           @r1                          ye        r1 (1 b)V (p ) 2 y f (y)dy

                     r1                                                        R                                       1
                                                                                   e       r1 (1 b)V (p ) 2 y f (y)dy

                              Z                                                                                     1 R                                      1
                                                                                                                                        r1 (1 b)V (p ) 2 y f (y)dy
                 1                          r1 (1 b)V (p ) 2 y
                                                                  1
                                                                                               (1          b)V (p ) 2 ye
           =         log            e                                 f (y)dy +                                        R
                 r12                                                                                        r1           e
                                                                                                                                                          1
                                                                                                                                        r1 (1 b)V (p ) 2 y f (y)dy


     And:
                                                                        R                     1
                           @CE                       (1     b) 1    @p ye r1 (1 b)V (p ) 2 y f (y)dy
                                                                                           1
                                                                                                   0
                                  =                              V (p )
                                                            V (p )                         2
                          @r2 @r1                         r1 2      @r2 R e r1 (1 b)V (p ) 21 y f (y)dy
                                                                  R                    1
                                      (1 b) 1        1
                                                        0     @p ye r1 (1 b)V (p ) 2 y f (y)dy
                                    +         V (p ) 2 V (p )
                                        r1 2                  @r2 R e r1 (1 b)V (p ) 21 y f (y)dy
                                        R                              1                       R                                    1                        R                             1            2
                                             e   r1 (1 b)V (p ) 2 y f (y)dy                            y2e       r1 (1 b)V (p ) 2 y f (y)dy                      ye        r1 (1 b)V (p ) 2 y f (y)dy
    1                         @p
      (1     b)2 V 0 (p )                                                                               hR                                              i2
    2                         @r2                                                                                                       1
                                                                                                                   r1 (1 b)V (p ) 2 y f (y)dy
                                                                                                             e
                                             R                             1                           R                                  1                        R                           1            2
                                                 e   r1 (1 b)V (p ) 2 y f (y)dy                            y2e      r1 (1 b)V (p ) 2 y f (y)dy                         ye     r1 (1 b)V (p ) 2 y f (y)dy
      1                           @p
=       (1      b)2 V 0 (p )                                                                                hR                                                i2
      2                           @r2                                                                                                         1
                                                                                                                           r1 (1 b)V (p ) 2 y f (y)dy
                                                                                                                   e

                                                                                                >0

               @p
     since     @r2   < 0 and the fraction term is positive. Since the variance of Y is positive:

                                                         Z                    Z                                     Z                         2
                                                                                       2
                                                                 f (y)dy           y f (y)dy >                                 yf (y)dy

                                                     1
     and g(y) = e             r1 (1 b)V (p ) 2 y             is a convex function.
     Hence, positive assortative matching arises as the unique equilibrium.
     So, if the government regulates wages by …xing the slope of the sharing rule at some b 2 [0; 1],
where pairs can still make within-pair state-independent transfers, the unique equilibrium matching
pattern is always positive assortative, verifying our intuition that, because consumption-smoothing
is held …xed, the "similarity of decisionmaking framework" dominates and people match with
people who are like them because they will agree about project choice. This can be thought of as
the counterpoint to shutting down the income-smoothing channel.
     What are some implications of this understanding? The government may be motivated by
equality concerns to specify an equal division of output in every relationship, but this may actually

                                                                                                    48
generate even more inequality by weakening the informal risk-management toolkit available to
individuals, which then triggers endogenous change in risk-sharing networks. Speci…cally, if agents
had been matched negative assortatively in the status quo (because the "cost function" of project
mean is quite convex, say), then this imposition of wage equality leads to positive assortative
matching, which may actually exacerbate inequality: there is a bigger spread in projects, with less
risk-averse agents on projects with much higher expected returns while more risk-averse agents are
on projects with much smaller expected returns, and less risk-averse agents abandon their roles as
informal insurers, and more risk-averse agents wind up bearing more risk.

9.7    A.7: Proof of Proposition 4 (mean incomes and risk tolerance)
    Proposition 4: Let p (ri ; (ri )) denote the mean return of the project chosen by a matched
pair (ri ; (ri )). Then:
         (a) If M 00 (p) < 0 for p > 0, then p (ri ; (ri )) is convex in representative risk tolerance
R(ri ; (ri )).
         (b) If M 00 (p) > 0 for p > 0, then p (ri ; (ri )) is concave in representative risk tolerance
R(ri ; (ri )).
    Proof : We want to show that the condition for global convexity and concavity of the certainty-
equivalent of a group with representative risk tolerance R in R is equivalent to global convexity
and concavity of the mean returns of projects chosen by matched pairs in equilibrium in the
representative risk tolerances of those matched pairs.
    We know from Appendix 4 that:

                                  @ 2 CE
                                           > ; < 0 8R > 0 ,
                                   @R2
                                      @p           2 V (p )
                                           > ;<               8R > 0
                                      @R           R V 0 (p )

                                                                       @LHS       @RHS
    At R = 0, LHS = RHS = 0. So, …nd conditions under which             @R    >    @R ,   and vice versa.
    Then:

                                                  @LHS @RHS
                                                                        > ;< 0 ,
                                                    @R     @R
                    R 0      @2p    @p     R 00     @p 1 0
                      V (p )    2
                                  +          V (p )      V (p )         > ;< 0
                    2        @R     @R     2        @R 2

    The second term is positive or negative depending on whether the bracketed term is positive or
negative:

                           @p   R 00     @p     1 0
                                  V (p )          V (p )   > ;< 0 ,
                           @R   2        @R     2
                                                     @p            1 V 0 (p )
                                                           > ;<
                                                      @R           R V 00 (p )



                                                  49
                                   @p
   Using the expression for        @R   we characterized by implicitly di¤erentiating the …rst-order opti-
mality condition in Appendix 4, we see that this inequality is equivalent to:
          "                                                                         #
      2       1 X ( 1)n 1 n        n
                                          1    0              1                 1                   1 V 0 (p )2
 2R                      n
                            V (p ) 2          V (p )kn (y) +     V 0 (p )               V 00 (p )               >; < 0
              2  (n 1)! R 2                                  2R2                R                   2 V (p )
               n=3

   But we know that the …rst bracketed term is positive, since:

          1 X ( 1)n 1 n        n
                                         1                       1 X ( 1)n 1          n

                     n
                        V (p ) 2             V 0 (p )kn (y) >                n
                                                                               V (p ) 2             1
                                                                                                        V 0 (p )kn (y)
          2  (n 1)! R 2                                          2  (n 1)! R
              n=3                                                  n=3
                                                                  1                 1
                                                            =        V 0 (p )
                                                                 2R2                R

   where the equality holds from F OCp = 0.
   Hence:

                                               @p        1 V 0 (p )
                                                   >; <             ,
                                               @R       R V 00 (p )
                                                    1 V 0 (p )2
                                         V 00 (p )              >; < 0 ,
                                                    2 V (p )
                                             2V (p )V 00 (p ) >; < V 0 (p )2

   But we know from Appendix 4 that:

                                         2V (p )V 00 (p ) >; < V 0 (p )2 ,
                                                   V 000 (p ) >; < 0 ,
                                              @ 2 CE
                                                     <; > 0 ,
                                               @R2
                             R 0      @2p   @p R 00        @p            1 0
                               V (p )     +         V (p )                 V (p ) >; < 0
                             2        @R2   @R 2           @R            2

   Hence:

                                            V 000 (p ) > ; < 0 8p > 0 ,
                     @p   R 00     @p     1 0                      @ 2 CE
                            V (p )          V (p ) > ; < 0 and            <; > 0 8R > 0 ,
                     @R   2        @R     2                         @R2
                                     R 0        @2p
                                        V (p )         < ; > 0 8R > 0 ,
                                      2         @R2
                                                @2p
                                                       < ; > 0 8R > 0
                                                @R2

   Thus, while V 000 (p) (or any higher-order characteristics of the distributions of income streams)
might be di¢ cult to measure or estimate in practice, this result suggests a more empirically feasible
approach: the mean incomes of matched groups in equilibrium are convex or concave in their



                                                           50
representative risk tolerance if and only if V 000 (p) is negative or positive.

9.8    A.8: Proof of Proposition 5 (endogenous group size)
   Proposition 5: Let M (p)         V 0 (p) describe the marginal variance cost of each project p. Then:
         (a) If M 00 (p) < 0, the unique equilibrium is maximal-connectedness: the whole group, G,
is matched.
         (b) If M 00 (p) > 0, the unique equilibrium is minimal-connectedness. Individuals match
in negative assortative pairs: the ith least risk-averse person in G is matched with the ith most
risk-averse. (If jGj is odd,         then the most risk-averse individual in the population remains
unmatched.)
   Proof : We know from the proof of Proposition 1 that:

                                                     @ 2 CE
                                      M 00 (p) > 0 ,        <0
                                                      @R2
                                                     @ 2 CE
                                      M 00 (p) < 0 ,        >0
                                                      @R2

   Recall the following property of a function f : R+
                                                    0 ! R:


                f (0)      0 and f ( ) concave ) 8x; y 2 R+
                                                          0 ; f (x + y) < f (x) + f (y)

                f (0)      0 and f ( ) convex ) 8x; y 2 R+
                                                         0 ; f (x + y) > f (x) + f (y)


   That is, given f (0)    0, a concave function is subadditive, and given f (0)   0, a convex function
is superadditive.
   Recall that CE( ) is a function of the risk tolerance R of a matched group. Since CE(0) = 0,
we know that:



              M 00 (p) > 0 8p     0 , CE(R1 + R2 ) < CE(R1 ) + CE(R2 ) 8R1 ; R2 2 R+
                                                                                   0

              M 00 (p) < 0 8p     0 , CE(R1 + R2 ) > CE(R1 ) + CE(R2 ) 8R1 ; R2 2 R+
                                                                                   0


   But representative risk tolerance is additive: the representative risk tolerance of a matched
group is the sum of the individual risk tolerances. This implies that, when M 00 (p) > 0 and CE( ) is
concave in risk tolerance R, the matching that maximizes the total sum of certainty-equivalents is
unique and is the minimal matching–that is, individuals match in partnerships (since production
requires at least two collaborators), and we know from Proposition 1 that these partnerships will
be negative assortative (and, from Appendix 3, that if there is an odd number of people in the
population, the most risk-averse individual will remain unmatched). And, when M 00 (p) < 0 and
CE( ) is convex in risk tolerance R, the matching that maximizes the total sum of certainty-
equivalents is unique and is the maximal matching–that is, all individuals match in one big group.



                                                    51
9.9    A.9: CARA Preferences and the Two Moment Result
   CARA preferences do not guarantee that equilibrium assortative matching is determined by
the …rst two moments in this model. The key element is actually the location-scale property of the
return distributions (see Meyer (1987) for a detailed discussion of the location-scale family). CARA
preferences are associated with reduction to two moments because they are commonly paired with
the assumption of a normal distribution: that is, if u(x) =              e   rx ,     and X         N( ;   2 ),   then it is
                                                                                        r   2)
                        rX                                                       r(
well-known that     e        is a lognormal distribution with mean           e          2        , which clearly depends
only on the mean and variance.
   However, when CARA preferences are paired with a di¤erent distribution, this is no longer
necessarily the case, which it should be if the preference structure is indeed driving the result. For
example, consider a family of distributions FYp with E(Yp ) = p and V (Yp ) = V (p) which does not
have the location-scale property. Then, the joint certainty-equivalent for a matched pair (r1 ; r2 ) is
(see Appendix 2 for the detailed derivation):
                                                      h     1
                                                                     i
                                                              [Y ]
                                                            R p
                              CE(p; R) =       R log E e
                                                                1
                                                                X
                                                  1               ( 1)n
                                         = p        V (p)                kn (yp )
                                                 2R               n!Rn 1
                                                                n=3

   instead of the following, as it would be for a location-scale family of distributions:
                                                          1
                                                          X
                                             1              ( 1)n         n
                             CE(p; R) = p      V (p)            n 1
                                                                    V (p) 2 kn (y)
                                            2R              n!R
                                                          n=3

   The critical di¤erence is that, with a location-scale family, each distribution Yp can be written
as a linear function of the sequence of cumulants of the "root" random variable, Y . In particular,
the coe¢ cients can be expressed as a function of the variance and the risk tolerance.
   This is not the case outside of the location-scale family, where each project p’s returns fol-
low a distribution described by a distinct sequence of cumulants fk1 (p); k2 (p); :::; kn (p); :::g, and
there is no structure on the particular relationship between the cumulants of Yp and Yp0 . Hence,
conditions for convexity and concavity of CE(p (R); R) in R will depend on the entire sequence
fk1 (p); k2 (p); :::; kn (p); :::g for all available projects p, and we do not obtain the two-moment result.

9.10    A.10: The Portfolio Choice Problem
   The model in this paper is framed to best capture the trade o¤ between sharing a given risk
versus what risk to share in the …rst place, and it is therefore logical to parameterize the spectrum
                                                 1
of risky projects with p, where Yp = p + V (p) 2 Y , E(Y ) = 0; V (Y ) = 1, V 0 (p) > 0, V 00 (p) > 0. The
use of p and V (p) makes the mean-variance trade o¤ across projects clear.
   However, one may wonder how this formulation maps into other commonly-studied portfolio
choice problems, such as the classic problem of an individual who must decide how much of her



                                                     52
wealth to invest in a risky versus a risk-free asset. It turns out that there is an interesting link
between completeness of markets/diversi…cation frictions and V 00 (p), V 000 (p). More speci…cally,
when the market is complete and there are no frictions to diversi…cation, V (p) is quadratic and all
matchings are stable (basically, CAPM). When frictions to diversi…cation are moderate (e.g. there
are moderate intermediary costs for investment), it is the case that V 000 (p) < 0 and PAM is the
unique matching pattern. Finally, when frictions to diversi…cation are substantial, it is the case
that V 000 (p) > 0 and NAM is the unique matching pattern.
    Suppose an individual has wealth 1 (normalized). The risky asset has returns represented by
R    FR , where E(R) =                             2,
                                   R,   V (R) =    R    and the risk-free rate of return is rf                 0.
    Then, given that the individual invests q 2 [0; 1] dollars in the risky asset (which can be thought
of as the fraction invested in the risky asset) and 1                    q in the risk-free asset, let the total return be
described by:
                                                  ~
                                                  R(q) = (1        q)rf + t(q)R

    where 0     t(q)       q at each q, and t0 (q) > 0. That is, it may be costly to invest: if the individual
spends q dollars investing in the risky asset, q                  t(q) dollars go to an intermediary, and t(q) dollars
are actually invested in the risky asset. Alternatively, instead of being a literal intermediary cost,
this cost may also be interpreted as behavioral–putting aside q dollars to invest may result in only
t(q) dollars actually being invested (e.g. for commitment reasons). If these costs are not present,
then t(q) = q. (Of course, it may also be costly to put aside w0                                q dollars into the risk-free asset,
and this is straightforward to add to the model. However, the goal here is to show the simplest
mapping of the paper’s project spectrum (p; V (p)) where V 000 (p) may be 0, positive, or negative,
into this "risky versus risk-free asset" investment decision. For clarity, and since there are only two
assets, it makes sense to "embed" the intermediary costs in one of the assets.)
                                                               ~
    Observe that the family of distributions of total return, fR(q) : q 2 [0; 1]g, is a location-scale
family. And:

                                             ~
                                           E(R(q)) = (1              q)rf + t(q)           R
                                              ~
                                           V (R(q)) = t(q)2              2
                                                                         R


    Then we can re-write:

                                        ~
                                        R(q) = [(1       q)rf + t(q)         R]   + t(q)       R R0

                  R
    where R0 =         R
                           R
                               , so E(R0 ) = 0, V (R0 ) = 1.
                                                                                           1
    The question is, how does this map into Y (p) = p + V (p) 2 Y , E(Y ) = 0, V (Y ) = 1, where
E(Y (p)) = p and V (Y (p)) = V (p)?

                                                    1
                                            V (p) 2          t(q)    R

                                                    p        (1     q)rf + t(q)        R




                                                               53
      Rearranging yields:                                                                                                               !
                                                                                   1                                               1
                                                                         V (p) 2           R                  1       V (p) 2
                                                   p        rf =                                         t                                  rf
                                                                               R                                              R

      Assume the following holds, so that there exists some positive investment amount in the risky
asset which beats investing only in the risk-free asset:
                                                                                                                                    1
                                                                                                                  1       V (p) 2
                                                                                                             t                 R
                                                   p       rf       >          0,              R    >                         1             rf
                                                                                                                      V   (p) 2
                                                                                                                           R

                                                                    , t(q)                 R        > qrf f or some q

      For example, if t(q) = q, so that investing q dollars in the risky asset costs exactly q dollars,
then this condition is simply                      R       > rf (and investing any positive amount in the risky asset beats
investing only in the risk-free asset).
      First, characterize V 0 (p):


                                                                                                                      1
                                                                                                                          !
                                             R1                 1                                        V (p) 2                   1 1                1
                            1 =                 V (p)           2   V 0 (p)            t       10
                                                                                                                                       V (p)          2   V 0 (p)rf ,
                                             R2                                                                   R                R2

                                                   2       2 t(q)
                   V 0 (p) =                               R
                                                           10 (t(q)) r
                                             R      t                 f


      Then V 0 (p) > 0 i¤:
                                                                                               10
                                                                           R   >t                   (t(q)) rf

      Note that if t(q) = q, this just boils down to:                                               R        > rf .
      Second, characterize V                 00 (p):


                                                                                      1
                                                                                        !
                       R1                3
                                               0     1 2        1
                                                                R 00     100   V (p) 2      1           1 0  2
       0 =                V (p)         V (p) +
                                         2             V (p) 2 V (p) t                       2 V (p) V (p) rf
                       R4                          R 2                             R      4  R
                                      1
                                        !                                      1
                                                                                 !
                       10       V (p) 2     1        3                  V (p) 2      1 1         1
               +t                              V (p) 2 V 0 (p)2 rf t 10                   V (p) 2 V 00 (p)rf
                                   R      4  R                               R       R  2
                                                                               1                                                                                        1
                                    3                                 V (p) 2                                                                              V (p) 2                          3
                       1                                                                       1                                                                                1
                   R
                   R   4V   (p)     2   V 0 (p)2 + t         100
                                                                           R               4    2   V (p)             1 V 0 (p)2 r
                                                                                                                                  f              t   10
                                                                                                                                                                    R       4   R
                                                                                                                                                                                    V (p)   2   V 0 (p)2 rf
 00                                                                                             R
V (p) =                                                                                                                        1
                                                                                           1                          V (p) 2                              1
                                                                                                             10                             1
                                                                2
                                                                    R
                                                                    R
                                                                          V (p)            2         t                     R            2   R
                                                                                                                                              V (p)        2   rf

                                2   2                                          100 (t(q)) t(q)
                                    R                                      t
          =                                                 1+                                          r
                                                                                           10 (t(q)) r ) f
               (            t    10 (t(q)) r )2                      (             t                  f
                   R                        f                             R


      Then, a su¢ cient condition for V 00 (p) > 0 is t                                             100           0 (t00               0). Clearly, V 00 (p) > 0 if t(q) = q.




                                                                                               54
    Finally, characterize V 000 (p) :
                               "                                                                         1
                                                                                                             !                                      #
                000                    R                       1
                                                                                10       V (p) 2                     1                      1
  0 = V (p)                                    V (p)           2            t                                                V (p)          2   rf +
                                   2       R                                                       R             2   R
                            "                                                                                            1
                                                                                                                             !                                                   #
                00                         R                       3
                                                                            0                      100       V (p) 2                   1                    1        0                      R3                5
            V (p)                                  V (p)           2   V (p)                 t                                             2 V      (p)         V (p)rf +                      V (p)          2   V 0 (p)3
                                       4   R                                                                         R             4       R                                                R8
                                                                                                                         1
                                                                                                                             !
                      R1                       3
                                                       0               00                        1000        V (p) 2                   1                    3
                         V (p)                 2   V (p)V (p)                            t                                             3 V      (p)         2   V 0 (p)3 rf
                      R2                                                                                         R                 8   R
                                               1
                                                    !                                                                                               1
                                                                                                                                                        !
                      100          V (p)       2               1                     2                                                 V (p) 2                   1
            +t                                                     2 V      (p)          V 0 (p)3 rf                 t       100
                                                                                                                                                                    2 V      (p)     1
                                                                                                                                                                                         V 0 (p)V 00 (p)rf
                                           R               4       R                                                                            R           2       R
                                               1
                                                    !                                                                                               1
                                                                                                                                                        !
                      100          V (p) 2                     1                     2                                                 V (p) 2                  3                    5
            +t                                                     2 V      (p)          V 0 (p)3 rf                 t       10
                                                                                                                                                                         V (p)       2   V 0 (p)3 rf
                                           R               8       R                                                                         R              8    R
                                               1
                                                   !
                      10        V (p) 2                        1                     3
            +t                                                      V (p)            2   V 0 (p)V 00 (p)rf
                                           R               2   R


    Simplify:
                                                                                                                                                                                            1
                                                                                                                                                                                                !
                       1        3V 00 (p)2 V 00 (p)          0
                                                         R V (p)V (p)
                                                                     00               V (p) 2                                                                                                           1              3
        0 = V 000 (p) 0            0    2
                                           +        +                 3      t 1000                                                                                                                     3 V   (p)      2   V 0 (p)3 rf
                     V (p)        V (p)      V (p)     4 R V (p) 2                       R                                                                                                          8   R
            "         "                                   #                   1
                                                                                !                                                                                                                                  #
                        3V 00 (p)       1            0
                                                R V (p)                 V (p) 2     1                                                                                                           3
V 000 (p) = V 00 (p)                                        + t 1000                   V (p)                                                                                                    2   V 0 (p)3 rf V 0 (p)
                          0
                        V (p)   2     V (p) 4 R V (p) 2 3
                                                                           R      8 3R

    Use the known expressions for V 0 (p) and V 00 (p):


                                           2                                                                                                                                              100 (t(q)) t(q)r
V 000 (p)                          2       R                                                 t      100 (t(q)) t(q)                                         1                      3t                     f    ( R rf )
          =                                                                 1+                                                             rf                                +                                                           +
V 0 (p)     (                  t   10 (t(q)) r )2                                    (                   t   10 (t(q)) r )
                                                                                                                        f                               2t(q)2           2          2     2 t(q)2 (         10
                                                                                                                                                                                                          t (t(q)) rf )
                     R                        f                                              R                                                                           R                R          R
                           t    1000 (t(q))
        +                                                              rf
            (                  t    10 (t(q)) r )3
                     R                         f

    Thus, we see that:

   1. When t(q) = q (the "standard case"), it’s clear that V 0 (p) > 0, V 00 (p) > 0, and V 000 (p) = 0, as
      long as              R   > rf (which must hold in order for any positive investment in the risky asset to be
      preferred to investing solely in the risk-free asset). Hence, this …ts neatly into the framework
      of the paper, and by the main result, all matching patterns are stable in this case (since
      V 000 (p) = 0).

   2. When 0                       t(q)                    q, t(q) 6= q, t0 (q) > 0 (so that there are positive intermediary costs
      associated with investment), then as long as investing some positive amount in the risky asset
      beats investing solely in the risky asset (                                                                            >t            10 (t(q)) r ),                it is the case that V 0 (p) > 0.
                                                                                                                     R                                f



                                                                                                                 55
       Moreover, if t00 (q) < 0, so that the amount actually invested in the risky asset is increasing
       with the amount spent on investing, but at a decreasing rate, then V 00 (p) > 0 holds. Finally:

       (a) As t000 (q) becomes more negative (t     1000   > 0), V 000 (p) becomes positive: the more severe
              the intermediary costs (t(q) is "very concave"), the larger the increase in variance as-
              sociated with an increase in mean return. This is the case where N AM is the unique
              matching pattern (V 000 (p) > 0).
       (b) As t000 (q) becomes more positive (t   1000   < 0), V 000 (p) becomes negative: the less severe the
              intermediary costs (t(q) is "not so concave"), the increase in variance associated with
              an increase in mean return increases less sharply. This is the case where P AM is the
              unique matching pattern (V 000 (p) < 0).

   This somewhat stylized mapping suggests an interesting link between di¤erent curvatures of
V (p) and market completeness: when the market is complete and there are no constraints on
diversi…cation (the case t(q) = q), it is the case that V 000 (p) = 0 and all matchings are stable. When
the market is "somewhat incomplete"/there are weak constraints on diversi…cation, that is, t(q) < q
and t00 (q) < 0, but t000 (q) > 0, so that intermediary costs do not increase too sharply as investment
increases, it is the case that V 000 (p) < 0 and P AM is the unique matching pattern. Finally, when
the market is "very incomplete"/there are strong constraints on diversi…cation, that is, t(q) < q
and t00 (q) < 0, but t000 (q) < 0, so that intermediary costs increase sharply as investment increases,
then it is the case that V 000 (p) > 0 and N AM is the unique matching pattern.

9.11     A.11: Individual Payo¤s and the Policy Example
   Under what more general conditions are the more risk-averse agents worse o¤ after a policy like
the one studied in Section 4?
   Since this is meant to give an idea of the conditions, rather than to be an exhaustive proof, I focus
on the "best case scenario for the most-risk averse agent" case. That is, I ask under which conditions
the most risk-averse agent’s highest possible equilibrium payo¤ pre-policy is higher than the most
risk-averse agent’s highest possible equilibrium payo¤ post-policy. Recall that this implies that the
most risk-averse agent receives v4pre = CE14
                                          pre
                                              pre-policy, when the unique matching is negative-
assortative, and v4post = CE44
                            post
                                 post-policy, when the unique matching is positive-assortative (see
Section 4).
   Then, the question is, when do the following hold?

                 upre     post
                  G2;1 > uG2;1 ,
                    N
                 (CE31       N ) + (CE N
                           CE32                 N ) + (CE N
                                              CE23                    N ) + CE N >
                                                                    CE14
                                      22                 13                   14
                    post       post        post      post        post          post       P
                 (CE21       CE22   ) + (CE32      CE33   ) + (CE43          CE44   ) + CE44




                                                     56
                                            upre     post
                                             G2;2 > uG2;2 ,
    N       N         N         N        N       post                 post        post              post       P
 (CE22    CE23 ) + (CE13      CE14 ) + CE14 > (CE32                 CE33   ) + (CE43              CE44   ) + CE44




                                             upre     post
                                              G2;3 > uG2;3 ,
                         N        N        N       post                  post       P
                      (CE13     CE14 ) + CE14 > (CE43                  CE44   ) + CE44




                                             upre     post
                                              G2;4 > uG2;4 ,
                                               N      P
                                             CE14 > CE44

   Reducing these conditions shows that the more risk-averse agents are made worse o¤ by a policy
which moves the spectrum of portfolio choices from M 00 (p) = " to M 00 (p) =                    "–that is, a policy
which moves the spectrum of portfolio choices from negative-assortative matching just above the
"indi¤erence point" (where all matches are stable), to positive-assortative matching just below.
This is exactly the kind of policy studied in Section 4: a policy which results more in a change in
the risk trade-o¤ across di¤erent portfolios than in risk levels.
   Why is this the case? Again, focus on the case of normally-distributed returns Yp                      N (p; pN )
from Section 4 to simplify the form of the joint certainty-equivalents. Then, the "indi¤erence point"
is at N = 2: if Yp    N (p; p2 ), all matchings are stable, and:

                     CE(x; y)        CE(x; y 0 ) = CE(x0 ; y)    CE(x0 ; y 0 ) 8x; y; x0 ; y 0

   Thus, for N 2 [2     "; 2 + "]:

                     CE(x; y)        CE(x; y 0 )    CE(x0 ; y)   CE(x0 ; y 0 ) 8x; y; x0 ; y 0

   and the four conditions above e¤ectively reduce to:

                                                     N      P
                                                   CE14 > CE44

   which holds, since CE N      CE P , and the joint certainty-equivalent is decreasing in risk aversion.

9.12     A.12: Limited commitment
   While I leave a rigorous treatment of limited commitment in this setting to future work, I
discuss some preliminary analysis here.
   The basic elements of the two-period model with limited commitment are:

                                                       57
   1. At the beginning of each period, each member of a matched group (or as an individual, if in
      autarky) chooses a risky project.

       (a) Assume that eternal autarky is the punishment for reneging, and that incomes are in-
           dependent across time and people, since we know that when incomes are independent,
           autarky is never optimal. Thus, imposing autarky is in fact a punishment.

   2. Basic timing of the game:

       (a) A matched pair agrees to a return-contingent sharing rule for their pooled incomes at
           the beginning of pd. 1.
       (b) Each individual in a matched pair observes both income realizations, and so knows what
           the transfer speci…ed by the rule is. Each can choose to uphold that transfer, or to renege
           (do something other than what the rule speci…es). If at least one member reneges, then
           both members are consigned to autarky in pd. 2. (Assume no re-matching.)
       (c) If both uphold the transfer, then the pair stays matched in pd. 2. Assume that in pd.
           2, pairs that successfully cooperated in pd. 1 can implement the e¢ cient outcome in pd.
           2 (for example, because they’ve successfully won each other’s trust).

   Then, what do we know about the equilibrium?
   In pd. 2, for non-reneging pairs, we know that NAM conditions imply that the less risk-averse
di¤erentially prefer to bid more for the more risk-averse, while PAM conditions imply that the less
risk-averse di¤erentially prefer to bid more for the less risk-averse.
   So, under NAM conditions, a less risk-averse person …nds autarky in pd. 2 more costly with a
more risk-averse partner than with a less risk-averse partner. Under PAM, a less risk-averse person
…nds autarky in pd. 2 more costly with a less risk-averse partner than a more risk-averse partner.
   So far, imperfect commitment hasn’t changed when PAM is optimal versus when NAM is
optimal.
   Now, think about the e¤ect on pd. 1 choices. Because of limited commitment, in pd. 1, a
matched pair can’t always implement the e¢ cient risk-sharing rule. The equilibrium sharing rule
in pd. 1 for a matched pair (ri ; rj ) is instead:

   1. If the income realizations are such that the e¢ cient risk-sharing rule happens to be such that
                                                                   j   r                  r
                                                                                          j
      both partners …nd U (keep my own income realization) U ( ri +r  Y
                                                                     j p(i;j)
                                                                              ) < U ( ri +r j
                                                                                              Yp_optimal )
      U (aut), then the transfer is the e¢ cient one.

   2. If the realizations are outside of this interval (which will loosely be the case when one partner
      has a particularly good realization and the other has a particularly bad one), then the better
      o¤ partner should make a transfer to her partner that makes her indi¤erent between paying
      that transfer and keeping everything and facing autarky in pd. 2. (Note that if reneging is
      better than cooperating, the optimal reneging is to keep your own realization.)

                                                     58
   Note that this rule is much less smooth than the e¢ cient risk-sharing rule, which is a linear
split of pooled output. Thus, introducing limited commitment means that the equilibrium split
of pooled income is linear for some joint realizations (that is, realizations which are similar), and
near-autarky for others (very dissimilar realizations).
   More risk-averse people …nd autarky worse, and also dislike the volatility of the sharing rule in
pd. 1 under limited commitment. So even though under NAM conditions, a more risk-averse person
prefers a less risk-averse partner in pd. 2, the volatility of their corresponding pd. 1 sharing rule
(and the fact that the less risk-averse person …nds autarky a lesser threat than the more risk-averse
person), means that more risk-averse people prefer to match with other more risk-averse people
more strongl y than they do in the absence of limited commitment. On the other hand, the less
risk-averse especially value a more risk-averse partner, because a more risk-averse partner is willing
to receive a small transfer and is also the best partner in pd. 2 (NAM conditions). However, limited
commitment constrains the credible "bid" a less risk-averse partner can make in pd. 1. That is,
a less risk-averse person would like to promise a more risk-averse person more than the transfer
that makes her indi¤erent between honoring the transfer and keeping her own income and facing
autarky in pd. 2, but she can’t do this credibly. Thus, under limited commitment, we would expect
positive-assortative matching to be more likely than when commitment is perfect.

9.13    A.13: Background and Empirical Context
   The purpose of this section is to provide further empirical context for the model. First, I will
discuss the substantial role played by informal insurance motivations in building relationships in
risky environments with missing formal insurance and credit markets. Additionally, I will show
that risk attitudes are a signi…cant determinant of risk-sharing partner choice.
   Next, I will provide evidence that there is a great deal of heterogeneity in risk aversion across
individuals in a wide range of settings.
   Finally, I will provide evidence of heterogeneity in the riskiness of activities available to individu-
als, as well as heterogeneity in the relative riskiness of these activities across di¤erent environments.
   To …x ideas, it may be helpful to envision an agricultural setting, which captures nicely the key
elements of the model. Much of the literature discussed in this section is drawn from an agricultural
context, where landowners and farmers are heterogeneous in the extent of their risk aversion, and
landowners must decide which farmers to work with. Di¤erent crops have di¤erent yield and pro…t
distributions: some crops are very robust to drought but correspondingly tend to produce low
yields on average ("safe" crops), while other crops have the potential for very high yields, but are
extremely sensitive to rainfall and other inputs, and blight easily ("risky" crops). In addition to
crop portfolio and plot locations, fertilizer and other inputs, irrigation, planting times, and general
farming methods and technologies must also be chosen.
   Furthermore, the yield and pro…t distribution of each crop varies across agroclimactic region.
Di¤erent parts of the world experience di¤erent levels of rainfall, soil quality, irrigation, elevation,
heat, and other such ecological characteristics, and this in‡uences the stochastic yield and pro…t of


                                                   59
each crop. It is no surprise, then, that equilibrium cropping methods, crop mixes, and contracting
institutions vary so widely across region. A goal of this paper is to advance the understanding of
these di¤erences.

9.13.1     Risk Attitude and Informal Insurance Relationships

   An abundance of work discusses the considerable role of informal insurance concerns in network
formation. People rely on each other to smooth consumption risk and income risk in a wide variety
of ways (Alderman and Paxson (1992), Morduch (1995)). A very prevalent consumption-smoothing
technique between people is transfers and remittances, and much work has been done to study the
nature of the transfers that can be sustained given a risk-sharing group, the shapes of equilibrium
networks holding …xed some transfer rule, and who is empirically observed to make transfers with
whom (Townsend (1994), Fafchamps and Lund (2003), Genicot and Ray (2003), Bramoulle and
Kranton (2007), and Ambrus et al. (2013), to name a few). A general message these papers convey
is that the need to manage risk in the absence of formal insurance institutions has huge e¤ects on
interpersonal relationships among the poor.
   In fact, risk management can a¤ect relationship formation in very speci…c ways. Rosenzweig
and Stark (1989) show that daughters are often strategically married to villages located in en-
vironmentally dissimilar regions with minimally correlated farming incomes, for the purposes of
consumption-smoothing; households exposed to more income risk are more likely to invest in longer-
distance marriage arrangements. Ligon et al. (2002), Fafchamps (1999), and many others analyze
a pure risk-sharing relationship between two heterogeneously risk-averse households who perfectly
observe each other’s income. Ackerberg and Botticini (2002) study agricultural contracting in me-
dieval Tuscany, and …nd evidence that heterogeneously risk-averse tenant farmers and landlords
strategically formed sharecropping relationships based on di¤ering risk attitudes, motivated by
risk management concerns. Hence, informal insurance motivations play a substantial role in the
formation of relationships.
   But how much do individuals care about the risk attitudes of potential partners when forming
risk-sharing groups? Naturally, there are many other reasons people might match with each other,
but the point of the model is to focus on one important determinant of risk-sharing relationship
formation, and to study how equilibrium matching patterns shift along that dimension. Further-
more, there is a great deal of evidence that the risk attitudes of partners are indeed a primary
determinant of risk-sharing partner choice. Ackerberg and Botticini (2002) provide empirical ev-
idence supporting the presence of endogeneity of matching along risk attitude of landowners and
sharecroppers in medieval Tuscany. In their data, they …nd that share contracts were associated
with the safer crop of cereal, while …xed rent (residual claimancy) contracts were associated with
the riskier crop of vines. They argue that this is the outcome of endogenous matching–risk-neutral
tenants may have been assigned to the riskier crops, resulting in …xed rent contracts for vines,
while risk-averse tenants may have been assigned to the safer crops, resulting in share contracts on
cereals.


                                                60
   Additional evidence for the importance of risk attitudes as a determinant of risk-sharing re-
lationships is found in Gine et al. (2010) and Attanasio et al. (2012). Gine et al. (2010) run
an experiment on small-scale entrepreneurs in urban Peru and allow joint liability groups to form
endogenously in a micro…nance setting. They …nd strong evidence of assortative matching along
risk attitude. Attanasio et al. (2012) run a unique experiment with 70 Colombian communities.
They gather data about risk attitudes and pre-existing kinship/friendship networks, and then allow
individuals to form risk-sharing groups of any size. Attanasio et al. …nd that, when members know
each other’s risk types, and trust each other (family and friends are in the same group), condition-
ing on all other potential reasons for matching which they are able to account for (gender, age,
geography), there is strong evidence of positive assortative matching along risk aversion.
   To further emphasize the signi…cant role of risk attitude in determining risk-sharing relationship
formation, I use the dataset from Attanasio et al. (2010) to calculate the proportion of formed
links that involved at least one family or one friendship tie, for each municipality. The mean of
these proportions is 0:005, or 0:5%. Since it’s possible that there were very few family and friend
ties reported in the entire dataset to begin with, I also calculate the proportion of all possible links
that could have involved at least one family or friendship tie, for each municipality. The mean of
this number is 0:05. Hence, this back-of-the-envelope calculation suggests that, in this setting, only
about 10% of all possible risk-sharing relationships which could have involved a family or friendship
tie, actually did involve such a tie. Hence, while one might expect kinship and friendship to be
major in‡uences in partner choice, there is strong evidence that risk attitude is the more prominent
consideration when the partner is being chosen speci…cally for the purposes of informal insurance.
In particular, the family and friendship tie is likely to in‡uence the pool of potential partners
(because individuals are less likely to know the risk attitudes of strangers, or to trust them), but
the choice of partner from this pool for the purposes of insurance is primarily determined by risk
attitudes.

9.13.2    Heterogeneity in Risk Aversion

   The second key piece of the model is heterogeneity in risk attitudes across individuals. There is
plenty of evidence that people are risk-averse and that they are heterogeneous in their risk-aversion.
Experiments which elicit risk attitudes by asking subjects to choose from a set of gambles di¤ering
in riskiness …nd much variation in gamble choice. For example, Harrison et al. (2010) asked 531
experimental subjects drawn from India, Ethiopia, and Uganda to choose a gamble from a set of
gambles varying in riskiness (a riskier gamble has higher mean but correspondingly higher variance),
in a similar spirit as the seminal study by Binswanger (1980), and estimated the density of CRRA
risk attitudes:




                                                  61
   It’s clear that there is a substantial amount of variation, and almost every point in the [0; 1]
range is represented.
   In another experiment involving over 2,000 people living in 70 Colombian communities, where
66% live in rural areas, Attanasio et al. (2012) observes the following distribution (gamble 1 is the
safest gamble, while gamble 6 is the riskiest):




   Chiappori et al. (2010) use two distinct methods to measure heterogeneity in risk preferences
in Thai villages, where these villages are spread across several regions in Thailand. The …rst
method is based o¤ the co-movement of individual consumption with aggregate consumption, and
the second is based o¤ of optimal portfolio choice theory. Using both methods, they …nd substantial
heterogeneity in risk attitudes in each village. Moreover, this heterogeneity varies across villages
and regions. The following table reports the means of risk tolerance for each of 16 villages, and the
test statistic for heterogeneity:




                                                  62
   Again, it is clear that there is widespread variation in the degree of risk aversion across house-
holds.

9.13.3   Heterogeneity in Risky Activities and Settings

   Finally, agents in a given setting have a wide variety of investment options and household
decisions to make, which vary in riskiness. For example, a farmer must choose a spatial distribution
of his plots, what lumpy purchases to make (e.g. bullocks), and when and how to plant his crop.
A microentrepreneur must decide what kind of business he wants to start. Parents must decide
how to invest household resources, and whom their children will marry. Individuals face a diversity
of choices, and how much diversity, as well as the relative riskiness of one decision compared to
another, varies across settings.
   For example, Rosenzweig and Binswanger (1993) consider the equilibrium crop portfolio choices
of heterogeneously risk-averse farmers living in six ICRISAT villages located across three distinct
agroclimactic regions in India. The …rst region is characterized by low levels of erratically distrib-
uted rainfall and soils with limited water storage capacity (this is the riskiest environment), the
second region by similarly erratic rainfall and irrigation but better soil storage capacity, and the
third region by low levels of more reliable rainfall with reasonable soil storage capacity (this is the
safest environment). The principal crops grown are sorghum, pigeon peas, pearl millet, chickpeas,
and groundnuts, and their yield distributions vary across environment. They show that di¤erences

                                                  63
in risk aversion do translate into di¤erences in choice of risky investments. Individuals are in‡u-
enced by risk-reduction when choosing income streams, particularly in response to limitations on
ex post consumption-smoothing, and the degree to which they are in‡uenced depends on their risk
aversion.
       Dercon (1996) also studies the variation in riskiness of agricultural investment decisions by
heterogeneously risk-averse rural households. His data is drawn from Tanzania, a country with very
underdeveloped credit markets (in 1989, only 5% of commercial bank lending went to the private
sector, and less than 10% of this lending went to individual farmers). The UN Food and Agriculture
Organization provides an interesting look at the vast heterogeneity in crop yield distributions and
equilibrium crop mix across regions in Tanzania in 1998. The following table shows the area,
yield, and production of each of …ve crops across ten agroclimactically heterogeneous regions in
Tanzania24 :




       Unfortunately, this table excludes estimates of the variance of yield of each of these crops across
regions. Dercon (1996) provides a discussion of this in his paper. He describes a multiplicity of soils
and irrigation systems in Tanzania, which support di¤erent crops. Paddy, a crop which can yield a
high return, is restricted only to speci…c soils and areas close to a river, and is the least drought and
locust resistant. Despite the potential for high returns, only 11% of the total cultivation sample
grew paddy. On the other hand, sorghum yields only a low-moderate return, but all soils can
sustain it, and it is more resistant to drought and pests. Even though it had a lower mean return,
it was grown by all but two households in the sample.
       Uganda and Ethiopia are similar to Tanzania in the set of crops grown, though the actual
crop mix grown di¤ers due to di¤erences in environmental conditions. An IFPRI report from 2011
estimating crop yields in Uganda provides a useful illustration of how the variance of crop yields
di¤ers across crops, and the typical relationship of the variance with the mean:
  24
    Of course, in addition to levels and ‡uctuations of crop yields, farmers care about the levels and ‡uctuations of
crop prices, as they care ultimately about the distribution of pro…ts.


                                                         64
   There is a clear positive relationship between mean yield and variance of yield. Groundnuts
have low mean yields and correspondingly low ‡uctuation of yields, making it a "safer" crop, while
banana has much higher mean yields but correspondingly higher ‡uctuation of yields, making it a
"riskier" crop.
   Abebe et al. (2010) provide a similar graphic for Ethiopia:




   (Enset is a type of banana.)
   Again, we get a general sense that higher mean yield crops have a higher variance of yield, while
lower mean yield crops have a smaller variance of yield. Comparing across Uganda and Ethiopia,


                                                65
we see that maize is a safer crop relative to sweet potato in Uganda, but the opposite is true in
Ethiopia. Thus, the same set of crops have very di¤erent yield distributions in di¤erent settings,
and furthermore, each crop’s relative riskiness with the other crops also varies across setting.




                                                 66
