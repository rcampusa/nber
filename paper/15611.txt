                               NBER WORKING PAPER SERIES




                         LIAISONS DANGEREUSES:
         INCREASING CONNECTIVITY, RISK SHARING, AND SYSTEMIC RISK

                                        Stefano Battiston
                                       Domenico Delli Gatti
                                         Mauro Gallegati
                                       Bruce C. Greenwald
                                        Joseph E. Stiglitz

                                       Working Paper 15611
                               http://www.nber.org/papers/w15611


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                    January 2009




The views expressed herein are those of the author(s) and do not necessarily reflect the views of the
National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2009 by Stefano Battiston, Domenico Delli Gatti, Mauro Gallegati, Bruce C. Greenwald, and Joseph
E. Stiglitz. All rights reserved. Short sections of text, not to exceed two paragraphs, may be quoted
without explicit permission provided that full credit, including © notice, is given to the source.
Liaisons Dangereuses: Increasing Connectivity, Risk Sharing, and Systemic Risk
Stefano Battiston, Domenico Delli Gatti, Mauro Gallegati, Bruce C. Greenwald, and Joseph
E. Stiglitz
NBER Working Paper No. 15611
December 2009
JEL No. C63,E32,G01,G32

                                               ABSTRACT

We characterize the evolution over time of a network of credit relations among financial agents as
a system of coupled stochastic processes. Each process describes the dynamics of individual financial
robustness, while the coupling results from a network of liabilities among agents. The average level
of risk diversification of the agents coincides with the density of links in the network. In addition to
a process of diffusion of financial distress, we also consider a discrete process of default cascade, due
to the re-evaluation of agents’ assets. In this framework we investigate the probability of individual
defaults as well as the probability of systemic default as a function of the network density. While it
is usually thought that diversification of risk always leads to a more stable financial system, in our
model a tension emerges between individual risk and systemic risk. As the number of counterparties
in the credit network increases beyond a certain value, the default probability, both individual and
systemic, starts to increase. This tension originates from the fact that agents are subject to a financial
accelerator mechanism. In other words, individual financial fragility feeding back on itself may amplify
the effect of an initial shock and lead to a full fledged systemic crisis. The results offer a simple possible
explanation for the endogenous emergence of systemic risk in a credit network.


Stefano Battiston                                     Bruce C. Greenwald
Chair of Systems Design, ETH Zurich                   Columbia University
KPL F27.2, Kreuzplatz 5                               611 Uris Hall
CH-8032 Zurich SWITZERLAND                            New York, NY 10027
sbattiston@ethz.ch                                    bg7@columbia.edu

Domenico Delli Gatti                                  Joseph E. Stiglitz
Istituto di Teoria Economica                          Uris Hall, Columbia University
Università Cattolica                                  3022 Broadway, Room 814
Largo Gemelli, 1                                      New York, NY 10027
20123 Milano                                          and NBER
domenico.delligatti@unicatt.it                        jes322@columbia.edu

Mauro Gallegati
Dipartimento di Economia
Facolta' di Economia Giorgio Fua'
Universita' Politecnica delle Marche
Piazzale Martelli, 8
60121 Ancona
mauro.gallegati@univpm.it
1       Introduction
Credit contracts establish connections among commercial banks on the interbank market,
among firms and banks on the market for loans, among customers and suppliers on the
market for trade credit. In other words, many markets for credit can be conceived of as
credit networks in which nodes represent agents and links represent credit relationships.
This connection-enhancing property is the main reason why credit is pervasive in modern
financially sophisticated economies. Because of the risk of insolvency, the extension of
credit is conditional upon the assessment of credit worthiness and the establishment of
a trust/customer relationship between a borrower and a lender. This requires time and
effort – there are non-negligible transaction costs in credit markets – so that an agent
is willing to get into a credit contract only with few other agents: Credit networks are
therefore generally incomplete. As a consequence in a credit network agents are generally
clustered in neighborhoods so that most of the times the action (and interaction) is at the
local level. Connections among neighborhoods, however, albeit sparse, make the network
as a whole responsive to shocks hitting any node. The pervasiveness of credit is a mixed
blessing. On the one hand establishing several credit relationships allows an agent to
carry on an investment project which would not be feasible by means of internal financial
resources alone and to diversify the risk of a loss (or of a credit crunch) if the agent is hit
by a negative shock. In other words, connectedness allows to share the risk of an idiosyn-
cratic shock hitting, say, agent A among her neighbors B and C. Risk sharing through
the propagation of distress alleviates the burden of adjustment for agent A. On the other
hand, at least in principle, distress propagation can make life more difficult for agents B
and C. They may be weakened – we will be more precise in a while – by the effort to adjust
to the (fraction of the) shock hitting A and transmitted through the network. Hence they
may become more vulnerable to future idiosyncratic shocks. Connections among neigh-
borhoods complete the picture, making the entire network weaker and more vulnerable.
The seeds are sown for a collapse of the entire credit network in the future. In this context,
in fact one cannot rule out the risk of a systemic crisis, i.e. not only of the diffusion but
also of the amplification of financial distress. Each one of the interdependent agents, in
fact, is susceptible to go bankrupt so that the network is potentially exposed to the risk
of a systemic failure, i.e. of multiple joint bankruptcies. It is almost a commonplace, in
the light of the Global Financial Crisis, that systemic risk has been generally neglected
in the current literature. On the other hand the benefits of diversification and risk shar-
ing have been almost exclusively emphasized. Both properties, however, are present and
important in a credit network. In this paper we make a small step in the direction of in-
corporating both mechanism in a general model of a credit network. The most influential
example of network analysis applied to the propagation of distress in a credit network is
the seminal paper by Allen and Gale (2001) on ”financial contagion”. 1 The most recent
    1
    See also Freixas et al. (2000) Furfine (2003); Boss et al. (2004); Elsinger et al. (2006); Iori et al.
(2006) Nier et al. (2007)Boissay (2006) and Battiston et al. (2007) focus on the trade-credit relationships


                                                    2
strand of research has focused on three types of propagation of financial distress: (a) bank
runs and financial contagion on interbank markets (Diamond and Dybvig, 1983)Allen and
Gale (2001); (b) depreciation of a common asset (asset price contagion) (Kiyotaki and
Moore, 1997), (Kiyotaki and Moore, 2002); (c) interlocking credit exposure (Allen and
Gale, 2001), (Allen and Gale, 2005). These mechanisms represent independent but not
alternative contagion channels which may interact during the development of a financial
crisis. For instance, a run on a bank is a shock which may trigger at the same time an
avalanche of deposit withdrawals at other banks – i.e a propagation mechanism of type
(a) – and a phenomenon of financial contagion and liquidity evaporation on the interbank
market – i.e. a propagation mechanism of type (c).
    Focusing on the last channel, in their pioneering contribution Allen and Gale reach
the conclusion that if the credit network of the interbank market is a credit chain – in
which each agent is linked only to one neighbor along a ring – the probability of a collapse
of each and every agent (a bankruptcy avalanche involving all the agents) in case a node
is hit by a shock is equal to one. As the number of partners of each agent increases,
i.e. as the network evolves toward completeness, the risk of a collapse of the agent hit
by the shock goes asymptotically to zero, thanks to risk sharing. The larger the pool of
connected neighbors whom the agent can share the shock with, the smaller the risk of
a collapse of the agent and therefore of the network, i.e. the higher network resilience.
Systemic risk is at a minimum when the credit network is complete, i.e. when agents fully
diversify individual risks. In other words, there is a monotonically decreasing relationship
between the probability of individual failure/systemic risk and the degree of connectivity
of the credit network.
    In the present paper we adopt the same perspective of Allen and Gale, i.e. we focus
on inter-linkages of credit exposures in a general framework for the analysis of credit
networks. We are much less optimistic, however, on the effects of connectivity on systemic
risk because, as the former increases, under specific conditions we detect the emergence
of a trade off between decreasing individual risk – due to risk sharing – and increasing
systemic risk – due to the propagation of financial distress. The larger the number of
connected neighbors, the smaller the risk of an individual collapse but the higher systemic
risk may be and therefore the lower network resilience. In other words, in our paper, the
relationship between connectivity and systemic risk is not monotonically decreasing as
in Allen and Gale, but follows a hump shaped pattern: it is decreasing if the degree of
connectivity is (relatively) low and increasing when it becomes high. In particular we find
that as the degree of connectivity increases above a certain threshold, crises tend to be
not only more severe, but also more frequent.
    This remarkable result is due to the possibly contrasting effects of two essential features
of a credit network which we will label interdependence (of agents’financial conditions)
and financial accelerator. Interdependence, which is largely predominant in the existing
among downstream and upstream firms along the ”supply chain”.



                                               3
literature, from (Allen and Gale, 2001) to (Shin, 2008) consists in the fact that the financial
condition of an agent (measured for instance by the equity ratio, i.e. the reciprocal of
leverage) is affected by the financial conditions of her neighbors and thus depends on
the location of the agent in the network. Interdependence is indeed a general feature of
credit networks. For instance, if A lends to B, then the financial fragility of B affects the
asset value of A and thus A’s fragility. Interdependence can also stem from an insurance
contract or a Credit Default Swap. Suppose B sells protection to A against the risk of
depreciation of a security X. If the price of X actually falls and in addition B is under
distress then A’s financial condition weakens because B may not be able to deliver the
protection she promised.
    The financial accelerator in the present setting consists essentially in the fact that a
change in one agent’s financial condition today may feed back on itself leading to a change
in the same direction of the agent’s financial condition tomorrow. This is essentially a
positive financial feedback at the individual level over time. In other words, the financial
distress of an agent today is likely to lead to additional financial distress for the same agent
tomorrow. Also the financial accelerator is a pervasive feature of credit networks whose
role, however, has been somehow downplayed (at least so far) in the existing network
literature. The financial accelerator is activated in at least two scenarios. In the first one
(see e.g. in (Morris and Shin, 2008)), an agent is hit by a shock due to a loss of market
value of some securities in her portfolio. If such shock is large enough, so that some of
her creditors claim their funds back, the agent is forced to liquidate at least part of her
portfolio to reimburse debt. If the securities are sold below the market price, the asset
side of the balance sheet decreases more than the liability side and the agent’s fragility
- i.e. leverage - goes up unintentionally. This situation can lead to a spiral of losses
and decreasing robustness. In the wording of Adrian and Shin, leverage turns out to be
pro-cyclical (Brunnermeier, 2008; Brunnermeier and Pederson, 2009). A second scenario
is the one in which when the agent is hit by a shock in t, her creditors makes credit
conditions harsher in t+1. Indeed it is well documented that lenders ask a higher external
finance premium when the borrowers’ financial conditions worsen (Bernanke et al., 1999).
Stricter credit conditions can be considered an additional shock hitting the borrower in
t+1. In a sense, both interdependence and the financial accelerator can be conceived of as
propagation mechanisms. Interdependence allows propagation over space - i.e. from one
agent to her neighbors - in the network while the financial accelerator allow propagation
over time, i.e. from one agent to herself over different time periods.
    Interdependence is a necessary condition for risk sharing. The higher the number of
neighbors whom an agent hit by a negative shock can share the shock with, the more
effective is risk sharing. On the other hand, connectedness can activate a financial accel-
erator. If the spreading of the ”disease” is virulent enough, the risk of a systemic crisis
becomes unbearably high. The interplay of interdependence and financial accelerator has
not been incorporated so far in a dynamic model, although the idea is present in sev-
eral previous works (Stiglitz and Greenwald, 2003, e.g. 140-141). Suppose, for instance,

                                               4
that agent A is hit by an adverse shock which makes her financial condition more fragile.
Her lenders – say B and C – will absorb part of the shock and experience therefore a
decrease of their own financial robustness (interdependence). As a consequence, they will
be less willing to extend credit at the same terms as before, thus rationing the quantity
of external finance made available or increasing the interest rate charged to A. In other
words credit will be extended at less favorable conditions making the financial position
of A even worse: Financial fragility feeds back on itself at the individual level (financial
accelerator). Furthermore, A is in turn linked as a lender to other agents – say D and E.
Being in financial distress, A will restrain credit or charge a higher interest rate to her
borrowers, making their financial conditions worse (interdependence again). The increase
of financial fragility therefore spreads through the credit network, a phenomenon often
called distress propagation.
    An initial shock may or may not force A into bankruptcy. If the agent is financially
robust, she can absorb the shock and its consequences – in particular the increase in
the external finance premium – without going bankrupt. The agent, however, will be
financially more fragile and more vulnerable in case a new shock occurs. If A is not
”robust enough” she will go bankrupt 2 and exit, there will be a loss of ”organizational
capital” (in Howitt’s wording) and a fall out on her partners, who will face a loss and/or
incur an additional cost. The lenders (i.e. B and C) will face a loss because they will not
recover the loans they extended to the bankrupt agent. The borrowers (i.e. D and E) will
incur a cost because they will have to look somewhere else for credit and establish a new
relation of trust with a new lender. This is an instance of transaction costs on the credit
market.3 These additional losses and costs may force some others agents into bankruptcy,
and trigger a bankruptcy cascade.
    All in all, the three mechanisms of interdependence, financial accelerator and bankruptcy
cascades can be conceived of in the most general terms as externalities. In case of a neg-
ative shock to an agent, they result in additional costs to the other nodes in the neigh-
borhood. Distress propagation is a consequence of the interdependence of agents in the
network (it is indeed a mechanism of propagation over space as mentioned above). In
the absence of the other two mechanisms, the probability of individual bankruptcy will
tend to zero (and so will the probability of a systemic crisis) due to the propagation and
therefore the sharing of distress as the connectivity and the size of the network increases.
The financial accelerator changes the picture dramatically. It plays the role of a negative
externality because it captures the reaction of the partners of an agent to her recent in-
crease of fragility. Finally, bankruptcy cascades are also a negative externality because
they imply that the robustness of the agent decreases when one or more of her partners
goes bankrupt. Together, the three mechanisms may amplify the effect of the initial shock
   2
     Notice that even if the shock were relatively small it could lead to bankruptcy due to the amplification
mechanism discussed above.
   3
     As a matter of fact, also B and C, i.e. the lenders of the bankrupt agent, have to look for some other
borrowers whom to lend to. This means that they too will incur transaction costs in case of default of A.


                                                     5
and lead to a full fledged systemic crisis if they more than offset the benefit of risk shar-
ing. In other words a systemic crisis may originate in a single node of the network due to
financial contagion and the positive feedback mechanism. It is not necessarily associated
to an aggregate economy-wide shock.
    In a broader perspective, this conceptual framework may have far reaching implications
also for the assessment of the costs and benefits of globalization. Since some credit relaions
involve agents located in different countries, national credit networks are connected in a
world wide web of credit relaionships. The increasing inter-linkage of credit networks –
one of the main features of globalization – allows for international risk sharing but it also
makes room for the propagation of financial distress across borders. The recent, and still
ongoing, financial crisis is a case in point.
    International risk sharing may prevail in the early stage of globalization, i.e. when
connectivity is relatively ”low”. An increase in connectivity at this stage therefore may be
beneficial. On the other hand, if connectivity is already high, i.e. in the mature stage of
globalization, an increase in connectivity may bring to the fore the internationalization of
financial distress. An increase in connectivity, in other words, may increase the likelihood
of financial crises worldwide.
    The paper is organized as follows. In section 2 we present a simple model of the evo-
lution of individual financial robustness. Section 3 is devoted to a definition of the issues
we want to investigate, i.e. the probability of bankruptcy and systemic risk. In sections 4
we present the baseline scenario, in which only risk sharing and the distress propagation
effects are considered. In section 5 we consider the additional effect of financial accelerator
and in section 6 we examine the implications of the bankruptcy cascade effect. Section 7
concludes.


2     The General Set-up
In this section we derive a minimal dynamic model of the financial robustness of individual
agents connected in a network of credit relationships. This formulation of the model in-
cludes the mechanisms of interdependence and financial accelerator, while the bankruptcy
cascade mechanism will be introduced in Section 4. Similarly to (Hull and White, 2001),
financial robustness of agent i – measured for instance by the equity ratio – plays the
role here of an indicator of the agent’s creditworthiness or distance to default, and de-
noted as ρi ∈ [0, 1], with ρi = 0 indicating bankruptcy. We obtain a system of stochastic
differential equations (SDE) describing the evolution in time of all the ρi . The interest
of this approach is that it is then possible to derive some results on the expected first
passage time at 0 and thus on the probability of default of an agent taking into account
the dynamics of the other agents. The SDE approach allows to incorporate in a natural
way the first two mechanisms mentioned in the Introduction, namely the interdependence
of financial conditions and the financial accelerator and to investigate the effect of their


                                              6
interplay for systemic risk.
    Before going into the details of the model, we describe the network and the related
definitions that will be relevant in the following. We consider a set of n agents connected
in a network of financial contracts. Formally, the relations in the network are described
by a graph G = (V, E), where V is a set of nodes representing the agents and E is a set
of directed edges representing the contracts4 . The graph is associated with an adjacency
matrix A where Aij = 0 if there is no edge from i to j and Aij = 1 if there is an edge
from i to j – meaning that agent i owns liabilities of j.5 The graph is also associated
with a weight matrix W with W    Pij ∈ [0, 1] and Wij > 0 iff Aij = 1. For our purposes W
is a row-stochastic matrix (∀i j Wij = 1) where Wij represents the exposure of i to j
relative to i’s portfolio of exposures. The out-degree of node i is the number ki ≤ n − 1
of out-going edges of node i and represents the number of counterparties or neighbors to
which agent i is exposed.
    In the following we will characterize the systemic risk of the credit network for varying
levels of risk diversification. We are interested in the situation in which the graph is
connected (i.e. there is a path from any agent to any other agent) and the exposures
in the portfolio of each agent are approximately balanced, i.e. Wij ∼     = 1/ki so that the
degree of the node i is a rough measure of the risk diversification of the agent (we are not
considering the optimization of the portfolio over time, therefore this measure will suffice
for the results we aim to show here). The ratio of the number ℓ of existing edges among
nodes over the number of all possible edges n(n − 1) is the density d of the network,
d = ℓ/(n(n − 1)). It represents the fraction of possible pairs of agents that are involved in
a financial contract. A simple relation of proportionality holds between the the average
degree k in the network and the density d = k/(n − 1) ∼    = k/n (for n in the range we are
interested in). Thus for a fixed number n of agents, the density of the network is also a
measure of the average risk diversification across the agents.
    The first property of our model we want to focus on concerns the fact that the current
trend in the financial robustness of one agent depends procyclically on the past trend.
Such mechanism, which we call financial accelerator, can be justified, for instance, in terms
of business partners applying tighter credit conditions. This assumption is in line with the
vast literature on the financial accelerator (Bernanke et al., 1999) in which the external
finance premium increases when the borrower’s net worth goes down, thus increasing the
chances of a further decrease of net worth in the next period. In the context of a SDE
describing the evolution of the robustness of the firm, the financial accelerator can be
modeled as a drift term that depends on the past realizations of the robustness6 . For the
sake of simplicity, we restrict the dependence at time t on the past only to time t′ (with
   4
     For an introduction to networks see, e.g., (Vega-Redondo, 2007)
   5
     The correspondence of the direction of the edge to the direction of the financial tie is only a matter
of convention and does not affect the results. The convention chosen here is more natural for matrix
operations.
   6
     For an introduction to SDE see, e.g., Gardiner (2004); Oksendal and Karsten (1998)


                                                    7
t′ < t). To remain general, we consider the function h(ρ(t), ρ(t′ )) ≤ 0, so that the law
of motion of robustness is described by the following time-delayed stochastic differential
equation,
                              dρi = h(ρi (t), ρi (t′ ))dt + σdξi ,                     (1)
where σ measures the variance of idiosyncratic shocks hitting firm i and dξi denotes
the Wiener process. As we will show in Section 3, some functional forms of h allow to
remove the time delay via an analytical approximation. For the moment, we just recall
a known property of the process of Equation (1). In absence of financial accelerator
(h = 0), the expected first passage time Tf at 0 is Tf ∼ 1/σ 2 . In presence of financial
accelerator (h < 0, ∃t), the negative drift makes the expected first passage time shorter:
Tf (h < 0) < Tf (h = 0). Quite expectedly, the financial accelerator, modeled as in
Equation (1), tends to increase the probability of default of the individual firm, with
respect to the case without accelerator. However, it is not clear at all a priori how this
probability will be affected by a higher level of risk diversification.
    The second property of the model concerns the dependence of financial robustness of
an agent on the robustness of the agents connected with her by some contract. As in
the models of Eisenberg and Noe (2001) and Shin (2008), we consider a set of agents
connected in a network of obligations. We denote as Kij the asset held by i and related
to j. To be concrete, let us think of this as a liability of agent j to i (other relevant
situations were mentioned in the Introduction). Then, the value of Kij depends on the
ability of j to meet the obligation and thus on her financial robustness. We assume that
the value of the asset is proportional to the robustness of the debtor, Kij = Kij0 ρj where
Kij0 is the nominal value of the contract. Let us consider a discrete time, first. Then, the
value of total assets of i at a given time must be determined based on the estimate of
robustness already available to the agents,
                                  X                    X
                     Ki (t + 1) =    Kij (t + 1) = Ki0     Wij ρj (t),                   (2)
                                    j                     j


where Ki0 is the capital invested inPthe assets and Wij are the fractions of capital i has
invested in each contract. Thus,          j Wij = 1, where Wij measures the relative initial
value of the debt of j for i. In case j is not able to meet her obligation, Wji is the relative
loss of i with respect to her initial investment. Notice that this may differ from the loss
with respect to the current value of the assets. If the returns on the various assets do not
differ too much, or one considers periods of time that are not too long, Wij is a reasonable
proxy of the relative impact on i’s asset due to a change in robustness of j.
    Since i’s capital depends on the robustness of the neighbors, so does equity Ei =
Ki − Li , where Li is total liability of i. In particular, at constant Li , equity increases with
increasing partners’ robustness and viceversa. Now, deriving a fully fledged law of motion
of interdependent values of equity or any other robustness indicator would require to
model also the decisions agents make regarding their capital structure and in particular

                                               8
whether and how to reduce their liability. Our aim here is more modest. We make
the assumption that, in absence of bankruptcies, robustness values are simply linearly
dependent and we explore the consequences of such an assumption on the systemic risk
in a dynamic setting. We thus write
                                    X
                       ρi (t + 1) =   Wij (ρj (t) + σξj (t)) ,                     (3)
                                             j

where we assume that robustness is subject to idiosyncratic identically distributed and
normal shocks7 . Since the liabilities of agent j are held by other agents, the idiosyncratic
shock hitting j is shared with the connected agents proportionally to the relative weight
of their financial exposure to j. Moreover, the shock hitting agent i affects i herself only
proportionally to the term Wii , while she is affected by the shocks hitting the neighbors.
The change in time of robustness is then
                                      X                         X
                ρi (t + 1) − ρi (t) =   Wij ρj (t) − ρi (t) + σ   Wij ξj (t)              (4)
                                         j                            j

Passing now to the limit of continuous time and including the term h introduced in
Equation (1) to capture the financial accelerator, we obtain the linear SDE system
                 "                                        #
                   X                                              X
                                                       ′
           dρi =      Wij ρj (t) − ρi (t) + h(ρ(t), ρ(t )) dt + σ   Wij dξj ,      (5)
                        j                                                 j

where each dξj (t) denotes an independent Wiener process. Notice that Eq. (3) implies that
the robustness of an agent is not the result of a simultaneous computation of robustness
of all agents. Instead, it is affected by the change in robustness of the neighbors at the
previous period. This is similar to what happens in the professional practice of financial
rating. The rating of an institution is revised after the occurrence of events regarding
the capital structure of the agent herself or the agents to which she is exposed. Since the
linear P
       combination of uncorrelated Wiener processes is still a Wiener process, denoted as
dzi = j Wij dξj , we can write
                       "                                          #
                         X
                 dρi =       Wij ρj (t) − ρi (t) + h(ρ(t), ρ(t′ )) dt + σdzi .          (6)
                             j

Bankruptcy occurs when robustness falls below a given threshold, which we model, as
usual, as a lower absorbing barrier. Therefore, the agent goes bankrupt when robustness
hits the lower barrier and is replaced by a new agent, with a new initial value of robustness.
We assume that increasing financial robustness has an opportunity cost for the agent, so
   7
     Within the same framework one could also account for the case of correlated shocks. For our purposes
this case will suffice here.


                                                   9
that she has no incentive to increase robustness indefinitely. For the sake of simplicity,
we model this by assuming that robustness cannot exceed an upper barrier at ρi = 1.
    According to the standard approach in finance the valuation of corporate liabilities of
a firm is related to a first passage problem in a stochastic diffusion process (Black and
Cox, 1976; Merton, 1974). The asset value is assumed to evolve over time as an SDE with
a lower absorbing barrier, so that the firm defaults when asset value becomes zero or hits
from above a positive threshold (Longstaff and Schwartz, 1995). When several firms are
considered, the structural models (Hull and White, 2001; Zhou, 1997) assume that the
diffusive terms of the different firms bear some mutual correlation. In particular, Hull
and White (2001) have introduced a credit index describing the creditworthiness of the
firm. The credit indices of different firms evolve as correlated stochastic processes with
zero drift, but with an absorbing barrier that is time dependent and specific to each firm.
In this way the authors are able to compute numerically the probability of default of large
numbers of firms. Differently from those works in finance, our aim here is not to value
corporate liabilities. Instead, we aim at understanding the interplay of interdependence
and financial accelerator in situations of systemic risk. In this paper, we will restrict
our focus on the case of drift and diffusion which are independent of the state variable
ρ. However, it is possible to try and extend the results along the lines of the stochastic
capital theory introduced in (Brock et al., 1989).


3    A specific model
In order to analyze the properties of this general framework, we have to specify some
of its components. First of all, we need to be specific about the structure of the credit
network. We assume that this is a regular graph, i.e. each agent has the same number
k of partners. This is of course a strong assumption. However, our focus in this paper
is on the role of the network density. Moreover, our results can be extended to random
graphs in good approximation. The role of degree heterogeneity will be investigated in
future work.
    We need also to be specific about the function h in Equation (6). We assume that the
time delay is small, t′ = t − dt and we adopt the following definition.

                                       −α if ρi (t) − ρi (t − dt) < −ǫ √σk dt
                                     
                h(ρ(t), ρ(t − dt)) =                                                  (7)
                                        0 otherwise

   The parameters ǫ and α represent, respectively, the sensitivity and the amplitude of the
reaction of the neighbors of i to a decrease in her robustness. The definition above implies
that the neighbors of i react only when an adverse shock to i is large enough to cause
a negative variation of robustness that √ exceeds, in absolute value, ǫ times the standard
deviation of the shocks (which is σ/ k)). When the neighbors do react, the reaction
causes a decrease of magnitude α in the i-th robustness (because of the additional costs

                                            10
imposed to i by the neighbors, as explained in the Introduction). The most important
aspect of this formulation is that the sensitivity of agents’ response depends on the density
of the network, k. More dense networks lead to more sensitive responses (in the sense
that agents respond at a smaller threshold on the signal). The basic rationale for this
is that for a fully diversified firm, ”poor” performance means a relatively less severe loss
than ”poor” performance for a firm with more concentrated portfolio. Indeed in presence
of greater concentration, few bad investments can lead to financial distress, since they
each make up a larger percentage of the firm’s overall portfolio. Neighboring firms are
assumed to recognize this and adjust their distress response levels accordingly. In a full
general equilibrium context this will arise because more diversified firms will take on
higher levels of debt financing, which will offset the benefits of greater diversification. It
also occurs because (i) more dense networks are inherently less transparent at the level
of the individual firm (more investments are more difficult to monitor) and (ii) the signal
implied by poor results at one firm has stronger impact for the likelihood that others are
in trouble if the degree of interconnectedness is greater. Both factors will lead neighboring
firms to respond more sensitively to ”poor” reported results by any single firm with whom
they do business.
     Notice that, defined as in Equation (7), the value of h at time t is independent on
the realization, at the same time t, of the Wiener process dzi in Equation (6). In fact,
ρi (t) − ρi (t − dt) ∼ dρ(t − dt), in the definition of h, depends on the realization of dz at
times
    √ t−dt and t−2dt. Whether h equals −α or not, obviously depends on the amplitude,
σ/ k, of the noise and on the parameters ǫ and α. However, h(t) is a stochastic variable,
independent of dz at time t. It is h(t) = −α with a certain probability, say q, and the
average value over time of the variable h is then −αq, which corresponds to a constant
negative drift. Since we are interested in the average first passage time of our system, from
now on we model the financial accelerator simply as a constant drift term and rewrite
Equation (6) as follows
                              ki
                                                                     !
                            X                                              σ
                  dρi (t) =      Wij ρj (t) − ρi (t) − αq(k, σ, α, ǫ) dt + √ dzi .         (8)
                             j=1
                                                                            k

Notice that q depends on the degree k of diversification. The expression of the probability
q will be given in Section 3.1.
    Since the evolution of robustness in Eq. (8) is described by a linear system, the dis-
tribution p(ρi (t)) of the values of robustness of a given node i across different realizations
of the process is Gaussian (Gardiner, 2004). We cannot say the same for the probability
distribution p(ρ, t) of the values of robustness across nodes in a given realization at a given
time. The two distribution are not the same P   a priori. However, via the Ito lemma one can
derive a scalar SDE for the variance v(t) = j (ρj (t) − ρ̄(t))2 /n of the robustness across




                                              11
the nodes at any time8 . Under some mild condition 9 the expected value of the variance
                                                  2    2
tends exponentially fast over time to the value σk − σn . Therefore, apart for the correction
       2
term σn , the variance of the robustness across agents coincides with the variance of the
shocks at the level of individual agents. Over time the trajectories of ρi (t) at the different
nodes evolve more and more closely as k increases. Therefore, we assume in the following
that, over time, the distribution
                            √      of robustness across agents can be approximated by a
Gaussian with variance σ/ k.

3.1     The Probability of Failure
In this section we analyze the impact of interdependence and the financial accelerator on
the probability of bankruptcy. In a nutshell, we find (not surprisingly) that, in the absence
of financial accelerator, the diversification of individual risk always yields a reduction of
systemic risk. In contrast, as soon as we include the financial accelerator, this is not
necessarily true. The financial accelerator generates a negative drift in the stochastic
trajectory of the robustness that more than offsets the positive effect of diversification.
The probability of individual bankruptcy can be investigated in terms of the first passage
time of the SDE and it is possible to compute analytically the mean passage time at 0
and hence the probability of bankruptcy.
    The probability Pf that at any given time t an agent goes bankrupt is the expected
frequency with which, over time, the robustness of the agent hits the bankruptcy thresh-
old. Since frequency is the inverse of the time between successive events, the probability
of bankruptcy can be measured as the inverse of the mean first passage time, Tf , of the
                                                                        1
stochastic process describing the evolution of the robustness, Pf =       .
                                                                       Tf
Proposition 1. Consider a regular network of financial agents whose robustness follow
Equations (7)(8). Denote the average probability of bankruptcy of an agent as Pf . Then:

   1. In absence of financial accelerator (h = 0, ∀t), the average probability of bankruptcy
      of the individual agent decreases with the degree k of risk diversification as Pf (k) = σ 2 /k.

   2. In presence of financial accelerator (h < 0 ∃t) it holds:

       (a) depends on k as follows

                                                       αq(k)
                                Pf =          σ2
                                                                                                (9)
                                       1 + 2kαq(k) (exp(−2ki αq(k)/σ 2 ) − 1)
  8
     This is a standard application of the Ito Lemma (Oksendal and Karsten, 1998). A proof is anyway
available from the authors upon request.
   9
     The graph has to be primitive (Seneta, 2006).



                                                   12
                                       with
                                                                                                                     Φ(−ǫ)
                                                                            q=             √                                                                         (10)
                                                                                  1−   Φ( α σ k                           − ǫ) + Φ(−ǫ)
                                       where Φ is the Gaussian cumulative distribution.
                            (b) Pf (k) as a function of k has a unique minimum if ǫ = 1, (α, σ) ∈ [0, 1] ⊗ [0, 1]
                                and α ≤ σ.
    The first result stated in the proposition is due to the fact that in absence of financial
accelerator the evolution of the robustness can be approximated with a Brownian motion.
In this case, the mean first passage time through an absorptive barrier is inversely pro-
portional to the variance of the random steps. This implies the intuitive result that the
probability of bankruptcy decreases with the average number of counterparties. In other
words, in absence of financial accelerator, the credit network is more stable the larger is
the number of contracts among agents. This results is in line with the classical result of
(Allen and Gale, 2001).

                            0.07                                                                                    0.1                                        244

                            0.06                                                                                   0.09
                                                                                                                                                               147
                                                                                        Financial acceleration α




                                                                                                                   0.08
    Failure probability P




                            0.05
                                                                                                                   0.07                                        89
                            0.04
                                                           With financ. accel.                                     0.06
                                                                                                                                                               54
                            0.03
                                                                                                                   0.05
                            0.02                                                                                                                               32
                                                                                                                   0.04

                            0.01                                                                                   0.03                                        19
                                                           No financ. accel.                                       0.02
                              0                                                                                                                                11
                                   0      50     100      150     200     250    300                                          50        100        150   200
                                               Diversification degree k                                                       Diversification degree k


Figure 1: (Left) Failure probability Pf as a function of the diversification degree k, for a
particular choice of the parameters: ǫ = 1, σ = 0.25, α = 0.055. Red and green lines refer
to the process in presence and absence of the financial accelerator, respectively. The blue
dashed line indicates the values of the drift αq(k). (Right) Expected first passage time
at 0, Tf , plotted in color code as function of diversification degree k and intensity of the
financial acceleration α. For readability only a zoom is shown. Lines in black represent
isoclines.

    Concerning the second and third result, the dashed curve in Figure 1 represents the
drift term αq(k). Thus, in the stochastic process of Equation (8) the drift is small for
small k, grows for larger k and tends to a finite asymptotic value for k → ∞. The mean
first passage time of a stochastic process in presence of both a reflective and an absorbing
barrier can be computed with standard approaches (Gardiner, 2004) The result is that we
can write a general expression for the probability of failure Pf (k) and that this function

                                                                                       13
turns out to have a minimum as a function of k, in a whole range of values of α and
σ. This implies that risk diversification becomes at some point counterproductive and
increases the probability of failure, something which is now at odd with the result of
(Allen and Gale, 2001).


4     Bankruptcy Cascades
In the previous section we have analyzed the case in which the robustness of a firm is
affected over time by the change in robustness of the connected firms. In this section we
analyze the case in which, in addition, at the moment of the bankruptcy of a neighbor, the
firm is further affected negatively, due to organizational loss or other effects, as discussed
in the Introduction. If the firm is in turn pushed into bankruptcy, this can trigger a
cascade process in which bankruptcies generates more bankruptcies. This is commonly
referred to as domino effect. Similar perspective has been investigated by (Eisenberg and
Noe, 2001) in interbank credit networks and by (Battiston et al., 2007) in trade credit
networks. More recently, after the turmoil of the ongoing financial crisis it has been
investigated by several other authors including, notably, the model of (Shin, 2008) which
builds on the one of (Eisenberg and Noe, 2001). However, differently from (Shin, 2008),
here we study bankrutpcy cascades in a dynamic setting, that is in combination with the
time evolution of robustness and the diffusion of financial distress. The investigation of
the determinants of systemic risk in such a dynamic setting has not been addressed so far.
It is of course very interesting but also somewhat cumbersome to treat analytically. Here
we focus on the estimation of the probability of large cascades. To this end, we define the
probability P c of occurrence of cascades involving at least a given fraction c ∈ [0, 1] of the
system.
    In our model the bankruptcy cascade mechanism is activated only in case of bankruptcy
of one or more agents in the system, as opposed to the distress propagation effect which
is at work at every time. In order to capture this effect and investigate its implications,
we need to introduce a discrete cascading process. For the sake of simplicity we assume
that this process is much faster than the evolution of robustness described by Equation
(6), so that we can decouple the two processes. The rationale is that distress propagation
take place on the scale of the quarters (when firms issue financial statements) while a
cascade can occur in a few days. For instance, the default of an important institution
can determine a fast process of writing downs and reevaluation of assets among the coun-
terparties with possible further defaults. We capture this idea by modeling, in case one
or more bankruptcies occur at time t, the following recursive process taking place within
the interval [t, t + dt], for all i. We denote the time scale of the cascade process with the
discrete variable τ = 1, ..., nτ At each time step τ , the variables of all agents are updated




                                              14
in parallel according to
                                                  aX
                             ρi (τ ) = ρi (t) −       Wij χj (τ )                         (11)
                                                  k j

where the function χj (τ ) indicates if the agent j has gone bankrupt at any of the steps
1, ..., τ :                          
                                       1 if ρj (τ ′ ) < 0, ∃τ ′ ≤ τ
                           χj (τ ) =
                                       0 else
At the end of the cascade process the values of robustness are updated as ρi (t) = ρi (τ = nτ ).
    In other words, Equation (11) simply states that the bankruptcy of one or more
borrowers of i leads to a reduction of agent i’s robustness. The extent of such reduction
could be modeled in several ways (see e.g. Eisenberg and Noe (2001)). Here we have
chosen a very simple one. The parameter a determines the extent of the damage caused
by the bankruptcy of j to the neighbors as a whole. Since agent j is one out of k neighbors
and the financial exposure is assumed to be evenly allocated, j represent a fraction 1/k
of i’s asset value. The damage transferred to agent i depends on the ratio a/k. Thus the
value a = 1 corresponds to the extreme case in which all assets of the failing firm are lost.
    The cascading process ends after a finite number of steps smaller than the number of
agents. Notice that if the network has small world properties (Vega-Redondo, 2007, page
54), the number of steps is of order of log(N ) and therefore very small compared to N . In
the final state, a certain fraction s of the agents are bankrupt. Notice also that while the
financial accelerator effect on firm i depends on i itself, here the externality on i resulting
from the bankruptcy of j depends only on the weight that j represented for i’s business
and on the capability of agent i to recover part of the debt of j.
    In order to evaluate the relationship between systemic risk and the density of the
network, we first analyze the process of cascades (11) alone, separated from the diffusion
of financial distress (8).

4.1    The size of a cascade
The number of failures at the end of the cascade process can be computed easily under
some simplifying hypotheses. The technique consists in deriving a fix point equation for
the cumulative fraction of failures in the system as a function of the cumulative fraction
of failures at the previous step. Solving for the stable fixed point of such equation, yields
the size of the cascade. The result is stated in the following proposition. Notice that
the fraction s includes the failures at the beginning of the period t, plus those occurring
during the period t.
Proposition 2. Consider the process of Eq. 11 with time variable τ . Assume the network
of firms is a regular graph with degree k. Assume also the initial probability distribution
of robustness is Gaussian with mean m and variance σρ2 , p(ρ, τ = 0) ∼ Gauss(m, σρ ). Let

                                                  15
                                                                                                         Cascade size
            1                                                                           1                                                          1

                                                                                                                                   Initial
           0.8       m=0.05     m=0.2    m=0.4                                         0.8                                                         0.8




                                                                Average robustness m




                                                                                                             pdf(ρ)
                                                                                                                      −0.5    0   0.5    1
                                                                                                                                   Final
           0.6                                                                                                        −0.5    0   0.5    1
                                                                                                                                                   0.6
                                                                                       0.6
                                                                                                                             Robustness ρ
    F(s)




           0.4                                                                                                                     Initial         0.4
                                                                                       0.4




                                                                                                             pdf(ρ)
                                                                                                                      −0.5    0   0.5    1
                                                                                                                                   Final
           0.2                                                                                                                                     0.2
                                                                                                                      −0.5    0   0.5    1
                                                                                       0.2                                   Robustness ρ
            0                                                                                                                                      0
                 0       0.2    0.4     0.6      0.8   1                                     20        40        60      80                  100
                               Cascade size s                                                     Diversification degree k


Figure 2: (Left) Plot of R.H.S. of the fixed point Equation (12) for the cascade size.
Examples for σ = 0.25 and k = 10. For m = 0.05 and m = 0.2 the only stable fixed
point is s = 1 (complete collapse). For m = 0.4 there are two stable fixed points, but the
initial fraction of failures is almost zero, so the dynamics can only reach the left stable
fixed point. (Right) The fraction s of failures is plotted in gray scale as a function of
diversification degree k and average robustness m.

Φm,σρ denote the cumulative probability distribution and s0 denote the fraction of firms
whose robustness is below zero at the beginning of the process. Then:
  1. The fraction s of failures generated in the cascade process is the solution of the
     equation

                                                      s = max{s0 , F (s, m, σρ )}, where                                                                 (12)
                                                          k  
                                                         X   k j                      a
                                        F (s, m, σρ ) =         s (1 − s)k−j Φm,σρ (j )                                                                  (13)
                                                         j=1
                                                             j                        k

  2. A stable fixed point always exists.
     A similar computation can be carried out for any other probability distribution of
robustness p(ρ). The hypothesis of a Gaussian distribution is of course a simple one, but
it is also specifically relevant to our context for the reasons discussed in Section 3.
     As an example, Figure 2 (Left) shows a plot of the R.H.S. of Equation (12), for some
specific parameters. The proof rests on the assumption that the failures of the neighbors
of a given node are statistically independent, so that we can describe the probability
of multiple failures among the neighbors of a node with a binomial distribution. This
assumption is strictly valid only when there are few failures in the system. However,
when there are instead many failures, very likely eventually the cascade involves the
whole network. In this case, the size of the cascade is trivially one and therefore, despite
the presence of correlation the result is still correct.

                                                           16
    For our purposes, it is convenient from now on to consider the variance of individual
shocks σ as√constant and the diversification k as a varying parameter, with a resulting
variance σ/ k for the robustness. The dependence of s on the parameters k and m, for
a = 1, is illustrated in Figure 2 (Right). Indeed, Proposition 2 implies that there are two
regimes, one with small cascades and one with large cascades. If the initial distribution of
robustness has a mean m close to 0 and a large variance (small k), then obviously many
firms are bankrupt already at the beginning, when the cascade process starts (see lower
inset of the Figure). They affect other firms, many of which have also small robustness
since the mean of the distribution is low, thus the resulting cascade is large. On the
contrary, if the distribution has very small variance (large k), or large enough m (such
that very few firms are bankrupt at the beginning and only few others are weak enough
to fail through the cascade effect), then the cascade stops very soon (see upper inset in
the Figure).

4.2    Interplay of Robustness Evolution and Cascades. Implica-
       tions on Systemic Risk
Since systemic risk is the probability that a large fraction of firms in the system fail at
the same time, it is now crucial to understand how frequently the system is found in
the conditions that lead to a large cascade. However, when we combine the cascading
process (11) with the diffusion of financial distress (8), the dynamics resulting from the
interplay of the to processes is not trivial to analyze. The diffusion process shapes the
distribution of robustness which determine the size of the cascades. These in turn reshape
the distribution of robustness and the evolution of robustness over time. Since the cascade
is, by nature, a discrete process involving recursively the neighbors of higher order of the
nodes that initially fail, it is not possible any longer to describe the temporal evolution
of the robustness in terms of a system of continuous stochastic differential equations.
Systemic risk can be thus seen as the result of two factors: the size of the different possible
cascades, and the frequency by which the system visits the distribution of robustness that
lead to such cascades.
    In particular a fraction s ∼ = 1 of simultaneous failures occurs whenever the average
robustness m crosses the boundary of the region of large cascades (in dark) in the phase
diagram of Figure 2 (Right). Recall that the values of σ and k are constant during the
evolution of ρi (t). Thus, the expected time it takes for the average robustness to reach
the value m during the evolution can be approximated by the first passage time at ρ = m
of a representative trajectory of robustness starting from ρ = 1. This approximation
makes sense because of the mean reversion which keeps trajectories clustered around the
                                                                                (c)
average, as discussed earlier. Therefore, in this approach the probability Pf of cascades
larger than c is the inverse of the first passage time at a value m such that a cascade
larger than c is triggered. The probability of large cascades estimated in this way turns
out to be a non monotonic function of the risk diversification. In other words, similar to

                                              17
the individual failure probability, even the systemic failure probability display an optimal
degree of diversification beyond which a further diversification becomes detrimental. This
is stated in the following proposition.

                                 0.2                                                                               0.1
                                                                                                                                                                 32




                                                                                       Financial acceleration α
    Systemic failure prob. Pc




                                0.15                                                                              0.08
                                                                                                                                                                 19

                                                                                                                  0.06
                                 0.1                                                                                                                             11
                                                                       α=.075

                                                                                                                  0.04
                                                                       α=.055                                                                                    6
                                0.05
                                                                       α=.025
                                                                                                                  0.02                                           3
                                                                           α=0
                                  0
                                       0   10     20       30      40      50    60                                      10      20      30     40     50   60
                                                Diversification degree k                                                      Diversification degree k


Figure 3: (Left) Probability P c of occurrence of large cascades as a function of risk
diversification k for three different values of the intensity α of financial acceleration.
(Right) Expected time to large cascades T c plotted in color code as a function of k and
α. Values of the parameters: ǫ = 1 and σ = 0.4 and c = 0.25. We vary k = 2, ..., 100 and
α in steps of 0.001.


Proposition 3. Consider the cascade process of Eq. 11 with time variable τ . Assume
the initial distribution of robustness is Gaussian p(ρ, τ = 0) = Gauss(m, σ). Assume
the network of firms is a regular graph with degree k. In mean-field approximation, the
probability P c of occurrence of a systemic failure involving a fraction of the system larger
than c ∈ [0, 1], is
                                                   1
                                       P c (k) = c                                       (14)
                                                 T (k)
where

                                                T c (k) = min {T (k, m)|S(k, m) ≥ c}                                                                                  (15)
                                                               m
                                                           1−m       σ 2 (exp(−2αkq(1 − m)/σ 2 ) − 1)
                                                T (k, m) =        + 2                                                                                                 (16)
                                                             αq     2α                kq 2
                                                S(k, m) is the cascade size solution of Eq. (12)                                                                      (17)

P c as a function of k is a non-monotonic function of k for α ∈]0, 0.1] and for at least
some intervals of values of the other parameters ǫ and σ, c.

  As shown by the plot in Figure 3, the probability of large cascades is not decreasing
monotonically with k. On the contrary it exhibits a marked minimum for intermediate

                                                                                      18
values of k. Notice that the cascade size s in Figure 2 has essentially two ranges of values:
s < 0.05 in the regime of small cascades and s > 0.9 in the regime of large cascades.
Therefore, the second point of the above Proposition is independent of the value c taken
as definition of “large cascade”, as long as c > 0.05.
    Finally, the results of the paper can be summarized in the following conclusive corol-
lary.

Corollary 1 (Non-monotonicity of systemic risk). In presence of financial accelerator,
as risk diversification k in the credit network increases, systemic risk is in general not
monotonically decreasing, with or without cascade effects. In particular, at least in some
interval of the range of the parameters involved, there is an optimal level of risk diversi-
fication.


5    Conclusions
In this paper, we have characterized the evolution over time of a credit network in the most
general terms as a system of coupled stochastic processes, each one of which describes
the dynamics of individual financial robustness. The coupling comes from the fact that
agents assets are other agents’ liabilities. Thus each agent’s financial robustness is inter-
dependent with the financial robustness of the counterparties. through risk sharing but
also through the diffusion of financial distress as well as bankruptcy cascades.
    We find that in the presence of financial accelerator, the positive feedback of financial
robustness on itself, together with the other externalities represented by distress propa-
gation and bankruptcy cascades may more than offset the stabilizing role of risk sharing
and amplify the effects of a shock to a single node of the network, leading to a full fledged
systemic crisis.
    The relationship between the probability of failure both individual as well as sys-
temic, and connectivity is U-shaped. The stabilizing role of risk diversification prevails
only when connectivity is low. If connectivity is already high, a further increase may
have the perverse effect of amplifying the shock due to distress propagation and financial
accelerator.
    The present work is intended to provide a basic framework and can be extended in
several directions. For instance, one can study the effect of different static topological
structures in the credit network, such as skewed degree distributions or degree-degree
correlation (assortativity). These have been found to have prominent effects in spreading
phenomena akin to technological diffusion on social networks (Jackson and Rogers, 2007).
A specific and major question in our context concerns the systemic risk of a network
organized in clusters which are densely connected inside but loosely connected among
each other. Whether there exists an optimal level of clusterization would have important
implications on the debate about the role of globalization. In addition, one can model the
set of contracts among agents as an endogenously evolving network in which each agent

                                             19
may rewire some of her ties to the other agents if she expects to derive a higher utility or
a smaller risk in doing so.

5.1    Acknowledgments
S.B. would like to thank Claudio J. Tessone for fruitful suggestions and several colleagues
for inspiring discussions. In particular, Mauro Napoletano, Jan Lorenz, Karsten Mu-
rawski, Didier Sornette. S.B. acknowledges the financial support from the ETH Compe-
tence Center Coping with Crises in Complex Socio-Economic Systems (CCSS) through
ETH Research Grant CH1-01-08-2. The research work leading to these results has
also received funding from the European Community Seventh Framework Programme
(FP7/2007-2013) under Socio-economic Sciences and Humanities, grant agreement no.
225408 (POLHIA).


A      Appendix
Proof. Proof of Proposition 1 (1) The mean first passage time of a random walk with            √
variance σr2 is known to be Tf = 1/σr2 . We apply this result to our case with σr = σ/ k
and we obtain Pf (k) = 1/T (k) = σ 2 /k.
    (2) First we need to derive the expression of the probability q that the financial accel-
eration takes place in any given time. In the limit of small time delay we can approximate
the differential, ρi (t) − ρi (t − dt) ∼ dρi (t). Denote qt = P {hi (t, dt)}. The probability that
h(t, dt) = −α can be expressed as follows.
                                     n                           √ o
   qt = P {hi (t, dt) = −α} = P ρi (t) − ρi (t − dt) < −ǫσ/ kdt                               (18)
           n                        √  o       n                           √          √  o
      ∼
      = P dρi (t − dt) < −ǫσ/ k = P hi (t − dt, t − 2dt) + ζσ/ k < −ǫσ/ k                     (19)

where in the last step we have neglected the mean reversion term in the expression     √ of
dρ(t−dt).
      √     There  are two possible  cases in which the condition  hi (t−dt, t−2dt)+ζσ/ k<
−ǫσ/ k is fulfilled. In the first case, it is h(t − √ dt, t − 2dt) = −α (which happens with
probability qt−dt ) and then it must be ζ < α k/σ − ǫ which occurs according to the
cdf of the Gaussian distribution, since ζdt is a Wiener process. In the second case, it
is h(t − dt, t − 2dt) = 0 (which happens with probability 1 − qt−dt ) and then it must be
ζ < −ǫ. In formulas this reads:
                                       √
                                      α k
                        qt = qt−dt Φ(       − ǫ) + (1 − qt−dt )Φ(−ǫ)                    (20)
                                       σ
Solving for the fixed point in q one finds
                                                 Φ(−ǫ)
                                 q=            √                                             (21)
                                      1−   Φ( α σ k   − ǫ) + Φ(−ǫ)

                                                 20
where Φ is the cumulative distribution function of the Gaussian. To show that the
fixed point is stable we proceed as follows. Denote the R.H.S. of Equation (20) as
f (q) = qt−dt Φ2 + (1 − qt−dt )Φ1 . Notice that both cumulative distributions Φ1 and Φ2 lay
in ]0, 1[ for finite values of the parameters. Since f is linear in q and f (0) > 0, a unique
stable fixed point exists iff df /dq < 1. This is always verified because df /dq = Φ2 −Φ1 < 1.
    Now, we use the following result (see for instance, (Gardiner, 2004), page 139). The
mean first passage time of an one-dimensional homogeneous SDE
                                                    p
                                    dx = A(x)dt + B(x)dξ                                  (22)

with absorbing barrier at x = a ≥ 0 and repulsive barrier at x = b > a and initial value
x is                                   Z x     Z b
                                           dy      ψ(z)dz
                             T (x) = 2                                              (23)
                                        a ψ(y) y    B(z)
where                                       Z    x                
                                                      2A(x′ )dx′
                               ψ(x) = exp                              .                 (24)
                                              a         B(x′ )
In our case, both the drift and diffusion term are constant: A(x) = A = −αq and
              2
B(x) = B = σk . The computation of the integral proceeds as follows
                                        
                               2A(x − a)
                 ψ(x) = exp
                                   B
          Z b
              ψ(z)dz     1
                      =     [exp(2A(b − a)/B) − exp(2A(y − a)/B)]
           y    B(z)    2A
  Z x     Z b             Z x
      dy      ψ(z)dz           1
2                     =2          exp(2A(y − a)/B)−1 [exp(2A(b − a)/B) − exp(2A(y − a)/B)] =
   a ψ(y) y     B(z)       a 2A
                                            Z x
                         1                                            1 x
                                                                        Z
                      = exp(2A(b − a)/B)        exp(−2A(y − a)/B) −         dy
                        A                     a                       A a
We finally obtain
                       B                                             x−a
            T (x) =      2
                           exp(2A(b − a)/B)[1 − exp(−2A(x − a)/B)] −                     (25)
                      2A                                              A
    In the context of our model it is a = 0, b = 1. Moreover, we assume x = 1, which im-
plies that firms are created with the highest robustness. This is a conservative hypothesis
with respect to the result which we will obtain. Substituting for the values of a, b, A, B,
we obtain
                                  1   σ 2 (exp(−2αkq/σ 2 ) − 1)
                           Tf =     + 2                                                  (26)
                                  αq 2α           kq 2


                                             21
   Bearing in mind that q = q(k), the derivative of the mean first passage time with
respect to the degree k can now be computed as follows. We denote the derivative of a
function f equivalently as Dk f or f ′ ,
    −q ′      σ2           −2αkq −2α                 2         −2αkq
Tf′ =      +         [exp(       )(     )D  k [kq]kq   − (exp(         ) − 1)Dk [kq 2 ]] =
    αq 2      2  2
            2α k q 4         σ 2    σ 2                         σ 2

    −q ′      σ2           −2αkq −2α                            −2αkq
   = 2     + 2 2 4 [exp(       2
                                 )( 2 )(q + kq ′ )kq 2 − (exp(       2
                                                                         ) − 1)(q 2 + 2kqq ′ ] =
    αq      2α k q           σ      σ                              σ
                2
                                                                              
    −q ′      σ            −2α        ′   2       2        ′       2         ′
   = 2     + 2 2 4 f0 ( 2 (q + kq )kq − (q + 2kqq )) + (q + 2kqq ) =
    αq      2α k q          σ
                2
    −q ′      σ
   = 2     + 2 2 4 (−f0 (f1 + f 2) + f 2) =
    αq      2α k q
                                                                                           (27)

where
                                                      √
                                                     α k
                            Φ1 = Φ(−ǫ) Φ2 = Φ(             − ǫ)                            (28)
                                        Z x            σ
                                    1
                          Φ(x) = √            exp(−t2 /2)dt                                (29)
                                    2π −∞
                                                      √          2
                                                                   !
                                  αk  −1/2
                                                   (α   k/σ −  ǫ)
                            Φ′2 = √ exp −                                                  (30)
                                  2σ 2π                   2
                                        Φ1
                             q=                                                            (31)
                                  1 − Φ2 + Φ1
                                        Φ1 Φ′2
                             q′ =                                                          (32)
                                  (1 − Φ2 + Φ1)2
                                               
                                         −2αkq
                            f0 = exp                                                       (33)
                                           σ2
                                  2α
                            f1 = 2 (q + kq ′ )kq 2                                         (34)
                                  σ
                            f2 = q 2 + 2kqq ′                                              (35)

     In order to determine in general the existence and the value of the maxima of T (k),
we solve the equation T (k) = 0, with T (k)′′ < 0. Since the expression contains the error
function, the solution of the equation is necessarily numerical.
     We fix the parameter ǫ = 1 and we vary (σ, α) in [0.05, 1] ⊗ [0.05, 1]], with step size
of 0.005. The results were unaffected by using finer resolutions. For each pair (σ, α) we
determine the values of k where T ′ (k) changes from positive to negative sign. The idea
is illustrated in Figure 4. The functional dependency of T and T ′ on k is shown for a
particular choice of the parameters, displaying a non-monotonic behavior. In particular,

                                              22
in the inset, T ′ crosses the value of zero from above in the point of maximum. The general
result is illustrated in Figure 5 (left). For each pair (σ, α) we find a unique maximum.
The gray level indicates whether the maximum of T occurs at k = 1 or at ∞ > k > 1.
As it can be seen, α ≤ σ is a sufficient condition to have existence and uniqueness of a
maximum at k > 1. Figure 5 (right) shows the value of the optimal degree as a function of
σ, α. This is typically smaller than thirty but it grows fast to larger values if the intensity
α of the financial accelerator is very small.
    The implication of the result are further illustrated in Figure 1. For a fixed σ, the
dependence of Tf on k shows a point of maximum for each value of α. The existence of
a maximum for Tf implies a minimum of the probability Pf of failure.



                                150
                                                       4
                                                       2
                                                 T"




                                100                    0
                        T, T"




                                                      −2
                                                               0         50    100
                                                                           k
                                50



                                 0
                                      0   100    200               300         400   500
                                                           k

Figure 4: Dependency on on the degree k of the mean first passage time T (k) and its
derivative T (k)′ . Parameter values: α = 0.025, ǫ = 1, σ = 0.15



Proof. Proof of Proposition 2 The specific cascading process in Equation (11) is modeled
as follows:
                                                             k
                                                         a X
                                  ρi (τ + 1) = ρi (τ ) −        δj (τ )                    (36)
                                                         ki j=1

where δj (τ ) = 1 iff j fails at time τ . An equivalent but more convenient expression is
                                                            k
                                                        a X c
                                  ρi (τ + 1) = ρi (0) −       δ (τ )                       (37)
                                                        ki j=1 j




                                                       23
                                     1                                                                                1
                                                                                                                                                                147
         Financial acceleration α




                                                                                          Financial acceleration α
                                    0.8                                                                              0.8
                                          Max at k=1                    Max at k>1                                         Max at k=1                           54

                                    0.6                                                                              0.6
                                                                                                                                                                19

                                    0.4                                                                              0.4                                         6


                                    0.2                                                                              0.2                                         2


                                                                                                                                                                 0
                                             0.2        0.4      0.6       0.8       1                                       0.2      0.4    0.6      0.8   1
                                                       Shock amplitude σ                                                            Shock amplitude σ



Figure 5: Left: Number of maxima of T (k). For each pair of values σ, α the color code
illustrates the number of values of k where the derivative T ′ (k) changes from positive to
negative values. Right:Value of k in the point of maxima of T (k) for each pair of values
of the parameters σ, α.

where δjc (τ ) = 1 iff j has failed at any time in [0, τ ]. We ask what is the cumulative
fraction of nodes that have failed so far at time τ . This is
                                                      ( k                    )
                                                       X
                n(τ + 1) = P r {ρi (τ + 1) < θ} = P r       δjc (τ ) > ρi (0)        (38)
                                                                                                                              j=1


For simplicity, we assume the network is a regular graph with degree k. Whether a given
node i fails by the time step τ + 1 depends on the number kf of the neighbors that have
already failed, outPof the total number k of neighbors. At time step τ + 1, the possible
                      k    c
events are kf =       j=1 δj (τ ) = 1, 2, ..., k. In each of these events, the probability that
node i fails, depends on the initial value of its robustness. Assume all failures that have
occurred so far are uncorrelated across agents.    Then, they follow a binomial distribution,
P r{ kf failures among k neighbors } = kkf pkf (1 − p)k−kf , where p is the probability that
any given node has failed so far. In the limit of a large network it is p = n(τ ). Finally,
we need to take into account that firms do not recover during the cascade and thus the
fraction of failure can only increase. Therefore,
                                                                                     
                                  k                                               
                         X           k                                          akf
       n(τ + 1) = max s0 ,                 n(τ )kf (1 − n(τ ))k−kf P r ρi (τ ) ≤           (39)
                                    kf                         kf =1
                                                                                  k 

where s0 is the initial fraction of failures. This is a recursive equation of the type n(τ +1) =
F (n(τ )). Once the probability distribution of ρ is specified, the fixed points are the
solutions of n = F (n). For example, in the case of regular graph, with ρ following a



                                                                                         24
Gaussian distribution with mean µ and standard deviation σ we obtain:
                                                                                
                        k                              Z akf /k              2 
                  X        k                          1                (u − µ)
 n(τ + 1) = max s0 ,           n(τ )j (1 − n(τ ))k−kf √           exp(−         ) =
                 
                       kf =1
                            kf                       σ 2π −∞              2σ 2   
                                                                                     (40)
                                                                         
                      k  
                 X      k       kf          k−kf 1           akf /k − µ 
           = max s0 ,       n(τ ) (1 − n(τ ))       (1 + erf(      √    ))           (41)
                        kf
                       kf =1
                                                  2              σ 2      



    Notice that F (n) ≥ s0 with s0 > 0 strictly for µ < ∞ and σ > 0. Since in addition
F (n) is non decreasing, there exists at least one stable fixed point. There maybe more
than one but what matters here is only the smallest stable fixed point s with s ≥ s0 . The
Equation above can be solved numerically with arbitrary precision for any choice of the
parameters. The results are shown in Figure 2.
    In general it would also be possible to account for heterogeneous degree distribution.
This requires however a more extended analytical treatment that goes beyond the objec-
tive of this paper.
Proof. Proof of Proposition 3
    Let us fix the amplitude σ of the shocks. The probability P c that a fraction c of the
agents fail in the same period, possibly due to a cascade, can be computed as follows. We
use the same general result on mean first passage time described in proof of Proposition
2, Eq. (23). This time, we are interested in the first passage time at the value ρ = m
starting from the upper barrier ρ = b = 1.
                                          Z b      Z b
                                               dy      ψ(z)dz
                             T (k, m) = 2                                             (42)
                                           m ψ(y) y     B(z)
Substituting for a = m and b = 1 in Equation (25) we obtain,
                           1−m   σ 2 (exp(−2αkq(1 − m)/σ 2 ) − 1)
                    Tf =       + 2                                                   (43)
                            αq  2α              kq 2
The probability that over time the robustness following Eq. (8) reaches the value m is
                1
given by the T (k,m) . In a mean field approach we take this as the probability that the
average robustness ρ̄ in the system reaches the value m.
    On the other hand, the solution S(k, m) of Eq. (12) gives the expected size of the
cascade occurring when the average robustness in the system reaches the value m. We
are interested now in the mean first passage time T c (k) to reach the point where the
occurring cascade is larger than c:
                           T c (k) = min {T (k, m)|S(k, m) ≥ c}                      (44)
                                     m


                                           25
Consequently, P c (k) = T c1(k) is the probability of occurrence of a cascade larger than c,
which is a possible measure of systemic risk. The function of T c (k) in Equation (44)
cannot be expressed in closed form. However, it can be computed numerically with
arbitrary precision for any choice of the parameters α, σ, ǫ. Figure 2 (Left) shows the
dependence of T c on k for a particular choice of the parameters. The curve displays a
maximum, which implies a minimum for the probability P c (k).
    Differently from what done in the proof of Proposition 1, here there is no closed-form
expression for the derivative of T c (k), so we compute numerically the point of maximum
directly on the function T c (k). We do so for varying α in the interval [0.001, 0.1] with
steps of width 0.001, and for fixed values ǫ = 1 and σ = .4 and c = 0.25. Notice that
as discussed in Section 4.2 as a comment to the Proposition, the result is very robust
with respect to c in virtue of the two regimes of cascades. As an illustration of the
procedure, in Figure 3 (Right) the values of T c are plotted as a function of k and α in
the range of interest. It is apparent that for all values of α in the interval there is one
global maximum of the expected time to large cascades T c as a function of the degree k
of risk diversification. In other words, there is a value of optimal connectivity degree as a
function of α, which grows for decreasing values of α.



References
Allen, F. and Gale, D. (2001). Financial contagion. Journal of Political Economy,
  108(1):1–33.

Allen, F. and Gale, D. (2005). Systemic risk and regulation. NBER in a volume on the
  Risks of Financial Institutions edited by M. Carey and R. Stulz.

Battiston, S., Gatti, D. D., Gallegati, M., Greenwald, B. C. N., and Stiglitz, J. E. (2007).
  Credit chains and bankruptcies avalanches in production networks. Journal of Economic
  Dynamics and Control, 31(6):2061–2084.

Bernanke, B., Gertler, M., and Gilchrist, S. (1999). The financial accelerator in a quan-
  titative business cycle framework. In Taylor, J. and Woodford, M., editors, Handbook
  of Macroeconomics. Amsterdam, North-Holland.

Black, F. and Cox, J. (1976). Valuing Corporate Securities: Some Effects of Bond Inden-
  ture Provisions. Journal of Finance, 31(2):351–367.

Boss, M., Summer, M., and Thurner, S. (2004). Contagion flow through banking networks.
  Lecture Notes in Computer Science, 3038/2004:1070–1077.




                                             26
Brock, W., Rothschild, M., and Stiglitz, J. E. (1989). Stochastic capital theory. In Feiwel,
  G. R., editor, Joan Robinson and Modern Economic Theory, pages 591–622. Mac Millan
  Press.

Brunnermeier, M. (2008). Deciphering the 2007-08 Liquidity and Credit Crunch. Journal
  of Economic Perspectives, 23(1):77–100.

Brunnermeier, M. and Pederson, L. (2009). Market Liquidity and Funding Liquidity.
  Review of Financial Studies, 22:2201–2238.

Diamond, D. and Dybvig, P. (1983). Bank Runs, Deposit Insurance, and Liquidity. The
  Journal of Political Economy, 91(3):401.

Eisenberg, L. and Noe, T. (2001). Systemic risk in financial systems. Management Science,
  47(2):236–249.

Elsinger, H., Lehar, A., and Summer, M. (2006). Risk Assessment for Banking Systems.
  Management Science, 52(9):1301–1314.

Freixas, X., Parigi, B. M., and Rochet, J.-C. (2000). Systemic risk, interbank relations,
  and liquidity provision by the central bank. Journal of Money, Credit and Banking,
  32:611–638.

Furfine, C. (2003). Interbank Exposures: Quantifying the Risk of Contagion. Journal of
  Money, Credit & Banking, 35(1):111–129.

Gardiner, C. W. (2004). Handbook of Stochastic Methods: for Physics, Chemistry and the
 Natural Sciences. Springer, Springer Series in Synergetics.

Hull, J. and White, A. (2001). Valuing credit default swaps ii: Modeling default correla-
 tions. Journal of Derivatives, 8(3):12–22.

Iori, G., Jafarey, S., and Padilla, F. (2006). Systemic risk on the interbank market.
  Journal of Economic Behaviour and Organisation, 61(4):525–542.

Jackson, M. and Rogers, B. (2007). Relating Network Structure to Diffusion Properties
  through Stochastic Dominance. The BE Journal of Theoretical Economics, 7(1):1–13.

Kiyotaki, N. and Moore, J. (1997). Credit cycles. Journal of Political Economy, 106:211–
  248.

Kiyotaki, N. and Moore, J. (2002). Balance-Sheet Contagion. The American Economic
  Review, 92(2):46–50.

Longstaff, F. and Schwartz, E. (1995). A Simple Approach to Valuing Risky Fixed and
  Floating Rate Debt. Journal of Finance, 50(3):789–852.

                                            27
Merton, R. (1974). On the Pricing of Corporate Debt: The Risk Structure of Interest
 Rates. The Journal of Finance, 29(2):449–470.

Morris, S. and Shin, H. (2008). Financial regulation in a system context. Brookings Panel
 on Economic Activity, September.

Nier, E., Yang, J., Yorulmazer, T., and Alentorn, A. (2007). Network Models and Finan-
  cial Stability. Journal of Economic Dynamics and Control, 31(6):2033–2060.

Oksendal, B. and Karsten, B. (1998). Stochastic Differential Equations: An Introduction
 with Applications. Springer.

Seneta, E. (2006). Non-Negative Matrices and Markov Chains. Springer.

Shin, H. (2008). Risk and Liquidity in a System Context. Journal of Financial Interme-
  diation, 17:315–329.

Stiglitz, J. E. and Greenwald, B. C. N. (2003). Towards a New Paradigm in Monetary
  Economics. Cambridge Univ. Press, Cambridge.

Vega-Redondo, F. (2007). Complex Social Networks. Series: Econometric Society Mono-
  graphs. Cambridge University Press.

Zhou, C. (1997). Default correlation: An analytical result. Finance and Economics
  Discussion Series, Federal Reserve Board, May, 27.




                                           28
