                              NBER WORKING PAPER SERIES




                                   FRICTIONAL SORTING

                                       Wenquan Liang
                                           Ran Song
                                     Christopher Timmins

                                      Working Paper 27643
                              http://www.nber.org/papers/w27643


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                   August 2020




We are grateful to comments from Patrick Bayer, George Borjas, Diego Restuccia, Richard
Freeman, Paavo Monkkonen, Mushfiq Mobarak, Nicholas Ryan, Junfu Zhang and seminar
participants at Duke University, Harvard University, Yale University, Clark University,
University of Kentucky, Biennial Conference of China Development Studies and Nankai Yale
Development Conference. Ran Song acknowledges financial support from Yale Research
Initiative on Innovation and Scale (Y-RISE) at Yale University. The views expressed herein are
those of the authors and do not necessarily reflect the views of the National Bureau of Economic
Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2020 by Wenquan Liang, Ran Song, and Christopher Timmins. All rights reserved. Short
sections of text, not to exceed two paragraphs, may be quoted without explicit permission
provided that full credit, including © notice, is given to the source.
Frictional Sorting
Wenquan Liang, Ran Song, and Christopher Timmins
NBER Working Paper No. 27643
August 2020
JEL No. J24,J61,R23

                                          ABSTRACT

In many countries around the world, migration costs and housing supply restrictions interact with
each other and combine to restrict workers' location decisions. Using an equilibrium sorting
model and rich micro data from China, we evaluate the impacts of these dual constraints on
workers' sorting behavior and quantify the resulting changes in aggregate welfare and inequality.
We find strong policy interactions between the two kinds of frictions in determining welfare
losses and regional inequality. Counterfactual simulations show that lowering migration costs
can increase welfare and reduce regional inequality by moving workers from unproductive inland
regions to productive coastal regions in China; such welfare and regional distributional impacts
depend on the elasticity of housing supply in coastal regions and vice-versa. Results highlight the
policy complementarities between reducing the two kinds of frictions and have general
implications for countries with different levels of constraints on mobility and housing supply.


Wenquan Liang                                    Christopher Timmins
Jinan University                                 Department of Economics
No. 601 West Huangpu Road                        Duke University
Tianhe District                                  209 Social Sciences Building
Guangzhou                                        P.O. Box 90097
P.R. China                                       Durham, NC 27708-0097
liang.wenquan@jnu.edu.cn                         and NBER
                                                 christopher.timmins@duke.edu
Ran Song
Division of Social Science
Yale-NUS College
16 #01-220
College Ave West
Singapore, 138527
songr@nber.org
1. Introduction
      Recent evidence has suggested the presence of large within-country gaps in
productivity (Gollin et al., 2014; Moretti, 2011) and welfare (Diamond, 2016). The
implication of these gaps is that moving people from unproductive to productive areas
could increase total national output along with welfare. Thus, a natural question arises
­ why workers in underdeveloped areas do not arbitrage these opportunities? One
reason may be that households face migration frictions ­ both administrative and
informal. Another may be restrictions on housing supply in receiving destinations.
      In many countries around the world, constraints on mobility and housing supply
are driven by common political incentives. First, restrictions on migration and housing
supply are both implemented to protect the interests of local residents1. Second, the
two restrictions are often designed to raise government "fiscal profit"2. These political
incentives can also, at least in part, explain the poor transportation infrastructure
services which drive up migration costs in many developing countries3. Due to common
incentives, constraints on migration and housing supply are likely to interact with one
another and combine to inhibit workers' spatial sorting and reduce aggregate social
wellbeing. But so far, there has been little work analyzing the interplay of two kinds of
frictions in driving welfare losses and regional inequality.
      On the basis of the two kinds of frictions, we could roughly assign countries in the
world into four groups: First, countries combining both tight constraints on mobility
and housing supply like China 4 . Second, those with low migration costs but tight

1
  Migration restrictions are often aimed to increase wages and employment for local workers (Clemens et al., 2018)
and housing supply regulations are designed to protect the benefits of local landowners (Glaeser and Gyourko, 2018).
2
  In this paper, "fiscal profit" means the difference between government fiscal income and expenditure. There are
strong incentives for local government to regulate the supply of land for construction to raise fiscal revenues from
land transactions (Glaeser et al., 2017) or taxes from rental income (Diamond, 2017) and restrict public services for
internal migrants from other places in order to save fiscal expenditure (Bhavnani and Lacina, 2017)
3
  In many developing countries, fiscal resources are highly concentrated in a few primary cities located in rich
regions, because these cities have much more tax income and stronger influence on the allocation of these resources
from the central government than do cities in poor regions. Local governments only care about the wellbeing of local
residents rather than the aggregate national welfare and have strong incentives to minimize unnecessary fiscal
expenditure. As a result, without the efficient coordination of central government, local governments of these
primary cities are reluctant to invest on the transportation infrastructure linking poor to rich regions. Moreover, local
governments in poor regions do not have enough money to invest on the inter-regional transportation infrastructure.
4
  The hukou system in China is a typical example of institutional migration restrictions in developing countries. This
system prohibits or limit internal migrants' access to government provided benefits (Combes et al., 2020). Hukou
restrictions are used as a policy tool to protect the interests of local residents and reduce government fiscal
expenditure. Moreover, land available for construction are strongly regulated in China to raise fiscal revenues from
land transactions (Glaeser et al., 2017).
constraints on housing supply like the U.S.5. Third, those with high migration costs but
loose housing constraints like Indonesia6. Last, those combining both free mobility and
loose housing constraints like some Nordic countries and Japan7.
      In this paper, we use China as a laboratory to study the impacts of constraints on
mobility and housing supply on workers' sorting behavior and quantify the consequent
changes in aggregate welfare and regional inequality. China provides us with a good
setting for this analysis, because high migration costs driven by hukou restrictions and
stringent administrative housing supply restrictions strongly restrict the residential
sorting of people and lead to huge welfare losses. We use our analysis to shed light on
the economic benefits associated with reducing sorting frictions for countries with
different levels of constraints on mobility and housing supply.
      In order to quantify the general equilibrium welfare consequences of frictions in
spatial sorting, we develop a spatial discrete choice model in which workers of different
skill levels differentially sort across cities based on wages, housing costs, amenities, as
well as heterogeneous migration costs. Our model builds on Rosen (1979) and Roback
(1982) and has close connections to the recent spatial sorting framework of Bayer,
Ferreira and MacMillan (2007), Bayer and Timmins (2007) and Diamond (2016). In
our setting, workers do not sort across locations freely. They are constrained by two
types of frictions ­ migration costs and housing supply restrictions. Migrants suffer
from substantial mobility costs which differ with geographic locations and skills.
Similar to Bayer, Keohane, and Timmins (2009) and Diamond (2016), we use fixed
costs associated with moving various distances from one's original city to capture the
physical and psychological costs of leaving home. We go beyond their approaches by
further estimating overall migration costs, including utility losses due to institutional
migration restrictions (i.e. hukou system in China) and welfare implications of migrant

5
  Although U.S. is free-mobility country, housing supply restrictions are prevalent in its most productive coastal
cities. Local landlords in those cities have strong incentives to influence local zoning policies to restrict housing
supply in order to increase their rental income (Hsieh and Moretti, 2018; Glaeser and Gyourko, 2018). Moreover,
tight housing supply regulations allow local governments to extract more taxes from rental income (Diamond, 2017).
6
  High mobility costs constrain the internal migration of workers in Indonesia (Bryan and Morten, 2019). However,
regulations on housing supply are loose in Indonesia.
7
  Japan is a country with high-performance transportation infrastructure and no institutional restriction on internal
migration. Moreover, zoning regulations are relatively liberal in Japan, with few density and bulk controls and
limited use segregation.
specific amenities (e.g., equal economic opportunities, migrant networks). For housing
constraints, we leverage the stringent restrictions on land available for construction in
coastal China since 2004 (Liang et al., 2016, Liu and Xiong, 2019). Specifically, we
use differences in the elasticities of housing prices with respect to population between
the inland and coastal regions to capture the tight land restriction policy in coastal China.
      We estimate the model using comprehensive and detailed data on workers' spatial
sorting in China, which are drawn from the 2005 One-Percent Population Census of
China. For each worker, our data record hukou location and current residential location,
along with a wide range of sociodemographic and housing characteristic variables.
Importantly, these are the only Chinese census data that have information about
individual wages.
      We use our equilibrium sorting model to quantify the impacts of reducing sorting
frictions on workers' re-sorting decisions along with the consequent changes in
aggregate welfare and regional inequality. We consider the U.S. as a the benchmark
for low migration costs (Bryan and Morten, 2019; Tombe and Zhu, 2019) and see inland
China as the benchmark for elastic housing supply. In particular, when simulating the
reduction in migration costs, we lower migration costs in China by 29.6%--a level of
mobility costs such that the inter-province migration rate in China reaches the inter-
state migration rate in the U.S. 8 .                  When simulating the relaxation of housing
restrictions, we reduce housing price elasticities with respect to population in coastal
China to the level in inland China.
      In a series of quantitative exercises, we first lower migration costs under scenarios
of stringent and relaxed housing constraints, respectively. The economic effects of
lowering mobility costs depend on the elasticity of housing supply in coastal regions.
The reduction of migration costs induces workers to re-sort to coastal Chinese cities
where high productivity and good amenities are concentrated. When shifting the

8
  Like Hsieh and Klenow (2009) and Bryan and Morten (2019), we do not analyze specific policies, but calculate
the potential welfare effects of a set of policy options. Many policies can be employed to reduce moving costs. One
of the most common policies is the supply of transportation infrastructure such as high-speed road or railway.
Another set of policies focuses on the integration of migrants into their destination communities ­ e.g., increasing
the supply of public services for migrants, removing discrimination against migrants in the local labor market, or
offering training programs to reduce language barriers. In China, a critical policy which can lower mobility costs is
to loosen hukou restrictions in large cities so that migrants have more access to government provided benefits.
scenario from stringent to relaxed housing supply restrictions, the fraction of worker
re-sorting from the under-developed inland regions to highly developed coastal regions
induced by lowering mobility costs increases from 12.55% to 14.66%. For an average
worker, the resulting monetized annual welfare implication associated with the
reduction in migration costs is $338.68 under tight housing constraints and increases to
$374.12 under loose constraints. The increase in the welfare effects differs across
regions of different development levels. When shifting the scenario from tight to
relaxed housing constraints, the average welfare effect associated with lowering
mobility costs increases by 14.9% for those in inland regions, but hardly changes for
those in the coastal regions. Moreover, reducing mobility costs also drive down the
wage ratio between productive coastal regions and unproductive inland regions; such
spatial distributional effects are stronger under the scenario of relaxed housing
constraints.
     We next relax restrictions on housing supply under scenarios of high and low
mobility costs, respectively. The economic returns to loosening restrictions on housing
supply rely on the mobility constrains imposed on workers' spatial sorting. When
relaxing housing restrictions under high mobility costs, only 1.05% of workers re-sort
from inland to coastal regions, and the impact on mean monetized welfare is estimated
to be $179.04. In contrast, turning to the scenario of low mobility costs, 4.99% workers
relocate to coastal cities in response to relaxing housing constraints, and the resulting
monetized welfare benefits increase to $233.77. The increase in the welfare effects is
highly concentrated on those in underdeveloped inland regions. When shifting from
high to low mobility costs, the mean welfare effect of loosening housing restrictions
increases largely by 109% for those in inland regions, but remains almost the same for
those in coastal regions. Moreover, relaxing housing constraints also lowers the coastal-
inland wage ratio, the extent of which is larger when people face lower costs associated
with internal migration.
     The interaction of two kinds of frictions has two important policy implications.
First, for countries with both tight mobility and housing constraints like China, a policy
mix of lowering migration costs and relaxing housing supply restrictions
simultaneously could generate extra welfare and regional distributional effects. For
either constraint on mobility or housing supply, reducing one type of friction could
increase the welfare implications associated with reducing the other type of friction,
and allocate the resulting extra economic gains to those living in the under-developed
regions. Second, from the cross-country perspective, the impacts of lowering migration
costs on welfare and regional inequality are higher in countries with fewer housing
constraints like Indonesia than in countries that combine both constraints on mobility
and housing supply. Similarly, the welfare and distributional effects of relaxing
housing constraints are higher in a high mobility country like the U.S. than those with
both frictions in mobility and housing supply.
     Our paper bridges the literature on the returns to internal migration (Bryan et al.,
2014; Bryan and Morten, 2019; Tombe and Zhu, 2019; Kinnan et al., 2018) and the
effects of housing supply regulations (Glaeser and Gyourko, 2018; Hsieh and Moretti,
2018; Quigley and Raphael, 2005; Saiz 2010). Constraints on mobility and housing
supply are likely to be induced by common incentives and interact with each other in
driving welfare losses, but we are not aware of any paper studying the policy
interactions associated with these constraints. Against this backdrop, we jointly analyze
migration costs and housing restrictions within a unified framework of spatial sorting
and quantify the policy complementarities between relaxing the two types of constraints
in determining the welfare and spatial distributional effects.
     A recent macro-spatial literature employs aggregate data to estimate the economic
losses associated with mobility costs (Bryan and Morten, 2017; Tombe and Zhu, 2019)
and housing supply restrictions (Hsieh and Moretti, 2018). Our approach differs from
these "macro spatial model" papers by conducting a spatial analysis at the individual
level. First, our micro analysis allows us to predict the changes in residential location
and welfare for each worker in our sample due to policy shocks. However, existing
macro studies mostly look at average productivity effects of policy shocks and
disregard how the potential economic effects spread across heterogenous agents.
Moreover, we could account for self-selection due to observed personal attributes, e.g.
highly-educated workers are more likely to sort into cities with high returns to
education, rural workers prefer to select cities with high demand for rural-migrant
workers. These observed self-selections are often overlooked by macro-level studies
which only explore aggregate migration flows. Last, our wage measurement is different
from macro-level spatial studies that typically rely on regional average wages and
overlook the Roy sorting bias9. Ignoring such unobserved human capital heterogeneity
in estimating the costs of labor misallocation may bias results (Glaeser and Gyourko,
2018). We address Roy sorting bias using the approach proposed by Dahl (2002) and
predict the counterfactual wage that each individual could earn in every potential
location.
      The remainder of this paper proceeds as follows. Section 2 describes a number of
important stylized facts about China. Section 3 lays out the model and Section 4
discusses the data. Section 5 presents estimation techniques and Section 6 discusses
parameter estimates. Section 7 simulates the economic impacts of reducing frictions in
workers' spatial sorting and Section 8 concludes.


2. Stylized Facts
      In this section, we discuss three stylized facts about residential location sorting in
China to guide our model setting and counterfactual analysis.
2.1 Spatial Distribution of Productivity and Amenities
      According to the equilibrium sorting model, workers will sort across locations on
the basis of returns in the labor market (which are driven by local productivity), local
prices (particularly for housing), and amenities. We begin by plotting the spatial
distribution of productivity and amenities in China, using the U.S. as a benchmark.
Figure 1 plots the spread in GDP per capita across Chinese provinces along with the
spread across U.S. states in 2005. It is clear that the spatial dispersion of productivity
is substantially higher in China relative to the U.S.. Similarly, Figures 2 and 3 reveal
that the geographical distribution of amenities is also more out of balance in China than


9
  Roy sorting refers to the problem that individuals respond to idiosyncratic wage draws and are likely to move to a
location where that wage draw is good. This means that using the average wage in a location of someone who looks
like a potential migrant to that location will likely overstate what that migrant could actually earn there (Roy, 1951).
it is in the U.S.. High productivity regions usually offer desirable amenities, implying
that the within-country well-being gap is very large in China. The substantial spatial
differences in productivity and amenities should create strong incentives for workers to
arbitrage utility through location sorting. However, the internal migration rate is much
lower in China than in the U.S.. Table A1 reports that the cross-province internal
migration rate in China is only 6.05% in 2005, whereas the cross-state internal
migration rate in the U.S. is as large as 31.5%.10 We argue that there are two major
reasons behind the larger dispersion of productivity and amenities but lower migration
rate in China. One is the high migration costs that impose severe restrictions on sorting
across locations within China and the other is the high housing prices driven by supply
constraints at the places where migrants concentrate.
2.2 Migration Costs
      The high migration costs in many developing countries are driven by institutional
migration restrictions. The hukou system in China is a typical example of such an
institutional restriction. The institution requires that each person be classified as rural
or urban and be assigned a locality of hukou registration (typically the person's birth
location). One's hukou registration determines one's entitlements to pursue many
activities and eligibility for state-provided goods and services in a specific place. The
hukou plays a critical role as an internal passport without which internal migrants are
not entitled to the same rights and benefits as local people. The migrants who don't
hold a local hukou have limited or no access to many government-provided benefits,
including public education for children and medical care.
      The difficulty of acquiring a local hukou is heterogenous across Chinese cities and
is correlated with population and city tiers. Figure 4 illustrates a strong positive
association between city population and the hukou index, which measures the difficulty
migrants face in obtaining a local hukou. Figure 5 shows that the hukou index is highest
for Beijing and Shanghai, followed by sub-provincial cities, and then by provincial

10
   The cross-province migration rate in China is defined as the ratio of population who leave their hukou provinces,
and the cross-state migration rate in U.S. is defined as the ratio of population who leave their birth states. In China,
most people's hukou location is the same as their birth location. The China Labor-Force Dynamics Survey shows
that birth province is the same as hukou province for 97.33% of population and 95.84% of migrants in China.
capitals in descending order 11 . Therefore, in China today, it is relatively easy for
immigrants to apply for local hukou in small and medium-sized cities but still very hard
in large and high-tier cities.
      Another prominent feature of the hukou system is that it is highly education-and -
skill-biased. Table A2 reports the points associated with educational attainment and
professional qualification that are required in the application for local hukou in four
largest metropolitans in China, which indicate that migrant workers with a higher
degree or professional qualifications can much more easily get the local hukou
compared to those with lower education levels and less professional skills.
      In China, hukou regulation is endogenously determined by local governments and
employed to control city populations. The hukou restriction is more stringent in large
and high-tier cities that face an influx of migrants. These cities, however, often offer
desirable migrant-specific amenities ­ e.g., intensive migrant networks, relatively equal
economic opportunities and a Mandarin-speaking (rather than local dialects)
environment.12 Figures 6 and 7 illustrate that the share of immigrants as well as the
share of workers using mandarin as their working language are both higher for higher-
tier cities in spite of their hukou restrictions.
      To summarize, the overall migration costs specific for destination cities differ with
city tiers in China and are driven by the combined effects associated with hukou
regulation and migrant-specific amenities.
2.3 Housing Supply Restrictions
      In the U.S., land use restrictions are implemented in the productive coastal cities.
Similarly, in China, stringent restrictions are imposed on the supply of land available
for construction in its highly-developed coastal regions. We give a brief introduction of
China's land system here.



11
   We could divide prefecture-and-above level Chinese cities into four tiers ­ Beijing and Shanghai, sub-provincial
cities, provincial capitals and ordinary prefecture cities. Tianjin and Chongqing are sub-provincial cities, but we
assign the two cities to group of sub-provincial cities. The reason is that the difficulty to obtain local hukou and
migrant-specific amenities in Tianjin and Chongqing are similar to that in the group of sub-provincial cities.
12
   Mandarin is the only official language in China, but local dialects are widely used in oral communication in many
small and medium Chinese cities. It is hard for migrants to assimilate in local society and compete with local workers
in labor market in a dialect-speaking environment
     In China, local governments own all urban land, and state and collective ownership
of land co-exist in rural areas. The land is categorized as construction land, agricultural
land, and unused land. According to the The Land Management Law of the People's
Republic of China, "construction land" is defined as "land on which buildings or other
structures are built, including land used for urban and rural housing and public works."
"Agricultural land" is characterized as "land used directly in agricultural production",
and "unused land" is defined as "land other than agricultural land and construction
land".
     During the period of rapid urbanization, the Chinese government set a quota
system to annually specify the amount of land that can be transformed from agricultural
land to construction land. Since 2004, the government has substantially reduced the
construction land quota in productive coastal regions (Liang et al., 2016, Liu and Xiong,
2019). As plotted in Figure 8, before 2004, the share of coastal land supply increased
annually, but since 2004, the trend of land supply reversed suddenly; the fraction of
coastal land supply fell from more than 70% in 2003 to approximately 55% in 2010.
The restrictions on the supply of construction land in coastal China drove up the
housing price ratio between the coastal and inland regions as depicted in Figure 9. The
sudden reduction in coastal land supply was not due to non-availability of land, but
rather to the stringent restrictions on the amount of construction land that can be
converted from agricultural land in coastal regions imposed by the government since
2004. For example, Shanghai has reserved up to about one-third of its land for
agricultural use, even though transforming those land to construction use could largely
drive down unaffordable housing prices in Shanghai.
     Despite restricted land supply, coastal regions are still experiencing high economic
growth and receiving an influx of immigrants, which cause a large and increasing
housing demand. The three major economic circles, i.e. the Circum-Bohai-Sea Region,
the Yangtze River Delta and the Pearl River Delta, are all located in coastal China, and
Table A3 reports that about 67.97% of Chinese internal migrants are residing in these
three economic circles. We further plot the spatial distribution of internal migrants
across Chinese provinces in Figure 10. It is clear that internal migrants are concentrated
in coastal China. The imbalance between the supply of and demand for construction
land raises housing prices in coastal China, which consequently inhibits the movement
of workers from inland cities to those productive and livable coastal cities and reduces
the aggregate well-being.


3. A Residential Sorting Model Incorporating Frictions
       This section presents a residential sorting framework where workers choose
locations based on wages, housing prices, amenities as well as mobility costs. Our
model shares features with recent work on spatial sorting, particularly Bayer, Ferreira
and McMillan (2007), Bayer and Timmins (2007) and Diamond (2016). We build
upon their frameworks by incorporating constraints on mobility and housing, as well as
externalities associated with city size and the share of high-skilled people.
3.1 Residential Location Sorting
       Worker ! with skill-level " chooses residential city #, along with consumption of a
numeraire commodity $!,# and housing services %!,# , to maximize their utility subject
to a budget constraint:


      &'(                                                                    4
                      )($!,# , %!,# , ,# , -# , # , /!,#,* , 0#,* , 1!,#,* ; 3* ) ". 8.$!,# +  :# %!,# = <!,#   (1)
  {&!,# ,'!,# ,(# }




where ,# denotes exogenous amenities in city # (e.g. temperature, distance to seaports)
and " = low indicates "less than high school", while mid and high indicate "high school"
or "some college and above".
       -# and # are, respectively, the number of workers and the share of high-skilled

workers, which are endogenous attributes of city # that are determined by the aggregate
location choice decisions of individuals. The payoff from choosing a place depends
partially on the number and the characteristics (here, educational attainment) of the
other individuals who choose the same place. For example, people might preferer to
live in large metropolitan areas because of the urban amenities that only large cities
could provide, but congestion operating through increased commuting times and
crowded public services may distract the well-being in large cities. People might also
have a direct preference for highly educated neighbors, and an indirect preference for
the services and urban amenities that come along with them13,14. 0#,* captures the utility
effects of all the unobserved characteristics of city# that are common to workers of the
educational level " , and 1!,#,* is the idiosyncratic unobserved taste for city # .
/!,#,* denotes the disutility to individual ! of moving from their original city to city j.
/!,#,*  not only captures the physical and psychological costs of living far from one's
original city, but also the utility loss due to institutional migration restrictions that are
prevalent in many developing countries. Migration costs are heterogeneous across
education groups; we expect that high-skilled workers will generally face lower
migration costs.
      We allow utility parameters to vary with skill, and assume the utility function for
worker ! of skill level " residing in city # is:


                                        +      +      +',%    +(,% +,% ,
                           )!,#,* = $!,#$,% %!,#
                                               &,%
                                                   ,#        -#   # = !,#,% -.#,% -/!,#,%                        (2)



Individual utility maximization produces the optimum housing consumption:


                                                         +&,%        1
                                                                     !,#
                                             %!,# =+                 2                                           (3)
                                                        &,% -+$,%        #




                                            
Denoting 31,* = 3',* + 3&,* , substituting %!,# for %!,# back into equation (2) and using

the budget constraint yields the following individual indirect utility function:



            ?!,#,* = @* = +*,% 341!,+,# -,!,#,% 5+&,% 342# -+',% 34(# -+,% 346# -+,% 34# -.#,% -/!,#,%           (4)


13
   Locations with a large share of high-educated people may contain certain amenities (e.g. theaters and museums)
and certain city services (e.g., trash removal, sewage) that require a sufficient number of high-income residences to
supply.
14
   Diamond (2016) incorporates an index of observable amenities into the utility function which are endogenously
determined by the skill mix of the city. Instead of modelling the effects of skill mix on amenities, we here treat the
number and the skill mix of workers directly as endogenous amenities which capture both people's direct preference
for city population and education composition and indirect preference for the services and amenities that only
provided by cities with larger population or higher fraction of high-educated households.
where @* = 3',* +&,% 3&,* +$,% /(3',* + 3&,* )(+&,% -+$,% ) is a constant across locations.

     We can only observe workers' wages in the locations where they actually live.
Thus, we must predict each worker !'s counterfactual wage in other locations that were
not chosen. We decompose the would-be wage each worker would earn in every
location into a predicted mean and an idiosyncratic error term that represents the

                                                                       F!,# + G!,#
unobserved individual ability in a particular city -- i.e., ln<!,# = ln<       1
                                                                                   .

Substituting back into equation (4) and taking logs yields:


                                     F!,# + /!,#,* + K!,#,* , K!,#,* = 31 G!,#
            HI?!,#,* = J#,* + 31,* HI<                                     1
                                                                               + 1!,#,*       (5)

            J#,* = HI@* + 3',* HI:#  + 3(,* HI,# + 3,* HI-# + 3,* HI# + 0#,*                  (6)


where J#,* denotes city-and-skill specific mean utility that is common to all workers of
skill level " in city # and captures all the utility-relevant attributes of the city, and 0#,*
is the unobservable component of J#,* . J#,* could be considered as city quality of life,

which is independent of wages and migration costs.
     The combined idiosyncratic unobservable, K!,#,* , in equation (5) captures both
                                  1
worker !" idiosyncratic ability (G!,# ) in city # and idiosyncratic taste (1!,#,* ) for the city.

It accounts for the selection of workers into locations where their personal abilities have
comparative advantage or their personal preferences are unusually high. Assuming that
K!,#,* is independently and identically distributed Type I extreme value, the probability
that worker ! of type " chooses to reside in city # can be expressed as:


                                                                   >!,#,% -,!,#,% )
                                                  :;<(=#,% -+*,% 341
           MNHI?!,#,*  HI?!,3,* , H  #R =       -                      >!,,,% -,!,%,, )
                                                                                              (7)
                                                ,./ :;<(=,,% -+*,% 341




     Given the total number of skill-level- " workers (-* ) in China, the equilibrium
number of workers of skill level " choosing to settle in city # is determined by:
                                     6
                          -#,* = !@A
                                  %
                                     MNHI?!,#,*  HI?!,3,* H  #R                                         (8)



      Thus, the number of workers and the share of high-skilled workers choosing to
live in city # can be written as:


                                              -# = * -#,*                                               (9)
                                                     6#,0!10
                                              # =    % 6#,%
                                                                                                       (10)



Without loss of generality, each worker provides one unit of labor in the local labor
market. Therefore, the equilibrium of residential sorting equates the labor supply in a
given location and the number of workers choosing to live there.
3.2 Labor Market
      We use city specific Mincer wage equations to recover the local labor market
equilibrium for each city. The wage that worker ! could earn in city # is given by:



          HI<!,# = T#,3BC + T#,D!E /!U_WX!HH +  T#,F!GF %!Y_WX!HH + [#H \     1
                                                                         ! + G!,#                       (11)



where /!U_WX!HH and %!Y_WX!HH are education attainment dummies for high school
and some college or above, respectively. T#,3BC is the average wage of low-skilled
workers (i.e., less than high school), and T#,D!E and T#,F!GF are the wage ratios between
middle- and low-skilled workers (returns to high school education) and between high-
and low-skilled workers (returns to some college or above education), respectively,
                                                                                        1
conditional upon individual attributes. \! is a vector of other individual attributes. G!,#


is the unobserved worker !" location-specific ability15.
      Increasing the number of high-skilled workers may increase the demand for low-
and middle-skilled workers. For example, college-educated residents take more taxi
rides and hire more housekeepers. Additionally, a higher agglomeration of high-skilled

15
 For example, a worker who is talented at finance would have a comparative advantage in New York, and a worker
who is talented at computer science would have a relative higher skill in California bay area.
workers raises the productivity of all workers through knowledge spillovers.16 For
example, the concentration of highly-educated people might result in a better spread of
ideas and more intensive innovation activities. Thus, changes in the number and the
skill mix of workers affects wages in the local market both by moving along workers'
labor demand curves (i.e., a shift in labor supply) and by directly impacting workers'
marginal products (i.e., a shift in labor demand). Therefore, we use three flexible linear
equations to model the average wages of low-skilled workers and the returns to middle-
and high-skill:


                                       
                          T#,3BC = HI<#,3BC = ^I + ^A HI-#,3BC + ^J HI-#,F!GF            (12)
                                          1                          6
                          T#,D!E = HI( 1#,2!3
                                        
                                              ) = _I + _A HI ` 6#,2!3 a + _J HI-#,F!GF   (13)
                                              #,456                       #,456

                                              1                       6
                          T#,F!GF = HI( 1#,0!10
                                          
                                                ) = bI + bA HI ` 6#0!10a                 (14)
                                                  #,456                    #,456



        
where <#,3BC     
             , <#,D!E         
                      , and <#,F!GF denote average wage for low-, middle- and high- skilled
workers, respectively, conditional upon other personal attributes. Equation (12)
indicates that, as is illustrated in Figure A1, increasing the number of low-skilled
workers in city # reduces their average wage by shifting the labor supply curve
outward, whereas increasing the number of high-skilled workers raises low-skilled
wages through shifting the labor demand curve for low-educated workers outward.
Similarly, equation (13) indicates that, as shown in Figure A2, increasing the ratio
between middle- and low-skilled workers decreases their wage ratio, i.e., the return to
middle-education, by shifting their relative labor supply curve outward. Changes in the
number of high-skilled workers impact the demand for low- and middle-skilled workers
differentially. If the impacts are higher for the demand for middle-skilled workers,
increasing the number of high-skilled workers will shift the relative labor demand curve
of middle- and low-skilled workers outward and increase their wage ratio and vice
versa.
         We then turn to equation (14). The increase in high-skilled workers impacts their
wages through not only labor supply but also their positive knowledge spillovers (e.g.,


16
     See the survey of Rosenthan and Strange (2004) and Moretti (2011).
sharing of ideas, the agglomeration of innovation activities, etc.). Thus, Figure A3
shows that increasing the ratio between high- and low-skilled workers affects their
wage ratio, i.e., the return to high-education, through shifting both the relative labor
supply curve and the relative labor demand curve outward. If the movement of the
relative labor demand curve is larger than that of the relative labor supply curve, the
high-skill wage premium will go up.
3.3 Housing Market

     We implicitly assume all housing is owned by an absentee landlord. The unit
price of housing services :# in city # is given by:


                                       ln:# = [I + [# -#                              (15)


where [# represents the elasticity of house price with respect to population in the city,

and is determined by the land supply regulation. Cities with stringent land use
restrictions have a higher housing price elasticity [# , and cities with highly elastic land
supply have a smaller [# . Since 2004, the Chinese government has strengthened land-
use administration and strictly restricted the construction land supply in coastal regions.
Therefore, we assume [# differs between the coastal and the inland region of China.
3.4 Spatial Equilibrium

                                                       F!,#
     Spatial equilibrium is defined by a menu of wages <                     
                                                            , housing price :# , and

                                
education-specific population -#,* in each location #:

1. Labor demand equals labor supply:

                 F!,#
               HI< 
                      = T#,3BC + T#,D!E /!U_cU +  T#,F!GF %!Y_cU + [#H \!              (16)

                                                                
                                T#,3BC =  ^I + ^A -#,3BC + ^J -#,F!GF 

                                               
     T#,D!E = _I + _A N-#,D!E /-#,3BC R + _J -#,F!GF 

                                       
         T#,F!GF = bI + bA N-#,F!GF /-#,3BC R
                                                   
                                                 >!,#
                         6      :;<(=#,% -+*,% 341    -,!,#,% )
               -#,*  = !@A
                        %
                                                                   s = {Hef, &!U, !Y}
                             -                    >
                             ,./ :;<(=,,% -+*,% 341!,, -,!,%,, )

                                    
              J#,* = HI@* + 3',* HI:#  + 3(,* HI,# + 3,* HI-# + 3,* HI#
                                                                      
                                                                        + 0#,* 
2.    Housing supply equals housing demand:
                                              
                                           HI:# = [I + [# -#                                             (17)

                                -#  = * -#,*
                                          
                                             s = {Hef, &!U, !Y}



Here, migration costs /!,#,* and different housing price elasticities with respect to
population [# capture frictions in workers' spatial sorting. We do not solve for wages,
housing prices, and skill-specific population analytically, but rather use our model to
simulate the re-sorting decisions that workers make in response to policy changes, and
the re-equilibration of labor and housing market adjusted to the relocation of workers.
Thus, our framework provides the basis for analyzing the impacts of reducing frictions
in residential location sorting and quantifying the consequent welfare changes.


4. Data
      We estimate our equilibrium sorting model using the 2005 One-Percent Population
Census of China. The census data not only contains very detailed information about
housing conditions, but also includes a long list of variables about demographic and
economic characteristics of workers, such as age, gender, education attainment,
employment status, occupation, hukou type (rural/urban), hukou city and current
residential city. The most important variable in the data is the individual wage. The
2005 One-Percent Population Census of China is the only census dataset that records
the information about wages.
      Without loss of generality, we use the household head sample in our analysis, and
we use workers' hukou locations and current residential locations to define their
migration status17. We drop the observation if a worker has been away from their hukou
city for less than six months because we are uncertain whether they have made a long-
term migration decision. We use data from age groups between 25 to 54 years of age


17
  This definition is consistent with recent work on internal migration in China (Combes et al., 2020; Tombe and
Zhu, 2019). Only 7% of individuals have a hukou city that is not their birth city.
and drop observations with missing values in wage and education attainment. Because
China's real estate market was not established until 199118, we drop observations if
houses were built before 1991 before we compute the city-specific housing price19. We
classify skill levels into three categories: low-skill (i.e. below high school), middle-skill
(i.e. high school), and high-education (i.e. some college or above).
      Our amenity data come from various sources. We collect city area from the China
City Statistical Yearbook. Weather amenity data come from China Meteorological Data
Service Center. We calculate the minimum distance to the three large seaports (i.e.
Tianjin seaport, Shanghai seaport and Shenzhen seaport) by hand.
      We combine our individual data and city amenity data. Our final data set includes
341,413 workers in 285 Chinese cities. The geographical distribution of the 285 cites
in our sample is illustrated in Figure A4. The 285 cities contain 91.04% of the Chinese
population in 2005.
      Table A4 reports the summary statistics and a full description of the key variables
used in our analysis. In 2005, only 6.7% of workers leave their hukou city, indicating
high mobility costs in China. Table A5 further compares some key variables between
the inland and coastal regions. The average wage is 89.44% higher in coastal regions
than in inland regions; the fraction of high skilled workers and the fraction of migrant
workers are both significantly higher in coastal regions compared to inland regions.
Thus, the level of economic development is substantially higher in coastal China than
that in inland China. Largely driven by constraints on housing supply, city-level
housing price is significantly higher in coastal cities in comparison with inland cities.




18
   Prior to 1991, housing was mainly allocated to employees at state owned enterprises, public institutions and
government departments through a planned system; therefore, there was no housing market, and one cannot observe
transaction values. In 1991, the central government authorized a comprehensive reform of the housing sector in
China. Since then, the housing market in China has matured, allowing people to exchange their housing through the
price system. This has made it possible for us to observe transaction prices since that time.
19
   See Appendix C for the detailed procedure to calculate city-specific housing price.
5. Estimation
5.1 Counterfactual Wage
     We first recover the city-specific wage equation ­ equation (11) in section 3.2 ­
by estimating an augmented Mincer wage regression separately for each city. A key
advantage of conducting micro-level analysis using our equilibrium sorting model is
that we could use detailed personal information to account for Roy sorting bias. We
follow the semi-parametric approach proposed by Dahl (2002) to deal with Roy sorting
problem. This is described in Appendix B. After that, we use the coefficients on
individual characteristics in a city-specific Mincer wage equation to recover the
counterfactual wage each worker would earn in every city.
5.2 Residential Location Sorting
     We employ the two-step approach proposed by Berry et al. (1995) to infer the
parameters underlying the residential location decision. In the first step, we use a
discrete-choice model incorporating moving costs to estimate marginal utilities of
wages and migration costs, as well as city-and-skill specific mean utilities. In the second
step, we regress the estimated city-and-skill specific mean utilities on the number and
the skill mix of workers, as well as exogenous amenities. We conduct our two-step
estimation separately for each education group.
5.2.1 First-Step Estimation
     The residential sorting model introduced in Section 3 can capture the migration
disutility in the sorting process by incorporating fixed costs that vary with alternative
locations. In order to capture the heterogeneity in the barrier to obtaining a local hukou
and migrant-specific amenities across Chinese cities, we use six dummy variables and
their interactions to model migration costs. Following Freeman, Liang, Song and
Timmins (2019), we first classify the cities into four categories: Beijing and Shanghai,
sub-provincial cities along with Tianjin and Chongqing, provincial capitals, and
ordinary cities. It is hardest for migrants to obtain local hukou in Beijing and Shanghai,
followed by sub-provincial cities, and then by provincial capitals and ordinary cities.
Regarding migrant-specific desirable amenities, the pattern is entirely different. Large
cities like Beijing and Shanghai offer much better migrant-specific amenities relative
to those small cities, including economic opportunities that are more similar to those
offered to locals,20 intensive migrant social ties and a Mandarin speaking environment.
Therefore, we use the following equation to model the overall migrant costs due to
hukou regulation and migrant-specific amenities:



                                /!,#,* = M                N
                                         L@A hL,* iL,!# + L@O hL,* iA,!# iL,!#                                      (18)



     iA,!# = 1 if location # is outside of worker ! 's hukou city (= 0 otherwise).
     iJ,!# = 1 if location # is outside of worker ! 's hukou province (= 0 otherwise).
     iM,!# = 1 if location # is outside of worker ! 's hukou macro-region21 (= 0
                   otherwise).
     iO,!# = 1 if location # is Beijing/Shanghai (= 0 otherwise).
     iP,!# = 1 if location # is a sub-provincial city/ Tianjin/ Chongqing (= 0 otherwise).
     iN,!# = 1 if location # is a provincial capital (= 0 otherwise).

       The first three dummies of equation (18) measure the disutility with respect to the
physical and psychological costs of leaving one's hukou city. 22 The interactions
between "outside of hukou city" dummy and three city group dummies capture overall
utility effects of the difficulty of obtaining local hukou and migrant-specific amenities,
which are relative to migration costs in ordinary cities.23 We allow migration cost
parameters to differ with educational attainment.
       We next estimate parameters of the discrete choice model of equation (7) by
maximizing the following likelihood function:



20
    Here, economic opportunities not only refer to job opportunities, but also include other opportunities, such as
assimilate into local society, learn and improve personal ability, and invest in profitable projects etc.
21
    There are seven macro-regions in China: East China, North China, Central China, South China, Southwest China,
Northwest China and Northeast China.
 22
    In China, most people's hukou city is the same as their birth city. The China Labor-force Dynamics Survey shows
that only 7% of individuals have a hukou city that is not their birth city. Additionally, it usually takes a long time for
migrants to obtain local hukou. Some local governments' official documents require that migrants must work in the
city for more than 3 years before applying for local hukou. If a migrant moved out from his hometown and obtains
hukou in a second city, he must have worked in this city for a long period and got used to the life there. Overall,
there exists a significant moving disutility for households leaving their hukou city.
23
    We assume that migration disutility is heterogeneous across the four group of cities. Ordinary cities are considered
as the benchmark group in the empirical specification of equation (18), therefore we don't add the interaction
between "outside of hukou city" dummy and "ordinary city" dummy.
kNJ#,* , 31,* , hA,...,N,* R =
                                                                                                      Y!,# 
  Z                    >!,#,% -8
        RST(=#,% -+* UV1                          9
                                  +./ W+,% X+,!# -+.: W+,% X/,!# X+,!# )
! # m -                      >!,, -+./ W+,% X+,!, -9
                                    8                                      n                                  (19)
     ,./ RST(=,,% -+*,% UV1                         +.: W+,% X/,!# X+,!, )




where o!,#,* is an indicator that takes the value of one if worker ! of skill level " is
observed to settle in city #, and 0 otherwise. City-and-education-fixed effect J#,*
recovered from equation (19) represents city- and skill-specific mean utility
independent of wages and moving costs. J#,* is constant to both natives and migrants of
skill level " living in city #, and it captures the overall effects of all the utility-relevant
city attributes. Our migration cost variables represent the heterogeneity in utility
difference between natives and migrants across Chinese cities. Since we have
controlled for J#,* which fully absorbs the utility effects of any city features, our
migration cost variables are orthogonal to any city characteristics including both city-
level observables and unobservables.
5.2.2 Second-Step Estimation
      In the second step of our estimation, we regress city- and education-specific mean
utilities obtained from the first-step estimation on housing price, population, the share
of high educated workers and other local amenities. Two identification problems arise
in this estimation stage.
      First, the price of housing services (:# ) will be correlated with unobserved city
characteristics in 0# . Following Bayer, Keohane and Timmins (2009), we address this
issue by using information provided by the model to parameterize 3',* . In particular,
                                                 
from equation (3), we have that 3',* = 31,* N:# %!,* /<!,#,* R ; the parameter 31,* can be
                                                        
estimated from the first step estimation and we set :# %!,* /<!,#,* equal to the average

share of housing expenditure over wage for cohorts with skill level ",24 which is 0.336,
0.290, and 0.223 for low-, middle- and high-skilled workers, respectively. We then
solve the endogeneity issue by moving observed 3' HI:# to the left-hand side of

24
  Following Bayer et al. (2007), for the purchased houses and self-built houses, we use the coefficients of housing
price regression of equation (30) (see Appendix C) to convert the housing values into a measure of annual costs in
2005, and then calculate the share of housing expenditure in household income.
equation (20).     The new dependent variable J#,* + 3',* HI:# could be considered as
housing price adjusted city quality of life. Thus, we use equation (20) to perform our
second step estimation:


                 J#,* + 3',* HI:# = HI@* + 3(,* ,# + 3,* -# + 3,* # + 0#,*          (20)


We control for exogenous amenities involving winter and summer temperature,
humidity, wind speed, and the minimum distance to the three large seaports in China
(i.e. Shenzhen, Shanghai and Tianjin seaport) in the estimation of equation (20).
     Second, we confront the fact that the number and skill mix of workers that choose
each location is determined endogenously as part of the sorting equilibrium. In
particular, -# and # are likely to be correlated with 0#,* due to the logic of the sorting

process itself--unobserved natural advantages in a place affect the demand of
individuals of different educational attainments for that place and, subsequently,
population and skill mix. Therefore, it is hard to distinguish between local spillovers
of the number and the skill mix of workers choosing city # and the unobserved
attractiveness of the city.
     Following     Bayer and Timmins (2005, 2007) , we propose an instrumental
variables strategy to deal with the endogeneity of -# and # . In developing our
instrumental variables, we exploit the nature of the sorting process-that the overall
demand for a particular location is affected by not only the features of location itself,
but also by the way these features fit into a broader landscape of available alternatives.
In particular, the exogenous attributes of other locations influence the sorting
equilibrium (and, thereby, the number and skill mix of individuals who choose a given
location), but do not have a direct effect on utility from a location choice once made.
In this case, measures of a location's `isolation' in exogenous attribute space make ideal
instruments for the number and the skill mix of individuals who choose that location.
Therefore, we leverage variations coming from exogenous amenities and migration
costs in all other alternative locations, and use the following predicted values as
instrumental variables for -# and # :



                                                     6      :; <[,!,#,% -+% (# \
                                   -# :HI q* !@A
                                              %
                                                          -                         r                             (21)
                                                          ,./ :;<[,!,,,% -+% (, \



                0!10 6         :; <[,!,#,0!10 -+0!10 (# \                   6       :; <[,!,#,% -+% (# \
          # :q!@A                                             r / q* !@A
                                                                      %
                                                                                                           r      (22)
                            -
                            ,./ :;<[,!,,,0!10 -+0!10 (, \
                                                                                 -
                                                                                 ,./ :;<[,!,,,% -+% (, \




      We only use exogenous local amenities (winter temperature, summer temperature,
humidity, wind speed) and migration costs variables to predict individual location
choices before aggregating those choice probabilities at the city level to get the
predicted population and predicted share of highly educated workers. Since we have
controlled for the migration costs (in the first step estimation) and exogenous amenities
(in the second step estimation) in the same city (city #) when we estimate the effects of
-# and # , the variation of our instrumental variables only comes from the migration
costs and exogenous amenities in all other locations that were not chosen. The
migration costs and amenities of alternative locations influence the sorting equilibrium
(and, thereby, the number and skill mix of workers who settle in city #), but do not have
a direct effect on utility from a location choice once made25. Therefore, our IV strategy
satisfies the exclusion restriction assumption.
      One may be concerned that migration cost variables /!,#,* (in city # ) might be
correlated with city-level unobervables in the same city. However, this is not the case.
Since we have accounted for city-and-skill specific fixed effects J#,* when we estimate
/!,#,* in the first step estimation, /!,#,* will be uncorrelated with any city-level

characteristics in city #, including both city-level observables and unobservables.




25
  We can use a simple story to explain the logic of our IV construction. For instance, there are three cities in workers'
location choice set--Boston, New York City and New Haven. Workers of different education attainment make
location choices among the three cities. The attributes in New York City and New Haven strongly affect the
probability that each worker choose to reside in Boston, and then affects the number and skill mix of workers in
Boston. However, once location choice decisions have been made, the attributes in New York City and New Haven
do not have any direct effect on the utility of residents settled in Boston.
     Given the number of workers of each skill level in the country and their location
choice set, the nature of the sorting equilibrium ensures that attributes in all other
locations in the choice set strongly affect the number and the skill mix of workers
choosing location #. Table A6 shows the results from first-stage IV estimation. The
coefficients on the two instruments are highly statistically significantly different from
zero, and the F-statistics are all larger than ten.
5.3 Labor Demand
     The city-specific Mincer wage equation (discussed in section 3.2 and estimated in
section 5.1) represents the equilibrium between labor supply and labor demand.
Conditional upon workers' personal characteristics, all the determinants of skill-
specific labor demand are residing in the average wage of low-educated workers T#,3BC ,
the return to middle education T#,D!E , and the return to high education T#,F!GF . Recall

that equations (12)-(14) in section 3.2 indicate that the number and skill mix of workers
impact T#,3BC , T#,D!E and T#,F!GF . We then quantify these impacts by estimating the

following equations:



                   T#,3BC =  ^I + ^A HI-#,3BC + ^J HI-#,F!GF + s#3BC                (23)

             T#,D!E = _I + _A HIN-#,D!E /-#,3BC R + _J HI-#,F!GF + s#D!E            (24)

                                                              F!GF
                    T#,F!GF = bI + bA HIN-#,F!GF /-#,3BC R + s#                     (25)



    The independent variables in equation (23)-(25) tend to be correlated with
unobserved city attributes, e.g. productivity-enhancing unobservable features could
attract workers to settle in the city and subsequently affect population and the skill
composition of workers. Thus, we need to distinguish the wage effects of the number
and skill mix of workers from those of productivity-related unobservable features that
are tied to locations. We use the instrumental variables strategy derived from the
internal logic of the equilibrium sorting model in section 5.2 to deal with the
endogeneity issue. Our instrumental variables provide an exogenous source of variation
in labor supply by skill level in each city and thus identify equation (23)-(25) as labor
demand curves. Importantly, we take this procedure one step further and exploit the
spillovers from high-skilled workers on the marginal products of labor of other groups.
Thus, we include -#,F!GF in the labor demand curve of low-skilled workers of equation
(24), and in the relative labor demand curve of middle- and low-skilled workers in
equation (25).
5.4 Housing Supply
     Recall that cities with stringent land use restriction have a higher housing price
elasticity with respect to population. Since 2004, the supply of construction land has
been strongly restricted in coastal regions of China. We thus regress housing price
HI:# on city population separately for the coastal and inland regions:


                      HI:#,]B^*_^3 = [I,]B^*_^3 + [A,]B^*_^3 -# + s#                 (26)
                      HI:#,!43^4E = [I,!43^4E + [A,!43^4E -# + s#


We also employ the IV strategy derived from the internal logic of equilibrium sorting
model to address the endogeneity of -# . Our instrumental variables strategy provides

an exogenous source of variation in housing demand across cities and thus identifies
equation (26) as a housing supply curve. Recall that the ratio of construction land supply
between the inland and coastal regions increases dramatically since 2004. Thus, we
consider inland China as a benchmark of elastic housing supply in our next
counterfactual exercise.


6. Parameter Estimates
6.1 Mincer Wage Regressions
     Table A7 presents the summary statistics of coefficient estimates from the city-
specific wage regressions described in section 5.1. The average return to middle
education and high education is 24.06% and 58.18%, respectively. On average, wages
increase with age, but do so at a decreasing rate. Female workers earn less than male
workers, and urban hukou holders earn more than rural hukou holders. After getting
city-specific coefficients on worker attributes, we use these coefficients to predict the
counterfactual wage that each worker could earn in every city, which will be employed
when we estimate residential location sorting of workers.
6.2 Estimates from Residential Location Sorting
     Table 1 reports parameter estimates from the first-step discrete choice model.
Marginal utilities of wage are significantly positive for all three educational cohorts.
Since we have included city fixed effects in the first-stage estimation, the six migration
cost variables represent the difference in utility between migrants and natives
independent of city characteristics. The first three dummies measure the disutility with
respect to the physical and psychological costs of leaving one's original city, and their
coefficient estimates are all significantly negative. The coefficient on iA,!# is larger
than iJ,!# and iM,!# in magnitude, which reflects that there exists a fixed cost associated
with internal migration and migration costs rise with distance at a decreasing rate.
     The three interactions between "out of hukou city" dummy and the three city group
dummies capture the overall utility effects associated with hukou restriction and
migrant-specific amenities across cities of different tiers. The coefficient estimates of
the three interactions indicate that migration disutility is lowest for those moving to the
two largest metropolitan areas of China-Beijing and Shanghai, followed by sub-
provincial level cities, and then by provincial capitals and ordinary cities. It is extremely
hard for migrants to apply for local hukou in Beijing and Shanghai, however, the two
cities offer much better migrant-specific amenities in comparison with small cities,
including more equal economic opportunities, intensive migration networks, and a
more inclusive attitude toward migrants. The benefits from desirable migrant-specific
amenities outweigh the disutility from hukou regulation, thus the consequence of
combining these factors is that the overall migration costs are relatively lower in large
metropolitan areas of China. Our results are in accordance with the geographic
distribution of internal migrants in China ­ the 2005 One-Percent Population Census of
China shows that about 31.8% of internal migrants live in the 10 largest cities of China.
Our estimates of mobility costs are consistent with recent work on residential location
sorting in China (Freeman, Liang, Song and Timmins, 2019; Liang, Song, Timmins,
2020).
     The city-and-skill-specific fixed effects obtained from the first-step discrete choice
estimation represent the mean utility from living in every location, regardless of
migration status and wages. We next use housing price adjusted city-and-skill-specific
fixed effects as the dependent variable in our second step estimation of equation (20).
Panel A of Table 2 shows the OLS results from our second-step estimation. The
variables of interest here are the two endogenous amenities, i.e., the number of workers
HI-# and the share of high-skilled workers HI# . At first sight, the coefficients on
HI-# and HI# are both significantly positive for all three educational cohorts. It is,
however, difficult to apply a causal interpretation to these estimates. HI-# and HI#
are likely to be correlated with desirable unobservables, thus their naïve OLS estimates
might be biased.
     Our instrumental strategy proposed in section 5.2.2 affords us the opportunity to
deal with the endogeneity issue. We employ exogenous attributes in all other alternative
locations to leverage variations in the number and the skill mix of workers in city #.
Panel B of Table 2 shows the IV results from our second step estimation. Comparing
the OLS and IV estimates, the coefficients on HI-# change from significantly positive

to significantly negative for all three skill groups, highlighting the importance of
addressing the endogeneity problem. Recall that coefficients on HI-# combine the

agglomeration effects (e.g. services and amenities that only large cities can provide)
and congestion effects (e.g. environmental costs, commuting costs, and higher prices
of local traded commodities) of increasing city size, thus the estimated negative
marginal utility of population from our IV regression indicates that the latter outweighs
the former. The results are consistent with Bayer and Timmins (2005, 2007), which
show that correlation between population and attractive local unobservables can cause
severe upward bias in favor of mistakenly inferring agglomeration effects. Conversely,
the impacts of our instrumental strategy on HI# is to increase the positive spillover

from high-skilled residents for all the education cohorts. This positive spillover could
be attributed to a direct preference for living with high-educated neighbors, and an
indirect preference for the business, services and public good that only accompany
high-educated residences.
6.3 Estimates from Labor Demand
     Panel A and Panel B of Table 3 present the OLS and IV results, respectively, from
the estimation of equations (23) - (25). As reported in Column (1), an increase in the
number of low-skilled workers reduces their mean wage, but is statistically
insignificant. The number of high-skilled workers has a significantly positive impact
on the mean wage of low-skilled workers, and the coefficient estimates from the IV
regression are larger than the corresponding OLS estimates in magnitude.
     Column (2) presents estimates of relative labor demand for middle- and low-
skilled workers. Increasing the ratio between middle- and low-skilled workers
significantly reduces their wage differential. However, increasing high-skilled workers
significantly raises the wage ratio between middle- and low-skilled workers, which
indicates that the productivity spillovers from high-skilled workers is more pronounced
for the middle-skilled group relative to the low-skilled group.
     We next turn to the relative labor demand for high- and low-skilled workers. As
reported in column (3), both OLS and IV results show that the ratio between high- and
low-skilled workers is significantly positively associated with their wage ratio. The
reason is that increasing the ratio between high- and low-skilled workers shifts their
relative labor demand and supply curves outward simultaneously, but the labor demand
curve moves further.
    Overall, our results indicate that a higher concentration of high-skilled workers
could raise the productivity of all education groups. The IV estimates of labor demand
parameters are typically larger than the corresponding OLS estimates in magnitude,
because our instrumental variables provide an exogenous source of variation in skill-
specific labor supply across locations.
6.4 Estimates from Housing Supply
     We use equation (26) in section 5.4 to estimate the housing price elasticity with
respect to population in the inland and coastal regions, respectively. Panel A of Table
4 shows the OLS results and Panel B presents IV estimates. Both OLS and IV estimates
show that the coefficient on city population HI-# is statistically insignificant for the
inland region but significant and positive for the coastal region. Moreover, the IV
estimate of HI-# for the coastal region is substantially higher in magnitude and
significance than the corresponding OLS estimates. Our instrumental variables offer an
exogenous source of variation in housing demand across cities and thus identify
equation (26) as a housing supply curve. Therefore, the difference in housing price
elasticity with respect to population between coastal and inland China, to a large extent,
captures the heterogenous housing supply restriction between the two regions.


7. Counterfactual Welfare Analysis
      High migration costs and stringent housing supply restrictions induced by
common policy incentives inhibit the spatial sorting of workers and reduce the
aggregate social welfare. Two questions naturally arise. What are implications of
reducing migration costs and relaxing housing supply restrictions on welfare and
regional inequality? How do the two kinds of frictions interact with each other in
determining welfare losses? To answer these questions, in this section, we do
counterfactual simulations to quantify the general equilibrium effects associated with
constraints on mobility and housing supply.
7.1 Simulation Procedure
7.11 Specifications in Policy Experiments
      In a series of quantitative exercises, we consider the U.S. as a the benchmark for
low mobility costs (Bryan and Morten, 2019; Tombe and Zhu, 2019) and see inland
China as the benchmark for elastic housing supply. In particular, when simulating the
reduction in migration costs, we lower migration costs in China by 29.6%--a level of
migration costs such that the inter-province migration rate in China reaches the inter-
state migration rate in the U.S.. When simulating the loosening of housing restrictions,
we reduce housing price elasticities with respect to population in coastal China to the
level in inland China26.

26
  We acknowledge that, the difference of internal migration rate between China and the U.S. is not only
driven by high mobility costs in China and the difference of housing price elasticities with respect to
population between coastal and inland regions is not only determined by the stringent construction land
restrictions in coastal regions. These differences might also be influenced by other factors. However, we
only consider the U.S. as a benchmark for low mobility costs and see inland China as a benchmark of
elastic housing supply. Our approach is similar to Bryan and Morten (2019) and Tombe and Zhu (2019),
     We will conduct four counterfactual simulations:
     (i) Reduced migration costs under the current scenario of tight housing constraints.
Specifically, we lower migration costs by 29.6%; we keep current housing price
elasticities with respect to population unchanged both before and after the change in
migration costs.
     (ii) Reduced migration costs under the alternative scenario of loose housing
constraints. In particular, we lower migration costs by 29.6%; we let housing price
elasticities with respect to population in coastal regions equal to those in inland regions
both before and after the change in migration costs.
     (iii) Relaxed housing supply restrictions under the current scenario of high
migration costs. Specifically, we reduce housing price elasticities with respect to
population in coastal China to the level in inland China; we keep current high mobility
costs unchanged both before and after the change in housing constraints.
      (iv) Relaxed housing supply restrictions under the alternative scenario of lowered
migration costs. In particular, we reduce housing price elasticities with respect to
population in coastal China to the level in inland China; we lower mobility costs by
29.6% both before and after the change in housing constraints.
7.12 General Equilibrium Welfare Calculation
     We exploit individuals' re-sorting and the re-equilibration of labor and housing
markets to calculate the Hicksian compensating surplus $?!  and the wage change
<! /<! for each individual associated with the policy change in constraints on mobility
and housing supply:


                               &'(#I tJ#*
                                        I        F!#*
                                          + 31 HI< I     I
                                                      + /!#* + K!#* u                            (27)
                            A
                       = &'(#H   A
                               tJ#H*         F!#H*
                                     + 31 HIN< A              A
                                                   - $?! R + /!#H* + K!#H* u
                                                F!#H*
                                      <! /<! = N< A    F!#*
                                                      -< I    F!#*
                                                            R/< I
                                                                                                  (28)




who consider the U.S. as high mobility benchmark and evaluate the counterfactual reduction in migration
costs in Indonesia and China to the level of the U.S. and Hsieh and Klenow (2009) who use the U.S. as
a high efficiency benchmark and exploit the counterfactual reduction in resource misallocation in China
and India through raising marginal factor products in the two countries to the level of the U.S..
         I
Where NJ#*   F!#*
           , < I     I
                  , /!#*         A
                         R and NJ#H*   F!#H*
                                     , < A      A
                                             , /!#H* R denote equilibrium location-and-skill-

specific mean utilities (which incorporate housing prices, city population, the share of
high-skilled people and all other amenities), equilibrium wages and migration costs
before and after the policy change, respectively 27 . Please note that worker !" new
location # may or may not be same as their initial location #.
     We calculate the expected value of$?! conditional on the individual's location
choice -- that is, using the distributions of tK!#* u that are conditional on the individual's
observed location choice (von Haefen, 2003; Timmins, 2005, 2007). In particular, we
take a 5% random sample of workers and simulate $?! by taking a draw from the
conditional distributions of the vector of error terms K!#* and calculating $?! using Eq.
(27) for each draw. We average these values across 50 draws to calculate the
individual's expected Hicksian welfare measure. To make the welfare effects more
comparable across different cohorts, we also use the status-quo wage to normalize the
individual Hicksian welfare measure $?! /<!I .

7.2 Reduced Migration Costs under Different Scenarios of Housing Restrictions
     We firstly lower migration costs under the current scenario of stringent housing
constraints in China. As shown in Panel A of Table 5, 33.32% of workers relocate to
other cities in response to the decline in migration costs, and 12.55% of workers re-sort
from under-developed inland regions to highly-developed coastal regions. Therefore,
lowering mobility costs allows more workers to have access to the high productivity
and good amenities in coastal cities. Turning to heterogeneity in skills, 14.32% of low-
skilled workers and 12.81% of middle-skilled workers relocate from inland cities to
coastal cities as a result of the reduction of migration costs, whereas only 5.29% of high
skilled workers re-sort from inland to coastal areas. The hukou policy in China is
strongly education-and-skill biased, so that migration costs are substantially higher for
low- and middle-skilled groups. This strongly prevents unskilled workers in under-

27
  Bayer and Timmins (2005) prove that the equilibrium is unique if all endogenous population effects
are congestive, as is the case with the number of workers !; in the utility function (entering directly
through both a direct congestion effect and through housing prices, and own education-specific
population entering through labor demand for low and middle education workers). This is not the case,
however, with the share of highly educated workers, ; , which has an agglomerative impact. Given the
possibility of multiple equilibria, we use observed (i.e., pre-policy) city-and-education specific
populations as a starting point and take the first equilibrium that arises in an iterative algorithm.
developed regions from sorting into developed regions to gain access to higher wages
and better amenities28. Therefore, the re-sorting effects of lowering mobility costs are
more pronounced for those with lower education attainment.
      We then lower migration costs to the same level under the alternative scenario of
loose housing constraints. Panel B of Table 5 presents the resulting re-sorting effects.
When shifting from stringent to relaxed housing supply restrictions, the fraction of
workers resorting from inland to coastal regions in response to lowering mobility costs
increases from 12.55% to 14.66%. With respect to heterogeneity in skills, relaxing
housing constraints magnifies the re-sorting effects of reducing migration costs for low-
and middle-skilled workers but attenuates the effects for the high-skilled group. The
reason is that under elastic housing supply, the re-sorting of people is less likely to drive
up housing prices in those migrant-inflow cities so more under-educated workers are
able to move to those places. The situation is different for high-skilled workers. Their
location choice is less likely to be constrained by housing costs, but their disutility
associated with the congestion effects owing to increased population is stronger than
their under-educated counterparts. Therefore, under relaxed housing constraints, high-
skilled workers are less likely to re-sort to coastal cities.
      In Panel A of Table 6, we calculate workers' Hicksian welfare measures and wage
changes due to the targeted reduction in migration costs under current tight constraints
on housing supply in China. On average, the monetized welfare gain is as large as
$338.68 which accounts for 38.33% of the status-quo wage. We also see a 22.3%
increase in an average worker's wage. The consequent welfare implications incorporate
the direct utility gain from reducing migration costs for current migrants, and the
indirect utility improvement resulting from expanding the number of workers who have
access to high productivity and good amenities in those developed cities. Our findings
are consistent with Au and Henderson (2006) who find that a large fraction of Chinese


28
   Figure A5 illustrates the relationship between local hukou policy and the changes in city population resulting from
lowering mobility costs. The first graph shows that the city hukou index, which measures the difficulty for migrants
to obtain local hukou, is positively associated with our predicted population changes. In China, hukou policy is
endogenously determined by local government. The threshold to apply for a local hukou is usually high in populated
and productive cities which often offer desirable migrant-specific amenities. In other words, the difficulty of
obtaining a local hukou can, to a large extent, capture the level of wages and migrant-specific amenities, thus cities
with a higher hukou index receive a larger inflow of immigrants in response to lowering migration barriers, even
though we reduce the migration costs for all the cities by the same proportion. The rest of the graphs show that the
positive association between hukou index and population changes only exists for low- and middle- skilled groups,
while for the high-skilled workers, we observe no relationship between them. It is much easier for high-skilled
migrants to get a local hukou compared to their unskilled counterparts, thus their location choice is less likely to be
affected by city hukou policy.
cities are undersized due to stringent constraints on mobility, resulting in substantial
economic losses.
     We then quantify welfare effects for different educational cohorts. The average
fraction of monetized welfare gain in wage and the average change in wage are both
higher for low- and middle- skilled workers relative to the high-skilled group. Lower-
education people suffer substantial welfare losses due to the education-and-skill biased
hukou restriction in China, thus they benefit more from reducing migration barriers.
Regarding heterogeneity across regions, the residents who originally live in
underdeveloped inland regions get larger welfare gains than those in coastal regions.
The reason is that, in response to the reduction in migration costs, a large number of
workers who originally reside in inland regions re-sort into coastal regions, where high
productivity and better amenities are centralized.

     Panel B of Table 6 reports the welfare effects of lowering migration costs under
the alternative scenario of relaxed housing supply restrictions. The economic returns to
lowering migration costs depend on the elasticity of housing supply in coastal regions,
which are popular destinations for migrants. The monetized welfare gain associated
with the reduction in migration costs increases significantly from $338.68 under
stringent housing constraints to $374.12 under relaxed housing constraints.         The
increase in the welfare improvement is concentrated on those who live in unproductive
inland regions. When shifting from inelastic to elastic housing supply, the welfare
benefits of lowering migration costs increase substantially from $506.53 to $582.78 for
those living in inland regions, but hardly change for those in coastal regions.
     We further quantify the distributional effects associated with lowering mobility
costs in Panel A and B of Table 7. Owing to the targeted reduction in migration costs,
the 90-10 percentile wage ratio decreases by 16.84% under stringent housing
constraints and by 17.47% under relaxed housing constraints, and the coastal-inland
wage ratio decreases by 22.81% under inelastic housing supply and by up to 27.34%
under elastic housing supply. Therefore, lowering mobility costs could reduce wage
inequality in China, especially for the inequality driven by the regional differences
between unproductive inland and productive coastal regions; such distributional effects
are stronger when restrictions on housing supply are relaxed in coastal cities.
      Both the welfare and distributional impacts of reducing migration costs are more
pronounced under the scenario of elastic housing supply, because relaxing housing
constraints can expand the number of workers re-sorting from unproductive to
productive regions in response to lowering mobility costs and provide more affordable
housing for those re-sorting workers in coastal regions29.
      The interaction of two kinds of frictions in determining the economic effects of
lowering mobility costs have two policy implications. First, in countries with both tight
constraints on mobility and housing supply like China, there are extra welfare gains and
distributional effects from reducing the two kinds of frictions together. Relaxing
housing constraints could increase the welfare benefits of lowering migration costs and
allocate the additional welfare effects to those in underdeveloped areas30. Second, from
the cross-country perspective, the implications of lowering migration costs on welfare
and regional inequality are higher in countries with less stringent housing constraints
like Indonesia than those with both stringent constraints on mobility and housing
supply.
      As mentioned before, political incentives to provide benefits to local residents
could drive up mobility costs. We take examples of Beijing and Shanghai, which
experience the most stringent hukou restrictions, to see how the welfare implications of
lowering mobility costs differ between natives and migrants. We divide people into
three groups--natives, incumbent migrants and newly arriving migrants induced by
lowering mobility costs. Figure A6 illustrates the changes in welfare associated with
lowering mobility costs for workers by migration status. Local people suffer from large
welfare losses, because the inflow of migrant workers drives down their wages and
causes increased congestion. Measured in terms of the fraction of the wage, the


29
   Unaffordable housing is among the most serious concerns for internal migrants in China. Take examples of Beijing
and Shanghai, which are the most popular destination cities for migrants. The annual growth rate of housing price
between 2001 and 2005 is 10.42% in the two cities. Due to the stringent restrictions on housing supply, the annual
housing price growth rate increases sharply to 20% during the period from 2006 to 2010 in Beijing and Shanghai.
The rising housing prices, driven by inelastic housing supply functions, prevent the entry of workers from under-
developed areas and inflict large welfare losses on immigrants who choose to settle in the two cities.
30
   Recently, the Chinese National Development and Reform Commission has promulgated the policy of encouraging
the migrants in urban areas to obtain local hukou and enjoy the local public services. Meanwhile, another policy
released by the State Council has emphasized that the construction land quota should be allocated to those migrant-
inflow cities, the majority of which are located in coastal China. Our counterfactual calculation here clarifies the
potential economic benefits of the recent policy mix in China. For background information, see
http://www.ndrc.gov.cn/zcfb/zcfbtz/201810/t20181010_900750.html           and      http://www.gov.cn/xinwen/2019-
04/08/content_5380457.htm.
monetized welfare losses are large and more pronounced for low-skilled natives.
However, the reduction in migration costs improves the welfare for incumbent
migrants, even though their wages are still driven down by the increased labor supply.
The reason is that their welfare losses due to stringent hukou restrictions decrease
substantially when we simulate the reduction in migration costs. For newly arriving
migrants, we see an even larger increase in their welfare, because they have access to
higher wages and better amenities by moving to Beijing and Shanghai. The pattern of
changes in utility is similar under different levels of housing constraints. Natives suffer
from large welfare losses due to increased numbers of migrant workers. Moreover, the
influx of immigrants in Beijing and Shanghai will drive up the fiscal burden for local
governments. Political incentives to protect the interests of local people and reduce
fiscal expenditures induce local governments in the two cities to impose the most
stringent migration restrictions in China, even though encouraging internal migration
could increase total national welfare.

7.3 Relaxed Housing Constraints under Different Scenarios of Migration Costs .
     We simulate the relaxation of restrictions on housing supply in coastal cities,
which are most productive in China. Panels C and D of Table 5 report the resulting
effects on workers' resorting decisions under scenarios of high and low migration costs,
respectively. In response to the relaxation of housing constraints, only 1.05% of
workers re-sort from unproductive inland regions to productive coastal regions under
current high migration costs, whereas 3.95% of workers relocate to coastal cities under
lowered migration costs. Therefore, lowering migration costs allows more workers to
re-sort from under- to highly-developed regions induced by loosening housing
constraints.
     In both scenarios of high and low mobility costs, the re-sorting implications of
relaxing housing constraints are more pronounced for low- and middle-skilled groups
compared to those with high educational attainment. Unskilled cohorts spend much
more on housing services compared to their high-skilled counterparts, thus their initial
location choice decisions are more restricted by housing constraints, and consequently
they are more likely to re-sort somewhere else due to decreased housing prices.
Moreover, lowering mobility costs increases the re-sorting responses to relaxing
housing supply restrictions for all of the education cohorts.
     The relaxation of housing supply restrictions in coastal China yields a large
welfare improvement but a small wage increase. Panel C of Table 6 shows that, under
current high migration costs, the average monetized welfare gain owing to the
relaxation of housing constraints is $179.04, which consists of approximately 11.61%
of the status-quo wage. However, workers' wages rise by only 0.51% on average,
because, restricted by high mobility costs, only a small fraction of workers re-sort from
unproductive to productive areas in response to the simulated housing policy. The
welfare boost is mostly due to the reduction in housing prices in high density coastal
cities rather than the relocation of workers.
     The economic returns to loosening restrictions on housing supply depend on the
mobility constraints imposed on workers' spatial sorting. By comparison of Panel C
and D in Table 6, we see that, when shifting the scenario from high to low mobility
costs, the average monetized welfare implication of relaxing housing restrictions rises
from $179.04 to $233.77, and only those who live in under-developed inland regions
receive the extra benefits. In the current scenario of high mobility costs, people
originally living in inland regions receive an average monetized welfare gain of $67.41
and a wage increase of only 1.33% due to relaxing housing constraints. However, when
turning to the alternative scenario of low mobility costs, the monetized welfare effect
associated with loosening housing constraints more than doubles for those originally in
inland regions (from $67.41 to $140.613) and the wage effect almost quintuples for
them (from a wage increase of 1.33% to 6.30%). Under the scenario of fewer mobility
restrictions, more people from under-developed inland regions are able to move to
developed coastal regions in response to the relaxation in housing constraints and
experience larger increases in wages and welfare. By contrast, lowering mobility costs
hardly changes the welfare benefits of relaxing housing constraints received by those
coastal residents while having them suffer more wage losses.
     Panel C and D of Table 7 shows the distributional impacts of relaxing housing
constraints. As a result of loosening restrictions on housing supply, the 90-10 percentile
wage ratio decreases by only 0.69% under current high mobility costs and by 3.37%
under low mobility costs, and the coastal-inland wage ratio decreases by 0.79% under
tight mobility constraints and by as large as 11.32% under less mobility constraints.
Therefore, relaxing housing constraints could reduce wage inequality in China,
especially for the inequality driven by the spatial heterogeneity between under-
developed inland and developed coastal regions. Moreover, lowering mobility costs
could increase the effects of relaxing restrictions on housing supply on wage inequality.
     The impacts of relaxing housing constraints on welfare and inequality are both
much stronger under the scenario of low mobility costs. The reason is that lowering
migration costs expands the number of workers who migrate from unproductive to
productive areas in response to the relaxation of housing constraints and has those re-
sorting workers suffer less disutility from the costs associated with migration.
     The interaction of the two kinds of frictions in determining the welfare and
distributional effects of loosening housing constraints provides two policy implications.
First, there are additional welfare gains and stronger distributional effects from
reducing the two types of frictions simultaneously in countries with stringent
constraints on both mobility and housing supply. In particular, lowering migration costs
could increase the welfare impact of relaxing housing constraints, yielding additional
gains to those in the underdeveloped regions. Second, from the cross-country
perspective, the impacts of relaxing housing constraints on welfare and regional
inequality are higher for a free-mobility country like the U.S. compared to countries
with both tight constraints on mobility and housing supply.


8. Conclusion
     In many countries in the world, constraints on mobility and housing supply are
driven by common policy incentives and combine to inhibit workers' spatial sorting. In
this paper, we evaluate the impacts of reducing migration costs and relaxing housing
constraints on workers' re-sorting decisions and quantify the consequent changes in
welfare and regional inequality in the case of China.
     We find strong policy interactions between the two kinds of frictions in
determining the welfare and regional distributional consequences. The implications of
lowering mobility costs on welfare and regional inequality depend on the elasticity of
housing supply in coastal regions which are the popular destinations of internal
migrants. Similarly, the welfare and spatial distributional impacts of relaxing housing
supply restrictions depend upon the mobility constraints imposed on workers. For either
constraint on mobility or housing supply, reducing one type of friction can increase the
welfare and distributional impacts of reducing the other type of friction and allocate the
additional welfare returns to those in under-developed inland regions.
     The interaction of two types of friction has broad policy implications. First, a
policy mix of simultaneously lowering migration costs and relaxing housing supply
restrictions can bring extra economic returns for countries with tight mobility and
housing constraints like China. Second, the implications of lowering migration costs on
welfare and regional inequality are higher in countries with less stringent housing
constraints like Indonesia than they are in countries that combine tight constraints on
mobility with similarly tight constraints on housing supply. Finally, the welfare and
distributional effects of relaxing housing constraints are stronger in a high mobility
country like the U.S. than in countries with both types of frictions.
References:

    Au, C. C. and Henderson, J. V., 2006, "Are Chinese Cities Too Small?", The Review of Economic
Studies, 73(3): 549-576.
    Bayer, P. and Timmins, C., 2005, "On the Equilibrium Properties of Locational Sorting Models",
Journal of Urban Economics, 57(3): 462-477.
    Bayer, P. and Timmins, C., 2007, "Estimating Equilibrium Models of Sorting Across Locations",
The Economic Journal, 117(March): 353-374.
    Bayer, P., Ferreira, F. and Mcmillan, R., 2007, "A Unified Framework for Measuring Preferences
for Schools and Neighborhoods", Journal of Political Economy, 115(4): 588-638.
    Bayer, P., Keohane, N. and Timmins, C., 2009, "Migration and Hedonic Valuation: The Case of Air
Quality", Journal of Environmental Economics and Management, 58(1): 1-14.
    Berry, S., Levinsohn, J. and Pakes, A., 1995, "Automobile Prices in Market Equilibrium",
Econometrica, 63(4): 841-890.
    Bhavnani, R.R. and Lacina, B., 2017. " Fiscal Federalism at Work? Central Responses to Internal
Migration in India", World Development, 93(May): 236-248.
    Bryan, G., Chowdhury, S. and Mobarak, A.M., 2014. "Underinvestment in a Profitable Technology:
The Case of Seasonal Migration in Bangladesh", Econometrica, 82(5): 1671-1748.
    Bryan, G. and Morten, M., 2019, "The Aggregate Productivity Effects of Internal Migration:
Evidence from Evidence From Indonesia", Journal of Political Economy, 127(5):2229-2268.
    Card, D. and Lemieux, T., 2001, "Can Falling Supply Explain the Rising Return to College for
Younger Men? A Cohort-Based Analysis. ", The Quarterly Journal of Economics, 116(2): 705-746.
     Clemens, M. A., Lewis, E. G. and Postel, H. M., 2018, "Immigration Restrictions as Active Labor
Market Policy: Evidence from the Mexican Bracero Exclusion", American Economic Review, 108(6):
1468-1487.
     Combes, P.P., Démurger, S., Li, S. and Wang, J., 2020. "Unequal Migration and Urbanisation Gains
in China", Journal of Development Economics, 142(1): 102328.
     Dahl, G., 2002, "Mobility and the Return to Education: Testing a Roy Model with Multiple
Markets", Econometrica, 70(6): 2367-2420.
    Diamond, R., 2016, "The Determinants and Welfare Implications of US Workers' Diverging
Location Choices by Skill: 1980-2000", American Economic Review, 106(3): 479-524.
    Diamond, R., 2017. "Housing Supply Elasticity and Rent Extraction by State and Local
Governments", American Economic Journal: Economic Policy, 9(1), pp.74-111.
    Freeman, R., Liang, W., Song, R. and Timmins, C., 2019, "Willingness to Pay for Clean Air in
China", Journal of Environmental Economics and Management, 94(3): 188-216.
    Glaeser, E. L., Huang, W., Ma, Y. and Shleifer, A., 2017. "A Real Estate Boom with Chinese
Characteristics", Journal of Economic Perspectives, 31(1): 93-116.
    Glaeser, E. and Gyourko, J., 2018, "The Economic Implications of Housing Supply", The Journal
of Economic Perspectives, 32(1): 3-30.
    Gollin, D., Lagakos, D. and Waugh, M. E., 2014, "The Agricultural Productivity Gap", The
Quarterly Journal of Economics, 129(2): 939-993.
    Hsieh, C. and Klenow, P. J., 2009, "Misallocation and Manufacturing TFP in China and India",
Quarterly Journal of Economics, 124(4): 1403-1448.
    Hsieh, C. and Moretti, E., 2018, "Housing Constraints and Spatial Misallocation", American
Economic Journal: Macroeconomics, 11(2): 1-39.
       Katz, F. L. and Murphy, M. K., 1992, "Changes in Relative Wages, 1963-1987: Supply and Demand
Factors", The Quarterly Journal of Economics, 107(1): 35-78.
       Kinnan, C., Wang, S. and Wang, Y., 2018, "Access to Migration for Rural Households", American
Economic Journal: Applied Economics, 10(4): 79-119.
       Liang, W., Lu, M. and Zhang, H., 2016, "Housing Prices Raise Wages: Estimating the Unexpected
Effects of Land Supply Regulation in China", Journal of Housing Economics, 33(C): 70-81.
       Liang, W., Song, R. and Timmins, C., 2020, " The Role of Migration Costs in Residential Sorting",
Duke University Working Paper.
       Liu, C. and Xiong, W., 2019, "China's Real Estate Market", The Handbook of China's
Financial System, edited by Marlene Amstad, Guofeng Sun, and Wei Xiong, Princeton University
Press, forthcoming.
       Molloy, R., Smith, L. C., and Wozniak, A. 2011, "Internal Migration in the United States." Journal
of Economic Perspectives, 25 (3): 173-96.
       Moretti, E., 2011, "Local Labor Markets", In Card D. and Ashenfelter O.(eds.), Handbook of Labor
Economics, Vol.(4b), New York, Elsevier, 1237-1313.
       Quigley, J. M. and Raphael, S., 2005, "Regulation and the High Cost of Housing in California",
American Economic Review, 95(2): 323-328.
       Roback, J., 1982, "Wages, Rents, and the Quality of Life ", Journal of Political Economy, 90(6):
1257-1278.
       Rosen, S., 1979, "Wages-Based Indexes of Urban Quality of Life", In Mieszkowski P. and
Straszheim M.(eds.), Current Issues in Urban Economics, Baltimore, John Hopkins University Press, 74-
104.
       Rosenthan, S. S. and Strange, W. C., 2004, "Evidence On the Nature and Sources of
Agglomeration", In Henderson J. V. and Thisse J.(eds.)(4), Amsterdam, North-Holland, 211902171.
       Roy, D. A., 1951, "Some Thoughts On the Distribution of Earnings", Oxford Economic Papers,
3(2): 135-146.
       Saiz, A., 2010, "The Geographic Determinants of Housing Supply", The Quarterly Journal of
Economics, 125(3): 1253-1296.
       Timmins, C., 2005, "Estimable Equilibrium Models of Locational Sorting and Their Role in
Development Economics." Journal of Economic Geography, 5(1): 83-100.
       Timmins, C., 2007, "If You Cannot Take The Heat, Get Out Of The Cerrado ... Recovering The
Equilibrium Amenity Cost Of Nonmarginal Climate Change In Brazil", Journal of Regional Science,
47(1):1-25.
       Tombe, T. and Zhu, X., 2019, "Trade, Migration, and Productivity: A Quantitative Analysis of
China", American Economic Review, 109(5): 1843-1872.
       Trostel, P.A., Ronca, J.M., 2009, "A Simple Unifying Measure of State Support for Postsecondary
Education", Research in Higher Education, 50(3): 215­247.
       von Haefen, R., 2003, "Incorporating Observed Choice into the Construction of Welfare Measures
From Random Utility Models", Journal of Environmental Economics and Management, 45(2): 145-165.
       Wu, K., Zhang, L., 2010, "Developmentalist Government and Urban Hukou Threshhold:
Rethinking Hukou System Reform", Sociological Studies (In Chinese) 25(6):59-86.
   Figure 1: The Comparison between China and the U.S.: GDP per Capita in 2005
  Data Source: GDP per Capita in U.S. are drawn from Bureau of Economic Analysis
 (BEA), GDP per Capita in China are drawn from Comprehensive Statistical Data and
 Materials on 55 Years of New China.




  Figure 2: The Comparison between China and the U.S.: Students per School in 2005
 Data Source: The raw data of students per school in U.S. are drawn NCES Education
Statistics and Trostel and Ronca (2009), the raw data of students per school in China are
 drawn from Comprehensive Statistical Data and Materials on 55 Years of New China.
     Figure 3: The Comparison between China and U.S.: Doctors per capita
Data Source: The raw data of doctors per capita in U.S. are drawn from Annual
American Hospital Association (AHA) Survey and Bureau of Economic Analysis
(BEA), The raw data of doctors per capita in China are drawn from Comprehensive
Statistical Data and Materials on 55 Years of New China.




                      Figure 4: City population and Hukou index
       Data Source: Hukou index data are drawn from Wu and Zhang (2010),
        city population data are drawn from China City Statistical Yearbook.
                                     Hukou Index
3.000




2.000




1.000




0.000
           Provincial Capital            Subprovincial City        Beijing and Shanghai

        Figure 5: Average Hukou index for cities of different hierarchies
   Notes: We assign Tianjin and Chongqing to the group of sub-provincial city
                      Data Source: Wu and Zhang (2010)



                            The Share of Migrants
30.00%




20.00%




10.00%




0.00%
          Odinary City          Provincial Capital   Subprovincial City Beijing and Shanghai

      Figure 6: Average share of migrants for cities of different hierarchies
   Notes: We assign Tianjin and Chongqing to the group of sub-provincial city
          Data Source: 2005 One-Percent Population Census of China
                 The Share of Workers Using Mandary as
                           Working Language
90.00%




60.00%




30.00%




0.00%
          Odinary City    Provincial Capital   Subprovincial City Beijing and Shanghai

    Figure 7: Average share of workers using Mandarin as working languages
   Notes: We assign Tianjin and Chongqing to the group of sub-provincial city
                Data Source: China Labor Dynamic Survey 2014




          Figure 8: Coastal share of the total construction land supply
          Data source: China Land and Resource Statistical Yearbook
Figure 9: The ratio of average housing price between inland region and coastal region
            Data source: China Regional Economics Statistical Yearbook




     Figure 10: The share of internal migrants across Chinese provinces in 2005
    Notes: The narrow region on the right of regional boundary is coastal region,
 the rest is inland region. Dark reds indicate larger share of migrants in population.
              Data Source: 2005 One-Percent Population Census of China
               Table 1: Results from the first step discrete choice model of residential location decision
                                                                           Low skill       Middle skill        High skill
                                                                               (1)               (2)                (3)
                            $
ln (Counter-factual Income #<,; )                                          2.088***         1.525***            2.350***
                                                                            (0.104)           (0.126)             (0.225)
Out of hukou city dummy (%=,<; )                                          -7.685***         -7.411***          -7.890***
                                                                            (0.037)           (0.063)            (0.086)
Out of hukou province dummy (%>,<; )                                      -1.914***         -2.066***          -2.535***
                                                                            (0.046)           (0.082)            (0.106)
Out of hukou macro-region dummy (%?,<; )                                  -2.109***         -1.777***          -1.456***
                                                                            (0.042)           (0.075)            (0.088)
Out of hukou city dummy (%=,<; )× Beijing/Shanghai dummy (%@,<; )           2.551***         3.761***           5.777***
                                                                             (0.580)           (0.295)            (0.198)
Out of hukou city dummy (%=,<; )×Sub-provincial city dummy (%A,<; )         1.672***         2.118***           3.400***
                                                                             (0.094)           (0.128)            (0.126)
Out of hukou city dummy (%=,<; )× provincial capital dummy (%B,<; )         1.296***         1.235***           2.638***
                                                                             (0.105)           (0.173)            (0.169)
City-specific fixed effects                                                    Yes               Yes                Yes
         Notes: Low skill denotes workers whose highest degree is below high school. Middle skill denotes
        workers whose highest degree is high school. High skill denotes workers whose highest degree is some
        college or above. Standard errors in parentheses. * p < 0.10, ** p < 0.05, *** p < 0.01.



                                 Table 2: Results from the second step estimation
                Dependent variable:        Low skill            Middle skill                High skill
                J# + 3' HI:#                  (1)                   (2)                        (3)
                                                Panel A: OLS regression
                ()!;                         0.517***                0.496***                 0.0456
                                               (0.114)                (0.110)                 (0.124)
                ();                           0.295**                0.483***                  0.112
                                               (0.138)                (0.132)                 (0.154)
                City controls                    Yes                    Yes                     Yes
                Observations                     285                    285                     285
                R-squared                       0.314                  0.355                   0.120
                                                 Panel B: IV regression
                ()!;                         -1.111***               -1.004**               -2.075***
                                               (0.420)                (0.393)                 (0.474)
                ();                          1.605***                1.529***                1.132**
                                               (0.537)                (0.476)                 (0.505)
                City controls                    Yes                    Yes                     Yes
                Observations                     285                    285                     285
                R-squared                      -0.290                 -0.150                  -0.867
        Notes: !; denotes the number of workers. ; denotes the share of high-skilled workers. Low skill denotes
        workers whose highest degree is below high school. Middle skill denotes workers whose highest degree
        is high school. High skill denotes workers whose highest degree is some college or above. City controls
        include winter temperature, summer temperature, humidity, wind speed, the log of minimum distance to
        three large seaports and the log of city area. Standard errors in parentheses. * p < 0.10, ** p < 0.05, ***
        p < 0.01.
                        Table 3: Results from labor demand function estimation
      Dependent                    Mean wage of             Return to          Return to
      variable:                 low-skilled workers        middle skill        high skill
                                         (1)                    (2)               (3)
                                       Panel A: OLS regression
      ()!;,CDE                        -0.0911
                                     (0.0626)
      ()*!;,F<G /!;,CDE ,                                   -0.0434***
                                                             (0.0132)
      ()*!;,H<IH /!;,CDE ,                                                     0.0435***
                                                                               (0.0141)
      ()!;,H<IH                      0.164***               0.0222***
                                     (0.0478)               (0.00661)
      City controls                     Yes                     Yes               Yes
      Observations                      285                     285               285
      R-squared                        0.121                   0.062             0.048
                                        Panel B: IV regression
      ()!;,CDE                        -0.0870
                                      (0.143)
      ()*!;,F<G /!;,CDE ,                                    -0.136***
                                                             (0.0280)
      ()*!;,H<IH /!;,CDE ,                                                     0.123***
                                                                               (0.0274)
      ()!;,H<IH                      0.252***               0.0652***
                                     (0.0696)                (0.0123)
      City controls                     Yes                     Yes               Yes
      Observations                      285                     285               285
      R-squared                        0.105                  -0.182            -0.087
Notes: !;,CDE denotes the number of low-skilled workers. !;,H<IH denotes the number of high-skilled
workers. !;,F<G /!;,CDE denotes the ratio of middle-skilled to low-skilled workers. !;,H<IH /!;,CDE denotes
the ratio of high-skilled to low-skilled workers. Low skill denotes workers whose highest degree is below
high school. Middle skill denotes workers whose highest degree is high school. High skill denotes
workers whose highest degree is some college or above. City controls include the log of minimum
distance to three large seaports and the log of city area. Standard errors in parentheses. * p < 0.10, ** p <
0.05, *** p < 0.01.
                      Table 4: Results from housing supply function estimation
                Dependent variable:HI:#             Inland               Coastal
                                                      (1)                   (2)
                                       Panel A: OLS regression
                ()!;                                0.0382               0.0738*
                                                   (0.0325)             (0.0425)
                City controls                         Yes                  Yes
                Observations                          184                  101
                R-squared                            0.019                0.357
                                        Panel B: IV regression
                ()!;                               -0.0328              0.211***
                                                   (0.0764)             (0.0704)
                City controls                         Yes                  Yes
                Observations                          184                  101
                R-squared                           -0.012                0.281
Notes: Inland denotes cities in inland China, and costal denotes cities in coastal China. !; denotes the
number of workers. City controls include the log of minimum distance to three large seaports and the log
of city area. Standard errors in parentheses. * p < 0.10, ** p < 0.05, *** p < 0.01.




                           Table 5: Re-sorting of workers: reducing frictions
                                  Share of relocation      Share of relocation workers from
                                     workers (%)         inland regions to coastal regions (%)
                   Panel A. Reducing migration costs under inelastic housing supply
         All workers                    33.321                          12.547
         Low skill                      32.726                          14.317
         Middle skill                   34.054                          12.807
         High skill                     34.798                           5.290
                     Panel B. Reducing migration costs under elastic housing supply
         All workers                    34.680                          14.663
         Low skill                      34.525                          17.099
         Middle skill                   35.269                          14.937
         High skill                     34.600                           4.776
                    Panel C. Relaxing housing constraints under high migration costs
         All workers                     1.384                           1.051
         Low skill                       1.575                           1.300
         Middle skill                    1.366                           1.040
         High skill                      0.653                           0.088
                    Panel D. Relaxing housing constraints under low migration costs
         All workers                     4.987                           3.950
         Low skill                       5.776                           4.870
         Middle skill                    4.706                           3.935
         High skill                      2.216                           0.352
Notes: Low skill denotes workers whose highest degree is below high school. Middle skill denotes
workers whose highest degree is high school. High skill denotes workers whose highest degree is some
college or above.
                       Table 6: Changes in wage and utility: reducing frictions
                                               CV ($)            CV/ wage (%)      Wage /Wage (%)
                   Panel A. Reducing migration costs under inelastic housing supply
    All workers                               338.683               38.328                 22.298
    By skill          Low skill               290.691               41.936                 25.316
                      Middle skill            493.149               44.883                 25.768
                      High skill              346.290               16.482                  6.380
    By region         Coastal region          143.851               19.652                  7.380
                      Inland region           506.527               54.418                 35.151
                     Panel B. Reducing migration costs under elastic housing supply
    All workers                               374.120               39.968                 21.779
    By skill          Low skill               317.030               43.562                 24.495
                      Middle skill            533.590               46.557                 25.174
                      High skill              411.603               18.138                  7.140
    By region         Coastal region          146.172               19.180                  5.769
                      Inland region           582.780               58.999                 36.437
                    Panel C. Relaxing housing constraints under high migration costs
    All workers                               179.037               11.608                  0.505
    By skill          Low skill               123.801               11.162                  0.871
                      Middle skill            320.410               16.938                  0.694
                      High skill              230.430                7.118                 -1.155
    By region         Coastal region          308.598               19.405                 -0.450
                      Inland region            67.413                4.890                  1.326
                    Panel D. Relaxing housing constraints under low migration costs
    All workers                               233.774               14.273                  0.985
    By skill          Low skill               161.285               13.873                  1.266
                      Middle skill            389.293               19.849                  0.234
                      High skill              336.360                9.318                  0.763
    By region         Coastal region          308.556               19.061                 -3.282
                      Inland region           140.613                8.310                  6.302
Notes: Low skill denotes workers whose highest degree is below high school. Middle skill denotes
workers whose highest degree is high school. High skill denotes workers whose highest degree is some
college or above. Coastal region denotes workers who live in the coastal region in the status-quo. Inland
region denotes workers who live in the inland region in the status-quo.




                      Table 7: Changes in wage inequality: reducing frictions
                                     Status-quo            Post-change       Percent Change (%)
                  Panel A. Reducing migration costs under inelastic housing supply
   90-10 percentile wage ratio         5.375                  4.470                -16.836
   Coastal inland wage ratio           1.386                  1.070                -22.819
                   Panel B. Reducing migration costs under elastic housing supply
   90-10 percentile wage ratio         5.300                  4.373                -17.473
   Coastal inland wage ratio           1.349                  0.980                -27.343
                  Panel C. Relaxing housing constraints under high migration costs
   90-10 percentile wage ratio         5.375                  5.338                 -0.692
   Coastal inland wage ratio           1.386                  1.375                 -0.792
                   Panel D. Relaxing housing constraints under low migration costs
   90-10 percentile wage ratio         4.377                  4.229                 -3.373
   Coastal inland wage ratio           1.061                  0.941                -11.322
Appendix A: Additional Tables and Figures




            Figure A1: Labor demand and labor supply for low-educated workers




            Figure A2: Relative labor demand and relative labor supply for
                       middle educated and low educated workers
Figure A3: Relative labor demand and labor supply for
       high educated and low educated workers




         Figure A4: 285 Cities in our sample
Figure A5: Hukou index and the ratio of population change to status-quo city population
        Data source: Hukou index data are drawn from Wu and Zhang (2010)
                                        CV/ wage (%)
90

70

50

30

10

-10

-30    Low      Middle       High     Low      Middle      High       Low      Middle     High
             Local workers                Incumbent migrants           Newly arriving migrants
-50

  Figure A6a: The share of monetized welfare benefits in status-quo wage associated with lowering
  mobility costs for workers in Beijing and Shanghai: Under inelastic housing supply
  Notes: Low, middle and high denote low-, middle- and high-skilled workers, respectively




                                        CV/ wage (%)
90

70

50

30

10

-10

-30    Low      Middle       High     Low      Middle      High       Low      Middle     High
             Local workers                Incumbent migrants           Newly arriving migrants
-50

  Figure A6b: The share of monetized welfare benefits in status-quo wage associated with lowering
  mobility costs for workers in Beijing and Shanghai: Under elastic housing supply
  Notes: Low, middle and high denote low-, middle- and high-skilled workers, respectively
     Table A1: The comparation between U.S. and China: Internal migration rates in 2005
                       China                                        U.S.
  Leave hukou province                 6.05%  Leave birth state                     31.5%
  Leave province living one year ago   0.97%  Leave state living one year ago       2.8%
  Leave province living five years ago 4%     Leave state living five years ago     8.9%
Notes: According to China Labor Dynamic Survey 2014, birth province is the same as hukou province
for 97.33% of population and 95.84% of migrants in China.
Data Source: Migration rates in China are drawn from 2005 One-Percent Population Census of China
and migration rates in U.S. are drawn from Molloy et al. (2011).
                                Table A2: The comparison of points-based hukou policy across Chinese metropolitans
City                                    Beijing                      Shanghai                 Guangzhou                 Shenzhen
Total points required to     It depends on the population 72                             60                             100
obtain local hukou           policy
Education                    Doctoral degree:37 point     Doctoral degree:27 point       College degree and above:      Doctoral degree:100 point
                             Master degree:26 point       Master degrees:24 point        60 point                       Master degrees:90 point
                             College degree:15 point      College degree:21 point        Some college:40 point          College degree:80 point
                             Some college degree:                                        High school degree: 40 point   Some college:60 point
                             10.5 point
Skills                                                    College English Test Band 6    Junior workers: 10 point       Junior workers: 20 point
                                                          or 8: 8 point                  Middle-level workers:          Middle-level workers:
                                                          College English Test Band 4: 30 point                         40 point
                                                          7 point                        High-level workers:            High-level workers:
                                                                                         50 point                       70 point
                                                                                                                        Senior technical worker:
                                                                                                                        100point
                                                                                                                        Junior-level professional
                                                                                                                        skill: 70 point
                                                                                                                        middle-level professional
                                                                                                                        skill: 90 point
                                                                                                                        high-level professional skill:
                                                                                                                        100 point
                           Data source: The official government websites of Beijing, Shanghai, Guangzhou and Shenzhen




                                                                        54
              Table A3: The share of total migrants living in the three major economic circles
                      Region                                The share of total migrants (%)
                      Circum-Bohai-Sea Region                            12.77
                      Yangtze River Delta                                27.43
                      Pearl River Delta                                  27.77
    Notes: The Circum-Bohai-Sea Region includes 13 cities; the Yangtze River Delta includes 26 cities and
    the Pearl River Delta includes 9 cities. The share of total migrants is defined as the share of total cross-
    city migrants in China living in one particular economic circle.




                                        Table A4: Summary statistics
Variable                                       Description                             Mean              SD
                                 Panel A. Individual characteristics
!                                         Annual wage (dollar)                       1223.588        1391.818
Low skill                                  Dummy =1 for below                          0.679           0.467
                                        high school, =0 otherwise
Middle skill                                 Dummy=1 for high                          0.173           0.378
                                            school, =0 otherwise
High skill                             Dummy=1 for some college                        0.148           0.355
                                           or above, =0 otherwise
Migrant                               Dummy=1 if the worker leave                      0.067           0.250
                                         hukou city for more than
                                          6 months, =0 otherwise
                                      Panel B. City characteristics
!"#                                    log (Housing price) (dollar)                     4.204          0.293
$!                                        The number of workers                       584.439         659.003
!                                       The share of workers with                      13.962          7.349
                                   some college or above education (%)
Winter temperature                The average temperature in winter (° F)              9.054           89.70
Summer temperature               The average temperature in summer (° F)               255.7           29.13
Humidity                           The yearly average of humidity (%)                  277.0           1698
Wind                            The yearly average of wind speed (0.1m/s)              203.6           1252
Distance to seaport            The minimum distance to three large sea ports          651.476         415.567
                                      in the mainland of China (km)
Area                                          City area (km2)                        16428.63         21831.57
    Notes:
    (1) &, !"# are translated from RMB into 2005 U.S. dollars.
    (2) The three large seaports in the mainland of China are Tianjin seaport, Shanghai seaport, and Shenzhen
    seaport. These seaports are located at the three major economic circles of China: The Circum-Bohai-Sea
    Region, The Yangtze River Delta, the Pearl River Delta.
    Data Source:
    (1) The raw data of household income, &, and housing price,ln#, are drawn from the 2005 One-Percent
    Population Census of China.
    (2) The raw data of temperature, wind speed, humidity is collected by National Meteorological
    Information Center in China. We calculate these variables based on monthly data.
    (3) The data of Area are drawn from China City Statistical Yearbook.



                                                        55
                         Table A5: Summary statistics by region and city size
             Variable Name           Inland cities   Coastal cities        Difference
             !                         869.123           1646.499         -777.376***
                                      (849.858)         (1748.685)           (4.594)
             Low skill                   0.723             0.627            0.096***
                                        (0.448)           (0.484)             (.002)
             Middle skill                0.151             0.199           -0.048***
                                        (0.358)           (0.399)             (.002)
             High skill                  0.126             0.174           -0.047***
                                        (0.332)           (0.379)            (0.001)
             Migrant                     0.018             0.125           -0.107***
                                        (0.133)           (0.331)            (0.001)
             !"#                         4.097             4.398           -0.301***
                                        (0.253)           (0.260)            (0.032)
             Population                490.174            756.168         -265.995***
                                      (395.278)          (949.371)           (80.21)
Notes: This table shows the heterogeneities of key variables between inland cities and coastal cities, as
well as between small cities and large cites. The definition of each variable is reported in Table A4. I,
Low.edu, Mid.edu, High.edu and Migrant are individual level variables, ln# and Population are city
level variables.




                          Table A6: Results from first Stage IV regression
            Dependent variable:         ln $!       ln $!          ln !          ln !
                                         (1)         (2)            (3)           (4)
            IV for ln $!            -6.925***    -13.93***                     8.332**
                                      (0.620)      (3.201)                      (3.335)
            IV for ln !                           8.012**       -6.632***     -15.71***
                                                   (3.458)        (0.582)       (4.077)
            City controls               Yes          Yes            Yes           Yes
            F-statistic                91.08        85.82          89.43         72.64
            Observations                285          285            285           285
            R-squared                  0.518        0.526          0.487         0.520
Notes: $! denotes the number of workers. ! denotes the share of high education workers. City controls
include ln Distance. Seaport, Winter. temperature, Summer. temperature, Humidity, Wind, and ln Area.
Standard errors in parentheses. * p < 0.10, ** p < 0.05, *** p < 0.01.



            Table A7: Summary of estimated coefficients from mincer wage regressions
              Variables                                     Mean               Std. dev
              High school education                          0.241              0.086
              Some college or above education                0.582              0.233
              Age                                            0.040              0.024
              Age2                                          -0.001              0.000
              Female                                        -0.391              0.159
              Urban hukou                                    0.582              0.151
              Constant                                       6.151              0.572
Notes: This table presents the summary statistics of coefficient estimates from city-specific mincer wage
regression for 285 Chinese cities.




                                                   56
Appendix B: Roy Sorting

     We define "!,# as the probability of worker # selecting to live in city $, and infer
the selection probability in the context of China. We first divide the data into two
categories: stayers, or those who live in their hukou cities, and movers, who have moved
into other cities. We also allocate workers into one of the three education classes: less
than high school, high school, some college or above. We next allocate workers into
two hukou type cells: urban hukou and rural hukou. Within each education-hukou type
cell, we divide stayers into 6 age groups: 25-29, 30-34, 35-49,40-44, 45-49, 50-54.
Within each education-by-hukou type-by-age cell, we further assign stayers into 285
residential cities. Finally, we assign 10,260 data cells for stayers. Since there are fewer
observations for movers, their groupings are relatively more coarse by necessity (Dahl,
2002). We continue to assign movers into one of the six education-by-hukou type
classes. Within each class, we finally allocate movers into one of thirty original
provinces. Overall, we have 180 data cells for movers. Selection probability "!,# is

calculated as the fraction of the population in worker # $ % cell that chooses to live in city
$. Then we augment mincer wage equation by adding selection probability "!,# , and
estimate the wage regression separately for each city using the following equation:


'(!!,# =                                                                                 (29)

+#,%&' + +#,(!) -#._0.1 +  +#,*!+* 2#3_0.1 + 5#$ 6                      -       .
                                                  ! + 7,,# "!,# + 7-,# "!,# +  8!,# 




     ! is a vector of individual attributes, including age, age squared, dummy variables
for hukou types (rural hukou or urban hukou), and dummy variables for gender (male

                                                 :!,# that each individual could earn in
or female). We calculate the counterfactual wage !

every potential location using coefficients estimated by equation (29). Note that we
                                                   -
don't include the Dahl correction terms, "!,# and "!,#                :!,# , because
                                                       when computing !

they only serve as controls for Roy sorting bias. Individual counterfactual wage will be
employed to exploit workers' location sorting in section 6.2.


                                             57
Appendix C: City-Specific Housing Price
     We define the value of the home occupied by individual # in city $, ;!,# , as the

value of the house (for owner-occupied units) or annual rent (for rental units) in our
census data. We assume that ;!,# is a function of a scaling parameter <# specific to city$

and a vector of housing characteristics =! . Then, we estimate the following regression:


'(;!,# = '(<# + >,,/0&,/102*345 ?!,/102*345 + >-,/0&,/102*345 ?!,/102*345 @1%0_A30!

   +>,,#,71!%) ?!,71!%) +  >-,#,71!%) ?!,71!%) @1%0_A30! + 2!$ B + 8!,#
                                                                    8
                                                                                   (30)



where !,/102*345 is a dummy variable that takes the value of 1 for a purchased home
and 0 otherwise; !,71!%) is a dummy variable that takes the value of 1 for self-built

home and 0 otherwise, and @1%0_A30! represents a vector of house age-specific fixed
effects. We allow the parameters on the dummies for purchased home and self-built
home, as well as the two interactions of the dummies with house age to vary with
province (DE@). The 2005 One-Percent Population Census of China records the current
rent in the census year, but the past price of owner-occupied housing if the house was
purchased or self-built. Dwelling characteristics =! describe house age, the number of
rooms, floor area, whether the housing structure is a storied building, whether tap water
is provided, whether a kitchen is provided, and whether there is a bathroom. The city
fixed effect '(<# measures the effective ``price of housing services'' in city $
independent of ownership and housing attributes.
     Table C1 reports the results from the housing price regression of equation (30).
Housing prices decrease with house age and increase with the number of rooms and
floor area. The price of storied buildings is higher than single-story houses. Houses
with tap water, kitchen and bathrooms are more expensive. The city-specific scaling
parameter '(<# measures the city average price of housing services independent of
housing attributes and ownership.




                                           58
                   Table C1: Estimated coefficients from housing price regression
             Dependent variable: !"*",!
             House age                                                          -0.0122***
                                                                                 (0.00124)
             The number of rooms                                                 0.0465***
                                                                                 (0.00133)
             Floor area                                                         0.00561***
                                                                                (0.0000408)
             Storied building                                                     0.486***
                                                                                 (0.00508)
             Tap water                                                            0.243***
                                                                                 (0.00466)
             Kitchen                                                             0.0800***
                                                                                 (0.00643)
             Restroom                                                             0.107***
                                                                                 (0.00557)
             City specific scaling parameter !"#!                                    Yes
             Province dummy × House age dummy × Purchase dummy                       Yes
             Province dummy × House age dummy × Self-build dummy                     Yes
             Observations                                                          166565
             R-squared                                                              0.994
Notes: Standard errors clustered at city level are reported in parentheses. * p < 0.10, ** p < 0.05, *** p <
0.01.




                                                    59
