                              NBER WORKING PAPER SERIES




           INVESTOR EXPERIENCES AND FINANCIAL MARKET DYNAMICS

                                      Ulrike Malmendier
                                        Demian Pouzo
                                       Victoria Vanasco

                                      Working Paper 24697
                              http://www.nber.org/papers/w24697


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                     June 2018




We thank Marianne Andries, Nick Barberis, Dirk Bergemann, Julien Cujean, Xavier Gabaix,
Lawrence Jin, and workshop participants at LBS, LSE, NYU, Pompeu Fabra, Stanford, UC
Berkeley, as well as the ASSA, NBER EFG Behavioral Macro, NBER Behavioral Finance, SITE
(Psychology and Economics segment), SFB TR 15 (Tutzing, Germany) conferences for helpful
comments. We also thank Felix Chopra, Marius Guenzel, Canyao Liu, Leslie Shen, and Jonas
Sobott for excellent research assistance. The views expressed herein are those of the authors and
do not necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2018 by Ulrike Malmendier, Demian Pouzo, and Victoria Vanasco. All rights reserved. Short
sections of text, not to exceed two paragraphs, may be quoted without explicit permission
provided that full credit, including © notice, is given to the source.
Investor Experiences and Financial Market Dynamics
Ulrike Malmendier, Demian Pouzo, and Victoria Vanasco
NBER Working Paper No. 24697
June 2018
JEL No. E03,G02,G11,G12

                                         ABSTRACT

How do macro-financial shocks affect investor behavior and market dynamics? Recent evidence
suggests long-lasting effects of personally experienced outcomes on investor beliefs and
investment but also significant differences across older and younger generations. We formalize
experience-based learning in an OLG model, where different cross-cohort experiences generate
persistent heterogeneity in beliefs, portfolio choices, and trade. The model allows us to
characterize a novel link between investor demographics and the dependence of prices on past
dividends, while also generating known features of asset prices, such as excess volatility and
return predictability. The model produces new implications for the cross-section of asset
holdings, trade volume, and investors' heterogeneous responses to recent financial crises, which
we show to be in line with the data.

Ulrike Malmendier                              Victoria Vanasco
Department of Economics                        Stanford University
549 Evans Hall # 3880                          Department of Economics
University of California, Berkeley             vvanasco@stanford.edu
Berkeley, CA 94720-3880
and NBER
ulrike@econ.berkeley.edu

Demian Pouzo
University of California at Berkeley
530-1 Evans Hall #3880
Berkeley, CA 94720
dpouzo@econ.berkeley.edu
1      Introduction

Recent crises in the stock and housing markets have stimulated a new wave of macro-
finance models of risk-taking. A key challenge, and motivation, has been to find tractable
models of investor expectations that account not only for asset pricing puzzles such as
return predictability (Campbell and Shiller (1988), Fama and French (1988)) and excess
volatility (LeRoy and Porter (1981), Shiller (1981), LeRoy (2005)), but also for micro-
level stylized facts such as investors chasing past performances. As argued by Woodford
(2013), the empirical evidence suggests a need for dynamic models that go beyond the
rational-expectations hypothesis. In line with Woodford’s proposal, models of natural
expectation formation (Fuster, Hebert, and Laibson (2011); Fuster, Laibson, and Mendel
(2010)) and over-extrapolation (Barberis, Greenwood, Jin, and Shleifer (2015); Barberis,
Greenwood, Jin, and Shleifer (2016)) successfully capture a wide range of the stylized
facts. A core feature of these models is that agents over-weigh recent realizations of the
relevant economic variables when forming beliefs.
    Another set of emerging stylized facts, which focuses on the long-lasting effects of
macro-financial shocks and their systematic cross-sectional differences, has been harder
to capture by these approaches. As conveyed by the notion of “depression babies” or the
“deep scars” of the 2008 financial crisis (Blanchard (2012)), macro-economic shocks ap-
pear to alter investment and consumption behavior for decades to come, beyond the time
frame of existing models, and there is significant cross-sectional heterogeneity. Younger
cohorts tend to react significantly more strongly than older cohorts. A growing em-
pirical literature on experience effects documents, for example, that personal lifetime
experiences in the stock-market predict future willingness to invest in the stock market
(Malmendier and Nagel (2011)), and the same for IPO experiences and future IPO in-
vestment (Kaustia and Knüpfer (2008); Chiang, Hirshleifer, Qian, and Sherman (2011)).
There is also evidence of experience effects in non-finance settings, e. g., on the long-term

                                             1
effects of graduating in a recession on labor market outcomes (Oreopoulos, von Wachter,
and Heisz (2012)) or of living in (communist) Eastern Germany to political attitudes
post-reunification (Alesina and Fuchs-Schundeln (2007)).1 In all of these applications,
researchers identify a long-lasting impact of crisis experiences on individual risk-taking
and illustrate their cohort-specific impact.
  Much of the evidence on experience effects pertains directly to stated beliefs, e. g.,
beliefs about future stock returns (in the UBS/Gallup data), about future inflation (in
the Michigan Survey of Consumers), or about the outlook for durable consumption (also
in the MSC).2 A key difference relative to over-extrapolation and related approaches is
that experience-based learning generates cohort-specific differences in beliefs and in their
updating after a common shock. While more evidence on the exact process of household-
level learning is needed (see the discussions in Campbell (2008) and Agarwal, Driscoll,
Gabaix, and Laibson (2013)), the over-weighing of personal experiences appears to be
a pervasive and robust psychological phenomenon affecting belief formation, which is
related to availability bias as first put forward by Tversky and Kahneman (1974), as well
as the extensive evidence on the different effects of description versus experience.3
  This growing empirical literature on experience effects and its strong psychological un-
derpinning raise the question whether experience-based learning and the implied dynamic
cross-cohort differences have the potential to explain aggregate dynamics. For example,
which generations invest in the stock market and how much? What are the dynamics of
stock market investment? How will the market react to a macro-shock?
  Our paper develops an equilibrium model of asset markets that formalizes experience-
based learning and the resulting belief heterogeneity across investors. The model clarifies
   1
      See also Giuliano and Spilimbergo (2013), who relate the effects of growing up in a recession to
redistribution preferences.
   2
      Cf. Malmendier and Nagel (2011), Malmendier and Nagel (2016), Malmendier and Shen (2017).
   3
     See, for example, Weber, Böckenholt, Hilton, and Wallace (1993), Hertwig, Barron, Weber, and
Erev (2004), and Simonsohn, Karlsson, Loewenstein, and Ariely (2008).



                                                  2
the channels through which past realizations affect future market outcomes by pinning
down the effect on investors’ own belief formation and the interaction with other genera-
tions’ belief formation. We derive the aggregate implications of learning from experience
and the implied cross-sectional differences in investor behavior. To our knowledge, this
model is the first to tease out the tension between experience effects and recency bias,
including the stronger reactions of the young than the old to a given macro shock. It aims
to provide a guide for testing to what extent experience-based learning can enhance our
understanding of market dynamics and of the long-term effect of demographic changes.
  The key model features are as follows. We consider a stylized overlapping generations
(OLG) equilibrium model. Agents have CARA preferences and live for a finite number of
periods.4 During their lifetimes, they choose portfolios of a risky and a risk-free security.
We initially assume that agents maximize their per-period payoffs, i. e., are myopic.5 The
risky asset is in unit net supply and pays a random dividend every period. The risk-free
asset is in infinitely elastic supply and pays a fixed return. Investors do not know the
true mean of dividends, but learn about it by observing the history of dividends.
  We begin by characterizing the benchmark economy in which agents know the true
mean of dividends. In this setting, there is no heterogeneity, and thus the demands of
all active market participants are equal and constant over time. Furthermore, there is a
unique no-bubble equilibrium with constant prices.
  We then introduce experience-based learning. The assumed belief formation process
captures the two main empirical features of experience effects: First, agents over-weigh
their lifetime experiences. Second, their beliefs exhibit recency bias. We identify two
channels through which past dividends affect market outcomes. The first channel is the
   4
     The use of CARA preferences with Normal shocks allows us to keep our theoretical analysis tractable,
and is widely used in finance for this reason (see Vives (2010)).
   5
     Myopic agents omit the correlation between their next-period payoff and their continuation value
function. This yields behavior that is analogous to the commonly used assumption of short-term traders
(see Vives (2010)). In Section 7, we remove the myopia assumption and show that the first-order effects
of experience-based learning are identical to those derived for myopic agents.


                                                   3
belief-formation process: shocks to dividends shape agents’ beliefs about future dividends.
Hence, individual demands depend on personal experiences, and the equilibrium price is
a function of the history of dividends observed by the oldest market participant. The
second channel is the generation of cross-sectional heterogeneity: different lifetime experi-
ences generate persistent differences in beliefs. Agents “agree to disagree.” Furthermore,
younger cohorts react more strongly to a dividend shock than older cohorts as it makes
up a larger part of their lifetimes. A positive shock induces younger cohorts to invest rel-
atively more in the risky asset, while a negative shock tilts the composition towards older
cohorts. Thus, the model has implications for the time series of trade volume: Changes
in the level of disagreement between cohorts lead to higher trade volume in equilibrium.
  The model captures an interesting tension between heterogeneity in personal expe-
riences (which generates belief heterogeneity across cohorts) and recency bias (which
reduces belief heterogeneity). When there is strong recency bias, all agents pay a lot of
attention to the most recent dividends. Thus, their reactions to a recent shock are similar.
Price volatility increases, while price auto-correlation and trade volume decrease. The
opposite holds when the recency bias is weak, and agents form their beliefs using their ex-
perienced history. Hence, the reaction of prices and trade volume to changes in dividends
is tightly linked to the relative extent of recency bias versus experience-based differences
across cohorts in a given market, which are in turn influenced by demographics.
  We explore the connection between market demographics and the dependence of prices
on past dividends by analyzing the effect of a one-time change in the fraction of young
agents that participate in the market. We find that the demographic composition of
markets significantly influences the dependence of prices on past dividends. For example,
when the market participation of the young relative to the old in the market increases,
the relative reliance of prices on more recent dividends increases. This is in line with
evidence in Cassella and Gulen (2015) who find that the level of extrapolation in markets


                                             4
is positively related to the fraction of young traders in that market.
  We then turn to several tests of the empirical implications of our model. First, we show
that the model accommodates several key asset pricing features identified in prior liter-
ature. We follow the approach in Campbell and Kyle (1993) and Barberis, Greenwood,
Jin, and Shleifer (2015) to contrast CARA-model moments with the data. We show the
CARA-model analogues of return predictability (Campbell and Shiller (1988)) and of
predictability of the dividend-price ratio. This predictability of future price changes (and
dividend-price ratio changes) stems solely from the experience-based learning mechanism
rather than, say, a built-in dependence on dividends or past returns, and it depends on
the demographic structure of the market. Similarly, the model generates excess volatility
in prices and price changes as established by LeRoy and Porter (1981), Shiller (1981),
and LeRoy (2005), above and beyond the stochastic structure of the dividend process.
  Experience-based learning generates new predictions for the cross-section of asset hold-
ings and trade volume, which we test in the data. Using the representative sample of
the Survey of Consumer Finance (SCF), merged with data from the Center for Research
in Security Prices (CRSP) and historical data on stock-market performance, we first
replicate and extend the evidence in Malmendier and Nagel (2011) on stock-market par-
ticipation. We show that cross-cohort differences in lifetime stock-market experiences
predict cohort differences in stock-market participation and in the fraction of liquid as-
sets invested in the stock market. In other words, cross-cohort differences both on the
extensive and on the intensive margin of stock market participation vary over time as
predicted by the time series of cross-cohort differences in lifetime experiences. We then
turn to the predictions regarding trade volume, and show that the de-trended turnover
ratio is strongly correlated with differences in lifetime market experiences across cohorts.
That is, changes in the experience-based level of disagreement between cohorts predict
higher abnormal trade volume, as predicted by the model.


                                             5
  As the final step in our analysis, we argue that our qualitative results are still present
when we remove the myopic-agents assumption. We consider a version of our model where
agents re-balance their portfolios every period to maximize their final-period consump-
tion.6 The dynamic set-up allows us to analyze how hedging concerns and lifetime-horizon
effects interact with experience-based learning. Prior literature has shown that, in a
rational-expectations linear equilibrium, the agents’ multi-period investment problem can
be partitioned into a sequence of one-period ones (Vives (2010)). Under experience-based
learning, such partitioning is no longer possible. However, exploiting the CARA-Gaussian
setup, we are able to show that the demand of experience-based learners coincides with
the one in a different static problem where dividends are drawn from a modified Gaussian
distribution. That is, we can still partition the multi-period investment problem into a
sequence of one-period problems, albeit with a probability distribution of dividends that
differs from the original one. This latter result might also be of interest as an independent
technical contribution in solving belief dependencies beyond our specific model proposed.

  Related Literature. There is a wide literature on the role of learning in explaining
asset pricing puzzles. Most closely related, Cogley and Sargent (2008) propose a model
in which the representative consumer uses Bayes’ theorem to update estimates of tran-
sition probabilities as realizations accrue. As in our paper, agents use less data than
a “rational-expectations-without-learning econometrician” would give them. There are
two important differences in our setup. First, agents are not Bayesian. Second, different
cohorts have different, finite experiences. Consequently, observations during an agent’s
lifetime have a non-negligible effect on beliefs and generate cross-cohort heterogeneity.
  Our paper also relates to the work on extrapolation by Barberis, Greenwood, Jin,
and Shleifer (2015) and Barberis, Greenwood, Jin, and Shleifer (2016). They consider a
consumption-based asset pricing model with both “rational” and “extrapolative” agents.
   6
     This approach to modeling dynamic portfolio choices is again following a widely used approach in
the literature, see Vives (2010).


                                                 6
The latter believe that positive price changes will be followed by positive changes. In
contrast, the heterogeneity in extrapolation in our model is linked to the demographic
structure of the market. In addition, while cross-sectional heterogeneity in their model
arises from the presence of both “rational” and “extrapolative” infinitely-lived agents,
in our model, it results from the different experiences of different finitely-lived cohorts.
This allows us to generate predictions about the cross-section of asset holdings and the
relation between extrapolation and demographics in line with the data.
  More generally, our paper relates to the large asset-pricing literature that departs from
the correct-beliefs paradigm. For instance, Barsky and DeLong (1993), Timmermann
(1993), Timmermann (1996), Adam, Marcet, and Nicolini (2012) study the implications of
learning and Cecchetti, Lam, and Mark (2000) and Jin (2015) of distorted beliefs for stock-
return volatility and predictability, the equity premia, and booms and busts in markets.
At the same time, our approach is different from asset pricing models with asymmetric
information, as surveyed in Brunnermeier (2001). While in these models agents want
to learn the information their counter-parties hold, in our model of experienced-based
learning, information is available to all agents at all times.
  Finally, there are contemporaneous papers on learning in OLG models (Collin-Dufresne,
Johannes, and Lochstoer (2016), Schraeder (2015)). Most closely related, Ehling, Graniero,
and Heyerdahl-Larsen (2015) explore the role of experience in portfolio decisions and as-
set prices in a complete-markets setting. They focus on trend chasing and the negative
relation between beliefs about expected returns and realized future returns, as shown by
Greenwood and Shleifer (2014). In our incomplete-markets setting, instead, we study the
cross-section of asset holdings and the relation between demographics, pricing, and trad-
ing dynamics. Our model futher incorporates recency bias in agent’s beliefs formation.
  There is also a large literature that proposes other mechanisms, such as borrowing
constraints or life-cycle considerations, as the link from demographics to asset prices and


                                              7
other equilibrium quantities. We view these other mechanisms as complementary to our
paper. They are omitted for the sake of tractability of the model.
    The remainder of the paper first presents the model setup and the notion of experience-
based learning in Section 2. We illustrate the mechanics of the model in a simplified
setting in Section 3. The main results are in Section 4. Section 5 extends the model
to study demographic shocks. Section 6 present empirical implications. We remove the
myopia assumption in Section 7. Section 8 concludes. All proofs are in the Appendix.



2      Model Set-Up

Consider an infinite-horizon economy with overlapping generations of a continuum of
risk-averse agents. At each point in time t ∈ Z, a new generation is born and lives for q
periods, q ∈ {1, 2, 3, ...}. Hence, there are q + 1 generations alive at any t. The generation
born at t = n is called generation n. Each generation has a mass of q −1 identical agents.
    Agents have CARA preferences with risk aversion γ. They can transfer resources
across time by investing in financial markets. Trading takes place at the beginning of
each period. At the end of the last period of their lives, agents consume the wealth they
have accumulated. We use nq to indicate the last time at which generation n trades,
nq = n + q − 1. (If the generation is denoted by t we use tq .) Figure 1 illustrates the time
line of this economy for two-period lived generations (q = 2).
    There is a risk-free asset, which is in perfectly elastic supply and has a gross return
of R > 1 at all times. And there is a single risky asset (a Lucas tree), which is in unit
net supply and pays a random dividend dt ∼ N (θ, σ 2 ) at time t. To model uncertainty
about fundamentals, we assume that agents do not know the true mean of dividends θ
and use past observations to estimate it. To keep the model tractable, we assume that
the variance of dividends σ 2 is known at all times.



                                              8
  For each generation n ∈ Z, the budget constraint at any time t ∈ {n, ..., n + q} is


                                      Wtn = xnt pt + ant ,                                  (1)


where Wtn denotes the wealth of generation n at time t, xnt is the investment in the risky
asset (units of Lucas tree output), ant is the amount invested in the riskless asset, and pt
is the price of one unit of the risky asset at time t. As a result, wealth next period is


               n
             Wt+1 = xnt (pt+1 + dt+1 ) + ant R = xnt (pt+1 + dt+1 − pt R) + Wtn R.          (2)


  We denote the excess payoff received in t + 1 from investing at time t in one unit of the
risky asset, relative to the riskless asset, as st+1 ≡ pt+1 + dt+1 − pt R. This is analogous
                                                                n
to the equity premium in our CARA-model. Using this notation, Wt+1 = xnt st+1 + Wtn R.
  We assume that agents maximize their per-period utility (i. e., are myopic). This
assumption simplifies the maximization problem considerably and highlights the main
determinants of portfolio choice generated by experience-based learning. In Section 7, we
show that the same determinants are at work when this assumption is removed.
  For a given initial wealth level Wnn , the problem of a generation n at each time t ∈
{n, ..., nq } is to choose xnt to maximize Etn [− exp(−γWt+1
                                                          n
                                                             )], and hence


                            xnt ∈ arg max Etn [− exp(−γxst+1 )] .                           (3)
                                      x∈R



where Etn [·] is the (subjective) expectation with respect to a Gaussian distribution with
variance σ 2 and a mean denoted by θtn . We call θtn the subjective mean of dividends, and
we define it below. Note that, when xnt is negative, generation n is short-selling.




                                               9
                    t                   t+1                t+2              t+3         t+4


              (t − 2)-cohort        (t + 1)-cohort    (t + 1)-cohort
                 consumes        is born and trades       trades



             (t − 1)-cohort        (t − 1)-cohort     (t + 2)-cohort
                 trades               consumes            trades



                 t-cohort             t-cohort           t-cohort      (t + 3)-cohort
            is born and trades         trades           consumes           trades


       Figure 1: A time line for an economy with two-period lived generations, q = 2.


2.1      Experience-Based Learning

In this framework, experienced-based learning (EBL) means that agents over-weigh re-
alization observed during their lifetimes when forecasting dividends, and that they tilt
the excess weights towards the most recent observations. For simplicity, we assume that
agents only use observations realized during their lifetimes.7 That is, even though they
observe the entire history of dividends, they choose to disregard earlier observations.8
  EBL differs from reinforcement learning-type models in two ways. First, as already
discussed, EBL agents understand the model and know all the primitives except the
mean of the dividend process. Hence, they do not learn about the equilibrium, they learn
in equilibrium. Second, EBL is a passive learning problem in the sense that players’
actions do not affect the information they receive. This would be different if we had,
say, a participation decision that links an action (participate or not) to the type of data
obtained for learning. We consider this to be an interesting line to explore in the future.
  We construct the subjective mean of dividends of generation n at time t following the
   7
    We only need agents to discount pre-lifetime relative to lifetime observations for our results to hold.
   8
    In our full-information setting, prices do not add any additional information. While it is possible
to add private information and learning from prices to our framework, these (realistic) feature would
complicate matters without necessarily adding new intuition.




                                                            10
empirical evidence Malmendier and Nagel (2011):

                                         age
                                         X
                                 θtn ≡         w(k, λ, age)dt−k ,                                   (4)
                                         k=0


where age = t − n, and where, for all k ≤ age,

                                            (age + 1 − k)λ
                           w(k, λ, age) = Page               0 λ
                                                                                                    (5)
                                           k0 =0 (age + 1 − k )



denotes the weight an agent aged age assigns to the dividend observed k periods earlier,
and w(k, λ, age) ≡ 0 for all k > age. The denominator in (5) is a normalizing constant
that depends only on age and on the parameter that regulates the recency bias, λ. For
λ > 0, more recent observations receive relatively more weight, whereas for λ < 0 the
opposite holds. Here are three examples of possible weighting schemes:

Example 2.1 (Linearly Declining Weights, λ = 1). For λ = 1, weights decay linearly as
the time lag increases, i. e., for any 0 ≤ k, k + j ≤ age,

                                                                      j
                 w(k + j, 1, age) − w(k, 1, age) = − Page                      0
                                                                                  .
                                                             k0 =0 (age + 1 − k )



Example 2.2 (Equal Weights, λ = 0). For λ = 0, lifetime observations are equal-
                                                            1
weighted, i. e., for any 0 ≤ k ≤ age, w(k, 0, age) =      age+1
                                                                .

Example 2.3. For λ → ∞, the weight assigned to the most recent observation converges
to 1, and all other weights converge to 0, i. e., for any 0 ≤ k ≤ age, w(k, λ, age) → 1{k=0} .

                                                      Page
  Observe that by construction, θtn ∼ N (θ, σ 2                           2
                                                        k=0 (w(k, λ, age)) ).   Hence, θtn does not
                                                                           Page                 2
necessarily converge to the truth as t → ∞; it depends on whether             k=0 (w(k, λ, age))    →
0. This in turn depends on how fast the weights for “old” observations decay to zero (i. e.,
how small λ is). When agents have finite lives, convergence will not occur.


                                                 11
  We conclude this section by showing a useful property of the weights, which is used in
the characterization of our results.

Lemma 2.1 (Single-Crossing Property). Let age0 < age and λ > 0. Then the function
w(·, λ, age) − w(·, λ, age0 ) changes signs (from negative to non-negative) exactly once over
{0, ..., age0 + 1}.


2.2       Comparison to Bayesian Learning

To better understand the experience-effect mechanism, we compare the subjective mean
of EBL agents to the posterior mean of agents who update their beliefs using Bayes rule.
We consider two cases: Full Bayesian Learning (FBL), wherein agents use all the available
observations to form their beliefs; and Bayesian Learning from Experience (BLE), where
agents only use data realized during their lifetimes.

Full Bayesian Learners. To illustrate the comparison of EBL and FBL in a common
sample, just for this analysis, we start the economy at an initial time t = 0, since FBL use
all the available observations since “the beginning of time.” Then, all generations of FBL
agents consider all observations since time 0 to form their belief. We denote the prior of
FBL agents as N (m, τ 2 ). For simplicity, all generations have the same prior, though the
analysis can easily be extended to heterogeneous Gaussian priors across generations.9
  The posterior mean of any generation alive at time t, denoted by θ̂t , is given by

                                                                     t
                                                                                   !
                                          −2              −2
                                          τ          σ t            1X
                           θ̂t =               m + −2                         dk       .
                                   τ −2     −2
                                          +σ t    τ + σ −2 t        t   k=0


The belief of an FBL agent is a convex combination of the prior m and the average of all
observations dk realized since time 0. The key difference to EBL agents is that differences
in personal experiences do not play a role: there is no heterogeneity in beliefs, and all
   9
       The assumption of Gaussianity is also not needed but simplifies the exposition greatly.


                                                     12
generations alive in any given period have the same belief about the mean of dividends. In
addition, beliefs of FBL agents are non-stationary, i. e., they depend on the time period.
As t → ∞, the posterior mean converges (almost surely) to the true mean. That is,
with FBL the implications of learning vanish as time goes to infinity. With EBL, this is
not true. Since agents have finite lives and learn from their own experiences, our model
generates learning dynamics even as time diverges.

Bayesian Learners from Experience. For BLE agents, the situation is different. We
assume again that each generation has a prior N (m, τ 2 ) when they are born. Here, the
posterior mean of generation n at period t = n + age, denoted by θ̃tn , is given by

                                                                               t
                                                                                      !
                      τ −2                 σ −2 (age + 1)               1    X
          θ̃tn = −2                m +                                           dk       .
                τ + σ −2 (age + 1)     τ −2 + σ −2 (age + 1)         age + 1 k=n

The belief of a BLE generation is a convex combination of the prior m and the average
of (only) the lifetime observations dk available to date. Note that this average coincides
with the belief θtn of experience-based learners when λ = 0. In this case, the posterior
mean of BLE agents differs from the subjective mean of EBL agents only due to the
presence of the prior. As a result, if the prior of BLE agents is diffuse, i. e., τ → ∞, then
  n                       n
θ̃n+a coincides with the θn+a of EBL agents with λ = 0. The same is true as age → ∞.



2.3    Equilibrium Definition

We now proceed to define the equilibrium of the economy with EBL agents.

Definition 2.1 (Equilibrium). An equilibrium is a demand profile for the risky asset
{xnt }, a demand profile for the riskless asset {ant }, and a price schedule {pt } such that:

  1. Given the price schedule, {(ant , xnt ) : t ∈ {n, ..., nq }} solve the generation-n problem.

                                               1
                                                   Pt
  2. The market clears in all periods: 1 =     q    n=t−q+1   xnt for all t ∈ Z.

                                              13
We focus the analysis on the class of linear equilibria, i. e., equilibria with affine prices:

Definition 2.2 (Linear Equilibrium). A linear equilibrium is an equilibrium wherein
prices are an affine function of dividends. That is, there exists a K ∈ N, α ∈ R, and
βk ∈ R for all k ∈ {0, ..., K} such that

                                                K
                                                X
                                     pt = α +         βk dt−k .                              (6)
                                                k=0


Benchmark with known mean of dividends. For the sake of benchmarking our
results for EBL agents, we characterize equilibria in an economy where the mean of
dividends, θ, is known by all agents, i. e., Etn [dt ] = θ ∀ n, t. In this scenario, there are no
disagreements across cohorts, and the demand of any cohort trading at time t is


                             xnt ∈ arg max E [− exp(−γxst+1 )] .                             (7)
                                        x∈R



The solution to this problem is standard and given by

                                                E [st+1 ]
                                        xnt =                                                (8)
                                                γV [st+1 ]

for all n ∈ {t − q + 1, ..., t}, and zero otherwise. Since there is no heterogeneity in cohorts’
demands and there is a unit supply of the risky asset, in any equilibrium, xnt = 1 for all
n ∈ {t − q + 1, ..., t}, and zero otherwise. Furthermore, there exists a unique bubble-free
                                                                  θ−γσ 2
equilibrium with constant prices pt = P ∀t where P =               R−1
                                                                         .



3     Illustration: A Toy Model

To illustrate the mechanics of the model, we first highlight the main results of the paper
in a simple environment, namely, for q = 2. We will solve the model for any q > 1 in the


                                                14
next section, and the non-myopic case in Section 7.
  In the toy model with q = 2, there are three cohorts alive at each point in time: a
young cohort, which enters the market for the first time; a middle-aged cohort, which is
participating in the market for the second time; and an old cohort, whose agents simply
consume the payoffs from their lifetime investments. At time t, the problem of generations
n ∈ {t, t − 1} is given by (3). It is easy to show that their demands for the risky asset are

                                                Etn [st+1 ]
                                        xnt =                .
                                                γVtn [st+1 ]

  As one of our first key results in Section 4, we will show that (i) prices depend on
the history of dividends, and (ii) this price predictability is limited to the past dividends
observed (experienced) by the oldest generation trading in the market. In other words,
we show that K = q − 1 in equation (6). Anticipating this result here for q = 2, we have


                                    pt = α + β0 dt + β1 dt−1 .                           (9)


  The dependence of prices on past dividends is an important feature of our model,
which is shared by many models of extrapolation and learning. A distinct feature of our
model is that this dependence is intrinsically linked to the demographic structure of the
economy. It matters which generations are participating in the market and how much.
  The cross-sectional differences in lifetime experiences, and the resulting cross-sectional
differences in beliefs, determine cohorts’ trading behavior. Given the functional form for
prices, we can re-write the demands of both cohorts that are actively trading as

                                α + (1 + β0 )Ett [dt+1 ] + β1 dt − pt R
                         xtt =
                                          γ (1 + β0 )2 σ 2
                                α + (1 + β0 )Ett−1 [dt+1 ] + β1 dt − pt R
                       xt−1
                        t     =                                           .
                                            γ (1 + β0 )2 σ 2


                                                 15
The difference between cohorts’ demand arises from their different beliefs about future
dividends, Ett [dt+1 ] and Ett−1 [dt+1 ], given by


                           Ett [dt+1 ] = dt ,
                                          λ                  
                          t−1                 2            1
                         Et [dt+1 ] =             dt +            dt−1 .
                                           1 + 2λ        1 + 2λ
                                         | {z }        | {z }
                                           w(0,λ,1)      w(1,λ,1)



  These formulas illustrate the mechanics of EBL and the cause of heterogeneity among
agents. In the simplified setting, the younger generation has only experienced the divi-
dend dt and expects the dividends to be identical in the next period. The older generation,
having more experience, incorporates the previous dividend in their weighing scheme. An
implication of these formulas is that the younger generations react more optimistically
than older generations to positive changes in recent dividends, and more pessimistically
to negative changes. In Section 4.2, we show that this result continues to hold in the
general model. We also see that belief heterogeneity is increasing in the change in divi-
dends, |dt − dt−1 |, and decreasing in the recency bias, λ. In Section 4.3, we exploit this
observation to link movements in the volume of trade to belief disagreements.
  We now impose the market clearing condition, 21 (xtt + xt−1
                                                          t ) = 1, to derive the equi-

librium price given these demands. We use the method of undetermined coefficients to
solve for {α, β0 , β1 }. Setting the constants and the terms that multiply dt and dt−1 to
zero, we obtain a system of equations whose solution determines the price constant and




                                                  16
the loadings of present and past dividends on prices,

                                    γ(1 + β0 )2 σ 2
                              α=−                   ,                                           (10)
                                        R−1
                                           2R2
                             β0 =                              − 1,                           (11)
                                                          2λ
                                  (R − 1) 1 + 2R − 1+2       λ
                                                       
                                                  2λ
                                       R 1 − 1+2      λ
                             β1 =                             .                               (12)
                                                          2λ
                                  (R − 1) 1 + 2R − 1+2λ


    These solutions illustrate how the price loadings on past dividends depend on the de-
mographics of the economy and on the magnitude of the recency bias. It is easy to derive
                                                                    1
the unconditional price volatility, which is σ(pt ) = (β02 +β12 ) 2 σ, and price auto-correlation,
which is ρ(pt , pt+j ) = β0 β1 for j = 1 and ρ(pt , pt+j ) = 0 for j > 1. The variance of prices
is increasing in the recency bias λ while the price auto-correlation is decreasing in the re-
cency bias. The intuition is s traightforward: as the recency bias increases, prices become
                                                     ∂β0
more responsive to the most recent dividend,         ∂λ
                                                           > 0, increasing price volatility, and less
                                 ∂β1
responsive to past dividends,    ∂λ
                                       < 0, decreasing price autocorrelation. In Section 5, we
present an enriched version of the model with demographic shocks and discuss how these
price loadings vary with the demographic structure of the economy.



4      Results for General Model

We now return to the general case (i. e., allow for any q > 1) and characterize the
portfolio choices and resulting demands for the risky asset of the different cohorts when
agents exhibit EBL. We impose affine prices, then use market clearing to verify the affine
prices guess, and fully characterize demands and prices. Deriving the results in the
general model allows us to discuss in more detail the relation between demographics,
cross-sectional asset holdings, and market dynamics. We obtain testable predictions,


                                                17
which we bring to the data in Section 6.


4.1    Characterization of Equilibrium Demands and Prices

For any s, t ∈ Z, let ds:t = (ds , ..., dt ) denote the history of dividends from time s up to
time t. For simplicity and WLOG, we assume that the initial wealth of all generations
is zero, i.e., Wnn = 0 for all n ∈ Z. At time t ∈ {n, ..., nq }, an agent of generation n
determines her demand for the risky asset maximizing Etn [− exp (−γxst+1 )], as in (3).
  The model set-up allows us to derive a standard expression for risky-asset demand:

                                       PK
Proposition 4.1. Suppose pt = α+          k=0   βk dt−k with β0 6= −1. Then, for any generation
n ∈ Z trading in period t ∈ {n, ..., nq }, demands for the risky asset are given by

                                      Etn [st+1 ]     Etn [st+1 ]
                              xnt =               =                 .                     (13)
                                      γV [st+1 ]    γ(1 + β0 )2 σ 2

  The expression for the risky-asset demands in equation (13) allows us to derive equi-
librium prices. Note that equation (13) implies that demands at time t are affine in
dt−K:t . It is easy to see, then, that beliefs about future dividends are linear functions of
the dividends observed by each generation participating in the market, and thus prices
depend on the history of dividends observed by the oldest generation in the market:

Proposition 4.2. The price in any linear equilibrium is affine in the history of dividends
observed by the oldest generation participating in the market, i.e., for any t ∈ Z

                                             q−1
                                             X
                                 pt = α +          βk dt−k , with                         (14)
                                             k=0




                                                 18
                                                      1                γσ 2
                                   α = −                         2                              (15)
                                                      wj               R−1
                                           1 − q−1
                                               P
                                                 j=0 Rj+1
                                          Pq−1−k wk+j
                                            j=0      Rj+1
                                  βk =         Pq−1    wj          k ∈ {0, ..., q − 1}            (16)
                                          1−      j=0 Rj+1


              1
                  Pq−1
where wk ≡    q         age=0   w (k, λ, age).

  Proposition 4.2 establishes a novel link between the factors influencing asset prices and
demographic composition. For each k = {0, 1, ..., q − 1}, one can interpret wk as the
average weight placed on the dividend observed at time t − k by all generations trading
at time t. As the formula also reveals, the relative magnitudes of the weights on past
dividends, βk , depend on the number of cohorts in the market, q, on the fraction of each
cohort in the market, 1q , and on the extent of agents’ recency bias, λ.10
  The main idea of the proposition is as follows. In a linear equilibrium, demands at
time t are affine in dividends dt−K:t . However, from these dividends, only dt−q+1:t matter
for forming beliefs; the dividends dt−K:t−q only enter through the definition of linear
equilibrium. The proof shows that, under market clearing, the coefficients accompanying
older dividends dt−K:t−q are zero. The proposition also implies that we can apply the same
restriction to demands and conclude that demands at time t only depend on dt−q+1:t .
                  ∂βk                ∂α
  Note that       ∂R
                        < 0 and      ∂R
                                          > 0 for any λ. That is, if the interest rate is higher, the
equilibrium price of the risky asset responds less strongly to past dividends. Furthermore,
higher risk aversion γ decreases the equilibrium price by lowering α.

  The following proposition establishes that, as long as agents exhibit any positive re-
cency bias (i. e., λ > 0), the sensitivity of prices to past dividends is stronger the more
recent the dividend realization.

  10
     In our baseline model, cohorts are equally weighted. We remove this assumption in Section 5, where
we analyze demographic shocks. In those examples, there is no link between the number of cohorts and
the fraction of each cohort in the market.



                                                             19
Proposition 4.3. For λ > 0, more recent dividends affect prices more than less recent
dividends, i. e., 0 < βq−1 < .... < β1 < β0 .

  This result reflects the fact that the dividends at time t are observed by all generations
whereas past dividends are only observed by older generations. At the same time, the
extent to which prices depend on the most recent dividends varies with the level recency
bias, as shown in the following Lemma.

Lemma 4.1. The effect of the most recent dividend realization on prices, β0 , is increasing
in λ, with lim β0 (λ) = 1/(R − 1) and lim βk (λ) = 0 for k > 0.
           λ→∞                            λ→∞


  As λ → ∞, the average weights wk (defined in Proposition 4.2) converge to 1{k=0} for
                                                                    1
all k = {0, 1, ..., K}. Therefore, βk → 0 for all k > 0 and β0 →   R−1
                                                                       .   In other words, under
extreme recency bias (λ → ∞), only the current dividend affects prices in equilibrium,
while the weights on all past dividends vanish.
  In Section 5, we show that the dependence of prices on more recent dividends is also
increasing in the fraction of young agents in the market; that is, β0 increases as the
relative measure of the youngest cohort in the market increases.

  These results on price sensitivity to past dividends, as well as the dampening effect of
recency bias on cross-sectional heterogeneity, produce a range of asset pricing implica-
tions, from known puzzles such as the predictability of stock returns and excess volatility
to new predictions about the link between asset prices and demographcis. We will derive
and test these empirical implications in Section 6.


4.2    Cross-Section of Asset Holdings

Experience-based learning also has distinctive implications for the cross-section of asset
holdings. We show that positive shocks (booms) induce a larger representation of younger
investors in the market, while downward shocks (crashes) have the opposite effect. To

                                                20
illustrate this, we first show that younger investors react more optimistically than older
ones to positive changes in recent dividends, and more pessimistically to negative ones.

Proposition 4.4. For any t ∈ Z and any generations n ≤ m trading at t, there is a
threshold time-lag k0 ≤ t − m − 1 such that for dividends that date back up to k0 periods,
the risky-asset demand of the younger generation (born at m) responds more strongly to
changes than the demand of the older generation (born at n), while for dividends that
date back more than k0 periods the opposite holds. That is,
         ∂xm         ∂xn
   1.      t
        ∂dt−k
                ≥      t
                    ∂dt−k
                            for 0 ≤ k ≤ k0 and

         ∂xm         ∂xn
   2.      t
        ∂dt−k
                ≤      t
                    ∂dt−k
                            for k0 < k ≤ q − 1.

  Proposition 4.4 establishes that, for any two cohorts of investors, there is a threshold
time-lag up to which past dividends are weighted more by the younger generation, and
beyond which past dividend realization are weighted more by the older generation.
  In what follows, we extend this insight into predictions about relative stock-market
positions. We show that, as a result of the stronger impact of more recent shocks on the
beliefs (and thus, demands) of younger generations, the relative positions of the young
and the old in the market fluctuate. Let us denote the difference between generations n
and n + k in terms of their investment in the risky asset, as ξ(n, k, t) ≡ xnt − xn+k
                                                                                  t   . By
Proposition 4.1, and some simple algebra, it follows that:

                            Etn [θ] − Etn+k [θ]
          ξ(n, k, t) =                            ∀k = {0, ..., t − n}, n = {t − q + 1, ..., t}       (17)
                              γ(1 + β0 )σ 2

This formulation illustrates that the discrepancy between the positions of different gener-
ations is entirely explained by the discrepancy in beliefs. For instance, if for some a > 0,
dn:t ≈ dn+a:t+a , then ξ(n + a, k, t + a) ≈ ξ(n, k, t).11
  11
     This last claim follows since the inter-temporal change in discrepancies
                                                                         Pt−n−kbetween sets of generations
of the same age, ξ(n + a, k, t + a) − ξ(n, k, t) for a > 0, is given by ( j=0 {w(j, λ, t − n) − w(j, λ, t −
                           Pt−n
n − k)}(dt+a−j − dt−j ) + j=t−n−k+1 w(j, λ, t − n)(dt+a−j − dt−j ))/(γ(1 + β0 )σ 2 ).

                                                    21
  The next result shows that, among generations born and growing up in “boom times,”
understood as periods of increasing dividends, the younger generations have a relatively
higher demand for the risky asset than the older generations. The reverse holds for
“depression babies,” i. e., generations born during times of contraction. In times of de-
pression, the younger generations exhibit a particularly low willingness to invest in the
risky asset, relative to older generations born during those times.

Proposition 4.5. Suppose λ > 0. Consider two points in time t0 ≤ t1 such that dividends
are non-decreasing from t0 up to t1 . Then for any two generations n ≤ n+k born between
t0 and t1 , the demand of the older generation for the risky asset (xnt ) is lower than the
demand of the younger generation (xn+k
                                   t   ) at any point n ≤ t ≤ t1 , i.e., ξ(n, k, t) ≤ 0. On
the other hand, if dividends are non-increasing, then ξ(n, k, t) ≥ 0.

  The proposition illustrates that, while boom times tend to make all cohorts growing up
in such times more optimistic, the effect is particularly strong for the younger generations.
This induces them to be overrepresented in the market for the risky asset. The opposite
holds during times of downturn.


4.3    Trade Volume

We now study how learning and disagreements affect the volume of trade observed in the
market. We consider the following definition of the total volume of trade in the economy:

                                           t
                                                                ! 12
                                       1 X                 2
                             T Vt ≡            xnt − xnt−1                              (18)
                                       q n=t−q

with xtt−1 = 0. That is, trade volume is the square root of the weighted sum (squared) of
the change in positions of all agents in the economy. Using this definition, we characterize
the link between trade volume and belief heterogeneity.



                                             22
Proposition 4.6. The trade volume defined in (18) can be expressed as

                                                                     !2                      12
              2   t                              t
              χ   X                        1    X                          1         1
                               θtn − θt−1
                                      n
                                                      θtñ − θt−1
                                                              ñ
                                                                           + (xtt )2 + (xt−q  2
                                                                  
  T Vt =                                  −                                             t−1 )   ,   (19)
              q   n=t−q
                                             q ñ=t−q                       q         q


where χ =         1
            γσ 2 (1+β0 )
                         ,    t
                             θt−1 = θtt−q = 0.

  Expression (19) illustrates that the presence of EBL induces trade through changes
in beliefs, which in our framework are driven by shocks to dividends. More specifically,
when the change in a cohort’s beliefs is different from the average change in beliefs, trade
volume increases. That is, trade volume increases in the dispersion of changes in beliefs.
  To understand the drivers of trade volume, we need to understand not only the demands
of agents that enter and exit the market, but, most importantly, how beliefs across
cohorts change in response to a given shock. From our previous analysis, it follows
that an increase (decrease) in dividends induces trade when it makes young agents more
optimistic (pessimistic) than old agents. This mechanism is solely due to the presence of
EBL, since it is essential that each generation reacts differently to the same dividend.
  We formalize this insight in the following thought experiment capturing the reaction
to a dividend shock that occurs after a long period of stability.

  Thought Experiment. Suppose that, for t − t0 > q, dt0 = dt0 +1 = ... = dt−1 = d¯
               ¯ Hence, all generations alive at time t − 2 and t − 1 have only observed
and that dt 6= d.
a constant stream of dividends d¯ over their lifetimes so far. Therefore, Et−2
                                                                           n
                                                                               [dt−1 ] =
 n
Et−1 [dt ] = d¯ for all n ∈ {t − 1 − q, ..., t − 1} and thus trade volume in t − 1 is simply
given by the demand of the youngest (entering) and the oldest (exiting) agents.
  What happens at time t, when a dividend dt 6= d¯ is observed? For each generation n
trading at time t and at time t − 1, i. e., for n = {t − q + 1, .., t − 1}, beliefs are given
                                     ¯ + d¯ and E n [dt ] = w(0, λ, t − 1 − n)(dt−1 − d)
by Etn [dt+1 ] = w(0, λ, t − n)(dt − d)                                               ¯ + d,
                                                                                          ¯
                                                 t−1

which implies the following change in cohort n’s beliefs: Etn [dt+1 ] − Et−1
                                                                         n
                                                                             [dt ] = w(0, λ, t −

                                                      23
        ¯ Trade volume in t is therefore:
n)(dt − d).

                          2                                                             !2                       12
                                 t−1                             t−1
            χ   2
                    dt − d¯      X                           1   X                              1         1
T Vt =                                   w(0, λ, t − n) −              w(0, λ, t − ñ)        + (xtt )2 + (xt−q
                                                                                                             t−1 )
                                                                                                                  2
                                                                                                                     .
                     q          n=t−q+1
                                                             q ñ=t−q+1                         q         q
                                                                                                          (20)

    This thought experiment pins down two aspects of the link between the volatility in
beliefs and trade volume: First, the trade volume increases proportionally to the change
                    ¯ independently of whether the change is positive or negative, and
in dividends, |dt − d|,
also proportionally to a function that reflects the dispersion of the weights agents assign
to the most recent observation in their belief formation process. Second, the increase in
trade volume generated by a given change in dividends depends on the level of recency
bias of the economy, which is captured by λ. For example, as λ → ∞, the dispersion
in weights decreases as w(0, λ, age) → 1 for all age ∈ {0, ..., q − 1}. Thus, our results
suggest that higher recency bias, λ, should generate lower trade volume responses for a
given shock to dividends, and vice versa.



5      Market Participation and Equilibrium Prices

The results derived so far illustrate a key feature of experience-based learning: The
demographic structure of an economy, and in particular the cross-sectional composition of
investors, affect equilibrium prices, demand, and trade volume in a predictable direction.
    In this section, we explore the link between market demographics and financial market
outcomes by considering an unexpected increase in the fraction of young market partici-
pants, e. g., due to a baby boom or a generation-specific event drawing a certain generation
into the stock market.12 The goal of this exercise is to understand how a larger fraction
  12
     We have also analyzed the implications of a growing market population, as opposed to a one-time
market demographic shock. In Online Appendix OA.3, we show that population growth generates a
positive trend in prices, which is independent of experience effects: The growing mass of agents increases


                                                       24
of young market participants affects market dynamics.
   For ease of illustration, we focus again on our q = 2 economy. We denote the mass of
young agents at any time t by yt , and the total mass of agents at t by mt = yt + yt−1 .
We consider a one-time unexpected (exogenous) shock to the mass of young agents in the
market at time τ .13 For all t < τ and t > τ + 1, instead, yt = y and thus mt = 2y = m.
   We know from our previous results that when the market has equal-sized cohorts, prices
are given by pt = α+β0 dt +β1 dt−1 , with {α, β0 , β1 } given by (10)-(12). Here, prices follow
this path for t > τ + 1 and, since the shock at time τ is unexpected, for t < τ as well. For
these time periods, the market is as described in Section 3. We are left to characterize
demands and prices for τ and τ + 1, when the larger young generation enters the market
and when this generation becomes old, respectively. We make the following guesses:


                                   pτ = aτ + b0,τ dτ + b1,τ dτ −1 ,                                    (21)

                                pτ +1 = aτ +1 + b0,τ +1 dτ +1 + b1,τ +1 dτ .                           (22)


   We solve the problem by backwards induction. Note that the form of agents’ demands
remains unchanged. By imposing market clearing in τ + 1, with mass y of young agents
and yτ of old agents, and using the method of undetermined coefficients we obtain

                       R−1
                          
              1
 aτ +1    =α       1+        ,
             R          mτ
                     1 mτ − yτ                    1 mτ − yτ
                                                                       
                                 yτ    y                      yτ    y
b0,τ +1   = β0 1 +             +    ω − (1 + ω) +           +    ω − (1 + ω) ,
                     R     mτ    mτ    m          R   mτ      mτ    m
               yτ m
b1,τ +1   = β1       ,
               mτ y
the demand for the risky asset, and hence prices adjust to clear markets, since risky-asset supply is
assumed to be constant. While the positive trend is independent of experience effects, experience-based
learning does affect the path of the prices fluctuating around this trend. In particular, we find that the
relative reliance of prices on the most recent dividend is increasing in the population growth rate.
  13
      In reality, the participation of young agents in the market could also be determined endogenously
(e. g., by entry costs). While the forces described in this section would still be present in such scenario,
other forces may be at play as well. The study of these interactions is out of the scope of this paper.


                                                    25
                       Figure 2: Demographic Shocks and Price Coefficients.

Note: This figure plots coefficients {β0 , b0,τ , b0,τ +1 }, {β1 , b1,τ , b1,τ +1 }, and {α, aτ , aτ +1 }, respectively,
as a function of the demographic shock yτ . The results are for y = 0.5, γ = 1, λ = 3, σ = 1, and R = 1.1.


                 2λ
where ω ≡       1+2λ
                       and mτ = y + yτ . Note that for yτ = y, the coefficients are as in the
baseline model (10)-(12). The above expressions show that the total mass of agents mτ
only affects the price constant, while the price loadings depend on the fraction of young
agents in the market, yτ /mτ . We impose market clearing in τ , with mass yτ of young
agents and y of old agents. Using the method of undetermined coefficients, we obtain
                      "                               #
                    1           γ (1 + b0,τ +1 )2 σ 2
               aτ =     aτ +1 −                         ,
                    R                   mτ
                                             mτ − yτ
                                                          
                    1                 yτ                      1           yτ
              b0,τ = (1 + b0,τ +1 )      +                ω + 2 (1 + β0 )    (1 − ω) ,
                    R                 mτ         mτ          R            mτ
                    1               mτ − yτ
              b1,τ = (1 + b0,τ +1 )           (1 − ω) .
                    R                 mτ

   Figure 2 shows how the reliance of prices on past dividends changes with the fraction
of young agents in the market at time τ . From the first two panels, we can see that as
the fraction of young people in the market increases, the more current dividends matter
relative to past dividends for the determination of prices. Consistent with this, when


                                                          26
the τ -generation becomes old, prices depend less on contemporaneous dividends and
more on past dividends. Finally, the third panel shows that an increase in the overall
market population generates a level increase in prices that is captured by the higher price
constant. This effect stems from the higher overall demand for the risky asset since there
are more people in the market. All predictions are reversed when the fraction of young
agents in the market decreases, as can be seen at the left side of each graph.



6     Empirical Implications

In this section, we analyze the empirical implications of our model. The analysis con-
sists of two approaches. On the one hand, we turn to existing evidence on asset-pricing
features established in prior empirical literature: the predictability of stocks returns, the
predictability of the dividend-price ratio, and the excess volatility puzzle. We show that
the experience-based learning model is able to quantitatively match these empirical find-
ings, and that it generates refined predictions about their relation with the demographic
composition of investors. On the other hand, we test the novel predictions generated by
our model regarding the implications of the demographic composition on the predictabil-
ity of the price-dividend ratio, trade volume, and the cross-section of asset holdings. We
show that these predictions are in line with evidence from micro-level data in the Survey
of Consumer Finances (SCF) and the Center for Research in Security Prices (CRSP).


6.1    Quantitative Implications for Asset-Pricing Moments

We first show that experience-based learning can explain several key asset-pricing puzzles.
As the CARA-Normal framework is not well suited for a thorough calibration exercise,
we follow the approach of Campbell and Kyle (1993) and Barberis, Greenwood, Jin, and
Shleifer (2015), among others, to compute the moments of interest generated by our


                                             27
model and contrast them with the data. As in these papers, we define quantities in terms
of differences rather than ratios. For example, instead of stock returns we measure price
changes ∆P , and instead of the price-dividend ratio we study the difference P − D.
  A distinguishing feature of our model is that it establishes a link between the age
profile of agents participating in the stock market and the factors that determine prices.
Another feature of our model is the small number of parameters to be set for generating
numerical results. Following Barberis, Greenwood, Jin, and Shleifer (2015), we choose the
following parameter values for our numerical solutions: the gross risk-free interest rate
is R = 1.05, the volatility of dividends is σ = 0.25, and the coefficient of risk-aversion is
γ = 2. We show our estimates for λ ∈ {1, 3} and for q ∈ {2, 5}.

  Predictability of Excess Returns. A prominent stylized fact about stock-market
returns, established by Campbell and Shiller (1988), is that the dividend-price ratio
predicts future returns with a positive sign. Experience-based learning rationalizes such
predictability and, at the same time, limits it to those dividend realizations experienced
by the oldest cohort participating in the market.
  In order to relate the predictability generated in our model to the existing empirical
evidence, and to show how it varies with the demographic composition of investors, we
calculate the following measure of co-movement between the analogues of the dividend-
price ratio and returns, namely, between dividend-price differences Dt − Pt and price
changes Pt+z − Pt over return horizon z:

                                         Cov (Dt − Pt , Pt+z − Pt )
                            BtR (z ) ≡                              .                      (23)
                                              Var (Dt − Pt )

We compute BtR (z ) using equation (14) from Proposition 4.2.
  We first calculate BtR (z ) for different horizons z. Panel (a) of Figure 3 plots BtR (z ) for
z ranging from 1 to 7, and different levels of recency bias (λ ∈ {1, 3}), in an economy with



                                                28
q = 5. As the panel shows, the experience-based learning model generates a positive (and
strong) relation between D − P and future price changes, which increases with the return
horizon. These predicted patterns are consistent with the empirical findings described
in (Cochrane 2011). We note that the predictability of excess returns under EBL is an
equilibrium phenomenon that stems solely from our learning mechanism and not from,
say, a built-in dependence on dividends or past returns. Similar to prior theoretical
approaches, such as the over-extrapolation model of Barberis et al. (2015) and Barberis
et al. (2016), our explanation relies on agents’ overweighting recent realizations.
  Our model has the additional implication that different demographic structures gener-
ate different β’s, which directly determine the level of predictability (or extrapolation) of
stock returns. We show this by studying how the coefficient BtR (1) varies with the frac-
tion of young market participants. Here, we use the results from Section 5 on the effect
of a one-time unexpected shock to the mass of young agents (in an economy with q = 2).
We assume that the fraction of young agents equals y at all times before and after t, but
there is a one-time exogenous shock in t, resulting in yt 6= y. The resulting variation in
next period’s return predictability (based on this period’s dividend-price ratio), BtR (1),
and in the current period’s return predictability (based on last period’s dividend-price
         R
ratio), Bt−1 (1), are shown in panels (b) and (c) of Figure 3. For both graphs we fix y at
0.5, and we plot yt over a range [0, 1].
  As the plots show, the predictability of next period’s return, BtR (1), decreases in the
number of young market participants (panel b), while the predictability of this period’s
         R
return, Bt−1 (1), increases in their number (panel c). The key channel is the differential
impact on the variance of the dividend-price ratio. In both cases the covariance between
future returns and the dividend-price ratio increases in the fraction of young agents;
but only the variance of the dividend-price ratio at time t increases such that it off-sets
the increase in covariance. Thus, return predictability is affected by the demographic


                                             29
                     Figure 3: Predictive Power of Dt − Pt for Pt+z − Pt .

Note: This figure plots the coefficient BtR for two levels of recency bias, λ ∈ {1, 3}. Panel (a) shows how
BtR (z) varies with the return horizon z (for q = 5). Panel (b) shows how BtR (1) varies with the fraction
yt of young agents in the market at time t, and panel (c) with the fraction yt+1 of young agents in the
market at time t + 1, in both cases for q = 2. The results are calculated for y = 0.5 and R = 1.05.



composition of market participants, and the effect is sensitive to the timing of the partic-
ipation shock. With a larger generation of market participants coming in at t, the return
experienced in that period is more predictable.

  Predictability of Price-Dividend Ratio. In addition to the predictability of re-
turns, we can also compute the predictability of the price-dividend ratio implied by the
model. That is, we relate past P/D ratios to future P/D realizations, and analyze the
persistence of the price-dividend ratio. In particular, we study how this predictability of
P/D ratios varies with the investment horizon and with the fraction of young people in
the market. Our measure of predictability is constructed as follows:

                                             cov (Pt+z − Dt+z , Pt − Dt )
                               BtP D (z) =                                                            (24)
                                                    var (Pt − Dt )

  We first calculate how BtP D varies with the horizon z. Panel (a) of Figure 4 displays how
BtP D varies for z ranging from 1 to 7, and for different levels of recency bias (λ ∈ {1, 3}),



                                                    30
                                Figure 4: Pt − Dt autocorrelation.

Note: This figure plots the coefficient BtP D for two levels of recency bias, λ ∈ {1, 3}. Panel (a) shows
how BtP D (z) varies with the investment horizon z (for q = 5). Panel (b) shows how BtP D (1) varies with
the fraction yt of young agents in the market at time t (for q = 2). The results are calculated for y = 0.5
and R = 1.05.


in an economy with q = 5. As in the data, P − D is highly autocorrelated at short lags,
with the autocorrelation being zero at longer horizons. Furthermore, BtP D decreases in
the extent of recency bias present in the population.
  We then turn to the demographic structure, using again the results from Section 5. As
shown in panel (b) of Figure 4, BtP D increases with the fraction of young agents in the
market at time t, and the effect is weaker under higher recency bias. Furthermore, BtP D
increases with the number of cohorts in the market. A direct implication is that P − D
is positively correlated only with lagged realizations where the number of periods lagged
is below the number of cohorts in the market.

  Price Dynamics. A third set of asset pricing implications are related to the dynam-
ics of prices, and in particular the excess volatility puzzle. Campbell and Kyle (1993)
estimate the volatility of dividends to be 0.032 that of the change in prices. We calculate
the corresponding volatility of prices relative to that of dividends implied by our model.
  Table 1 presents our results for σ(P − D), σ(P ), and the ratio σ(D)/σ(P ). We see


                                                    31
                                Table 1: Excess Volatility.




that the experience-based learning model generates ample excess volatility in prices and
in the price-dividend differences, and this volatility is increasing in the recency bias and
decreasing with the number of cohorts in the market. Furthermore, in our calibration,
the volatility of dividends is between 0.03 and 0.05 that of the change in prices, consistent
with the 0.032 estimate of Campbell and Kyle.


6.2    Demographics on Price-Dividend Predictability

The predictability results in the previous subsection are consistent with the findings of
Cassella and Gulen (2015), who find a positive relation between their market-wide mea-
sure of return extrapolation and the relative participation of young versus old investors
in the stock market. Our model of experience-based learning goes beyond a rational-
ization of the evidence on agents extrapolating from past dividends (cf. also Greenwood
and Shleifer (2014)). It puts structure on the extent of such extrapolation exhibited by
different market participants and links it to market demographics. We now bring this
prediction to the data and show that is aligned with empirical observations.
  We want to test whether the predictive power of the lagged P/D ratios for the current
one depends on the relative representation of younger versus older generations in the
market in the manner predicted by the model. Experience-based learning predicts that


                                             32
the correlation between future and current lags is higher when the current share of young
market participants is large. Moreover, the model generates the heuristic that young
people put little weight on observations of the “distant” past (cf. Proposition 4.4).
  In order to test these predictions, we regress P/D onto lags of itself interacted with
a dummy variable that indicates a larger presence of young people in the market. As
the estimation model has to account for non-stationarity of the P/D process, we depart
from the standard linear AR models and postulate a Markov-Switching Regime (MSR)
model, which allows us to capture richer, non-linear dynamics in a tractable way.14 The
regression model is thus given by

                                        3
                                        X
            Pt+1 − Dt+1 = µ(St+1 ) +          (Pt+1−j − Dt+1−j )(βj + δj × Yt ) + σt+1 ,   (25)
                                        j=1


where Pt and Dt denote the log of dividends and prices at time t, respectively, St+1 ∈
{0, 1} is an unobserved state that evolves according to a Markov transition kernel Q; Yt is
a dummy variable that takes value 1 if the share of young generations participating in the
market at time t is large relative to the participation of older generations, and 0 otherwise;
and we assume t+1 ∼ N (0, 1). The parameters, ({µ(s)}s∈{0,1} , σ, Q, {βj , δj }3j=1 ), are
jointly estimated using maximum likelihood (see, e. g., Hamilton (1994) for details).
  We consider two dummies for the relative representation of younger generations in the
market. First, we compute the ratio of investors who are less than 50 years old in the
total population, and construct an indicator that equals 1 if their share is bigger than
50% (or, for robustness, bigger than 55% or 60%). Second, we calculate young investors’
share of liquid wealth, and use an indicator that equals 1 if their liquid-wealth share is
above its sample average (or, for robustness above 90% or 110% of the sample average).
Details on the variable construction and robustness checks are in Online-Appendix OA.4.
  The theoretical prediction of our model is that the correlation between future and
 14
      For a more thorough discussion of MSR see Hamilton (1989).


                                                  33
current lags should be higher when the current share of young market participants is
large. This translates into the hypothesis that δ1 > 0 in the estimation model in (25).
  The estimated values are reported in Table 2. In column (1), we use the fraction of
young people in the population, and in column (2) the fraction of their wealth to proxy for
the relative representation of younger people in the market. In both cases, the estimates
provide evidence in favor of the model hypothesis. We estimate a positive δ1 coefficient,
which is either significant at the 5% or at the 10% level. Moreover, considering all three
coefficients (δi )3i=1 jointly, a roughly “decreasing” pattern emerges: δ1 is typically positive,
δ2 is typically non-significant, and δ3 is negative or insignificantly negative, consistent with
the heuristics that young people put little weight on observations of the “distant” past.
Thus, in periods when their share is relatively large, the correlation between future and
distant past values is weakened.


6.3    Cross-Section of Asset Holdings and Trade Volume

We now turn to the novel empirical predictions of the experience-based learning model
about the cross-section of equity holdings and stock turnover. We investigate two sets of
predictions that are directly testable and jointly hard to generate by alternative models.
  The first prediction is that cross-sectional differences in the demand for risky securities
reflect cross-sectional differences in lifetime experiences of risky payoffs. That is, cohorts
with more positive lifetime experiences are predicted to invest more in the risky asset
than cohorts with less positive experiences (Proposition 4.1). We test this both in terms
of stock-market participation (extensive margin) and in terms of the amount of liquid
assets invested in the stock market (intensive margin). The second prediction is that
changes in the cross-section of experience-based beliefs generate trade (Proposition 4.6).
  To test these model predictions, we combine historical stock returns data from Robert
Shiller’s website with SCF data on stock holdings and CRSP data on stock turnover.


                                               34
                     Table 2: Markov-Switching Regime (MSR) Model

 Estimation results for model specification (25), where Pt − Dt is the log of the price-to-dividend
ratio, and regressed onto lags of itself interacted with a demographic dummy variable. Yt is
the fraction of young people, which we define as an indicator equal to 1 when the fraction
of investors under 50 is larger than 0.5 (in column 1), or as an indicator equal to 1 when the
fraction of wealth of investors below 50 is larger than their 1960-2013 sample average (in column
2).The demographic data including age and wealth (liquid assets) of stock market participants
is from the SCF, stock data from CRSP.


                                                     Dependent variable: Pt − Dt
                                                       (1)              (2)
                                                  Yt age-based Yt age/wealth based

         δ1                                          0.701**              0.475*
                                                     (0.154)              (0.252)
         δ2                                           -0.013               -0.115
                                                     (0.146)              (0.366)
         δ3                                          -0.745**              -0.329
                                                      (0.115)             (0.232)
         β1                                          0.377**              0.622**
                                                     (0.120)              (0.159)
         β2                                          -0.216**              -0.074
                                                      (0.088)             (0.136)
         β3                                          0.714**              0.249**
                                                     (0.093)              (0.099)
         µ(S1 )                                      5.089**              5.741**
                                                     (1.554)              (1.812)
         µ(S2 )                                      19.450**            18.350**
                                                      (3.070)             (4.768)
         σ                                            3.812                4.343
                                                     (0.388)              (0.600)
         Q11                                          0.956                0.978
                                                     (0.026)              (0.017)
         Q21                                          0.365                0.206
                                                     (0.204)              (0.154)
         N                                             51                    51

Robust standard errors in parentheses. * significant at 10%; ** significant at 5%.


                                                35
The key explanatory variable is a measure of cohorts’ lifetime experiences of risky-asset
payoffs. Theoretically, dividends in the Lucas-tree economy capture the performance of
the risky asset, or the stock market. Empirically dividends payments do not necessarily
reflect how well firms are doing. For example, firms have incentives to smooth dividends,
and also to retain earnings rather than distribute them. In other words, dividends in
our model do not translate one-to-one to the dividend payments recorded in CRSP. We
therefore use an array of empirical measures to capture the performance of the risky
asset in our model: (1) annual stock market returns, (2) real dividends, (3) real earnings,
and (4) U.S. GDP. We obtain the first three series from Robert Shiller’s website, and
the nominal GDP data from the Federal Reserve Bank of St. Louis (for 1929-2016) and
Historical Statistics of the United States Millennial Edition Online (for 1871-1928). We
convert nominal GDP into real GDP using Shiller’s consumer price index variable.
  Dividends in our model are best interpreted as the performance of the risky asset at
medium frequencies. Therefore, we use the Christiano and Fitzgerald (2003) band-pass
filter and remove stochastic cycles at frequencies lower than 2 years and higher than 8
years,15 for all non-stationary series (dividend, earnings, and GDP).
  In order to construct the experienced returns, dividends, earnings, and GDP of different
generations over the course of their lives, we apply the formula from equation (5). We
calculate generation-specific weighted averages, employing both linearly declining weights
(λ = 1), and a steeper weighting function (λ = 3), corresponding to the range of empirical
estimates in Malmendier and Nagel (2011).

  Stock market participation. We test the first prediction relating the differences in
lifetime experiences between older and younger cohorts (i. e., those above 60 and those
below 40 years of age) to the differences in their stock-market investment. Our source
  15
    These are the default frequencies for the CF-filter. We also remove a linear trend of the series before
applying the filter and, in addition, work with the natural logarithm of earnings and GDP to remove
non-linearities in these series. In unreported analyses, we also use the natural logarithm of dividends
and obtain very similar results.


                                                    36
of household-level micro data is the cross-sectional data on asset holdings and various
household background characteristics in the Survey of Consumer Finances (SCF). We use
all waves of the modern, triannual SCF, available from the Board of Governors of the
Federal Reserve System since 1983. We follow the variable construction of Malmendier
and Nagel (2011) and extend their analysis to the most recently released data. In addi-
tion, we employ some waves of the precursor survey, available from the Inter-university
Consortium for Political and Social Research at the University of Michigan since 1947.
We use all survey waves that include age and stock-market participation.16
  For the extensive margin of stock holdings, we construct an indicator of stock-market
participation. It equals 1 when a household holds more than zero dollars worth of stocks.
We define stock holdings as the sum of directly held stocks (including stock held through
investment clubs) and the equity portion of mutual fund holdings, including stocks held
in retirement accounts (e.g., IRA, Keogh, and 401(k) plans).17
  For the intensive margin of stock holdings, we calculate the fraction of liquid assets
invested in stocks as the share of directly held stocks plus the equity share of mutual
funds, using all surveys from 1960-2013 other than 1971. Liquid assets are defined as the
sum of stock holdings, bonds, cash, and short-term instruments (checking and savings
accounts, money market mutual funds, certificates of deposit). In these analyses of the
intensive margin, we drop all households that have no money in stocks.
  For both the young and old age group, we calculate their experience and their stock-
market investment as a weighted average across cohorts, with the weight variable provided
in the SCF. The weighted estimates are representative of the U.S. population.18
  16
     Those are 1960, 1962, 1963, 1964, 1967, 1968, 1969, 1970, 1971, and 1977.
  17
     For 1983 and 1986, we need to impute the stock component of retirement assets from the type of
the account or the institution at which they are held and allocation information from 1989. From 1989
to 2004, the SCF offers only coarse information on retirement assets (e. g., mostly stocks, mostly interest
bearing, or split), and we follow a refined version of the Federal Reserve Board’s conventions in assigning
portfolio shares. See Malmendier and Nagel (2011) for more details.
  18
     The 1983-2013 SCF waves oversample high-income households with significant stock holdings. The
oversampling is helpful for our analysis of asset allocation, but could induce selection bias. By applying


                                                    37
  We present the results graphically. We plot the relation between stock holdings (ex-
tensive and intensive margin) and experienced returns (Figure 5), dividends (Figure 6),
earnings (Figure 7), and GDP (Figure 8). Graphs 5.(a) and 5.(c) update the evidence on
the extensive margin and returns presented in Malmendier and Nagel (2011).)
  The results for all four performance measures and both for the extensive and intensive
margin are in line with the predictions of our model. Starting from experienced returns
with λ = 1 in panel (a) of Figure 5, we see that the older age-group is more likely to hold
stock, compared to the younger age-group, when they have experienced higher stock-
market returns in their lives. The opposite holds when the returns experienced by the
younger generations are higher than those of the older generations. The slope coefficient
of the linear line of fit is significant at 5%. The steepness of the weighting function, and
hence the extent of imposed weight on recent data points, makes little difference, as the
comparison with graph (b) for λ = 3 reveals.
  The analysis of the intensive margin of stock-market investment yields the same con-
clusion. Both graph (c) and graph (d) indicate that older generations invest a higher
share of the their liquid assets in stock, compared to the younger generations, when their
experienced returns have been higher than those of the younger age-group over their re-
spective life-spans so far; and vice versa when they have experienced lower returns than
the younger cohorts. Here, the slope coefficient is significant at 10%.
  Figures 6 to 8 present the corresponding results for experienced dividends, earnings,
and GDP. For all measures, we observe a positive relation of differences in experienced
performance and stock investments between the young and the old. The fact that we
obtain very similar findings for a wide array of performance measures lends support to
the link between our theoretical model and the empirical facts, and ameliorates concerns
about dividends not translating one-to-one into an empirical performance measure.
SCF sample weights, we undo the over-weighting of high-income households and also adjust for non-
response bias.


                                               38
       (a) Stock-market participation (λ = 1)                 (b) Fraction invested in stock (λ = 1)




       (c) Stock-market participation (λ = 3)                 (d) Fraction invested in stock (λ = 3)

                       Figure 5: Experienced Returns and Stock Holdings

Difference in experienced returns is calculated as the lifetime average experienced returns of the S&P500
Index as given on Robert Shiller’s website, using declining weights with either λ = 1 or λ = 3 as in
equation (5). Stock-market participation is measured as the fraction of households in the respective age
groups that hold at least $1 of stock ownership, either as directly held stock or indirectly, e. g. via
mutuals or retirement accounts. Fraction invested in stock is the fraction of liquid assets stock-market
participants invest in the stock market. We classify households whose head is above 60 years of age as
“old,” and households whose head is below 40 years of age as “young.” Difference in stock holdings,
the y-axis in graphs (a) and (c), is calculated as the difference between the logs of the fractions of stock
holders among the old and among the young age group. Percentage stock, the y-axis in graphs (b) and
(d), is the difference in the fraction of liquid assets invested in stock. The red line depicts the linear fit.




                                                      39
      (a) Stock-market participation (λ = 1)               (b) Fraction invested in stock (λ = 1)




       (c) Stock-market participation (λ = 3)              (d) Fraction invested in stock (λ = 3)

                     Figure 6: Experienced Dividends and Stock Holdings

Difference in experienced dividends is calculated as the lifetime average experienced real dividends as
given on Robert Shiller’s website, using declining weights with either λ = 1 or λ = 3 as in equation
(5). Stock-market participation is measured as the fraction of households in the respective age groups
that hold at least $1 of stock ownership, either as directly held stock or indirectly, e.g. via mutuals or
retirement accounts. Fraction invested in stock is the fraction of liquid assets stock-market participants
invest in the stock market. We classify households whose head is above 60 years of age as “old,” and
households whose head is below 40 years of age as “young.” Difference in stock holdings, the y-axis
in graphs (a) and (c), is calculated as the difference between the logs of the fractions of stock holders
among the old and among the young age group. Percentage stock, the y-axis in graphs (b) and (d), is
the difference in the fraction of liquid assets invested in stock. The red line depicts the linear fit.




                                                   40
      (a) Stock-market participation (λ = 1)               (b) Fraction invested in stock (λ = 1)




       (c) Stock-market participation (λ = 3)              (d) Fraction invested in stock (λ = 3)

                     Figure 7: Experienced Earnings and Stock Holdings

Difference in experienced earnings is calculated as the lifetime average experienced log real earnings as
given on Robert Shiller’s website, using declining weights with either λ = 1 or λ = 3 as in equation
(5). Stock-market participation is measured as the fraction of households in the respective age groups
that hold at least $1 of stock ownership, either as directly held stock or indirectly, e.g. via mutuals or
retirement accounts. Fraction invested in stock is the fraction of liquid assets stock-market participants
invest in the stock market. We classify households whose head is above 60 years of age as “old,” and
households whose head is below 40 years of age as “young.” Difference in stock holdings, the y-axis
in graphs (a) and (c), is calculated as the difference between the logs of the fractions of stock holders
among the old and among the young age group. Percentage stock, the y-axis in graphs (b) and (d), is
the difference in the fraction of liquid assets invested in stock. The red line depicts the linear fit.




                                                   41
       (a) Stock-market participation (λ = 1)                (b) Fraction invested in stock (λ = 1)




       (c) Stock-market participation (λ = 3)                (d) Fraction invested in stock (λ = 3)

                     Figure 8: Experienced Log GDP and Stock Holdings

Difference in experienced GDP is calculated as the lifetime average experienced log real GDP, using
declining weights with either λ = 1 or λ = 3 as in equation (5). Stock-market participation is measured
as the fraction of households in the respective age groups that hold at least $1 of stock ownership,
either as directly held stock or indirectly, e.g. via mutuals or retirement accounts. Fraction invested in
stock is the fraction of liquid assets stock-market participants invest in the stock market. We classify
households whose head is above 60 years of age as “old,” and households whose head is below 40 years
of age as “young.” Difference in stock holdings, the y-axis in graphs (a) and (c), is calculated as the
difference between the logs of the fractions of stock holders among the old and among the young age
group. Percentage stock, the y-axis in graphs (b) and (d), is the difference in the fraction of liquid assets
invested in stock. The red line depicts the linear fit.




                                                     42
       (a) Stock-market participation (λ = 1)             (b) Stock-market participation (λ = 3)

Figure 9: Trading Volume and Standard Deviation of Changes in Experienced Returns


  Trade volume. We now turn to the second prediction, which relates trade volume to
the dispersion of changes in disagreement among investors. We calculate changes in the
level of disagreement as the cross-cohort standard deviation of the change in experienced
performance between the current year and the previous year. We weight the cohorts by
their sizes when computing the standard deviation.19
  As a measure of abnormal trade volume, we calculate the deviation of the turnover ratio
from its trend. Following prior literature (Statman, Thorley, and Vorkink (2006), Lo and
Wang (2000)), we first compute firm-level turnover ratio, i. e. the number of shares traded
over the number of shares outstanding, on a monthly basis. We require that firms be listed
on the NYSE or AMEX. We exclude NASDAQ-listed firms because the dealer market has
volume measurement conventions that differ from exchange-traded securities (Atkins and
Dyl (1997), Statman, Thorley, and Vorkink (2006)). Then, we aggregate these numbers
into a market-wide turnover ratio, weighting firms by their market capitalization.20 Since
the turnover ratio is non-stationary, we proceed in the same way as above and apply the
Christiano and Fitzgerald (2003) to the logarithm of the turnover ratio series, so that
  19
    For this, we obtain data on U.S. population by age between 1985 and 2015 from US Census Bureau.
  20
    This measure is equivalent to dollar turnover ratio, i.e., the ratio of the dollar value of all shares
traded and the dollar value of the market.


                                                   43
we keep frequencies between 2 and 8 years. We examine the co-movement between the
aforementioned measure of disagreement, i. e., the standard deviation of the change in
experienced stock returns, and the above measures of (abnormal) trade volume.
  Figure 9 displays trading volume and disagreement in experienced returns between
cohorts over time. Graph (a) shows the results when we apply linear weights for the
calculation of experienced returns, graph (b) displays the case with super-linear weights
(λ = 3). Since we work with annual data for our disagreement variable, we choose the
average of the turnover ratio in December of a given year and in January of the following
year as our measure for trading volume of the given year. That is, Figure 9 compares
the variation in changes in experienced returns in a given year to trading volume in
December of that year and January of the following year. We choose 1985 as the starting
year for this analysis, since individual investors were trading substantially less frequently
when trading cost were significantly higher up to the mid-1980s, making it less likely that
(individual) investors trade repeatedly based on experienced performance.

  Table 3: Correlation between Trading Volume and S.D. of Changes in Experiences

   Experiences constructed using: Returns         Dividends   Log Earnings    Log GDP
   λ = 1 correlation              0.5982           0.2008        0.3287        0.1699
          p-value                 0.0004           0.2786        0.0710        0.3610
   λ = 3 correlation              0.5330           0.1635        0.3168        0.1844
          p-value                 0.0013           0.3794        0.0825        0.3206


  Consistent with the predictions of our model, we observe a clear co-movement between
disagreement among cohorts and trading volume. Table 3 reveals that the co-movement is
statistically significant at 1%. The table presents the correlation between trading volume
and our return disagreement variable, as well as the correlations when disagreement
is measured using our alternative performance measures, i. e., using again dividends,
earnings, or GDP. In each case, the correlation coefficient is positive, albeit (marginally)
significant only for changes in disagreement in experienced earnings.

                                             44
    All empirical findings are consistent with experience-based learning. Alternative mod-
els of belief formation in macro-finance cannot easily explain these findings jointly.



7      Extension: Non-Myopic Agents

As a final step, we analyze the model predictions when the assumption of myopic agents
is removed. We consider a version of our model where agents re-balance their portfolios
every period to maximize the expected utility of consuming their final wealth. Thus,
agents need to account for the dynamic nature of their portfolio problem. This approach
to modeling dynamic portfolio choices follows a widely used approach in the literature
(cf. Vives (2010)). The analysis reveals two additional determinants of risky-asset demand
that are at work when we remove the myopia assumption: the “discount effect,” due to
investment horizon considerations, and the “dynamic effect,” due to agents wanting to
hedge their exposure to future changes in beliefs.
    We characterize equilibrium prices in the new economy, and show that the result of
Proposition 4.2 continues to hold: Prices are affine functions of past dividends observed
by the generations that are trading. To sharpen our predictions, we then return to the
two-generation model, q = 2, and compare the findings with those with myopic agents.


7.1     Characterization of Equilibrium Demands and Prices

For any s, t ∈ Z, let ds:t = (ds , ..., dt ) denote the history of dividends from time s up to
time t. At time n, an n-generation agent solves the following problem:


                                   maxq Enn − exp −γWn+q
                                                     n
                                                           
                                                         (x)                             (26)
                                   x∈R
                                                  nq
                                                  X
                            s.t.    n
                                   Wn+q (x)   =          Rnq −τ xτ sτ +1                 (27)
                                                  τ =n




                                                  45
where x ∈ Rq are the q trading decisions from n up to nq = n + q − 1. We continue to
assume that the initial wealth of all generations is zero, i. e., Wnn = 0 ∀n.
  We can cast this problem iteratively — by solving from nq backwards — as


  Vnnq (dnq −K:nq ) = max Ennq [− exp (−γsn+q x)] and                                                          (28)
                     x∈R

    Vτn (dτ −K:τ ) = max Eτn Vτn+1 (dτ +1−K:τ +1 ) exp (−γsτ +1 x)
                                                                 
                                                                                       ∀τ ∈ {n, ..., nq − 1}   (29)
                     x∈R



Note that our definition of Vnnq omits the term exp{−γRWnnq } since it does not affect
the maximization. The same applies for all τ < n + q − 1, and we thus omit the wealth
at time τ as well. The formulation of the maximization problem shows that, while the
n-generation’s problem is a static portfolio problem at nq , it is not static at any other
time τ ∈ {n, ..., nq − 1} because Vτn+1 is correlated with sτ +1 through dividends. Dividend
realization dτ +1 impacts (i) the net payoff obtained from investing xτ in the risky asset
at time τ , and (ii) the continuation value Vτn+1 (dτ +1−K:τ +1 ) by affecting the beliefs of
the n-generation at τ + 1 and the resulting portfolio decision. As a result, this dynamic
portfolio problem cannot be expressed as a succession of static problems, as is standard
in the literature for the rational model (see Vives (2010)).
  Let EN (µ,σ2 ) [.] and VN (µ,σ2 ) [.] be the expectation and variance with respect to a Gaussian
pdf with mean µ and variance σ 2 . We can then characterizes agents’ demands:

                                                 PK
Proposition 7.1. Suppose pt = α +                      k=0   βk dt−k with β0 6= −1. Then, the demand of
any generation n at age j ∈ {0, ..., q − 1}, i. e., in period n + j, is given by

                                                   EN (mj ,σj2 ) [sn+j+1 ]
                                  xnn+j =                                          ,                           (30)
                                             γRq−1−j VN (mj ,σj2 ) [sn+j+1 ]

               n   −σ 2 (bj + K k=1 bj (k)dn+j−k )
                             P
              θn+j                                                 σ2
where mj ≡                  2cj σ 2 +1
                                                   ,   σj2 ≡    2cj σ 2 +1
                                                                           ,   and {{bj (k)}q−1
                                                                                            k=1 , bj , cj } are con-

stants that change with the agent’s age j. (See the proof for exact expressions.)


                                                         46
  The intuition of the proof is as follows. Solving the problem backwards, we note that, at
time nq (see equation (28)), the problem is in fact static. In particular, Vnnq is exponential-
quadratic in dnq . (See Lemma B.1 in the Appendix.) We then show (in Lemma C.1) that
the exponential-quadratic term times the Gaussian distribution of dividends imply a new
Gaussian distribution with a slanted mean and variance. Thus the problem at time nq −1
can be viewed as a static problem with a modified Gaussian distribution. As a result,
demands are of the form shown in (30), and Vnnq −1 is also exponential-quadratic. The
same process continues backwards until time n.
  After straightforward algebra, we can cast equation (30), as21

                                          EN (θn+j ,σ 2 ) [sn+j+1 ]    bj + K
                                                                           P
                                 1                                            k=1 bj (k)dn+j−k
                                               n
                   xnn+j   =            ·                            −                                  (31)
                               Rq−1−j     γVN (θn+j
                                                n   ,σ 2 ) [sn+j+1 ]      γR q−1−j (1 + β0 )
                                 1
                           ≡            · x̃nn+j + ∆nn+j
                               Rq−1−j

The term x̃nn+j coincides with the demand of a static portfolio problem for an agent with
         n
beliefs θn+j (see Proposition 4.1). We coin this term the myopic component of the demand
for risky assets. The scaling by 1/Rq−1−j arises because agents discount the future by
                                               bj + K
                                                   P
                                                     k=1 bj (k)dn+j−k
R. The second term, ∆nn+j ≡ −                      γRq−1−j (1+β0 )
                                                                      ,   is an adjustment that accounts for
the dynamic nature of the problem. We denote it the dynamic component. It arises
because agents understand that they are learning about the risky asset, and that the
value function is therefore correlated with the one-period-ahead returns.

  The following proposition shows that, in a linear equilibrium, prices at any time t
depend on past dividends, but only on those observed by the generations trading at t:

Proposition 7.2. For R > 1, the price in any linear equilibrium with β0 6= −1 is affine
in the history of dividends observed by the oldest generation participating in the market.
For any t ∈ Z, q ≥ 1, pt = α + q−1
                                P
                                  k=0 βk dt−k .
 21
      Note that EN (b+a,s) [sn+1 ] = EN (a,s) [sn+1 ] + (1 + β0 )b.

                                                           47
       Figure 10: Comparative Statics: Sensitivity of Prices to Dividends for q = 2.



  The proof follows along the same lines as the one for the myopic case.22 This result
shows that the insights in Proposition 4.2 continue to hold in the general setup.


7.2     Illustration: The q = 2 Case

We now return to the special case of agents who live for two periods, q = 2, to sharpen our
results on equilibrium prices and demands. We relegate the derivation of the coefficients
of the price function, {α, β0 , β1 }, to Online Appendix OA.2. (Lemma OA.2.1 solves the
corresponding system of linear equations.) With this result, we are able to establish:

Proposition 7.3. For λ > 0, prices react positively to dividends dt and dt−1 , with α ≤ 0
and 0 < β1 < Rβ0 .

  This proposition is analogous to Proposition 4.3. It reflects the fact that the dividends
at time t are observed by both generations, whereas dt−1 is only observed by the old
generation. The relation between the recency bias λ and price loadings is as in the model
  22
     Regarding the restriction β0 = −1, note that, heuristically, an equilibrium with β0 = −1 is not
well-defined since, in this case, the excess payoff in a given period is deterministic given the information
in the prior period, and thus the agent will take infinite positions.




                                                    48
with myopic agents, and is depicted in Figure 10 for different risk-free rates.23
    The next proposition establishes that the demand of the young generation increases
and the demand of the old generation decreases, when current dividends increase, and
vice versa if current dividends decrease (as in Proposition 4.4). However, as we explain
below, there are now several partly off-setting motives at work.

                                           ∂xtt         ∂xt−1                ∂xtt         ∂xt−1
Proposition 7.4. For λ > 0, (1)            ∂dt
                                                  >0>     t
                                                         ∂dt
                                                              ,   and (2)   ∂dt−1
                                                                                    <0<     t
                                                                                          ∂dt−1
                                                                                                .

    The basic intuition for this result remains the same as in the myopic setting. However,
this is not the only effect to consider when agents solve a dynamic portfolio problem.
There are additional effects due to the fact that the young are confronted with a different
investment horizon; and that all agents have hedging motives due to the correlation
between future returns and beliefs. We show in the proof of Proposition 7.1 that the
force introduced by EBL dominates the other forces, generating the same prediction as
in the model with myopic agents.
    Overall, the results of this section illustrate that our main findings are still present when
we remove the myopia assumption. At the same time, this setting reveals additional fac-
tors influencing agents’ decision-making due to their understanding of how future returns
relate to future learning and resulting investment decisions. An interesting question for
future research is whether such influences are indeed at work or whether a lack thereof
implies investor naivete about how future experiences affect future risk attitudes.



8      Conclusion

    In this paper, we have proposed an OLG equilibrium framework to study the effect
of personal experiences on market dynamics. We incorporate the two main empirical
  23
    The values of {β0 , β1 } are independent of the process for dividends, σ 2 , and of the coefficient of risk
aversion, γ. Thus, the results shown in the figure do not depend on parameter values other than the
ones used for comparative statics, (λ, R).


                                                      49
features of experience effects, the over-weighing of lifetime experiences and recency bias,
into the belief formation process of agents. We show that experience-based learning
not only generates several well-known asset pricing puzzles, that have been observed
in the data, but it also produces new testable predictions about the relation between
demographics, prices trading behavior, and the cross-section of asset holdings, which
are in line with the data. We highlight two channels through which shocks have long-
lasting effects on economic outcomes. The first is the belief formation process: all agents
update their beliefs about the future after experiencing a given shock. The second is
the cross-sectional heterogeneity in the population: different experiences generate belief
heterogeneity. We illustrate how the demographic composition of an economy can have
important implications for the extent to which prices depend on past dividends. We
consider this paper to be a first step into the exploration of the role of demographics in
understanding market dynamics.


References
  Adam, K., A. Marcet, and J. P. Nicolini (2012). Stock Market Volatility and Learning.
    Journal of Finance, forthcoming.
  Agarwal, S., J. C. Driscoll, X. Gabaix, and D. Laibson (2013). Learning in the Credit
     Card Market. working paper .
  Alesina, A. and N. Fuchs-Schundeln (2007). Good-bye Lenin (or Not?): The Effect of
     Communismon People s Preferences. American Economic Review 97, 1507 C1528.
  Atkins, A. B. and E. A. Dyl (1997). Market structure and reported trading volume:
     NASDAQ versus the NYSE. Journal of Financial Research 20 (3), 291–304.
  Barberis, N., R. Greenwood, L. Jin, and A. Shleifer (2015). X-CAPM: An extrapolative
     capital asset pricing model. Journal of Financial Economics 115 (1), 1–24.
  Barberis, N., R. Greenwood, L. Jin, and A. Shleifer (2016). Extrapolation and bubbles.
     Working Paper, National Bureau of Economic Research.
  Barsky, R. and J. B. DeLong (1993). Why Does the Stock Market Fluctuate? Quarterly
     Journal of Economics 108 (2), 291–311.
  Blanchard, O. (2012). Sustaining a Global Recovery. Finance and Development 46 (3),
     9–12.


                                            50
Brunnermeier, M. K. (2001). Asset pricing under asymmetric information: Bubbles,
   crashes, technical analysis, and herding. Oxford University Press on Demand.
Campbell, J. Y. (2008). Household Finance. Journal of Finance 61 (4), 1553–1604.
Campbell, J. Y. and A. S. Kyle (1993). Smart Money, Noise Trading, and Stock Price
  Behavior. Review of Economic Studies 60, 1–34.
Campbell, J. Y. and R. J. Shiller (1988). Stock Prices, Earnings, and Expected Divi-
  dends. Journal of Finance 43 (3), 661–676.
Cassella, S. and H. Gulen (2015). Extrapolation bias and the predictability of stock
   returns by price-scaled variables. working paper .
Cecchetti, S. G., P. Lam, and N. C. Mark (2000). Asset Pricing with Distorted Beliefs:
   Are Equity Returns Too Good to Be True? American Economic Review 90 (4),
   787–805.
Chiang, Y.-M., D. Hirshleifer, Y. Qian, and A. E. Sherman (2011). Do Investors Learn
   from Experience? Evidence from Frequent IPO Investors. Review of Financial
   Studies 24, 1560–1589.
Christiano, L. J. and T. J. Fitzgerald (2003). The band pass filter. international eco-
   nomic review 44 (2), 435–465.
Cochrane, J. H. (2011). Presidential address: Discount rates. The Journal of Fi-
   nance 66 (4), 1047–1108.
Cogley, T. and T. J. Sargent (2008). The Market Price of Risk and the Equity Premium:
   A Legacy of the Great Depression? Journal of Monetary Economics 55 (3), 454–
   476.
Collin-Dufresne, P., M. Johannes, and L. A. Lochstoer (2016). Asset Pricing when’This
   Time is Different’. Swiss Finance Institute Research Paper (13-73), 14–8.
Ehling, P., A. Graniero, and C. Heyerdahl-Larsen (2015). Asset Prices and Portfolio
   Choice with Learning from Experience. working paper , NYU.
Fama, E. F. and K. R. French (1988). Dividend yields and expected stock returns.
   Journal of financial economics 22 (1), 3–25.
Fuster, A., B. Hebert, and D. Laibson (2011). Natural Expectations, Macroeconomic
   Dynamics and Asset Pricing. In D. Acemoglu and M. Woodford (Eds.), NBER
   Macroeconomics Annual 2011. Chicago, IL: University of Chicago Press.
Fuster, A., D. Laibson, and B. Mendel (2010). Natural Expectations and Macroeco-
   nomic Fluctuations. Journal of Economic Perspectives 24, 67–84.
Giuliano, P. and A. Spilimbergo (2013). Growing Up in a Recession. Review of Eco-
   nomic Studies 81 (2), 787–817.
Greenwood, R. and A. Shleifer (2014). Expectations of Returns and Expected Returns.
   Review of Financial Studies, 714–746.


                                         51
Hamilton, J. D. (1989). A new approach to the economic analysis of nonstationary
  time series and the business cycle. Econometrica, 357–384.
Hamilton, J. D. (1994). Chapter 50 State-space models. Volume 4 of Handbook of
  Econometrics, pp. 3039 – 3080. Elsevier.
Hertwig, R., G. Barron, E. U. Weber, and I. Erev (2004). Decisions from Experience
   and the Effect of Rare Events in Risky Choice. Psychological Science 15, 534 C539.
Jin, L. J. (2015). A speculative asset pricing model of financial instability. Working
    Paper .
Kaustia, M. and S. Knüpfer (2008). Do Investors Overweight Personal Experience?
  Evidence from IPO Subscriptions. Journal of Finance 63, 2679–2702.
LeRoy, S. F. (2005). Excess Volatility. working paper .
LeRoy, S. F. and R. D. Porter (1981). The present value relation: Tests based on
   implied variance bounds. Econometrica 49, 555–574.
Lo, A. W. and J. Wang (2000). Trading volume: definitions, data analysis, and impli-
   cations of portfolio theory. Review of Financial Studies 13 (2), 257–300.
Malmendier, U. and S. Nagel (2011). Depression Babies: Do Macroeconomic Experi-
  ences Affect Risk-Taking? Quarterly Journal of Economics 126, 373–416.
Malmendier, U. and S. Nagel (2016). Learning from Inflation Experiences. Quarterly
  Journal of Economics 131, 53–87.
Malmendier, U. and L. S. Shen (2017). Scarred Consumption. Working paper, UC-
  Berkeley.
Oreopoulos, P., T. von Wachter, and A. Heisz (2012). The Short- and Long-Term Ca-
   reer Effects of Graduating in a Recession: Hysteresis and Heterogeneity in the Mar-
   ket for College Graduates. American Economic Journal: Applied Economics (4),
   1–29.
Schraeder, S. (2015). Information Processing and Non-Bayesian Learning in Financial
   Markets. Review of Finance, 1–31.
Shiller, R. J. (1981). Do stock prices move too much to be justified by subsequent
   changes in dividends? American Economic Review 71, 421–436.
Simonsohn, U., N. Karlsson, G. Loewenstein, and D. Ariely (2008). The tree of expe-
   rience in the forest of information: Overweighing experienced relative to observed
   information. Games and Economic Behavior 62 (1), 263–286.
Statman, M., S. Thorley, and K. Vorkink (2006). Investor overconfidence and trading
   volume. Review of Financial Studies 19 (4), 1531–1565.
Timmermann, A. G. (1993). How Learning in Financial Markets Generates Ex-
   cess Volatility and Predictability in Stock Prices. Quarterly Journal of Eco-
   nomics 108 (4), 1135–1145.


                                         52
Timmermann, A. G. (1996). Excess Volatility and Predictability of Stock Prices in
   Autoregressive Dividend Models with Learning. The Review of Economic Stud-
   ies 63 (4), 523–557.
Tversky, A. and D. Kahneman (1974). Judgment under uncertainty: Heuristics and
   biases. Science 4157, 1124–1131.
Vives, X. (2010). Information and Learning in Markets: The Impact of Market Mi-
   crostructure. Princeton University Press.
Weber, E. U., U. Böckenholt, D. J. Hilton, and B. Wallace (1993). Determinants of
  diagnostic hypothesis generation: effects of information, base rates, and experience.
  Journal of Experimental Psychology: Learning, Memory, and Cognition 19 (5),
  1151.
Woodford, M. (2013). Macroeconomic Analysis without the Rational Expectations
  Hypothesis. Annual Review of Economics 5 (1), forthcoming.




                                         53
Appendix A                  Proofs for Results in Section 2
Proof of Lemma 2.1. Let ∆(k) ≡ w(k, λ, age) − w(k, λ, age0 ) for all k ∈ {0, ..., age}. We need
to show that ∃k0 ∈ {0, ..., age0 } such that ∆(k) < 0 for all k ≤ k0 , and ∆(k) ≥ 0 for all k > k0 ,
with the last inequality holding strictly for some k.
   For k > age0 , ∆(k) > 0 since w(k, λ, age0 ) ≡ 0, and hence ∆(k) = w(k, λ, age) > 0, for all
k ∈ {age0 + 1, ..., age}.
                                                          w(k,λ,age)
   For k ≤ age0 , we note that ∆(k) > 0 ⇐⇒ Q(k) := w(k,λ,age       0 ) > 1. Hence, it remains to be
                              0
shown that ∃k0 ∈ {0, ..., age } such that Q(k) < 1 for all k ≤ k0 , and Q(k) ≥ 1 for all k > k0 .
Since the normalizing constants used in the weights w(k, λ, age) are independent of k (see the
definition in (5)), we absorb them in a constant c ∈ R+ and rewrite

                      (age + 1 − k)λ        h age + 1 − k iλ
         Q(k) = c ·                   = c ·                  = c · α(k)λ ∀k ∈ {0, ..., age0 }.   (32)
                      (age0 + 1 − k)λ        age0 + 1 − k
                             age+1−x                             age−age      0
  The function x 7→ α(x) = age                           0                                    0
                                0 +1−x has derivative α (x) = (age0 +1−x)2 > 0 for x ∈ [0, age + 1),

and hence Q(·) is strictly increasing over {0, ..., age0 }. Thus, to complete the proof, we only
have to show that Q(k) < 1 or, equivalently, ∆(k) < 0 for some k ∈ {0, ..., age0 }. We know that
Page                                            Page0
      ∆(k) = 0 because age                                         0
                          P
Pk=0                        k=0 w(k, λ, age) =      k=0 w(k, λ, age ) = 1, and we also know that
  age                                                                 0
  k=age0 +1 ∆(k) > 0 since ∆(k) = w(k, λ, age) > 0 for all k ∈ {age + 1, ..., age}. Hence, it must
be that ∆(k) < 0 for some k < age0 .


Appendix B                  Proofs for Results in Section 4
Proposition 4.1 directly follows from the following Lemma.

Lemma B.1. Let z ∼ N (µ, σ 2 ), then for any a > 0,
                                                                        µ
                                x∗ = arg max E[− exp{−axz}] =
                                            x                          aσ 2
and
                                                          1 µ2
                                                            
                                         1    ∗ 2
             max E[− exp{−axz}] = − exp − (σax ) = − exp − 2 .
              x                          2                2σ
Proof. See Online Appendix OA.1.1.

Proof of Proposition 4.2. We show the result for the guess pt = α + β0 dt + ... + βK dt−K with
K = q. This case shows the logic of the proof; the proof for the case starting from an arbitrary
lag K ≥ q is analogous but more involved, and omitted for simplicity.
                                                                            E n [st+1 ]
   From Lemma B.1, agents’ demand for the risky asset is given by xnt = γVt [st+1     ] . Plugging in
our guess for prices, and for β0 6= −1, we obtain:

                                (1 + β0 ) θtn + α + β1 dt + ... + βq dt−q+1 − pt R
                        xnt =                                                                    (33)
                                                 γ (1 + β0 )2 σ 2


                                                    54
                        1   Pt          n
By market clearing,     q      n=t−q+1 xt      = 1, which implies that
                                 Pt
                 (1 + β0 ) 1q      n=t−q+1 θt
                                             n
                                                         α + β1 dt + ... + βq dt−q+1 − pt R
                                                     +                                            = 1.
                        γ (1 +    β 0 )2 σ 2                         γ (1 + β0 )2 σ 2

By straightforward algebra and the definition of θtn , it follows that
              t
                  " t−n                     #
          1 X      X                          h                     i
(1 + β0 )               w (k, λ, t − n) dt−k + α − γ (1 + β0 )2 σ 2 + β1 dt + ... + βq dt−q+1 = pt R.
          q
          n=t−q+1     k=0

Plugging in (again) our guess for pt and using the method of undetermined coefficients, we find
the expressions for α and the β’s:

                                                   γ (1 + β0 )2 σ 2
                                               −                    =α                                         (34)
                                                       R−1
                              t−k
                        1     X
            (1 + β0 )                   w (k, λ, t − n) + βk+1 = βk R             ∀k ∈ {0, 1, ..., q − 1}      (35)
                        q
                            n=t−q+1

                                                                    0 = βq R.                                  (36)

   Let wk be the average of theP weights assigned to dividend dt−k by each generation in the
market at time t, i.e., wk = 1q tn=t−q+1 w (k, λ, t − n). Given that a weight of zero is assigned
toPdividends that a generation did not observe, i.e., for k > t − n, we can rewrite wk =
1   t−k
q   n=t−q+1 w (k, λ, t − n). Also using βq = 0 from equation (36) we obtain:

                            (1 + β0 ) wk + βk+1 = βk R                ∀k ∈ {0, 1, ..., q − 2}                  (37)
                                  (1 + β0 ) wq−1 = βq−1 R                                                      (38)

By solving this system of equations, we obtain the expressions in the proposition. In particular,
(1 + β0 ) (wq−2 + wq−1 /R) = βq−2 R for k = q − 2, (1 + β0 ) (wq−3 + wq−2 /R + wq−1 /R2 ) = βq−3 R
for k = q − 3, and so on. This allow us to express (37) and (38) as
                                        k−1
                                        X
                            (1 + β0 )         wq−(k−j) /Rj = βq−k R          for k = 1, ..., q.                (39)
                                        j=0

                                                    Pq−1       j
                                                                          Pq−1       j+1
                                                     j=0 wj /R             j=0 wj /R
The last expression (39) implies β0 =                Pq−1            =     Pq−1            (from plugging in k = q),
                                                   R− j=0 wj /Rj         1− j=0 wj /Rj+1
which in turn, plugged into (34) allows us to obtain the expression for α from (15) in Proposition
                                                     Pq−1−k
                                                           wk+j /Rj+1
                                                         j=0
4.2. And expression (39) implies βk =                   Pq−1                (from substituting k with q − k, and
                                                      1− j=0 wj /Rj+1
using the expression for β0 ) as expressed in equation (16) of the Proposition. The latter also
subsumes equation (38), solved for βq−1 , and the above formula for β0 , and hence holds for
k = 0, ...q − 1.
Proof of Proposition 4.3. For this proof, we use equations (37) and (38). In addition, note that
by construction, wk < wk−1 for λ > 0 since for all generations, w(k, λ, age) is decreasing in k
and more agents observe the realization of dt−(k−1) than dt−k . Given this, it follows that since

                                                               55
β0 > 0 then βq−1 > 0 and

                            1                 1
                   βq−1 =     (1 + β0 ) wq−1 < [(1 + β0 ) wq−2 + βq−1 ] = βq−2                    (40)
                            R                 R
In addition, if βk < βk−1 , then:
                         1                         1
                βk−1 =     [(1 + β0 ) wk−1 + βk ] < [(1 + β0 ) wk−2 + βk−1 ] = βk−2               (41)
                         R                         R
Thus, the proof that βk < βk−1 for all k ∈ {1, ..., q − 1} follows by induction.

Proof of Lemma 4.1. To show that β0 is increasing in λ, let Gq (λ) = q−1             k+1 . We thus
                                                                         P
                                                                           k=0 wk /R
             G (λ)
have β0 = 1−Gq q (λ) , and it suffices to show that G0q (λ) > 0 ∀q > 0 and ∀λ > 0. After some
algebra, the terms in Gq (·) can be re-organized as follows:
                                         q−1   age
                                         X   1X
                              Gq (λ) =             w(k, λ, age)/Rk+1                              (42)
                                             q
                                         age=0   k=0
                                               Page
Note that for any
               Pageage  ∈ {0, ..., q − 1}: Page k=0 w(k, λ, age) = 1 and (ii) for any λ1 , λ2 such that
                                           (i)
λ1 > λ2 > 0,      k=j w(k, λ1 , age) <        k=j w(k, λ2 , age). Thus, the weight distribution given
by λ2 first-order stochastically dominates the weight distribution given by λ1 . Since 1/R >
1/R 2    1/R3 > ... > 1/RP   q−1 , stochastic dominance implies that for all age ∈ {0, ..., q − 1},
Page >k+1
  k=0 c    w(k, λ1 , age) > age k=0 c
                                      k+1 w(k, λ , age), and thus G (λ ) > G (λ ).
                                                 2                  q 1       q 2
   To show the limit results, note that limλ→∞ w(0, λ, age) = 1, while limλ→∞ w(k, λ, age) = 0
for all k > 0.

Proof of Proposition 4.4. From Propositions 4.1 and 4.2, we know that, for any t, any genera-
tions m ≥ n both in {t − q + 1, ..., t} and any k ∈ {0, ...., q − 1},

                                ∂(xnt − xm
                                         t )   (1 + β0 ) ∂(θtn − θtm )
                                             =                         .
                                  ∂dt−k        γV [st+1 ] ∂dt−k
                                                    ∂θtn
We note that, for any n ∈ {t − q + 1, ..., t},     ∂dt−k   = w(k, λ, n − t) if k ∈ {0, ..., t − n}, and
 ∂θtn
∂dt−k  = 0 if k ∈ {t − n + 1, ..., q − 1}. (Observe that t − n ≤ q − 1.) Hence, it suffices to
compare w(k, λ, t − n) with w(k, λ, t − m) for any k ∈ {0, ..., q − 1}. (As usual, here we adopt the
convention that for any age, w(k, λ, age) = 0 for all k ≥ age.) From Lemma 2.1, there exists a
k0 such that w(k, λ, t−n) < w(k, λ, t−m) for all k ∈ {0, ..., k0 } and w(k, λ, t−n) ≥ w(k, λ, t−m)
for the rest of the k’s, k ∈ {k0 + 1, ..., q − 1}.

The proof of Proposition 4.5 relies on the following first-order stochastic dominance result:

Lemma B.2. For any a ∈ {0, 1, ...}, a0 < a and any m ∈ {0, ..., a}, let F (m, a) ≡
P  m                                                                                0
   j=0 w(j, λ, a). Suppose the conditions of Lemma 2.1 hold; then F (m, a) ≤ F (m, a ) for
all m ∈ {0, ..., a}.

Proof. See Online Appendix OA.1.1.


                                                  56
Proof of Proposition 4.5. We first introduce some notation. For any j ∈ {t − n − k + 1, ..., t − n},
let w(j, λ, t − n − k) = 0; i. e., we define
                                       P the weights of generation nP   + k for time periods before
they were born to be zero. Thus, t−n−k   j=0 w(j, λ, t − n − k)d t−j =    t−n
                                                                          j=0 w(j, λ, t − n − k)dt−j .
                                              t−n                      t−n
In addition, we note that (w(j, λ, t − n − k))j=0 and (w(j, λ, t − n))j=0 are sequences of positive
weights that add to one.
   Let for any m ∈ {0, ..., t − n},
                                m
                                X                                                    m
                                                                                     X
           F (m, t − n − k) =         w(j, λ, t − n − k) and F (m, t − n) =                w(j, λ, t − n).
                                j=0                                                  j=0

These quantities, as functions of m, are non-decreasing and F (t−n, t−n−k) = F (t−n, t−n) = 1.
Moreover, F (m + 1, t − n − k) − F (m, t − n − k) = w(m + 1, λ, t − n − k) and F (m + 1, t − n) −
F (m, t − n) = w(m + 1, λ, t − n). Finally, we set F (−1, t − n) = F (−1, t − n − k) = 0.
   By these observations, by the definition of ξ(n, k, t), and by straightforward algebra, it follows
that,

 ξ(n, k, t)
  Pt−n                                           Pt−n
   m=0 (F (m, t − n) − F (m − 1, t − n))dt−m −     m=0 (F (m, t − n − k) − F (m − 1, t − n − k))dt−m
=
                                              γ(1 + β0 )σ 2
  Pt−n−1
   j=0 (dt−j − dt−j−1 )(F (j, t − n) − F (j, t − n − k))
=                                                        .
                      γ(1 + β0 )σ 2

   If the weights are non-decreasing, then dt−j − dt−j−1 ≥ 0 for all j = 0, ..., t − n − 1, and it
suffices to show that F (j, t − n) ≤ F (j, t − n − k) for all j = 0, ..., t − n − 1. This follows from
applying Lemma B.2 with a = t − n > t − n − k = a0 .
   If the weights are non-increasing, then dt−j − dt−j−1 ≤ 0, and the sign of ξ(n, k, t) changes
accordingly.

Proof of Proposition 4.6. By Propositions 4.1 and 4.2, it follows that for any t and n ≤ t,

                                                                           q−1
                                                                                                       !
                 1                                                         X
    xnt   =                 α0 (1 − R) + (1 +      β0 )θtn   − Rβ0 dt +          βk (dt+1−k − Rdt−k ) .      (43)
            γσ (1 + β0 )2
              2
                                                                           k=1

  Thus, for n ∈ {t − q + 1, ..., t − 1},

                                              (1 + β0 )(θtn − θt−1
                                                               n ) + T (d
                                                                          t:t−q )
                            xnt − xnt−1 =                                                                    (44)
                                                        γσ 2 (1 + β0 )2

where T (dt:t−q ) ≡ q−1
                      P
                        k=1 βk (dt+1−k − dt−k − R(dt−k − dt−1−k )) − Rβ0 (dt − dt−1 ). Note that
T (dt:t−q ) is not cohort specific, i.e., does not depend on n.
   The fact that xtt − xtt−1 = xtt and xt−qt   − xt−q     t−q
                                                  t−1 = −xt−1 , and market clearing imply

                                                t
                                                                    !
                                                X
                                       q −1           xnt − xnt−1       = 0.                                 (45)
                                              n=t−q



                                                       57
This expression and the expression in (44) imply that
                                               
        t−1              n    n                         t
 1     X     (1 + β0 )(θt − θt−1 )    t    t−q    1 X       T (dt:t−q )        T (dt:t−q )
                              2     + xt − xt−1 = −                       2 =−                 .
 q
      n=t−q+1
                    2
                 γσ (1 + β0 )                       q n=t−q γσ (1 + β0 )
                                                              2                γσ 2 (1 + β0 )2

         t
Letting θt−1 = θtt−q = 0, it follows that
                               t
                                                                 !
                          1    X
                                      (1 +   β0 )(θtn   −    n
                                                            θt−1 )   = −T (dt:t−q ).
                          q   n=t−q

Thus, we can express the change in individual demands for those agents with n = {t − q +
1, ..., t − 1} in expression (44) as follows:
                                                  t
                               "                                #
                 n    n           n     n
                                            1 X       n   n
                                                              
                xt − xt−1 = χ θt − θt−1 −             θ − θt−1 , ∀n ∈ {t, ..., t − q} (46)
                                              q n=t−q t

               1
where χ ≡ γσ2 (1+β0)
                     . By squaring and summing at both sides and including the demands on
the youngest (n = t) and oldest (n = t − q) market participants the desired result follows.



Appendix C                 Proofs for Results in Section 7
In this section, we present the proofs to Propositions 7.1-7.4. In order to prove the first
two propositions, we first establish the following four lemmas. (The proofs of the lemmas
are relegated to the Online Appendix OA.1.2.)

Lemma C.1. Suppose z ∼ N (µ, σ 2 ), then for any A, B ∈ R and C ≥ 0, z 7→ K −1 exp{−A−
                                                                                  2
Bz − Cz 2 }φ(z; µ, σ 2 ) is Gaussian with mean m ≡ −Σ2 B + Σ2 σ −2 µ and Σ2 ≡ 2Cσσ2 +1 ,
where
                                                1                               m2
   K = EN (µ,σ2 ) [exp{−A − Bz − Cz 2 }] = √           exp{−(A + 0.5σ −2 µ2 ) +     }.
                                            2σ 2 C + 1                          2Σ2

Lemma C.2. Demands for the risky asset in the last two period of a cohort-n agent’s
                                           n
                                          En+q−1  [sn+q ]
life are given by xnn+q = 0 and xnn+q−1 = γσ 2 (1+β )2
                                                    0
                                                          ∀n ∈ Z, q ≥ 1.

Lemma C.3. Let z ∼ N (µ, σ 2 ). Let A, B ∈ R and C ≥ 0, and z 7→ h (z) ≡ f + ez for




                                                        58
any e, f ∈ R.Then

                    maxE[− exp{−A − Bz − Cz 2 } exp{−axh (z)}]
                     x
                                                                  "                 #
                                                                                  2
                                                 1 µ2 m2            1 µ̃ (m, s2 )
                                                          
                                 1
                       = −√             exp −A −       − 2     exp − 2
                             2σ 2 C + 1          2 σ2     s         2 σ̃ (m, s2 )
                                                            2 µ̃ (m, s2 )
       and     arg maxE[− exp{−A − Bz − Cz } exp{−axh (z)}] = 2           ,
                    x                                        aσ̃ (m, s2 )
                                          σ2
with m = s2 [σ −2 µ − B] , s2 =         2Cσ 2 +1
                                                 ,   µ̃ (m, s2 ) = EN (m,s2 ) [h (z)] , σ 2 (m, s2 ) = VN (m,s2 ) [h (z)].

For Lemma C.4, let β(k) = βk+1 − rβk for k ∈ {0, ..., K − 1} and β(K) = −rβK .

Lemma C.4. Suppose pt = α + K
                                   P
                                     k=0 βk dt−k with β0 6= −1. Then the demand for risky
assets of any cohort alive at time t is an affine function of past dividends, where the
coefficients associated with a given dividend depend on the agent’s age. That is,
                                                K
                                                X
                       xt−age
                        t       = δ(age) +            δk (age)dt−k f or age ∈ {0, ..., q}                     (47)
                                                k=0

with

                    δ(q) = δk (q) = 0                                               ∀k ∈ {0, ..., K}          (48)
                              α(1 − R)
               δ(q − 1) =                                                                                     (49)
                           γ((1 + β0 )σ)2
                           (1 + β0 )w(k, λ, q − 1) + β(k)
              δk (q − 1) =                                                       ∀k ∈ {0, ..., q − 1}         (50)
                                    γ((1 + β0 )σ)2
                                 β(k)
              δk (q − 1) =                                                          ∀k ∈ {q, ..., K},         (51)
                           γ((1 + β0 )σ)2

and for age ∈ {0, ..., q − 2},
             α(1 − R) − s2age (1 + β0 )δ0 (age + 1)δ(age + 1)(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2
 δ(age) =                                                                                          ,           (52)
                                           Rq−1−(age) γ((1 + β0 )sage )2
             (1 + β0 )s2age (σ −2 w(k, λ, age) − [(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2 δk+1 (age + 1)δ0 (age + 1)]) + β(k)
δk (age) =
                                                      Rq−1−(age) γ((1 + β0 )sage )2
                                                                                                                (53)
             ∀k ∈ {0, ..., q − 1},
             −(1 + β0 )s2age [(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2 δk+1 (age + 1)δ0 (age + 1)] + β(k)
δk (age) =                                                                                             ,       (54)
                                          Rq−1−(age) γ((1 + β0 )sage )2
             ∀k ∈ {q, ..., K − 1}
                        β(K)
δK (age) =                                 ,                                                                   (55)
             Rq−1−(age) γ((1 + β0 )sage )2



                                                           59
                                                        σ2
and sq−1 = σ and s2age ≡       (Rq−1−(age+1) γ)2 ((1+β0 )sage+1 )2 (δ0 (age+1))2 σ 2 +1


We now prove Proposition 7.1. We first note that the expressions for bj , bj (k) and cj for
j ∈ {0, ..., q − 1} in the proposition are:

                                bj ≡(Rq−1−j γ)2 ((1 + β0 )σj )2 δ(j)δ0 (j)
                            bj (k) ≡δk (j)δ0 (j)(Rq−1−j γ)2 ((1 + β0 )σj )2

and, cq−1 = 1 and

                           cj−1 = 0.5(Rq−1−(j+1) γ)(1 + β0 )σj+1 δ0 (j + 1)

for j ∈ {0, ..., q − 2}.
                                                                                          EN (m       2     [st+q ]
                                                                                                q−1 ,σq−1 )
Proof of Proposition 7.1. By Lemma B.1, it follows that xtt+q−1 =                         γVN (m        2     [st+q ]
                                                                                                                        with
                                                                                                  q−1 ,σq−1 )
        t
mq−1 = θt+q−1 and σq−1 = σ, and that

                             t
                                                                 2
                           Vt+q−1 = − exp{−0.5 (1 + β0 )σγxtt+q−1 }.
                                                          t
By Lemma C.4, xtt+q−1 is affine in dt+q−1−K:tq and thus Vt+q−1  = − exp{−A − Bdt+q−1 −
          2
C(dt+q−1 ) }, where A, B, and C depend on primitives and on dt+q−1−K:t+q−2 . In partic-
ular, B is affine in dt+q−1−K:t+q−1−1 and C is constant with respect to dt+q−1−K:t+q−1 :

               1
            C ≡ γ 2 ((1 + β0 )σq−1 )2 (δ0 (q − 1))2
               2                                                        !
                                                   XK
            B ≡γ 2 ((1 + β0 )σq−1 )2 δ(q − 1) +       δk (q − 1)dt+q−1−j δ0 (q − 1)
                                                            j=1
                                                             K
                                                                                           !2
               1                                             X
            A ≡ γ 2 ((1 + β0 )σq−1 )2        δ(q − 1) +            δk (q − 1)dt+q−1−j           .
               2                                             j=1


(See Lemma C.4 for the expressions for δ(q − 1) and (δk (q − 1))K  k=1 .)
  At time t + q − 2, by equation (29),

           xtt+q−2 = arg max Et+q−2
                              t
                                     t                                        
                                     Vt+q−1 (dt+q−1−K:t+q−1 ) exp (−γst+q−1 x)
                              x∈R

                                                t
where the expectation is taken with respect N (θt+q−2 , σ 2 ). Hence, by Lemma C.1, this
problem can be cast as

                    xtt+q−2 = arg max EN (mq−2 ,σq−2 ) [− exp (−Rγst+q−1 x)] ,
                                     x∈R




                                                       60
                       t
                      θt+q−2             2            σ2
where mq−2 = σq−2 (      σ2
                               − B) and σq−2 =      2Cσ 2 +1
                                                             .   Hence, by lemma B.1

                                             EN (mq−2 ,σq−2
                                                        2   ) [st+q−1 ]
                                xtt+q−2 =                                  .
                                            γRVN (mq−2 ,σq−2
                                                         2   ) [st+q−1 ]

                                                                        2
                      t                                            t
Also, by Lemma B.1, Vt+q−2 = − exp{−0.5 VN (mq−2 ,σq−2
                                                   2    [s
                                                       ) t+q−1 ]Rγxt+q−2    }. By Lemma
C.4, xtt+q−2 is affine and thus Vt+q−2
                                  t
                                       = − exp{−A − Bdt+q−2 − C(dt+q−2 )2 }, where A,
B, and C depend on primitives and on dt+q−2−K:t+q−3 . In particular B is affine in
dt+q−2−K:t+q−3 and C is constant with respect to dt+q−1−K:t+q−1 :

            1
         C ≡ (Rγ)2 ((1 + β0 )σq−2 )2 (δ0 (q − 2))2
            2                                                          !
                                                  XK
         B ≡(Rγ)2 ((1 + β0 )σq−2 )2 δ(q − 2) +       δk (q − 2)dt+q−2−j δ0 (q − 2)
                                                         j=1
                                                            K
                                                                                !2
            1                                   X
         A ≡ (Rγ)2 ((1 + β0 )σq−2 )2 δ(q − 2) +     δk (q − 2)dt+q−2−j               .
            2                                   j=1


(Observe that the A, B, and C here are not the same as the previous ones; the expressions
for δ(q − 2) and (δk (q − 2))K k=1 can be found in the statement of Lemma C.4).
   The result for j ∈ {0, ..., q − 3} follows by iteration.
Proof
Pq−1 of Proposition 7.2.PMarket     Clearing and Lemma C.4 imply that, for all k ∈ {0, ..., K},
                            q−1
  age=0 δk (age) = 0 and    age=0 δ(age) = q.
  For k = K, it follows from equations (51) and (55)
          q−1                      q−1
                                                                                   !
          X                        X                1                     1
               δK (age) = β(K)                                     +
         age=0                    age=0
                                        Rq−1−age γ((1 + β0 )sage )2 γ((1 + β0 )σ)2

therefore β(K) = 0 which implies that βK = 0 and β(K − 1) = −RβK−1 and δK (age) = 0
for any age.
   For k = K − 1, by equations (51) and (54), we have
        q−1                          q−2
                                                                                 !
        X                            X              1                   1
             δK−1 (age) = β(K − 1)                               +                 ,
       age=0                        age=0
                                          Rq−1 γ((1 + β0 )sage )2 γ((1 + β0 )σ)2

and thus β(K − 1) = 0, which implies that βK−1 = 0 and β(K − 2) = −RβK−2 and
δK−1 (age) = 0 for any age.
  By induction, for any k ∈ {q, ..., K − 2}, taking βk+1 = 0, it follows by equations (51)




                                                   61
and (54), that
         q−1                       q−2
                                                                                      !
         X                         X              1                        1
               δk (age) = β(k)         q−1−age                   2
                                                                   +                      ,
         age=0                 age=0
                                     R         γ((1 + β0 )sage )     γ((1 + β0 )σ)2

and thus β(k) = 0 which implies βk = 0 and β(k − 1) = −Rβk−1 and δk (age) = 0 for any
age ∈ {q, ..., K}.


Proof of Proposition 7.3. Throughout the proof, let w0 ≡ w(0, λ, 0).
  We know from Lemma OA.2.1 in the Online Appendix OA.2 that {α, β0 , β1 } solve the
system of equations given by (74) and (75) and (73) in Online Appendix OA.2.
  Step 1. By equation (73),

                                      σ 2 [(1 + β0 )w(0, λ, 0) + β1 − Rβ0 ]
                                                                           
                     2   2
       2Rγ (1 + β0 ) σ = α (1 − R) R + 2 −                                    .
                                      s                1 + β0

We note that R > 1 ≥ w(0, λ, 0). Thus, if 0 < β1 < Rβ0 and 1 + β0 > 0, then

                        σ 2 [(1 + β0 )w(0, λ, 0) + β1 − Rβ0 ]
                                                             
                    R+ 2 −                                      >0
                        s                   1 + β0

and α ≤ 0.
  Step 2. We show that if 1 + β0 > 0, then 0 < β1 < Rβ0 .
  For 1 + β0 > 0, equation (75) implies β1 > 0 and l (1, 1) > 0. Now assume that
β1 − Rβ0 > 0. This implies that l (0, 1) > 0. For equation (74) to hold it must be that
1 − R1 l(1,1)
       1+β0
              < 0; but

                             1 l(1, 1)          1               β1
                      1−                 2 = 1−   (1 − w0 ) +        >0                       (56)
                             R (1 + β0 )        R             1 + β0

since R > 1, w0 < 1, and β1 > 1. Contradiction. Then, 1 + β0 > 0 ⇒ β1 − Rβ0 < 0.
                                                        σ2
  Step 3. We now show that 1 + β0 > 0. Let φ ≡          s2
                                                             > 1. From equation (75), we know

                                    (1 + β0 ) (1 − w0 )
                                                        = β1 .
                                         φ+R

We plug this into equation (74) and obtain

                (1 + β0 ) (1 − w0 )        (1 + β0 ) (1 − w0 )
                                                                                 
   φ −β0 R +                          +R                       + (1 + β0 ) w0 − β0 R + ...
                      φ+R                        φ+r
                   φ(1 − w0 ) (1 + β0 − β0 φR − β0 R2 + (1 + β0 ) (φ + R − 1) w0 )
                                                                                   
     + 1 + β0 −                                                                       = 0.
                                              (φ + R)2

                                               62
  Note that this is a linear equation in β0 . Therefore,
                                                            φ(1−w0 )(1+(φ+R−1)w0 )
                                   2 − w0 (1 − R) −                 (φ+R)2                                                 A
   β0 = −                                                                                    h                   i ≡−         ,
               2 − w0 (1 − R) −           φ(1−w0 )(1+(φ+R−1)w0 )
                                                                    − (Rφ + R2 ) 1 −                  φ(1−w0 )            A−x
                                                  (φ+R)2                                              (φ+R)2

                                                                                           h                                i
                                             φ(1−w0 )(1+(φ+R−1)w0 )                                                 φ(1−w0 )
where A ≡ 2 − w0 (1 − R) −                           (φ+R)2
                                                                         and x ≡ (Rφ + R2 ) 1 −                      (φ+R)2
                                                                                                                                > 0.
                                                                                                      ∂β0          A
Note that for x = 0 ⇒ β0 = −1. Then, it suffices to show that            =             that           ∂x         (A−x)2
                                                                                                                        ≥ 0,
is, A ≥ 0. For w0 = 0.5, which corresponds to λ = 0, A is positive, i.e., A(0.5) > 0. In
                           2 +φ(R−2(1−w )))
           ∂A
addition, ∂w 0
               = (φ+R−1)(R(φ+R)  2
                                       0
                                            > 0 for w0 ≥ 0.5. Therefore, A > 0 for w0 ≥ 0.5.
   If we are interested in λ < 0 cases, since A(0) > 0, all we need to ensure that A is
positive, and thus the result holds for w0 ∈ [0, 0.5), is that R ≥ 2(1 − w0 ).


  In order to show Proposition 7.4, we need the two following lemmata. (Their proofs
are relegated to the Online Appendix OA.1.2.)

Lemma C.5. For λ ≥ 0, 1 + β0 + β1 − rβ0 > 0.

Lemma C.6. Given our linear guess for prices (6), when q = 2, at time t:

              Ett−1 [st+1 ]        α (1 − R)            l (0, 1)            l (1, 1)
    xt−1
     t   =                    =             2    +              2 d t +                  dt−1                                   (57)
            γR (1 + β0 ) σ 2     γ (1 + β0 ) σ 2 γ (1 + β0 ) σ 2        γ (1 + β0 )2 σ 2
            EΦ(m,s2 ) [st+1 ]
      xtt =                   = δ(0) + δ0 (0)dt + δ1 (0)dt−1                                                                    (58)
             R(1 + β0 )s2

with l(0, 1) ≡ [(1 + β0 )w(0, λ, 0) + β1 − Rβ0 ] and l(1, 1) ≡ [(1
                                                                  
                                                                    + β0 )w(1, λ, 0) − Rβ1 ], and
                       2                                             2        l(1,1)l(0,1)
                                                    β1 −Rβ0 +(1+β0 ) s 2 1−
                  h                i
                          l(0,1)
            α(1−R) 1− s 2                                           σ           (1+β0 )2                         Rβ1
                      σ (1+β0 )
δ(0) =                   2 2
                γR(1+β0 ) s
                                       , δ0 (0) =             γR(1+β0 )2 s2
                                                                                             , and δ1 (0) = − Rγ(1+β 0 )s
                                                                                                                          2.


Proof of Proposition 7.4. By Lemma C.6 and market clearing, it follows that

                                                              l (0, 1)
                                               δ0 (0) +                    = 0,
                                                          γ (1 + β0 )2 σ 2

and
                                                              l (1, 1)
                                               δ1 (0) +                    = 0.
                                                          γ (1 + β0 )2 σ 2

                                                                ∂xt−1           l(0,1)               ∂xt           ∂xtt
These expressions and Lemma C.6 imply that                        t
                                                                 ∂dt     =   γ(1+β0 )2 σ 2
                                                                                                 = − ∂dtt , and   ∂dt−1   = δ1 (0) =
   ∂xtt
− ∂dt−1 .   Therefore, it suffices to show that l(0, 1) < 0 and δ1 (0) < 0.
                                                               Rβ1
  By Proposition 7.3, β1 > 0 and β0 > 0 and thus δ1 (0) = − Rγ(1+β 0 )s
                                                                        2 < 0. So it only remains




                                                               63
to show that l(0, 1) < 0. To show this, note that from the equilibrium condition (74) we have

                                         l (0, 1)2
                          
                  l(1, 1)
           0= R−             l (0, 1) +            (β1 − Rβ0 ) + [1 + β0 + β1 − Rβ0 ] .
                 (1 + β0 )              (1 + β0 )2
                                                       l(0,1)
From Lemma C.5, 1 + β0 + β1 − Rβ0 > 0. Let x =         1+β0 ,   then

               0 = [R (1 + β0 ) − l(1, 1)] x + x2 (β1 − Rβ0 ) + [1 + β0 + β1 − Rβ0 ] ,

or equivalently F (x) ≡ ax2 + bx + c, with a = β1 − Rβ0 < 0 (by Proposition 7.3), b =
R (1 + β0 ) − l(1, 1) = R (1 + β0 ) − (1 + β0 )w(1, λ, 0) + Rβ1 > 0 (by Proposition 7.3) and c =
1 + β0 + β1 − Rβ0 > 0 (by Lemma C.5). Thus, F is concave and F (0) = c > 0. By definition
of F , l(0, 1)/(1 + β0 ) must be a root of F . Let x∗ = arg maxx∈R F (x), which is given by
x∗ = − 2ab
            > 0. Therefore, F (.) has two roots x1 , x2 with x1 < 0 < x∗ < x2 .
   We now show that x2 = l(0,1)
                              1+β0 cannot hold. Suppose not, that is, assume that our solution
                       l(0,1)                      ∗                                b        l(0,1)
is the positive root   1+β0 = x2 . Then, since x < x2 and a < 0, we have 2 < −a 1+β0 , or
equivalently, R(1+β02)−l(1,1) < l (0, 1) Rβ 0 −β1
                                          1+β0 .
                −Rβ0
   Let Z ≡ − β11+β 0
                      . Then the last inequality implies that R (1 + β0 )−(1 + β0 ) (1 − w0 )+Rβ1 <
2l (0, 1) Z. (Recall that w0 ≡ w(0, λ, 0) and w(1, λ, 0) = 1 − w0 .) By replacing l(0, 1) and some
                      h R (1 + β0 ) − i(1 + β0 ) (1 − w0 ) + Rβ1 < 2Z [(1 + β0 ) w0 + β1 − Rβ0 ], or
algebra, it follows that
              1     1             β1
equivalently 2 w0 + 2 R − 1 + R 1+β  0
                                        < Z (w0 − Z). We note that the RHS is bounded by w0 /4
since no matter the value of Z, the function z 7→ z(w0 −z) cannot be larger than (w0 )2 /4 < w0 /4
(since w0 ∈ [0, 1]). Therefore,
                                                               
                                 w0 w0 1                   β1
                                    >    +      R−1+R             .
                                  4    2    2            1 + β0
            h                  i
                          β1
However, 12 R − 1 + R 1+β    0
                                 > 0; thus a contradiction follows. The solution must be the
negative root.




                                                 64
                             Online Appendix
Appendix OA.1                  Proofs of Supplementary Lemmas
OA.1.1       Proofs of Supplementary Lemmas in the Appendix B
Proof of Lemma B.1. Since z ∼ N (µ, σ 2 ), we can rewrite the problem as follows:
                                                                
                     ∗                                1 2 2
                    x = arg max − exp −axE[z] + a x V [z]
                              x                       2
                                            1
                       = arg max axµ − a2 x2 σ 2
                              x             2
From FOC, x∗ = aσµ2 . Plugging x∗ into − exp −ax∗ µ + 12 a2 (x∗ )2 σ 2 the second result
                                                                      

follows.
Proof of Lemma B.2. From Lemma 2.1, we know that there exists a unique j0 where
w(j0 , λ, a0 ) − w(j0 , λ, a) “crosses” zero. Thus, for m ≤ j0 , the result is true because
w(j, λ, a0 ) > w(j, λ, a) for all j ∈ {0, ...m}. For m > j0 , the result follows from the fact
that w(j, λ, a0 ) < w(j, λ, a) for all j ∈ {m, ...a} and F (a, a) = F (a0 , a0 ) = 1.

OA.1.2       Proof of Supplementary Lemmas in the Appendix C
                                                   2         2
   R of Lemma C.1. Let ϕ(z) ≡ K exp{−(A + Bz + Cz )}φ(z; µ, σ ). By definition of
Proof
K, ϕ(z)dz = 1 and ϕ ≥ 0, so it is a pdf. Moreover,

        K −1
 ϕ(z) = √     exp{−A − Bz − Cz 2 − 0.5σ −2 (z − µ)2 }
          2πσ
           1
      = √       exp{−z 2 (C + 0.5σ −2 ) − 2z(0.5B − 0.5σ −2 µ) − (A + 0.5σ −2 µ2 )}
        K 2πσ
                                                                       (−B + σ −2 µ)
                                                                                    
           1                    −2 2                      −2     2
      = √       exp{−(A + 0.5σ µ )} exp{−0.5(2C + σ ) z − 2z                          }.
        K 2πσ                                                           (2C + σ −2 )

  Let Σ2 ≡ (2C + σ −2 )−1 , m ≡ Σ2 (σ −2 µ − b), and K =    √      1
                                                                2σ 2 C+1
                                                                           exp{−(A + 0.5σ −2 µ2 ) +
m2
2Σ2
    }:

         1                 µ2       m2         z 2 − 2zm + m2
ϕ(z) =  √    exp{−(a + 0.5 2 ) +       } exp{−                 }
      K 2πσ                σ       2Σ2                2Σ2
         1                             m2          (z − m)2        1        (z − m)2
     = √     exp{−(a + 0.5σ −2 µ2 ) +     } exp{−           } =  √    exp{−          }
      K 2πσ                           2Σ2             2Σ2         2πΣ          2Σ2
        1         (z − m)2
     =√     exp{−          }
       2πΣ2          2Σ2


                                              1
Proof of Lemma C.2. At time n + q, an agent born in n is in the last period of his life,
consuming all of its wealth. Therefore, he will sell all of his claims to the assets he holds
and consume. The gain from saving is zero, and therefore the holding of financial assets
is also zero by the end of this period: xnn+q = 0, ann+q = 0. Given this, we can compute
the portfolio choice of an agent of age q − 1, who will want to save for next period when
all wealth will be consumed. The agent’s problem is a standard static portfolio problem,
with initial wealth Wnnq :
         t                n                        n
                                       
    max En+q−1  − exp −γ Wn+q−1 + xsn+q     = max En+q−1 [− exp (−γxsn+q )]               (59)
     x                                                         x

At time n + q − 1, the only random variable  is dn+q , which is normally distributed, and
                 n                        2
thus sn+q ∼ N En+q−1 [sn+q ] ; (1 + β0 ) σ . Given this, the agent’s problem becomes:
                                                                     
                                     n+q−1          1 2 2            2
                  max − exp −γxEn          [sn+q ] + γ x (1 + β0 ) σ                      (60)
                   x                                2
                                        1
               ⇐⇒ max xEnn+q−1 [sn+q ] − γx2 (1 + β0 )2 σ 2 .                             (61)
                   x                    2
  And therefore, by FOC:
                                                   n
                                                  En+q−1   [sn+q ]
                                    xnn+q−1 =                      .                      (62)
                                                  γσ 2 (1 + β0 )2


Proof of Lemma C.3. Note that E[− exp{−A−Bz −Cz 2 } exp{−axh (z)}] can be written
as:
                                                              1z −µ
         Z                                                         
                                              2     1
            exp{−axh (z)} − exp{−A − Bz − Cz } √        exp −         dz
                                                  2πσ 2       2 σ2
By Lemma C.1, we know that his can be re-written as:
                                  2
                                       m2
                                          Z
             1                    µ
                                                − exp{−axh (z)}Φ m, s2 dz
                                                                       
       √            exp −A − 0.5    2
                                      − 2
         2σ 2 C + 1               σ     s
                                       σ2
with m = −s2 B +sσ −2 µ and s2 =     2Cσ 2 +1
                                              .   Therefore, the maximization problem becomes:

                              max EN (m,s2 ) [− exp{−axh (z)}]
                                x

                                                                     2
with EN (m,s2 ) [·] being the expectations
                                                       z ∼ N (m, s ). Since h(z) is lin-
                                           operator over
                                                     2
ear, we know that h (z) ∼ N µ̃ (m, s2 ) , σ̃ (m, s2 ) , with µ̃ (m, s2 ) = EN (m,s2 ) [h (z)],




                                                   2
             2
σ̃ (m, s2 ) = VN (m,s2 ) [h (z)], by Lemma B.1, we know that
                                                                        
                                      2                      µ̃ m, s2
   arg max E[− exp{−A − Bz − Cz } exp{−axh (z)}] =                      2
         x                                         aσ̃ (m, s2 )
                                                                                     2
                                                                                         m2
                                                                                           
                               2                            1                        µ
       max E[− exp{−A − Bz − Cz } exp{−axh (z)}] = − √             exp −A − 0.5         − 2
        x                                               2σ 2 C + 1                   σ2   s
                                                                                2
                                                               "                 #
                                                                    µ̃ m, s2
                                                       × exp −0.5               2
                                                                    σ̃ (m, s2 )



  Let t 7→ ρ(t) ≡ γt2 and let
                                      K
                                      X                      K
                                                             X
   Λ(dt−K , ..., dt ) ≡α(1 − R) +            βk dt+1−k − R         βk dt−k                                (63)
                                      k=1                    k=0
                                      K−1
                                      X                      XK                             K
                                                                                            X
                     =α(1 − R) +             βj+1 dt−j − R         βk dt−k = α(1 − R) +           β(k)dt−k
                                       j=0                   k=0                            k=0


with β(k) = βk+1 − Rβk for k ∈ {0, ..., K − 1} and β(K) = −RβK . We use Λτ to denote
Λ(dτ −K , ..., dτ ).
Proof of Lemma C.4. We divide the proof into several steps.

   Step 1 It is straightforward that demand for risky assets can only be positive for a
generation that is alive. From Lemma C.2, we know that xt−q t  = 0 and that xt−q+1
                                                                               t     =
Ett−q+1 [st+1 ]
γ((1+β0 )σ)2
                . Therefore,

      δ(q) = δk (q) = 0, ∀k ∈ {0, ..., K}
                α(1 − R)                     (1 + β0 )w(k, λ, q − 1) + β(k)
 δ(q − 1) =                2
                             , δk (q − 1) =                                 , ∀k ∈ {0, ..., q − 1}
             γ((1 + β0 )σ)                            γ((1 + β0 )σ)2
                   β(k)
δk (q − 1) =                 , ∀k ∈ {q, ..., K}.
             γ((1 + β0 )σ)2

We also know from Lemma B.1 that
                                                                                  2                    
                                                                   K
                                   1                              X
  V q−1 (dt−K , ..., dt ) = − exp − dt δ0 (q − 1) + δ(q − 1) +     δk (q − 1)dt−j  γ 2 ((1 + β0 )sq−1 )2 
                                                                                                            
                                    2                            j=1



 where sq−1 = σ 2 . Henceforth, we denote V q−1 (dt−K , ..., dt ) by Vtt−q+1 . In particular,
  t+1−q+1     t−q+2
Vt+1      = Vt+1    = V q−1 (dt+1−K , ..., dt+1 ).

  Step 2. We now derive the risky demand and continuation value for generation aged


                                                      3
q − 2. The problem of generation aged q − 2 at time t is given by,

                        max Ett−q+2 Vt+1
                                     t−q+2                  
                                            exp (−γRxst+1 ) .                                         (64)
                              x

  By the calculations in step 1, and using Λt as defined in (63), this problem becomes:

  V q−2 (dt−K , ..., dt )                                                          (65)
                                                                              
                            1   2 2
 = max Ett−q+2 − exp − xq−1   t   γ ((1 + β0 )sq−1 )2 − γRx((1 + β0 )dt+1 + Λt ) . (66)
    x                       2
                                            PK
with xq−1
      t   = dt+1 δ0 (q − 1) + δ(q − 1) +      j=1 δk (q   − 1)dt+1−j .
  Observe that
                                                K
                                                                         !2
           1                                    X
         −       dt+1 δ0 (q − 1) + δ(q − 1) +         δk (q − 1)dt+1−j        γ 2 ((1 + β0 )sq−1 )2
           2                                    j=1
                                              K
                                                                  !2
           1 2                              X
       = − γ ((1 + β0 )sq−1 )2 δ(q − 1) +        δk (q − 1)dt+1−j
           2                                 j=1
                                            K
                                                               !
                                            X
         − γ 2 ((1 + β0 )sq−1 )2 δ(q − 1) +    δk (q − 1)dt+1−j δ0 (q − 1)dt+1
                                                j=1
          1
         − γ 2 ((1 + β0 )sq−1 )2 (δ0 (q − 1))2 d2t+1 ,
          2
and that future dividends are the only random variable, with dt+1 ∼ N θtt−q+2 , σ 2 .
                                                                                   

Therefore, by Lemma C.3, and with:
                                                         K
                                                                                  !2
                1                                        X
             A = γ 2 ((1 + β0 )sq−1 )2    δ(q − 1) +           δk (q − 1)dt+1−j
                2                                        j=1
                                                      K
                                                                               !
                                                      X
             B =γ 2 ((1 + β0 )sq−1 )2    δ(q − 1) +         δk (q − 1)dt+1−j       δ0 (q − 1)
                                                      j=1
                1
             C = γ 2 ((1 + β0 )sq−1 )2 (δ0 (q − 1))2
                2
we obtain:
                                                            t−(q−2)
                        t−(q−2)     (1 + β0 )s2q−2 (σ −2 θt   − B) + Λt
                       xt         =
                                             Rγ((1 + β0 )sq−2 )2




                                                 4
                                  σ2
with s2q−2 ≡     γ 2 ((1+β0 )sq−1 )2 (δ0 (q−1))2 σ 2 +1
                                                        .   Therefore,

                             α(1 − R) − s2q−2 (1 + β0 )δ0 (q − 1)δ(q − 1)γ 2 ((1 + β0 )sq−1 )2
              δ(q − 2) =
                                                  Rγ((1 + β0 )sq−2 )2
F or k ∈ {0, ..., q − 1} :
                             (1 + β0 )s2q−2 (σ −2 w(k, λ, q − 2) − [γ 2 ((1 + β0 )sq−1 )2 δk+1 (q − 1)δ0 (q − 1)]) + β(k)
            δk (q − 2) =                                                                                                  ,
                                                                 Rγ((1 + β0 )sq−2 )2
                       −(1 + β0 )s2q−2 [γ 2 ((1 + β0 )sq−1 )2 δk+1 (q − 1)δ0 (q − 1)] + β(k)
            δk (q − 2) =                                                                     ,
                                                Rγ((1 + β0 )sq−2 )2
                             β(K)
      and δK (q − 2) =                        .
                       Rγ((1 + β0 )sq−2 )2


   By lemma C.1, dt+1 ∼ N (mt , s2q−2 ) with mt ≡ −s2q−2 B + s2q−2 σ −2 θtt−q+2 . Thus, invoking
lemma B.1 for this distribution for dividends and a = Rγ(1 + β0 ) implies that
                                                                         
  q−2                             1  t−(q−2) 2       2                2
V     (dt−K , ..., dt )  − exp − xt              (Rγ) ((1 + β0 )sq−2 )
                                  2
                                                                                   !2                       
                                                                  K
                                   1                             X
                        = − exp −    dt δ0 (q − 2) + δ(q − 2) +      δk (q − 2)dt−j (Rγ)2 ((1 + β0 )sq−2 )2 
                                   2                             j=1


(the symbol  means that equality holds up to a positive constant).

  Step 3. We now consider the problem for agents of age age ≤ q − 3. Suppose the
problem at age age + 1 is solved, that is, suppose
  t−age−1
Vt+1      = V age+1 (dt+1−K , ..., dt+1 )
                                                               2                                     
           1                               K
                                            X                                                           
 − exp − dt+1 δ0 (age + 1) + δ(age + 1) +   δj (age + 1)dt+1−j  (Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2 .
           2                                                                                           
                                                                    j=1


 The maximization problem is given by:

  V age (dt−K , ..., dt ) ≡ max Ett−age Vt+1
                                        t−age−1
                                                 exp −γRq−1−age x((1 + β0 )dt+1 + Λt ) . (67)
                                                                                      
                                  x

   By similar calculations to step 2 and Lemma C.3,

                                                (1 + β0 )s2age (σ −2 θtt−age − B) + Λt
                                  xt−age
                                   t     =
                                                    Rq−1−(age) γ((1 + β0 )sage )2




                                                                5
                                          σ2
with s2age ≡     (Rq−1−(age+1) γ)2 ((1+β0 )sage+1 )2 (δ0 (age+1))2 σ 2 +1
                                                                          ,   and

                                                                              K
                                                                                                            !
                                                                              X
B ≡ (Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2                δ(age + 1) +               δj (age + 1)dt+1−j          δ0 (age + 1).
                                                                              j=1


  Therefore
             α(1 − R) − s2age (1 + β0 )δ0 (age + 1)δ(age + 1)(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2
 δ(age) =                                                                                          ,
                                           Rq−1−(age) γ((1 + β0 )sage )2
             (1 + β0 )s2age (σ −2 w(k, λ, age) − [(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2 δk+1 (age + 1)δ0 (age + 1)]) + β(k)
δk (age) =
                                                      Rq−1−(age) γ((1 + β0 )sage )2
             k ∈ {0, ..., q − 1},
          −(1 + β0 )s2age [(Rq−1−(age+1) γ)2 ((1 + β0 )sage+1 )2 δk+1 (age + 1)δ0 (age + 1)] + β(k)
δk (age) =                                                                                          , k ∈ {q, ..., K − 1}
                                        Rq−1−(age) γ((1 + β0 )sage )2
                     β(K)
δK (age) = q−1−(age)                    .
          R          γ((1 + β0 )sage )2

  By lemma C.1, dt+1 ∼ N (mt , s2age ) with mt ≡ −s2age B + s2age σ −2 θtt−q+2 . Thus, invoking
lemma B.1 for this distribution for dividends and a = Rq−1−age γ(1 + β0 ) implies that
                                                                               
                                  1  t−(age) 2 q−1−(age) 2
V age (dt−K , ..., dt )  − exp −    xt         (R         γ) ((1 + β0 )sage )2
                                  2
                                                                          2                                  
                                                            K
                                 1                        X
                        = − exp − dt δ0 (age) + δ(age) +     δk (age)dt−j  (Rq−1−(age) γ)2 ((1 + β0 )sage )2  .
                                                                                                                
                                  2                        j=1




Proof of Lemma C.5. Assume it is not the case, i.e. 1 + β0 + β1 − Rβ0 ≤ 0. This implies
that l(0, 1) = (1 + β0 )w0 + β1 − Rβ0 ≤ 0. From condition (74) we have:

                                        l (0, 1)2
                         
                 l(1, 1)
          0= R−             l (0, 1) +            (β1 − Rβ0 ) + [1 + β0 + β1 − Rβ0 ]
                (1 + β0 )              (1 + β0 )2

  Then,hsince β1 − Rβi 0 ≤ 0 by proposition 7.3, for the previous equation to hold it must
              l(1,1)
be that R − (1+β0 ) ≤ 0. However, replacing l(1, 1), this inequality implies that

                       (1 + β0 ) (1 − w0 ) − Rβ1
                                                                      
                                                        Rβ1
                    R−                            = R+        − (1 − w0 ) > 0.
                                (1 + β0 )              1 + β0
                     Rβ1
By Proposition 7.3, 1+β 0
                          > 0 and R > 1 by assumption, so we obtained a contradiction.
Hence, it must be that [1 + β0 + β1 − Rβ0 ] > 0.
                                                                                         Ett−1 [st+1 ]
Proof of Lemma C.6. From Lemma B.1, we know that xt−1
                                                  t   =                                  γ(1+β0 )σ 2
                                                                                                       .   Therefore, given

                                                              6
our guess for prices and Lemma 7.2, we have:

                         Ett−1 [dt+1 + pt+1 − pt R]
                  xt−1
                   t   =                                                                        (68)
                                γ(1 + β0 )σ 2
                         (1 + β0 )θtt−1 + α(1 − R) + (β1 − Rβ0 )dt − Rβ1 dt−1
                       =                                                                        (69)
                                              γ(1 + β0 )σ 2

since θtt−1 = w0 dt + (1 − w0 )dt−1 , we obtain equation (57), where l(0, 1) = (1 + β0 )w0 +
β1 − Rβ0 and l(1, 1) = (1 + β0 )(1 − w0 ) − Rβ1 . We also know from Lemma C.2 that
                                                          !
                                          t−q+1         2
                                      1 Et       [st+1 ]
                 Vtt−1 = − exp −
                                      2 γ(1 + β0 )σ 2
                                                                               !
                                                                             2
                                      1 (α(1 − R) + l(1, 1)dt−1 + l(0, 1)dt )
                       = − exp −
                                      2                γ(1 + β0 )σ 2
                                                                  !
                                      1 (Lt (1, 1) + l(0, 1)dt )2
                       = − exp −
                                      2      γ(1 + β0 )σ 2

where Lt (1, 1) ≡ α(1 − R) + l(1, 1)dt−1 . Thus, we can write the value function of the
generation that is investing for the last time on the market as follows:

                              Vtt−1 = − exp(−At − Bt dt − Cd2t )                                (70)
                       2
                Lt (1,1)           Lt (1,1)l(0,1)        l(0,1)  2
where At ≡ 2γ(1+β       2 2 , Bt ≡ γ(1+β )2 σ 2 , C ≡ 2γ(1+β )2 σ 2 . Using these results to obtain
                      0) σ                0                   0
  t
Vt+1 , the problem of the young generation at time t is given by

                                 max Ett Vt+1
                                              t                     
                                                  exp (−γRxst+1 ) .                            (71)
                                 x

  From Lemma C.3
                                               µ̃ (m, s2 )
                                      xtt =                  ,
                                              γRσ̃ (m, s2 )2

where

      µ̃ m, s2 = EN (m,s2 ) [h (z)] = α(1 − R) + (β1 − Rβ0 )dt − Rβ1 dt−1 + (1 + β0 )m
              
             2
     σ̃ m, s2 = VN (m,s2 ) [h (dt+1 )] = (1 + β0 )2 s2

           θt −σ 2 B             2                                            (α(R−1)+l(1,1)dt )l(0,1)
with m = t2Cσ2 +1t+1
                     , s2 = 2Cσσ2 +1 . Incorporating the fact that Bt+1 =          (1+β0 )2 σ 2
and θtt = dt we obtain equation (58) and the respective δ’s.




                                                  7
Appendix OA.2                   Proposition 7.2 for the q = 2 case
The next lemma specializes the results in Proposition 7.2 for the q = 2 case. It helps
illustrate the expressions needed to compute α, β0 and β1 .

Lemma OA.2.1. For R > 1 in any linear equilibrium prices are given by:

                             pt = α + β0 dt + β1 dt−1      ∀t ∈ Z                          (72)

where the coefficients {α, β0 , β1 } are uniquely determined by the following set of non-linear
equations:

                                     σ 2 l (0, 1)
                                                 
             0 = α (1 − R) R + 2 −                  − 2Rγ (1 + β0 )2 σ 2                   (73)
                                      s    1 + β0
                            1 σ2
                                                                                   
                                                   1                l(1, 1)l (0, 1)
             0 = l (0, 1) +         (β1 − Rβ0 ) + (1 + β0 ) 1 −                            (74)
                            R s2                  R                   (1 + β0 )2
                            σ2
             0 = l (1, 1) − 2 β1                                                           (75)
                            s
where l(0, 1) ≡ [(1 + β0 )w(0, λ, 0) + β1 − Rβ0 ] and l(1, 1) ≡ [(1 + β0 )w(1, λ, 0) − Rβ1 ].

Proof of Lemma OA.2.1. By Proposition 7.1, we have the following demands:

      xt−2
       t   =0                                                                              (76)
                Ett−1
                    [st+1 ]      α (1 − R) + l (0, 1) dt + l (1, 1) dt−1
      xt−1
       t   =                   =                                                           (77)
             γR (1 + β0 ) σ 2              γ (1 + β0 )2 σ 2
             EΦ(m,s2 ) [st+1 ]   α (1 − R) + (β1 − Rβ0 ) dt − Rβ1 dt−1 + (1 + β0 ) m
       xtt =                   =                                                           (78)
             γR (1 + β0 ) s  2
                                                    γR (1 + β0 )2 s2

  where l(0, 1) ≡ (1 + β0 )w(0, λ, 0) + β1 − Rβ0 , l(1, 1) ≡ (1 + β0 )w(1, λ, 0) − Rβ1 ,

                                       s2 
                                            dt − σ 2 Bt+1 (1)
                                                             
                                  m=     2
                                       σ
                                             σ2
                                  s2 =                 ,
                                       2C (1) σ 2 + 1

and
                                  α (1 − R) l (0, 1) l(1, 1)l (0, 1)
                        Bt+1 (1) =                  +                dt
                                    (1 + β0 )2 σ 2    (1 + β0 )2 σ 2
                                    l (0, 1)2
                          C (1) =
                                  (1 + β0 )2 σ 2




                                               8
   Therefore:
      "                                       #     "                                                              !        #
   s2      α (1 − R) l (0, 1) l(1, 1)l (0, 1)    s2    α (1 − R) l (0, 1)                        l(1, 1)l (0, 1)
m = 2 dt −              2    −            2 dt = σ 2 −              2     +                 1−              2          dt
   σ           (1 + β0 )        (1 + β0 )                  (1 + β0 )                               (1 + β0 )
                                                     2
                  σ2                     (1 + β0 )
s2 =       l(0,1) 2             =         2                  2σ
                                                                  2
                                                                      .
       2 (1+β          σ2 + 1       l (0, 1) + (1 + β0 )
              0 )2 σ 2


   Plugging this in the expression for xtt , it follows that
                                                           2
                                                              h                                        i
     α (1 − R) + (β1 − Rβ0 ) dt − Rβ1 dt−1 + (1 + β0 ) σs 2 − α(1−R)l(0,1)
                                                                    (1+β0 )2
                                                                                 +    1 − l(1,1)l(0,1)
                                                                                            (1+β0 )2
                                                                                                          dt
 t
xt =
                                           γR (1 + β0 )2 s2
               h      2 l(0,1)
                                i h                                               i
                                                           s2         l(1,1)l(0,1)
     α (1 − R) 1 − σs 2 (1+β 0)
                                 +  β1 − Rβ  0 + (1  + β )
                                                        0 σ2     1 −    (1+β0 )2
                                                                                      dt − Rβ1 dt−1
   =                                                                                                    .
                                         γR (1 + β0 )2 s2

   By Market clearing:
                                                         !
   1     α (1 − R) + l (0, 1) dt + l (1, 1) dt−1
1=                                   2
   2             γ (1 + β0 ) σ 2
                    h                i h                                                i
                           s2 l(0,1)                    s2
                                                                           l(1,1)l(0,1)
                                                                                                             
      1  α (1 − R) 1 − σ2 (1+β0 ) + β1 − Rβ0 + σ2 (1 + β0 ) 1 − (1+β0 )2                    dt − Rβ1 dt−1
    +                                                         2
                                                                                                             
      2                                          γR (1 + β0 ) s2
                                              !
    1 α (1 − R) + l (0, 1) dt + l (1, 1) dt−1
  =                          2
    2            γ (1 + β0 ) σ 2
                        h               i h 2                                                  i
                    σ2        s2 l(0,1)                                                                   2
                                                                                  l(1,1)l(0,1)
                                                                                                                     
                                              σ
      1  α (1 − R) s 2  1 −   2
                              σ (1+β0 )   +   s2 (β 1 − Rβ 0 ) + (1 + β0 )   1 −     (1+β0 )2      dt − σs2 Rβ1 dt−1
    +                                                             2
                                                                                                                     ,
      2                                              γR (1 + β0 ) σ 2

 which implies
             2
2γ (1 + β0 ) σ 2 = (α (1 − R) + l (0, 1) dt + l (1, 1) dt−1 )
                                     σ2        s2 l (0, 1)
                                                           
                      1
                   +      α (1 − R) 2 1 − 2
                      R              s         σ (1 + β0 )
                         ""                                                     !#                    #
                      1     σ2                                  l(1, 1)l (0, 1)            σ2
                   +            (β1 − Rβ0 ) + (1 + β0 ) 1 −                 2       dt − 2 Rβ1 dt−1
                      R     s2                                    (1 + β0 )                s
                                          2
                                                       
                              1         σ      l (0, 1)
                 =α (1 − R)       R+ 2 −
                             R          s    (1 + β0 )
                     "                                                                       !#
                                      2
                                                                                                               σ2
                                                                                                                   
                                   1σ                    1                   l(1, 1)l (0, 1)
                   + l (0, 1) +         (β1 − Rβ0 ) + (1 + β0 ) 1 −                      2      dt + l (1, 1) − 2 β1 dt−1 .
                                  R s2                  R                      (1 + β0 )                       s




                                                                          9
Therefore {α, β0 , β1 } solve the following system of equations:

                                   σ 2 l (0, 1)
                                               
           0 = α (1 − R) R + 2 −                  − 2Rγ (1 + β0 )2 σ 2                      (79)
                                    s    1 + β0
                                2
                                                                                 
                            1σ                   1                l(1, 1)l (0, 1)
           0 = l (0, 1) +         (β1 − Rβ0 ) + (1 + β0 ) 1 −                               (80)
                            R s2                R                   (1 + β0 )2
                            σ2
           0 = l (1, 1) − 2 β1                                                              (81)
                            s
where l(0, 1) ≡ [(1 + β0 )w(0, λ, 0) + β1 − Rβ0 ] and l(1, 1) ≡ [(1 + β0 )w(1, λ, 0) − Rβ1 ].




                                               10
Appendix OA.3                       Population Growth
In addition to considering the effects of a one-time shock to population structure, we also
explore the implications of population growth.
   In this section of the Online Appendix, we consider an OLG model two-period lived
agents where the mass of young agents born every period grows at rate g. For this growth
setting, we need to set an initial date for the economy, which we define to be t = 0. Let
yt denote the mass of young agents born at time t; then yt+1 = (1 + g) yt = y0 (1 + g)t .
We further denote the total mass of people at any point in time t > 0 as nt , and hence
nt = yt + yt−1 = (2 + g) yt−1 . It is easy to check that nt = (1 + g) nt−1 ; that is, total
population grows at rate g.
   The framework is otherwise as in the ‘toy model” in Section 3 of the main paper. The
main difference is that now population is growing over time. As a result, we make a
different guess for the price function:

                                  pt = α0 (1 + g)−t + β0 dt + β1 dt−1

We verify this guess using our market clearing condition, which requires the demand of
the young and the old to add up to total supply of the asset, one:

     Ett [pt+1 + dt+1 ] − Rpt           E t−1 [pt+1 + dt+1 ] − Rpt
1 = yt                           + yt−1 t                               ⇐⇒
         γV [pt+1 + dt+1 ]                    γV [pt+1 + dt+1 ]
   y0 (1 + g)t−1 h                        t             t−1
                                                                                h
                                                                                             −(t+1)
                                                                                                                   ii
1=                  (1  + β 0 )  (1 + g) E t [dt+1 ] + Et    [d t+1 ]  + (2 + g)   α0 (1 + g)       + β 1 dt − Rpt
   γ (1 + β0 )2 σ 2


and after simple algebra,

                                                                                  γσ 2 (1 + β0 )2
                                                   
                  1+g       1                              α0
Rpt = (1 + β0 )       dt +     [(1 − ω) dt−1 + ωdt ] +            + β 1 d t −
                  2+g      2+g                         (1 + g)t+1             y0 (2 + g) (1 + g)t−1

We plug in pt = α0 (1 + g)−t + β0 dt + β1 dt−1 and we use the method of undetermined
coefficients to obtain:
                                      γ (1 + β0 )2 σ 2 (1 + g)
                                α0 = −          1
                                         R − 1+g      y0 (2 + g)
                                                                
                                                1+g         1
                              Rβ0 = (1 + β0 )          +       ω + β1
                                                2+g 2+g
                                              1−ω
                              Rβ1 = (1 + β0 )
                                              2+g

  Let αt ≡ α0 (1 + g)−t and γ ≡ nytt denote the fraction of young agents, which is easy to
verity is constant over time. Then, we can rewrite the above equations as



                                                     11
                                     γ (1 + β0 )2 σ 2 1 + g
                            αt = −            1
                                        R − 1+g         nt
                          Rβ0 = (1 + β0 ) (γ + (1 − γ)ω) + β1
                          Rβ1 = (1 + β0 ) (1 − γ)(1 − ω).

  The latter expressions reveal that the total mass of agents in the market is reflected
only in the price constant, while the fraction of young people in the market determines
the dividend loadings β0 and β1 . Overall, we see that adding population growth generates
to our model generates a positive trend in prices. The relative reliance of prices on the
most recent experiences (dividends) is increasing in the population growth rate.




                                             12
Appendix OA.4                       Empirical Analysis
We use two alternative approaches to measure the fraction of younger agents (below
50 years of age) in the market. First, we compute an indicator variable that equals
one when the fraction of young agents in the market is above 0.5 and zero otherwise,
I{Fraction of young investorst > 0.5}. Here, the fraction of young investors is based on
their relative cohort sizes, with
                                                                       scf
                                                 P
                                                   j I(agej,t < 50) · wj,t
                  Fraction of young investorst =        P       scf
                                                                           ,
                                                          j=1 wj,t

                                                                   scf
where agej,t is the age of household head j in year t, and wj,t        is the weight given to
household head j in year t in the Survey of Consumer Finance to compensate for unequal
probabilities of household selection in the original design and for unit nonresponse (failure
to obtain an interview).
  Our second proxy captures the wealth of younger generations of investors. We construct
an indicator variable that equals 1 when the fraction of liquid wealth owned by agents
below 50 is above the 1960-2013 sample average of their liquid wealth and zero otherwise,
I(Fraction of young investors’ wealtht > Sample average),24 i. e.,
                                                         P                         scf
                                                             j   I(agej,t < 50) · wj,t · Wealthj,t
         Fraction of young investors’ wealtht =                      P scf
                                                                        j wj,t · Wealthj,t

  For robustness, we also consider thresholds 0.55 and 0.60 for the age-based first proxy,
and 0.9 × Sample average and 1.1 × Sample average for the age- and wealth-based second
proxy. Results are presented in Online-Appendix Table OA.1. We estimate a positive δ1
coefficient, which is significant when requiring a fraction of 0.6 for the age-based coefficient
and when requiring wealth above 0.9 of the sample average for the age- and wealth-based
coefficient.




  24
     The SCF documents the age and wealth (liquid assets) information of each respondent in 1960,
1962, 1963, 1964, 1967, 1968, 1969, 1970, 1971, 1977, 1983, 1986, 1989, 1992, 1995, 1998, 2001, 2004,
2007, 2010, and 2013. We use linear interpolation to fill the missing years and construct a yearly sample
from 1960 to 2013. The liquid assets variable is defined to be the sum of assets in an investor’s checking,
savings, and money-market accounts, as well as any call accounts at brokerages and prepaid cards.


                                                    13
                   Table OA.1: Markov-Switching Regime (MSR) model

 Robustness checks of the estimation results in Table 2. Pt −Dt is the log of the price-to-dividend
ratio, and regressed on its lagged values interacted with the demographic indicator variable Yt
for the fraction of young investors. We use different thresholds to construct Yt . In column (1),
Yt equals 1 when the fraction of investors below 50 is larger than 0.55, and in column (2), the
threshold is 0.60. In column (3), Yt equals 1 when the fraction of wealth of investors below 50
is larger than 90% of their 1960-2013 sample average, and in column (4), the threshold is 110%
of the sample average. As in Table 2, the demographic data including age and wealth (liquid
assets) of stock-market participants is from the SCF, stock data from CRSP.


                                                           Dependent variable: Pt − Dt
                                                        Yt age-based     Yt age/wealth-based
                                                       (1)        (2)       (3)        (4)

 δ1                                                   0.430    1.134**     0.681**       -0.339
                                                     (0.288)   (0.188)     (0.209)      (0.268)
 δ2                                                   0.016     -0.194       -0.082      -0.137
                                                     (0.304)   (0.322)      (0.210)     (0.422)
 δ3                                               -0.460**     -0.778**    -0.629**     0.428*
                                                   (0.225)      (0.282)     (0.161)     (0.220)
 β1                                                  0.623**   0.297**     0.417**      1.084**
                                                     (0.259)   (0.134)     (0.177)      (0.081)
 β2                                                   -0.099    -0.132       -0.168    -0.223**
                                                     (0.219)   (0.140)      (0.166)     (0.100)
 β3                                                  0.298**   0.452**     0.580**       -0.044
                                                     (0.151)   (0.106)     (0.140)      (0.064)
 µ(S1 )                                              4.925**   5.780**     5.734**      5.430**
                                                     (1.541)   (2.915)     (1.513)      (1.683)
 µ(S2 )                                           19.590**     14.100**    20.310**    19.670**
                                                   (3.399)      (2.959)     (3.144)     (3.102)
 σ                                                    3.948     3.259        3.792       3.737
                                                     (0.392)   (0.393)      (0.397)     (0.375)
 Q11                                                  0.953     0.779        0.956       0.931
                                                     (0.030)   (0.152)      (0.026)     (0.035)
 Q21                                                  0.374     0.115        0.365       0.473
                                                     (0.214)   (0.068)      (0.210)     (0.220)
 N                                                     51         51           51          51
Robust standard errors in parentheses. * significant at 10%; ** significant at 5%.


                                                14
