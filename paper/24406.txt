                              NBER WORKING PAPER SERIES




                 FINANCIAL CENTRALITY AND LIQUIDITY PROVISION

                                    Arun G. Chandrasekhar
                                      Robert Townsend
                                      Juan Pablo Xandri

                                      Working Paper 24406
                              http://www.nber.org/papers/w24406


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                   March 2018




We thank Ben Golub, Matthew Jackson, and Juan Passadore for helpful discussions as well as
seminar participants at NYU, Princeton, SAET Faro, Minnesota, MIT, and various other seminars
and conferences. Chandrasekhar is grateful for support from the National Science Foundation
GFRP and Townsend is grateful for support from the NICHD. The views expressed herein are
those of the authors and do not necessarily reflect the views of the National Bureau of Economic
Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2018 by Arun G. Chandrasekhar, Robert Townsend, and Juan Pablo Xandri. All rights
reserved. Short sections of text, not to exceed two paragraphs, may be quoted without explicit
permission provided that full credit, including © notice, is given to the source.
Financial Centrality and Liquidity Provision
Arun G. Chandrasekhar, Robert Townsend, and Juan Pablo Xandri
NBER Working Paper No. 24406
March 2018
JEL No. D14,E44,G01,L14,O16

                                           ABSTRACT

We study an endowment economy in which agents face income risk, as if uncertain returns on a
portfolio, and agents can only make transfers in states when they are actively participating in the
market. Besides income risk, agents also have limited and stochastic market access, with a
probability distribution governed by an underlying social network. While network connections
may serve to dissipate shocks, they may also provide obstacles to the sharing of risk, as when
participation frictions are generated through the network.

We identify and quantify the value of key players in terms of whether they are likely to be able to
smooth the resulting market participation risk and how valuable that smoothing would be when
they are there. We define financial centrality in economic terms, given the model, as the ex ante
marginal social value of injecting an infinitesimal amount of liquidity to the agent.

We show that the most financially central agents are not only those who trade often – as in
standard network models – but are more likely to trade when there are few traders, when income
risk is high, when income shocks are positively correlated, when attitudes toward risk are more
sensitive in the aggregate, when there are distressed institutions, and when there are tail risks. We
extend our framework to allow for endogenous market participation. Observational evidence
from village risk sharing network data is consistent with our model.


Arun G. Chandrasekhar                             Juan Pablo Xandri
Department of Economics                           Department of Economics
Stanford University                               Princeton University
579 Serra Mall                                    Fisher Hall, Office 212
Stanford, CA 94305                                Princeton, NJ 08544
and NBER                                          jxandri@princeton.edu
arungc@stanford.edu

Robert Townsend
Department of Economics, E52-538
MIT
77 Massachusetts Avenue
Cambridge, MA 02139
and NBER
rtownsen@mit.edu
           FINANCIAL CENTRALITY AND LIQUIDITY PROVISION

      ARUN G. CHANDRASEKHAR‡ , ROBERT M. TOWNSEND§ , AND JUAN PABLO XANDRI?


        Abstract. We study an endowment economy in which agents face income risk, as if uncertain
        returns on a portfolio, and agents can only make transfers in states when they are actively
        participating in the market. Besides income risk, agents also have limited and stochastic
        market access, with a probability distribution governed by an underlying social network. While
        network connections may serve to dissipate shocks, they may also provide obstacles to the
        sharing of risk, as when participation frictions are generated through the network.
           We identify and quantify the value of key players in terms of whether they are likely to
        be able to smooth the resulting market participation risk and how valuable that smoothing
        would be when they are there. We define financial centrality in economic terms, given the
        model, as the ex ante marginal social value of injecting an infinitesimal amount of liquidity to
        the agent.
           We show that the most financially central agents are not only those who trade often -- as
        in standard network models -- but are more likely to trade when there are few traders, when
        income risk is high, when income shocks are positively correlated, when attitudes toward
        risk are more sensitive in the aggregate, when there are distressed institutions, and when
        there are tail risks. We extend our framework to allow for endogenous market participation.
        Observational evidence from village risk sharing network data is consistent with our model.
           JEL Classification Codes: D14, E44, G01, L14, O16
           Keywords: Financial networks, networks, market participation, liquidity injection




                                            1. Introduction

   We focus on a measure of financial centrality and the identification of key players in financial
markets in environments in which disruptions to markets take the form of shocks to market
participation.
   These shocks are consistent with the foundations of several types of models that are widely
used to think about financial markets. The first class of models include search frictions with
bilateral and stochastic matching as in Duffie et al. (2005), and, in particular, directed search
models in which subsets of agents group together facing a tradeoff between offers and matching

Date: March 15, 2018.
We thank Ben Golub, Matthew Jackson, and Juan Passadore for helpful discussions as well as seminar partic-
ipants at NYU, Princeton, SAET Faro, Minnesota, MIT, and various other seminars and conferences. Chan-
drasekhar is grateful for support from the National Science Foundation GFRP and Townsend is grateful for
support from the NICHD.
‡
  Stanford University. Email: arungc@stanford.edu.
§
  Massachusetts Institute of Technology. Email: rtownsen@mit.edu.
?
  Princeton University. Email: jxandri@princeton.edu.
                                                       1
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                              2

rates as in Armenter and Lester (2015). The second class of models include market partici-
pation models used in finance and monetary economics, in particular, when the number and
composition of traders who can deal with one another is stochastic as in Kiyotaki and Wright
(1989), Trejos and Wright (1995), Freeman (1996) and Green and Zhou (2002), Santos and
Woodford (1997). We focus especially on the resulting risk of thin markets, as this is a par-
ticular concern to the traders individually and to overall social welfare. Putting this another
way, we focus not only on liquidity shocks but also insurance against them. Broker dealers
are such key traders in the private sector, as in Cocco et al. (2009) where relationships among
dealers with less correlated shocks allows insurance against shortage of funds in the reserve
maintenance period.
   Much of the financial network literature posits unanticipated shocks which can hit the bal-
ance sheet of selected traders ex-post and focuses how these adverse shocks may spread through
the financial system via the network. Empirical studies on such networks include Upper and
Worms (2004)Bech and Atalay (2010), Boss et al. (2004), Cohen-Cole et al. (2013), Craig and
Von Peter (2014), Cont et al. (2013), Langfield et al. (2014), Jaramillo (2012), and others. The
economic and/or network theory is developed in Allen and Gale (2000), Freixas et al. (2000)
and Eisenberg and Noe (2001), and more recently in Gai and Kapadia (2010), Battiston et al.
(2012), Acemoglu et al. (2015), and Elliott et al. (2014). See Allen and Babus (2009) and
Summer (2013) for surveys.
   Many of the papers in this literature, motivated by the financial crisis, are concerned with
how the pattern of connections and obligations across banks could induce contagion. In this
sense interconnectedness is viewed as problematic and indeed financial systems are being reg-
ulated accordingly, identifying institutions regarded as systematically important and imple-
menting requirements that have the intent of limiting their size and/or limiting the exposure
of the market to them, as in risk capital and liquidity ratios. But as Summer (2013) notes,
many of the models of this literature miss the intuition provided by the standard risk sharing
model. A shock to a highly interconnected system might be more easily dissipated because
it can be absorbed by more parties (Acemoglu et al., 2010; Elliott et al., 2014). This idea
was key in the original work of Allen and Gale (2000); when they allow a complete contract
structure, they do not get contagion, as they note. Thus the actual network of exposures may
be conducive to the sharing of idiosyncratic risk.
   On the other hand, depending on how it is modeled, the network structure may provide an
obstacle to risk-sharing and leave agents exposed (Ambrus et al., 2010). Indeed in key examples,
we link the network structure to the way stochastic market participation shocks are generated.
We can then distinguish across institutions or traders by their position in a network, and we
show that financial centrality matters. However, our notion of ex-ante financial centrality,
associated with a constrained Pareto outcome in the face of these market shocks, is different
from the typical graph-theoretic definitions of network centrality and those implemented in
the empirical literature. For us degree centrality, eigenvalue centrality, betweenness, closeness,
and other measures of network centrality are potentially different from the correct measure of
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                 3

financial centrality in our risk sharing environment. For example, degree centrality matters
less if being in such a central position and likely to be in the market means that it brings many
others to the market at the same time. Likewise, if market participation is limited, key players
are those that bring liquidity to the market, that is, are those who are likely to be around
precisely when the the number of traders is small.
   More specifically, as trade is inherently limited by participation frictions, idiosyncratic shocks
do not typically net to zero. Thus there can be considerable market risk: idiosyncratic shocks
are a source of aggregate risk, especially when markets are thin. Hence, the value of a trader
has to do with being around to mitigate this risk, being able to trade with others at key
times. Concavity is key for us as individuals and societies are risk averse and hence care about
this risk ex-ante. As a result, we show that our measure of financial centrality features risk
aversion, prudence, and the coefficient of variation of income. We then identify and quantify
value of key players in terms of whether they are likely to be able to smooth the resulting
market participation risk and how valuable that smoothing would be when they are there.
   The centralized planning problem that delivers Pareto optimal allocations is the problem of
maximizing a Pareto weighted sum of ex-ante expected utilities subject to shock contingent
resource and to market participation constraints. Financial centrality of an agent i is then the
increment in ex ante social value, an increase in the objective function of planner, derived from
injecting liquidity to i ex-ante – that is,

          F Ci := Marginal Social Value of giving  > 0 to i whenever she can trade.

   The first order conditions with respect to this liquidity epsilon, when  is driven to zero, is
then the value of liquidity and the correct measure of financial centrality of each trader i. It
is, again, the expectation of the joint product of the value of liquidity as the shadow price in
the resource constraint and the participation indicator of that player i.
   We generalize the results to incorporate heterogeneity in ex-ante Pareto weights, heterogene-
ity in means and in variances of liquidity shocks, correlation across shocks, and differential risk
aversion. We also allow all agents to see in advance an aggregate shock that contains infor-
mation about both market participation and income risk. This serves as a reduced from way
to capture that fact that the importance of a player can depends on aggregate market condi-
tions. To summarize results in this more general context, the most financially central agents
are those who trade often; are more likely to trade when there are few traders; more likely to
trade when income risk is high, and income shocks are positively correlated; more like to trade
when attitudes towards risk are more sensitive in the aggregate (high average risk aversion);
more likely to trade with “distressed” institutions; and trade when there are tail risk, macro
shocks which co-determine both income and risk characteristics but also limited participation
-- a shock to cross sectional dispersion, spirit of Lehman type events.
   We also consider a Walrasian, decentralized interpretation of our measure of financial cen-
trality. In an ex-ante securities market, agents will buy and sell claims to receive and give
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                              4

income transfers contingent on subsequent market participation shocks and contingent on sub-
sequent income draws for those in a market. In equilibrium prices of securities will be such
that net excess demand for securities is zero. These Arrow Debreu securities are priced by
the Lagrange multiplier on the resources constraint or, roughly, by the marginal utility of con-
sumption. Thus we can determine the value of a bundled-security associated with the name
of the trader i as a security paying off one unit whenever i is in the market. All agents can
buy and sell these security bundles, and they have prices which correspond to the expected
product of i being in the market and the shadow price of resources at those times. Hence this
is fully equivalent with the measure of financial centrality we described earlier.
   More generally Pareto weights of traders can differ. The preceding discussion was normative:
we had considered how a planner with given preferences should measure the relative importance
of increasing the endowment of agents whenever they are able to trade. We then turn to an
alternative, positive approach. We study whether in some feasible, standard solution concepts,
agents with higher centrality get rewarded with higher consumption. In a model with CARA
utility and Gaussian shocks, this translate into having a higher Pareto weight in the planner’s
representation of the consumption allocation. We show that if the solution concept is Nash
bargaining, then there is a positive linear relationship between the Pareto weight of an agent in
the planner’s problem and her financial centrality measure. Similarly, with Kalai-Smorodinsky
bargaining, we show that the representing Pareto weights depends on the aforementioned
market thickness terms that affect financial centrality (such as market size when the trader is
present, volatility, and so on).
   We apply this perspective to the data. In an observational analysis, we investigate whether
there is empirical content in our theoretical approach. Using the Townsend Thai village data
with a panel over 15 years, we look at 338 households across 16 villages where we have detailed
data on consumption, income, and transactions across villagers. We use whether a household
has reported making or receiving a transfer to any other household in a given month as a
measure of being active in the network in a given period. Our positive analysis under Nash
or Kalai-Smorodinsky bargaining suggest that those who participate when the market is thin
(few active trader, greater volatility) should receive higher Pareto weights in the planner’s rep-
resentation. We use the panel to estimate a household fixed-effect of consumption to estimate
a monotonically increasing function of the Pareto weight. We then regress this fixed effect
on variables that capture whether the market has few traders in months when the household
is active and whether the market has more income volatility when the household is active.
We show that, indeed, a one standard deviation increase in market thinness by either measure
corresponds to roughly a 0.1 standard deviation increase in the consumption fixed effect, which
is consistent with the theory.
   For the most part, we take as given the exogenous stochastic process which operates through
networks to generate market participation shocks. Is this sense our markets and the observed
linked, networked structures are exogenous. We also make the assumption of independence
between income shocks and market participation shocks, mainly for pedagogy, in order to
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                             5

separate two distinct effects that a liquidity injection may have on social welfare. However we
show how we can make market participation endogenous, yet retain in the centrality formula
the earlier results, but also add to the formula this new, endogeneity part. So there are two
pieces. The first, which we dub the risk sharing effect, measures how an additional dollar given
to agent i propagates through the economy, taking the market participation process as given.
The second effect, which we call the participation effect, measures how giving an additional
dollar to agent i changes the (endogenous) participation decision by all agents in the economy.
   For the participation effect, there is a related literature. Chang and Zhang (2016) develops
a dynamic model of network formation in over-the-counter markets in which traders choose
with whom to connect as well as whether to remain active in each period. Traders with higher
trading needs optimally choose to match with traders with lower needs for trade, and this
endogenously generates a core-periphery market structure. Other papers with endogenous
network formation include Babus (2016), Franklin et al. (2009), Hojman and Szeidl (2008),
Gale and Kariv (2007) and Farboodi (2015). See Jackson (2008)for a review.
   To understand the participation effect in our model in greater detail, consider the following
pedagogical example. Suppose every individual first gets a signal about the income draws (both
hers and of other agents in the economy) before income is realized. Then, given the signal,
the agent decides whether or not to access the market at some fixed cost. The endogenous
choices of the agents to participate will correlate participation with income draws. We show
in a general environment with endogenous market participation, how to characterize financial
centrality. It remains the same as with exogenous participation, plus an extra term. This
extra term weights, by percent change in the market participation decision of each agent,
the Pareto-weighted utilities of all agents. Essentially, taking endogenous participation into
account makes an agent more central if the liquidity injection to the agent corresponds to an
increase in participation configurations where more valuable agents enter the market.
   The remainder of the paper is organized as follows. Section 2 presents the baseline environ-
ment. We define our notion of financial centrality in Section 3. Section 4 computes financial
centrality under our core assumptions. We extend our environment in five ways, allowing for
heterogeneous endowment distributions, heterogenous preferences, correlated market participa-
tion and income draws, and heterogenous Pareto weights in Section 5 and we compute financial
centrality in each case. Section 6 then extends our environment to one in which agents endoge-
nously choose to participate, as until now the model has maintained an exogenous participation
process. We explore several stylized market formation processes in Section 7. In Section 8 turns
to a positive analysis of the determination of Pareto weights in the planner’s representation
of the consumption allocation. We study Nash bargaining and Kalai-Smorodinsky bargaining
solution concepts to show that agents with higher centrality get rewarded with higher con-
sumption. We then turn to the Townsend Thai data to demonstrate (observational) patterns
in the data that are consistent with our framework in Section 9. In Section 10, we study two
extensions that depart from the centralized market perspective we have considered previously.
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                   6

First, we look at the case of having multiple segmented markets and second, we study financial
centrality when the consumption is not allocated by the planner. Section 11 is a conclusion.

                                           2. Environment

2.1. Setup. We consider an endowment economy with a set I = {1, ..., n} of agents and one
good. We study a one period economy, but this can be easily generalize to multiple periods.
Agents face idiosyncratic income risk, where y = (y1 , ..., yn ) denotes the vector of income
realizations for all agents in the economy, which we assume are drawn from some distribution
F (y). In most applications, we will assume income draws are independent across agents, but
this needs not be the case. Let µi = E (yi ) and σi2 = E (yi − µi )2 . Agents have expected
utility preferences, with utility function ui (ci ), which we assume to be strictly increasing,
strictly concave, and sufficiently smooth (i.e., all derivatives exist). We will also assume that
u000 (c) > 0, making agents prudent. Risk aversion can vary with wealth.
   The leading example in this paper (as in much of the finance literature) is an environment
with CARA preferences and Gaussian income shocks:

                             ui (ci ) = −ri−1 exp (−ri ci ) and y ∼ N (µ, Σ) .

This parametrization will prove useful to obtain closed form expressions in Section 5.
   The only point of departure with the usual risk sharing environment is on trading opportu-
nities, or market participation. Not every agent is present in the market in every state; only
a random set of agents gets access to the market, which can be thought of as a meeting place
where they can trade. If agents don’t have access to this market, they are in autarky and have
to consume their endowment.1
   Formally, let ζ ∈ {0, 1}n be the market participation vector, which we model as a shock
to the consumption set of agents. That is, if ζi = 0 then ci = yi . However, if ζi = 1, then
consumption and income do not have to coincide as agents can make transfers at such states.
The relevant state, in the Arrow and Debreu sense of enumerating all shocks and indexing the
commodity space by them, is then s = (y, ζ) ∈ S := Rn+ × {0, 1}n . A feasible consumption
allocation is a function c (s) = (ci (s))i∈I such that, for every s = (y, ζ), ci (s) = yi whenever
ζi = 0 and it is resource feasible: i.e., i ζi ci ≤ i ζi yi for all s.
                                         P         P

   State s is drawn from a probability distribution P (y, ζ) which is common knowledge among
agents, and we assume it to be discrete for most proofs, for expositional simplicity. This is a
primitive of our baseline environment, which models, in reduced form, the market participation
process, be it as in classical search models (as in Duffie et al. (2005)), directed search (as in
Armenter and Lester (2015)), or random matching (as in Kiyotaki and Wright (1989); Trejos
and Wright (1995), etc). Our baseline model will assume that market participation is drawn
independently from the income distribution (i.e., y ⊥ ζ). However, we generalize this in Section
6.
1In Section 10 we explore a model with several segmented markets, and show how to map all of the results of
this special model to the general case.
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                 7

  Suppose the optimum can be determined as if there were a “planner”who tries to chooses
among resource feasible allocations to maximize a linear welfare functional, with Pareto weights
vector λ ∈ Rn+ , effectively choosing c (s) to solve:
                                                                ( n                     )
                                                                 X
(2.1)                         V :=          max            Es          λi ui [ci (s)]
                                       (ci (·))i=1,...,n
                                                                 i=1

subject to
                               n
                               X                   n
                                                   X
(2.2)                                ζi ci (s) ≤           ζi yi (s) for all (y, ζ)
                               i=1                  i=1

and
                               ci (s) = yi for all s = (y, ζ) : ζi = 0.


2.2. Discussion. Our basic environment is easily generalized, so the model is more applicable
than might seem a priori. First of all, we can index by time, with long or even infinite horizon.
We can entertain Markov process on shocks. Our timeline can be divided into sub-periods:
traders meet in a market for two or more periods before the next market participation draw
(and we allow both implementation via bilateral links of a multi-person outcome as well as
borrowing and lending with risk contingencies within the longer period). We are featuring
one good but we can easily generalize the notation and allow commodity vectors over goods.
Then there would be a sequence of resource constraints (market clearing), one for each good;
utility functions still strictly concave though. Likewise we can reinterpret goods as securities,
endowments as portfolios, and derive the marginal liquidity valuations for each asset separately,
one at time, for each trader i. Trivially, our setting could be partial equilibrium with prices
of all goods, or assets, fixed outside, as in a small open economy, one market at a time, or
one village at a time. In this case value functions would be strictly concave over a selected
numeraire good, taking outside prices as given. Finally its easy to allow preference shocks
rather than endowment shocks.
   Though dynamics could easily be incorporated throughout most of the paper, we spare the
reader the requisite notation. In particular we would have to keep track of histories when we
endogenize market participation, in Section 6.


                                     3. Financial Centrality

3.1. Centrality as the Marginal Value of Liquidity. We consider a thought experiment:
increasing the endowment of a subset of agents J ⊆ I, across all values of income, whenever they
can trade. That is, the policy consists of offering a “credit line” but really a transfer, contingent
only on participation and without any repayment obligations,. More formally, t = (tj )j∈J ≥ 0
changes the income process for agent j ∈ J to ŷj (s) = yj + ζj tj for all s = (ζ, y). This is a
commitment to a named trader j without knowing what situation the trader will be in. The
planner has T > 0 units of consumption to finance these transfers.
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                              8

   If V (t) is the maximization problem’s value function, with income process yj = ŷj , the
planner would choose t = (tj )j∈J ≥ 0 to solve
                                                          X
(3.1)                                   max V (t) s.t           tj ≤ T.
                                       t∈R#J
                                          +               i∈J

   Note that V (t) here is a general value function, which could come from the corresponding
to the solution V of program (2.1), but this not required. We can define financial centrality
generally in this way.

Definition 3.1. We define financial centrality of agent i ∈ I as
                                                     ∂V (t)
                                           F Ci :=          |t=0 ,
                                                      ∂ti
i.e., the increment in value for the planner of providing liquidity to agent i whenever she can
trade.

   The next proposition is one of the main arguments to use financial centrality as the relevant
relative importance measure of providing liquidity to each agent in the margin.

Proposition 3.1. Suppose V (·) is concave and differentiable at t = 0. Moreover, suppose
∃i ∈ J such that F Ci > FCj for all j ∈ J ∼ {i}. Then, there exist T̂J > 0 such that if T ≤ T̂J
the unique solution t∗ = t∗j      to program (3.1) is t∗i = T and t∗j = 0 for all j ∈ J ∼ {i}.
                              j∈J

   The intuition behind Proposition 3.1 relies on the fact that if V is differentiable at t = 0,
then it is approximately a linear function, and hence it is locally maximized by allocating
all the resources to the agent with highest marginal value, given by our notion of financial
centrality.

Proof. See Appendix A.
                                                                                                

  We next develop a useful formulation of financial centrality, in terms of the multipliers of
the maximization problem in 2.1. Let qb (y, ζ) be the Lagrange multiplier for the first condition,
and define an auxiliary useful multiplier vector

(3.2)                             q (y, ζ) : qb (y, ζ) := q (y, ζ) P (y, ζ) ,

and let γi (s) be the corresponding Lagrange multiplier for the non negativity constraint ci ≥ 0.
The Lagrangian for 2.1 is then
                           (                                                                )
                            X
(3.3)             L = Es          λi ui [ci (s)] + q (s) ζi [yi − ci (s)] + γi (s) ci (s)
                            i∈I

   In the baseline model, we assume market participation is independent from income draws.
In this case, financial centrality can be expressed using the envelope theorem on program 2.1.
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                             9

Proposition 3.2. Suppose ζ ⊥ y, and let q (s) and γi (s) be the multipliers of Lagrangian 3.3
for Program 2.1. If for all i ∈ I and s ∈ S we have ci (s) > 0 whenever ζi = 1, then

(3.4)                                    F Ci = Es {ζi q (s)} .

If not, then F Ci = Es {ζi [q (s) + γi (s)]}

Proof. We use the classical envelope theorem on a variation of program 2.1, changing the
income of agent i to ŷi = yi + ζi ti . Then, the envelope theorem implies
                       ∂V               ∂L ∂yi
                                                   
                           |t=0 = Es ζi     ×     = Es {ζi [q (s) + γi (s)]} .
                       ∂ti              ∂yi   ∂ti
   If ci (s) > 0 for almost all s, then complementary slackness implies γi (s) = 0 for almost all
s, and hence Es {ζi γi (s)} = 0, proving the desired result.                                   

   The multiplier q (s) is, of course, the marginal value of consumption, at the (constrained)
efficient allocation ci (·). As we will see below, when defining a Walrasian equilibrium in an
Arrow Debreu economy defined on this environment, q (s) will correspond to the equilibrium
price of the Arrow Debreu security that pays only at state s. As such, equation 3.4 is effectively
the price of a fictitious asset that pays 1 consumption unit whenever ζi = 1, using q (s) as its
pricing kernel.
   As we noted above, V (·) need not only reflect the Program 2.1. Consider a modification
where we have constrained efficiency. So we add to Program 2.1 some additional constraint ,
that
                                Ξ (c, y, ζ) ≤ 0 for all (y, ζ) : ζi = 1.
This function represents some (arbitrary) frictions in consumption allocations and transfers.
For instance it could represent constraints as to who is able to make (how much) transfers to
whom. In this case, financial centrality would be
                                                                ∂Ξ (s)
                                                                    
                              F Ci = Es    ζi [q (s)] + p (s) ·        ,
                                                                 ∂yi
where p (s) is the Lagrange multiplier of the friction constraints.


3.2. Decentralization as Arrow Debreu Economies with Exogenous Market Partic-
ipation. In this section, we introduce a natural candidate for implementation of the Planners
optimal consumption allocation: a Walrasian equilibrium with transfers. We present the Sec-
ond Welfare Theorem for this setting, showing that any constrained Pareto optimal allocation
can be implemented by one such equilibria (with suitably chosen lump sum transfers) and we
show how equilibrium prices for Arrow Debreu securities correspond to the shadow values of re-
source constraints in the planner’s problem (a classical result in implementation theory). As a
side product, the proof gives us a different interpretation to our centrality measure; namely, the
financial centrality of agent i would be the price (on the implementing Walrasian Equilibrium
with transfers) of an asset that pays off only when agent i has market access .
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                        10

   We consider an Arrow Debreu economy, where agents can buy and sell claims on income and
consumption, contingent on the configuration of the market and the nature of income shocks.
However, agents cannot buy or sell income claims that will pay off at states where they are
unable to trade (since there is no physical way to make such transfers), which we formalize as
as “consumption space shocks” (as in Mas-Colell et al. (1995)). Formally, let Aŝ denote the
Arrow Debreu (AD) asset2 that pays 1 unit of the consumption good if the state is s = ŝ, and
nothing if s 6= ŝ., and ai (ŝ) ∈ R the demand of asset Aŝ=s by agent i . Consumption for agent
i at state s = (y, ζ) is then ci (s) = yi + ai (s). The market participation constraint can be
introduced by imposing a physical constraint: whenever ζi = 0 we must have ai (s) ∈ {0} (i.e.
agents cannot trade in assets that they will not be able to be present in the market to clear
the trades ex-post).
   To simplify proofs and exposition, we consider cases where there is only a countable number
of possible income shocks, so that S = i (Yi × {0, 1}) is also countable, and where P (s ∈ S) >
                                           Q

0 for all s ∈ S. Given an Arrow Debreu prices r̂ (s) for each As , and a vector of transfers
                        P
τ = (τi )i∈I such that i∈I τi = 0, agents choose consumption and asset purchases to maximize
expected utility, given her budget constraint:

(3.5)                                            max           Es {ui [ci (s)]}
                                             {ci (s),ai (s)}

                                 
                                 ci (s) = yi (s) + ai (s)
                                 
                                                                      for all s ∈ S
                                 
(3.6)                    s.t :     a (s) = 0
                                   i                                   for all s ∈ S : ζi = 0
                                 
                                 
                                 P         ai (s) r̂ (s) ≤ τi .
                                 
                                      s∈S

   As we did when defining the Lagrange multipliers for the planning problem, we normalize the
price function as r (s) = r̂ (s) /P (s), changing the budget constraint in the consumer problem
as
                                                          X
(3.7)                            Es [ai (s) r (s)] :=            ai (s) r (s) P (s) ≤ τi .
                                                          s∈S
                                                                                                               
A Walrasian equilibrium with transfers τ is a triple (c, a, r) = {ci (s) , ai (s)}i∈I,s∈S , {r (s)}s∈S
such that
        • {ci (s) , ai (s)}s∈S solves 3.5 with budget constraint 3.7 for all i ∈ I, given (normalized)
          prices r (s) = r̂ (s) /P (s) and transfers τ = (τi )i∈[n] ,
        • asset markets clear: i∈I ai (s) = 0 for all s ∈ S,3 and
                                  P

        • consumption good markets clear: i∈I ζi ci (s) ≤ i∈I ζi yi for all s ∈ S.
                                                P                P

A Walrasian Equilibrium is an equilibrium (c, r) with no transfers (τ = 0). In Proposition 3.3
below, we show a version of the First and Second Welfare Theorems for this economy, which is
                     
2Formally, A (s) =      1 if s = ŝ
            ŝ                        is the return matrix of the AD security paying only at state ŝ
                        0 otherwise
3If ∃s̃ ∈ S : P (s̃) = 0, then we can interpret this condition as imposing the constraint that a (s̃) = 0 for all
                                                                                                 i
i ∈ I (i.e. agents cannot trade in probability zero events)
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                11

just an application of the classical welfare theorems to this environment (See Mas-Colell et al.
(1995)). This can be qualified as a welfare theorem with “constrained efficiency”, since the
constraint that lack of market access (i.e. ζi = 0) implies autarkic consumption is interpreted
as a physical constraint (i.e., a social planner could not change an inactive agent’s consumption
either).

Proposition 3.3 (Welfare Theorems). Suppose ζ ⊥ y. Take a Planners problem 2.1 with
Pareto Weights λ ∈ ∆I , and an optimizing allocation c = (ci (s))i∈I,s∈S , with normalized
Lagrange multipliers q (s) (as defined in 3.2). Then, (c, r) is a Walrasian Equilibrium with
Transfers τ , where r (s) = q (s) for all s ∈ S and τi = Es {[ci − yi (s)] q (s)}. On the other
hand, if (c, r) is such an equilibrium with transfers τ , then ∃ Pareto Weights λ ∈ ∆I such that
c is the allocation solving Planners problem 2.1 (where we again have q(s) = r (s)).

Proof. See Appendix A.                                                                              
   An important Corollary of Proposition 3.3 (and most classical proofs of Second Welfare
Theorems in various settings) is that it gives us an explicit formulation for the equilibrium AD
security prices at the implementing equilibrium, which coincide with the shadow values q (s)
at the resource constraint at each state s. But then, since we can interpret this economy as
one with complete markets (once we interpret market participation shocks as consumption sets
shocks) r (s) P (s) is a pricing kernel, which greatly simplifies the pricing of additional assets, if
available to the market. More explicitly, if we add to this economy, on top of the AD securities
offered, an asset with return payoff function ρ (s) ∈ R, its (no arbitrage) equilibrium price in
this economy would be
                                                         X
                         Price = Es [ρ (s) × r (s)] :=         ρ (s) r (s) P (s) .
                                                         s∈S

   Using the results from 3.3, we can then show that financial centrality can be thought as the
equilibrium price of an asset (which we dubbed personalized debt) with return payoff matrix
ρi (s) = 1 if s : ζi = 1.

Corollary 3.1. Suppose y ⊥ ζ and let (c, r) be the Walrasian equilibrium with transfers τ =
(τi )i∈I that implements the Planner’s Problem 2.1 optimal allocation c with Pareto weights
λ ∈ ∆. Then
                                   X                  X
                        F Ci (λ) =    ρi (s) r̂ (s) =   ρi (s) r (s) P (s) .
                                     s∈S                 s∈S
That is, financial centrality is the price of a personalized debt asset implementing Walrasian
Equilibrium with transfers.

   Of course, there is a mapping between a Walrasian Equilibrium without transfers and its
corresponding utilitarian planner representation, with its Pareto weight vector λ. Two special
cases are of interest.
   In the benchmark case of CARA preferences and Gaussian income draws, assuming con-
strained efficient allocations are implemented without lump sum transfers, we obtain a fixed
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                              12

point equation mapping the primitives of the model (income distribution moments and pref-
erences) to the Pareto weights of the Planner’s Problem which we derive in Appendix B.
   We also show that in the case where the Planner has uniform Pareto weights (i.e., λi = 1/n
for all i), preferences are identical and shocks are i.i.d Gaussian variables, then the Plan-
ner’s problem
             can be implemented by a Walrasian Equilibrium      with no transfers with q (s) =
                                                             1 P
exp −ry ζ and ci (s) = ζi y ζ + (1 − ζi ) yi , where y ζ := nζ j∈[n] ζj yj is the mean income of
                                  P
agents in the market, and nζ := j∈I ζj is the market size at state s. Moreover, the price of
                                        n          2
                                                        o
personalized debt is simply F Ci = Eζ ζi exp γ σ2        .

3.3. Market Participation within a Network. An important object in our environment
is the vector of market participation shocks. We have modeled it with some reduced form
distribution P (ζ), which we take as a fundamental of the model. Our main objective is to
provide, for any such a participation process, a measure of financial centrality for a planner
tasked with maximizing social welfare. We now investigate how can we map data on trades
and social and financial networks, into this environment.
   In many contexts researchers and policymakers have data on economic networks. One
approach consists of leveraging this and modeling the market participation process as a function
of the network data available:
                                      ζ ∼ F (· | Network) .
The network generates parameters that are fundamental to the market “matching” process.
For example, suppose one and only one trader in the network is chosen as a seed. For simplicity
say everyone chosen with equal probability. Next, once a seed is specified, there is a probability
distribution governed by the graph as to which traders will show up in the market match. One
can think of this as if invitations are passed stochastically through the network, for instance,
starting from the seed. Of course this allows special cases in which these seed probabilities are
trader specific, or even one of the agents could always be the seed, as if deterministic.
   The data available depends on the application. The data may include the invitation process
itself, i.e. who was the seed and who was contacted. Alternatively, we may only see outcomes
in terms of time varying participation in the market. These considerations matter for identifi-
cation and parameterization of particular structures, if we see the process. Otherwise, one can
use the histogram of market participation as the fundamental.
   We give two distinct examples. The first example is as described in Hendershott and Mad-
havan (2015) in CDS securities in corporate bonds. It is neither completely centralized nor
entirely bilateral. At a point in time a trader (our seed) has a need to change its financial posi-
tion and initiates a request for trade, posting on a financial platform an invitation for specified
other named individuals to participate in an auction of limited duration. These messages may
or may not capture the attention of their targets, depending on what they are doing at the
time, i.e. paying attention to the monitor or not. Equivalently, the initiator may or may not
be in a good position, in terms of her ability to attract traders. There are various versions
of these technologies, becoming increasing common and blurring the distinction between OTC
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                               13

and centralized markets. For example one of distinguishing factors in Market Axess is the
inclusion of a large base of dealers, investment managers and alternative market participants
in the same trading pool. Tradeweb Markets builds and operates electronic over-the-counter
marketplaces with voice, electronic, and hybrid platforms.
   The second example is described by Li and Schürhoff (2014) for municipal bonds, and it
appears at first blush to allow bilateral links, only, but this impression is misleading, which
is why we feature it here. The data source is the proprietary Transaction Reporting System
audit trail from the MSRB, municipal bond transactions, over 15-year period from February
1998 to December 2012. There are identifiers for the dealer firms intermediating each trade
and also for customer trades, in which case the data identify the dealer buying and the dealer
selling the bond. Municipal bond dealers intermediate round-trip trades not only by taking
the bond into inventory for a time but rather asking the seller to wait until a matching buyer is
found. In an example round-trip transaction, an investor sells bonds to a dealer and then the
dealer sells the same bonds to another investor or other dealers. Thus there are intermediation
chains consistent of these bilateral links, and these can extend up to seven dealers .
   In this sense the bilateral model is not as restrictive as it seems. That is, our multilateral
market model can be implemented as a series of bilateral trades. As in Allen and Gale (2000),
Alvarez and Barlevy (2015), suppose a “transaction chain” is realized:

                         i1     ←→      i2      ←→      ...     ←→      ik .
                            trades with trades with         trades with
That is agents transfers ti,i+1 and ti+1,i . and the net transfers . With decentralized agreement
up front, agents only need to know they are currently paired and the consensus, the overall
target consumption. See Appendix C for proofs and a more detailed exposition.
   Much in this spirit is Ambrus et al. (2017), which considers the effect of local information
constraints in risk-sharing networks. They assume individuals only observe the endowment
realizations of their neighbors, and bilateral risk-sharing arrangements can only depend on this
commonly observed information. They derive necessary and sufficient conditions for Pareto
efficiency under these constraints, and provide an explicit characterization of Pareto efficient
arrangements under CARA utilities and normally distributed endowments. With independent
endowments, a local equal sharing rule is shown to be optimal.



                4. Computing Financial Centrality: A Baseline Case

   In this section, we continue to assume that income realization and market participation
shocks are independent. We relax this in Sections 5 and 6. Under this assumption, the
financial centrality measure can be further decomposed as

                      F Ci = Eζ {ζi Ey [q (y, ζ) | ζ]} = Eζ {ζi × Ey [q (y, ζ)]} .

This is particularly useful in a number of cases, where market fundamentals depend only on
aggregate statistics of market size and volatility, rather than the identities of the agents trading.
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                 14

We will assume, throughout the rest of the paper, that limc→0 u0i (c) = +∞ for all i ∈ I, so we
                                            P
always have ci (s) > 0 whenever ζi = 1 and ζj yj > 0.
   The main benchmark we consider is one with homogeneous preferences, independent and
identically distributed income draws, and an utilitarian planner. Such an environment has all
agents being virtually identical in almost all aspects, except their relative positions through
market participation shocks ζ. If agents have different financial centrality in this setting, it
can only come from their heterogeneity in their positions in the financial network, which is the
new dimension we introduce in this paper.
   Formally, we assume ui (·) = u (·) for all i ∈ I and {yi } are independent and identically
distributed where Ey (y) = µ and var (y) = σ 2 . Our aim will be to get a closed form ap-
proximation to q (s). Two quantities will become particularly important in our analysis: the
number of agents that are able to trade and the average income of agents that are able to
trade. Therefore let                             n            X
                                                nζ :=               ζi
                                                              i=1
denote the number of agents that are able to trade and
                                                              n
                                                          1 X
                                          ȳ (s) :=              ζi yi
                                                          nζ i=1
as the average income of agents able to trade. In this very simple case, we get the following
approximation.
Proposition 4.1. Suppose ui = u and λi = 1/n for all i, and income draws are independent
and identically distributed across agents. Then q (s) = u0 [y (s)] , ci (s) = ζi y (s) + (1 − ζi ) yi .
Moreover, if u is analytic (which imply Taylor expansions are valid) then we can approximate

                                                "                            !#
                                                      0         σ2
(4.1)                               F Ci ≈ Eζ    ζi u (µ) 1 + γ
                                                                nζ
where γ = (1/2) u000 (µ) /u0 (µ).
   The approximation of financial centrality given in Proposition 4.1 gives us a summary of the
relevant moments of the market participation process, for the purpose of calculating financial
centrality. Note that we can rewrite equation 4.1 as
                                                          "                       !#
                                0                        1               2
                      F Ci ≈ u (µ) P (ζi = 1) × 1 + γσ E    | ζi = 1                   .
                                                         nζ
What matters here is the variance of mean income, which is the relation between income
volatility (σ 2 ) and market size n (ζ), giving us the only relevant moment of the distribution of
ζ and income volatility σ 2 .
Proof. The first order conditions of Program 2.1 with Lagrangian defined in 3.3 with respect
to ci (s) whenever ζi = 1 is λi u0i [ci (s)] = q (s) (without taking into account the non-negativity
constraint over consumption). Therefore, if λi = λj = 1/n for all i, j ∈ [n] and ui = u for all i,
                         FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                             15

we then get that if ζi = ζj = 1 then ci (s) = cj (s) (i.e. all agents participating in the market
have equal consumption). Therefore, using the resource constraint, we obtain ci (s) = y (s)
whenever ζi = 1, and obviously ci (s) = yi otherwise. The first order condition also implies
then that q (s) = u0 [y (s)].
  To obtain the approximation, we provide a heuristic proof: we first make a second order
Taylor approximation g (y) := u0 (y) around y = E (y) = µ:
                                                                u000 (µ)
                         u0 (y) ≈ u0 (µ) + u00 (µ) (y − µ) +             (y − µ)2
                                                                    2
and then take expectations, we have
                                                1          h            i         1
E u0 (y (s)) | ζ ≈ u0 (µ)+u00 (µ) E (y − µ | ζ)+ u000 (µ) E (y − µ)2 | ζ = u0 (µ)+ u000 (µ) σ 2 /n (ζ) ,
               
                                                2                                 2
using the facts that E (y) = µ and that E (y − µ)2 = σ 2 /n (ζ) if income draws are i.i.d.
Reorganizing this expression, we get the desired result.                                

   This shows that centrality can be decomposed into two pieces. Financial centrality is higher
when (1) the agent has a higher probability of trading (P (ζi = 1) ↑) and (2) the market
size conditional on the agent entering is smaller. Finally, the degree to which each of these
matters can depend on the mean income, degree of risk aversion, degree of prudence (convexity
of marginal utility of consumption, which governs precautionary savings), and variability of
income (measured by the coefficient of variation). For example with log utility γ = µ12 , with
                   1−ρ                                                                        2
CES utility u = c 1−ρ−1 we get γ = ρ(1+ρ)
                                        2µ2
                                            , and with CARA preferences we have γ = r2 . As
a technical aside, Taylor expansions around the mean are not always valid. See Loistl (1976)
and Levy and Markovitz (1979) for a discussion. For example, if u = −r−1 exp (−rc), the
approximation at y = µ is always valid.
   In the particular example of the CARA and Normal model, we get an exact expression for
financial centrality. Under homogeneity of preferences and an utilitarian planner, we have
ci (s) = y (s) whenever ζi = 1, and q (s) = u0 [y (s)] = exp [−ry (s)]. Since yi ∼i.i.d N µ, σ 2
                                                                                                 

we have that y (s) | ζ ∼ N µ, σ 2 /n (ζ) . Therefore
                                        
                                                            (                        !)
                                                                           r2 σ2
              E [ζi q (s)] = Ey,ζ {ζi exp [−ry (s)]} = Eζ     ζi exp −rµ +
                                                                           2 n (ζ)
                                             (     "          #)
                                                       σ2
                         = exp (−rµ)Eζ       ζi exp γ
                            |    {z      }            n (ζ)
                                u0 (µ)

where, as we saw before, γ = u000 (µ) /2u0 (µ) = r2 /2.

              5. Financial Centrality in More General Environments

   In this section, we develop expressions for financial centrality in more general environ-
ments. First, we add agent-specific heterogeneity in volatility. Second, we add heterogeneity
in Pareto weights in the planner’s problem. Third, we add heterogeneity in agent-specific
income. Fourth, we relax the common preferences assumption. And fifth, we allow income
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                  16

draws to be correlated with market participation via shocks to fundamentals. In each of these
cases we derive the formula for financial centrality and call attention to the changes, if any,
to our core characterization. The basic formulation in each case stays the same, with minor
changes per relaxation, as we add them sequentially. Proofs of all statements can be found in
the appendix.


5.1. Volatility. Our first extension adds agent-specific heterogeneity. We suppose agents’
income distributions have a common mean µ and idiosyncratic variance that is possibly corre-
lated var (y1 , y2 , . . . , yn ) = Σn×n . In this case let us define the average variance in the market
σ 2ζ := n1ζ i,j ζi ζj σi,j .
           P

    We show that

                                                                 σ 2ζ
                                             (                          !)
(5.1)                          F Ci ≈ Eζ       ζi u0 (µ) 1 + γ ×             .
                                                                 nζ
What this implies is that agents are more central if they are more likely to trade when (1)
income volatilities are higher σi2 ↑ and (2) trading agents have positively correlated income
                                     

shocks (σij > 0).
   To see the intuition, consider for example a risk sharing model where agents can only meet
pairwise. If the planner was able to choose the meeting distribution, he would pair agents
with σij < 0 to smooth the income shocks. If σij > 0 then both agents do very well or poorly,
exacerbating risk. Thus agents that are present whenever this happens are more valuable.


5.2. Pareto weights. Our next extension maintains the heterogeneity in volatility from be-
fore, but now introduces heterogeneity in Pareto weights. To make things simple consider
either CES preferences, u (c) = c1−ρ − 1/1 − ρ, or CARA preferences: u (c) = − 1r exp (−rc).
   We show that
                                                                    σ 2ζ
                                         (                                 !)
(5.2)                        F Ci ≈ Eζ       ζi u0 (µ) × λζ × 1 + γ              ,
                                                                    nζ
where the new term is now the average Pareto weight of trading agents.
                                  Q         1/nζ
                                        ζi
  In the CARA case, λζ :=            i λi            is the geometric mean of the Pareto weights of
                                                                1/ρ ρ
                                                                  
agents in the market. In the CES case, λζ := n1ζ i ζi λi    is the Lp -mean (or Dixit-Stiglitz
                                                          P

aggregator) of Pareto weights. In either case, the main result is that agents who are there
when the average agent is more important to the planner are more central, which is intuitive.


5.3. Expected income. Now we turn to the case where will introduce heterogeneity in ex-
pected income as well. We will maintain our previous extensions. To make things tractable, let
us consider homogeneous CARA preferences, with u (c) = − 1r exp (−rc) and we assume that
y ∼ N (µ, Σ), with Σ a symmetric, positive definite variance-covariance matrix.
                                FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                           17

  In this case we can write
                                                                                σ 2ζ
                                             (                                         !)
                                                            
(5.3)                       F Ci = Eζ ζi × exp −rµζ              × λζ × exp γ ×
                                                                                nζ

where µζ := n1ζ i ζi µi is the average income of trading agents. This extension teaches us
                    P

that agents are more central if the average agent in the market has a lower endowment in
expectation when the agent in question is in the market.



5.4. Preferences. We take our previous assumptions and add to this preference hetero-
                                                                                                               −1
geneity, with ui (c) = −ri−1 exp (−ri c). It is useful to write rζ :=                          1           1
                                                                                                   P
                                                                                              nζ   i:ζi =1 ri         and
                                 1
                   rζ /ri
         Q                 
                                nζ
λ̂ζ :=    i:ζi =1 λi                 . In this case the formulation becomes

                                                                             r2ζ   σ 2ζ
                                             (                                            !)
                                                            
(5.4)                   F Ci = Eζ ζi × exp −rζ µζ                × λ̂ζ × exp     ×             .
                                                                             2     nζ
Again, we see that agents are more central if the degree of risk aversion when the agent is in
the market is higher, which once again captures a sort of generalized notion of market thinness.



5.5. Aggregate shocks to fundamentals. Throughout this section and the paper thus far,
we have assumed that income is orthogonal to market participation. We now relax this assump-
tion. Assume that agents observe shocks to income volatility and expected income to certain
agents. We maintain CARA utility as before with heterogenous risk aversion parameters and a
jointly normal income distribution with heterogeneous mean, variance, and covarying income
draws.
   To begin with, there is an aggregate (fundamental) shock z ∈ Z with some distribution
G (z). This fundamental shock affects preferences expected income µ (z), income variance
Σ (z), preferences ui (c, z) = − ri1(z) exp (−ri (z) c), and even the Social Planner’s preferences
λ (z).
   Income is modeled as y = µ (z) + Σ (z) x, where x ⊥ (z, ζ) and is such that xi ∼i.i.d
N (0, 1). Market participation can be drawn as ζ | z ∼ F (ζ | µ (z) , Σ (z) , r (z) , λ (z)) With
these assumptions, income is Gaussian, and (y | z) ⊥ (ζ | z). The conditional independence
will buy us a simple characterization.
   The generalized version of centrality is
                                                                            r2ζ (z) σ 2ζ (z)
                                 (                                              "                      #)
                                                 h           i
              F Ci = Ez,ζ            ζi × exp −rζ (z) µζ (z) × λζ (z) × exp        ×
                                                                               2       nζ
                                                        
where the market averages rζ , µζ , λζ , σ 2ζ are functions of market fundamentals z ∈ Z. As
expected, the intuitions from the previous exercises remain, now operationalized through the
co-movements between ζi and z.
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                         18

                                    6. Endogenous Participation

   Until now the participation has been exogenously determined. We relax that assumption
in this section, allowing agents’ choices to determine whether or not they participate. This
not only correlates y and ζ through this endogenous decision making process, but changes
the financial centrality expression as well. We characterize financial centrality in an extremely
general form that works when there is heterogeneity in Pareto weights, preferences, and income
distributions (as before) but also works when there is a causal link between income draws and
market participation. There is an extra term, captured by the (endogenously determined) score
function that captures how the probability of showing up to trade responds to the liquidity
injection policy, which we refer to as the trade subsidy effect: how marginally increasing income
in states that the agent trades in, increases both the likelihood that the agent trades and the
concurrent market participation decisions of other agents, as well as how this increases welfare.
   The pedagogical example we provide is one with private information and endogenous market
participation. Consider a simple situation where every individual first gets a signal about the
income draws (both hers and of other agents in the economy) before they are realized. After
receiving this signal, the agent decides whether or not to access the market at fixed cost, as-
suming that, in equilibrium, agents have common knowledge both of every agents’ equilibrium
market participation decision and of the consumption allocation (as a function of the realized
state). We can clearly see that the endogenous choices of the agents to participate end up
correlating y and ζ, since market participation is a function of the private information agents
have (about y) and this information is obviously correlated with income draws. Throughout
this section, we will focus on the case of discrete income shocks, Y .

6.1. Example: Private Information and Costly Market Access. In our example, the
consumption allocation c = (ci (s))i∈I,s∈S is common knowledge, but agents can only ob-
serve (objective) private information about both income shocks y ∈ Rn , and about other
agents information. We encode beliefs and higher order beliefs about income shocks and in-
formation using a type space structure, a modeling device introduced by Harsanyi (1967).
Formally, we model agents’ beliefs with a signal structure (or a common prior type space)
      
Z = (Zi , βi : Zi → ∆ (Y × Z−i ))i∈I , β0 where zi ∈ Zi is the agent’s signal (or type). Here
this represents the information she observes observes before observing the draw of s = (y, ζ).
β0 ∈ ∆ (Y × i Zi ) is a common prior distribution over income shocks and signals and βi (· | zi )
             Q

is the conditional belief distribution over income shocks and signals of other agents, derived
from β0 using Bayes rule.4 Because Y is assumed to be finite and the choice set for every
agent is binary, we can focus also only on finite signal spaces. We also add the constraint
that margY β0 = F (i.e., the marginal distribution over income shocks coincide with the true
distribution of shocks). Based on its type, agent i decides whether or not to access the market
at some disutility cost, κi > 0.

4That is, for all (y, z , z ) we have β (y, z | z ) =   Pβ0 [y,(zi ,z−i)]             .
                       i −i            i     −i  i
                                                                 β0 [y,(ẑi ,z−i )]
                                                           t̂i
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                   19

   The timing is as follows:
    (1) Income shocks y ∈ Rn+ is drawn according to F (y).
    (2) Agents observe only zi ∈ Zi , which are jointly drawn with probability
                                                                 X
(6.1)                               P (z | y) = β0 (y, z) /             β0 (ŷ, z) .
                                                                 ŷ∈Y

    (3) Agents decide whether to access the market (ζi = 1) or not, given their private infor-
        mation zi ∈ Zi .
    (4) State s = (y, ζ) is publicly observed, and agents consume according to allocation c (s).
To characterize the agents’ market participation decisions, they need to form beliefs over the
vector of income draws and market participations. We will model this as a game, where agent’s
strategies are the mappings from information to market participation. The natural solution
concept here is the Bayesian Nash Equilibrium (BNE): a profile of functions ζi∗ : Zi → {0, 1}5
is a BNE if and only if, for all i ∈ I and all zi ∈ Zi

                 if ζi∗ (zi ) = 1 =⇒ Es {ui [ci (s)] | ζi = 1, zi } − κi ≥ Es {ui (yi ) | zi }

where the expectations for each agent is taken with respect to the probability measure
                                                                                                 
                                             X X                 X
                     P (s = (y, ζ) | zi ) :=                                      βi (y, z−i | zi ) .
                                                                                                  
                                                
                                              y∈Y j6=i     zj ∈Zj :ζj∗ (zj )=ζj

  Given a signal structure Z and a BNE profile ζ ∗ = (ζi∗ (·))i∈I , we can then derive an ex-ante
equilibrium distribution over states s = (y, ζ) as
                                                                 X
                            P (s = (y, ζ)) = P (y)                                P (z | y) ,
                                                         z∈Z:ζi∗ (zi )=ζi ∀i∈I

using (6.1). This would be the measure used by the Social Planner when measuring financial
centrality, since she has to integrate over agents’ signals from an ex ante perspective, according
to the assumed common prior distribution β0 .

6.2. A General Derivation of financial centrality with Endogenous Market Partici-
pation. In this section we formally define, in this setting, what we mean by endogenous market
participation environments. Intuitively, an environment has endogenous market participation
if the income draw is an exogenous variable, and then the market participation distribution is
then determined by this draw. Formally, is an environment with the following timeline: (1)
income distribution is drawn y ∼ F (y) (as seen before), and then (2) market participation is
drawn according to ζ ∼ P (ζ | y).
   Of course, this type of environment generally has the property that ζ 6⊥ y. Of course, any
joint distribution for s = (y, ζ) can be decomposed in this manner: what makes an environment
have endogenous market participation is that y is exogenous to market participation ζ. Keeping

5We focus on pure strategies for simplicity of exposition.
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                      20

the example in mind, recall that in general, without endogenous participation, our notion of
financial centrality thus far has been

                                           ∂L
                                                = Es [ζi q (s)]
                                           F Ci =
                                           ∂yi
where we used the fact that the joint distribution of s = (y, ζ) did not change when an agent
received an increase in her endowment. However, when market participation is a choice that
can depend on endowments, then there might be precisely such an effect.
   We can show that in this case that there is a natural extension, with a second term reflecting
the effect that changing the endowment of an agent has on market participation.

Proposition 6.1. Suppose the environment has endogenous market participation, and that
c (·) solves 2.1. Then financial centrality as defined in 3.1 can be written as:
                                                                          
                                                 X                          
                      F Ci := Es [ζi q (s)] + Es  λj uj (cj (s)) Si (ζ | y)
                                                                            
                                                              j∈I

                    ∂ log P(ζ|y)
where Si (ζ|y) :=       ∂yi        is the score of the likelihood function P (ζ | y) with respect to yi .

   The first term is as before, but the second term looks at a Pareto and utility weighted change
in the equilibrium probability of configuration of participation. Basically, by adding zi to i,
the term looks at the percent change in the probability of each participation configuration
weighted by a Pareto-weighted utility term. So holding fixed our notion of centrality without
taking the endogenous participation’s effect on the configuration likelihoods, this notion of
centrality makes an agent more central if the liquidity injection corresponds to an increase in
participation configurations where more valuable agents enter.

Proof. For simplicity of exposition, assume a finite state space (i.e., y is a discrete random
variable), so the Lagrangian is
                                                                            
                    X     X         X                         X
            L=                       λj uj (cj ) + q̂ (y, ζ)   ζj (yj − cj ) P (ζ | y) P (y) .
                 y∈Y ζ∈{0,1}n        j∈I                            j∈I

Using the envelope theorem, we get that
                    ∂L
          F Ci =
                    ∂yi
                    X      X
               =                    ζi q̂ (y, ζ) P (ζ | y) P (y)
                    y∈Y ζ∈{0,1}n
                                                                             
                    X      X         X                         X                ∂P (ζ | yi )
               +                      λj uj (cj ) + q̂ (y, ζ)   ζj (yj − cj )              P (y)
                    y∈Y ζ∈{0,1}n     j∈I                             j∈I
                                                                                    ∂yi

and using the facts that q (y, ζ) = q̂ (y, ζ) /P (y, ζ) and complementary slackness implies
                                                       X
                                           q̂ (y, ζ)         ζi (yi − ci ) = 0
                                                       i∈V
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                 21

for all (y, ζ). We can simplify this expression as
                                                                                              
                                                  
                                                                                              
                                                                                               
                                                                                              
                                                                        ∂P (ζ | yi )
                                                                                              
                                                  X                                     1     
               F Ci = Ey,ζ {ζi q (y, ζ)} + Ey,ζ           λj uj (cj )
                                                  
                                                  
                                                   j∈I
                                                                           ∂yi       P (ζ | yi ) 
                                                                                                 
                                                                                                 
                                                  
                                                                       |         {z          }
                                                                                               
                                                                              :=Si (ζ|yi )

proving the desired result.                                                                          


   In the model proposed in subsection 6.1, we assume that the credit line policy t = (tj )j∈J
from section 3.1 is common knowledge among agents, and hence the policy has no effect on
the information agents have access to. It does, however, affect the relative utility of market
access. That is, the market access strategy (given transfer ti ≥ 0) is

(6.2)           ζi∗ (θi | t) = 1 ⇐⇒ Es {ui [ci (yi + ti , y−i , ζ)] − ui (yi ) | θi } ≥ κi .

If ci (·) is a weakly increasing in own endowment (e.g.: ci (s) = y ζ in an environment with an
utilitarian planner, and agents with homogeneous preferences) the transfer ti acts as a subsidy
for market participation, increasing the set of signals θi for which condition 6.2 is satisfied.
However, since the transfer policy is assumed to be common knowledge, this also affects the
marker participation decisions of other agents. If ci is weakly increasing for all agents (e.g.
also ci (s) = y ζ ) then other agents also have higher incentives to access the market, since it is
more likely that i will be trading, and i is more valuable, since i increases aggregate income
whenever she trades. We summarize this result in the following corollary.

Corollary 6.1. Take the model of Private Participation and Costly Market Access of Sec-
tion 6.1, and λ ∈ ∆n . If the allocation c (·) solving 2.1 is non-decreasing in y, then F Ci >
Es [ζi q (s)].

6.3. Team Production Environments. Another type of endogenous market participation
considers a setting where market participation shocks are determined exogenously first and
then the income distributions for agents with market access depend on the identities of those
trading. Formally, the timing on the resolution of uncertainty would be as follows: (1) Market
participation ζ is drawn according a distribution G (ζ); (2) Income distribution is drawn from
y ∼ F (y | ζ). A leading example of such an environment is one of team production. Agents
without market access draw income from their autarky income distribution yi ∼ Fi (yi ). How-
ever, once agents are drawn together to form a market, income is drawn jointly, and then agents
can divide aggregate income draws amongst them in any feasible consumption allocation.
    Models like this also show correlation between market participation and income. However,
it is straightforward to see that in such models, financial centrality is simply F Ci = Es {ζi q (s)}
as before. This is simply because the injection policy of giving an injection to agent i has no
effect on the market participation distribution, since it is assumed here to be exogenous to
income draws. But unlike the baseline model, income and market participation are now not
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                            22

independent, and the expectation has to be calculated over market participation and income
shocks jointly.

                              7. Market Formation Process

   Throughout the paper we have characterized financial centrality abstractly without model-
ing explicitly the market formation process. In this section we briefly provide a few examples
of market making or matching models which are admittedly stylized, but intended to be ped-
agogical and in certain contexts applicable.
   In the homogeneous case, since
                                                        γ
                                                            
(7.1)                             F Ci ∝ Eζ ζi 1 +
                                                      n (ζ)
                       n             o
                        1
we need to calculate E n(ζ) | ζi = 1 and P (ζi = 1). Here we propose some examples of these
market making processes.

7.1. Warm-up: Degree Model. The first example imagines a network where in every period,
a single node is chosen as a host and all of its neighbors are activated to trade.
   Let g = (I, E) denote the network with E the set of edges and gij = 1 {ij ∈ E}. For
simplicity this is an undirected, unweighted graph and assume each node has a self-loop (gii =
1). Let di := j gij denote the degree of node i and let Ni := {j ∈ I : gij = 1} denote the
                P

neighborhood of i.
   Market participation is drawn as follows. With probability zi = n1 , each agent is selected to
be the host. Then ζi = 1 and also ζj = 1 {j ∈ Ni }. We can compute financial centrality as
                                                        
                                         1        X gij 
                                  F Ci =    di + γ         .
                                         n          dj 
                                                     j

Agents who have larger neighborhoods are more central (from the di term), but in particular
agents that have neighbors who have smaller neighborhoods are more central (from the d1j
term). The notion of centrality derived from this model may be quite different from traditional
notions of centrality, such as betweenness, Bonachich, or eigenvector centrality, among others.
In Figures 7.1a and 7.1b, we compare two agents i and j in different parts of a large network
(so n is the same for both of them). Observe that agent j in Figure 7.1b is more central than
the one in Figure 7.1b, i, according to most commonly used centrality measures, since she can
reach more agents in the same number of steps (higher eigenvector centrality, for example).
However, the agent j is less financially central than i, since (a) it has the same probability
of having market access, but (b) the markets she has access to are bigger (in the first order
stochastic dominance sense) to those that agent i reaches, and is hence less important. This
is because of the logic of consumption variance reduction: a dollar given to the agent i will
reduce consumption variance a lot more than agent j.

7.2. General Poisson Models. The second example generalizes the above. Let zi ∈ [0, 1]
denote the probability that an agent gets selected as the host. Then let p denote a matrix
                             FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                        23




                         1                2                              5                6




                                     i                                             j




                         4                3                              8                7




                                 (a)                                              (b)

         Figure 7.1. Two agents in a large network, i and j, in Panels (A) and (B)
         respectively. Standard measures of centrality would typically treat j as being
         more central than i, ceteris paribus, since they have the same degree and j’s
         neighbors’ degrees are higher. Our notion of financial centrality ranks F Cj <
         F Ci .


with entries pi,j denoting the probability that j is in the market when i is the host, which is
independent across j. We set pi,i = 1.
   This nests some obvious special cases. For example, in the degree model above, p = g.
Another example is an invitations model, where each host sends out an invitation to all the
other network members which arrives with probability that declines in the network distance
δij between i and j. Then pi,j = αδij for some probability α (Jackson and Wolinsky, 1996).
   It is useful to define an individual specific parameter, which is the expected number of
individuals in the trading room when i is selected as host, νi . This can be computed as
       P
νi := j pij . To characterize financial centrality, we need to know the expected sizes of the
trade rooms when i is host and conditional on i being in the room, integrating across the other
possible hosts. Two auxiliary random variables will be very useful in the rest of the section:
n−i = (nζ − 1) | i is host, and n−j,i = (nζ − 2) | j hosts & ζi = 1. This means that whenever
i hosts, market size is nζ = 1 + n−i , and whenever j hosts, and we condition on i accessing the
market, then market size is nζ = 2 + n−j,i . This auxiliary random variables have range from
0 to k ∈ {n − 1, n − 2}, and based on our assumptions, we have
                              X                                      X
                    n−i ∼            Bernoulli (pi,k ) and n−ji ∼             Bernoulli (pj,k ) ,
                              k6=i                                  k∈{j,i}
                                                                     /

where these Bernoulli distributions are independent, with success probabilities strictly less
than 1.6 These distributions are also called Poisson Binomial distributions, and have been
extensively studied in the literature. We will write X ∼ P B (p) with p = (p1 , p2 , . . . , pk ) the
vector of success probabilities of each Bernoulli trial. This distribution, in some cases, can be

6Exact and approximation methods for calculating expectations of market sizes are sensitive to the assumption
of interior (i.e., in (0, 1) ) success probabilities. This is the reason for the need to define the random variables
n−i and n−ji .
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                            24

well approximated by a Poisson distribution.7 In this model, we have that n−i ∼ P B (Pi ) and
n−ji ∼ P B (P−j,i ) where Pi = (pi,k )k6=i ∈ [0, 1]n−1 and P−j,i = (pj,k )k∈{i,j}
                                                                           /      ∈ [0, 1]n−2 . These
random variables are useful to write our approximation to financial centrality as
                                                     "                      !#
                                                      1
                  F Ci ≈ FˆC i := P (ζi = 1) × 1 + γE    |ζ
                                                      nζ
                                                                                                !
                                                    1                                 1
                                                                         X
                                 = pi 1 + γzi E                     +γ      zj E           ,
                                                 1 + n−i                j6=i
                                                                                  2 + n −ji

where pi = P (ζi = 1). Therefore, we need to calculate the inverse moments E (1/1 + X) and
E (1/2 + X) for n Poisson Binomial random variables; X = n−i and X = n−ji for all j 6= i.
Hong (2013) provides a general survey on the commonly used methods to calculate explicitly the
probability function of Poisson Binomial distributions, using either recursive or Discrete Fourier
Transform methods, which are fairly fast even with large n.8 We also survey results (starting
with Le Cam (1960)) that show that if the expected number of successes of a Poisson Binomial
distribution is sufficiently low (corresponding in this case with low expected market sizes), then
it can be well approximated by a Poisson distribution.9 In the context of this model, it means
that if E (n−i ) = νi − 1 is small (relative to n), then we can approximate n−i ∼ Poisson (νi − 1)
and n−ji ∼ Poisson (ν−ji ), where ν−ji = E (n−ji ) = k∈{i,j}     pjk = νj − pji − 1.
                                                         P
                                                             /
   If X ∼ Poisson (ν − 1), then E (1 + X) = m1 (ν) := [1 − exp (1 − ν)] / (ν − 1) and E (2 + X)−1 =
                                              −1

m2 (ν) := [1 − m1 (ν)] / (ν − 1), both strictly decreasing functions of ν ≥ 1. Using these for-
mulas, we can then approximate FˆC i by:
                                                                                         
                                                                                         
                         FˆC i ≈ pi ×
                                                                   X
                                            1 + γzi m1 (νi ) + γ          zj m2 (νj − pj,i ) .
                                                                                         
                                                                   j6=i

This shows the following. First, nodes with a larger expected reach as measured by νi are more
central (as long as n is large enough relative to γ). Second, nodes that have larger expected
inverse room size when they are hosts are more central. Third, i is more central when pj,i
increases, particularly when νj is small. So when j tend to invite small rooms as hosts, but i
is likely to be in such a j’s room, then i is more valuable.




7Le Cam (1960) provided bounds on the error of approximation, which were improved by Stein (1986); Chen
(1975),
      P and Barbour and Hall       (1984); Sason
                                                 P(2013)     show that if X̂ is the poisson approximation (with mean
                                             −λ         2
λ =      i
           p i , then d T V X, X̂   ≤  1 − e        i
                                                      p i /λ, where dT V (·) denotes the total variation distance. This
approximation will then typically be valid when its expected value is not too        large.
8Chen and Liu (1997) show stable (i.e. non-alternating) methods are O n2 , which would make the calculation
                                                      
of financial centrality of a given agent be O n3 . Discrete Fourier Methods are usually much faster (Fernández
and Williams (2010)). See Hong (2013) for a general survey on the existing exact and approximating methods.
9
 This is not the only approximation studied in the literature. In models where the expected market size is high,
Gaussian approximations behave rather          well (see Volkova (1996), Hong (2013)). If success probabilities are
similar (i.e. the variance σp2 := n−1 i (pi − p)2 is small enough) then approximation to a Binomial distribution
                                        P
is fairly accurate (Ehm (1991); Barbour et al. (1992))
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                               25

   A special case are symmetric models, where zi = 1/n for all i and pi,j = pj,i (e.g. the model
pi,j = αδ(i,j) , since distance is symmetric). In this case
                                                                                          
                               1          1                         X1                    
                      F Ci =     νi 1 + γ × m1 (νi ) + γ        m2 (νj − pj,i ) .
                               n          n             j6=i
                                                              n                

This has the advantage that the centrality of agent i depends solely on the expected market
size of each agent (as a host) that she gets connected to, and the probability that she connects
to them. The marginal value of the inverse room size effect when i is the host, proportional to
νi × m1 (νi ), declines in νi if and only if νi ≥ 2.79 (there is a positive effect in P (ζi = 1), but
an offsetting negative effect in m1 (νi ) )
   If we want to calculate centrality exactly, we can still use the calculation of the exact pdf of
n−i and n−ji to get the exact Financial Centrality. For example, in the CARA+normal model
with homogeneous preferences and independent and identically distributed income draws, we
know that F Ci = Eζ {ζi exp (γ/nζ )}, which can be decomposed as
                                                                           "                  !#
                                                  γ                                    γ
                                                             X                              
                  F Ci = pi     zi E exp                      +          zj E exp
                                              1 + n−i            j6=i
                                                                                    2 + n−ji    

and then be calculated explicitly using the distributions for n−i and n−ji .


7.3. Transaction Chains. In the Poisson models, for j 6= k 6= i, note that ζj ⊥ ζk conditional
on i hosting. But trading groups may be determined dynamically, along a chain of meetings.
In this case the study of random walks on graphs provides the right vocabulary to capture
this.
   We can model this in a simple way, though the analytic characterization is hard to come
by. Let (zi )i∈[n] denote the probabilities that each node is the host, let (pij )i,j∈[n] denote the
probability that i meets j, and let β be the probability that at each stage the chain continues.
With complementary probability 1 − β, the chain terminates exogenously. However, the chain
also terminates if an agent is revisited (and hence no new agents are added to the market)..
   This process, at termination, determines the size of the trading room. While it is easy to
describe, and easy to simulate, it is hard to analytically compute moments for the distribution
of n1ζ (Aldous and Fill, 2002; Durrett, 2007), even if chains are not terminated upon revisiting
an agent. This is because what matters is the number of distinct agents in the market, not just
the number of steps the chain makes (which, in that case, would simply follow a Geometric
random variable).In the special case with large n, zi = 1/n, β = 1 (no random exogenous
termination) and pij = 1/di (i.e. uniform random walk, with equal probability among first
degree neighbors) and g comes from an Erdös-Renyi process, Tishby et al. (2017) get closed
form expressions for the distribution of chain length (or market size in our setup), showing
that it follows a product of an exponential and a Rayleigh distribution10

10This, of course, can be adapted by allowing β ∈ (0, 1).
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                             26

  8. (Constrained) Efficient Solution Concepts Determining Pareto Weights

   The analysis so far has been normative: that is, how a planner with given preferences should
measure the relative importance (in terms of marginal increase in welfare) of increasing the
endowment of agents whenever they are able to trade. In this section, we propose an alter-
native, positive approach. We want to investigate whether in some feasible solution concepts,
agents with higher centrality get rewarded by higher consumption, which in the CARA model
with normally distributed income, translates into a higher Pareto weight in the planner’s rep-
resentation of the consumption allocation. We focus on this environment throughout this
section.
   We first show that if the solution concept is cooperative Nash bargaining, then there is a
positive linear relationship between the representing Pareto weight of an agent and her financial
centrality measure. However, as we saw in Section 5, financial centrality is itself a function of
the Pareto weights vector, which makes the determination of the representing Pareto weights
vector a fixed point equation problem. Secondly, we study the Kalai-Smorodinsky bargaining
solution, which unlike the Nash bargaining solution, does not explicitly depend on the financial
centrality of the agents. However, the representing Pareto weights (which, again, map into
higher consumption for the agent in the CARA preferences environment) does depend on
moments that typically make financial centrality of an agent higher, such as smaller market
sizes conditional on the agent being trading.

8.1. Nash Bargaining. Suppose agents decide the social contract by bargaining among them-
selves. Agents receive an expected utility Ui = E [ui (ci (s))] in a contract. If they reject
the proposed social contract, then agents get their “disagreement point”, or autarky value,
Uiaut = Eyi [ui (yi )]. The social contract is the choice of a feasible consumption allocation
c (s) = {ci (s)}s=(y,ζ) . If the bargaining process satisfies Pareto optimality, linearity in utilities
and independence of irrelevant alternatives, then the optimal contract solves

                                  {Es {ζi ui [c (s)] + (1 − ζi ) ui (yi )} − Eyi [ui (yi )]}αi
                            Y
                    max
                     c(s)
                            i∈I

subject to i ζi ci (s) ≤ i ζi yi , for some vector α such that                                  = 1 and αi ≥ 0. This is
            P                P                                                       P
                                                                                         i αi
equivalent to solve the following program
                                           X
                                   max           αi ln {Es ζi [ui (ci (s)) − ui (yi )]}
                                    c(s)
                                           i∈I

                                           X                   X
                                   s.t :         ζi ci (s) ≤         ζi yi for all (y, ζ) .
                                           i∈I                 i∈I
  The first order conditions of this problem are
                                         αi
                                                          u0 (ci (s)) = q (s)
                           Es ζi [ui (ci (s)) − ui (yi )]
where, again, q (s) are the Lagrange multipliers of the resource constraints. Therefore, the
equivalent Pareto weight in the Planner’s problem is exactly
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                27



                                                    αi
                                   λi =
                                      Es ζi [ui (ci (s)) − ui (yi )]
  In the next proposition, we investigate the fix point equation for the CARA normal model.

Proposition 8.1. Suppose ui (c) = −ri−1 exp (−ri c) and y ∼ N (µ, Σ). Then, the Pareto
weights associated with the Nash bargaining solution with bargaining weights α ∈ ∆n satisfy
the following fix point equations:
                                           αi ri + F Ci (λ)
(8.1)                          λi =                                for all i.
                                                           ri2 2
                                      pi exp −ri µi +       2 σi

Proof. See Appendix A.                                                                              

   This proposition shows why the Nash Bargaining Solution is a nice application in our setting.
In the fixed point equation, holding everything else fixed, agents with higher financial centrality
have also higher Pareto weights (which, of course, is the result of a fixed point equation). This
suggests that, if agents bargain over risk sharing contracts, holding autarky as a threat point
of the negotiation, then agents with higher centrality should have higher portions of aggregate
income.
   In particular, for the symmetric Nash bargaining solution (αi = 1) and homogeneous prefer-
ences and i.i.d income, we get that the representing Pareto weights are not uniform (λi 6= 1/n)
but rather satisfy

(8.2)                          ln (λi ) = κ + ln [r + F Ci (λ)] − ln (pi )

so the heterogeneity in the market participation process has a bite, unlike (as we saw above)
the Walrasian equilibrium with the same preferences.

8.2. Kalai-Smorodinsky Bargaining. The second most used bargaining solution in the
literature is the Kalai-Smorodinsky solution. It also gives closed form solutions to Pareto
weights, and are expressed as a function of fundamentals of the environment, rather than a
fixed point equation.
   The most important parameter in the bliss point. The bliss point for agent i, U i is defined
as the utility she would achieve if she consumed all the available income in the market in every
state where she can trade, and only her own income otherwise:
                                                                               
                                                  X
                          U i := Eζ,y ζi ui         ζj yj  + (1 − ζi ) ui (yi )
                                                  j
                          
and U = U 1 , U 2 , . . . , U n . Likewise, the disagreement point U i is the value of autarky in this
environment for each agent
                                             U i := Eyi [ui (yi )]
and U := (U 1 , U 2 , . . . , U n ). The Kalai-Smorodinsky solution consists on finding the linear
combination of U and the U that lies on the Pareto frontier of the utility possibility set; i.e,
                          FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                           28

find α ∈ [0, 1] such that αU + (1 − α) U ∈ P (U), and the solution is U ∗ = αU + (1 − α) U .
Since U > U , the Kalai-Smorodinsky solution here would be

                                                           max              α
                                                    α∈[0,1],{ci (y,ζ)}i∈I

subject to
             
             E [ζi ui (ci (y, ζ)) + (1 − ζi ) ui (yi )] ≥ αU i + (1 − α) U                    for all i
               y,ζ                                                          i
             P  ζi ci (y, ζ) ≤
                              P
                                      ζi yi                                                   for all (ζ, y) .
  One of the most attractive properties of the Kalai-Smorodinsky solution is that the Pareto
weights derived from it have a closed form formula, and is not a fixed point equation (as in
the Nash Bargaining solution case).

Proposition 8.2. If the risk sharing contract is the Kalai-Smorodinsky solution over the utility
possibility set, then the Pareto weights associated with the solution are
                                                                 1
                                          λi =
                                                  Es {ζi [ui (Y (s)) − ui (yi )]}
where Y (s) = j ζj yj is the aggregate income in state s = (y, ζ). If ui (c) = −ri−1 exp (−ri c)
                 P

and y ∼ N (µ, Σ), then
                                                                    β
                  λi =                n                               h               i           o
                                                         σ2                         σ2
                         pi × Eζ exp −rµ +               2        − exp nζ −rµ +    2         | ζi = 1

where β = r/ −rµ + σ 2 /2 .
                                  


Proof. See Appendix A.                                                                                           

Corollary 8.1. In the CARA normal model, with homogeneous preferences and i.i.d income
shocks, if µ > 2r σ 2 , then Lagrange multiplier are decreasing (in the FOSD sense) in market
size.

  Unlike Nash Bargaining, Pareto weights in this environment have a closed form solution, so
comparative statics are easier to interpret, and the comparative statics are the same as the
one suggested by the Nash Bargaining fixed point equations.

                                           9. An Empirical Example

   We now take our perspective to the data. The goal of this section is to demonstrate, with an
observational analysis, that there is empirical content in our theoretical approach. We make
no causal claims here. We look at the Townsend Thai village data over 15 years, and we focus
on 338 households across 16 villages where we have detailed data on consumption, income,
and transactions across villagers (Samphantharak and Townsend, 2010). In particular, in this
setting we have variation in the number of transactions per time period. We use whether a
household has reported making or receiving a transfer to any other household in the given
month as a measure of being active in the network in a given period.
                         FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                   29

    Our theory suggests that nodes that provide more value, those with higher measures of
financial centrality, are exactly those that are in the market when the market is thin (in a
generalized sense including few active traders and greater per-trader-volatility in income).
    We proceed in two steps. First, we need a measure that reflects F Ci = ∂V    ∂ti . As we show
in subsections 8.1 and 8.2, if Pareto weights are determined by Nash bargaining or Kalai-
Smorodinsky bargaining, then a more financially central individual i has a higher Pareto weight
λi . So, though we do not observe financial centrality, we can use observations on consumption in
panel data to obtain an estimate of a function for each agent i which is monotonically increasing
in the Pareto weight λi . Specifically we obtain the household fixed-effect of consumption, using
only active periods:
                                   civt = αi + βyivt + δtv + ivt
where t is indexing a set of active periods, αi is a household fixed-effect, and δvt is a village-
by-time fixed effect. Under CARA utility the αi is a monotone function of Pareto weights
λi .
    We also know from our theory the crucial components in our financial centrality measure,
market thinness. So we next compute a measures of market thinness for each household by
factor,
                                              1
                                                
                             ζ
                            ρi := covt ζit ,       and ρσi := covt (ζit , σ̄t ) ,
                                             nvt
where nvt is the number of active participants in period t in a village v, computed from the
transfers data as mentioned, and where σ̄t2 := n1ζ
                                                       P
                                                        i,j ζit ζjt σ
                                                                    bi,j,t is an estimate of the volatility
                                                     t
at period t, where σ̂i,j,t is the measured covariance between households i and j’s income.
    Finally we check on the relationship of these two pieces, implied Pareto weights and crucial
components of financial centrality, by running a multi-variate regression

                                 αi = β0 + β1 ρζi + β2 ρσi + Xi0 β3 + ui

where Xi is a polynomial of wealth. Our theory suggests that β1 > 0 and β2 > 0. We note that
this is an observational claim, but it is not mechanical: that those who are present exactly
when the market is thin tend to receive a greater mean consumption, even conditional on
wealth, is consistent with our model.
   Table 1 presents the results. Columns 1-2 and 4-5 include each measure of market thinness
when the agent enters one-by-one and columns 3 and 6 include them together. Columns 1-
3 include no subsequent controls, whereas columns 4-6 include a third-degree polynomial in
wealth. We see a one-standard deviation increase in the tendency to enter when the market is
thin in numbers is associated with a corresponding 0.095 standard deviation increase in mean
consumption (column 1). Similarly, a one-standard deviation increase in the tendency to enter
when the market is thin in the sense of high volatility is associated with a corresponding 0.103
standard deviation increase in the mean consumption (column 2). These estimates are stable
to being jointly included (column 3), as well as when we include wealth controls.
                         FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                   30

       Table 1. Do Pareto weights correlate with measures of market thinness when
       the agent is active?

                                 (1)         (2)          (3)         (4)         (5)          (6)
                                  αi          αi           αi          αi          αi           αi

                ρζi            0.095**                 0.112**      0.078*                  0.093**
                               (0.041)                 (0.045)      (0.041)                 (0.044)
                ρσi                       0.103**      0.118**                  0.121**     0.131**
                                          (0.050)      (0.051)                  (0.051)     (0.052)

                Observations     338         338         338         338         338          338
                R-squared       0.016       0.018       0.040       0.060       0.074        0.088
                Controls        None        None        None        Wealth      Wealth       Wealth
                Notes: Robust standard errors in parentheses. The dependent variable is a (mean zero,
                standardized) Pareto weight estimate of a given household, obtained from using the
                vectors of household fixed effects from a regression of consumption on household
                income. Regressors are each standardized as well. Wealth controls includes a third-
                degree polynomial in household wealth. *** p<0.01, ** p<0.05, * p<0.1



   Taken together, the results are consistent with a story where agents have determined Pareto
weights through a bargaining process, and those who have higher weights and therefore higher
financial centrality are precisely those who tend to be active traders when the market is thin
either in terms of numbers of individuals or volatility. Our results are, of course, observational
and merely suggestive.

                                               10. Extensions

   In this section we study two extensions that depart from the class of environments we study.
One of the most seemingly important restrictions on the models studied so far is the existence
of centralized markets: agents either are in autarky or have market access and can trade with
any other agent that also has market access. While the bilateral trading chains introduced
in subsection 3.3 relaxes this interpretation, it maintains the possibility that any agent is
reachable to any other, through a finite sequence of trades, as long as both have market access.
In this Section 10.1 we introduce a generalization of the basic environment, allowing for the
existence of several segmented markets working in parallel, where agents can only trade among
a subset of all agents who have market access. We show that the basic definitions and formulas
of financial centrality still hold, if we reinterpret having “market access” to be present in the
market where the agent being injected with liquidity is trading at.
   Another important assumption, maintained throughout this paper, is that the Social Planner
evaluating the marginal value of injected liquidity also is able to implement the allocation c (·)
that maximizes her expected utility. However, a relevant case is one where the planner can only
influence the economy by the liquidity injection policies introduced in proposed in Section 3.1,
and cannot directly choose the allocation herself. This would be the case when the allocation
is chosen according to some other solution concept, like Walrasian Equilibrium, multi-player
                        FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                31

bargaining games, and so on. In such situations, the social planner would have to take the
consumption allocation as given when measuring the marginal effects of injecting liquidity in
this economy. In Section 10.2 we study financial centrality measures under the assumption that
the consumption allocation is Pareto optimal, which implies that there exist some representing
social preferences (i.e., Pareto weights) for which it would be optimal. We then obtain similar
expressions for financial centrality, which now incorporates a term relating the Pareto weights
of the Social Planner with the representing Pareto weights of the allocation.


10.1. Segmented Markets . We consider an environment with the same income shocks and
preferences, but one where agents may gain access to random, segmented markets. Formally, a
market segmentation is a partition π = {m1 , m2 , . . . mr } over the set of agents I; i.e., ∪m∈π m =
I and m ∩ m0 = ∅ for all m 6= m0 . In this alternative environment, the relevant state of nature
is now s = (y, π), where π is the market segmentation state, with probability distribution
P (s) . We refer to each m ∈ π as a market at state s. Let P be the set of all partitions of
I that have positive probability under P (s). We denote m (i, π) ∈ π to be the market (at
segmentation π) where i is able to trade. If m (i, π) = {i} we say i is in autarky at π, and
otherwise we say i has market access at π. Segmented markets now modify the definition of
feasibility of allocations. We say that an allocation c = (ci (s))i∈I is feasible if and only if, for
all s = (y, π) and all m ∈ π we have i∈m ci (s) ≤ i∈m yi . Clearly, class of environments
                                         P               P

embedds the Single Market Environments studied before – i.e., markets where any partition
π in the support is made up of a single multi-agent market mu (π) ⊆ I with #mu (π) ≥ 1,
and everyone else being in autarky, and hence we can summarize the state by s = (y, ζ) where
ζi = 1 ⇐⇒ i ∈ mu (π). In general, for a given partition π we write ζim ∈ {0, 1} for the
indicator of whether i has access to market m.
   Given Pareto weights λ ∈ ∆ and agent i ∈ I, the planner’snproblem value function           o     of
                                           s
injecting liquidity ti ≥ 0 to agent i is V (ti ) := max(cj (y,π))j∈I Es
                                                                         P
                                                                            j∈I λj uj [cj (s)] subject
   P                P             m
to j∈m cj (s) ≤ j∈m yj + ti ζi for all s = (y, π) and all m ∈ π. Financial centrality is now
defined in the same as before, for this value function. Intuitively, a planner needs to integrate
also over all possible market segmentations in order to assess the marginal value of the liquidity
injection policy for agent i, since the shadow value of the injection will depend on the market
agent i is trading at. We show that the financial centrality measure follows the same formula
as in the centralized markets environments, in a “virtual single market economy” where having
market access is understood as being able to trade with the agent of interest.

Definition 10.1. Take a segmented market economy E, with distribution over states P (y, π).
Define Ei to be a virtual single market economy where all agents have identical preferences over
consumption, and the distribution over outcomes P̃ (y, ζ) is given by:
                                                                                            
                                            (1) : j ∈ m (i, π) for all j : ζj = 1      and
(10.1)      P̃ (y, ζ) = P (y, π) ∈ Y × P :                                                   ,
                                            (2) : #m (i, π) > 1
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                               32

i.e., an agent j 6= i has market access on economy Ei only when she is able to trade (i.e., in the
same market) with agent i in E.

   Proposition 10.1 asserts that financial centrality in a segmented markets economy, follows
the same “asset pricing formula” we had in Proposition 3.4, but on the virtual single market
economy Ei . The proof is quite straightforward, and simply generalizes the proof of Proposition
3.4, and is therefore omitted.

Proposition 10.1. Suppose y ⊥ π. Let E be a segmented markets economy and i ∈ I. Then,
for any λ ∈ ∆, the financial centrality for agent i coincides with the financial centrality of
agent i in the virtual single market economy Ei . That is,
                                       ∂V s (t)
                             F Ci :=            |t=0 = EP̃
                                                        s=(y,ζ) {ζi q (s)}
                                         ∂ti
where EP̃ (·) is the expectation taken w.r.t measure P̃ defined in 10.1.

   Intuitively, financial centrality only deals with the effect of the increase in agent’s i endow-
ment, which can only impact those agents who can trade with her. Because of separability of
the planner’s preferences over different agents consumptions, the marginal welfare effect on the
segmented markets i is trading on have no effect on the welfare evaluation of other segmented
markets at the same time. Therefore, whether agents not trading with i are either trading
among themselves, or in autarky, is irrelevant when evaluating the policy. Moreover, any two
states with generate the same segmented market for agent i are equivalent from the point of
view of the planner when evaluating this policy. This result is easily generalized for endogenous
market participation economies.

10.2. Passive Planners. In this section, we consider the original environment, but assume
the consumption allocation is a primitive of the model (e.g., being determined by a Walrasian
Equilibrium). In this setup, the Social Planner can only influence the allocation by making
the proposed liquidity injections of Section 3.1. If the social planer has preferences given by
        P
V = E [ λi ui (ci )], and agents consume according to a (differentiable) allocation c (·), financial
centrality would be defined as:
                                                                               
                                                                         ∂cj   
                                                        λj u0j [cj (s)]
                                               X
                            F Ci = Es    ζi                                   (s) .
                                        
                                              j:ζj =1
                                                                          ∂yi    

   An important case is where c (·) is a (constrained) Pareto optimal allocation; i.e., there exists
a representing Pareto weight vector ϕ such that c (·) solves problem 2.1 with ϕ instead of λ.
Also, let q (s) be the usual normalized lagrange multiplier of the resource constraint at state
s, for this ϕ− planner problem. It is easy to show (see Appendix A) that financial centrality
in this setting is
                                                                           
                                                           X         ∂cj (s) 
(10.2)                       F Ci = Es      ζi q (s)              ρj            ,
                                         
                                                         j:ζj   =1
                                                                       ∂yi 
                           FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                              33

where ρj := λj /ϕj 11.
   A special case is when the consumption allocation satisfies ∂cj /∂yi = n−1
                                                                           ζ whenever ζj = ζi =
1. This is the case in the CARA model with homogeneous preferences, even if income draws
are not Normal (see Appendix A). Whenever this happens, equation 10.2 can be simplified to
                                                      n                  o
                                          F Ci = Es ζi q (s) × ρζ ,

where ρζ = n−1
                    P
              ζ     ζj ρj is the arithmetic mean of the Pareto weights ratio, and q (s) is the
Lagrange multiplier in the Pareto problem with weights ϕ. In the CARA-Normal model this
then translates into
                                                                  r2 σ 2ζ
                                      (                                        !       )
                                                         
                           F Ci = Eζ ζi ϕζ exp −rµζ           exp                  × ρζ ,
                                                                  2 nζ

which is the same formula as in Section 5.3, but with an extra term, ρζ := n−1
                                                                                                       P
                                                                                  ζ    ζj (λj /ϕj ),
the (arithmetic) mean of relative Pareto weights. Another important case where ∂cj /∂yi = n−1   ζ
is an environment where agents are homogeneous preferences and identical and independently
distributed random draws. If the allocation comes from a Walrasian equilibrium, we know
that the representingn Pareto weight is ϕ
                                          oj = 1 for all j (see  Proposition B.2), and therefore
                               r2 σ2                        −1 P
F Ci = exp (−rµ) Eζ ζi exp 2 nζ × λζ , where λζ := nζ            ζj λi is now the arithmetic mean
of the pare-to weight of the social planner. In the baseline case of Section 4, with homogeneous
preferences, i.i.d. income draws and a representing pare-to weight ϕnj =1 for allj (so o ci = y
                                                                                    σ2
if ζi = 1) we can approximate the centrality measure to F Ci ≈ Eζ ζi 1 + γ nζ λζ , which
resembles the centrality measure obtained in Subsection 5.2 for CES and CARA preferences.

                                             11. Conclusion

   In a number of economic environments, agents in a market share risk, but there is hetero-
geneity in market access, in the ability to participate in exchange. This is true of financial
markets with search frictions and stochastic matching with limited and stochastic market par-
ticipation financial and monetary models. This is observed in risk-sharing village networks,
among other settings. A common, standard model with market participation shocks is used to
address the question of how one measures an agent’s importance We define the financial cen-
trality of an agent as the marginal social value of injecting an infinitesimal amount of liquidity
to that agent.
   We show that the most valued agents are not only those who trade often, but are more
likely to trade when there are few traders, when income risk is high, when income shocks are
positively correlated, when attitudes toward risk are more sensitive in the aggregate, when
there are distressed institutions, and when there are tail risks.
   We extend our framework to allow for endogenous market participation. Finally, we provide
observational evidence from village risk-sharing network data consistent with our model: that

11Of course, when λ = ϕ we have ρ = 1 for all j, and since   P
                                                                         ∂cj (s) /∂yi = 1 for all s : ζi = 1, we recover
                                 j                             j:ζj =1
the usual formula in this case.
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                            34

the agents that receive the greatest share of the pie are indeed those who are not simply
well-connected, but are active precisely when the market is otherwise thin.
  Addressing this issue is important for both theory, data, and policy. It allows us to pinpoint
both who is providing the greatest marginal value and how one may want to intervene and
provide marginal liquidity. .



                                         References

Acemoglu, D., M. A. Dahleh, I. Lobel, and A. Ozdaglar (2010): “Bayesian Learning
 in Social Networks,” .
Acemoglu, D., A. Ozdaglar, and A. Tahbaz-Salehi (2015): “Systemic risk and stability
 in financial networks,” The american economic review, 105, 564–608.
Aldous, D. and J. Fill (2002): “Reversible Markov chains and random walks on graphs,” .
Allen, F. and A. Babus (2009): “Networks in Finance,” in Network-based Strategies and
 Competencies, ed. by P. Kleindorfer and J. Wind, 367–382.
Allen, F. and D. Gale (2000): “Financial contagion,” Journal of political economy, 108,
 1–33.
Alvarez, F. and G. Barlevy (2015): “Mandatory Disclosure and Financial Contagion,” .
Ambrus, A., W. Y. Gao, and P. Milán (2017): “Informal Risk Sharing with Local Infor-
 mation,” .
Ambrus, A., M. Mobius, A. Szeidl, and L. Center (2010): “Consumption risk-sharing
 in social networks,” NBER Working Paper.
Armenter, R. and B. R. Lester (2015): “Excess Reserves and Monetary Policy Normal-
 ization,” FBR of Philadelphia Working Paper.
Babus, A. (2016): “The formation of financial networks,” The RAND Journal of Economics,
 47, 239–272.
Barbour, A. D. and P. Hall (1984): “On the rate of Poisson convergence,” Mathematical
 Proceedings of the Cambridge Philosophical Society, 95, 473–480.
Barbour, A. D., L. Holst, and S. Janson (1992): Poisson Approximation, Oxford Studies
 in Probability 2, Oxford: Clarendon Press.
Battiston, S., D. D. Gatti, M. Gallegati, B. Greenwald, and J. E. Stiglitz (2012):
 “Liaisons dangereuses: Increasing connectivity, risk sharing, and systemic risk,” Journal of
 Economic Dynamics and Control, 36, 1121–1141.
Bech, M. L. and E. Atalay (2010): “The topology of the federal funds market,” Physica
 A: Statistical Mechanics and its Applications, 389, 5223–5246.
Boss, M., H. Elsinger, M. Summer, and S. T. 4 (2004): “Network topology of the
 interbank market,” Quantitative Finance, 4, 677–684.
Chang, B. and S. Zhang (2016): “Endogenous market making and network formation,” .
Chen, L. H. Y. (1975): “Poisson Approximation for Dependent Trials,” The Annals of Prob-
 ability, 3, 534–545.
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                           35

Chen, S. X. and J. S. Liu (1997): “Statistical Applications of the Poisson-Binomial and
  Conditional Bernoulli Distributions,” Statistica Sinica, 7, 875–892.
Cocco, J. F., F. J. Gomes, and N. C. Martins (2009): “Lending relationships in the
  interbank market,” Journal of Financial Intermediation, 18, 24 – 48.
Cohen-Cole, E., A. Kirilenko, E. Patacchini, J. Fouque, and J. Langsam (2013):
  “Strategic interactions on financial networks for the analysis of systemic risk,” Handbook on
  Systemic Risk, 1, 306–326.
Cont, R., A. Moussa, E. Santos, J. Fouque, and J. Langsam (2013): “Handbook on
  systemic risk,” Network structure and systemic risk in banking systems. Cambridge Univer-
  sity Press, Cambridge, 327–368.
Craig, B. and G. Von Peter (2014): “Interbank tiering and money center banks,” Journal
  of Financial Intermediation, 23, 322–347.
Duffie, D., N. Gârleanu, and L. H. Pedersen (2005): “Over-the-Counter Markets,”
  Econometrica, 73, 1815–1847.
Durrett, R. (2007): Random graph dynamics, vol. 200, Cambridge university press Cam-
  bridge.
Echenique, F. and A. Wierman (2012): “Finding a Walrasian Equilibrium is Easy for
  a Fixed Number of Agents,” in Proceedings of the 13th ACM Conference on Electronic
  Commerce, New York, NY, USA: ACM, EC ’12, 495–495.
Ehm, W. (1991): “Binomial approximation to the Poisson binomial distribution,” Statistics
  & Probability Letters, 11, 7 – 16.
Eisenberg, L. and T. H. Noe (2001): “Systemic risk in financial systems,” Management
  Science, 47, 236–249.
Elliott, M., B. Golub, and M. O. Jackson (2014): “Financial Networks and Contagion,”
  American Economic Review, 104, 3115–53.
Farboodi, M. (2015): “Intermediation and Voluntary Exposure to Counterparty Risk,” .
Fernández, M. and S. Williams (2010): “Closed-form expression for the poisson-binomial
  probability density function,” IEEE Transactions on Aerospace and Electronic Systems, 46,
  803–817.
Franklin, A., A. Babus, and E. Carletti (2009): “Financial Crises: Theory and Evi-
  dence,” Annual Review of Financial Economics, 1, 97–116.
Freeman, S. (1996): “The payments system, liquidity, and rediscounting,” The American
  Economic Review, 1126–1138.
Freixas, X., B. M. Parigi, and J.-C. Rochet (2000): “Systemic risk, interbank relations,
  and liquidity provision by the central bank,” Journal of money, credit and banking, 611–638.
Gai, P. and S. Kapadia (2010): “Contagion in financial networks,” in Proceedings of the
  Royal Society of London A: Mathematical, Physical and Engineering Sciences, The Royal
  Society, vol. 466, 2401–2423.
Gale, D. M. and S. Kariv (2007): “Financial networks,” The American economic review,
  97, 99–103.
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                          36

Green, E. J. and R. Zhou (2002): “Dynamic monetary equilibrium in a random matching
  economy,” Econometrica, 70, 929–969.
Harsanyi, J. C. (1967): “Games with incomplete information played by ?Bayesian? players,
  I–III Part I. The basic model,” Management science, 14, 159–182.
Hendershott, T. and A. Madhavan (2015): “Click or Call? Auction versus Search in the
  Over-the-Counter Market,” The Journal of Finance, 70, 419–447.
Hojman, D. A. and A. Szeidl (2008): “Core and periphery in networks,” Journal of Eco-
  nomic Theory, 139, 295–309.
Hong, Y. (2013): “On computing the distribution function for the Poisson binomial distribu-
  tion,” Computational Statistics & Data Analysis, 59, 41 – 51.
Jackson, M. O. (2008): Social and Economic Networks, Princeton University Press.
Jackson, M. O. and A. Wolinsky (1996): “A strategic model of social and economic
  networks,” Journal of economic theory, 71, 44–74.
Jaramillo, M. (2012): “The spatial geography of teacher labor markets: Evidence from a
  developing country,” Economics of Education Review, 31, 984–995.
Kiyotaki, N. and R. Wright (1989): “On money as a medium of exchange,” Journal of
  Political economy, 97, 927–954.
Langfield, S., Z. Liu, and T. Ota (2014): “Mapping the UK interbank system,” Journal
  of Banking & Finance, 45, 288–303.
Le Cam, L. (1960): “An approximation theorem for the Poisson binomial distribution.” Pacific
  J. Math., 10, 1181–1197.
Levy, H. and H. Markovitz (1979): “Approximating Expected Utility by a Function of
  Mean and Variance,” The American Economic Review, 69, 308–317.
Li, D. and N. Schürhoff (2014): “Dealer networks,” .
Loistl, O. (1976): “The erroneous approximation of expected utility by means of a Taylor’s
  series expansion: analytic and computational results,” The American Economic Review, 66,
  904–910.
Mas-Colell, A., M. D. Whinston, J. R. Green, et al. (1995): Microeconomic theory,
  vol. 1, Oxford university press New York.
Negishi, T. (1960): “Welfare economics and existence of an equilibrium for a competitive
  economy,” Metroeconomica, 12, 92–97.
Samphantharak, K. and R. M. Townsend (2010): Households as corporate firms: an
  analysis of household finance using integrated household surveys and corporate financial ac-
  counting, 46, Cambridge University Press.
Santos, M. S. and M. Woodford (1997): “Rational asset pricing bubbles,” Econometrica:
  Journal of the Econometric Society, 19–57.
Sason, I. (2013): “Improved lower bounds on the total variation distance for the Poisson
  approximation,” Statistics & Probability Letters, 83, 2422 – 2431.
Stein, C. (1986): “Approximate Computation of Expectations,” Lecture Notes-Monograph
  Series, 7, i–164.
                         FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                    37

Summer, M. (2013): “Financial Contagion and Network Analysis,” Annual Review of Finan-
  cial Economics, 5, 1–38.
Tishby, I., O. Biham, and E. Katzav (2017): “The distribution of first hitting times of ran-
  domwalks on Erdős–Rényi networks,” Journal of Physics A: Mathematical and Theoretical,
  50, 115001.
Trejos, A. and R. Wright (1995): “Search, bargaining, money, and prices,” Journal of
  political Economy, 103, 118–141.
Upper, C. and A. Worms (2004): “Estimating bilateral exposures in the German interbank
  market: Is there a danger of contagion?” European Economic Review, 48, 827–849.
Volkova, A. Y. (1996): “A Refinement of the Central Limit Theorem for Sums of Indepen-
  dent Random Indicators,” Theory of Probability & Its Applications, 40, 791–794.

                                        Appendix A. Proofs

Proof of Proposition 3.1. Since V (t) is concave, this program is convex, and satisfies Slater’s
condition if T > 0, and hence the Kuhn-Tucker conditions of this program arePboth necessary
                                                                                     
and sufficient. The Lagrangian of program 3.1 is L (t, η, ν) = V (t) + η T − j∈J tj + νj tj .
Kuhn-tucker conditions are
    (1)   Vj (t) + νj = η for all j ∈ J, where Vj = ∂V /∂tj
    (2)   νj tj = 0 for all j ∈ J
    (3)   νj≥ 0 for all j ∈ J
          η T − j∈J tj = 0 and η ≥ 0
                  P
    (4)
Propose the following solution: t∗i = T, t∗j = 0 for all j 6= i, η = Vi (t∗ ) and νj = η − Vj (t∗ ).
Since V is differentiable, its
                           n partial                                 o t = 0. Therefore, ∃T̂J > 0
                                     derivatives are continuous around
such that for all t ∈ τ = t : j∈J tj < T̂J and tj ≥ 0 for all j ∈ J we have Vi (t) > Vj (t) for
                               P

all j ∈ J ∼ {i} (since F Ci > F Cj ). Therefore, if T < T̂ , a solution t∗ ∈ τ , and therefore we
have Vi (t∗ ) > Vj (t∗ ) for all j, and hence νj = η − Vj (t∗ ) = Vi (t∗ ) − Vj (t∗ ) > 0; i.e. t∗ satisfies
the Kuhn-Tucker conditions. To prove uniqueness, suppose there exists another solution t̂ :
   j∈J t̂j < T̂ and ∃k 6= i with t̂k > 0. If that was the case, then η = Vk (t). But because
P
                                                                                          
  j∈J t̂j < T̂ we also have that Vi t̂ > Vk t̂ . Therefore, Vi t̂ + νi ≥ Vi t̂ > Vj t̂ = η,
P

violating condition (1). Therefore, the only solution to 3.1 is t = t∗                   



Proof of Proposition 3.2. Using the envelope theorem, and letting q (s) be the Lagrange
multipliers of the original program, we get the result.                              



Proof of Proposition 3.3. We will focus on allocations where ci (s) > 0 for all s = (y, ζ) :
ζi = 1 for simplicity. Since 3.5 is a convex optimization problem and u (·) is strictly concave and
differentiable, Kuhn Tucker conditions are necessary and sufficient to characterize the optimum.
This is also true for the planner’s problem 2.1. Let µi > 0 be the lagrange multiplier of the AD
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                             38

budget constraint in 3.6 (this constraint will always be binding). The first order conditions of
the consumer problem with respect to ai (s) at states s = (y, ζ) : ζi = 1

(A.1)        u0i [ci (s)] P (s) = µi r (s) for all s : ζi = 1 where ci (s) = yi (s) + ai (s)

   where ci (s) = yi (s)+ai (s). Also see that the choice of ai (s) is superfluous in the consumer’s
problem if ci (s) = 0 for all s : ζi = 0 , and that the budget constraint can be written
       ζi ci (s) r (s) ≤
    P                     P
as                            ζi yi r (s). Hence c = (ci (s))i∈I,s∈S is a Walrasian equilibrium with
transfers allocation if ∃µi > 0∀i ∈ I such that conditions A.1 and the resource constraint
2.2 are satisfied, and such that ci (s) = yi for all s : ζi = 0. The corresponding Walrasian
Equilibrium has ai (s) = ci (s) − yi , r (s) = (1/µi ) u0i [ci (s)] P (s) > 0 and τi = s ai (s) r (s) =
                                                                                      P

(1/µi ) Es {[ci (s) − yi ] u0i [ci (s)]}.
   Doing the same exercise for the planner’s problem 2.1 , we get that a consumption allocation
ci (s) solves the planner’s problem with Pareto Weights λ ∈ ∆ if and only if it satisfies the
resource constraint 2.2 for all s ∈ S, ci (s) = yi for all s : ζi = 0 and all i ∈ I, and satisfies for
all i ∈ I:

(A.2)                             λi u0i [ci (s)] = q (s) for all s : ζi = 1

where q (s) is the (normalized) lagrange multiplier of the resource constraint at state s.
   Therefore, a Walrasian Equilibrium with transfers consumption allocation c will also be
the solution to the Planner’s Problem 2.1 with Pareto Weights λi = 1/µi . Likewise, for given
λ ∈ ∆, the solution to the Planner’s Problem 2.1 will be a Walrasian Equilibrium with transfers
if we take µi = 1/λi . Moreover, the implementing price function r (s)and transfers τi satisfy:

(A.3)                          r (s) = (1/µi ) u0i [ci (s)] P (s) = q (s) P (s)

                                         τi = Es {[ci (s) − yi ] q (s)}
since 1/µi = λi .                                                                                    



Proof of Subsection 5.1. Wen use the same
                                       o   approximation around y = µ of Proposition
                                   2
4.1, but now we have that E (y − µ) | ζ = n2 i:ζi =1 j:ζj =1 σij = n1ζ σ 2ζ as defined above.
                                           1 P      P
                                                         ζ
Following the same steps of the proof of Proposition 4.1 we get to equation 5.1                      



Proof of Subsection 5.2. Take the case of CES preferences: u (c) = c1−ρ − 1 / (1 − ρ).
                                                                                               

The first order conditions of planner program 2.1 are now

                                λi c−ρ
                                                                  1/ρ
                                                                   −1/ρ
                                    i = q (s) ⇐⇒ ci (s) = λi q (s)

Putting this equation in the resource constraint of state s, and solving for q (s) we get
                                                                                 ρ
                        −1/ρ
                             X     1/ρ                       1 X 1/ρ  −ρ
                    q (s)         λi     = nζ y ⇐⇒ q (s) =           λ  y
                                                             nζ j:ζ =1 j
                                                                          j
                         FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                                     39
                        
so q (s) = λζ × u0 y ζ , where λζ is the LP norm of λζ . We then use the approximation of
subsection 5.1 to get the desired result.
  For CARA preferences, the first order conditions are

                         λi exp (−rci ) = q (s) ⇐⇒ rci = ln (λi ) − ln [q (s)]

Again, using this equation in the resource constraint of state s,we solve for q (s) in the same
manner as before:
                                                                                                                     
        1 X                   1                                     1 X
                 ln (λj ) − nζ ln [q (s)] = nζ y ζ ⇐⇒ q (s) = exp            ln (λj ) − ry ζ 
        r j:ζ =1              r                                     nζ j:ζ =1
            j                                                                                        j
                                                                             
                                                 1 X                                
                                 = exp                    ln (λj ) × exp −ry ζ
                                                 nζ j:ζ =1
                                                       j
                                                                       |    {z       }
                                   |                  {z           }     :=u0 (y ζ )
                                                         :=λζ
                    
so q (s) = λζ u0 y ζ where now λζ is the geometric mean of Pareto weights in the market.
From here on, we follow the proof of the result of subsection 5.2.                    




Proof of Subsections 5.3 and 5.4. We follow the previous proof above, now with hetero-
geneous preferences. The first order condition now implies that ri ci = ln (λi ) − ln [q (s)]. Again
substituting this equation into the resource constraint in state s, we obtain

                                       rj−1 ln (λj ) −                      rj−1 ln [q (s)] = nζ y
                                 X                                    X

                             j:ζj =1                              j:ζj =1
                                                         −1                                                    
                                                                                                     r
and using the definitions rζ = n1ζ ζj r1j         and λ̂ζ := exp n1ζ ζj rζj ln (λj ) , we can rewrite
                                                 P                                             P

this as
                            1 X rζ
                                         ln (λj ) − ln [q (s)] = rζ y ⇐⇒
                            nζ j:ζ =1 rj
                                         j

                                                                                     
(A.4)                                            q (s) = λ̂ζ exp −rζ y ζ
                                                         
  Since ζ ⊥ y we have that exp −rζ y ζ | ζ is independent of λ̂ζ | ζ. Moreover, because y ∼
                                                                 
N (µ, Σ) we know that y | ζ ∼ N µζ , n1ζ σ 2ζ , where µζ := n1ζ ζj µj and σ 2ζ := n1ζ ζj ζk σjk
                                                                                              P                       P

as we defined before. Using the moment generating function of the Normal Distribution, we
obtain
                                                                                              r2ζ σ 2ζ
                                                                                                         !
                             h                              i                      
(A.5)                    Ey exp −rζ y ζ | ζ = exp −rζ µζ                                  exp
                                                                                              2 nζ
Using equation A.5 in the definition of financial centrality, we obtain:
                                                                          n       h                        io
                F Ci = Eζ {ζi Ey [q (y, ζ) | ζ]} = Eζ ζi Ey λ̂ζ exp −rζ y ζ | ζ                                   =
                           FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                         40

                                                                                 r2ζ σ ζ       2
                                             (                                                   !)
                                                                        
(A.6)                               = Eζ ζi λ̂ζ exp −rζ µζ                   exp
                                                                                 2 nζ
proving the desired result of subsection 5.4. Subsection 5.3 is the special case where ri = r,
which implies that rζ = r and λ̂ζ = λζ , the simple geometric average of Pareto weights.    




Proof of Proposition 8.1. In the first order conditions of the planner’s problem we have

                                         λi exp (−ri ci ) = λζ exp (−rζ y)

so
                                         1                     λζ
                                     −      exp (−ri ci ) = −       exp (−rζ y)
                                         ri                   ri λi
Hence
                                                       1      h                  i
                        Es [ζi ui (ci (s))] = −             Es ζi λζ exp (−rζ y)
                                                      ri λi
                                                                             r2ζ 2
                                                                   "                                       !#
                                                  1
                                              =−       Eζ ζi λζ exp −rζ µ +     σ
                                                 ri λi                      2nζ ζ
                                                       1
                                              =−            F Ci .
                                                      ri λi
Moreover
                                              1
                          Es [ζi ui (yi )] = − Es [exp (−ri yi )]
                                              ri
                                                            "                                     !#
                                                 1                  r2
                                              = − Eζ ζi exp −ri µi + i σi2
                                                 ri                  2
                                                                                                       !
                                                 1                       r2
                                              = − P (ζi = 1) exp −ri µi + i σi2 .
                                                 ri | {z }                2
                                                            :=pi

This means
                                                                                                  !
                                                    1             r2        1
                  Es {ζi [ui (ci (s)) − ui (yi )]} = pi exp −rµi + i σ 2 −       F Ci
                                                    ri             2       ri λi
and so
                                                               αi ri
                             λi =                                                              ⇐⇒
                                      λi                               ri2 2           1
                                      λi pi exp         −ri µi +        2 σi       −   λi F Ci
                                                                                                       !
                         λi αi ri                                             r2
     λi =                                              ⇐⇒ λi pi exp −ri µi + i σi2 − F Ci = αi ri ⇐⇒
                                 ri2 2                                         2
            λi pi exp −ri µi +    2 σi       − F Ci
                                                          αi ri + F Ci (λ)
                                             λi =                                         
                                                                                   ri2 2
                                                    pi exp −ri µi +                 2 σi
                             FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                                          41

as we wanted to show. In the first order conditions of the planner’s problem we have

                                           λi exp (−ri ci ) = λζ exp (−rζ y)

so
                                          1                     λζ
                                      −      exp (−ri ci ) = −       exp (−rζ y) .
                                          ri                   ri λi
Hence
                                                        1      h                  i
                          Es [ζi ui (ci (s))] = −            Es ζi λζ exp (−rζ y)
                                                       ri λi
                                                                               r2ζ 2
                                                                  "                                       !#
                                                    1
                                                =−       Eζ ζi λζ exp −rζ µ +     σ
                                                   ri λi                      2nζ ζ
                                                        1
                                                =−           F Ci .
                                                       ri λi
Moreover
                                                                                      "                            !#
                                     1                      1                  r2
                 Es [ζi ui (yi )] = − Es [exp (−ri yi )] = − Eζ ζi exp −ri µi + i σi2
                                     ri                     ri                  2
                                                                                          !
                                 1                       r2
                                − P (ζi = 1) exp −ri µi + i σi2 .
                                 ri | {z }                2
                                              :=pi

Therefore                                                                                       !
                                                     1             r2        1
                   Es {ζi [ui (ci (s)) − ui (yi )]} = pi exp −rµi + i σ 2 −       F Ci
                                                     ri             2       ri λi
and so
                                                              αi ri
                               λi =                                                           ⇐⇒
                                      λi                              ri2 2           1
                                      λi pi exp          −ri µi +      2 σi       −   λi F Ci
                                                                                                     !
                           λi αi ri                                            r2
     λi =                                               ⇐⇒ λi pi exp −ri µi + i σi2 − F Ci = αi ri ⇐⇒
                                  ri2 2                                         2
            λi pi exp −ri µi +     2 σi       − F Ci
                                                           αi ri + F Ci (λ)
                                              λi =                                       
                                                                                  ri2 2
                                                     pi exp −ri µi +               2 σi

as we wanted to show.                                                                                                              




Proof of Proposition 8.2. The Lagrangian is
            X     n                                                                             o X
L = α+          µi Ey,ζ [ζi ui (ci ) + (1 − ζi ) ui (yi )] − αU i − (1 − α) U i +                         q (y, ζ) ζi (yi − ci ) P (y, ζ)
                                                                                                    ζ,y

with multipliers (µi )i=1:n and (q (y, ζ) P (y, ζ))y,ζ . First order conditions are
                                                 ∂L                   
                                                    = 1 − µi U i − U i
                                                 ∂α
                              FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                               42

since α ∈ (0, 1) (the bliss point
                                   cannot
                                         be feasible) then, to get an interior solution, we must
      ∂L
have ∂α = 0 ⇐⇒ µi = 1/ U i − U i . The first order conditions with respect to consumption
are
                       ∂L
                               |ζ =1 = 0 ⇐⇒ µi u0i (ci ) P (y, ζ) = q (y, ζ) P (y, ζ)
                    ∂ci (y, ζ) i
therefore, in the planer representation, this equivalent to the Pareto weights being
                                                                        1
                                                     λ i = µi =              .
                                                                     Ui − Ui
                                                                 ζj yj . Since y ∼ N (µ, Σ), we have Y | ζ ∼
                                                             P
In the CARA Normal model, let Y :=
N
     P        P
       ζj µj , i,j ζi ζj σij . Therefore
                        "                      !         #
                                  X                            1                  1
                    Ey ui              ζj yj       | ζi = 1 = − E [exp (−rY )] = − MY (−r)
                                   i
                                                               r                  r
                                                                                                                
                                       t2 2                               r2 2                            r2
                                                   = exp −rµY +                      = exp −r × nζ µζ +
                                                                                                               P
and MY (t) = exp µY t +                2 σY                              2σ                              2        σij . In
                                                                 
                                                      r2 2
the i.i.d case, MY (t) = exp −rnζ µ +                  2 σ nζ       = exp [nζ (−rµ + γ)] and the autarky value is
                                                       2
                 −1
Ey [u (yi )] =    r Myi   (−r) = exp −rµ             + r2 σ 2
  Therefore
                                              
                                                                                             
                                      X                         X                             
   U i − U i = E ζi ui          yj  − ui (yi ) = pi Ey,ζ ui         yj  − ui (yi ) | ζi = 1
                                                                                              
                          j:ζj =1                                j:ζj =1
                  (     "                     !#                     !)
                                                      r2 2                               r2 2
             = pi × exp nζ −rµ +                        σ        − exp −rµ +               σ
                                                      2                                  2
proving the desired result.                                                                                              



Proofs of Subsection 10.2. First, we want to show equation 10.2. For that, we use again
the first order conditions of planner’s problem 2.1 but with representing pare-to weights ϕ ≥ 0:
ϕj u0j (cj (s)) = q (s) ⇐⇒ λj u0j (cj (s)) = ρj q (s) where ρj = λj /ϕj . Using this in the original
definition of centrality in this setup, we get
                                                                                                       
                                                           ∂cj (s)                         ∂cj (s) 
                                             λj u0 (cj (s))
                                       X                                        X
            F Ci = Eζ         ζi                                      = Eζ ζi        ρj q (s)
                              
                                   j:ζj   =1
                                                             ∂yi         
                                                                              j:ζ =1
                                                                                               ∂yi 
                                                                                           j
                                             
                                X    ∂cj (s) 
                   = Eζ ζi q (s)   ρj           ,
                                      ∂yi 
                                           j:ζj =1

showing the desired result. Also, because the resource constraint is always binding at every
                              P               P
state s, we have the identity j:ζj =1 cj (s) = j:ζj =1 yj , which at states s : ζi = 1 implies that
P
  j:ζj =1 ∂cj (s) /∂yi = 1. Therefore, if λ = ϕ, then ρj = 1∀j, q (s) is the multiplier for the
Pareto problem with Pareto weights λ = ϕ and hence, F Ci = {ζi q (s)} , like we had above. 

  and (2) the resource constraint
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                          43

  We now study the special case of the CARA+Normal model with homogeneous preferences
and a representing
                   Pareto weight vector
                                        ϕ. We know  (see B ) that in this model, cj (s) =
 −1                                    −1 P
r ln ϕj /ϕζ + y, where ϕζ = exp nζ          ζj ln ϕj . This then means that whenever ζi =
ζj = 1, we have ∂cj (s) /∂yi = n−1
                                ζ . Moreover, we also showed that in this environment,
                                                                      n              o
q (s) = ϕζ exp (−ry). Therefore, using 10.2 we get F Ci = Es ζi ϕζ exp (−ry) × ρζ , where
now ρζ := n−1
              P
            ζ    ζj ρj is the arithmetic mean of relative Pareto weights. Using the assumption
y ⊥ ζ, we can then rewrite it as
                                                        σ 2ζ
                             (                                 !      )
                                             
                          Es ζi ϕζ exp −rµζ       exp γ            × ρζ .
                                                        nζ
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                                                    44

                 Appendix B. Walrasian Equilibrium without Transfers

   Following the definitions in Subsection 3.2, and given a (normalized) price function r ∈
∆ (S), we can simplify the consumer’s problem by just choosing consumption to maximize
utility, given only one “expected” budget constraint. Formally, agent i ∈ {1, . . . , n} solves

(B.1)                        Vi (q) := max Es {ζi ui [ci (s)] + (1 − ζi ) ui (yi )}

                               subject to: Es [ζi ci (s) r (s)] ≤ Es [ζi yi r (s)]
  As we did when defining the Lagrange multipliers for the planning problem, we normalize
the price function as q (s) P (s)
                               = q̂ (s), where q̂ is the   actual price measure. A Walrasian
equilibrium is a pair (c, q) = {ci (s)}i∈I,s∈S , {q (s)}s∈S such that
        • {ci (s)}s∈S solves B.1 given prices q (s)
        • and markets clear at all states: i ζi ci (s) ≤ i ζi yi . for all s = (y, ζ)
                                           P            P

Proposition ?? implies there exist a vector λ such that the equilibrium allocation solves the
planning problem 2.1, and such that the normalized prices satisfy r (s) = q (s), where q (s) are
the normalized lagrange multipliers of the resource constraint at state s. Following Negishi
(1960) and more recently Echenique and Wierman (2012), we can then solve for the equilibrium
allocation by finding the Pareto weights that satisfy the budget constraints for all agents.
Formally, let c∗i (s | λ) be the optimal consumption allocation in the planning problem with
weights λ, and q ∗ (s | λ) the Lagrange multipliers (normalized by the probabilities of each
state). Then, a Pareto weight vector λ corresponds to a Walrasian equilibrium allocation if
and only if

(B.2)             Es [ζi c∗i (s | λ) q ∗ (s | λ)] = Eζ [ζi yi q ∗ (s | λ)] for all i = 1, 2 . . . n

The next proposition characterizes the Pareto weights equation for the CARA normal case
                                                                                                                                              −1
Proposition B.1. Suppose ui (c) = −ri−1 exp (−ri c) and y ∼ N (µ, Σ). Let rζ :=                                              1
                                                                                                                                     ζi ri−1
                                                                                                                                 P
                                                                                                h                           nζ          i
be the harmonic mean of risk aversion in market ζ, and λζ := exp n1ζ i ζi (rζ /ri ) ln (λi ) be
                                                                                                      P

the average Pareto weight in the market, weighted by the relative risk aversion. Also, let
        P
Σi,ζ := j ζj σij Then the Pareto weight vector λ solving B.2 satisfies:

                              n   h                                                                   i       o
                                                                              rζ
                            Eζ ζi ln λζ + ri µi − rζ µζ −                     nζ       ri Σi,ζ − rζ σ 2ζ        η (s)
(B.3)          ln (λi ) =
                                                         Eζ {ζi η (s)}
                                                                     
                                                           r2ζ σ 2ζ
for i = 1, . . . n, where η (s) := λζ exp −rζ µζ +          2 nζ          .

Proof. From the first order conditions under CARA preferences, we get
                                                                      1            1
(B.4)                  λi exp (−ri ci ) = q (s) ⇐⇒ ci =                  ln (λi ) − ln (q (s))
                                                                      ri           ri
and that
                                  q (s) = λζ exp (−rζ y) = λζ exp (−rζ y)
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                                                             45

Using the first order conditions again, whenever ζi = 1 we get
                                                                                
                                                               ln λi /λζ                  rζ
(B.5)                                         ci (s) =                               +       y (s)
                                                                        ri                ri
                                                                                                                                                     

  Then, the value of the consumption allocation, at prices q (s) is
                                                                                                       
                                  
                                      ln (λi )
                                                                             ln λζ                                  
                                                                                                                               rζ
                                                                                                                                          
      Es {ζi c (s) q (s)} = Es ζi              q (s) − Es ζi                                      q (s)       + Es ζi             y (s) q (s) =
                                         ri                                             ri                                   ri

                    1                     1 n      h          i            o
                       ln (λi ) F Ci (λ) − Es ζi λζ ln λζ + rζ y exp (−rζ y)
                    ri                    ri
                                                         
                                                  rζ σζ
where Ey (−rζ y) = exp −rζ µζ +                    2 nζ        as we have seen before. Moreover

                                                                          r2ζ                rζ2 σ 2
                                                           "                              !                                       !#
                Es [rζ y exp (−rζ y)] = Eζ                         rζ µζ − σ 2ζ exp −rζ µζ +
                                                                          nζ                 2 nζ
  On the other hand, the value of agent i’ s income stream is
                                                                             n                                     o
                             wi = Eζ [ζi yi q (s)] = Es ζi λζ yi exp [−rζ y (s)]
                                                                                                                                         
  Using the moment generating function My (t) = Ey [exp (t0 y)] = exp t0 µ + 21 t0 Σt , we get
  h               i
E yi exp −rζ y ζ        =   ∂M
                            ∂ti   |       y           where 1 is a vector of 1’s, so that t0 y = rζ y. This then
                                  t=− nζ ×1
                                              ζ                                                                
                                                              r                                           r
implies that Ey [yi exp (−rζ y)] = µi − nζζ Σi,ζ exp −rζ µζ + 2nζζ σ 2ζ , where Σi,ζ :=
                                                                                                                                          P
                                                                                                                                              j ζj σij .
Putting all this results together, we can write the budget constraint as
                                                                                                                                   r2ζ                 r2ζ 2
                                                                                              (       "                                       #                 !)
                                                                                                                     
Es [ζi (ci − yi ) q (s)] = 0 ⇐⇒ ri−1 ln (λi ) F Ci (λ)−ri−1 Eζ ζi λζ ln λζ                                                − rζ µζ + σ 2ζ exp −rζ µζ +     σ
                                                                                                                                   nζ                 2nζ ζ
                                                              r2ζ 2
                            (                                      !                                          !)
                                          rζ
                        Eζ ζi λζ      µi − Σi,ζ exp −rζ µζ +     σ                                                    ⇐⇒
                                          nζ                 2nζ ζ
                                                                                                                             r2ζ 2
                        (         "                                                                                        #                               !)
                                                                                   rζ                    
ln (λi ) F Ci (λ) = Eζ ζi λζ ln λζ + ri µi − rζ µζ                                   −      ri Σi,ζ − r2ζ σ 2ζ exp −rζ µζ +     σ
                                                                                       nζ                                   2nζ ζ

  See that the denominator Eζ {ζi η (s)} = F Ci . Also, because λ ∈ ∆, we have ln (λi ) and
  
ln λζ < 0, which implies that if we could, somehow, increase F Ci without affecting the
numerator of the right hand side of B.3, would increase λi in the fixed point equation. An
important corollary of Proposition B.1 is the proof of Proposition 3.2, since we would have
rζ = ri = r for all ζ, and the fact that incomes are identically distributed and independent
imply σ 2ζ = σ 2 , µζ = µ and Σi,ζ = σ 2 . This simplifies the fixed point equation as
                                                           (                                                              !)
                                                                                                 r2 σ2
                        ln (λi ) F Ci (λ) = Eζ ζi λζ ln λζ                               exp −rµ +
                                                                                                   2 nζ
to which a solution is λi = 1/n. We summarize this result in Proposition B.2
                      FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                         46

Proposition B.2. Suppose ui (c) = −r−1 exp n                              2
                                                                        
                                                     2 yi2 ∼
                                             (−rc) and      oi.i.d N µ, σ . Then λi = 1/n ∀i
solves B.2, and hence F Ci (λ) = exp (−rµ) Eζ ζi exp r2 nσζ     .
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                               47

                             Appendix C. Transaction Chains

  A simple transaction chain is a set of agents that can only trade with adjacent agents.
Namely, there is a set of agents J = {i1 , i2 , . . . , ik } ∈ I (which are selected randomly), such
that ij can trade only with agents ij−1 and ij+1 , for j ∈ {0, 1, . . . , k} (except for the first
agent i1 , who can only trade with i2 , and the last member ik , who can only trade with ik−1 ).
Suppose
   (1) Each agent has an endowment of yj ≥ 0.
   (2) Agent j can make or receive transfers T̂j,h ∈ R for h ∈ {j − 1, j + 1}, which might be
       such that T̂j,h + yj < 0 (i.e. giving agent h more than the endowment she has at the
       moment of the transaction). If T̂j,h > 0 it means that j sends resources to agent h,
       while T̂j,h < 0 means that j receives resources from k. The budget constraint that j
       faces is then
                             Tj,j−1 + Tj−1,j + Tj,j+1 + Tj+1,j ≤ yj
        If we define Tj,h as net transfers instead of gross transfers, then Tj,j+1 = −Tj+1,j .
        Therefore, we can work only with the net transfers Tj = Tj,j+1 for agents j = 1, 2, . . . k−
        1. Therefore the budget constraint is, for every j = 1, . . . , k − 1

                                          Tj ≤ yj + Tj−1

   (3) There is a clearing house that, at the end of the day, settle all transactions. That is,
       payments are settled simultaneously, once all transactions are agreed upon.
Without loss of generality, let’s assume ij = j, so that C = {1, 2, . . . k}. A consumption profile
of the agents in the chain C, is a description of consumption amounts c = (c1 , c2 , . . . ck ). A
consumption bundle is feasible if and only if
                                          k
                                          X            k
                                                       X
                                                ci =         yi
                                          i=1          i=1

   We say that a consumption bundle is transfer-feasible ⇐⇒ it is feasible and there exist
transfers {Ti,j }ni=1 such that
                                cj = yj + Tj−1 − Tj ≥ 0
and
                                       k−1
                                       X
                                             (Tj−1 − Tj ) = 0
                                       j=1
In order to be able to define this objects for all j, we set T1−1 = Tk,k+1 = 0. Therefore, for
i=1
                                         c1 = y1 − T2
and for i = k
                                          ck = yk + Tk−1
   For such a consumption allocation, we say the sequence of net transfers {Tj } implements
the allocation c. The (rather obvious) result is that the set of feasible consumption profiles
                       FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                         48

is equal to the set of transfer feasible allocations. This then implies that by modeling the
interactions among agents as trades “as if” everyone was trading with each other is just an
useful representation.
   So, the basic assumptions in this environment is that (1) agents can only trade bilaterally
with adjacent agents (with a predetermined order) in the chain and (2) promises to pay (i.e. net
transfers) have to be settled jointly, after all trades have been agreed upon. This is the most
important assumption; which abstracts away from leverage or run-away constraints (which
would limit the short-run deficits agents can have in any given moment ). In Proposition C.1
we show that, if we allow agents to run short-run deficits (until the end of the day, where
all transactions are settled), than any feasible consumption allocation among k agents can be
implemented by a trading chain (in no particular order of agents).

Proposition C.1. Let c = (ci )i=k
                                                                                          P          P
                                 i=1 be a feasible consumption allocation (so             i ci   =   i yi   ).
Then, the net transfers Tj defined as
                                                        i=j
                                                        X
(C.1)                                Tj = Tj→j+1 :=           (yi − ci )
                                                        i=1

implement c. Moreover, the following gross transfers implement c

                      T̂j→j+1 = max {0, Tj } and T̂j+1→j = max {0, −Tj }

  so either T̂j→j+1 = Tj > 0 and T̂j+1→j = 0, or T̂j→j+1 = 0 and T̂j+1→j = −Tj ≥ 0
                       Pk
Proof. The fact that     j=1 (Tj−1   − Tj ) comes from equation C.1: we have
                                      i=j−1
                                       X                     i=j
                                                             X
                       Tj−1 − Tj =            (yi − ci ) −         (yi − ci ) = cj − yj
                                       i=1                   i=1

and hence
                               k
                               X                       k
                                                       X
                                     (Tj−1 − Tj ) =          (cj − yj ) = 0
                               j=1                     j=1
since c is feasible. The consumption attained for each agent is

                            ĉj = yj + Tj−1 − Tj = yj + (cj − yj ) = cj

i.e. it achieves the target consumption allocation.                                                         
                            FINANCIAL CENTRALITY AND LIQUIDITY PROVISION                                                    49

Appendix D. Endogenous Market Participation: Matching Probability Choice

   We briefly set up another example of endogenous market participation, without fully analyz-
ing it, which concerns moral hazard. Here assume that y is realized and every agent i observes
only zi , an imperfect signal about y (i.e., zi ∼ πi (zi | y) for some conditional cdf πi ). Given
this private information, agents simultaneously choose the probability of accessing the market,
denoted by pi (zi ) ∈ [0, 1] = P (ζi = 1). Agents have to pay a disutility cost ψ (p), where ψ is
strictly increasing and convex.
   Given the profile of functions (pi : Zi → [0, 1])ni=1 , the joint probability of market participa-
tion, given income draws, is given by
                                                   n
                                                          [pi (zi )]ζi [1 − pi (zi )]1−ζi .
                                                   Y
                                  P (ζ | z) =
                                                   i=1

Then consumption is realized according to a feasible consumption allocation ĉ (s) = ζi ci (s) +
(1 − ζi ) yi , where ci (·) is an (eqm) feasible allocation. For this example, we leave unspecified the
choice of the consumption allocation, and it is only assumed that the consumption allocation
as a function of the state s = (y, ζ) is common knowledge among agents.
   Agents preferences (given pi (·) ) are
                                                                                                                                 
                                       X Y                                                                                     
Ui yi , pi | (pj (·))j6=i = pi Et−i ,s                   [pj (zj )]ζj [1 − pj (zj )]1−ζj ui [ci (yi , y−i , ζi = 1, ζ−i )] | zi
                                                                                                                                 
                                              ζ−i j6=i

                            + (1 − pi ) ui (yi )
                            − ψ (pi )

  As in the private information example in section Again the solution concept is the BNE,
with p∗ (t) = (p∗i (zi ))i∈N such that for all i and all yi ∈ Y :
                                                                         n        o         
                                 p∗i (zi )   ∈ argmax Ui yi , pi |          p∗j (·)              .
                                                pi ∈[0,1]                             j6=i
