                                NBER WORKING PAPER SERIES




                ANALYZING THE SPECTRUM OF ASSET RETURNS:
         JUMP AND VOLATILITY COMPONENTS IN HIGH FREQUENCY DATA

                                         Yacine Aït-Sahalia
                                            Jean Jacod

                                        Working Paper 15808
                                http://www.nber.org/papers/w15808


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     March 2010




We are very grateful to Larry Harris and Joel Hasbrouck for helpful discussions regarding market
microstructure issues. We are also grateful for the comments of the Editor and two anonymous referees.
This research was partly funded by the NSF under grants DMS-0532370 and SES-0850533. MATLAB
code to implement the methods described in this paper and sample data files can be downloaded from
the authors' web pages. The views expressed herein are those of the authors and do not necessarily
reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2010 by Yacine Aït-Sahalia and Jean Jacod. All rights reserved. Short sections of text, not to exceed
two paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.
Analyzing the Spectrum of Asset Returns: Jump and Volatility Components in High Frequency
Data
Yacine Aït-Sahalia and Jean Jacod
NBER Working Paper No. 15808
March 2010
JEL No. C12,C14,C22,G12

                                                ABSTRACT

This paper describes a simple yet powerful methodology to decompose asset returns sampled at high
frequency into their base components (continuous, small jumps, large jumps), determine the relative
magnitude of the components, and analyze the finer characteristics of these components such as the
degree of activity of the jumps. We extend the existing theory to incorporate to effect of market microstructure
noise on the test statistics, apply the methodology to high frequency individual stock returns, transactions
and quotes, stock index returns and compare the qualitative features of the estimated process for these
different data and discuss the economic implications of the results.


Yacine Aït-Sahalia
Department of Economics
Fisher Hall
Princeton University
Princeton, NJ 08544-1021
and NBER
yacine@princeton.edu

Jean Jacod
Institut de Mathématiques de Jussieu
CNRS UMR 7586
Université P. et M. Curie (Paris-6)
jean.jacod@upmc.fr
                                        I.    Introduction

       We present in this paper econometric methods designed to analyze the workhorse model
of modern asset pricing: X, typically the log of an asset price, is assumed to follow an Itô
semimartingale. As is well known, for an asset pricing model to avoid arbitrage opportuni-
ties, asset prices must follow semimartingales (see Harrison and Pliska (1981), Delbaen and
Schachermayer (1994)). Semimartingales are very general models that nest most if not all
continuous-time models used in asset pricing. A semimartingale can be decomposed into
the sum of a drift, a continuous Brownian-driven part and a discontinuous, or jump, part.
The jump part can in turn be decomposed into a sum of small jumps and big jumps. The
continuous part can be scaled by a stochastic volatility process, which may be correlated
with the asset price, may jump in conjunction or independently of the asset price, and in
fact be a semimartingale itself.

       This paper is devoted to analyzing the specification of semimartingales on the basis
of high frequency financial returns. We wish to decide on the basis of statistical tests
which component(s) need to be included in the model (jumps, finite or infinite activity,
continuous component, etc.) and determine their relative magnitude. We may then magnify
specific components of the model if they are present, so that we can analyze their finer
characteristics such as the degree of activity of jumps.1 While the underlying mathematical
   1
       Alternative methodologies exist for some of the questions we consider when taken individually. For
example, tests for the presence of jumps have been proposed by Aït-Sahalia (2002), Carr and Wu (2003b),
Barndorﬀ-Nielsen and Shephard (2004), Huang and Tauchen (2005), Andersen, Bollerslev, and Diebold
(2007), Jiang and Oomen (2008), Lee and Mykland (2008), Aït-Sahalia and Jacod (2009b) and Lee and
Hannig (2010), among others. And some of these methods are applicable (in fact, designed for) splitting
the quadratic variation into continuous and discontinuous proportions, another of the issues of interest. To
study the finer characteristics of jumps, Todorov and Tauchen (2010) use the test statistics of Aït-Sahalia
and Jacod (2009b), study its logarithm for diﬀerent values of the power argument and contrast the behavior
of the plot above two and below two in order to identify the presence of a Brownian component. Cont and
Mancini (2009) use threshold or truncation-based estimators of the continuous component of the quadratic
variation, originally proposed in Mancini (2001), in order to test for the presence of a continuous component
in the price process. The resulting test is applicable when the jump component of the process has finite
variation, and a test for whether the jump component indeed has finite variation is also proposed. Belomestny
(2009) proposes a diﬀerent estimator of the index of jump activity based on low frequency data.
  However, to the best of our knowledge, none of the alternative methods are able to address all the questions
we consider here in a common framework. In fact, for some of the issues addressed in this paper, there exist


                                                      1
tools are heavily technical, and are developed elsewhere2 , the end result happens to be
straightforward from the point of view of applications. It requires little more than the
recording of asset returns at high frequency, and the computation of a few key quantities
which we call truncated power variations.

    Relative to the existing literature, this paper makes three separate contributions. First,
we show that seemingly disparate test statistics developed individually can in fact be un-
derstood as part of a common framework, relying on an analogy with spectrography, which
we will carry through the entire paper, hence its title. This contribution is primarily ex-
positional but hopefully has the benefit of facilitating the application of all these methods.
Second, we provide new theoretical results regarding the asymptotic behavior of these test
statistics in situations where market microstructure noise is present, a contribution which
is essential for practical applications to high frequency financial data. Third, we compare
the empirical results obtained on asset returns measured in diﬀerent complementary ways,
comparing the results obtained from transaction prices and quotes, but also by constructing
from quotes the National Best Bid and Oﬀer (NBBO) prices at each point time in order
to filter the transactions into diﬀerent liquidity categories, and by comparing the results
obtained on the Dow Jones Industrial Average (DJIA) index from those obtained on its
thirty individual constituents. We then provide economic interpretations and implications
of the results for option pricing, risk management and the distinction between systematic
and idiosyncratic risk in the individual stocks and the index.

    To describe the methodology, it can be helpful to proceed by analogy with a spectro-
graphic analysis. We observe a time series of high frequency returns, that is a single path,
over a finite length of time [0, T ]. Using that time series as input, we will then design a set
of statistical tools that can tell us something about specific components of the process that
produced the observations. These tools play the role of the measurement devices used in
astrophysics to analyze the light emanating from a star, for instance. Our observations are
as of this writing no other alternative(s), hence our focus on a unified approach to address all these issues
together.
   2
     In earlier work, we developed tests to determine on the basis of the observed log-returns whether a
jump part was present (Aït-Sahalia and Jacod (2009b)), whether the jumps had finite or infinite activity
(Aït-Sahalia and Jacod (2008b)), in the latter situation proposed a definition and an estimator of a degree
of jump activity parameter (Aït-Sahalia and Jacod (2009a)), and finally whether a Brownian continuous
component was needed when infinite activity jumps are included (Aït-Sahalia and Jacod (2008a)).


                                                     2
the high frequency returns; in astrophysics it would be the light, visible or not. Here, the
data generating mechanism is assumed to be a semimartingale; in astrophysics it would be
whatever nuclear reactions inside the star are producing the light that is collected. Astro-
physicists can look at a specific range of the light spectrum to learn about specific chemical
elements present in the star. Here, we design statistics that focus on specific parts of the
distribution of high frequency returns in order to learn about the diﬀerent components of
the semimartingale that produced those returns.

   From the time series of returns, we can get the distribution of returns at time interval
∆n . Based on the information contained in that distribution, we would like to figure out
which components should be included in the model (continuous? jumps? which types of
jumps?) and in what proportions. That is, we would like to deconstruct the observed series
of returns back into its original components, continuous and jumps, as described in Figure
1. Figure 1 cannot be produced by visual inspection alone of either the time series of returns
or its distribution. We need to run the raw data through some devices that will emphasize
certain components to the exclusion of others, magnify certain aspects of the model, etc.

   Similarly to what is done in spectrographic analysis, we will emphasize visual tools
in this paper. In spectrography, one needs to be able to recognize the visual signature
of certain chemical elements. Here, we need to know what to expect to see if a certain
component of the model is present or not in the observed data. This means that we will
need to have a law of large numbers, obtained by imagining that we had collected a large
number of sample paths instead of a single one. This allows us to determine the visual
signature of specific components of the model. We will not attempt here to measure the
dispersion around the expected pattern, and instead refer to the papers in the reference list
for the corresponding central limit theorems, the formal derivations of the results including
regularity conditions, as well as simulation evidence on the adequacy of the asymptotics.
Those papers are technically demanding because of the very nature of semimartingales, but
also because depending upon which component is included or not in the model — precisely
the questions we wish to answer — the asymptotics are driven by components with very
diﬀerent characteristics. By contrast, the intuition is fairly clear and this is what this
paper focuses on, with the objective of facilitating applications of the results rather than
their derivation, with the exception of the new results concerning the limits of all the test
statistics when market microstructure noise is present.

                                              3
   The methodology helps determine which components should be included in a given
semimartingale model of asset returns. This knowledge has various economic implications
for asset pricing. Many high frequency trading strategies rely on specific components of the
model being present or absent. If jumps need to be included in the model, then the familiar
consequences of market completeness for contingent claims valuation typically no longer
hold. And changes of measure will vary depending upon the type of jumps that are included.
Optimal portfolios will vary depending upon the nature of the underlying asset dynamics.
Risk management is also heavily dependent upon the underlying dynamics: clearly, a model
with only a continuous component will yield very diﬀerent risk measures than one with jump
components also present, and diﬀerent types of jumps aggregate separately over longer
horizons. And in derivative pricing, the type of components included change the nature
of observed prices: see for example the analysis of Carr and Wu (2003b) which shows how
to distinguish between option prices when the price jumps and when it does not, based on
their asymptotic behavior for short times to expiration. We will discuss these economic
implications in more detail below.

   A word on data considerations before we proceed: when implementing the method on
returns data, we will rely on ultra-high frequencies, meaning that the sampling intervals we
use are typically of the order of a few seconds to a few minutes. This has two consequences.
First, obviously, it limits the analysis to data series for which such sampling frequencies
are available. This is becoming less and less of a restriction as such data are rapidly
becoming more readily available, but it does limit our ability to use long historical series, or
returns data from less liquid assets. Second, this means that even for liquid assets market
microstructure noise is going to be at least potentially a concern. Continuing with the
spectrography analogy, market microstructure noise plays the same role as the blurring
of astronomical images due to the Earth’s atmosphere or light pollution. And we do not
have the equivalent of a space-based telescope enabling the direct observation of the true or
fundamental asset price. We will in the course of our analysis examine the consequences of
this noise on the various statistics. From the mathematical standpoint, the new theoretical
results in this paper are the development of the various asymptotic behaviors of all the
test statistics under consideration when market microstructure noise is present. We then
proceed to analyze the data in light not only of the idealized no-noise limits but also of these
new limits, and contrast the first order asymptotic behavior identified at diﬀerent sampling


                                               4
frequencies where the impact of the noise can be expected to be more or less significant.

   The paper is organized as follows. Section II presents the common measurement device
we designed to answer the various specification questions. In latter sections, we analyze
these questions one by one: which components are present (Section III), in what relative
proportions (Section IV), and some of the finer characteristics of the jump component
(Section V). Section VII analyzes theoretically the impact of the noise on the various
statistics under consideration. Section VIII describes the data and the transformation and
filtering algorithms we employ to transactions, quotes, and transactions filtered by quotes
for the DJIA and its individual components. Section IX reports the results of applying the
analysis to the data, analyzes the patterns that emerge in terms of liquidity and discuss the
economic implications of the results for option pricing, risk management and the distinction
between systematic and idiosyncratic risk in the individual DJ components vs. the DJ index.
Section X concludes.



                         II.       The Measurement Device

   The log-price Xt follows an Itô semimartingale, a hypothesis maintained throughout,
and formally stated as
                                     Z   t              Z   t
                  Xt = X0 +               bs ds +           σs dWs       + JUMPS               (1)
                                     | 0 {z }           | 0 {z }
                                         drift         continuous part
                           Z tZ                                      Z tZ
             JUMPS =                         x(μ − ν)(ds, dx) +                   xμ(ds, dx)   (2)
                               0   {|x|≤ε}                      0           {|x|>ε}
                           |                  {z            } |                  {z        }
                                         small jumps                          big jumps

where as usual W denotes a standard Brownian motion, and μ is the jump measure of X,
and its predictable compensator is the Lévy measure ν (both μ and ν are random positive
measures on R+ × R, and further ν factorizes as ν(ω, dt, dx) = dt Ft (ω, dx)). In the perhaps
more familiar diﬀerential form,

                                     dXt = bt dt + σt dWt + dJt                                (3)

where Jt is the jump term.


                                                       5
   The distinction between small and big jumps is based on a cutoﬀ level ε > 0 in (2) that is
arbitrary. What is important is that ε > 0 is fixed. A semimartingale will always generate a
finite number of big jumps on [0, T ]. But it may give rise to either a finite or infinite number
of small jumps. For any measurable subset A of R at a positive distance of the origin, the
increasing process ν ([0, t] × A) is increasing and “compensates” the number of jumps of
X whose size is in A, in the sense that the diﬀerence of these two processes is a (local)
martingale. Therefore, ν ([0, t] × (−∞, −ε) ∪ (ε, +∞)) < ∞, whereas ν ([0, t] × [−ε, ε]) may
                                             R
be finite or infinite, although we must have {|x|≤ε} x2 ν([0, t], dx) < ∞.

   In economic terms, each component of the model can be fairly naturally mapped into an
economic source of risk in the underlying asset: the continuous part of the model captures
the normal risk of the asset, which is hedgeable using standard diﬀerential methods; the big
jumps component which can capture default risk, or more generally big news-related events;
and the small jumps component can represent price moves which are large on a time scale
of a few seconds, but generally not significant on a daily and below sampling frequency.
Such jumps may result for example from the limited ability of the marketplace to absorb
large transactions without a price impact. That component represents risk that is relevant
in particular for trading strategies that are executed at high frequency.

   Note that we have compensated the small jumps part, but not the big jumps one.
Compensating the big jumps part is not always possible because the moments may not
exist, whereas summing small jumps without compensation may lead to a divergent sum.
However, when jumps have finite activity, or more generally when they are summable, that
  P
is s≤t |∆Xs | < ∞ for all t, where

                                      ∆Xs = Xs − Xs− ,                                                 (4)
                                                                   R
is the size of the jump at time s, it turns out that                 {|x|≤ε} |x| ν([0, t], dx)   < ∞. Then
compensating the small jumps is not necessary, and we may rewrite (1) as follows:
                                 Z t          Z t          X
                  Xt = X0 +          b0s ds +     σs dWs +      ∆Xs                                    (5)
                                  0             0
                                 | {z }       | {z }        s≤t
                                       drift             continuous part
                                                     R
with a diﬀerent drift term: namely    b0s   = bs −   {|x|≤ε} x Fs (dx).

   We will assume that the model produces observations that are collected at a discrete
sampling interval ∆n : this means in particular that only “regular” sampling schemes are

                                                 6
considered below, although the methodology can be extended to some non-regular sampling
scheme, at the expense of — significantly more — mathematical sophistication. There are
[T /∆n ] (where [x] denotes the integer part of the positive real x) observed increments of X
on [0, T ], which are
                                  ∆ni X = Xi∆n − X(i−1)∆n ,                                     (6)

to be contrasted with the actual (unobservable) jumps ∆Xs of X, as described in Figure 2.

   Our basic methodology consists in constructing realized power variations of these incre-
ments, suitably truncated and/or sampled at diﬀerent frequencies. These realized power
variations are defined as follows, where p ≥ 0 is any nonnegative real and un > 0 is a
sequence of truncation levels:
                                              [T /∆n ]
                                                X
                        B(p, un , ∆n ) =                 |∆ni X|p 1{|∆ni X|≤un }                (7)
                                                i=1

Throughout, T is fixed, and asymptotics are all with respect to ∆n → 0. Typically the
truncation levels un go to 0, and this is usually achieved by taking un = α∆n for some
constants     ∈ (0, 1/2) and α > 0. Setting              < 1/2 allows us to keep all the increments
which mainly contain a Brownian contribution. There will be further restrictions on the
rate at which un → 0, expressed in the form of restrictions on the choice of             . In some
instances, we do not want to truncate at all and we then write B(p, ∞, ∆n ). Sometimes we
will truncate in the other direction, that is retain only the increments larger than u :
                                             [T /∆n ]
                                              X
                         U (p, un , ∆n ) =              |∆ni X|p 1{|∆ni X|>un } .               (8)
                                              i=1

With un = α∆n as above, that can allow us to eliminate all the increments from the
continuous part of the model. Then obviously

                        U (p, un , ∆n ) = B(p, ∞, ∆n ) − B(p, un , ∆n ).                        (9)

Finally, we sometimes simply count the number of increments of X, that is, take the power
p=0
                                                  [T /∆n ]
                                                    X
                             U (0, un , ∆n ) =               1{|∆ni X|>un } .                  (10)
                                                    i=1

   We exploit the diﬀerent asymptotic behavior of the variations B(p, un , ∆n ) and/or
U (p, un ), ∆n ) as we vary: the power p, the truncation level un and the sampling frequency

                                                    7
∆n . This gives us three degrees of freedom, or tuning parameters, with enough flexibility
to isolate what we are looking for. Having these three parameters to play with, p, un and
∆n , is akin to having three knobs to adjust in the measurement device.


A. The First Knob: Varying the Power

   The role of the power variable is to isolate either the continuous or jump components,
or to keep them both present. As illustrated in Figure 3, powers p < 2 will emphasize the
continuous component of the underlying sampled process while powers p > 2 will conversely
accentuate its jump component. The power p = 2 (which receives much attention in the
form of measuring realized volatility) puts them on an equal footing, which turns out to be
useful here only when we seek to measure the relative magnitude of the components.


B. The Second Knob: Varying the Truncation Rate

   Truncating the large increments at a suitably selected cutoﬀ level can eliminate the big
jumps when needed. The key is that there is a finite number of large jumps. Asymptotically,
as the sampling frequency increases, the cutoﬀ level gets smaller. But the large jumps have
a fixed size, so at some point along the asymptotics the cutoﬀ level becomes smaller than
the large jumps, which are thus no longer part of the realized power variation B(p, un , ∆n ),
as illustrated in Figure 4.

   Alternatively, we can truncate to eliminate the Brownian component if we use the up-
wards power variation U (p, un , ∆n ), since the continuous component is only capable of
generating increments that are smaller than un = α∆n when            < 1/2.


C. The Third Knob: Varying the Sampling Frequency

   Sampling at diﬀerent frequencies can let us distinguish between the three situations
where the variations converge to a finite limit, converge to zero or diverge to infinity. We will
achieve this by computing the ratio of two B’s evaluated at the biggest available frequency
∆n and at the same time at some lower frequency k∆n where k ≥ 2 is an integer. Sampling
at frequency k∆n is obtained from the same data series, simply retaining one out of every

                                               8
k data points in Figure 2. As described in Figure 5, the limiting behavior of the ratio (1,
less than 1 or greater than 1) will identify the underlying limiting behavior of B.

   As we will see, the various limiting behaviors of the variations are indicative of which
component of the model dominates at a particular power and in a certain range of returns (by
truncation), just like certain chemical elements have a very specific spectrographic signature.
So they will eﬀectively allow us to distinguish between all manners of null and alternative
hypotheses if we can identify which situation corresponds to which of the spectrographic
signatures of B.



                 III.         Which Component(s) Are Present

   Leaving aside the drift, which is eﬀectively invisible at high frequency, the model (1)-(2)
has three components: a continuous part, a small jumps part and a big jumps part. The
analogy with spectrography would be that we are looking for the signature of three possible
chemical elements (say, hydrogen, helium and everything else) in the light being recorded.
Here, based on the observed log-returns, what can we tell about which component(s) of the
model are present ?

   Consider the following sets defined pathwise on [0, T ] :

                        ΩcT    =         {X is continuous in [0, T ]}
                        ΩjT    =          {X has jumps in [0, T ]}
                        ΩfT    =   {X has finitely many jumps in [0, T ]}
                                                                                          (11)
                        ΩiT    = {X has infinitely many jumps in [0, T ]}
                        ΩWT    =   {X has a Wiener component in [0, T ]}
                       ΩnoW
                        T = {X has no Wiener component in [0, T ]}
                nR           o           nR           o
                   T                        T 2
Formally, ΩW
           T   = 0 σs2 ds > 0 and ΩnoW
                                   T   =   0 σs ds = 0  , and the definition of the four
other sets is clear.

   We observe a time series originating in a given unobserved path, and wish to deter-
mine in which set(s) the path is. At any given — fixed — frequency this is a theoretically
unanswerable question since for example any such time series can be obtained by discretiza-
tion of a continuous path, and also of a discontinuous one. However we wish to construct

                                                9
test statistics that behave well asymptotically, as ∆n → 0, and if possible under the only
structural assumptions (1)—(2). That is, they should be model-free in the sense that their
implementation and their asymptotic properties do not require that we specify or calibrate
the model, which can potentially be quite complicated (stochastic volatility, jumps, jumps
in volatility, jumps in jump intensity, etc.).

   It turns out that this aim is achievable, using the power variations introduced above,
for some of the problems. For others we need some additional structural assumptions, to
be explained later when needed. Let us also mention that for all results one also needs
some weak boundedness-like or smoothness-like assumptions on the coeﬃcients, such as the
process bt should be (locally) bounded: as a rule, these assumptions are not explicitly stated
here, and we refer to the original papers for the mathematically precise statements.


A. Jumps: Present or Not

   The first question we address is whether the path of X contains jumps or not. As
discussed in the Introduction, there is by now a vast literature concerned with detecting
jumps but we will focus on the approach which lends itself to answering the full range of
specification questions listed for semimartingales.

   Using the methodology of power variations, we start with two processes which measure
some kind of variability of X and depend on the whole (unobserved) path of X:
                                Z T                   X
                        A(p) =      |σs |p ds, B(p) =    |∆Xs |p                         (12)
                                     0                          s≤T

where p > 0. The variable A(p) is finite for all p > 0, and positive on the set ΩW
                                                                                 T . The
variable B(p) is finite if p ≥ 2 but often not when p < 2. The quadratic variation of X is
[X, X]T = A(2) + B(2).

   Of course, hoping to estimate B(p) using B(p, un , ∆n ) is too naive in general, but it
works in specific cases. Namely, we have the following behavior of B(p, ∞, ∆n )
                    ⎧                                   P
                    ⎨ p > 2, all X ⇒ B(p, ∞, ∆n ) −→      B(p)
                                                                                         (13)
                    ⎩                         ∆n
                                                 1−p/2                P
                        all p, on   ΩcT   ⇒    mp        B(p, ∞, ∆n ) −→ A(p)

where mp denotes the pth absolute moment of the standard normal variable.

                                                  10
   So we see that, when p > 2, B(p, ∞, ∆n ) tends to B(p) : the jump component dominates.
If there are jumps, the limit B(p)t > 0 is finite. On the other hand when X is continuous,
                                                                         p/2−1
then the limit is B(p) = 0 and B(p, ∞, ∆n )t converges to 0 at rate ∆n           .

   These considerations lead us to pick a value of p > 2 and compare B(p, ∞, ∆n )t on two
diﬀerent sampling frequencies. Specifically, for an integer k, consider the test statistic SJ :
                                                   B(p, ∞, k∆n )
                                SJ (p, k, ∆n ) =                 .                         (14)
                                                   B(p, ∞, ∆n )

   The ratio in SJ exhibits a markedly diﬀerent behavior depending upon whether X has
jumps or not:                                ⎧
                                             ⎨ 1         on ΩjT
                          SJ (p, k, ∆n ) →                                                 (15)
                                             ⎩ k p/2−1 on Ωc ∩ ΩW
                                                           T    T

That is, in the context of Figure 5, under ΩjT the variation converges to a finite limit and so
the ratio tends to 1 (the middle situation depicted in the figure) while under ΩcT ∩ ΩW
                                                                                      T the
variation converges to 0 and the ratio tends to a limit greater than 1, with value specifically
depending upon the rate at which the variation tends to 0 (the lower situation depicted in
the figure). The notion of a set ΩcT ∩ ΩW
                                        T may seem curious at first, but it is possible for
a process to have continuous paths without a Brownian component if the process consists
only of a pure drift. Because this would be an unrealistic model for financial data, we are
excluding the set ΩcT ∩ ΩnoW
                         T   from consideration.
                                                             j
   If one desires a formal statistical test of ΩcT ∩ ΩW
                                                      T vs. ΩT , with a prescribed asymptotic
                                                                  j
level α ∈ (0, 1), one can use a CLT under ΩcT ∩ ΩW
                                                 T and one under ΩT , such CLT being
available again in a model-free situation, apart from some additional smoothness assump-
                                                              j                      j
tions: so one can in fact test either H0 : ΩcT ∩ ΩW
                                                  T vs. H1 : ΩT or the reverse H0 : ΩT vs.
                                                               j
H1 : ΩcT ∩ ΩW
            T . Note that the first limit in (15) is valid on ΩT whether the jump component
includes finite or infinite components, or both. It is not designed to disentangle the two
types of jumps. How to do this is the question we now turn to.


B. Jumps: Finite or Infinite Activity

   Many models in mathematical finance do not include jumps. But among those that
do, the framework most often adopted consists of a jump-diﬀusion: these models include a

                                                11
drift term, a Brownian-driven continuous part, and a finite activity jump part (compound
Poisson process): early examples include Merton (1976), Ball and Torous (1983), Bates
(1991) and Duﬃe, Pan, and Singleton (2000).

   Other models are based on infinite activity jumps: see for example Madan and Seneta
(1990), Madan and Milne (1991), Eberlein and Keller (1995), Barndorﬀ-Nielsen (1997),
Barndorﬀ-Nielsen (1998), Carr, Geman, Madan, and Yor (2002), Carr and Wu (2003a),
Carr and Wu (2004) and Schoutens (2003), although with the exception of Carr, Geman,
Madan, and Yor (2002) models of this type are justified primarily by their ability to produce
interesting pricing formulae rather than necessarily an attempt at empirical realism.

   So, which is it, based on the data? Our objective is now to discriminate between finite
and infinite activity jumps using again the same set of tools.


                           B.1. Null Hypothesis: Finite Activity

   We first set the null hypothesis to be finite activity, that is H0 : ΩfT ∩ ΩW
                                                                               T , whereas the
alternative is H1 : ΩiT . As in the previous subsection, we rule out the set ΩfT ∩ ΩnoW
                                                                                    T   which,
for all models in use in finance, is empty. We choose an integer k ≥ 2 and a real p > 2. The
only diﬀerence with testing for jumps using SJ is that we now truncate
                                                      B(p, un , k∆n )
                            SF A (p, un , k, ∆n ) =                   .                  (16)
                                                      B(p, un , ∆n )

   Without truncation, as in SJ , we could discriminate between jumps and no jumps,
but not among diﬀerent types of jumps. Like before, we set p > 2 to magnify the jump
component at the expense of the continuous component. But since we want to separate big
and small jumps, we now truncate as a means of eliminating the large jumps. Since the
large jumps are of finite size (independent of ∆n ), at some point in the asymptotics the
truncation level un = α∆n will have eliminated all the large jumps: see Figure 4 earlier.
Then if there are only big jumps and the Brownian component, the two truncated power
variations B(p, un , k∆n ) and B(p, un , ∆n ) will behave as if there were no jumps, leaving
only the Brownian component. The limit of the ratio will be kp/2−1 as in the test for jumps
when there are no jumps.

   But if there are infinitely many jumps, which are necessarily small, then the truncation

                                               12
cannot eliminate them. This is because however small un is, there are still infinitely many
jumps in each ∆n −increment. The Brownian component is dominated in every increment
by the small jumps because p > 2. Both B(p, un , k∆n ) and B(p, un , ∆n ) behave like the
sum of the pth power of the jumps that are smaller than un , and although they both go to
0, their ratio tends to 1. In the context of Figure 5, we are in the limiting case where both
B’s go to zero but at the same rate: hence the ratio is 1.

   That is, we have:
                                                (
                                          P          kp/2−1 on ΩfT ∩ ΩW
                                                                      T .
                     SF A (p, un , k, ∆n ) −→                                             (17)
                                                       1        on ΩiT


                          B.2. Null Hypothesis: Infinite Activity

   We next set the null hypothesis to be infinite activity, that is H0 : ΩiT , whereas the
alternative is H1 : ΩfT ∩ ΩW
                           T . We need a diﬀerent statistic, SIA , because although SF A goes
to 1, the distribution of SF A is not model-free under ΩiT . The problem comes form the fact
that the behavior of the truncated power variations B(p, un , ∆n ) depend on the degree of
activity of the jumps when there are infinitely many jumps. So we need to specify what we
precisely mean by “degree of activity”.

   To this end, recalling the definition of B(p) given in (12), we consider now the set IT
= {p ≥ 0 : B(p) < ∞}. This (random) set IT is of the form [βT , ∞) or (βT , ∞) for some
βT (ω) ∈ [0, 2], and 2 ∈ IT always. It turns out that βT (ω), the lower bound of the set IT ,
is a sensible measure of jump activity for the path t 7→ Xt (ω) at time T . In the special
case where X is a Lévy process, then βT (ω) = β does not depend on (ω, T ), and it is also
                                   R
the infimum of all r ≥ 0 such that {|x|≤1} |x|r F (dx) < ∞, where F is the Lévy measure,
and this number has been introduced by Blumenthal and Getoor (1961) and by extension
we call βT the (generalized) Blumenthal-Getoor index, or degree of jump activity, of the
process.

   In other words the degree of jump activity measure the rate at which the jump measure
diverge near 0, so it characterizes the concentration of small jumps. Many examples of
models proposed in finance for asset returns fall in this category, with either fixed values of
β or β being a free parameter. (We will discuss estimating β below.) Examples are included


                                                13
in Figure 7. They include compound Poisson-based models starting with Merton (1976),
the variance gamma model of Madan and Seneta (1990) and Madan, Carr, and Chang
(1998) (β = 0), the Normal Inverse Gaussian model of Barndorﬀ-Nielsen (1998) (β = 1),
the hyperbolic model of Eberlein and Keller (1995), the generalized hyperbolic model of
Barndorﬀ-Nielsen (1977) and the CGMY model of Carr, Geman, Madan, and Yor (2002)
(in which β is a free parameter).

   A priori the degree of jump activity can be random and depend on time, but we assume
for tractability that this index is in fact constant in time and non-random as is the case is
all known examples. More precisely, we assume that the Lévy measure ν in (2) is of the
form                               ³                                 ´
                               1      +                −
              ν(dt, dx) =           a   1   +
                                      t (0,zt ] (x) + a  1  −
                                                       t [−zt ,0) (x)  + ν 0 (dt, dx),    (18)
                            |x|1+β
where a±                      ±                                         0
       t are nonnegative and zt are positive stochastic processes, and ν is another Lévy
measure whose index is smaller than β. Note that the assumption (18) is only about the
local behavior of the jump measure ν near 0, that is, only about the behavior of the small
jumps. The big jumps, controlled by ν 0 , are unrestricted. The processes a±
                                                                           t are intensity
parameters: as they go up, there are more and more small jumps. The processes zt± control
the range of returns over which the behavior of the overall jump measure is stable-like with
index β.

   Note that, necessarily, β ∈ (0, 2) here, otherwise (18) would not be a Lévy measure.
                RT
Then, if further 0 (a+     −
                     s + as )ds > 0, the number β is the index of X on the full interval
[0, T ]. Note that when X is a (possibly asymmetric) stable process, that is a process whose
jump measure is proportional to 1/|x|1+β , then it satisfies this assumption, β being the index
of the stable process. In fact, this assumption amounts to saying that the small jumps of X
behave like the small jumps of a stable or tempered stable process, or more accurately as
those of a process which is a stochastic integral with respect to a stable or tempered stable
process, whereas the big jumps are governed by ν 0 . We call processes which satisfy (18)
“proto-stable” processes. Most models in finance which exhibit jumps of infinite activity are
proto-stable. While we will propose estimators of β below, the true β is of course unknown,
and our model-free requirement means here that we wish to construct a test which does not
depend upon β, the processes a±     ±                                  0
                              t or zt , nor the residual jump measure ν .




                                               14
   Coming back to our problem, we consider the set
                                    Z T
                             iβ
                            ΩT = {      (a+     −
                                          s + as )ds > 0}
                                            0

on which the jump activity index of X equals β. Note that Ωiβ   i
                                                           T ⊂ ΩT , the inclusion possibly
being strict. However testing the null being ΩiT is impossible without further restriction,
and so we set the null to be Ωiβ
                              T .

   We choose three reals γ > 1 and p0 > p > 2 and define a family of test statistics as
follows:
                                                B(p0 , γun , ∆n )B(p, un , ∆n )
                       SIA (p, un , γ, ∆n ) =                                                                (19)
                                                B(p0 , un , ∆n ) B(p, γun , ∆n )
which has the following limits:
                                                    (      0
                                                P        γ p −p           on Ωiβ
                                                                              T
                       SIA (p, un , γ, ∆n ) −→                                                               (20)
                                                           1        on ΩfT ∩ ΩW
                                                                              T

Intuitively, under the alternative of finite jump activity, the behavior of each one of the four
truncated power variations in (19) is driven by the continuous part of the semimartingale.
The truncation level is such that essentially all the Brownian increments are kept. Then the
                                                                  p/2−1            p0 /2−1
truncated power variations all tend to zero at rates ∆n                       and ∆n         respectively and by
construction the (random) constants of proportionality cancel out in the ratios, producing
a limit 1 given under H1 in (20).

   If, on the other hand, jumps have infinite activity, then the small jumps are the ones
that matter and the truncation level becomes material, producing four terms that all tend
                                                                          0                              0
to zero but at the diﬀerent orders in probability up−β  p −β
                                                   n , un    , (γun )p−β and (γun )p −β re-
                                     0
spectively, resulting in the limit γ p −p given under H0 in (20). By design, that limit in SIA
is independent of β.


C. Brownian Motion: Present or Not

   We now would like to construct procedures which allow to decide whether the Brownian
motion is really there, or if it can be forgone with in favor of a pure jump process with
infinite activity. When infinitely many jumps are included, there are a number of models in
the literature which dispense with the Brownian motion altogether. The log-price process

                                                    15
is then a purely discontinuous Lévy process with infinite activity jumps, or more generally
is driven by such a process. Is this a realistic model in light of the data?


                       C.1. Null Hypothesis: Brownian Motion Present

   In order to construct a test, we seek a statistic with markedly diﬀerent behavior under
the null and alternative. Using the same class of tools, the idea is now to consider powers
p less than 2, since in the presence of Brownian motion the power variation would be
dominated by it while in its absence it would behave quite diﬀerently. Specifically, the large
number of small increments generated by a continuous component would cause a power
variation of order less than 2 to diverge to infinity: recall Figure 5.

   Without the Brownian motion, however, and when p is bigger than the Blumenthal-
Getoor index βT = β, assuming the structural assumption (18), the power variation con-
verges to 0 at exactly the same rate for the two sampling frequencies ∆n and k∆n , whereas
with a Brownian motion the choice of sampling frequency will influence the magnitude of
the divergence. Taking a ratio will eliminate all unnecessary aspects of the problem and
focus on that key aspect.

   So we choose an integer k ≥ 2 and a real p < 2 and propose the test statistic
                                                      B(p, un , ∆n )
                              SW (p, un , k, ∆n ) =                                      (21)
                                                      B(p, un , k∆n )
which has the limits
                                          (
                                     P        k 1−p/2           on ΩW
                                                                    T
                 SW (p, un , k, ∆n ) −→                                         .        (22)
                                                1       on ΩnoW
                                                            T   ∩ ΩβT , p > β

Note that the first convergence above, on ΩW
                                           T , does not require any specific assumptions on
the jumps, only the second convergence requires (18).


                         C.2. Null Hypothesis: No Brownian Motion

   When there are no jumps, or finitely many jumps, and no Brownian motion, X reduces
to a pure drift plus occasional jumps, and such a model is fairly unrealistic in the context
of most financial data series. But one can certainly consider models that consist only of a

                                                16
jump component, plus perhaps a drift, if that jump component is allowed to be infinitely
active. If one wishes to set the null model to be a pure jump model (plus perhaps a drift),
then the issue becomes to design a test statistic using power variations whose behavior
is independent of the specific nature of the infinitely active pure jump process. In other
words, we again assumes (18), but we do not know β and wish to design a test that remains
model-free in the sense that it does not depend on β, a±     ±
                                                       t or zt in (18).

   We choose a real γ > 1 to define two diﬀerent truncation ratios and define a family of
test statistics as follows:
                                                B(2, γun , ∆n ) U (0, un , ∆n )
                      SnoW (p, un , γ, ∆n ) =                                   .             (23)
                                                B(2, un , ∆n ) U(0, γun , ∆n )

   To understand the construction of this test statistic, recall that in a power variation of
order 2 the contributions from the Brownian and jump components are of the same order.
If the Brownian motion is present (H1 : ΩW
                                         T ) then once that power variation is properly
truncated, the Brownian motion will dominate it if it is present. And the truncation can be
chosen to be suﬃciently loose that it retains essentially all the increments of the Brownian
motion at cutoﬀ level un and a fortiori γun , thereby making the ratio of the two truncated
quadratic variations converge to 1 under the alternative hypothesis.

   If on the other hand the Brownian motion is not present (H0 : ΩnoW
                                                                  T   ∩ ΩβT ), then the
nature of the tail of jump distributions is such that the diﬀerence in cutoﬀ levels between
un and γun remains material no matter how far we go in the tail and the limit of the ratio
B(2, γun , ∆n )/B(2, un , ∆n ) in (23) will reflect it: it will now be γ 2−β . But since absence of
a Brownian motion is now the null hypothesis, the issue for constructing a test is that this
limit depends on the unknown β.

   Canceling out that dependence is the role devoted to the ratio U (0, un , ∆n )/U (0, γun , ∆n )
of the number of large increments. The U 0 s are always dominated by the jump components
of the model whether the Brownian motion is present or not. Their inclusion in the statistic
is merely to ensure that the statistic is model-free, by eﬀectively canceling out the depen-
dence on the jump characteristics that emerges from the ratio of the truncated quadratic
variations.

   Indeed, the limit of the ratio of the U 0 s is γ β under both the null and alternative
hypotheses. As a result, the probability limit of SnoW will be γ 2 under the null, independent

                                                 17
of β:                                             (
                                             P        γ 2 on ΩnoW
                                                              T   ∩ ΩβT
                     SnoW (p, un , γ, ∆n ) −→                                           (24)
                                                      γβ     on ΩW
                                                                 T


   Generally speaking, the statistic SW is more robust than SnoW ; similarly SF A is more
robust than SIA . This is due to their simpler design, and the lesser reliance on subtle
cancellations to achieve their respective objectives. As a result, we recommend using SF A
and SW in practical applications.



        IV.      The Relative Magnitude of the Components

   A typical “main sequence” star might be made of 90% hydrogen, 10% helium and 0.1%
everything else. In astrophysics, a natural metric to compare diﬀerent atoms and address
the question of percentages of various components is atomic mass. Here, what is the relative
magnitude of the two jump and continuous components? We can answer this question using
the same power variation devices. The natural metric is now to consider p = 2 since this is
the power where all the components are present together, instead of powers p > 2 or p < 2
that eliminate one or the other of the components, and ask the question of percentages of
total quadratic variation (QV) attributable to each component.

   As illustrated in Figure 6, by using truncations at the right rate we can split the QV
into its continuous and jump components, and not truncate to estimate the full QV:
                 ⎧
                 ⎨ B(2,un ,∆n ) = %QV due to the continuous component
                    B(2,∞,∆n )
                        B(2,un ,∆n )
                                                                                        (25)
                 ⎩ 1−                  = %QV due to the jump component
                        B(2,∞,∆n )


   The use of truncation to estimate the continuous part of the quadratic variation when
there are jumps was proposed by Mancini (2001), who relied on the law of the iterated
logarithm for that purpose. Alternatively, one can split the QV based on bipower variations
instead of truncating: see Barndorﬀ-Nielsen and Shephard (2004), Huang and Tauchen
(2005) and Andersen, Bollerslev, and Diebold (2007).

   Note that (25) suggests that an alternative test for the presence of jumps can be con-
structed based on the ratio B(2, un , ∆n )/B(2, ∞, ∆n ). However, this would work only if the


                                                 18
null hypothesis is that no jumps are present, and the null hypothesis is that the ratio is
1. With jumps under the null, one would have to specify exogenously as part of the null
hypothesis how large the fraction of QV due to jumps is.

   We can split the rest of the QV, which by construction is attributable to jumps, into
a small jumps and a big jumps component. This depends on the cutoﬀ level ε selected to
distinguish big and small jumps:
              ⎧
              ⎨ U (2,ε,∆n ) = %QV due to big jumps
                 B(2,∞,∆n )
                                                                             .             (26)
              ⎩ B(2,∞,∆n )−B(2,un ,∆n )−U (2,ε,∆n ) = %QV due to small jumps
                            B(2,∞,∆n )

We can then obtain a plot that looks like Figure 8 and provides a split of the QV into the
various components.



            V.     Estimating the Degree of Jump Activity

   The method described in Section B is able to tell finite activity jumps from infinite
activity ones. Among jump processes, however, finite activity are the exception rather than
the norm. And “infinite activity” can mean quite diﬀerent things depending upon “how
infinite” that infinite jump activity is. In fact, the degree of activity is accurately measured
by the Blumenthal-Getoor index βT introduced earlier: at one end of the spectrum, infinite
activity jump processes such as the Gamma process, whose jump measure diverge at a sub-
polynomial rate, can look like Poisson jumps; at the other end, they can look almost like
Brownian motion, which is to say extremely active. So it seems natural to try to estimate
the index βT . As discussed above, specific models in finance correspond either to fixed
values of β (such as β = 0 for the Gamma and Variance Gamma models, β = 1/2 for the
Lévy model and the Inverse Gaussian model, β = 1 for the Cauchy model and the Normal
Inverse Gaussian Process) or β is a free parameter (as in the stable model, the Generalized
Hyperbolic model and the CGMY model).

   The next issue is then to estimate βT , or rather β under the somewhat restricted as-
sumption (18). The problem is made more challenging by the potential presence in X of a
continuous, or Brownian, martingale part. β characterizes the behavior of ν near 0. Hence
it is natural to expect that the small increments of the process are going to be the ones


                                              19
that are most informative about β. But that is where the contribution from the continuous
martingale part of the process is inexorably mixed with the contribution from the small
jumps. In other words, we need to see through the continuous part of the semimartingale
in order to say something about the number and concentration of small jumps.

   So we are now looking in a diﬀerent range of the spectrum of returns, namely by con-
sidering only returns that are larger than the cutoﬀ un = α∆n for some             ∈ (0, 1/2), as
opposed to those that are smaller than the cutoﬀ. This allows us to eliminate the increments
due to the continuous component. We can then use all values of p, not just those p > 2,
despite the fact that we wish to concentrate on jumps: see Figure 6. In fact, we will simply
use the power p = 0.

   We propose two estimators of β based on counting the number of increments greater
than the cutoﬀ un . The first one is based on varying the actual cutoﬀ level: fix 0 < α < α0
and consider two cutoﬀs un = α∆n and u0n = α0 ∆n with γ = α0 /α :

                                         log(U (0, un , ∆n )/U (0, γun , ∆n ))
                       βbn ( , α, α0 ) =                                       ,            (27)
                                                        log(γ)

The second one is based on varying the sampling frequency: sample at two time scales, ∆n
and 2∆n :
                                        log(U (0, un , ∆n )/U (0, un , k∆n ))
                       βbn0 ( , α, k) =                                       .             (28)
                                                         log k
These estimators are consistent for β, and we have derived CLTs for them.

   These basic estimators are based on the first-order asymptotics
                                                                   1
                                    U (0, un , ∆n ) ∼ b0 ∆−
                                                          n
                                                              β
                                                                                            (29)
                                                                  αβ
where b0 is independent of un and ∆n . In small samples, a bias corrected procedure is based
on the second-order asymptotics


                                                         1                  1
                          U (0, un , ∆n ) ∼ b0 ∆−
                                                n
                                                    β
                                                           + b1 ∆1−2
                                                                 n
                                                                       β
                                                                                            (30)
                                                        αβ                 α2β
works as follows: we can estimate β, along with the unknown coeﬃcients b0 and b1 in (30)
by a straightforward nonlinear regression of U (0, un , ∆n ) on α by varying α in the cutoﬀ
un = α∆n .



                                                  20
   One can then test various hypotheses involving β. The approach described in this Section
to estimate β is due to Aït-Sahalia and Jacod (2009a). Related approaches include Woerner
(2006), who proposes an estimator of the jump activity index in the case of fractionally
integrated processes, Cont and Mancini (2009), who are testing whether β > 1 or β < 1,
which correspond to finite or infinite variation for X, and Todorov and Tauchen (2010), who
provide a graphical method to determine whether β = 2 or β < 2 using the test statistic of
Aït-Sahalia and Jacod (2009b), and Belomestny (2009) who proposes a method based on
low frequency historical and options data.



  VI.      Summary of the Spectrogram Methodology: Tuning
                 Power, Truncation and Sampling Frequency

   We have seen that setting the three knobs of power, truncation level and sampling
frequency in various combinations allowed us to determine which component of the model
was likely to be present, in what proportion, and estimate the degree of activity of the
jumps. Tables I summarizes the choice of the three tuning parameters (p, u, ∆) for the
corresponding tasks under consideration.

   In a nutshell, we address specification questions that require an emphasis on the jump
component of the model with powers p > 2, those that require an emphasis on the continuous
component with powers p < 2, and those that require them on an equal footing with the
singular power p = 2. Truncating makes it possible to eliminate either the big jumps or the
Brownian component, as necessary. And finally sampling at diﬀerent frequencies allows us
to identify the asymptotic behavior of the relevant power variations, thereby discriminating
between components of the model that are present or absent in the sampled data.



    VII.      Theoretical Limits When Market Microstructure
                                      Noise Dominates

   We consider in the empirical analysis that follows sampling frequencies up to 5 seconds.
In diﬀerent applications, this selection is going to be asset-dependent, as a function of the


                                             21
assets’ liquidity and other trading characteristics. But in any event, real data observa-
tions of the process X at such ultra high frequencies are blurred by market microstructure
noise, which has the potential to change the asymptotic behavior of many statistics at very
high frequency, and can force us to downsample as is often done in the classical volatility
estimation setting.

       When observations are aﬀected by an additive noise, then instead of Xi∆n we observe
Yi∆n = Xi∆n + εi , and the εi are i.i.d. with E(ε2i ) and E(ε4i ) finite, and not depending of
the observation frequency. When rounding is introduced, we observe Yi∆n = [Xi∆n ]a which
is X rounded to the nearest multiple of a, say 1 cent for a decimalized asset, or for many
bond markets, α = 1/32nd of a dollar: again the rounding level α does not depend on n.
As a matter of fact, the real microstructure noise is probably a mixture of the two types
above, first an additive noise (or perhaps a “colored” additive noise) which may account for
some bouncebacks, and then the noisy price is rounded at the level α.3

       The power variations that form the building blocks of our methodology are aﬀected by
either type of noise, in a rather drastic way, since the presence of noise modifies the limit
in probability of most of our statistics, not to speak about their second order behavior
like CLTs. In order to be able to interpret the empirical results, we need to extend the
existing theory by explicitly incorporating the noise into the probability limits of the various
statistics. As discussed, we will consider in turn the two polar cases of a pure additive noise,
and of a pure rounding noise.
   3
       While far from being complete descriptions of the reality, these two specifications for the noise can
be thought of as proxies for some of the main features identified as relevant in the market microstructure
literature: see e.g., Hasbrouck (1993), who discusses the theoretical market microstructure underpinnings of
an additive noise model and argues that the standard deviation of the noise, E(ε2i )1/2 , is a summary measure
of market quality. In the Roll (1984) model, the noise is due entirely to the bid-ask spread. Harris (1990b)
considers additional sources of noise and their impact on the Roll model and its estimators. More complex
structural models, such as Madhavan, Richardson, and Roomans (1997), also give rise to reduced forms
where the observed transaction price takes the form of an unobserved price plus noise. Adverse selection
eﬀects are considered in Glosten (1987) and Glosten and Harris (1988), where the spread has diﬀerent
components. Especially when asymmetric information is involved, the noise term may no longer satisfy
the basic assumptions here (such as i.i.d. or uncorrelatedness with the price process). The second case we
consider, where the noise is due to rounding, has been analyzed in the market microstructure literature (see
e.g., Gottlieb and Kalay (1985)). The specification of the model in Harris (1990a) combines both rounding
and bid-ask eﬀects as the dual sources of noise.



                                                      22
A. Additive noise

   Pure additive noise has been considered by many authors for the purpose of estimating
the volatility, but its eﬀect on power variations, truncated or not, has not been thoroughly
analyzed so far, to the best of our knowledge. So, in contrast with the style of the rest of
the paper, we now present theorems. To avoid intricate statements, we make two basic, and
mild, assumptions on the noise, which is a sequence (εi )i≥0 of i.i.d. variables, independent
of the underlying process. Namely we assume that

          m0p = E(|εi |p ) is finite for all p > 0, and the noise is centered: E(εi ) = 0.   (31)

and

      the variables εi − εi−1 have a density f which is continuous and positive at 0.        (32)

   We also write B 0 (p, un , ∆n ) and U 0 (p, un , ∆n ) for the variables introduced in (7), (8)
and (10), where the increments ∆ni X of (6) are substituted with
                                           ¡                ¢
                           (Xi∆n + εi ) − X(i−1)∆n + εi−1 .                                  (33)

In other words, in the case of additive noise, the observations on the process, Xi∆n , are
replaced by Xi∆n + εi . The limits that are relevant for the spectrogram analysis are given
by the following result (recall that B 0 (p, ∞, ∆n ) = U 0 (p, 0, ∆n )):

Theorem 1. Assume (31) and (32).

   a) If p ≥ 0, then for any sequence un of nonnegative numbers going to 0 we have
                                                           P
                                   ∆n U 0 (p, un , ∆n ) −→ m0p T.                            (34)

   b) If p > 0 and if further
                                                       ⎧
                                                       ⎪
                                                       ⎪
                                                           2p+2
                                                                   if p ≤ 1
                       ∆n                              ⎨     p
                           → 0,        where r =         4     if 1 ≤ p ≤ 3                  (35)
                       urn                             ⎪
                                                       ⎪
                                                       ⎩ p + 1 if p ≥ 3

then we have
                                  ∆n                       P   2f (0)
                                        B 0 (p, un , ∆n ) −→          T.                     (36)
                                 up+1
                                  n                            p+1

   The proof is given in the appendix.

                                                  23
B. Rounding noise

   The situation of rounding noise is much more delicate to analyze. There, instead of
observing Xi∆n , we observe [Xi∆n ]α , that is Xi∆n rounded to the nearest multiple of α. For
instance, if the market under consideration is decimalized, then α = 1 cent. For many bond
markets, α = 1/32nd of a dollar.

   If X is continuous, then most of the increments ∆ni X vanish, and all are integral multi-
ples of the rounding value α. So the key role is played by the upcrossings and downcrossings
of the levels (q + 1/2)α by X, for all integers q. So, not surprisingly, the limit of the vari-
ations involve the local times of X at those levels, that is the amount of time that the
process spends in a neighborhood of the crossing levels. The same is true when X jumps,
except that in this case the theory of local times is not even well established unless the
Blumenthal-Getoor index of the jump is smaller than 1.

   More specifically, only the case when X is continuous is completely determined, and the
following result is due to Delattre (1997). Below, Lat denotes the local time of X at level
a ∈ R (see the Appendix for a precise definition of the local time), and as before we denote
by B 00 (p, un , ∆n ) and U 00 (p, un , ∆n ) for the variables introduced in (7), (8) and (10), where
the increments ∆ni X of (6) are substituted with

                                     [Xi∆n ]α − [X(i−1)∆n ]α .                                  (37)

Theorem 2. If X is a continuous semimartingale with the drift process locally bounded, as
well as the volatility process σt and its inverse 1/σt , then
                                                 r        Z
                     p
                            00             P   p   2 X T 1
                       ∆n B (p, ∞, ∆n ) −→ α                    dL(q+1/2)α
                                                                  s        .                    (38)
                                                   π       0 σs
                                                        q∈Z


   The same still holds if the semimartingale is discontinuous, but with finite activity: we
will show this in the Appendix. Otherwise, no precise mathematical result is known so far
in this domain.

   The behavior of the truncated power variations is quite diﬀerent in the presence of
rounding. Indeed, if un → 0, for n large enough we have un < α since the rounding level
is fixed. In this case all increments of the noisy process are either 0 or bigger than un . In


                                                 24
other words, we have for n large enough:

                    B 00 (p, un , ∆n ) = 0,       U 00 (p, un , ∆n ) = B 00 (p, ∞, ∆n ).           (39)


C. Limit of our statistics

   If we gather the previous results together with those for the observations without noise,
we see that SJ has four possible limits:
      ⎧
      ⎪
      ⎪   1/k    :                   additive noise dominates
      ⎪
      ⎪
      ⎪
      ⎨ 1/k 1/2 : rounding error dominates (and jumps have finite activity)
                                                                            .                      (40)
      ⎪
      ⎪     1    :            jumps present and no significant noise
      ⎪
      ⎪
      ⎪
      ⎩ kp/2−1 :            no jumps present and no significant noise

   The impact of the noise on SF A is given by (where “no limit” means that for n large
the statistics is the ratio       0/0):
              ⎧
              ⎪
              ⎪     1/k           :             additive noise dominates
              ⎪
              ⎪
              ⎪
              ⎨ no limit          :            rounding error dominates
                                                                                           .       (41)
              ⎪
              ⎪       1           : infinite activity jumps and no significant noise
              ⎪
              ⎪
              ⎪
              ⎩ kp/2−1            :   finite activity jumps and no significant noise

   SW , taking market    microstructure noise into account, has four possible limits:
           ⎧
           ⎪
           ⎪    1/k           :                 additive noise dominates
           ⎪
           ⎪
           ⎪
           ⎨ no limit         :                rounding error dominates
                                                                                               .   (42)
           ⎪
           ⎪     1            :       No Brownian motion and no significant noise
           ⎪
           ⎪
           ⎪
           ⎩ k1−p/2           : Brownian motion present and no significant noise

   Taking microstructure noise into account yields the following limits for our measure of
the fraction of QV due to the continuous component:
                 ⎧
                 ⎪
                 ⎪            0           : additive noise dominates
                 ⎨
                              0           : rounding error dominates .                             (43)
                 ⎪
                 ⎪
                 ⎩ actual fraction of QV :     no significant noise

   We will now analyze the data in light of these predictions of the theory.

                                                     25
                                  VIII.      The Data

A. The Starting Data

   We use a dataset consisting of all transactions and quotes on all thirty individual com-
ponents of the Dow Jones Industrial Average in 2006. The data source is the TAQ database.
Using the correction variables in the dataset, we retain only transactions that are labeled
“good trades” by the exchanges: regular trades that were not corrected, changed, or signi-
fied as canceled or in error; and original trades which were later corrected, in which case the
trade record contains the corrected data for the trade. Beyond that, no further adjustment
to the raw data are made to produce what we call the “unfiltered transactions.” We also
consider and use the corresponding quotes, as we explain below.

   We sample the price series at up to the 5 second frequency, and then lower frequency
multiples. The most liquid stocks in the DJIA trade on average more than once every
second, so we are not retaining every transaction by doing so, which avoids incorporating
every bid-ask bounce. For the less liquid stocks, some smoothing is involved. When no
transaction is available at the exact time stamp, we use the closest one available. When
more than one transaction is available at the same time stamp, we average them. We do
not include the overnight returns.


B. Bouncebacks and National Best Bid and Oﬀer (NBBO) Filter

   Diﬀerent measurements of the stock returns lead to diﬀerent properties of the con-
structed price process. One particular issue that deserves careful attention in the data is
that of “bouncebacks.” We call “bouncebacks” price observations that are either higher or
lower than the sequences of prices that both immediately precede and follow it. Such prices
generate a log-return from one transaction to the next that is large in magnitude, and is
followed immediately by a log-return of the same magnitude but of the opposite sign, so
that the price returns to its starting level before that particular transaction. To the extent
that we have no reason to believe that those transactions did not actually take place, as
we already eliminate transactions known to TAQ to be incorrect, we start with the premise
that bouncebacks should not be arbitrarily removed from the sample. However one may


                                              26
think that bouncebacks, although significant in a sense, should not be incorporated in the
model for the “true” latent price process, whatever this “true” might mean.

   The prevalence of bouncebacks can lead to a large number of relatively small jumps
in the raw data, and bias the empirical results towards finding more small jumps than
actually happen if the data were correctly measured, or biasing the estimated degree of
jump activity. By contrast, a true jump can be followed by another jump (due to the
prevalence of jump clustering in the data), but these successive jumps will not necessarily
be of the same magnitude and of the opposite sign.

   One straightforward approach to eliminate bouncebacks would be to eliminate all log-
returns that are followed immediately by another log-return of the opposite sign, when they
are both greater than a pre-determined magnitude, such as some number of ticks. There is
however typically in the data a continuum of bouncebacks in terms of such magnitude, so
this approach ends up creating a discontinuity at the arbitrary pre-determined magnitude
selected: many of them of size less than that level and then none. On the other hand,
setting that level within one tick would be extreme and would change the nature of the
observed prices.

   To deal with bouncebacks endogenously, we will instead make use of the matched quotes
data. Transactions that take place outside the currently prevailing quotes are known as
“out-trades.” In our context, a single out-trade will generate a bounceback. As discussed
by Stoll and Schenzler (2006), they tend to occur on Nasdaq because of delays in reporting
trades; because of the ability of dealers to delay the execution of trades, thereby creating
a look-back option which when exercised results in out-trades; and because large trades
can take place at prices outside the quotes. Out-trades are less frequently observed on
the NYSE because the market is more centralized. Of the 30 DJIA components in 2006,
Microsoft and Intel trade on Nasdaq while the other components all trade on the NYSE.

   We will use the quotes data in order to reduce the incidence rate of bouncebacks in
the transactions data, in a manner that is compatible with market rules. SEC regulations
require brokers to guarantee customers the best available ask price when buying securities,
and the best available bid price when selling securities. These are called the National Best
Bid and Oﬀer (NBBO) prices.



                                            27
   We compute the NBBO at each point in time as follows. We collect all quotes at each
instant retaining only those with positive sizes and prices, and eliminating crossed quotes,
those where the bid price is greater than the ask price. We then compute trimmed size-
weighted means (eliminating the extreme 10% of quotes at each end, in price levels and
sizes) of the bid and ask prices in eﬀect at that time. Eliminating quotes with small depths
or extreme prices is important: bad or erroneous quotes tends to have smaller size, hence
the need to trim the weighted average to smooth them away. Quotes with small depths or
extreme bid and ask prices (“oﬀ-market”) are often used by market makers to eﬀectively pull
out of the market, usually temporarily, while still posting quotes. Incidentally, bouncebacks
can happen in quotes data as well. But they tend to appear when there is only a very small
number of quotes at that point in time, with one or more that is oﬀ-market for the reasons
just described. Quote bouncebacks seem to be unrelated to transaction bouncebacks.

   Given our computed NBBO at each point in time, we then take a moving window of 90
seconds. For instance, a block trade might have been arranged by a manual broker and its
reporting delayed. Or opening trades done manually can be delayed, for instance, even at
small sizes. The 90-second window we employ is set to reflect the SEC rules that specify that
exchanges must report trades within 90 seconds. Trades that are delayed beyond 90 seconds
are marked as “late,” and already excluded from the starting data by our TAQ filters. We
use this 90-second moving window to construct a running minimum of the national best
bid prices and a running maximum of the national best oﬀer prices over the time window.
This NBBO bid-oﬀer moving envelope is then used as our filter for transactions: we retain
only transactions that take place inside the envelope.

   There are many reasons for trades to be delayed, especially when some form of manual
execution is involved. For example, in the case of negotiated trades, brokers might work
the order over time, leading to a sequence of smaller trades reports. Or the broker might
(acting as principal) sell the whole amount to the customer, in which case we would see a
single trade report. Another practice involves “stopping” the order: the broker does not
execute the order immediately, but does guarantee the buyer a price. The broker can then
work the order, deferring any trade reports until the execution is complete, at which time an
average price is reported. The average price can appear out of line with the prices around
it and lead to a bounceback.



                                             28
   The NBBO filter we employ tends to be conservative — erring on the side of retaining
transactions — since there is no guarantee that an out-trade is actually necessarily due to a
time delay, or that even if delayed it took place at a time when the bid-ask spread was less
than the maximal width of the spread over the 90-second time window. On the other hand,
block (negotiated) trades usually carry a price concession and so could be executed outside
this envelope and thereby be wrongly excluded. To the extent that, for it to lead to a
bounceback, this is by a definition a single isolated transaction, it did not have a permanent
price impact, but rather was associated with a transient liquidity eﬀect.

   We do not make use of the NBBO quotes depth: from the list of prevailing quotes by
exchange, we already determine the best (maximum) bid price, and the best (minimum)
ask price. Using the prevailing quote list, we could sum the bid sizes for quotes at the best
bid price, and sum the ask sizes for the quotes at the best ask price. This would produce
the NBBO sizes available to trade at each point of time and one could consider filtering
out transactions with size that exceeds it. However, this would also eliminate legitimate
transactions, such as block trades, or for that matter any trade that has a price impact. In
any event, we find empirically that filtering the transactions by the NBBO filter as described
above reduces drastically the number of bouncebacks in the data.

   We started with the unfiltered transactions data, and this procedure results in a time
series of NBBO-filtered transactions. We also produce a series of the midpoint of the just
computed NBBO bid and ask prices and use this as our measurement of the quote price
at that point in time. We therefore end up comparing three diﬀerent measurements of the
“price” series, for each stock:


   • The unfiltered transactions;

   • The NBBO-filtered transactions;

   • The NBBO quotes midpoint.


   We will apply the spectrogram methodology to each price series for each one of the 30
individual DJIA components and compare the results.




                                             29
C. Individual Stocks vs. Indices

   The DJIA is defined as a simple average of the stock prices of 30 of the largest and most
widely held public companies in the U.S., as determined by the Dow Jones Co. The index is
adjusted by a divisor, which changes whenever one of the component stocks has a stock split
or stock dividend, or one of the component is replaced by another stock, so as to generate
a continuous value for the index at the time of the split, dividend or change of component.
We collect high frequency data (sampled every 5 seconds, down from an average sampling
interval of 3 seconds) on the cash value of the DJIA index from Tick Data, Inc. The data
provider uses proprietary data filters.

   2006 was a rather unremarkable, or quiet, year from the perspective of systematic jumps
(i.e., jumps that would be visible at the level of the index), as perusal of financial news for
that period would confirm. In what follows, we will compare the results obtained from the
index to those on its individual components.



       IX.      Empirical Results and Economic Implications

A. Jumps: Present or Not

   The empirical values of SJ are shown in the form of a histogram in Figure 9 for each of
the three possible measurements of the data. The data for the histogram are produced by
computing SJ for the four quarters of the year, the thirty stocks, and for a range of values
of p from 3 to 6 (in increments of 0.25), ∆n from 5 seconds to 2 minutes (with values 5,
15, 30, 60, 90 and 120 seconds), and k = 2, 3. The top left histogram corresponds to the
unfiltered transactions, the top right one to the NBBO-filtered transactions and the lower
left one to the NBBO midpoint quotes.

   As indicated in (40), values below 1 are indicative of noise of one form or another
dominating. We find that this is the case only for the unfiltered transactions data, and
only at the highest sampling frequencies, the histogram then displaying a left tail. For the
other data measurements, the histograms display very little mass in the regions where the
noise dominates. The conclusion from SJ is that the noise is not a major concern, except


                                              30
for the unfiltered transactions at the ultra high frequencies, but once past this domain, the
evidence points towards the presence of jumps with the histograms centered around 1.

   This conclusion is not surprising per se, even for the index and a fortiori for the individual
assets. The fact that the tails of high-frequencies log-return distributions exhibit a power
decay, which points towards a model including jumps, has been recognized a long time ago,
see for example Eberlein and Keller (1995). A power law fits the data quite well and a
continuous component alone (with typically exponentially decaying tails) would be rather
unlikely to generate such returns.

   The middle right panel in Figure 9 displays the median value of SJ (across values of p and
k, and the four quarters) as a function of the sampling interval ∆n . Unfiltered transactions
are marked “U”, filtered transactions are marked “F” and the NBBO midpoint quotes are
marked “M.” In all cases, the median value of SJ starts around 1 at the highest frequencies
and then rises. Comparing diﬀerent data measurements, we find that SJ is generally highest
for “F” (meaning less evidence of jumps there), then for “U” and then for “M”. Similar
results obtain if the mean is employed instead of the median.

   But as the sampling frequency increases, the evidence in favor of the presence of jumps
becomes more mixed, when the 30 components of the DJIA are taken in the aggregate.
When implemented on the DJIA index itself, we find values of SJ that range between 1.5
and 2.5, providing between less evidence in favor of jumps and evidence against them for
the index.

   However, two points should be emphasized here. First, the histogram is more spread
out when frequency decreases because less data are used and the statistical error increases,
so that the procedure becomes less conclusive. Second, when the sampling frequency is low,
the statistic SJ should not necessarily be expected to be close to its limiting value, 1 or 2,
which is the theoretical limit when the frequency 1/∆n goes to infinity.

   Finally, we check if any cross-sectional diﬀerences in SJ can be explained by cross-
sectional diﬀerences in liquidity among the thirty stocks. To this aim, the lower two panels
on Figure 9 show the results of a nonlinear regression of the statistic SJ on two stock-level
measures of liquidity, the average time between successive trades, and the average size of the
transactions. Both regressions show a slight decrease in SJ values as the asset becomes less



                                              31
liquid, meaning higher time between trades and lower transaction size, but neither result is
strong enough to be noticeable.


B. Jumps: Finite or Infinite Activity

   SJ tells us that jumps are likely to be present, but it cannot distinguish between finite
and infinite activity jumps. For this, we turn to the statistic SF A which is like SJ with the
addition of truncation.

   Whenever we need to truncate, we express the truncation cutoﬀ level un in terms of a
number α of standard deviations of the continuous part of the semimartingale. That initial
                                                           1/2
standard deviation estimate is obtained by using B(2, 4σ∆n , ∆n ) where σ is a fixed realistic
value for the asset under consideration; we use σ = 0.25. The specific value of this number
serves only to identify a reasonable range of values; it does not matter asymptotically. It
does of course matter in small samples, and so we suggest picking a realistic value for the
asset and time period. We then use for the truncation level un diﬀerent multiples of it.
Our view of the joint choice of ( , α) is that they are not independent parameters in finite
sample: they are diﬀerent parameters for asymptotic purposes but in finite samples the only
relevant quantity is the actual resulting cutoﬀ size un . This is why we are reporting the
values of the cutoﬀs un in the form of the α that would correspond to        = 1/2. This has
the advantage of providing an easily interpretable size of the cutoﬀ compared to the size
of the increments that would be expected from the Brownian component of the process:
we can then think in terms of truncating at a level that corresponds to α = 4, 6, etc.,
standard deviations of the continuous part of the model. Since the ultimate purpose of
the truncation is either to eliminate or conserve that part, it provides an immediate and
intuitively clear reference point. Given un and this α, it is possible to back this into the
value of the α corresponding to any    , for that given sample size, including the value(s) of
  that satisfy the required inequalities imposed by the asymptotic results. This approach
would lose its eﬀectiveness if we were primarily interested in testing the validity of the
asymptotic approximation as the sample size varies, but for applications, by definition on a
finite sample, it seems to us that the interpretative advantage outweighs this disadvantage.

   Each one of the statistic below is computed separately for each quarter of 2006 and for
each asset. The data for the histogram in Figure 10 are produced by computing for the

                                             32
four quarters of the year and each stock the value of SF A for a range of values of p from
3 to 6, α from 5 to 10 standard deviations, ∆n from 5 seconds to 2 minutes, and k = 2, 3.
We find that the empirical values of SF A are distributed around 1, which is indicative of
infinite activity jumps. That is, even as we truncate, the statistic continues to behave as
if jumps are present. If only a finite number of jumps had been present, then the statistic
should have behaved as if the process were continuous. But the histograms do display a
fat right tail, indicative of finite activity jumps for at least some of the DJIA components.
The histograms are quite similar for all three data measurements, suggesting that they tend
to diﬀer only because of the larger increments: those are indeed the ones that are filtered
in “F” compared to “U”, but since they are truncated away by SF A anyway, then for the
purpose of computing SF A the two data measurements produce close results.

   The middle right panel in Figure 10 displays the mean value of SF A (across the four
quarters, two stocks, and values of p, α and k) as a function of ∆n . A pattern similar to
the corresponding plot in Figure 9 emerges. Even for very small values of ∆n , the noise
does not dominate (limits below 1), instead the limit is around 1 as ∆n increases away
from the frequencies where the noise would have been expected to dominate. Unless we
start downsampling more (reaching 5 to 10 minutes), the limit does not get close to k p/2−1 .
The lower panels examine any patterns linking SF A to stock-level measures of liquidity; no
strong cross-sectional pattern emerges.

   Overall, the evidence suggests the presence of infinite activity jumps in the DJIA 30
components. To the extent that jumps are present in the DJIA index itself, the evidence is
in favor of finite activity jumps: we find values of SF A ranging from 1.7 to 2.2 for the index.


C. Brownian Motion: Present or Not

   In light of the likely presence of infinite activity jumps identified by SF A , it makes sense
to ask empirically whether a Brownian component is needed at all. For this purpose, we
turn to the statistic SW .

   Figure 11 displays histograms of the distribution of SW obtained by computing its value
for the four quarters of the year for a range of values of p from 1 to 1.75, α from 5 to 10
standard deviations, ∆n from 5 seconds to 2 minutes, and k = 2, 3. The empirical estimates


                                              33
are always on the side of the limit arising in the presence a continuous component. Even
as the sampling frequency increases, the noise is not a dominant factor, although as usual,
lower values of SW below 1 are now obtained and for very high sampling frequencies, the
results are consistent with some mixture of the noise driving the asymptotics.

   This is confirmed by the middle right panel in Figure 11 which displays the mean value
of SW (across the four quarters, two stocks, and values of p, α and k) as a function of ∆n .
As we downsample away from the noise-dominated frequencies, the average value of the
statistic settles down towards the one indicating presence of a Brownian motion.

   Because values of p less than 2 are employed by the statistic SW , we find relatively small
diﬀerences between the results for filtered and unfiltered transactions: since they diﬀer
mainly by a few of their large increments, but values of p < 2 tend to under-emphasize
large increments, we obtain similar results for “F” and “U”. The lower panels look at the
relationship between SW and the underlying asset’s liquidity. Like SJ , we find that there
is a very slight increase in the value of the statistic as the asset becomes more liquid.

   In the case of the DJIA index, we find that a Brownian motion is likely present, except
at the highest frequencies where an alternative made of a pure jump infinite activity process
would be plausible. Indeed, high frequency increments of the index tend to be very smooth
owing to the nature of the index as an average.


D. QV Relative Magnitude

   The previous empirical results indicate that are likely in the presence of a jump as well
as a continuous component in the DJIA 30 stocks. We can then ask what fraction of the
QV is attributable to the continuous and jump components.

   The histograms in Figure 12 are obtained from computing the fraction of QV from the
Brownian component using the four quarters, two stocks, values of α ranging from 2 to 5
standard deviations, in increments of 1, and ∆n from 5 seconds to 2 minutes in the same
increments as earlier. We find values around 75% for “F” and “U”, and somewhat lower
for “M”, around 60% with some stock/quarter samples leading to values that are in fact
indicative of an almost pure jump process in the quotes data.



                                              34
   In the middle right panel (similar but as a function of ∆n ), we see that the estimated
fraction is fairly stable as we vary the sampling frequency. It is also quite stable for the
two diﬀerent measurements of the transactions data, “F” and “U”, and the quotes data
“M”, going up slightly as the sampling frequency decreases. The lower panels show a more
pronounced increase in the Brownian-driven of QV as a function of the asset’s liquidity:
using both measures, we find that more liquid assets are associated with a higher proportion
of Brownian-driven QV.

   In the case of the DJIA index, we find values that range from 85% to 95%, suggesting
in line with the previous evidence that jumps are less of a factor for the index. Incidentally,
one could imagine measuring the proportion of jumps that are systematic vs. those that
are idiosyncratic on the basis of the comparison between %QV estimated for the index and
for its components.


E. Estimating the Degree of Jump Activity

   Finally, we estimate the degree of jump activity β. We found above that infinite activity
jumps were likely present in the data. We are now asking how active are those jumps among
all infinitely active jumps.

   Of all the empirical methods employed in the paper, estimating β is the one that requires
the largest sample size due to its reliance on truncating from the right in the power variations
U. That is, the estimators of β discard by construction a large fraction of the original sample
and to retain a suﬃcient number of observations to the right of a cutoﬀ un given by 5 or
more standard deviations of the continuous part, we need to have a large sample to begin
with. So we will estimate β using only the first two sampling frequencies, 5 and 10 seconds
on a quarterly basis. In the case of the previous statistics, we noted that these sampling
frequencies were subject to market microstructure noise. Here, however, because we are
only retaining the increments larger than the cutoﬀ un instead of those smaller than the
cutoﬀ, this could be be less of a concern despite the ultra high sampling frequencies.

   We find estimated β’s in the range from 1.5 to 1.8, indicating a very high degree of
jump activity, in eﬀect much closer to Brownian motion than to compound Poisson. The
filtered transactions produce the highest estimates of β, leading on average to a process


                                              35
that eﬀectively looks like Brownian motion. Figure 13 reports the values of the estimator
β̂ computed for the four quarters of the year, the two stocks, a range of values of α from
5 to 10 standard deviations, and ∆n from 5 to 10 seconds. The middle right plot reports
the corresponding data against the limited range of ∆n employed. Within the context of
their parametric model, Carr, Geman, Madan, and Yor (2002) also found estimates of β
on most stock return series that were greater than zero. (By contrast, the estimates here
do not rely on a parametric structure for the rest of the model, so they can be thought
of as semiparametric.) The lower panels, relating the estimated values of β to stock-level
liquidity, do not display strong patterns.

   Looking at the DJIA index itself, to the extent that an infinite activity component is
present, we find that it is less active, with estimated values of β ranging from 0.9 to 1.4.
But in light of the results of the test of finite vs. infinite jump activity, this component is
likely small in the index relative to the finite activity component.


F. Economic Implications of the Empirical Results

                           F.1. Implications for Option Pricing

   We have documented some of the salient features of asset returns viewed through the
prism of a semimartingale. The analysis in this paper is, and can only be, entirely conducted
under the physical probability measure, P. As such, it does not lend itself directly to
conclusions for option or other derivative prices, which depend upon the properties of the
semimartingale under an equivalent martingale measure, Q. However, important features
of the process identified under P do translate into similar features under Q.

   Specifically, economic theory dictates that P and Q must be absolutely continuous with
respect to each other, P ∼ Q, meaning that the two probability measures must have the
same null sets. This requirement limits the possible ways in which the features of the
process under Q can diﬀer from those already identified empirically under P. As is well
known, if the process is continuous under P, it must be continuous under Q, and vice versa.
Hence, if jumps are possible under one measure they must be possible under the other as
well. Thus the evidence in favor of jumps in the dynamics of the underlying asset therefore
argues in favor of models with jumps in option pricing. This is of course well-accepted in

                                              36
the empirical option pricing, see, e.g., Bates (1991) for some early evidence.

   But more subtle findings of our analysis can also be translated into similar features
under the pricing measure Q. Two types of quantities are indeed almost surely identical
pathwise, that is, are the same under both P and Q: one is the quadratic variation of the
                                                                         Rt
process, hence in particular its continuous part, that is the process 0 σs2 ds. The other is
                                                        P
the set IT of nonnegative reals p for which the sum s≤T |∆Xs |p is almost surely finite. In
                          Rt
other words, the process 0 σs2 ds for all t ∈ [0, T ] and the set IT are the same under P and
under Q.

   As a consequence, the proportion of QV estimated in the empirical analysis under P
must be the same under Q. Also, the absence of Brownian motion (tested under P using
SW ), which amounts to saying that σt = 0 for Lebesgue-almost all t in [0, T ], holds under
P if and only if it holds under Q. The degree of jump activity β (the Blumenthal-Getoor
index, estimated above), which is the infimum of all p in the set IT , is also the same under
the two measures, that is
                                          βP = βQ .                                       (44)

And the fact that jumps have finite activity (tested under P using SF A ) which amounts to
saying that 0 belongs to IT , is again true under P if and only if it is true under Q.

   On the other hand, some features of the model may hold under P and not under Q,
or vice-versa: typically, these concern the drift, which changes more or less arbitrarily
when we change the measure, or the law of the big jumps, that is the tails of ν. In other
words, the components of the model that are identified at high frequency under P by the
spectrogram analysis (volatility, presence or not of jumps, finite or infinite activity, degree
of jump activity, presence or not of the Brownian motion, proportion of continuous QV)
happen to be the ones that are also restricted by the change of measure, while those that
cannot be identified at high frequency (drift, law of the big jumps) are not.

   The consequence of the previous discussion, and in particular of the restriction (44),
combined with the empirical evidence regarding the estimated value of βP is to make some
option pricing models more likely than others to be in agreement with the empirical evidence
on the dynamics of the underlying asset price process. There are many option pricing
models in the literature which include jumps, and quite often rely on specific Lévy processes,
with specific values of βQ . Examples include compound Poisson-based models starting with

                                              37
Merton (1976), the variance gamma model of Madan and Seneta (1990) and Madan, Carr,
and Chang (1998) (βQ = 0), the Normal Inverse Gaussian model of Barndorﬀ-Nielsen (1998)
(βQ = 1), the hyperbolic model of Eberlein and Keller (1995), the generalized hyperbolic
model of Barndorﬀ-Nielsen (1977) and the CGMY model of Carr, Geman, Madan, and Yor
(2002) (in which βQ is a free parameter). In the case of the data studied in this paper,
models which allow for unrestricted values of βQ are likely to be more plausible candidates
than those that restrict βQ to be small, 0 in particular. Indeed we tend to find empirically
relatively high degrees of jump activity in βP . This is compatible with the findings from the
literature on empirical option pricing with Lévy processes, where models with significant
infinite-activity return innovations, that is a component with a βQ > 0, tend to be more
accurate in their pricing of equity options than those with finite activity or sub-polynomial
infinite activity, βQ = 0 (see e.g., Carr, Geman, Madan, and Yor (2002) and Huang and Wu
(2004).)

   Models with jumps of finite or infinite activity also have diﬀerential implications for the
prices of options at short and long horizons. As option maturities approach zero, out-of-
the-money option values tend to zero. The speed of decay is exponential when the process
is continuous, but linear in time-to-maturity T in the presence of jumps (see Carr and Wu
(2003b)). In the presence of jumps, the implied volatility for an out-of-the-money option
diverges as T → 0. This holds in the presence of small and big jumps alike.

   As option maturity increases, on the other hand, the big jumps component becomes a
key element. From the Black-Scholes scenario, one would expect the implied volatility smile
to flatten as a result of the Central Limit Theorem. The empirical evidence suggests, on
the other hand, that the smile steepens instead (see, e.g., Foresi and Wu (2005)). The big
jumps component can explain this fact. In a model where the variance of returns is infinite,
a situation which can only arise because of the big jumps, the Central Limit Theorem
ceases to apply for long-maturity asymptotics. But on the other hand, if most big jumps
are negative, then the option would still retain a finite value, as observed empirically. In
other words, the combination of components identified here under P results in a plausible
configuration for the model in light of the available evidence under Q from the empirical
option pricing literature.




                                             38
                            F.2. Implications for Risk Management

   Risk management is primarily concerned with the tails of the returns distributions over
diﬀerent horizons, from the very short term horizons (a few seconds or minutes for high
frequency trading applications), to the typical 10 days characteristic of VaR calculations,
to the longer horizons relevant in portfolio management.

   On a micro time scale, the main risk faced by a market participant practicing high
frequency trading comes from the small jumps component, since the continuous component
is small (of order ∆n ), and the big jumps component is very unlikely to give rise to realization
over a very short interval. As discussed, we find the small jumps risk to be prevalent in
individual equities we studied. The finer properties of the small jump component become
an important consideration: as β increases, small jumps become more and more likely, and
anecdotal evidence from the rapidly growing practice of high frequency trading suggests
that the small jumps component is indeed a key consideration in the implementation of
some of these strategies.

   On a macro time scale, the implications are much more tenuous. The specification of the
price process derived from the spectrogram methodology is nonparametric in nature, and
relies on high frequency observations. As such, it fully identifies the behavior of the jump
measure near 0. It is common in finance to rely on parametric models. One can imagine
the nonparametric methodology employed here serving as a guide to pick one parametric
model over another. Most parametric models rely on extrapolation in that the tails of the
jump measure (i.e., the big jumps driver) is linked through parametric assumptions to the
behavior of the jump measure near 0; within that framework, identifying the behavior of ν
near 0 is suﬃcient to characterize fully the jump measure. It is of course diﬃcult in any
case to pin down precisely how heavy the tail distributions are, since rare events require
extremely large samples, that is, long time periods, to get realized in suﬃcient quantities
to characterize precisely the big jumps component (see e.g., Heyde and Kou (2004)). Long
sample sizes in turn require an implicit assumption of model stability over the observation
horizon. Alternatively, by time aggregation, one can derive the implications for long horizons
of the continuous-time model identified over short horizons, typically by simulations. But,
overall, drawing long-horizon implications from this analysis entails successive leaps of faith
that make it potentially fraught with dangers.


                                               39
F.3. Individual Assets vs. Stock Indices, Factor Models and Systematic vs. Idiosyncratic
                                                Risk

   As part of the empirical analysis above, we compared the result of the spectrogram
methodology on the DJIA and its components. We found that while the individual com-
ponents seemed to contain an infinite activity jump component with a fairly high degree
of jump activity, the evidence for the index was pointing more towards a finite activity
component only.

   This empirical evidence can be interpreted in light of a factor model with systematic
and idiosyncratic components. If we further decompose the two jump components in the
model (2) for individual stocks into a common component and an idiosyncratic component,
then when an idiosyncratic jump occurs the other stock prices do not jump, so the influence
of this particular jump on the index, which is an average, is essentially wiped out: the index
will not exhibit a jump of significant size. In contrast, a systematic jump will typically occur
at the same time (and often with the same sign) for most or all stocks, resulting in a jump
of the index. Therefore, the absence of empirical evidence in favor of infinite activity jumps
in the index, combined with their presence in the individual components, point towards
purely idiosyncratic small jump components in the individual assets.

   This makes sense if we think of most systematic, i.e., market-wide, price moves as driven
by important macroeconomic news and therefore likely to be large. On the other hand,
small infinite activity jumps are more likely to reflect individual stock-level considerations,
such as stock-specific information and its immediate trading environment, and therefore be
idiosyncratic.

   Consistent with this, we also found that the proportion of quadratic variation attribut-
able to jumps is lower for the index than for its individual components. One could conceiv-
ably measure the proportion of jumps that are systematic vs. those that are idiosyncratic on
the basis of the comparison between the proportions of quadratic variation estimated for the
index and for its components. Doing this using the empirical results above would suggest a
proportion of systematic jumps representing about 10% of the total quadratic variation, and
a proportion of idiosyncratic jumps representing about 15% of total quadratic variation.




                                              40
                                   X.     Conclusions

   The empirical results on the DJIA 30 components appear to indicate that jumps are
present in the data; point towards the presence of infinite activity jumps; of degree of jump
activity that is around 1.5 or higher; indicate that, on top of the jump components, a
continuous component is present; which represents approximately 3/4 of the total QV.

   The analysis of diﬀerent measurement mechanisms suggests that the results are fairly
consistent when various ways of measuring the data (“F”, “U” or “M”) are employed. The
DJIA index itself looks quite diﬀerent, when viewed through this prism, than its individual
components. In particular, although market microstructure noise is less a factor for all
DJIA 30 stocks than it actually is for its two Nasdaq components (Microsoft and Intel),
there is very little evidence of noise even at the highest frequencies for the index itself. And
there is less evidence for the presence of jumps in the index than in its components, and
less evidence for infinite activity jumps than in the components, or at least less active small
jumps.

   Of course, we do not claim on the basis of this limited evidence that these empirical
results are in any way “universal”: they are likely in general to depend upon the assets
under consideration, the time period, what type of data are used (transactions, quotes,
etc.), among other considerations.

   In terms of methodology, our assessment at present is the following. The pros of the
approach are: we have a unified methodology to address all these seemingly disparate spec-
ification questions in a common framework; the method allows for a symmetric treatment
of null and alternative hypotheses in each case, including the full distribution theory; all
the test statistics are model-free; they are extremely simple to implement in practical ap-
plications; and, finally, we are able to characterize the impact of two important types of
market microstructure noise, additive and rounding, on the various statistics.

   The cons of the approach, at present, are the flip side of the commonality of technique:
if we take individually each one of the specification questions we have identified, then the
statistic we have proposed for that problem, based on that common approach, is not nec-
essarily the optimal approach for that individual specification question. Also, the practical
implementation of this method does require high frequency data (particularly the estima-


                                              41
tion of the degree of jump activity β, which requires ultra-high frequency data). Finally,
while we understand what happens to each one of the statistics when microstructure noise
dominates, we do not yet have noise-robust statistics that would be fully immune to the
presence of the noise.

   To conclude, we certainly expect to see refinements of our approach (see e.g., Fan and
Fan (2008)) or perhaps entirely diﬀerent techniques proposed in the future for each one
of these problems, some already existing. However, we think that the main appeal of the
approach comes from the commonality of technique, as well as the resulting simplicity of
implementation.




                                           42
                                 REFERENCES
Aït-Sahalia, Yacine, 2002, Telling from discrete data whether the underlying continuous-
 time model is a diﬀusion, Journal of Finance 57, 2075—2112.
Aït-Sahalia, Yacine, and Jean Jacod, 2008a, Is Brownian motion necessary to model high
 frequency data?, Annals of Statistics, forthcoming.
Aït-Sahalia, Yacine, and Jean Jacod, 2008b, Testing whether jumps have finite or infinite
 activity, Working paper, Princeton University and Université de Paris-6.
Aït-Sahalia, Yacine, and Jean Jacod, 2009a, Estimating the degree of activity of jumps in
 high frequency financial data, Annals of Statistics 37, 2202—2244.
Aït-Sahalia, Yacine, and Jean Jacod, 2009b, Testing for jumps in a discretely observed
 process, Annals of Statistics 37, 184—222.
Andersen, Torben G., Tim Bollerslev, and Francis X. Diebold, 2007, Roughing it up: Includ-
 ing jump components in the measurement, modeling, and forecasting of return volatility,
 Review of Economics and Statistics 89, 701—720.
Azaïs, Jean-Marc, 1989, Approximation des trajectoires et temps local des diﬀusions, An-
 nales de l’Institut Henri Poincaré 25, 175—194.
Ball, Cliﬀord A., and Walter N. Torous, 1983, A simplified jump process for common stock
 returns, Journal of Financial and Quantitative Analysis 18, 53—65.
Barndorﬀ-Nielsen, Ole E., 1977, Exponentially decreasing distributions for the logarithm of
 particle size, Proceedings of the Royal Society of London A 353, 401—419.
Barndorﬀ-Nielsen, Ole E., 1997, Normal inverse Gaussian distributions and stochastic
 volatility modelling, Scandinavian Journal of Statistics 24, 1—13.
Barndorﬀ-Nielsen, Ole E., 1998, Processes of normal inverse Gaussian type, Finance and
 Stochastics 2, 41—68.
Barndorﬀ-Nielsen, Ole E., and Neil Shephard, 2004, Power and bipower variation with
 stochastic volatility and jumps (with discussion), Journal of Financial Econometrics 2,
 1—48.
Bates, David S., 1991, The crash of ’87: Was it expected? The evidence from options
 markets, Journal of Finance 46, 1009—1044.
Belomestny, Denis, 2009, Spectral estimation of the fractional order of a Lévy process,
 Annals of Statistics, forthcoming.
Blumenthal, R.M., and R.K. Getoor, 1961, Sample functions of stochastic processes with
 stationary independent increments, Journal of Mathematics and Mechanics 10, 493—516.

                                            43
Carr, Peter, Hélyette Geman, Dilip B. Madan, and Marc Yor, 2002, The fine structure of
 asset returns: An empirical investigation, Journal of Business 75, 305—332.

Carr, Peter, and Liuren Wu, 2003a, The finite moment log stable process and option pricing,
 Journal of Finance 58, 753—777.

Carr, Peter, and Liuren Wu, 2003b, What type of process underlies options? A simple
 robust test, Journal of Finance 58, 2581—2610.

Carr, Peter, and Liuren Wu, 2004, Time-changed Lévy processes and option pricing, Journal
 of Financial Economics 71, 113—141.

Cont, Rama, and Cecilia Mancini, 2009, Nonparametric tests for probing the nature of asset
 price processes, Working paper, Universita di Firenze.

Delattre, Sylvain, 1997, Estimation du coeﬃcient de diﬀusion avec erreur d’arrondi, Ph.D.
 thesis Université Paris-6.

Delbaen, Freddy, and Walter Schachermayer, 1994, A general version of the fundamental
 theorem of asset pricing, Mathematische Annalen 300, 463—520.

Duﬃe, Darrell, Jun Pan, and Kenneth J. Singleton, 2000, Transform analysis and asset
 pricing for aﬃne jump-diﬀusions, Econometrica 68, 1343—1376.

Eberlein, Ernst, and Ulrich Keller, 1995, Hyperbolic distributions in finance, Bernoulli 1,
 281—299.

Fan, Yingying, and Jianqing Fan, 2008, Testing and detecting jumps based on a discretely
 observed process, Working paper, Princeton University.

Foresi, Silverio, and Liuren Wu, 2005, Crash-o-phobia: A domestic fear or a worldwide
 concern?, Journal of Derivatives 13, 8—21.

Glosten, Lawrence R., 1987, Components of the bid-ask spread and the statistical properties
 of transaction prices, Journal of Finance 42, 1293—1307.

Glosten, Lawrence R., and Lawrence E. Harris, 1988, Estimating the components of the
 bid/ask spread, Journal of Financial Economics 21, 123—142.

Gottlieb, Gary, and Avner Kalay, 1985, Implications of the discreteness of observed stock
 prices, Journal of Finance 40, 135—153.

Harris, Lawrence, 1990a, Estimation of stock price variances and serial covariances from
 discrete observations, Journal of Financial and Quantitative Analysis 25, 291—306.

Harris, Lawrence, 1990b, Statistical properties of the Roll serial covariance bid/ask spread
 estimator, Journal of Finance 45, 579—590.


                                            44
Harrison, Michael, and Stanley Pliska, 1981, Martingales and stochastic integrals in the
 theory of continuous trading, Stochastic Processes and Their Applications 11, 215—260.

Hasbrouck, Joel, 1993, Assessing the quality of a security market: A new approach to
 transaction-cost measurement, Review of Financial Studies 6, 191—212.

Heyde, Chris C., and Steven G. Kou, 2004, On the controversy over tailweight of distribu-
 tions, Operations Research Letters 32, 399—408.

Huang, Jingzhi, and Liuren Wu, 2004, Specification analysis of option pricing models based
 on time-changed Lévy processes, Journal of Finance pp. 1405—1440.

Huang, Xin, and George T. Tauchen, 2005, The relative contribution of jumps to total price
 variance, Journal of Financial Econometrics 4, 456—499.

Jiang, George J., and Roel C.A. Oomen, 2008, Testing for jumps when asset prices are
 observed with noise - A "swap variance" approach, Journal of Econometrics 144, 352—370.

Lee, Suzanne, and Per A. Mykland, 2008, Jumps in financial markets: A new nonparametric
 test and jump dynamics, Review of Financial Studies 21, 2535—2563.

Lee, Suzanne S., and Jan Hannig, 2010, Detecting jumps from Lévy jump diﬀusion processes,
 Journal of Financial Economics, forthcoming.

Madan, D. B., P. P. Carr, and E. E. Chang, 1998, The Variance Gamma process and option
 pricing, European Finance Review 2, 79—105.

Madan, Dilip B., and Frank Milne, 1991, Option pricing with V.G. martingale components,
 Mathematical Finance 1, 39—56.

Madan, Dilip B., and Eugene Seneta, 1990, The Variance Gamma (V.G.) model for share
 market returns, Journal of Business 63, 511—524.

Madhavan, Ananth, Matthew Richardson, and Mark Roomans, 1997, Why do security
 prices change?, Review of Financial Studies 10, 1035—1064.

Mancini, Cecilia, 2001, Disentangling the jumps of the diﬀusion in a geometric jumping
 Brownian motion, Giornale dell’Istituto Italiano degli Attuari LXIV, 19—47.

Merton, Robert C., 1976, Option pricing when underlying stock returns are discontinuous,
 Journal of Financial Economics 3, 125—144.

Roll, Richard, 1984, A simple model of the implicit bid-ask spread in an eﬃcient market,
 Journal of Finance 39, 1127—1139.

Schoutens, Win, 2003, Lévy Processes in Finance: Pricing Financial Derivatives. (Wiley
 U.K.).


                                           45
Stoll, Hans R., and Christoph Schenzler, 2006, Trades outside the quotes: Reporting delay,
 trading option, or trade size?, Journal of Financial Economics 79, 615—653.

Todorov, Viktor, and George T. Tauchen, 2010, Activity signature functions for high-
 frequency data analysis, Journal of Econometrics 154, 125—138.

Woerner, Jeannette H.C., 2006, Analyzing the fine structure of continuous-time stochastic
 processes, Working paper, University of Göttingen.




                                           46
                              APPENDIX:                         PROOFS

Appendix 1. Proof of Theorem 1

Proof. We assume (31) and (32). We start with the behavior of the power variations when
there is only noise, that is we consider the variables
                                            [T /∆n ]
                                               X
                       B(p, un , ∆n ) =                |εni − εni−1 |p 1{|εni −εni−1 |≤un } .      (A.1)
                                               i=1

                                            [T /∆n ]
                                               X
                       U (p, un , ∆n ) =               |εni − εni−1 |p 1{|εni −εni−1 |>un } .      (A.2)
                                               i=1
                        ¡                          ¢
We also write Gp (x) = E |ε1 − ε0 |p 1{|ε1 −ε0 |≤x} . Then (32) readily implies

                                           Gp (x)   2f (0)
                                            p+1
                                                  →        .                                       (A.3)
                                           x        p+1



Lemma 1. Let p ≥ 0. Then
                                           0                    P
                                     ∆n B (p, ∞, ∆n ) −→ m0p T.                                    (A.4)

If further un > 0 with un → 0 and ∆n upn /Gp (un ) → 0, we have
                                      ∆n                      P
                                              B(p, un , ∆n ) −→ T.                                 (A.5)
                                     Gp (un )

Proof. We denote by B + (p, un , ∆n ) and B − (p, un , ∆n ) the quantities defined by the right
side of (A.1), but where the sum is extended over all indices i that are even, resp. odd. It
is then suﬃcient to prove that, suitably normalized, both these variables converge to half
the limit in (A.4) or (A.5), and it suﬃces to prove the result for, say, B + (p, un , ∆n ).
     For (A.4) this is immediate: indeed B + (p, un , ∆n ) is the sum of [[T /∆n ]/2] ∼ T /2∆n
i.i.d. terms with mean m0p and a law independent of n, so the law of large numbers applies.
     For (A.5) the summands ζin = |εni − εni−1 |p 1{|εni −εni−1 |≤un } are still i.i.d. for each n (recall
that i is even), but their law depends on n. We have E(ζin ) = Gp (un ) and E((ζin )2 ) ≤
upn Gp (un ). The result then readily follows from standard properties of i.i.d. triangular
arrays, because ∆n un /Gp (un ) → 0.
   We are now ready to prove Theorem 1. Below, K denotes a constant which may change
from line to line.

                                                       47
     a) In view of the previous lemma, it is enough to prove that
                              ¯                                 ¯ P
                           ∆n ¯U 0 (p, un , ∆n ) − |B(p, ∞, ∆n )¯ −→ 0.                    (A.6)
For this, we recall the following properties, under our standing assumptions on X:
           (
              p ≥ 2 ⇒ the sequence B(p, ∞, ∆n ) is bounded in probability
                               1−p/2               P     RT                                (A.7)
              p < 2 ⇒ ∆n             B(p, ∞, ∆n ) −→ mp 0 |σs |p ds

where mp is the pth absolute moment of the law N (0, 1). We observe that for all reals x, y,
                                      ⎧
                                      ⎪ u                              if p = 0
     ¯                            ¯ ⎨ n p        p/2
     ¯|x + y|p 1{|x+y|>u } − |y|p ¯ ≤                 p/2
                                        K(|x| + un |y| )               if p ∈ (0, 1]
                        n
                                      ⎪
                                      ⎩      p   p/2  p/2       p−1
                                        K(|x| + un |y| + |x| |y| ) if p > 1.
Then if p = 0 the left side of (A.6) is smaller than un T , hence the result. If p ∈ (0, 1] it is
                                  p/2
smaller than ∆n B(p, ∞, ∆n ) + un ∆n B(p, ∞, ∆n ), and the result follows from (A.7) and
from (A.4) applied with p/2. If p > 1 it is smaller than
                                                                    1/p ¡                ¢1−1/p
K∆n (B(p, ∞, ∆n ) + Kup/2n ∆n B(p, ∞, ∆n ) + K (∆n B(p, ∞, ∆n ))         ∆n B(p, ∞, ∆n )
and (A.4) and (A.7) again yield (A.6).
   b) The proof is more complicated. We assume now p > 0. A standard localization
procedure yields that one may assume that
                                      E(|∆ni X|2 ) ≤ K∆n .                                 (A.8)

     In view of (A.3), and again because of the previous lemma, it is enough to show
                            ∆n ¯¯ 0                               ¯ P
                                                                  ¯ −→ 0.
                                 B  (p, un , ∆n ) − B(p, un , ∆n )                         (A.9)
                           up+1
                            n

For all reals x, y we have, with the notation An = {(x, y) : |x + y| ≤ un < |y|} ∪ {|y| ≤ un <
|x + y|}:
                                            ½          p
  ¯                                      ¯         p
  ¯|x + y|p 1{|x+y|≤u } − |y|p 1{|y|≤u } ¯ ≤ K(|x| + unp 1An (x, y))     p−1
                                                                                   if p ≤ 1
                     n                n            p
                                              K(|x| + un 1An ((x, y) + un |x|) if p > 1.
Then if we set
                                      [T /∆n ]
                                   ∆n X
                            Hn   =             1An (∆ni X, εni − εni−1 ).                 (A.10)
                                   un
                                           i=1
we see that when p ≤ 1, and by Hölder’s inequality, the left side of (A.9) is smaller than
K∆n
 p+1 B(p, ∞, ∆n ) + KHn , whereas when p > 1 it is smaller than
un

                        K∆n                      K∆n
                               B(p, ∞, ∆n ) +         B(1, ∞, ∆n ) + KHn .                (A.11)
                        up+1
                         n                        u2n

                                                  48
                                                 P                                   P
(35) and (A.7) imply that ∆p+1n
                                B(p, ∞, ∆n ) −→ 0, and also      K∆n
                                                                  u2n   B(1, ∞, ∆n ) −→ 0 when
                           un
p ≥ 1. Hence it remains to show that

                                         E(Hn ) → 0.

   To see this we need to evaluate P(Ãni ), where Ãni = {(∆n iX, εni − εni−1 ) ∈ An }. By (A.8)
and Markov’s inequality and the independence of the εi ’s from the process X, and since the
density f is an even function, we deduce for any q ∈ (0, 1) that
                                   µ        Z 2un               ¶
                       n         q    1              f (y)             K∆q
                   P(Ãi ) ≤ K∆n       q +                   dy   ≤          .             (A.12)
                                     un      0    |y − un |q            uqn

Therefore E(Hn ) ≤ KT ∆qn /u1+q
                            n , which goes to 0 by (A.12) if we take q = 1/3. This finishes
the proof.


Appendix 2. Proof of Theorem 2

Proof. Theorem 2 is a rather complicated result, whose main elements of proof are due to
Delattre (1997). We will just sketch here the reason why such a result holds. The key points
are as follows:
   a) When X is continuous, or when it has jumps with finite activity (or more generally
summable jumps), the local time La at level a is the unique continuous increasing adapted
process starting at 0, and such that
                                   Rt                     a
          |Xt − a| = |XP  0 − a| + 0 sign(Xs− − a)dXs + Lt
                                                                                   (A.13)
                        + s≤t (|Xs − a| − |Xs− − a| − sign(Xs− − a)∆Xs )

(Tanaka’s formula; the function x 7→sign(x) takes the values −1, 0 and +1, according to
whether x < 0 or x = 0 or x > 0).
   b) When X is continuous, any increment

                                χni = [Xi∆n ]α − [X(i−1)∆n ]α

is (for all n large enough and all i ≤ T /∆n equal to −α or 0 or α. In other words
B n (p, ∞, ∆n ) can be written as follows:
                                                    X
                               B n (p, ∞, ∆n ) = αp   V n (q),              (A.14)
                                                      q∈Z

where V n (q) is
              £ the number
                       ¤ of integers i less than T /∆n and such that the product ([Xi∆n ]α −
(q + 1/2)α) ( X(i−1)∆n α − (q + 1/2)α) is negative (that is, the path of X crosses the level
(q + 1/2)α between times (i − 1)∆n and i∆n ).

                                               49
    c) Suppose that X = σ W is a Wiener process with unit variance σ 2 . On the one hand
Rice’s formula connects the number of crossings of a given level a by X, suitably integrated
in a, with the occupation times, which themselves are integrals over a of the local time LaT .
On the other hand these properties can be discretized in time and “localized”
                                                                      √           around any
given level a, according to Azaïs (1989) for example: this gives that   ∆   V n (q) converges
                  √                                                       n
                    π/2    (q+1/2)α
in probability to   σ     LT          .
   d) Coming back to a continuous Itô semimartingale, we can argue as if the process
σ were piecewise constant in time, whereas the drift plays no role: so we obtain that
√t                                      p   RT       (q+1/2)α
  ∆n V n (q) converges in probability to π/2 0 σ1s dLs        .
     e) Observing that the sum in (A.14) is indeed a finite sum (for any fixed ω), because
V n (q) = 0 for any q bigger than 1 + 2 sups≤T |Xs |/α, we deduce (38) when X is continuous.
    f) When X has jumps with finite activity, the same argument holds provided we discard
the (finitely many) increments over the time intervals containing a jump. Those increments
are bounded (for n large enough) by the size of the jump, plus 2α. Since we normalize by
√
  ∆n , they are wiped out, and we get the result.




                                             50
                    Log-Returns Density: Continuous and Jump Components

                                                 1200

                                                                     Full Return

                                                 1000                Brownian

                                                                     Jump

                                                 800




                                                 600




                                                 400




                                                 200




           -0.003    -0.002      -0.001            0.000   0.001   0.002           0.003



                                Figure 1
   Deconvoluting the log-returns distribution into continuous and jump
                              components.




            Xt
                              = data



                                          X t+


                                          ΔX t     jump


                                                   X t-

                                                                                     t

                                  Figure 2
Discretely sampled data at interval ∆n vs. continuous-time sample path, and
                 diﬀerence between increments and jumps.




                                                   51
                                        Both Continuous
                                           and Jump
                                          Components
                                            Matter
                           Number of                            Size of
                          Increments                           Increments
                          Matters More                         Matters More


                     Continuous                                     Jump
                     Component                                    Component
                     Dominates                                    Dominates

                                                                                                 power
                                                                                                   p
         0                                        2

       Counting                                Quadratic
      Increments                               Variation

                              Figure 3
Adjusting the power p and dominating component in the power variation.




                                  Large Jumps Eliminated by Truncation

                                                   1200

                                                                                   30 seconds

                                                   1000                            15 seconds

                                                                                   5 seconds

                                                      800




                                                      600




                                                      400




             large                                    200                                  large
             jumps    -un (Δn )                                               un (Δn )     jumps



         -0.003       -0.002          -0.001           0.000         0.001    0.002             0.003



                                Figure 4
Adjusting the truncation rate un and the asymptotic elimination of large
                                 jumps.




                                                       52
                                                   Ratios of Power Variations at Two Frequencies
                                                     to Identify the Asymptotic Behavior of B


                                     B ( p, un , kΔn )
                                                         < 1
                                     B ( p, un , Δn )

                                                                                                                            B diverges
                                                                                                                            to infinity
                                                                           Δn ↓0
             power variation B



                                     B ( p, un , kΔn )
                                                         ~ 1
                                     B ( p, un , Δn )
                                                                                                     B converges to a finite limit




                                                                           Δn ↓0

                                                                                                                            B converges
                                                                                                                              to zero
                                     B ( p, un , kΔn )
                                                         > 1
                                     B ( p, un , Δn )


                                 0
                                           5s                  Δn =15s                    kΔn =30s                                    1mn
                                                                               sampling interval



                                    Figure 5
Three possible asymptotic behaviors of the power variation (diverge to infinity,
 converge to a finite limit, converge to zero) and means of identifying them.



                                       Log-Returns Density: Sub-Components and Cutoff Levels

                                                                                   1200

                                                                                                                      Full Return

                                                                                   1000                               Brownian

                                                                                                                      Jump

                                                                                   800




                                                                                   600




                                                                                   400



                                                               -ασ Δn                                  ασ Δn
                                                                                   200
                                                         -un                                                   un



             -0.003                         -0.002                -0.001             0.000           0.001          0.002            0.003



                                   Figure 6
Truncating to retain or avoid the contribution from the Brownian component
                                of the model.



                                                                                     53
           Finite                              Infinite
           Jump                                Jump
           Activity                            Activity


                             Finite                             Infinite
                             Variation (p=1)                    Variation (p=1)


                                                                    Infinite Power
                                                                    Variations
                                                                    of orders p<β,
                                                                    finite of orders
                                                            β       p>β
                                                                                                index
                                                                                                of jump
                     0              1/2           1                                      2      activity
     Compound            Gamma
     Poisson             Process                                   β-stable
     Process                                                       Process,
                                Lévy Model,    Cauchy              CGMY(Y=β),          Brownian
                Variance
                                Inverse        Process,            Generalized         Motion
                Gamma
                                Gaussian       NIG Process         Hyperbolic
                Process
                                Process                            Process


                                         Figure 7
                     Index of jump activity β : Examples of processes.


                            Splitting Up QV: Continuous and Jump Components
                % QV



            100




                80



                                                                  Continuous
                60




                40



                                                                  Small Jumps
                20


                                                                   Big Jumps

                                                                                                     ε
                            0.005              0.010                    0.015                0.020



                                   Figure 8
Splitting up the QV into continuous and jump components, and into small and
               big jumps as a function of the jump size cutoﬀ ε.



                                                       54
                                            Test Statistic SJ to Test for the Presence of Jumps
                                                             DJIA 30 Components


                   Unfiltered Transactions (U)                                                NBBO-Filtered Transactions (F)
   2.5                     Jumps                                                 2.5                     Jumps
                                                           No Jumps                                                                              No Jumps
                          Present                                                                       Present

   2.0                                                                           2.0


   1.5     Noise Dominates                                                       1.5        Noise Dominates


   1.0                                                                           1.0


   0.5                                                                           0.5


                                                                       SJ                                                                                        SJ
                    0.5           1.0       1.5      2.0         2.5                              0.5          1.0             1.5         2.0            2.5




                    NBBO Quotes Midpoint (M)                                                  Median Value of SJ for (U,F,M)
                                                                                        SJ
   2.5                     Jumps
                                                           No Jumps                     2
                          Present                                                                                                      No Jumps
   2.0
                                                                                                                                                      F
                                                                                      1.5                                  F                          U
                                                                                                                F          U
   1.5     Noise Dominates                                                                              F       U
                                                                                                        U                                             M
                                                                                                 F      M       M          M         Jumps Present
                                                                                        1    M F
                                                                                             F M M
                                                                                                 U
                                                                                             U U
   1.0
                                                                                                                                         Noise
                                                                                      0.5
   0.5                                                                                                                                 Dominates


                                                                       SJ                                                                                   n
                    0.5           1.0       1.5      2.0         2.5                         5s 15s     30s    45s     1mn                           2mn




                         Stock-Level Liquidity                                                          Stock-Level Liquidity
                      NBBO-Filtered Transactions                                                      NBBO-Filtered Transactions
         2.5                                                                          2.5


         2.0                                                                          2.0
                                                            No Jumps                                                                               No Jumps

         1.5                                                                          1.5
   SJ                                                                            SJ
                                                             Jumps                                                                                    Jumps
         1.0                                                                          1.0
                                                            Present                                                                                  Present

                                                             Noise                                                                               Noise
         0.5                                                                          0.5
                                                           Dominates                                                                           Dominates


         0.0                                                                          0.0
               0             5            10          15              20                       300       400         500       600       700       800           900
                                 avg time between trades                                                       avg transaction size




                                  Figure 9
 Empirical distribution of SJ for all 30 DJIA components, 2006, measured
   using transactions (unfiltered and NBBO-filtered) and NBBO quotes
midpoint, median value of SJ as a function of the sampling interval ∆n , and
     nonlinear regression of SJ against stock-level liquidity measures.




                                                                            55
                           Test Statistic SFA to Test Whether Jumps Have Finite or Infinite Activity
                                                       DJIA 30 Components




                    Unfiltered Transactions (U)                                                     NBBO-Filtered Transactions (F)
    2.0              Infinite                          Finite                          2.0              Infinite                           Finite
                     Activity                         Activity                                          Activity                          Activity
                      Jumps                            Jumps                                              Jumps                             Jumps
    1.5                                                                                1.5
                  Noise                                                                               Noise
                Dominates                                                                           Dominates

    1.0                                                                                1.0



    0.5                                                                                0.5



                                                                           SFA                                                                                 SFA
                    0.5     1.0          1.5        2.0    2.5       3.0                               0.5        1.0        1.5      2.0      2.5      3.0




                     NBBO Quotes Midpoint (M)                                                       Median Value of SFA for (U,F,M)
    2.0              Infinite                          Finite                                 SFA
                     Activity                         Activity
                                                                                              2
                      Jumps                            Jumps                                                                        Finite Activity
    1.5
                  Noise
                Dominates                                                                   1.5
                                                                                                                        F     F                         F
                                                                                                                                                        U
                                                                                                    M M M     F         U     U
                                                                                                        F     M
                                                                                                              U         M     M                         M
    1.0                                                                                               F U                          Infinite Activity
                                                                                              1     F U
                                                                                                    U

    0.5                                                                                                                                     Noise
                                                                                            0.5
                                                                                                                                          Dominates


                                                                           SFA                                                                               n
                    0.5     1.0          1.5        2.0    2.5       3.0                          5s 15s      30s     45s    1mn                       2mn




                            Stock-Level Liquidity                                                               Stock-Level Liquidity
                          NBBO-Filtered Transactions                                                         NBBO-Filtered Transactions
          2.5                                                                               2.5

                     Finite Activity Jumps                                                            Finite Activity Jumps
          2.0                                                                               2.0


          1.5                                                                               1.5
    SFA                                                                               SFA
          1.0                                                                               1.0
                     Infinite Activity Jumps                                                          Infinite Activity Jumps
                                                                   Noise                                                                             Noise
          0.5                                                                               0.5
                                                                 Dominates                                                                         Dominates


          0.0                                                                               0.0
                0               5              10          15              20                         300       400         500     600      700      800         900
                                    avg time between trades                                                           avg transaction size




                                   Figure 10
 Empirical distribution of SF A for all 30 DJIA components, 2006, measured
   using transactions (unfiltered and NBBO-filtered) and NBBO quotes
midpoint, median value of SF A as a function of the sampling interval ∆n , and
     nonlinear regression of SF A against stock-level liquidity measures.



                                                                                 56
                                     Test Statistic SW to Test Whether Brownian Motion is Present
                                                           DJIA 30 Components


                   Unfiltered Transactions (U)                                                  NBBO-Filtered Transactions (F)
     4                                                                                 4
                       No    Brownian Motion                                                          No    Brownian Motion
                    Brownian     Present                                                           Brownian     Present
     3                                                                                 3



     2                                                                                 2
                                                Noise Dominates                                                                       Noise Dominates


     1                                                                                 1



                                                                        SW                                                                                      SW
                   0.5     1.0       1.5        2.0    2.5        3.0                             0.5          1.0          1.5       2.0       2.5       3.0




                    NBBO Quotes Midpoint (M)                                                     Median Value of SW for (U,F,M)
     4                                                                                     SW
                       No    Brownian Motion                                               3
                    Brownian     Present
     3                                                                                 2.5                                               Noise
                                                                                                                                       Dominates
                                                                                           2
     2
                                                Noise Dominates                        1.5                                                 Brownian Motion
                                                                                                U F
                                                                                                F   U
                                                                                                  U F      U
                                                                                                           F          U
                                                                                                                      F
                                                                                                                      M          U
                                                                                                                                 F
                                                                                                                                 M             Present   U
                                                                                                                                                         F
                                                                                                                                                         M
                                                                                                M M M      M
                                                                                           1
     1                                                                                                                                      No Brownian
                                                                                       0.5

                                                                        SW                                                                                      n
                   0.5     1.0       1.5        2.0    2.5        3.0                           5s 15s    30s        45s     1mn                          2mn




                           Stock-Level Liquidity                                                            Stock-Level Liquidity
                         NBBO-Filtered Transactions                                                      NBBO-Filtered Transactions
         2.5                                                                           2.5
                                   Noise                                                                   Noise
                                 Dominates                                                               Dominates
         2.0                                                                           2.0


         1.5                                                                           1.5                 Brownian Motion Present
                                    Brownian Motion Present
    SW                                                                            SW
         1.0                                                                           1.0
                                 No Brownian                                                             No Brownian

         0.5                                                                           0.5


         0.0                                                                           0.0
               0            5              10          15               20                        300       400            500       600       700    800            900
                                avg time between trades                                                              avg transaction size




                                  Figure 11
 Empirical distribution of SW for all 30 DJIA components, 2006, measured
   using transactions (unfiltered and NBBO-filtered) and NBBO quotes
midpoint, median value of SW as a function of the sampling interval ∆n , and
     nonlinear regression of SW against stock-level liquidity measures.




                                                                             57
                         Proportion of Quadratic Variation Attributable to the Continuous Component
                                                      DJIA 30 Components




                   Unfiltered Transactions (U)                                                 NBBO-Filtered Transactions (F)
    4                                                                               4
                Pure                                Pure                                        Pure                                             Pure
                Jump                              Brownian                                      Jump                                           Brownian

    3                                                                               3



    2                                                                               2



    1                                                                               1



                                                                       %QV                                                                                            %QV
          0.0          0.2       0.4     0.6     0.8        1.0                           0.0             0.2         0.4         0.6         0.8         1.0




                    NBBO Quotes Midpoint (M)                                                    Median Value of %QV for (U,F,M)
    4                                                                                      %QV
                Pure                                Pure
                Jump                              Brownian
                                                                                           1
                                                                                                                                              Pure Brownian
    3
                                                                                                                F      F
                                                                                                                       U          F
                                                                                                                                  U                             F
                                                                                                                                                                U
                                                                                                    F F         U
                                                                                        0.75        U U
                                                                                                F                                 M                             M
                                                                                                U                      M
                                                                                                                M
    2                                                                                               M M
                                                                                         0.5    M


    1                                                                                   0.25

                                                                                                                                                Pure Jump
                                                                                           0
                                                                       %QV                                                                                            n
          0.0          0.2       0.4     0.6     0.8        1.0                                5s 15s           30s   45s     1mn                               2mn




                            Stock-Level Liquidity                                                             Stock-Level Liquidity
                         NBBO-Filtered Transactions                                                        NBBO-Filtered Transactions
         1.0                                                                            1.0
                                                       Pure Brownian                                Pure Brownian

         0.8                                                                            0.8


         0.6                                                                            0.6
   %QV                                                                            %QV
         0.4                                                                            0.4


         0.2                                                                            0.2

                                                           Pure Jump                                 Pure Jump
         0.0                                                                            0.0

               0             5            10           15               20                          300         400         500         600         700     800            900
                                 avg time between trades                                                              avg transaction size




                                  Figure 12
Empirical distribution of the proportion of QV attributable to the continuous
 component for all 30 DJIA components, 2006, measured using transactions
(unfiltered and NBBO-filtered) and NBBO quotes midpoint, median value of
 %QV as a function of the sampling interval ∆n , and nonlinear regression of
                 %QV against stock-level liquidity measures.



                                                                             58
                                                      Estimate of the Degree of Jump Activity Β
                                                                  DJIA 30 Components


                     Unfiltered Transactions (U)                                                        NBBO-Filtered Transactions (F)
     2.0                                                    Brownian                      2.0                                                       Brownian
                   Compound                                                                             Compound
                    Poisson                                   Motion                                     Poisson                                      Motion
                    Process                                    (Most                                     Process                                      (Most
     1.5             (Least                                  Active)                      1.5             (Least                                     Active)
                    Active)                                                                              Active)

     1.0                                                                                  1.0



     0.5                                                                                  0.5



                                                                             Β                                                                                       Β
           0.0                0.5          1.0        1.5         2.0                           0.0                0.5            1.0         1.5         2.0




                       NBBO Quotes Midpoint (M)                                            Median Value of Β Estimates for (U,F,M)
                                                                                                    Β
     2.0                                                    Brownian
                   Compound                                                                     2                                                         F
                    Poisson                                   Motion                                                 F
                                                                                                                               Brownian Motion             U
                    Process                                    (Most                                                 U
     1.5                                                                                                                        (Most Active)
                     (Least                                  Active)                        1.5                      M
                    Active)
                                                                                                                                                           M
     1.0                                                                                        1



     0.5                                                                                    0.5
                                                                                                                          Compound Poisson Process
                                                                                                                               (Least Active)
                                                                                                0
                                                                             Β                                                                                  n
           0.0                0.5          1.0        1.5         2.0                                               5s                                    10s




                           Stock-Level Liquidity                                                                  Stock-Level Liquidity
                         NBBO-Filtered Transactions                                                            NBBO-Filtered Transactions
                              Brownian Motion (Most Active)                                               Brownian Motion (Most Active)
         2.0                                                                              2.0


         1.5                                                                              1.5


     Β                                                                                Β
         1.0                                                                              1.0


         0.5                                                                              0.5


                        Compound Poisson Process (Least Active)                                               Compound Poisson Process (Least Active)
         0.0                                                                              0.0
               0                5            10             15          20                              300        400      500         600    700      800          900
                                    avg time between trades                                                              avg transaction size




                                    Figure 13
     Empirical distribution of the index of jump activity β for all 30 DJIA
       components, 2006, measured using transactions (unfiltered and
    NBBO-filtered) and NBBO quotes midpoint, and median value of the
estimated β as a function of the sampling interval ∆n , and nonlinear regression
          of the estimated β against stock-level liquidity measures.



                                                                                 59
                                                   H0 : ΩcT                    H0 : ΩjT
                                                   H1 : ΩjT                    H1 : ΩcT
         Jumps: Present or Not                    ⎛        ⎞                ⎛         ⎞
                                                    p>2                        p>2
                                           SJ : ⎝     ∞    ⎠          SJ : ⎝     ∞    ⎠
                                                  ∆n , k∆n                   ∆n , k∆n
                                                 H0 : ΩfT                   H0 : ΩiT
                                                 H1 : ΩiT                   H1 : ΩfT
    Jumps: Finite or Infinite Activity             ⎛           ⎞           ⎛               ⎞
                                                         p>2                 p > 2, p0 > 2
                                           SF A   :⎝      un   ⎠    SIA   :⎝    un , γun   ⎠
                                                      ∆n , k∆n                     ∆n
                                                    H0 : ΩW
                                                          T                 H0 : Ωno
                                                                                  T
                                                                                     W

                                                   H1 : Ωno
                                                         T
                                                            W
                                                                             H1 : ΩTW

    Brownian Motion: Present or Not               ⎛           ⎞            ⎛                 ⎞
                                                      p<2                      p = 0, p0 = 2
                                           SW     :⎝    un    ⎠   SnoW : ⎝       un , γun    ⎠
                                                     ∆n , k∆n     ⎛          ⎞      ∆ n
                                                                    p=2
 Relative Magnitude of the Components                       %QV : ⎝ un ⎠
                                                ⎛              ⎞     ∆n ⎛                 ⎞
                                                     p=0                         p=0
Estimating the Degree of Jump Activity β   β̂ : ⎝ U : un , γun ⎠     β̂ 0 : ⎝ U : un ⎠
                                                       ∆n                      ∆n , k∆n

                                     Table I
 Combinations of (p, u, ∆) employed to implement the complete spectrogram
methodology: test for the presence of jumps, test whether jumps have finite
or infinite activity, test whether a continuous component is present, estimate
 the relative magnitude of the components, and estimate the degree of jump
                                    activity.




                                            60
