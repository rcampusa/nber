                                NBER WORKING PAPER SERIES




                         THE MORPHOLOGY OF PRICE DISPERSION

                                            Greg Kaplan
                                            Guido Menzio

                                        Working Paper 19877
                                http://www.nber.org/papers/w19877


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     January 2014




The views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research. This work uses data supplied by the Kilts-Nielsen Data Center
at the University of Chicago Booth School of Business. Information on data access and availability
is available at http://research.chicagobooth.edu/nielsen

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2014 by Greg Kaplan and Guido Menzio. All rights reserved. Short sections of text, not to exceed
two paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.
The Morphology of Price Dispersion
Greg Kaplan and Guido Menzio
NBER Working Paper No. 19877
January 2014
JEL No. D2,D4,E3,L1

                                              ABSTRACT

This paper is a study of the shape and structure of the distribution of prices at which an identical good
is sold in a given market and time period. We find that the typical price distribution is symmetric and
leptokurtic, with a standard deviation between 19% and 36%. Only 10% of the variance of prices is
due to variation in the expensiveness of the stores at which a good is sold, while the remaining 90%
is due, in approximately equal parts, to differences in the average price of a good across equally expensive
stores and to differences in the price of a good across transactions at the same store. We show that
the distribution of prices that households pay for the same bundle of goods is approximately Normal,
with a standard deviation between 9% and 14%. Half of this dispersion is due to differences in the
expensiveness of the stores where households shop, while the other half is mostly due to differences
in households’ choices of which goods to purchase at which stores. We find that households with fewer
employed members pay lower prices, and do so by visiting a larger number of stores, rather than by
shopping more frequently.


Greg Kaplan
Department of Economics
Princeton University
Fisher Hall
Princeton, NJ 08544
and NBER
gkaplan@princeton.edu

Guido Menzio
Department of Economics
University of Pennsylvania
467 McNeil Building
3718 Locust Walk
Philadelphia, PA 19104
and NBER
gmenzio@econ.upenn.edu
mor.phol.o.gy (noun)
    The branch of biology that deals with the form and structure of organisms without
    consideration of function.



1    Introduction

This paper is a systematic study of the morphology of price dispersion, i.e., a study of
the shape and structure of the distribution of prices at which an identical good is sold
in a given geographic market and during a given period of time. Our goal is to provide
macroeconomists with a set of stylized facts that can be used to develop and test theories
of price dispersion, and to calibrate models that emphasize deviations from the Law of One
Price. We carry out our study using data from the Kilts-Nielsen Consumer Panel Dataset
(KNCP), which contains price and quantity information for over 300 million transactions
by 50,000 households for over 1.4 million goods in 54 geographical markets over the period
2004-2009.
Our approach is to view both data and theory through the lens of a decomposition of the
cross-sectional variance of prices in a given market and time period. The decomposition
expresses each transaction price as the sum of three sources: one that is specific to the
store where the transaction took place, one that is specific to both the store where the
transaction took place and the particular good that was traded, and one that is specific
to the transaction itself. Such a decomposition can be feasibly implemented in the KNCP,
since the data contain information on transactions for the same good at multiple stores,
transactions for multiple goods at individual stores, and multiple transactions for the same
good at individual stores. After investigating the shape of the typical price distribution,
we use the decomposition to study the sources of price dispersion: does dispersion arise
because some stores are more expensive than others on average, or because the same good
is sold at different prices at equally expensive stores, or because the same good is sold at
the same store at different prices on different days?
We also investigate the shape and structure of dispersion in the average price paid by
different households for the same bundle of goods. This is possible because the KNCP data
link each transaction to a specific household, allowing us to construct household-specific
price indexes. We investigate the amount of dispersion in these price indexes and show
that price dispersion does not wash out at the level of the household. We then use our
decomposition to study the sources of price index dispersion across households: do some

                                             1
household pay less than others because they shop at cheaper stores, or because they purchase
cheaper goods at the same stores, or because they purchase the same goods at the same
stores on different days?

We start by documenting the extent and shape of dispersion in the prices for an identical
good in a given market and quarter. When we define goods by their UPC (i.e. barcode), the
average standard deviation of normalized prices is 19%. Defining goods more broadly leads
to more price dispersion. For our broadest definition, which aggregates all products that are
identical expect for their brand and size into a single good, the average standard deviation
of normalized prices is 36%. We find that price dispersion is a prevalent phenomenon:
while there is variation in the amount of price dispersion across goods, for more than 90%
of goods/markets/quarters the standard deviation of prices is greater than 10%. Moreover,
for all definitions of a good we find that the typical price distribution is symmetric, unimodal
and leptokurtic, i.e. the distribution has more mass around the mean and thicker tails than
a Normal distribution with the same mean and variance. This contrasts with the typical
features of the wage distribution, which is well known to be skewed with a long right tail.

To understand the sources of price dispersion, we decompose each transaction price into
three components: (i) a store component, which is defined as the average price of all goods at
the particular store where the transaction took place; (ii) a store-specific good component,
which is defined as the average price of the particular good at that store, relative to the
average price of all goods at that store; and (iii) a transaction component, which is defined
as the price of the good in that particular transaction relative to the average price of that
good at that store. We find that the store component contributes approximately 10% to
the overall variance of prices, the store-specific good component contributes between 35%
and 50% (depending on how broadly we define a good and the selection criteria that we
apply), and the transaction component accounts for the remaining variance. These findings
are striking, since they reveal that price dispersion does not primarily arise because some
stores are cheap and some stores are expensive. Instead, price dispersion arises because even
among equally expensive stores, the average price of a particular good varies substantially,
and even at a given store, the price of a particular good varies across transactions.

The variance decomposition for transaction prices offers new perspectives on the relevance
of four dominant theories of price dispersion: (i) heterogeneity in the amenities offered
by different stores; (ii) heterogeneity in the marginal costs faced by different stores; (iii)
intertemporal price discrimination; and (iv) search frictions. Differences in amenities and
differences in marginal costs are both unlikely to be important sources of price dispersion,

                                               2
since these differences should show up in the store component of prices, which accounts for
only 10% of the overall variance of prices. In contrast, intertemporal price discrimination
may be a quantitatively important source of price dispersion, since the time-variation in
prices that stores use to discriminate among different types of buyers should show up in
the variance of the transaction component of prices, which accounts for at least 30% of
the overall variance of prices. Similarly, search frictions may be a quantitatively important
source of price dispersion, since these frictions induce stores to randomize over prices, leading
to variation in both the store and the store-specific good components of prices, which
together account for at least 40% of the overall variance of prices.

We then ask whether some households are better than others at taking advantage of price
dispersion and, if so, how they achieve this goal. For every household, we construct a price
index by computing the ratio between the household’s expenditures and the household’s
counterfactual expenditures had they purchased each good at its average price. We find
that the distribution of price indexes in a given market and quarter is approximately Normal
with a standard deviation between 9% and 14%, depending on the definition of a good.
Hence some of the dispersion in transaction prices disappears when goods are aggregated
into bundles, but a substantial amount of variation remains. Indeed, a household at the 90th
percentile pays approximately 22% percent more than a household at the 10th percentile
of the price index distribution. Decomposing the variance of household price indexes into a
store component, store-specific good component and transaction component reveals that the
store component accounts for approximately 50% of the variance of price indexes, while the
store-specific good component accounts for 40% and the transaction component accounts
for only 10%.

The variance decomposition for household price indexes is informative about the process
by which some households achieve lower prices than others. First, since households tend to
concentrate their shopping at a relatively small number of stores, and since the majority of
price dispersion occurs within stores, this explains both why the dispersion in price indexes
across households is smaller than the dispersion of transaction prices, and why the store
component accounts for a larger fraction of the variance of household price indexes than for
the variance of transaction prices. Second, since the variance of the transaction component
accounts for less of the variance of price indexes that it does for the variance of prices, we
can conclude that households are all approximately equally good at taking advantage of
temporary sales. In contrast, since the variance of the store-good component is important
for both price index and price dispersion, we can conclude that there are households who


                                               3
are significantly better than others at choosing which goods to buy from which stores in
order to minimize their expenditures.

We conclude the paper by identifying some of the characteristics of the households who
pay lower prices. We find that household price indexes decline monotonically with age:
the average price index for households older than 55 is between 3.5% and 4.5% lower than
the average price index of households younger than 25. We also find that households with
more non-employed members pay less for the same basket of goods than households whose
members are all employed: the average price index for non-employed households is between
1% and 4.5% lower than the price index for employed households. Since older households
and non-employed households are likely to have a lower opportunity cost of time, the findings
support the view that time may be a key input into the process of finding lower prices.

Our paper contributes a systematic analysis of price dispersion to a literature that has
mostly focused on case studies. For example, Sorensen (2000) analyzed the features of
the distribution of prices posted by different pharmacies for several drugs in two cities in
upstate New York. Hong and Shum (2006) documented the distribution of prices posted by
online booksellers for four academic textbooks. Moraga-González and Wildenbeest (2008)
documented the distribution of prices posted by online sellers for several computer memory
chips. Woodward and Hall (2012) documented price dispersion for mortgage brokerage
services. Galenianos et al. (2012) documented and interpreted price dispersion for several
illegal drugs. Other case studies of price dispersion are reviewed by Baye et al. (2006).
While these case studies are methodologically important, they do not provide a general
view of the shape and structure of price dispersion in the retail sector.

There are much fewer large-scale studies of price dispersion. A recent and important excep-
tion is Eden (2013) who uses transaction data from several supermarket chains in Chicago
to relate the extent of price dispersion to characteristics of the goods such as the volatility
of demand for the good, the expensiveness of the good and the share of revenues associated
with sales of the good. This study is a natural complement to ours, which is more focused
on the ‘typical’ shape and structure of price dispersion.

Our paper also contributes to a recent strand of literature documenting that different people
pay different prices to achieve the same level of consumption. This literature was initiated
by Aguiar and Hurst (2005) who observed that the difference in food consumption between
retired and non-retired people is significantly smaller than the difference in food expendi-
tures because retired people use home production to achieve more consumption per dollar of
food expenditures. In follow-up work, Aguiar and Hurst (2007) used a subset of the KNCP

                                              4
dataset to show that household price indexes decline with age. Our paper extends the find-
ings in Aguiar and Hurst (2007) by showing that household price indexes are also lower for
non-employed households than for employed households. Moreover, our paper documents
the shape and structure of the overall dispersion in household’s price indexes. We use these
findings in a related paper (Kaplan and Menzio, 2013) to show that differences in shopping
behavior between employed and unemployed buyers can be so strong as to generate multiple
equilibria associated with different levels of employment and economic activity.



2     Kilts-Nielsen Consumer Panel Data

2.1     The data

The KNCP is a panel dataset that tracks the shopping behavior of approximately 50,000
households over the period 2004 to 2009. Households in the KNCP are drawn from 54
geographically dispersed markets, known as Scantrack markets, each of which roughly cor-
responds to a Metropolitan Statistical Area (MSA).1 Demographic data on household mem-
bers are collected at the time of entry into the panel, and are then updated annually through
a written survey that takes place during the fourth quarter. The collected information in-
cludes age, education, marital status, employment, type of residence and race.2

Households in the panel provide information about each of their shopping trips using a
Universal Product Code (UPC), i.e. barcode, scanning device provided by Nielsen. When
a panelist returns from a shopping trip, he uses the device to enter details about the trip,
including the date and store where the purchases were made. The panelist then scans the
barcode of each purchased good and enters the number of units purchased. The price of the
good is recorded in one of two ways, depending on the store where the shopping took place.
If the good was purchased at a store that is covered by Nielsen, the price is set automatically
to the average price of the good at the store during the week when the purchase was made.
     1
       Table A.1 in Appendix A lists the 54 Scantrack markets, together with the fraction of observed ex-
penditure that comes from each market. Six markets contain more than one MSA (Buffalo-Rochester,
Hartford-New Haven, New Orleans-Mobile, Oklahoma City-Tulsa, Raleigh-Durham and Salt Lake City-
Boise) and one MSA is made up of three Scantrack markets (New York City). Our analysis uses data from
all 54 markets from 2004 to 2009. However, for illustrative purposes, and because of the sheer magnitude
of the number of transactions in the dataset, we will return throughout the paper to one example market,
Minneapolis, in one quarter, 2007:Q1.
     2
       Einav et al. (2010), Handbury (2012) and Bronnenberg and Shapiro (2013) also use the KNCP. In
their analysis of the shopping behavior of retired households, Aguiar and Hurst (2007) use a smaller version
of the KNCP that covers only one market.

                                                     5
If the good was purchased at a store that is not covered by Nielsen, the price is directly
entered by the panelist. Panelists are also asked to record whether the purchased good was
on one of four types of deals: (i) store feature, (ii) store coupon, (iii) manufacturer coupon,
(iv) other deal. If the deal involved any type of coupon, the panelist is prompted to input
its value.3

Nielsen offers Households a variety of incentives to join the panel and stay active. These
include monthly prize drawings, gift points for weekly transmission of data and regular
sweepstakes. Nielsen maintains a purchasing threshold, based on household size, that is
used to filter out households who are poor reporters and thus could bias results. The
KNCP data contain only actively reporting households who meet this threshold over a 12-
month period. This yields an annual retention rate for panelists of approximately 80%.4
New households are regularly added to the panel to replace attritting households. Nielsen
uses a stratified sampling design to ensure that the panel is demographically balanced.
Projection weights are constructed by Nielsen to make the sample representative of the US
population. We apply these weights in all our analyses.5

The products purchased by panelists are identified by their UPC, of which there are around
1.4 million in the database.6 These are grouped into 1, 082 product modules, which are
grouped into 113 product groups, which are then grouped into 10 departments. For each
UPC, the data contain information on a number of product characteristics: brand, size,
packaging, and a rich set of product features. The particular features that are recorded differ
by product module and depend on the nature of the product.7 The full set of departments,
together with the number of product groups, product modules and UPC’s contained in each,
is listed in Table A.2 in Appendix A. As an illustrative example, Table A.2 also reports
the number of different UPC’s purchased from each department in Minneapolis in 2007:Q1,

    3
      Starting in 2007 and continuing to 2008-09 the fraction of transactions that were recorded with a
deal (predominantly a store feature) declined sharply (from 30% to 24%). This change was due to a new
method of capturing deals on newer devices that were given to incoming panelists. We have verified that
our findings are not affected by this change.
    4
      Approximately 20% of panelists are present for all 6 years, with a median duration of 3 years.
    5
      Sample weights are based on the following demographic characteristics: household size, household
income, household head age, education, race, and occupation, and presence of children.
    6
      The KNCP data also include information on transactions for goods without barcodes (magnet trans-
actions). We exclude these goods from our analysis since they are recorded for only a small non-random
subset of households in the panel.
    7
      For example, the Catsup product module which contains Heinz Ketchup (a product we describe in
detail in Section 3.1), has information on the following product features: size, type of container, type
(regular vs light vs low fat etc), style (regular vs fancy vs hot & spicy vs zesty garlic vs onion etc), whether
organic.

                                                       6
and the fraction of overall expenditure coming from each department.8

The transactions in the KNCP data involve purchases from a variety of different types of
retailers. About half of all expenditure comes from retailers in the Grocery category, and
about a third come from the Discount and Warehouse Club categories. The breakdown of
expenditures by retailer is possible because the KNCP data contain retailer identifiers for
every transaction. Moreover, for approximately one-third of all transactions, the data also
contain identifiers for the store (within the retail chain) where the transaction took place.
Since we are interested in assessing the fraction of price dispersion due to differences in the
average prices of different stores, we only use transactions for which the store identifier is
present.9


2.2     Defining a good

We use the KNCP data to measure the extent of price dispersion, i.e. the variation in the
prices at which the same good is traded in a given market and time period; and to measure
the extent of household price index dispersion, i.e. the variation in the average price paid
for the same basket of goods by different households in a given market and time period. In
order to carry out these measurements, we first need to define a good.

A natural starting point is to define a good by its UPC. However, there are reasons to group
products with different UPCs together and define them as the same good. First, the same
product may be given two or more UPCs for purely administrative reasons. Second, there
may be different products that have different UPCs but that are very close substitutes from
the perspective of buyers. Consider the following examples. (i) Bottles of ketchup that

   8
      Nielsen estimates that approximately 30% of household consumption is accounted for by consumer
panel data categories. Broda and Parker (2012) compared weekly spending in the KNCP and the CEX.
They found that the KNCP has about 30% of the expenditure of the CEX for a broad measure of non-
durables, and about 20% of the expenditures in the CEX across all consumption categories.
    9
      Table A.3 in Appendix A reports the fraction of expenditure coming from each type of retailer in
2007:Q1, and the fraction of expenditure coming from each type of retailer in 2007:Q1 for the subset of
transactions with store identifiers. We cannot guarantee that the set of transactions for which we observe
store identifiers is a random subset of all transactions. However, some of our calculations, such as measuring
the overall amount of price dispersion in Section 3.2, do not require us to observe identifiers for individual
stores. For these calculations we have repeated the analysis using the full set of transactions and have
found virtually identical results. Although the KNCP data do not technically distinguish prices entered by
the panelist from those that come from point-of-sale data, we believe that the “covered” stores from which
Nielsen obtains point-of-sale price data are the same stores that have unique store identifiers. Since we
restrict attention to these stores, we believe that the transactions included in our analysis mostly pertain
to point-of-sale prices.

                                                      7
are produced by the same manufacturer may be sold by different retailers under different
generic brands and have different UPCS. Yet, these bottles of ketchup are likely to be perfect
substitutes for buyers. (ii) Bottles of ketchup of different brands have different UPCs, but
are likely to be very close substitutes for buyers. (iii) Bottles of ketchup of different sizes
have different UPCs, but are also very likely to be close substitutes for buyers.

Based on the above observations, we consider the following four definitions of a good, in
order from narrowest to broadest.

UPC According to this definition, a good is the set of products with the same UPC.

Generic Brand Aggregation According to this definition, a good is the set of products
    that share the same features, the same size and the same brand, but may have different
    UPC’s. Since the KNCP assigns the same brand code to all generic brands (regardless
    of the retailer), this definition collects all generic brand products that are otherwise
    identical.

Brand Aggregation According to this definition, a good is the set of products that share
    the same features and the same size, but may have different brands and different
    UPCs.

Band and Size Aggregation According to this definition, a good is the set of products
    that share the same features but may have different sizes, different brands and different
    UPCs. Notice that for the first three definitions prices are defined per unit of the good
    (e.g., the price of a 36oz bottle of ketchup), while for this definition prices must be
    defined per unit of measure (e.g. ounces, feet etc).

Table 1 reports the total number of goods in the KNCP database according to each defini-
tion, as well as the actual number of goods for which we observe a transaction in Minneapolis
in 2007:Q1.

When goods are defined by their UPC, there are 1, 424, 453 goods in the KNCP database,
of which we observe 36, 104 goods purchased in Minneapolis in 2007:Q1. The Generic
Brand Aggregation reduces the number of goods in the KNCP database by 43% and the
number purchased in Minneapolis in 2007:Q1 by 16%. The Brand Aggregation reduces the
number of goods in the KNCP database by an additional 26% and the number purchased
in Minneapolis 2007:Q1 by an additional 17%. Finally, the Brand and Size Aggregation



                                              8
                                   Table 1: Definitions of a good

 Definition                             Number of Products               Characteristics Held Fixed
                                                    sold in                                   Other
                                    in database                         UPC Brand Size
                                                Mpls, 2007:Q1                                Features

 Department                               10               10
 Product Group                           113               113
 Product Module                         1,082              939

 Four definitions of a good:
 Brand & Size Aggregation             273,452            17,108                                       X
 Brand Aggregation                    606,969            25,201                             X         X
 Generic Brand Aggregation            817,483            30,446                    X        X         X
 UPC                                 1,424,453           36,104           X        X        X         X

Notes: Number of products sold in Minneapolis in 2007:Q1 refers only to transactions at stores
with a store identifier.

reduces the number of goods in the KNCP database by an additional 55% and the number
purchased in Minneapolis in 2007:Q1 by an additional 32%.

Since we wish to remain agnostic over which is the most appropriate definition, we will
measure price dispersion and price index dispersion for all four definitions. In cases where
reporting results from more than one definition would unnecessarily hinder the presentation,
we will use the Generic Brand Aggregation definition as a benchmark.10


2.3     Data organization and selection

For a given definition of a good, we organize the data by goods (denoted by j) and shopping
trips (denoted by k). Each shopping trip is characterized by the household that went
shopping i (k), the market in which the household resides m (i (k)), the quarter in which
the shopping trip took place t (k), the store that was visited s (k), and the retail chain
to which the store belongs r (k). We define qj,k as the quantity of good j purchased on
shopping trip k and Pj,k as the unit price paid for the good.

In order to compare price distributions for different goods, and to compare price distribu-
tions for the same good in different markets and quarters, we need to normalize prices. We
  10
     In preliminary work, we have also considered other definitions of good (for example, aggregating sizes
but not brands) and obtained similar findings.

                                                    9
define the normalized price pj,k for good j on shopping trip k as the ratio between the price
of the good in that shopping trip, Pj,k , and the average price of the good in all shopping
trips that took place in the same market and quarter. Formally, pj,k is given by

                                                   Pj,k
                                      pj,k ≡                   ,                            (1)
                                               P j,m(k),t(k)
where P j,m,t is given by                       X
                                                         Pj,k qj,k
                                               j,k∈m∩t
                                   P j,m,t ≡       X                 ,                      (2)
                                                           qj,k
                                                 j,k∈m∩t

and the notation k ∈ m ∩ t refers to {k : t (k) = t, m (i (k)) = m}, i.e. the set of shopping
trips that took place in market m in quarter t.

We impose some selection criteria on transactions and goods. First, to ensure that we have
a reliable estimate of the price distribution for each good, we only include a good j in
a market m and quarter t if we observe a minimum number of transactions, n. For our
baseline analysis we set n = 25, but we have also repeated the analysis for n ∈ {15, 50},
and obtained similar results.

Second, in order to limit the possibility that the three broader definitions of a good introduce
some misclassification error (perhaps due to unobserved product features or errors in the
size information), we drop all goods in a given market m and quarter t for which the amount
of price dispersion is unreasonably large. We set the threshold at a coefficient of variation
greater than 1. In our experience, misclassification occurs infrequently, and generates very
large measured price dispersion.

Third, in order to avoid the possible influence of a small number of outliers on measured
price dispersion, we drop all transactions in which the recorded price is zero. Although some
transactions with zero price are indeed valid (e.g. store freebies or manufacturer coupons),
the KNCP data do not distinguish between valid zero price transactions and transactions
for which price data was not available. Similarly, we exclude all transactions involving a
coupon whose value is more than 90% of the gross price. We have experimented with setting
this threshold at 50%, and with excluding transactions with coupons altogether.




                                                10
3     Price dispersion

In this section, we document the extent of price dispersion and how it varies across goods,
markets and time. We then describe and implement a decomposition of the variance of
prices into store, good and transaction components, and discuss the implications of our
decomposition for existing theories of price dispersion. For the sake of concreteness, we first
illustrate price dispersion for one particular good, in one particular market and quarter.


3.1    An example: Heinz ketchup

As an illustrative example, we take 36oz plastic bottles of Heinz ketchup purchased in
Minneapolis in 2007:Q1. Heinz ketchup is part of the Catsup product module, which is one
of 34 product modules in the Condiments, Gravies and Sauces product group, which is one
of 38 product groups in the Dry Grocery department.

In Minneapolis in 2007:Q1, we observe 279 transactions for 36oz plastic bottles of Heinz
ketchup. Figure 1a shows the distribution of prices across these 279 transactions. The
lowest price in the distribution is 50 cents. The highest price in the distribution is $2.99,
which is six times larger than the lowest price. The median price is $1.66, which is more
than three times larger than the lowest price and roughly half of the highest price. The
coefficient of variation of prices is 23%. Since all 36oz plastic bottles of Heinz ketchup have
the same UPC, they represent the same good according to the UPC definition. Since there
are no other products with the same product features, size and brand, 36oz plastic bottles
of Heinz ketchup also represent a single good according to the Generic Brand Aggregation
definition. Hence, the price distribution in Figure 1a applies to the two narrowest definitions
of a good.

According to the Brand Aggregation definition of a good, 36oz plastic bottles of Heinz
ketchup constitute a good together with 36oz plastic bottles of ketchup from other brands.
In Minneapolis in 2007:Q1, these include Frank’s and Hunt’s, plus 9 generic brands. Figure
1b shows the distribution of prices for 36oz plastic bottles of ketchup of all these brands.
Compared to the distribution in 1a there is more price dispersion: the coefficient of variation
is 27%, the lowest price is 39 cents and the highest price is $2.99.

According to the Brand and Size Aggregation definition of a good, 36oz plastic bottles of
Heinz ketchup constitute a good together with other size plastic bottles of ketchup from
both Heinz and other brands. In Minneapolis in 2007:Q1, we observe transactions for 53

                                              11
                                      Figure 1: Distribution of prices for a 36oz bottle of Heinz ketchup
                             (a) UPC and Generic Brand Aggregation                                                                                                           (b) Brand Aggregation
              100




                                                                                                                                           100
                        80




                                                                                                                                                     80
 Number of transactions




                                                                                                                              Number of transactions
               60




                                                                                                                                            60
    40




                                                                                                                                 40
              20




                                                                                                                                           20
              0




                                                                                                                                           0
                             0   .5   1   1.5   2    2.5                           3        3.5       4     4.5       5                                   0         .5       1         1.5       2    2.5    3   3.5   4   4.5   5
                                                    Price                                                                                                                                            Price



                                                                                       (c) Brand and Size Aggregation
                                                                 5.0e+05
                                                     2.0e+05 3.0e+05 4.0e+05
                                                    Number of transactions
                                                                 1.0e+05
                                                                 0




                                                                               0       .5         1       1.5     2       2.5                         3       3.5        4       4.5         5
                                                                                                                          Price



Notes: Figures show distribution of transaction prices for ketchup in Minneapolis in 2007:Q1. Panel
(a) shows prices for 36oz bottles of Heinz brand ketchup, in accordance with the UPC and Generic
Brand Aggregation definitions of a good. Panel (b) shows prices for 36oz bottles of ketchup from
all brands, in accordance with the Brand Aggregation definition of a good. Panel (c) shows prices
per 36 ounces of ketchup for bottles of ketchup from all brands in all sizes, in accordance with
the Brand and Size Aggregation definition of a good. Transactions include those at all stores in
Minneapolis, including stores without a unique identifier.




                                                                                                                      12
                       Table 2: Average statistics of price distribution

                            Aggregation     Generic Brand       Brand         Brand & Size
                               UPC           Aggregation      Aggregation     Aggregation
                                (1)              (2)              (3)             (4)

      Standard deviation        0.19             0.21             0.25             0.36
      90-10 Ratio               1.72             1.79             2.04             2.61
      90-50 Ratio               1.26             1.29             1.38             1.55
      50-10 Ratio               1.35             1.38             1.46             1.64

Notes: All statistics are expenditure weighted across goods, markets and quarters. Sample includes
only transactions at stores with unique identifiers for goods/markets/quarters with at least 25
transactions and coefficient of variation less than 1.

such ketchup bottles spanning 12 brands and 13 sizes. Figure 1c shows the distribution of
prices for bottles of ketchup of all brands and sizes. Compared to the distribution in Figure
1b there is even more price dispersion: the coefficient of variation is 29%, the lowest price
is 1.08 cents per ounce (equivalent to 39 cents for a 36oz bottle) and the highest price is
13.96 cents per ounce (equivalent to $5.03 for a 36oz bottle).


3.2     Measuring price dispersion

The amount of variation in the prices of ketchup bottles is rather typical of the goods in our
dataset. We compute statistics of the normalized transaction price distribution separately
for every good j in every market m and quarter t. The expenditure weighted averages
of these statistics (across goods, markets and quarters) are reported in Table 2. When
goods are defined according to their UPC, the average standard deviation of prices is 19%,
the average 90-10 percentile ratio is 1.72, the average 90-50 percentile ratio is 1.26 and
the average 50-10 percentile ratio is 1.35. These numbers reveal that there is substantial
dispersion in the price at which the same good is sold in a given market and quarter.
Moreover, the similarity of the average 90-50 ratio and the average 50-10 ratio implies that
price distributions are roughly symmetric. Hence the price dispersion that we observe is not
driven by a small number of very low-priced transactions, for example due to temporary
sales.
As we consider broader definitions of a good, the amount of price dispersion increases. The
second, third and fourth columns of Table 2 show that the average standard deviation of
prices increases to 21% when we aggregate products with different generic brands, to 25%

                                               13
when we aggregate products with different name brands, and to 36% when we aggregate
products with different brands and sizes. Similarly, the average 90-10 percentile ratio in-
creases to 1.79 when we aggregate products with different generic brands, to 2.04 when
we aggregate products with different name brands and rises to 2.61 when we aggregate
products with different brands and sizes.

In Figure 2 we illustrate the average price distribution for each definition of a good, by
plotting the distribution of normalized prices across all markets, goods and quarters. The
figure reveals several features of the shape of a ‘typical’ price distribution. First, for all
definitions of a good, the price distribution has a unique mode that is very close to its
mean. Second, for all definitions of a good, the price distribution is very close to symmetric.
Third, for all definitions of a good, the price distribution has more mass around the mean
and has thicker tails than a Normal distribution with the same mean and variance, i.e. the
typical price distribution is leptokurtic.

We saw in Table 2 that, on average, there is substantial dispersion in the prices paid for
the same good in a particular market and quarter. Figure 3a plots the distribution of the
standard deviation of prices across different goods, markets and quarters, and reveals that
there is also significant heterogeneity in the extent of price dispersion. For example, while
the average standard deviation of prices is 21% for the Generic Brand Aggregation definition,
there are approximately 10% of goods/markets/quarters where the standard deviation of
prices is lower than 10% and there are approximately 10% of goods/markets/quarters where
the standard deviation of prices is greater than 35%.

The heterogeneity in price dispersion across goods, markets and quarters is primarily due
to the fact that price dispersion differs systematically across goods, not because the amount
of price dispersion varies substantially across markets or over time. To illustrate this, the
remaining panels of Figure 3 each show a histogram of the standard deviation of relative
prices across only one of these dimensions. The histograms are plotted on the same scale to
aid comparison. The histograms show that there is little variation in the average over goods
and quarters of the standard deviation of prices in different markets (Figure 3b). There
is also little variation in the average over goods and markets of the standard deviation of
prices in different quarters (Figure 3c). In contrast, there is substantial variation in the
average over markets and quarters of the standard deviation of prices for different goods
(Figure 3d).

It is then natural to ask which goods feature more price dispersion. Figure 4 plots the
average standard deviation of prices for goods in the 10 different departments that Nielsen

                                              14
                                      Figure 2: Average price distribution
                         (a) UPC                                               (b) Generic Brand Aggregation
           6




                                                                     5
                                                                     4
           4




                                                                     3
 Density




                                                           Density
                                                                     2
           2




                                                                     1
           0




                                                                     0


               0    .5           1           1.5      2                    0        .5           1           1.5   2
                          Normalized Price                                                Normalized Price



                   (c) Brand Aggregation                                       (d) Brand and Size Aggregation
           3




                                                                     2
                                                                     1.5
           2
 Density




                                                           Density
                                                           1
           1




                                                                     .5
           0




                                                                     0




               0    .5           1           1.5      2                    0        .5           1           1.5   2
                          Normalized Price                                                Normalized Price



Notes: Figures plot average distribution of normalized prices across all goods, markets and time
periods, for different definitions of a good. All distributions are expenditure weighted. Overlaid
curve is the density of a normal distribution with the same mean and variance. Sample includes
only transactions at stores with unique identifiers for goods/markets/quarters with at least 25
transactions and coefficient of variation less than 1.




                                                      15
     Figure 3: Distribution of standard deviation of prices across goods, markets and time
                        (a) Overall distribution                                                   (b) Distribution across markets




                                                                                      .5
      .1
      .08




                                                                                      .4
        .06




                                                                                         .3
 Fraction




                                                                                 Fraction
      .04




                                                                                      .2
      .02




                                                                                      .1
      0




                                                                                      0




              0   .1   .2   .3        .4      .5       .6    .7   .8   .9   1                 0   .1     .2   .3        .4      .5       .6    .7   .8   .9   1
                                 St. dev. of relative prices                                                       St. dev. of relative prices



                       (c) Distribution over time                                                      (d) Distribution across goods
                                                                                      .2
      1
      .8




                                                                                      .15
         .6
 Fraction




                                                                                 Fraction
                                                                                   .1
      .4




                                                                                      .05
      .2
      0




                                                                                      0




              0   .1   .2   .3        .4      .5       .6    .7   .8   .9   1                 0   .1     .2   .3        .4      .5       .6    .7   .8   .9   1
                                 St. dev. of relative prices                                                       St. dev. of relative prices



Notes: Figures refer to generic brand aggregation definition of a good. All distributions are
expenditure weighted. Sample includes only transactions at stores with unique identifiers for
goods/markets/quarters with at least 25 transactions and coefficient of variation less than 1.




                                                                            16
               Figure 4: Average standard deviation of prices by department

                          GENERAL MERCHANDISE

                          HEALTH & BEAUTY CARE

                                         MEAT

                                     NON-FOOD

                               FRESH PRODUCE

                                       FROZEN

                                 DRY GROCERY

                                          DELI

                                        DAIRY

                          ALCOHOLIC BEVERAGES

                                                 0    .1   .2   .3     .4


Notes: Figure shows expenditure weighted average standard deviation of prices, across all markets
and time periods, for goods in each department. Sample includes only transactions at stores
with unique identifiers for goods/markets/quarters with at least 25 transactions and coefficient of
variation less than 1.

uses to classify products. The two departments with the highest standard deviation of prices
are General Merchandise (41%) and Health and Beauty Care (29%). The two departments
with the lowest standard deviation of prices are Alcoholic Beverages (8%) and Dairy (17%).


3.3    Deconstructing price dispersion

Consider two of the 36oz bottles of Heinz ketchup that were purchased in Minneapolis in
2007:Q1. The difference in prices between these two bottles of ketchup may have originated
from three conceptually different sources of price dispersion. First, there may be differences
across stores in the average price of goods. If so, the two bottles of ketchup may have
traded at different prices because one was purchased at a relatively cheap store and one at
a relatively expensive store. Second, there may be heterogeneity in the relative prices of
different goods within stores. If so, the two bottles of ketchup may have traded at different
prices because they were purchased at two different, but equally expensive, stores. This
could happen if one of those stores charges a relatively low price for ketchup (offset by a
relatively high price for some other products), and the other store charges a relatively high
price for ketchup (offset by a relatively low price for some other products). Third, the two
bottles of ketchup may have been purchased at exactly the same store, but at different
prices. This could happen either because one of the bottles was purchased on a day during


                                                     17
the quarter when Heinz 36oz bottles of ketchup were on a temporary sale, or because one
of the bottles was purchased with a coupon. The KNCP data contain information on the
transaction prices for different goods at the same store and on the transaction prices for the
same good at different stores, in a given market and quarter. This allows us to decompose
the observed price dispersion into these three sources of variation.
To formalize our decomposition of price dispersion, we require some additional notation.
First, let µj,m,t denote the quantity-weighted average of the normalized prices for good j in
market m and quarter t. Formally, µj,m,t is defined as
                                                       X
                                                              pj,k qj,k
                                                   k∈m∩t
                                       µj,m,t =            X                 .             (3)
                                                                qj,k
                                                       k∈m∩t


Note that µj,m,t is always equal to 1 because the prices pj,k are defined as the actual prices
relative to the quantity-weighted average price of good j in market m and quarter t.
Second, let µj,s,t denote the quantity-weighted average of the normalized prices for good j
at store s in quarter t. Formally, µj,s,t is defined as
                                                       X
                                                             pj,k qj,k
                                                   k∈s∩t
                                        µj,s,t =        X                .                 (4)
                                                               qj,k
                                                       k∈s∩t


Third, we denote the revenue-weighted average of the price of the different goods sold at
store s by as µs,t . Formally, µs,t is defined as
                                                X
                                                       µj,s,t Rj,s,t
                                                   j
                                       µs,t =          X                 ,                 (5)
                                                            Rj,s,t
                                                       j


where the revenue, Rj,s,t , is defined by
                                                       X
                                       Rj,s,t =              Pj,k qj,k .                   (6)
                                                   k∈s∩t


Using the above definitions, we can decompose any normalized price as

                pj,k = µj,m,t + (µs,t − µj,m,t ) + (µj,s,t − µs,t ) + (pj,k − µj,s,t ) ,   (7)

                                                       18
where it is implicit that the market m and store s refer to m (i (k)) and s (k) respectively,
i.e. the market and store corresponding to shopping trip k.

The first term on the right-hand side of (7) is the average price of good j in market m
and quarter t. The second term on the right-hand side of (7) is the difference between the
average price of store s and the average price of good j. This term measures the component
of the price pj,k that is due to the expensiveness of the store where the good was purchased.
We refer to this as the store component of the price. The third term on the right-hand
side (7) of is the difference between the average price of good j at store s and the average
price of store s. This term measures the component of the price pj,k that is due to the
expensiveness of good j relative to other goods at store s. We refer this as the store-specific
good component of the price. The last term on the right-hand side of (7) is the difference
between the price pj,k and the average price of good j at store s. This term measures the
component of the price pj,k that is due to the expensiveness of the particular transaction
relative to the average expensiveness of good j at store s. We refer to this as the transaction
component of the price.

The decomposition in (7) is exact. Therefore, the variance of normalized transaction prices
for good j in market m and quarter t must equal the sum of the variances of the store
component, the store-specific good component and the transaction component, and the
covariances between these three components. In Appendix B we show that the covariance
between the store and transaction components, and the covariance between the store-specific
good and transaction components are always equal to zero. Empirically, the covariance
between the store and store-specific good components is different from zero, but is generally
a negligible component of the overall variance of prices.11

We implement the variance decomposition in (7) separately for each market and quarter,
and we report the average contribution of each component in Panel A of Table 3. For
the Generic Brand Aggregation definition of a good (column 2), the store component ac-
counts for approximately 11% of the variance of prices, the store-specific good component
accounts for approximately 68% of the variance of prices and the transaction component
accounts for approximately 20% of the variance of prices. The covariance between the store
and store-specific good components accounts for only 1% of the variance of prices. For
broader definitions of a good, the variance of prices is larger but the fraction of the variance
accounted for by each component remains relatively constant.
  11
     We refer to quantity-weighted variances. See Appendix B for a full derivation of the variance decom-
position and formulas for the variances of each term.

                                                   19
                      Table 3: Decomposition of the variance of prices

                                    Substitution     Generic          Brand     Brand & Size
                                       UPC          Aggregation     Aggregation Aggregation
                                        (1)             (2)             (3)         (4)

 A: No restrictions
 Store specific component                11%            11%             13%             15%
 Store-good component                    66%            68%             70%             72%
 Transaction component                   21%            20%             19%             23%
 Covar: store, store-good                 2%             1%             -2%             -10%

 B: Restrict to stores/goods with at least 5 transactions
 Store specific component              6%             7%                 8%              8%
 Store-good specific component        24%            30%                38%             40%
 Transaction component                70%            62%                53%             53%
 Covar: store, store-good              -1%            0%                 1%             -2%

 C: Common variance of the transaction component across goods
 Store specific component           11%         11%           13%                       15%
 Store-good component               38%         41%           43%                       31%
 Transaction component              49%         47%           46%                       64%
 Covar: store, store-good            2%          1%           -2%                       -10%

Notes: All statistics are expenditure weighted across goods, markets and quarters. Sample includes
only transactions at stores with unique identifiers for goods/markets/quarters with at least 25
transactions and coefficient of variation less than 1. See text for details of decomposition. May
not add to 100% due to rounding.


The variance decomposition in Table 3 is simply a description of the data and as such is
always valid. However, for matters of interpretation, it is important to keep in mind that
the average price of goods at store s, µs,t , and the average price of good j at store s, µj,s,t ,
are sample averages in the KNCP data, rather than averages in the universe of transactions
at store s. Since the number of observed transactions at a given store is very large, the
sample average price of goods at store s is likely to be a precise estimate of the average price
of goods at store s in the universe of transactions. However, there are several store/good
combinations for which the number of observed transactions is small. For these store/good
combinations, the sample average price of the good at that store is not likely to be a precise
estimate of the average in the universe of transactions.

We employ two alternative approaches to deal with the scarcity of data for some store/good


                                               20
combinations. The first approach is to restrict attention to stores and goods with a mini-
mum number of transactions, which we set at 5.12 The variance decomposition under this
restriction is reported in Panel B of Table 3. For the Generic Brand Aggregation definition
of a good (column 2), the store component accounts for approximately 7% of the variance
of prices, the store-specific good component accounts for approximately 30% of the variance
of prices and the transaction component accounts for approximately 62% of the variance
of prices. The covariance between the store and store-specific good components accounts
for less than 1% of the variance of prices. Consistent with the decomposition in Panel A,
the store component is relatively unimportant for explaining price dispersion. However in
contrast with the decomposition in Panel A, the transaction component is relatively more
important than the store-specific good component.

The second approach that we use to deal with the scarcity of data for some store/good
combinations is to impose structure on the variance of the transaction component of prices.
In particular, we assume that the transaction component of the price for good j at store
s in market m in quarter t is drawn from a distribution with mean zero and variance
 2              2
σj,m,t , where σj,m,t is modeled as the sum of a quarter-specific market effect and a quarter-
specific good department effect. Given this assumption, we can estimate the variance of
the transaction component by pooling data across different stores and goods in the same
market and quarter. We then recover the variance of the store-specific good component
using the fact that
                                                                        2
                           var (µj,s,t − µs,t ) = var (pj,k − µs,t ) − σj,m,t              (8)

The resulting decomposition is reported in Panel C of Table 3. For the Generic Brand Ag-
gregation definition of a good (column 2), the store component accounts for approximately
11% of the variance of prices, the store-specific good component accounts for approximately
42% of the variance of prices and the transaction component accounts for approximately
46% of the variance of prices. The covariance between the store and store-specific good
components accounts for 1% of the variance of prices. Consistent with the decomposition
when we restrict attention to store/good combinations with at least 5 transactions (Panel
B), the store component is relatively unimportant for explaining price dispersion and the

   12
      Note that since we compute the decomposition separately for each good, market and quarter, and
report the expenditure weighted averages, the decomposition without any restrictions already weights more
heavily the goods, markets and quarters for which we observe more transactions. In addition, in all of these
analyses we have already restricted attention to goods, markets and quarters with at least 25 transactions
(spread across all stores). We have also repeated the decomposition using a minimum of 10 transactions
and found similar qualitative results.

                                                    21
            Figure 5: Price decomposition for Ketchup in Minneapolis, 2007:Q1




                         .5
                         .4
                         .3
                         .2
                         .1
                         0
                         -.1
                         -.2
                         -.3
                         -.4
                         -.5




                                            Store        WithinStore



Notes: Figure shows 107 transactions for 36oz plastic bottles of Heinz ketchup in Minneapolis in
2007:Q1. Includes only transactions at stores with a unique store identifier.

transaction component is somewhat more important than the store-specific good compo-
nent.
The results from our decomposition of the variance of prices can be summarized as follows.
The store component explains approximately 10% of the overall variance of prices while the
sum of the store-specific good component and the transaction component, which we refer to
as the within-store component of the price, accounts for approximately 90% of the overall
variance of prices. The contribution of the store-specific good component varies between
30% and 70%, depending on the definition of a good, on the selection criteria for the data,
and on the assumptions about the variance of the transaction component. Conversely, the
contribution of the transaction component varies between 20% and 60%.
Perhaps, the most striking finding from our decomposition is that the store component
explains very little of the overall variance of prices. To illustrate this result more concretely,
Figure 5 decomposes the price of every transaction for 36oz plastic bottles of Heinz ketchup
in Minneapolis in 2007:Q1. The transactions are ordered from cheapest to most expensive.
For each transaction, the darker green bar measures the store component of the price,
µs,t − µj,t , while the lighter orange bar measures the within-store component of the price,
pj,k − µs,t . From Figure 5, it is evident that the difference in the expensiveness of the stores
where each bottle of ketchup was purchased accounts for very little of the overall dispersion
in prices. Instead, the dispersion in prices is mostly accounted for by the fact that the same
bottle of ketchup is sold at vastly different prices either at different stores that are equally
expensive, or at the very same store on different days or in different transactions on the

                                                    22
                       Figure 6: Store component vs normalized price




Notes: Figure plots the normalized price minus µj,m,t against the store component of the price for
all transactions involving goods that are purchased at least 5 stores, in all markets in 2007:Q1.
Approximately 0.3% of transactions are truncated so as stay in the range [-1,2].


same day.

To illustrate further the relative importance of the within-store component of prices, and
the relative unimportance of the store component of prices, Figure 6 shows a scatter plot
of all the transactions that took place in the first quarter of 2007. Each point in the plot
represents a transaction. The horizontal axis measures the store component of the price at
which the transaction was executed, µs,t . The vertical axis measures the normalized price
for the transaction relative to the average normalized price for that good, pj,k − µj,m,t . If all
price dispersion was due to differences in the expensiveness of stores, all points would lie
on the 45 degree line. In contrast, if all price dispersion was due to differences in prices at
equally expensive stores, all points would lie on a vertical line passing through the origin.
The fact that the points are much more dispersed around the 45-degree line than they
are along the vertical line passing through the origin clearly illustrates the fact that price
dispersion arises because, at stores that are equally expensive, there are goods that are sold
at very high prices (relative to the market average) and there are goods that are sold at
very low prices (relative to the market average). In turn, this implies that the set of goods
that are sold at low and high prices must vary across stores that are equally expensive.




                                               23
3.4    Price dispersion: evidence and theory

Our decomposition of the variance of prices for identical goods allows us to assess the relative
importance of four popular explanations for the existence of price dispersion in product
markets: (i) amenities; (ii) heterogeneous costs; (iii) intertemporal price discrimination;
and (iv) search frictions.


Amenities

According to the amenity theory of price dispersion, product markets are frictionless in
the sense that buyers know all sellers’ prices and are free to purchase from any seller. Yet
identical goods sell at different prices because they are bundled with different amenities in
different transactions. For example, an identical bottle of ketchup will be sold at a higher
price at a store with convenient parking or a high cashier-customer ratio, and at a lower
price at a store without convenient parking or with a low cashier-customer ratio.
Since amenities are typically a feature of a store (e.g. the location of the store, the quantity
and quality of the sales staff, the presence of convenient parking, etc. . . ), high-amenity
stores will charge relatively high prices for all goods, while low-amenity stores will charge
relatively low prices for all goods. Moreover, if the extent to which customers enjoy the
amenities of a store is roughly proportional to the value of the goods that they purchase
at that store, the ratio between the price of a good at a high-amenity store and a low-
amenity store should be approximately the same for all goods. Under this assumption,
the variance of prices caused by differences in amenities should be mostly accounted for
by the store component of prices. Table 3 shows that the variance of the store component
of prices accounts for at most 15% of the overall variance of prices. Thus, differences in
amenities are not likely to be a quantitatively important source of price dispersion. This is
the same conclusion that Sorensen (2000) reaches by analyzing the variation in retail prices
for prescription drugs across 20 pharmacies in two towns in upstate New York.
Table 4 shows that differences in amenities are not even likely to account for all of the small
variance of the store component of prices. The table reports the annual transition rates
across quartiles of the distribution of estimated store prices. Specifically, the entry in row i
and column j is the fraction of stores in the i-th quartile of the distribution of store prices
in quarter t, µs,t , whose average price one year later µs,t+4 is in the j-th quartile of the
store price distribution in quarter t + 4. Since most amenities are associated with persistent
features of a store (location, parking, staff quality, etc. . . ), if the store component reflects

                                               24
                           Table 4: Transition matrix of store prices

                                                    Quartile
                       Quartile       Bottom     X2ndX X3rdX          XTopX

                       BottomXX         42%        24%       15%        19%
                       2nd              20%        37%       27%        16%
                       3rd              12%        26%       39%        23%
                       Top              18%        18%       27%        37%

Notes: Table shows the fraction of stores transiting across quartiles of the distribution of estimated
store prices.


mostly amenities then the average price of the store should be persistent over time. Table
4 shows that this is not the case. Indeed, 19% of the stores whose price is in the bottom
quartile in a given quarter are in the top quartile of the store price distribution one year
later. Similarly, 18% percent of the stores whose price is in the top quartile in a given
quarter are in the bottom quartile of the store price distribution one year later. Overall,
the annual rank autocorrelation for stores prices µs,t is only 25%.

The above discussion rests on the assumption that the extent to which customers enjoy
the amenities of a store is proportional to the value of the goods that they purchase at
the store. If this assumption does not hold, then the ratio between the price of a good
at a high-amenity store and a low-amenity store may vary across goods. In this case the
price dispersion that arises due to differences in amenities would be accounted for by both
the variance of the store component and the variance of the store-specific good component.
However, even if this were the case, high-amenity stores would charge higher prices than
low-amenity stores for all goods. But Figure 6 shows that this is far true in our data.
Indeed, stores that are more expensive than average (i.e. they are towards the right on the
horizontal axis) sell many goods at below-average prices (i.e. goods that are below zero
on the vertical axis) and, conversely, stores that are less expensive than average sell many
goods at above-average prices.


Heterogeneous costs

According to this theory, identical goods are traded at different prices because they are sold
by local monopolists who face different marginal costs (see, e.g., Golosov and Lucas (2007)).
For example, an identical bottle of ketchup will be sold at a higher price by a monopolist


                                                 25
who faces a higher wholesale price or a higher cost of storage, than by a monopolist who
faces a lower wholesale price or a lower cost of storage.

It seems natural to think that differences in marginal costs arise mostly because different
sellers pay different prices in the wholesale market. Since differences in wholesale prices
across sellers may vary across goods, heterogeneity in marginal costs could account for both
the variance of the store component of prices and the variance of the store-specific good
component of prices. This amounts to a sizable fraction of the overall variance of prices.
However, such a conclusion would overstate the importance of heterogeneity in marginal
costs since sellers that are part of the same retail chain typically bargain collectively with
wholesalers and so should face the same wholesale prices and thus similar marginal costs.
Therefore, heterogeneity in marginal costs can explain at most the variance of the compo-
nents of prices that are common to all sellers in the same retail chain.

The KNCP data allow us to decompose each transaction price into a retailer component, a
retailer-specific store component, a retailer-specific good component and a residual compo-
nent. Formally, we decompose any normalized price pj,k as

                 pj,k = µj,m,t + (µr,m,t − µj,m,t ) + (µs,t − µr,m,t )
                          + (µj,r,m,t − µr,m,t ) + (pj,k − µs,t − µj,r,m,t + µr,m,t )        (9)


where µj,m,t is the average price of good j in market m in quarter t, µs,t is the average price
of goods at the store s (k), µr,m is the average price of goods at stores in market m (i (k))
that belong to the retail chain r (k), and µj,r,m,t is the average price of good j at stores in
market m (i (k)) that belong to retail chain r (k).

The first term on the right-hand side of (9) is the market average price of good j. The
second term on the right-hand side of (9) is the difference between the average price of
retail chain r in market m and the average price of good j in market m. We refer to this
as the retailer component of the price. The third term on the right-hand side of (9) is the
difference between the average price of store s in retail chain r and the average price of retail
chain r in market m. We refer to this as the retailer-specific store component of the price.
The fourth term on the right-hand side of (9) is the difference between the average price
of good j at retail chain r in market m and the average price of retail chain r in market
m. We refer to this as the retailer-specific good component of the price. The fifth term on
the right-hand side of (9) is a residual component. The components of the price that are
common to all retailers in the same chain are the retailer component and the retailer-specific

                                                26
                   Table 5: Decomposition of variances of prices by retailer

                                      Substitution       Generic         Brand     Brand & Size
                                         UPC            Aggregation    Aggregation Aggregation
                                          (1)               (2)            (3)         (4)

 Retailer specific component              1%               3%                3%               2%
 Retailer-store component                 5%                5%              6%                6%
 Retailer-good component                  7%               13%              14%               10%
 Residual component                       90%              82%              80%               85%
 Covar: retailer, retailer-store          0%                0%              0%                 0%
 Covar: retailer-good, residual           -2%              -3%              -3%               -1%
 Covar: store, store-good                 -1%               0%               1%               -2%

Notes: All statistics are expenditure weighted across goods, markets and quarters. Sample includes
only transactions at stores with unique identifiers for goods/markets/quarters with at least 25 trans-
actions and coefficient of variation less than 1. Sample is further restricted to good/store/quarter
combinations with at least 5 transactions. See text for details of decomposition. May not add to
100% due to rounding.


good component.

Using the identity in (9), we decompose the variance of prices into a retailer component,
a retailer-specific store component, a retailer-specific good component and a residual com-
ponent, and report the results in Table 5.13 The decomposition shows that the retailer
component accounts for less than 3% of the overall variance of prices. A comparison be-
tween Table 5 and Panel B of Table 3 reveals that the fraction of price dispersion that is
accounted for by the retailer component is much smaller than what is accounted for by the
store component of prices. This implies that the average price of a store depends less on the
retail chain to which the store belongs, and more on the characteristics that are idiosyncratic
to the store (e.g., its location). Table 5 also shows that the variance of the retailer-specific
good component accounts for 7% to 13% of the overall variance of prices, depending on
the definition of a good. Again, the fraction of price dispersion that is accounted for by
the retailer-specific good component is much smaller than the fraction that is accounted
for by the store-specific good component of prices. This implies that the relative price of
a particular good at a store depends less on the retail chain to which the store belongs,
and more on characteristics that are idiosyncratic to the store. Overall, very little of the

   13
      To deal with the scarcity of data for some store/good combinations, the decomposition in Table 5 is
computed using only data from the store/good combinations for which we observe at least 5 transactions,
as described in Section 3.3.

                                                   27
overall variance in prices can be explained by the components of prices that are common to
all stores in the same retail chain. Indeed, Table 5 shows that the sum of the variances of
the retailer component and the retailer-specific good component together account for 8% to
17% of the overall variation in prices for identical goods. Thus, heterogeneity in marginal
costs does not appear to be a quantitatively important explanation for price dispersion.


Intertemporal price discrimination

According to intertemporal price discrimination theories, price dispersion arises because
local monopolists change their prices over time in order to discriminate between different
types of buyers (see, e.g., Conlisk et al. (1984), Sobel (1984), Albrecht et al. (2013)). For
the sake of illustration, consider a market populated by several monopolists, each selling
the same good and facing a constant inflow of heterogeneous buyers. The first type of
buyer has a relatively low valuation for the good and has a relatively high willingness to
substitute consumption over time. The second type of buyer has a relatively high valuation
for the good and is less willing to substitute consumption over time. In this environment,
a monopolist finds it optimal to charge a relatively high price for some interval of time.
While the monopolist charges this relatively high price, high-valuation buyers purchase the
good and low-valuation buyers wait. When the number of low-valuation buyers who are
waiting becomes sufficiently large, the monopolist finds it optimal to lower the price for a
short interval of time. At this lower price, all the low-valuation buyers purchase the good
and exit the market, after which the pricing cycle starts over. Indeed, a number of authors
have found evidence for this type of pricing behavior using store level data (see Klenow and
Malin (2010) for an overview).

If pricing cycles are short relative to the unit of time over which we measure price dispersion
(i.e., a quarter), the price dispersion that originates from intertemporal price discrimination
should be mostly accounted for by the variance in the transaction component of prices. Ta-
ble 3 reveals that the variance of the transaction component of prices represents somewhere
between 30% and 60% of the overall variance of prices. Thus, intertemporal price discrim-
ination could be the source of a significant fraction of the observed variation in prices for
identical goods.

If pricing cycles are long relative to a quarter, then price dispersion that originates from
intertemporal price discrimination would be accounted for by both the variance of the store-
specific good component of prices and the variance of the transaction component of prices.


                                              28
In this case, intertemporal price discrimination could explain up to 90% of the overall
variance of prices. However, we find evidence suggesting that pricing cycles are short.
Indeed, if pricing cycles were long relative to the unit of time over which we measure price
dispersion, an increase in the unit of time should move some of the variance of prices from
the store-specific good component to the transaction component. Yet, when we increase
the unit of time from one quarter to one year, we see very little change in the size of the
transaction component of prices relative to the store-specific good component.


Search frictions

The presence of search frictions in the product market can simultaneously explain why
buyers do not arbitrage away price differences and why sellers choose to charge different
prices (see, e.g., Butters (1977), Varian (1980), Burdett and Judd (1983)). For the sake
of illustration, consider a market populated by a large number of buyers and sellers. Due
to search frictions, an individual buyer can only purchase from some subset of sellers at
any given time. In particular, some buyers are able to purchase from multiple sellers, while
other buyers are only able to purchase from one seller. In this environment, if all sellers
charged the same price, an individual seller could increase its profits by posting a slightly
lower price and selling to the buyers who can purchase from someone else, as well as to to
the buyers who cannot purchase from any other sellers. Thus, sellers must randomize with
respect to the price they charge and price dispersion must arise.

Depending on the process of randomization followed by the sellers, the price dispersion due
to search frictions could show up in the variance of any of the three components of prices. If
the sellers’ randomization process is perfectly correlated across goods and times, the price
dispersion due to search frictions would show up in the variance of the store component of
prices. If the sellers’ randomization process is independent across goods and correlated over
time, the price dispersion due to search frictions would show up in variance of the store-
specific good component of prices. If the sellers’ randomization process is independent
across goods and over time, the price dispersion due to search frictions would show up in
the variance of the transaction component of prices. Indeed, given the appropriate pattern
of randomization, the price dispersion due to search frictions could show up in the variance
of the three components of prices in the same proportions as we observe in the KNCP data.

However, it is unlikely that the variance of the transaction component of prices is due to
search frictions because, in the presence of any cost of price adjustment, sellers would refrain


                                              29
from resetting their prices very often. Thus, search frictions are likely to be responsible for,
at most, the variance of the store component of prices and the variance of the store-specific
good component of prices, which, according to the decompositions in Table 3, represent
somewhere between 35% and 70% of the overall variance of prices.



4     Price dispersion across households

In Section 3.2 we showed that there is substantial variation in prices paid for identical
goods in a given market and quarter. Price dispersion may or may not imply that different
households systematically pay different prices for identical basket of goods. For instance,
given the variation in prices we document in Table 2, a household that buys each of its goods
at the 90th percentile of the price distribution would spend 72% more than a household
that buys each of its goods at the 10th percentile of the price distribution. In contrast,
if households were to draw the price of each good independently from the distribution of
transaction prices, then all households would pay approximately the same price for their
consumption baskets.

In this section, we assess the extent to which price dispersion remains after aggregating
goods into baskets by measuring dispersion in household price indexes. We then decompose
the dispersion in household prices indexes in order to understand what are the characteristics
of households that pay lower prices and what are the mechanisms through which these
households achieve these lower prices.


4.1    Measuring price dispersion across households

We construct a price index for each household i following the same approach as in Aguiar
and Hurst (2007). First, let Xi,t denote as the expenditure of household i in period t and
let X i,t denote the corresponding hypothetical expenditure had the household purchased its
basket of goods at the average price paid for each good by all households in market m (i)
in period t. Formally, Xi,t and X i,t are given by
                                             X
                                  Xi,t =              Pj,k qj,k ,                          (10)
                                            j,k∈i∩t
                                             X
                                 X i,t =              P j,m(i),t qj,k ,                    (11)
                                            j,k∈i∩t



                                               30
where the notation k ∈ i ∩ t refers to {k : t (k) = t, i (k) = i}, the set of shopping trips made
by household i in quarter t.

The household-specific relative price index, pi,t , is defined as the ratio of the actual expen-
diture of household i in period t to its hypothetical expenditure at market-average prices.
That is, pi,t is defined as
                                                Xi,t
                                         pi,t =        .                                    (12)
                                                X i,t

We compute the distribution of price indexes across households separately for each market
and quarter. As a concrete example, Figure 7 shows histograms of these price indexes in
Minneapolis in 2007:Q1 for our four definitions of a good. These figures illustrate several
features of the distribution of household price indexes. First, for all definitions of a good,
there is a significant amount of price index dispersion across households. Second, as we con-
sider broader definitions of a good, the amount of price index dispersion across households
increases. Third, there is less dispersion in household price indexes than there is dispersion
in transaction prices (which can be seen by comparing Figure 7 and Figure 5).

These features of the distribution of household price indexes in Minneapolis in 2007:Q1 are
typical of the distribution of household price indexes in general. The expenditure weighted
means of statistics of the household price index distribution (across markets and quarters)
are reported in Table 6 for each definition of a good. When goods are defined by their UPC,
the average standard deviation of household price indexes is 9%, which is approximately half
of the average standard deviation of transaction prices (19%). The average 90-10 percentile
ratio of the distribution of household price indexes is 1.22, which is substantially lower than
the average 90-10 percentile ratio in the distribution of transaction prices (1.72). When
goods are defined more broadly, both the average standard deviation and the average 90-10
percentile ratio of the distribution of household price indexes increase, but they are always
substantially lower than their counterparts for the distribution of transaction prices. Hence
once goods are aggregated into household-level consumption baskets, a large fraction of the
variation in prices for individual goods cancels out. Yet substantial dispersion remains: a
household at the 90th percentile of the distribution of price indexes pays 20% to 40% more
for an identical basket of goods, than a household at the 10th percentile of the distribution,
depending on the particular definition of a good.

Figure 8 plots the average distribution of households’ price indexes across all markets and
quarters, for each definition of a good. The figure reveals that, for all definitions, the
‘typical’ price index distribution is symmetric with a unique mode and a distribution that

                                               31
                       Figure 7: Distribution of price indexes in Minneapolis, 2007:Q1
                              (a) UPC                                             (b) Generic Brand Aggregation
            .3




                                                                       .3
            .2




                                                                       .2
 Fraction




                                                            Fraction
            .1




                                                                       .1
            0




                                                                       0




                  .5    .75           1        1.25   1.5                    .5        .75           1       1.25   1.5
                                Price Index                                                    Price Index



                       (c) Brand Aggregation                                      (d) Brand and Size Aggregation
            .25




                                                                       .2
            .2




                                                                       .15
        .15
 Fraction




                                                            Fraction
                                                              .1
            .1




                                                                       .05
            .05
            0




                                                                       0




                  .5    .75           1        1.25   1.5                    .5        .75           1       1.25   1.5
                                Price Index                                                    Price Index



Notes:   Sample includes only transactions at stores with unique identifiers for
goods/markets/quarters with at least 25 transactions and coefficient of variation less than
1.




                                                      32
                    Table 6: Average statistics of price index distribution

                              Aggregation  Generic              Brand         Brand & Size
                                 UPC      Aggregation         Aggregation     Aggregation
                                  (1)         (2)                 (3)             (4)

      Standard deviation          0.09            0.09            0.11             0.13
      90-10 Ratio                 1.22            1.24            1.30             1.38
      90-50 Ratio                 1.09            1.09            1.12             1.16
      50-10 Ratio                 1.12            1.13            1.16             1.19

Notes: All statistics are expenditure weighted by household and time periods. Percentile ratios
are means across different markets and time-periods. Sample includes only transactions at stores
with unique identifiers, for goods/markets/quarters with at least 25 transactions and coefficient of
variation less than 1.

is close in shape to a Normal distribution with the same mean and variance.


4.2    Deconstructing price dispersion across households

Consider two households who purchase the same basket of goods at difference prices in the
same market and time period. The difference in the prices paid by these two households
may originate from three conceptually different sources of price dispersion. First, the two
households may have paid different prices because one household purchased its goods at
expensive stores, while the other household purchased its goods at cheap stores. Second,
the two households may have paid different prices because, even though they made all their
purchases at equally expensive stores, one household purchased each good in its basket
at a store where that particular good was expensive, while the other household purchased
each good in its basket at a store where that particular good was cheap. Third, the two
households may have paid different prices because, even though both households purchased
the same goods at exactly the same stores, one household either purchased more of its goods
using coupons, or purchased more if its goods on days when those goods were temporarily
on sale.

To measure the fraction of price index dispersion that is due to each of these sources, we
use the decomposed prices from Section 3.3 to construct an analogous decomposition of
household price indexes. Let ωi,j,k,t denote the share of household i’s expenditure in period




                                                33
                                 Figure 8: Average price index distribution
                           (a) UPC                                           (b) Generic Brand Aggregation
           6




                                                                    6
           4




                                                                    4
 Density




                                                          Density
           2




                                                                    2
           0




                                                                    0




               .5    .75           1        1.25    1.5                 .5        .75           1       1.25   1.5
                             Price Index                                                  Price Index



                    (c) Brand Aggregation                                    (d) Brand and Size Aggregation
                                                                    4
           4




                                                                    3
           3
 Density




                                                          Density
                                                            2
  2




                                                                    1
           1
           0




                                                                    0




               .5    .75           1        1.25    1.5                 .5        .75           1       1.25   1.5
                             Price Index                                                  Price Index



Notes:     Sample includes only transactions at stores with unique identifiers for
goods/markets/quarters with at least 25 transactions and coefficient of variation less than
1. Overlaid curve is the density of a normal distribution with the same mean and variance.




                                                    34
t that comes from the purchase of good j on shopping trip k, using market average prices,

                                                       P j,m(i),t qj,k
                                          ωi,j,k,t =                   .                                    (13)
                                                           X i,t

By summing over the purchases of household i in period t using the weights ωi,j,k,t , we can
write the household’s price index pi,t as
                        X                              X
              pi,t =             µj,m,t ωi,j,k,t +             (µs,t − µj,m,t ) ωi,j,k,t                    (14)
                       j,k∈i∩t                       j,k∈i∩t
                            X                                        X
                       +             (µj,s,t − µs,t ) ωi,j,k,t +              (pj,k − µj,s,t ) ωi,j,k,t ,
                           j,k∈i∩t                                  j,k∈i∩t


where it is implicit that the market m and store s refer to m (i) and s (k) respectively, i.e.
the market in which household i is located and the store corresponding to shopping trip k.

The first term on the right-hand side of (14) is the market average price of good j, averaged
over all the goods purchased by household i in quarter t. This term is always equal to 1,
since prices have been normalized so that the mean price of any good j in any market m
and quarter t is 1. The second term on the right-hand side of (14) is the weighted average
of the store components of the transaction prices paid by household i in quarter t. This is
the store component of the price index. The third term on the right-hand side of (14) is
the weighted average of the store-specific good components of the prices paid by household
i in quarter t. This is the store-specific good component of the price index. The fourth
term on the right-hand side of (14) is the weighted average of the transaction components
of the prices paid by household i in quarter t. This is the transaction component of the
price index.

Using the identity in (14), we can decompose the variance of household price indexes into the
variances of the store, store-specific good and transaction components, and three covariance
terms. The results of this decomposition are reported in Panel A of Table 7 for the four
definitions of a good. For the Generic Brand Aggregation definition (column 2), the store
component accounts for approximately 45% of the variance of price indexes, the store-
specific good component accounts for approximately 43% and the transaction component
accounts for approximately 3%. The remaining 9% is accounted for by the three covariance
terms. The decompositions for the other three definitions of a good (columns 1, 3 and 4)
are similar.

Panel B of Table 7 reports the results of the variance decomposition when we restrict


                                                       35
              Table 7: Decomposition of variance of household price indexes

                                     Aggregation  Generic             Brand         Brand & Size
                                        UPC      Aggregation        Aggregation     Aggregation
                                         (1)         (2)                (3)             (4)

 A: No restrictions
 Store specific component                42%             45%             49%             69%
 Store-good component                    44%             43%             41%              48%
 Transaction component                    3%              3%              3%              5%
 Covar: store, store-good                 3%              2%             -3%             -33%
 Covar: store, transaction                1%              1%              1%              2%
 Covar: store-good, transaction          7%              7%              8%               9%

 B: Restrict to stores/goods with at least 5 transactions
 Store specific component             42%            39%                 36%             42%
 Store-good component                 58%            53%                 47%             45%
 Transaction component                19%            16%                 16%             19%
 Covar: store, store-good             -24%           -13%                -7%             -16%
 Covar: store, transaction             0%             1%                  1%              2%
 Covar: store-good, transaction        4%             5%                 6%               8%

Notes: All statistics are expenditure weighted across markets and quarters. Sample includes only
transactions at stores with unique identifiers for goods/markets/quarters with at least 25 transac-
tions and coefficient of variation less than 1. See text for details of decomposition. May not add
to 100% due to rounding.


attention to stores and goods with a minimum of 5 transactions. For the Generic Brand
Aggregation definition (column 2) the store component accounts for approximately 39% of
the variance of price indexes, the store-specific good component accounts for approximately
53% and the transaction component accounts for approximately 16%. The covariance terms,
which in total are negative, constitute −8% of the overall variance of price indexes. Again,
the decompositions for the other three definitions of a good (columns 1, 3 and 4) are similar.

The decompositions in Table 7 and Table 3 reveal that dispersion in household price indexes
arises from very different sources compared with dispersion in transaction price. First,
whereas the store component contributes only around 10% to the variance of transaction
prices, it contributes between 40% and 50% to the variance of household price indexes.
Hence, even though only a small fraction of the dispersion in the transaction prices for the
same good is due to differences in the expensiveness of the stores where the transactions
took place, nearly half of the dispersion in the prices paid by different households for the

                                                36
same consumption basket is due to differences in the expensiveness of the stores where
the households shopped. This finding is due to the fact that each household typically
concentrates its shopping at a relatively small number of stores. Indeed, the average number
of stores visited by a household in a given quarter is 2.3. Moreover, since the variation in
transaction prices within stores is much larger than the variation in transaction prices across
stores, this explains why dispersion in household price indexes is lower than dispersion in
transaction prices, and why the store component accounts for a larger fraction of the variance
of household price indexes than of the variance of transaction prices.
Second, Table 3 shows that the store-good and transaction components are equally impor-
tant for explaining the variance of transaction prices. In contrast, Table 7 shows that the
store-good component is far more important than the transaction component for explain-
ing the variance of household price indexes. These findings suggest that, while there is a
great deal of variation in the price at which the same store sells the same good on different
days (or in different transactions on the same day), there is not a great deal of variation in
households’ abilities to systematically take advantage of these differences through exploit-
ing temporary sales. In contrast, there does seem to be significant variation in households’
abilities to systematically take advantage of the price differences for the same good at dif-
ferent stores, by purchasing each good at the store where that particular good is on average
cheaper.
To further understand the process by which some households end up paying lower prices
than other households, we regress households’ price indexes on aspects of their shopping
behavior. The results are reported in Table 8 for the Generic Brand Aggregation definition
of a good. Columns (1) and (2) show that price indexes are lower both for households
that go on more shopping trips and for households who visit a greater number of stores.
Column (3) shows that households who use coupons more frequently payer lower prices: a
household who uses coupons in 10% more of its transactions pays around 3% less for the
same basket of goods. Column (4) shows that these findings hold conditionally. That is,
households who take more shopping trips pay a lower price for their consumption basket even
after controlling for the number of stores they visit and their coupon usage, and similarly,
households who visit more stores or use coupons more frequently pay a lower price for their
consumption basket after controlling for the other two aspects of shopping behavior.14
We can observe an interesting insight about the mechanisms through which shopping be-
   14
      The regressions in Table 8 do not control for expenditure at average prices; however controlling for
expenditure does not change any of the conclusions. The results are reported for the Generic Brand
Aggregation definition only but these findings are not sensitive to the particular definition of a good.

                                                   37
              Table 8: Effect of shopping behavior on household price indexes

                                            (1)          (2)        (3)        (4)

             No. shopping trips          -0.144**                            -0.035**
             (×102 )                      (0.005)                             (0.004)

             No. stores visited                        -1.063**              -0.556**
             (×102 )                                    (0.027)               (0.022)

             Fraction of transactions                             -0.324**   -0.317**
              involving coupons                                    (0.003)    (0.003)

             Observations                 880,104      880,104    880,104    880,104
             Households                   78,758       78,758     78,758     78,758
             R-squared                     0.015        0.021      0.181      0.187
Notes: All regressions control for time dummies, market dummies, cubic polynomial in the average
age of household heads, quadratic polynomial in log household size, education dummies. Control-
ling also for expenditure at average prices yields similar results. Dependent variable is household
price index using Generic Brand Aggregation Definition.


havior affects household price indexes from Table 8. Visiting a larger set of stores appears
to be more important for paying low prices than visiting the same set of stores more often.
For example, in Column (4) the effect of visiting one additional store on a household’s price
index, holding the number of shopping trips constant (0.6%), is an order of magnitude larger
than the effect of making one additional shopping trip to the same set of stores (0.04%).


4.3    Who pays low prices?

The substantial dispersion in prices paid by different households for the same goods begs
the question of who are the people that enjoy lower prices. The findings in Section 4.2
suggest that there are potentially large gains either from being better informed about the
location of cheap goods, from being able to take advantage of temporary sales, or from
shopping with coupons. Thus it is natural to conjecture that households whose value of
time is lower are better positioned to purchase at lower prices. In this section, we explore
this hypothesis by examining the effect of two observable proxies for the value of time: age
and employment.




                                                  38
                                        Figure 9: Average price indexes by age
                         (a) Price indexes                                 (b) Price indexes, net of store component
         0                                                                  0
                                          UPC
     −0.005                               Generic brand aggregation     −0.005
                                          Brand aggregation
      −0.01                               Brand & size aggregation       −0.01

     −0.015                                                             −0.015

      −0.02                                                              −0.02

     −0.025                                                             −0.025

      −0.03                                                              −0.03

     −0.035                                                             −0.035

      −0.04                                                              −0.04     UPC
                                                                                   Generic brand aggregation
     −0.045                                                             −0.045     Brand aggregation
                                                                                   Brand & size aggregation
      −0.05                                                              −0.05
          <25   25−29   30−34   35−39    40−44   45−49   50−54    55+        <25   25−29   30−34   35−39   40−44   45−49   50−54   55+


Notes: Age refers to average age of household head(s).


Age and prices

We measure the age of a household as the average age of its heads and plot the age profile of
average price indexes in Figure 9a. We group households into 5-year age bins, and normalize
the average price index of households under 25 years old to zero. The figure illustrates clearly
that average household price indexes decline with age. This figure is consistent with the
findings in Aguiar and Hurst (2007), who use a small subset of the KNCP data to show that
older households pay lower prices that younger households. Figure 9a also shows that the
age profile of household price indexes is almost identical whether we use the UPC, Generic
Brand Aggregation or Brand Aggregation definitions of a good. In contrast, when goods are
defined using the Brand and Size Aggregation definition, the lifecycle decline in the average
household price index is steeper. Indeed, for the three narrower definitions of a good, the
average price index for households over 55 years old is 3.5% lower than the average price
index for households under 25 years old. For the broadest definition of a good, the average
price index for households over 55 years old is 4.5% lower than the average price index for
households under 25 years old.
One interpretation of the decline in price indexes over the lifecycle is that older households
have a lower opportunity cost of time, and hence choose to spend more time searching for low
prices or waiting for temporary sales. An alternative interpretation is that older households
care less about amenities when shopping, and hence shop at stores that offer fewer services
and charge lower prices. In order to distinguish between these two interpretations, Figure
9b plots the lifecycle profile of household price indexes net of the store component, which

                                                                      39
we argued in Section 3.4 is an upper bound on the component of prices that reflects the
consumption of amenities. The figure shows that, for all definitions of a good, the average
household price index net of the store component declines over the lifecycle. However, the
decline in the average price index net of the store component is approximately 50% smaller
than the decline in the average price index when the store component is included. This
implies that at most half of the difference in prices paid between old and young households
could be due to differences in the consumption of amenities.


Employment and prices

To examine the differences in prices paid across households with different employment
compositions, we estimate the following regression:

                             log pi,t = α0 ei,t + β 0 xi,t + λm(i) + κt + i,t .                      (15)

We estimate (15) separately for households with one head and households with two heads.
The dependent variable, log pi,t , is the logarithm of the price index for household i in quarter
t. Our main explanatory variable is ei,t , which is a measure of the household’s employment
composition. For households with one head, ei,t is a dummy variable for whether the head
is not employed. For households with two heads, ei,t is a vector of dummy variables, one
for whether exactly one of the heads is not employed and one for whether both of the
heads is not employed. The remaining explanatory variables are a set of household-level
characteristics xi,t that include age, household size and education dummies, as well as a full
set of time κt and market λm(i) dummy variables. In order to focus on the difference between
employment and non-employment, rather than between employment and retirement, we
restrict attention to households whose heads’ average age is between 25 and 55.15

We report estimates of equation (15) for households with one head in Panel A of Table 9.
The estimates indicate that one-head households who are not employed pay between 0.8%
and 2.6% less for the same basket of goods than one-head households who are employed,
after controlling for differences in age, education and household size. The estimates for

   15
      The information on employment refers to the employment status at the time of the survey. The survey
does not distinguish between unemployed individuals and non-participants, but does explicitly identify
students who work less than 30 hours per week. Age and household size are included as explanatory
variables in order to control for differences in purchasing needs across households. We have experimented
with controlling for education as a proxy for permanent income differences between the employed and
non-employed, and controlling for household expenditure at average prices as an additional proxy for needs.

                                                     40
                  Table 9: Effect of employment on household price indexes

                                               Definition of Good
                               Aggregation  Generic         Brand           Brand & Size
                                  UPC      Aggregation Aggregation          Aggregation
                                   (1)         (2)            (3)               (4)

   Panel A: Households with one head

   Not employed                  -0.008**         -0.009**     -0.019**        -0.026**
                                  (0.002)          (0.002)      (0.003)         (0.004)

   Observations                   132,274         137,079       141,505         145,264
   Households                     15,023          15,201        15,384          15,523
   R-squared                       0.009           0.011         0.017           0.023

   Panel B: Households with two heads

   Both heads not employed        -0.009*         -0.013**     -0.028**        -0.046**
                                  (0.004)          (0.005)      (0.005)         (0.006)

   One head not employed         -0.007**         -0.007**     -0.011**        -0.015**
                                  (0.001)          (0.001)      (0.002)         (0.002)

   Observations                   292,634         299,580       306,505         312,950
   Households                     33,758          34,072        34,436          34,735
   R-squared                       0.006           0.007         0.013           0.012

Notes: All regressions control for time dummies, market dummies, cubic polynomial in the aver-
age age of household heads, quadratic polynomial in log household size and education dummies.
Dependent variable is household price index.




                                             41
households with two heads are reported in Panel B of Table 9. Households with two non-
employed heads pay between 0.9% and 4.6% less than households with two employed heads.
Households with one non-employed head pay between 0.7% and 1.5% less than households
with two employed heads. In all cases, the effects are smallest when we define goods by their
UPC and become larger as the definition of a good is broadened. All of the estimates are
strongly statistically significant, and suggest that the effect of employment on price indexes
is roughly the same magnitude as the fall in price indexes over the lifecycle.16

One interpretation of the findings in Table 9 is that non-employed households have a lower
opportunity cost of time, and hence choose to spend more time searching for low prices or
waiting for temporary sales. An alternative interpretation is that non-employed households
care less about amenities when shopping, and hence shop at stores that offer fewer ameni-
ties and charge lower prices. In order to distinguish between these two interpretations,
we re-estimate equation (15) but replace the dependent variable with the logarithm of the
household’s price index net of the store component. The estimates, which are reported in
Table 10, show that non-employment has a large and statistically significant effect on the
household’s price index net of the store component, but that the effects are approximately
30% smaller than the corresponding effects of non-employment on the households’ price
index in Table 9. These findings suggest that at most one-third of the difference in prices
paid between employed and non-employed households is due to differences in the consump-
tion of amenities, and at least one half is due to differences in the ability or willingness of
households to search for lower prices.



5     Conclusion

Our goal in this paper has been to use household-level scanner data to undertake a system-
atic study of the morphology of price distributions, with the aim of providing new insights
into the theoretical origins of price dispersion. We found that the distribution of prices for
individual goods is leptokurtic with a standard deviation between 19% and 36%, while the
   16
      Recall that the demographic information in the KNCP is updated only once a year in the last quarter,
usually in December. Since employment transitions frequently occur within a year or even a quarter,
our measure of employment is possibly mis-measured in the later months of the year. To assess whether
this potential measurement error is important, we have estimated equivalent models on a sub-sample that
includes only transactions in the first quarter of a year. Because of the timing of the demographic questions,
reported employment status is much more likely to be accurate in the first few months of each calendar
year than later in the year. We find that our results are barely affected by this restriction, suggesting that
this type of measurement error is unlikely to be influencing our findings in an important way.

                                                     42
   Table 10: Effect of employment on household price indexes net of store component

                                               Definition of Good
                                Aggregation  Generic         Brand           Brand & size
                                   UPC      Aggregation Aggregation          Aggregation
                                    (1)         (2)           (3)                (4)

   Panel A: Households with one head

   Not employed                   -0.006**        -0.006**      -0.011**       -0.012**
                                   (0.002)         (0.002)       (0.002)        (0.003)

   Observations                   132,274         137,079       141,505         145,264
   Households                     15,023          15,201        15,384          15,523
   R-squared                       0.010           0.009         0.008           0.009

   Panel B: Households with two heads

   Both heads not employed        -0.007**        -0.011**      -0.022**       -0.035**
                                   (0.003)         (0.003)       (0.004)        (0.006)

   One head not employed          -0.004**        -0.004**      -0.007**       -0.009**
                                   (0.001)         (0.001)       (0.001)        (0.002)

   Observations                   292,634         299,580       306,505         312,950
   Households                     33,758          34,072        34,436          34,735
   R-squared                       0.007           0.008         0.010           0.007

Notes: All regressions control for time dummies, market dummies, cubic polynomial in the aver-
age age of household heads, quadratic polynomial in log household size and education dummies.
Dependent variable is household price index net of the store component.




                                             43
distribution of prices for bundles of goods is Normal with a standard deviation between 9%
and 14%. For both types of prices, dispersion is a robust feature of the data.

We then examined both data and theories through the lens of a variance decomposition
that splits prices into store components, store-specific good components and transaction
components. Our decomposition casts doubt on the quantitative importance of differences
in amenities and differences in marginal costs as sources of price dispersion, since both
imply that the store component should account for observed price dispersion, yet we found
that the store component accounts for only 10% of the variance of prices. In contrast,
our decomposition is supportive of inter-temporal price discrimination and search frictions
as quantitatively important theories of price dispersion, since these theories imply that the
store-specific good and transaction components should account for observed price dispersion.

We also examined the characteristics of households who pay lower prices for identical bun-
dles of goods. We found that older households and households with fewer employed members
pay lower prices, and do so mostly by visiting a greater number of stores on each shopping
trip, rather than shopping more frequently. These findings point to the importance of het-
erogeneity across households in their costs of time for understanding dispersion in household
price indexes, and thus are further evidence in support of the quantitative importance of
search frictions.

We see at least two important directions for future theoretical work on pricing, motivated
by our empirical findings. First, there are currently no theories that encompass all of the
features of price distributions that we document. For example, the striking discrepancy be-
tween the decomposition of individual transaction prices and dispersion in household price
indexes highlights a need for new theories of shopping behavior and the pricing of bundles.
Second, our findings indicate that activities that can be described as bargain hunting (e.g.
visiting multiple stores in search of the cheapest price for a particular good, waiting for sales
or seeking out coupons) are crucial for understanding the data on price dispersion. Bargain
hunting requires time. We have shown that older households, as well as working-age house-
holds with fewer employed members (both natural proxies for the value of a household’s
time) do in fact pay lower prices and that these lower prices are achieved through bargain
hunting activities. Understanding the macroeconomic implications of bargain hunting, for
example by integrating search theories of price dispersion into a general equilibrium frame-
work, is a natural next step. In Kaplan and Menzio (2013) we develop a theoretical model
in this direction.



                                               44
References
Aguiar, M. and Hurst, E. (2005). Consumption versus expenditure. Journal of Political
  Economy, 113(5).

Aguiar, M. and Hurst, E. (2007). Life-cycle prices and production. The American economic
  review, 97(5):1533–1559.

Albrecht, J., Postel-Vinay, F., and Vroman, S. (2013). An equilibrium search model of
  synchronized sales. International Economic Review, 54(2):473–493.

Baye, M. R., Morgan, J., and Scholten, P. (2006). Information, search, and price dispersion.
  Handbook on economics and information systems, 1.

Broda, C. and Parker, J. (2012). The economic stimulus payments of 2008 and the aggregate
  demand for consumption. Mimeo, MIT.

Bronnenberg, B., D. J. G. M. and Shapiro, J. (2013). Do pharmacists buy bayer? sophisti-
  cated shoppers and the brand premium. Mimeo, University of Chicago.

Burdett, K. and Judd, K. L. (1983). Equilibrium price dispersion. Econometrica, pages
  955–969.

Butters, G. R. (1977). Equilibrium distributions of sales and advertising prices. The Review
  of Economic Studies, 44(3):465–491.

Conlisk, J., Gerstner, E., and Sobel, J. (1984). Cyclic pricing by a durable goods monopolist.
  The Quarterly Journal of Economics, 99(3):489–505.

Eden, B. (2013). Price dispersion and demand uncertainty: Evidence from us scanner data.
  Technical report, Vanderbilt University Department of Economics.

Einav, L., Leibtag, E., and Nevo, A. (2010). Recording discrepancies in nielsen homes-
  can data: Are they present and do they matter? Quantitative Marketing Economics,
  8(2):207–239.

Galenianos, M., Pacula, R. L., and Persico, N. (2012). A search-theoretic model of the retail
 market for illicit drugs. The Review of Economic Studies, 79(3):1239–1269.

Golosov, M. and Lucas, R. E. (2007). Menu costs and phillips curves. Journal of Political
 Economy, 115(2).

                                             45
Handbury, J. (2012). Are poor cities cheap for everyone? non-homotheticity and the cost
  of living across us cities. Mimeo, University of Pennsylvania.

Hong, H. and Shum, M. (2006). Using price distributions to estimate search costs. The
  RAND Journal of Economics, 37(2):257–275.

Kaplan, G. and Menzio, G. (2013). Shopping externalities and self-fulfilling unemployment
 fluctuations. NBER Working Paper.

Klenow, P. J. and Malin, B. A. (2010). Microeconomic evidence on price-setting. Handbook
  of Monetary Economics, 3:231–284.

Moraga-González, J. L. and Wildenbeest, M. R. (2008). Maximum likelihood estimation of
 search costs. European Economic Review, 52(5):820–848.

Sobel, J. (1984). The timing of sales. The Review of Economic Studies, 51(3):353–368.

Sorensen, A. T. (2000). Equilibrium price dispersion in retail markets for prescription drugs.
  Journal of Political Economy, 108(4):833–850.

Varian, H. R. (1980). A model of sales. The American Economic Review, 70(4):651–659.

Woodward, S. E. and Hall, R. E. (2012). Diagnosing consumer confusion and sub-optimal
 shopping effort: Theory and mortgage-market evidence. American Economic Review,
 102(7):3249–3276.




                                             46
A      Additional tables and figures
This appendix contains additional tables and figures that are referred to in the main text, but which
we have excluded from the main body of the paper due to space limitations. Table A.1 lists the 54
scantrack markets covered by the KNCP data, together with the fraction of observed expenditure
in 2007:Q1 that comes from each market. Table A.2 lists the departments covered by the KNCP
data, the number of product groups and product modules in each department, together with the
number of different UPCs purchased from each department and the fraction of expenditure coming
from each department in 2007:Q1. Table A.3 lists the types of retailers covered by the KNCP data,
together with the fraction of expenditure coming from each category in 2007:Q1.




                                                 47
              Table A.1: Fraction of expenditure from each Scantrack market

 Scantrack Market                 Transactions       Scantrack Market                 Transactions
                            All     With Store ID                               All     With Store ID

 Albany                    0.9%         1.0%         Milwaukee                 1.1%         1.3%
 Atlanta                   2.5%         2.4%         Minneapolis               1.9%         1.7%
 Baltimore                 1.2%         1.4%         Nashville                 1.2%         0.7%
 Birmingham                1.3%         0.6%         New Orleans-Mobile        1.6%         0.9%
 Boston                    3.5%         4.4%         NYC (ex-urban)            1.2%         1.6%
 Buffalo-Rochester         1.1%         1.2%         NYC (suburban)            3.6%         4.8%
 Charlotte                 1.1%         1.2%         NYC (urban)               3.1%         2.6%
 Chicago                   3.6%         4.0%         Oklahoma City-Tulsa       1.3%         0.4%
 Cincinnati                1.5%         1.8%         Omaha                     0.7%         0.4%
 Cleveland                 2.1%         1.8%         Orlando                   1.7%         1.8%
 Columbus                  1.1%         1.3%         Philadelphia              3.8%         4.3%
 Dallas                    2.7%         2.3%         Phoenix                   2.6%         2.8%
 Denver                    1.9%         1.9%         Pittsburgh                1.8%         1.4%
 Des Moines                0.5%         0.4%         Portland                  1.7%         1.5%
 Detroit                   2.7%         3.4%         Raleigh-Durham            1.9%         1.9%
 Grand Rapids              1.2%         1.5%         Richmond                  1.6%         1.5%
 Hartford-New Haven        1.6%         1.8%         Sacramento                1.6%         1.5%
 Houston                   2.1%         1.9%         Salt Lake City-Boise      1.5%         1.0%
 Indianapolis              1.5%         1.5%         San Antonio               1.5%         1.5%
 Jacksonville              0.9%         0.8%         San Diego                 1.3%         1.4%
 Kansas City               1.2%         0.6%         San Francisco             2.9%         3.3%
 Las Vegas                 0.9%         0.9%         Seattle                   2.1%         2.0%
 Little Rock               0.8%         0.4%         St Louis                  1.4%         1.3%
 Los Angeles               6.4%         7.3%         Syracuse                  0.9%         0.8%
 Louisville                1.2%         1.1%         Tampa                     2.4%         2.7%
 Memphis                   1.0%         0.5%         Washington, DC            3.1%         3.5%
 Miami                     2.7%         3.6%         West Texas                1.0%         0.3%

Notes: Expenditure data refer to 2007:Q1. Expenditure is weighted by household projection
factors. Statistics in columns labelled “With Store ID” condition on transactions at stores that
have unique store identifiers.




                                                48
               Table A.2: Departments, product groups and product modules

                                                                            Transactions
                                                                                              With Store ID
                       Product    Product                     All           With Store ID     in Minneapolis
 Department            Groups     Modules     UPCs         UPCs   Frac      UPCs      Frac     UPCs    Frac

  Health and beauty          18       173      242,564      68,781   11%     43,996     11%   6,024    12%
  Dry grocery                38       416      499,943     187,962 39% 129,324 42% 16,305              39%
  Frozen foods               10        85       83,209      32,303    9%     23,773     11%   3,467    12%
  Dairy                      10        45       63,782      30,202    8%     21,747     10%   2,301    10%
  Deli                        1        16       23,667       6,730    2%      5,221      3%    509     2%
  Packaged meat               2        13       23,981       9,501    3%      6,881      3%    854     4%
  Fresh produce               1        21       18,378       5,993    3%      4,539      3%    504     3%
  Non-food grocery           12       136      172,308      49,917   14%     27,360     11%   3,624    11%
  Alcohol                     3        30       40,303      12,029    4%      5,791      3%    108     0%
  General merch.             18       147      256,283      58,063    7%     24,631      4%   2,408     6%
  Total                     113      1,082    1,424,418 461,481              293,263         36,104
Notes: First three columns report number of product groups, product modules and UPCs in
entire database. Remaining columns report number of UPCs transacted and fraction of
expenditure in 2007:Q1. Expenditure data is weighted by household projection factors. Statistics
in columns labelled “With Store ID” condition on transactions at stores that have unique store
identifiers. Statistics in columns labelled “With Store ID in Minneapolis” condition on
transactions at stores in Minneapolis that have unique store identifiers.


                    Table A.3: Fraction of expenditure by type of retailer

                                                      Transactions
                                                                     With Store ID
              Retailer Type       AAAAllAAA          With Store ID   in Minneapolis

              Grocery                  49%               82%               62%
              Discount Store           22%                9%               32%
              Warehouse Club           10%
              Drug Store                5%                9%               6%
              Dollar Store              2%
              Online Shopping           1%
              Liquor Store              1%
              All Other Stores         10%
Notes: Expenditure data refer to 2007:Q1. Expenditure is weighted by household projection
factors. Statistics in columns labelled “With Store ID” condition on transactions at stores that
have unique store identifiers. Statistics in columns labelled “With Store ID in Minneapolis”
condition on transactions at stores in Minneapolis that have unique store identifiers.


                                                49
B     Details of price decompositions
In this appendix we provide further details of the price decompositions and their implementation.
Unless otherwise specified, the notation in this appendix suppresses conditioning on the market m
and quarter t corresponding to the transaction k. It is implicit that all formulas apply separately
to each market and quarter.



B.1     Notation
We start by defining the notation used in the appendix, together with some useful identities. Let
Pj,k be the actual price for good j on shopping trip k, with corresponding quantity qj,k . Let ωj,k
denote the quantity weight for good j of shopping trip k, defined as
                                                  qj,k
                                           ωj,k = X      .                                      (B.1)
                                                    qj,k
                                                        k

Let pj,k denote the normalized price for good j on shopping trip k, defined as

                                                        Pj,k
                                         pj,k = X                     .                         (B.2)
                                                        Pj,k ωj,k
                                                   k

Note that the quantity weighted average of the normalized prices for good j is 1,
                                          X
                                                pj,k ωj,k = 1.                                  (B.3)
                                            k

Let ωj,s denote the quantity weight for good j of store s, i.e the relative contribution of store s to
the total purchases of good j:                   X
                                                    qj,k
                                                  k∈s
                                           ωj,s = X        .                                    (B.4)
                                                      qj,k
                                                        k

Note the following relationship between ωj,k and ωj,s
                                                    X
                                           ωj,s =            ωj,k .                             (B.5)
                                                       k∈s

Let Rj,s denote the revenue from good j at store s, let Rs denote the total revenue at store s, and
let ρj,s denote the revenue weight for good j at store s, i.e. the relative contribution of good j to
the total revenues at store s:
                                                       X
                                        Rj,s =               Pj,k qj,k                          (B.6)
                                                       k∈s
                                                       X
                                         Rs =                Rj,s                               (B.7)
                                                        j




                                                   50
                                                        Rj,s
                                           ρj,s =                                              (B.8)
                                                        Rs

Note that for every store s the sum of the revenue weights across goods is 1:
                                                 X
                                                      ρj,s = 1.                                (B.9)
                                                 j




B.2     Decomposition of prices
In Section 3.3 we decompose pj,k using the identity

                         pj,k = µj + (µs − µj ) + (µj,s − µs ) + (pj,k − µj,s ) .             (B.10)

The terms on the right-hand side of (B.10) are defined as
                                                       X
                                            µj   =           pj,k ωj,k                        (B.11)
                                                        k
                                                       X            ωj,k
                                           µj,s =            pj,k                             (B.12)
                                                       k∈s
                                                                    ωj,s
                                                       X
                                            µs =             µj,s ρj,s .                      (B.13)
                                                        j


We use the following terminology to describe the components in (B.10):

   • (µs − µj ) is the store component of pj,k .
   • (µj,s − pj,k ) = (µj,s − µs ) + (pj,k − µj,s ) is the within-store component of pj,k .
   • (µj,s − µs ) is the store-specific good component of pj,k .
   • (pj,k − µj,s ) is the transaction component of pj,k .

The following four identities are useful in the algebra that follows:


                                                 µj    = 1                                    (B.14)
                                                             X
                                           µj,s ωj,s =              pj,k ωj,k                 (B.15)
                                                             k∈s
                                     X
                                           µj,s ωj,s = 1                                      (B.16)
                                       s
                                     X
                                           µj,s ωj,k = µj,s ωj,s                              (B.17)
                                     k∈s


(B.14) follows from (B.3) and(B.11), (B.15) follows from rearranging (B.12), (B.16) follows from
summing (B.15) over s and applying (B.3), and (B.17) follows from (B.5).

                                                       51
We now derive the quantity-weighted means, which we denote by m (•), of each component on the
right-hand side of (B.10), for each good j. Note from (B.3) that the quantity-weighted mean of
pj,k is 1.

   • Store component:
                                                       X
                                 m (µs − µj ) =                (µs − µj ) ωj,k
                                                           k
                                                       X
                                                 =             µs ωj,k − 1
                                                           k
                                                       X            X
                                                 =             µs          ωj,k − 1
                                                           s         k∈s
                                                       X
                                                 =             µs ωj,s − 1                       (B.18)
                                                           s

     where the second line uses (B.14) and the fourth line uses (B.5).
   • Store-specific good component:
                                               X
                          m (µj,s − µs ) =          (µj,s − µs ) ωj,k
                                                k
                                               XX                            XX
                                          =                µj,s ωj,k −                 µs ωj,k
                                                s k∈s                         s k∈s
                                               X                        X
                                          =         µj,s ωj,s −              µs ωj,s
                                                s                        s
                                                      X
                                          = 1−             µs ωj,s                               (B.19)
                                                      s

     where the third line uses (B.17) and the fourth line uses (B.16).
   • Transaction component:
                                                          X
                               m (pj,k − µj,s ) =              (pj,k − µj,s ) ωj,k
                                                           k
                                                               X
                                                    = 1−                µj,s ωj,k
                                                                 k
                                                               X
                                                    = 1−                µj,s ωj,s
                                                                 s
                                                    = 0                                          (B.20)

     where the third line uses (B.5) and the fourth line uses (B.16).

Next we take the quantity-weighted variance of both sides of (B.10), for each good j. For each
good j, the quantity-weighted variance of the normalized price pj,k is
                                                                                     !2
                                          X                     X
                          var (pj,k ) =       p2j,k ωj,k   −             pj,k ωj,k
                                          k                         k
                                          X
                                      =       p2j,k ωj,k − 1
                                          k


                                                 52
where the second line uses (B.3).
The quantity-weighted variances of each of the components on the right-hand side of (B.10) are as
follows.

   • Store component:

                                                         (µs − µj )2 ωj,k − m (µs − µj )2
                                                 X
                         var (µs − µj ) =
                                                  k
                                                                                                          !2
                                                                   2
                                                 X                                X
                                          =              (µs − 1) ωj,k −                    µs ωj,s − 1              (B.21)
                                                  k                                 s


      where the second line uses (B.14) and (B.18).
   • Store-good component:

                                                         (µj,s − µs )2 ωj,k − m (µj,s − µs )2
                                                 X
                       var (µj,s − µs ) =
                                                 k
                                                                                                             !2
                                                                       2
                                                 X                                            X
                                          =              (µj,s − µs ) ωj,k − 1 −                   µs ωj,s           (B.22)
                                                 k                                             s


      where the second line uses (B.19).
   • Transaction component:

                                                          (pj,k − µj,s )2 ωj,k − m (pj,k − µj,s )2
                                                 X
                       var (pj,k − µj,s ) =
                                                     k
                                                          (pj,k − µj,s )2 ωj,k
                                                 X
                                             =                                                                       (B.23)
                                                     k

      where the second line uses (B.20).

The quantity-weighted covariances of each of the components on the right-hand side of (B.10) are
as follows.

   • Store-specific good component, transaction component:
                                         X
      cov (µj,s − µs , pj,k − µj,s ) =        (µj,s − µs ) (pj,k − µj,s ) ωj,k − m (µj,s − µs ) m (pj,k − µj,s )
                                         k
                                         X
                                    =         (µj,s − µs ) (pj,k − µj,s ) ωj,k
                                         k
                                         X                      X                   X
                                    =         (µj,s − µs )            pj,k ωj,k −           (µj,s − µs ) µj,s ωj,s
                                         s                      k∈s                     s
                                         X                                   X
                                    =         (µj,s − µs ) µj,s ωj,s −              (µj,s − µs ) µj,s ωj,s
                                         s                                    s
                                    = 0                                                                              (B.24)

      where the second line uses (B.20), the third line uses (B.5) and the fourth line uses (B.15).

                                                           53
   • Store component, transaction component:
                                         X
         cov (µs − 1, pj,k − µj,s ) =         (µs − 1) (pj,k − µj,s ) ωj,k − m (µs − 1) m (pj,k − µj,s )
                                          k
                                         X
                                   =          (µs − 1) (pj,k − µj,s ) ωj,k
                                          k
                                         X               X                   X                     X
                                   =          (µs − 1)         pj,k ωj,k −         (µs − 1) µj,s            ωj,k
                                          s              k∈s                  s                    k∈s
                                         X                              X
                                   =          (µs − 1) µj,s ωj,s −           (µs − 1) µj,s ωj,s
                                          s                              s
                                   = 0                                                                                  (B.25)

      where the second line uses (B.20) and the fourth line uses (B.15) and (B.5).
   • Store component, store-specific good component:
                                   X
      cov (µs − 1, µj,s − µs ) =        (µs − 1) (µj,s − µs ) ωj,k − m (µs − 1) m (µj,s − µs )
                                   k
                                                                                                        !                         !
                                   X                              X                X                                X
                              =         (µs − 1) (µj,s − µs )           ωj,k −           µs ωj,s − 1          1−        µs ωj,s
                                   s                              k∈s                s                              s
                                                                                                  !2
                                   X                                         X
                              =         (µs − 1) (µj,s − µs ) ωj,s +               µs ωj,s − 1
                                   s                                           s
                                                                                                                   !2
                                   X                              X                          X
                              =         (µj,s − µs ) µs ωj,s +          µs ωj,s − 1 +             µs ωj,s − 1
                                   s                               s                          s
                                                                                                       !2
                                   X                              X                      X
                              =         (µj,s − µs ) µs ωj,s −          µs ωj,s +            µs ωj,s                      (B.26)
                                   s                               s                     s

      where the second line uses (B.18) and (B.19), the third line uses (B.5) and the fourth line
      uses (B.16). In general (B.26) is not equal to zero.
This establishes the claim in Section 3.3 that the covariance between the transaction component
and the store component, and the covariance between the store-specific good component and the
transaction component, are both zero.


B.3     Implementing the price decomposition
The variance decomposition is implemented separately for each good j in each market m and
quarter t. We require some additional notation in order to explain how we aggregate across goods,
markets and quarters. Let Xj,m,t denote the total market expenditure for good j in market m
and quarter t, let Xm,t denote the total market expenditure in market m and quarter t. Let xj,m,t
denote the expenditure weight for good j, market m and quarter t, i.e. the contribution of good
j in market m and quarter t to the total expenditure across all goods, markets and quarters, and
let xm,t denote the expenditure weight for market m and quarter t, i.e. the contribution of market
m and quarter t to the total expenditure across all goods, markets and quarters:
                                                     X
                                        Xj,m,t =           Pj,k qj,k                                                    (B.27)
                                                   k∈m∩t


                                                    54
                                                       X
                                           Xm,t =            Xj,m,t                          (B.28)
                                                        j

                                                  Xj,m,t
                                        xj,m,t = X                                           (B.29)
                                                   Xj,m,t
                                                       m,t

                                                   Xm,t
                                           xm,t = X                                          (B.30)
                                                    Xm,t
                                                       m,t


To implement the decomposition we take the following steps. First, we compute the variances and
covariances above for each good in each market and quarter using the formulas in (B.21)-(B.26).
Let varj,m,t (•) denote any of these variances or covariances, for a specific good, market and time
period.
Second, we multiply each variance or covariance estimate by a Bessel correction factor that is based
on quantity weights, so that our estimates are unbiased. The correction factor for good j in market
m and quarter t is defined as
                                                                   2
                                                        X
                                                              qjk 
                                 q                    k∈m∩t
                                Bj,m,t =                2                       .          (B.31)
                                                X                     X
                                                      qjk  −               2
                                                                            qjk
                                               k∈m∩t                k∈m∩t


Third, for each market and quarter we compute a weighted average of the variance and covariance
of each component across goods. We use weights bxj,m,t that correspond to the Bessel correction
factors based on expenditure so that our estimates are unbiased estimates of common variances
and covariances across goods. The weights are defined as

                                                              2
                               x                             Xj,m,t
                              Bj,m,t =                                                .      (B.32)
                                                                    (Pj,k qjk )2
                                                              X
                                             2
                                            Xj,m,t −
                                                            k∈m∩t
                                              x
                                             Bj,m,t
                               bxj,m,t =    X                                                (B.33)
                                                x
                                              Bj,m,t
                                            j


Thus the average variances and covariances across all goods in market m at quarter t are given by

   • Overall variance of normalized prices:

                                                        q
                                                  X
                               varm,t (pj,k ) =        Bj,m,t varj,m,t (pj,k ) bxj,m,t       (B.34)
                                                  j


   • Variance of store component:

                                                        q
                                                  X
                           varm,t (µs − µj ) =         Bj,m,t varj,m,t (µs − µj ) bxj,m,t    (B.35)
                                                  j



                                                      55
   • Variance of store-specific good component:

                                                               q
                                                         X
                           varm,t (µj,s − µs ) =              Bj,m,t varj,m,t (µj,s − µs ) bxj,m,t        (B.36)
                                                          j


   • Variance of transaction component:

                                                               q
                                                         X
                          varm,t (pj,k − µj,s ) =             Bj,m,t varj,m,t (pj,k − µj,s ) bxj,m,t      (B.37)
                                                          j


   • Covariance: store component, store-specific good component:

                                                          q
                                                   X
              covm,t (µs − µj , µj,s − µs ) =            Bj,m,t covj,m,t (µs − µj , µj,s − µs ) bxj,m,t   (B.38)
                                                     j


Fourth, we compute the fraction of variation due to each source separately for each market and
quarter, by dividing (B.35)-(B.38) by (B.34). We then take the expenditure weighted average of
these fractions across all markets and time periods. So, for example, the average contribution of
the store component is given by
                                     X varm,t (µs − µj )
                                                         xm,t .                           (B.39)
                                     m,t
                                          varm,t (pj,k )

The contribution of the other components are defined analogously.



B.4     Restriction on the variance of the transaction component
In Section 3.3, we decompose prices under the assumption that the variance of the transaction
component is constant across certain subgroups of goods and markets. The procedure is as follows.
First, we assume that the variance of the transaction component for good j in sold at store s in
market m in quarter t is given by

                            varj,s,t (pj,k − µj,s ) = αD(j),t + αm(s),t + εj,s,t                          (B.40)

where varj,s,t (pj,k − µj,s ) refers to the variance of the transaction component of normalized prices
for good j at store s.
                                                                                              2

                                                (pj,k − µj,s )2 ωj,k
                                          X                               X
              varj,s,t (pj,k − µj,s ) =                                −  (pj,k − µj,s ) ωj,k  .        (B.41)
                                          k∈s                               k∈s


The first term on the right-hand side of (B.40) is a department effect, where the department
corresponding to good j is denoted by D (j). The second term on the right-hand side of (B.40) is
a market effect. The third term is an error term.
We estimate (B.40) using weighted least squares, with weights given by the Bessel factors corre-




                                                              56
sponding to the expenditure on good j at store s

                                                          2
                                x                        Rj,s,m,t
                               Bj,s,m,t =                                          .             (B.42)
                                                                    (Pj,k qjk )2
                                                             X
                                             2
                                            Rj,s,m,t −
                                                         k∈s∩m∩t

These weights account for the fact that µj,s are sample means that have been estimated with a
potentially different number of transactions for each store/good pair. Since (B.40) implies that the
predicted variance of the transaction component for each good is the same for all stores in a given
market, the predicted variance of the transaction component for market m in quarter t is given by

                                ˆ j,m,t (pj,k − µj,s ) = α̂D(j),t + α̂m(s),t
                               var                                                               (B.43)

We then compute the variance of the store-good component as

                   ˆ j,m,t (µj,s − µs ) = varj,m,t (pj,k − µs ) − var
                  var                                              ˆ j,m,t (pj,k − µj,s )        (B.44)



B.5     Retailer decomposition of prices
In Section 3.4 we decompose pjk using the two identities

                          µs − µj = (µr − µj ) + (µs − µr )                                      (B.45)
                         pj,k − µs = (µj,r − µr ) + (pj,k − µs − µj,r + µr )                     (B.46)

To define the terms on the right-hand side of (B.45) and (B.46) we require some more notation.
Let ωj,r denote the quantity weight for good j of retailer r, i.e. the relative contribution of retailer
r to the total purchases of good j, defined as:
                                                     X
                                                             qj,k
                                                     k∈r
                                              ωj,r = X     .                                     (B.47)
                                                      qj,k
                                                         k

Let Rj,r denote the revenue from good j at store r, let Rr denote the total revenue at retailer r,
and let ρj,r denote the revenue weight for good j at store r, i.e. the relative contribution of good
j to the total revenues of retailer r:
                                                     X
                                         Rj,r =              Pj,k qj,k                           (B.48)
                                                     k∈r
                                                     X
                                            Rr =             Rj,r                                (B.49)
                                                         j
                                                     Rj,r
                                            ρj,r =                                               (B.50)
                                                     Rr




                                                     57
The objects on the right-hand side of (B.45) and (B.46) are defined as
                                                   X              ωj,k
                                       µj,r =              pj,k                               (B.51)
                                                   k∈r
                                                                  ωj,r
                                                   X
                                         µr =              µj,r ρj,r                          (B.52)
                                                       j



The quantity-weighted variances and covariances of each of the terms in (B.45) and (B.46) are
defined analogously to those in (B.21)-(B.26). Note that the covariance between the terms in
(B.45) and the terms in (B.46) is equal to the covariance between the store component and the
store-specific good component in (B.26), since the other covariance terms were shown above to be
zero.



B.6     Household price index decomposition
Let Xi,j,k denote the expenditure of household i on good j on shopping trip k, and let Xi denote
the total expenditure of household i on all goods,

                                       Xi,j,k = Pj,k qj,k                                     (B.53)
                                                       X
                                            Xi =               Xi,j,k .                       (B.54)
                                                       j,k∈i


Let X i,j,k denote the hypothetical expenditure of household i on good j on shopping trip k evaluated
at the average price of good j in market m (i) in the corresponding quarter, and let X i denote the
corresponding hypothetical total expenditure at average prices of household i on all goods,

                                       X i,j,k = P j qj,k                                     (B.55)
                                                           X
                                            Xi =               X i,j,k                        (B.56)
                                                       j,k∈i


where the average price P j is defined as
                                                   X
                                            Pj =       Pj,k ωj,k                              (B.57)
                                                   k


Let ωi,j,k be the expenditure weight for household i of good j on shopping trip k, evaluated at
average prices, i.e. the contribution of good j on shopping trip to household i’s total expenditure
at average prices:
                                                    X i,j,k
                                           ωi,j,k =         .                                (B.58)
                                                     Xi

In Section 4.2 we define the price index for household i, pi as

                                                       Xi
                                               pi =       .                                   (B.59)
                                                       Xi


                                                   58
We decompose pi by writing pi as

                                                       Xi
                                           pi =
                                                       Xi
                                                        X
                                                               Pj,k qj,k
                                                       j,k∈i
                                                =
                                                               Xi
                                                        X
                                                               pj,k P j qj,k
                                                       j,k∈i
                                                =
                                                                Xi
                                                        X
                                                               pj,k X i,j,k
                                                       j,k∈i
                                                =
                                                                  Xi
                                                       X                X i,j,k
                                                =                pj,k
                                                       j,k∈i
                                                                         Xi
                                                       X
                                                =                pj,k ωi,j,k                                          (B.60)
                                                       j,k∈i


where the second line follows from (B.53) and (B.54), the third line follows from (B.57) and (B.2),
the fourth line follow from (B.55) and the last line follows from (B.58). We then substitute (B.10)
into (B.60) and obtain the following identity:
                  X
         pi =            [µj + (µs − µj ) + (µj,s − µs ) + (pj,k − µj,s )] ωi,j,k
                 j,k∈i
                         X                          X                               X
             = 1+             (µs − µj ) ωi,j,k +           (µj,s − µs ) ωi,j,k +           (pj,k − µj,s ) ωi,j,k .   (B.61)
                      j,k∈i                         j,k∈i                           j,k∈i


We decompose pi by taking variances across households of both sides of (B.61).




                                                            59
