                             NBER WORKING PAPER SERIES




      TEACHER-TO-CLASSROOM ASSIGNMENT AND STUDENT ACHIEVEMENT

                                      Bryan S. Graham
                                        Geert Ridder
                                     Petra M. Thiemann
                                       Gema Zamarro

                                     Working Paper 27543
                             http://www.nber.org/papers/w27543


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                    July 2020




We thank seminar audiences at the 2017 All-California Econometrics Conference at Stanford
University, UC Riverside, NESG, University of Duisburg-Essen, Tinbergen Institute Amsterdam,
Lund University, IFN Stockholm, the University of Bristol, and the University of Southern
California for helpful feedback. We thank Tommy Andersson, Kirabo Jackson, Magne Mogstad,
Hessel Oosterbeek, Daniele Paserman, and Hashem Pesaran for useful comments and
discussions. All the usual disclaimers apply. Financial support for Graham was provided by the
National Science Foundation (SES #1357499, SES #1851647). Thiemann was affiliated with
USC Dornsife INET while working on this paper. The views expressed herein are those of the
authors and do not necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2020 by Bryan S. Graham, Geert Ridder, Petra M. Thiemann, and Gema Zamarro. All rights
reserved. Short sections of text, not to exceed two paragraphs, may be quoted without explicit
permission provided that full credit, including © notice, is given to the source.
Teacher-to-Classroom Assignment and Student Achievement
Bryan S. Graham, Geert Ridder, Petra M. Thiemann, and Gema Zamarro
NBER Working Paper No. 27543
July 2020
JEL No. C14,C36,I21,I24

                                          ABSTRACT

We study the effects of counterfactual teacher-to-classroom assignments on average student
achievement in elementary and middle schools in the US. We use the Measures of Effective
Teaching (MET) experiment to semiparametrically identify the average reallocation effects
(AREs) of such assignments. Our findings suggest that changes in within-district teacher
assignments could have appreciable effects on student achievement. Unlike policies which
require hiring additional teachers (e.g., class-size reduction measures), or those aimed at changing
the stock of teachers (e.g., VAM-guided teacher tenure policies), alternative teacher-to-classroom
assignments are resource neutral; they raise student achievement through a more efficient
deployment of existing teachers.

Bryan S. Graham                                  Petra M. Thiemann
University of California - Berkeley              Lund University
530 Evans Hall #3880                             Department of Economics
Berkeley, CA 94720-3880                          P.O. Box 7080
and NBER                                         22007 Lund
bgraham@econ.berkeley.edu                        Sweden
                                                 petra.thiemann@nek.lu.se
Geert Ridder
Department of Economics                          Gema Zamarro
University of Southern California                University of Arkansas
Kaprielian Hall                                  219B Graduate Education Building
Los Angeles, CA 90089                            Fayetteville, AR 72701
ridder@usc.edu                                   gzamarro@uark.edu
1       Introduction
Approximately four million teachers work in the public elementary and secondary education
system in the United States. These teachers provide instruction to almost fifty million stu-
dents, enrolled in nearly one hundred thousand schools, across more than thirteen thousand
school districts (McFarland et al., 2019, Snyder et al., 2017). Differences in measured stu-
dent achievement are substantial across US schools as well as across classrooms within these
schools. Beginning with Hanushek (1971), a large economics of education literature attributes
cross-classroom variation in student achievement to corresponding variation in (largely) la-
tent teacher attributes. These latent attributes are sometimes referred to as teacher quality
or teacher value-added.
    The implications of value-added measures (VAM) for education policy are controver-
sial both within the academy and outside it.1 The most contentious applications of VAM
involve their use in teacher tenure and termination decisions (cf., Chetty et al., 2012, Darling-
Hammond, 2015). The premise of such applications is that changes in the stock of existing
teachers ­ specifically rooting out teachers with low VAMs and retaining those with high
ones ­ could lead to large increases in student achievement and other life outcomes.
    In this paper we pose an entirely different question: is it possible to raise student achieve-
ment, without changes to the existing pool of teachers, by changing who teaches whom?
Schools and school districts are the loci of teacher employment. To keep our analysis policy-
relevant, we therefore focus on the achievement effects of different within-school and within-
district teacher-to-classroom assignment policies.
    For teacher assignment policies to matter, teachers must vary in their effectiveness in
teaching different types of students. For example, some teachers may be especially good
at teaching English language learners, minority students, or accelerated learners (c.f., Dee,
2004, Loeb et al., 2014). Formally educational production must be non-separable in some
teacher and student attributes (Graham et al., 2007, 2014, 2020).
    Using data collected in conjunction with the Measures of Effective Teaching (MET)
project, we present experimental evidence of such non-separabilities. We expand upon stan-
dard models of educational production, which typically assume that the effects of teacher and
student inputs are separable. Our identification strategy relies on the random assignment of
teachers to classrooms in the MET project. Specifically, we study assignments based upon
(i) an observation-based, pre-experiment measure of teaching practice ­ Danielson's (2011)
Framework for Teaching (FFT) instrument ­ and (ii) students' and classroom peers' baseline
test scores, also measured pre-experiment.
    Alternative teacher assignments change the joint distribution of these variables. When
    1
     See, for example, the March 2015 special issue of Educational Researcher on value-added research and
policy or the American Statistical Association's statement on value-added measures (Morganstein and Wasser-
stein, 2014).

                                                    1
the educational production function is non-separable in these variables, these changes can
affect average achievement. Focusing on assignments based on teacher FFT and student
baseline achievement, we find that within-district changes in teacher-to-classroom assign-
ments could increase average classroom student achievement by as much as 0.04 standard
deviations. This effect corresponds to the estimated difference in average achievement across
the teacher-to-classroom assignment which maximizes aggregate achievement versus the one
which minimizes it. Perhaps more realistically, comparing the status quo assignment in MET
schools ­ which was generated by random assignment of teachers to classrooms ­ with the
optimal one generates an estimated increase in average test scores of 0.02 standard deviations.
    To benchmark these effects consider a policy which removes the bottom  × 100 percent of
teachers from classrooms ­ sorted according to their VAM ­ and replaces them with average
teachers (i.e., teachers with VAMs of zero). Assuming a Gaussian distribution for teacher
value-added, the effect of such an intervention would be to increase the mean of the student
test score distribution by
                                                  q 

                                     (1 -  ) 
                                               1 -  q 



standard deviations.2 Here  corresponds to the standard deviation of teacher value-added
and q to its  th quantile.
    Rockoff (2004, Table 2) and Rothstein (2010, Table 6) estimate a standard deviation
of teacher value-added of between 0.10 and 0.15. Taking the larger estimate and setting
 = 0.05 (0.10) generates an expected increase in student test scores of 0.015 (0.026) stan-
dard deviations; smaller than, albeit comparable to, our reallocation effects. We note that
replacing five (ten) percent of teachers would be difficult to do in practice. It would be even
more difficult to correctly identify the bottom five (ten) percent of teachers (according to VA)
and replace them with average ones. We conclude that the achievement effects of teacher
assignment policies are meaningful.
    In contrast to policies which replace teachers, and/or require the hiring of new ones,
the within-school and within-district teacher reassignment policies we explore in this paper
are resource neutral. Districts require no new teachers or financial resources to implement
them. Of course, reassigning teachers across classrooms, and especially across schools within
a district, may involve other types of costs. For example, many school districts operate under
collective bargaining agreements which give senior teachers partial control over their school
assignment (e.g., Cohen-Vogel et al., 2013).3
   2
     As is common practice, we abstract from the effects of possible behavioral responses to VAM-guided
teacher retention policies. For example, teachers might become demoralized by VAM retention systems and
teach less effectively as a result; or they could be motivated to teach more effectively.
   3
     Moreover, many teachers have preferences over school and student characteristics. Thus, one might need
to pay bonuses to move teachers to certain schools or classrooms (e.g., classrooms with high fractions of
disadvantaged students).



                                                    2
    Our decision to use teacher FFT, students' and peers' baseline test scores as assignment
variables was driven by their availability in the MET dataset. Of course, observational
measures of teaching practices, such as the FFT, are routinely used for teacher evaluation,
promotion, and retention decisions. Its seems reasonable, therefore, to explore whether they
might also aid in determining a teacher's classroom assignment.
    It seems likely, however, that assignments based upon a different pair of teacher and
classroom attributes would lead to greater achievement gains.4 Working with appropriately
chosen linear combinations of multiple student and teacher attributes could generate even
larger achievement gains. We leave explorations along these lines to future research.
    Readers may reasonably raise questions about the external validity of the results reported
below. We believe such skepticism is warranted and encourage readers to view what is
reported below as provisional. We do, however, hope our results are sufficiently compelling
to motivate additional research and experimentation with teacher-to-classroom assignment
policies.
    Work by Susanna Loeb and co-authors suggests that US school districts have de facto
teacher-to-classroom assignment policies (Kalogrides et al., 2011, Grissom et al., 2015). For
example, they find that less experienced, minority, and female teachers are more likely to be
assigned to predominantly minority classrooms. They also present evidence that principals
use teacher assignments as mechanisms for retaining teachers ­ as well as for encouraging
less effective teachers to leave ­ and that more experienced teachers exert more influence on
classroom assignment decisions.
    Our work helps researchers and policy-makers understand the achievement effects of such
policies and the potential benefits of alternative ones. The findings presented below suggest
that teacher-to-classroom assignment policies are consequential and that changes to them
could meaningfully increase average student achievement.
    In addition to our substantive results, we present new identification results for average
reallocation effects (AREs). Identification and estimation of AREs under (conditional) exo-
geneity is considered by Graham et al. (2014, 2020). Unfortunately these results do not apply
directly here. Although teachers were randomly assigned to classrooms as part of the MET
experiment, compliance was imperfect. Furthermore some students moved across classrooms
after the random assignment of teachers, which raises concerns about bias due to endogenous
student sorting. We develop a semiparametric instrumental variables estimator (e.g., Ai and
Chen, 2003) which corrects for student and teacher non-compliance. Our analysis highlights
how complex identification can be in the context of multi-population matching models where
agents sort endogenously.
    In independent work, Aucejo et al. (2019) also use the MET data to explore comple-
mentarity between student and teacher attributes in educational production. They do not
  4
      That is, we did not consider the universe of possible assignment variables.

                                                       3
focus on adjusting for teacher and student non-compliance as we do, emphasizing instead
an intent-to-treat type analysis. Their paper includes an interesting analysis of the different
sub-components of the FFT measure; something not done here. Despite these methodolog-
ical differences, their results are qualitatively concordant with ours. In earlier work, Dee
(2004, 2005) uses Project STAR data to study complementarity between teacher and student
minority status.


2       Model and identification
Our goal is to identify the average achievement effects of alternative assignments of teachers to
MET classrooms. These are average reallocation effects (AREs), as introduced by Graham
et al. (2007, 2014). The identification challenge is to use the observed MET teacher-to-
classroom assignments and outcomes to recover these AREs.
    Our analysis is based upon experimentally generated combinations of student and teacher
attributes, that is, it exploits the random assignment of teachers to classrooms in the MET
experiment.5 Like in many other field experiments, various deviations from MET's intended
protocol complicate our analysis. In this section we outline a semiparametric model of educa-
tional production and consider its identification based upon the MET project as implemented,
using the MET data as collected.
    It is useful, however, to first explore nonparametric identification of reallocation effects
under an ideal implementation of the MET project (henceforth MET as designed ). Such an
approach clarifies how the extra restrictions introduced below allow for the identification of
reallocation effects despite non-compliance, attrition, and other deviations from the intended
experimental protocol.


Nonparametric identification under ideal circumstances
Our setting features two populations, one of students and the other of teachers. Each student
is distinguished by an observed attribute Xi , in our case a measure of baseline academic
achievement, and an unobserved attribute, say "student ability," Vi . Similarly, each teacher
is characterized by an observed attribute Wi , in our case an observation-based measure of
teaching pedagogy, and an unobserved attribute, say "teacher quality," Ui .6
    Let i = 1, . . . , N index students. Let C be the total number of MET classrooms or
equivalently teachers. We define Gi to be a C × 1 vector of classroom assignment indicators.
The cth element of Gi equals one if student i is in classroom c  {1, . . . , C } and zero otherwise.
    5
    To be precise, the randomization was carried out within schools. See Section 3 for details.
    6
    We use "ability" as a shorthand for latent student attributes associated with higher test scores; likewise
we use "quality" as a shorthand for latent teacher attributes associated with higher test scores.



                                                      4
The indices of student i s peers or classmates are therefore given by the index set

                                          p (i) = {j : Gi = Gj , i = j } .

Next we define the peer average attribute as X ¯ p(i) = 1
                                                       |p(i)|  j p(i) Xj (i.e., the average of the
characteristic X across student i s peers). We define V¯p(i) similarly.
    The MET project protocol did not impose any requirements on how students, in a given
school-by-grade cell, were divided into classrooms. Evidently schools followed their existing
procedures for dividing students within a grade into separate classrooms. An implication of
this observation is that the MET experiment implies no restrictions on the joint density

                                             fXi ,Vi ,X       ¯p(i) (x, v, x
                                                      ¯ p(i) ,V            ¯, v
                                                                              ¯),                                    (1)

beyond the requirement that the density be feasible.7 For example, if most schools tracked
students by prior test scores, then we would expect Xi and X ¯ p(i) to positively covary. If,
instead, students were randomly assigned to classrooms and hence peers, we would have,
ignoring finite population issues, the factorization

                         fXi ,Vi ,X       ¯p(i) (x, v, x
                                  ¯ p(i) ,V            ¯, v
                                                          ¯) = fXi ,Vi (x, v )fX       ¯p(i) (¯
                                                                               ¯ p(i) ,V         ¯).8
                                                                                              x, v

Our analysis allows for arbitrary dependence between own and peer attributes, both observed
and unobserved, and consequently is agnostic regarding the protocol used to group students
into classrooms.
    Two implications of this agnosticism are (i) our analysis is necessarily silent about the
presence and nature of any peer group effects, and (ii) it is likely that more complicated poli-
cies, involving simultaneously regrouping students into new classes and reassigning teachers
to them, could raise achievement by more than what is feasible via reassignments of teachers
to existing classrooms alone, which is the class of policies we consider.9
    Although nothing about the MET protocol generates restrictions on the joint density (1),
random assignment of teachers to classrooms ­ however formed ­ ensures that

            fXi ,Vi ,X       ¯p(i) ,Wi ,Ui (x, v, x
                     ¯ p(i) ,V                    ¯, v
                                                     ¯, w, u) = fXi ,Vi ,X       ¯p(i) (x, v, x
                                                                         ¯ p(i) ,V               ¯)fWi ,Ui (w, u).
                                                                                              ¯, v                   (2)

Here Wi and Ui denote the observed and unobserved attributes of the teacher assigned to
the classroom of student i. A perfect implementation of MET as designed would ensure
   7
     We cannot, for example, have an assignment which implies all students have above-average peers.
   8
     Indeed additional restrictions on the second density to the right of the equality above would also hold;
see Graham et al., 2010, and Graham, 2011, for additional discussion and details.
   9
     Learning about the effects of policies which simultaneously regroup students and reassign teachers would
require double randomization. See Graham (2008) for an empirical example and Graham et al. (2010, 2020)
for a formal development.


                                                              5
that student and teacher attributes vary independently of each other. Our research design is
fundamentally based upon restriction (2).
   Let Yi be an end-of-year measure of student achievement, generated according to

                                            ¯ p(i) , Wi , Vi , V
                                Yi = g Xi , X                  ¯p(i) , Ui .                                     (3)

Other than the restriction that observed and unobserved peer attributes enter as means,
equation (3) imposes no restrictions on educational production.10 Under restriction (2) the
conditional mean of the outcome given observed own, peer, and teacher attributes equals

                 ¯ p(i) = x
  E Yi | Xi = x, X        ¯, Wi = w =               g (x, x
                                                          ¯, w, v, v
                                                                   ¯, u) f Vi ,V                     ¯| x, x
                                                                               ¯p(i) |Xi ,Xp(i) ( v, v     ¯)

                                        ×f Ui |Wi ( ui | wi ) dv d¯
                                                                  v du                                          (4)

                                        = mamf (x, x
                                                   ¯, w ) .

Equation (4) coincides with (a variant of) the Average Match Function (AMF) estimand
discussed by Graham et al. (2014, 2020). The AMF can be used to identify AREs. Our
setting ­ which involves multiple students being matched to a single teacher ­ is somewhat
more complicated than the one-to-one matching settings considered by Graham et al. (2014,
2020). One solution to this "problem" would be to average equation (3) across all students in
the same classroom and work directly with those averages. As will become apparent below,
however, working with a student-level model makes it easier to deal with non-compliance
and attrition, which have distinctly student-level features. It also connects our results more
directly with existing empirical work in the economics of K-to-12 education, where student-
level modelling predominates, and results in greater statistical power.
    The decision to model outcomes at the student level makes the analysis of teacher re-
assignments a bit more complicated, at least superficially. To clarify the issues involved it is
helpful to consider an extended example. Assume there are two types of students, Xi  {0, 1},
and two types of teachers, Wi  {0, 1}. For simplicity assume that the population fractions
of type Xi = 1 students and type Wi = 1 teachers both equal one-half, that is, half of the
students are of type 1 and half of the students are taught by a teacher of type 1. Assume,
again to keep things simple, that classrooms consist of three students each.
    Table 1 summarizes this basic set-up. Column 1 lists classroom types. For example, a
000 classroom consists of all type-0 students. There are four possible classroom types, each
assumed to occur with a frequency of one-fourth.11 The status quo mechanism for grouping
students into classrooms induces a joint distribution of own and peer average attributes.
  10
     A fully nonparametric model would allow achievement to vary with any exchangeable function of peer
attributes; see Graham et al. (2010) for more details.
  11
     Within classrooms students are exchangeable.



                                                    6
                                     Table 1: Feasible teacher reassignments

                                  Status quo                  Counterfactual
  Classroom Type                           ¯ p(i)
                           Pr Wi = 1| Xi , X               Pr W             ¯ p(i)
                                                               ~ i = 1 Xi , X               Xi     ¯ p(i)
                                                                                                   X               ¯ p(i)
                                                                                                            f Xi , X
                                         1                                1                                         1
          000                            2                                3
                                                                                             0       0              4
                                                                                                                    1
                                                                                             0       0              4
                                                                                                                    1
                                                                                             0       0              4
                                         1                                1                           1             1
          001                            2                                2
                                                                                             0        2             6
                                                                                                      1             1
                                                                                             0        2             6
                                                                                                                    1
                                                                                             1       0              12
                                         1                                1                                         1
          011                            2                                2
                                                                                             0       1              12
                                                                                                      1             1
                                                                                             1        2             6
                                                                                                      1             1
                                                                                             1        2             6
                                         1                                2                                         1
          111                            2                                3
                                                                                             1       1              4
                                                                                                                    1
                                                                                             1       1              4
                                                                                                                    1
                                                                                             1       1              4
Note: The population fraction of type Xi = 1 students is 1                                                 1
                                                              2 and that of type Wi = 1 teachers is also 2 .
Classrooms of three students each are formed, such that the frequency of each of the four possible classroom
                  1
configurations is 4 in the population of classrooms of size 3. Under the status quo teachers are assigned to
classrooms at random; in the counterfactual teachers are assigned more assortatively. See the main text for
more information.



                                                                                                                1
This joint distribution is given in the right-most column of Table 1. For instance, 4                               (3 out
                                                                                                                          1
of 12) of the students are in a classroom with two type-0 peers, so that fXi ,X                       ¯ p(i) (0, 0) = 4 ,

and 1   6
            (2 out of 12) of the students are in a classroom with one type-0 and one type-1 peer,
                               1     1
so that fXi ,X      ¯ p(i) (0, 2 ) = 6 . The MET experiment implies no restrictions on the joint density

f Xi , X
       ¯ p(i) (x, x¯), consequently we only consider policies which leave it unchanged.
      Next assume, as was the case in the MET experiment, that under the status quo teachers
are randomly assigned to classrooms. This induces the conditional distribution of Wi given
Xi and X       ¯ p(i) reported in column 2 of Table 1. Of course, from this conditional distribution,
and the marginal for Xi and X               ¯ p(i) , we can recover the joint distribution of own type, peer
average type, and teacher type (i.e., of Xi , X                ¯ p(i) and Wi ).
      Now consider the AMF: mamf (x, x               ¯, w). Consider the subpopulation of students with Xi =
1 and X      ¯ p(i) = . Inspecting Table 1, this subpopulation represents 1 of all students (right-
                         1
                         2                                                                   6
most column of Table 1). If we assign to students in this subpopulation a teacher of type
Wi = 1, then the expected outcome coincides with mamf 1, 1                         2
                                                                                     , 1 . Under random assignment
of teachers the probability of assigning a type-1 teacher is the same for all subpopulations of
students.
      Finally consider a counterfactual assignment of teachers to classrooms. Since we leave the
composition of classrooms unchanged, fXi ,X                ¯ p(i) (x, x
                                                                      ¯) is left unmodified. The counterfactual as-
signment therefore corresponds to a conditional distribution for teacher type, f                    ~~        ¯ p(i) ( w | x, x
                                                                                                                              ¯)
                                                                                                     Wi |Xi ,X




                                                             7
which satisfies the feasibility condition:

                           ~~
                           f         ¯ p(i) ( w | x, x          ¯ p(i) (x, x
                                                     ¯ ) f Xi , X          ¯) dxd¯
                                                                                 x = f (w)               (5)
                             Wi |Xi ,X



for all w  W. Here f      ~ denotes a counterfactual distribution, while f denotes a status
quo one. We use W   ~ i to denote an assignment from the counterfactual distribution. Note
                                        ~i =D
that by feasibility of an assignment W         Wi marginally, but will differ conditional on
student attributes. Condition (5), as discussed by Graham et al. (2014), allows for degenerate
conditional distributions, as might occur under a perfectly positive assortative matching.
    Average achievement under a counterfactual teacher-to-classroom assignment equals:

             ~ =
         are f                mamf (x, x      ~~
                                       ¯, w ) f         ¯ p(i) ( w | x, x
                                                                        ¯) dw fXi ,X
                                                                                   ¯ p(i) (x, x
                                                                                              ¯) dxd¯
                                                                                                    x.   (6)
                                                Wi |Xi ,X


Since all the terms to the right of the equality are identified, so too is the ARE. Conceptually
we first ­ see the inner integral in equation (6) ­ compute the expected outcome in each type
of classroom (e.g., Xi = x and X      ¯ p(i) = x
                                               ¯) given its new teacher assignment (e.g., to type
 ~
Wi = w). We then ­ see the outer two integrals in equation (6) ­ average over the status quo
                     ¯ p(i) , which is left unchanged. This yields average student achievement
distribution of Xi , X
under the new assignment of teachers to classrooms.
    In addition to the feasibility condition (5) we need to also rule out allocations that assign
different teachers to students in the same classrooms. Note that mamf (x, x      ¯, w) is the average
outcome for the subpopulation of students of type Xi = x with peers X      ¯ p(i) = x¯. For example,
in Table 1 classroom 001 has students from two subpopulations so defined. Assignment of
teachers to subpopulations of students opens up the possibility that a classroom is assigned
to teachers of different types for its constituent subgroups of students. If, as indicated
in Table 1, the teacher-type assignment probability is the same for all subpopulations of
students represented in a classroom, then the ARE in equation (6) coincides with one based on
direct assignment of teachers to classrooms. This implicit restriction on teacher assignments
provides a link between models for individual outcomes and classroom-level reallocations.


Semiparametric identification under MET as implemented
In the MET experiment as implemented not all teachers and students appear in their assigned
classrooms. This occurs both due to attrition (e.g., when a student changes schools prior
to follow-up) as well as actual non-compliance (e.g., when a teacher teaches in a classroom
different from their randomly assigned one).
    In this section we describe our approach to identifying AREs in MET as implemented.
Relative to the idealized analysis of the previous subsection we impose two types of additional


                                                      8
restrictions. First, we work with a semiparametric, as opposed to a nonparametric, educa-
tional production function. Second, we make behavorial assumptions regarding the nature
of non-compliance. Both sets of assumptions are (partially) testable.

Educational production function

Our first set of restrictions involve the form of the educational production function. A key re-
striction we impose is that unobserved student, peer, and teacher attributes enter separably.
Although this assumption features in the majority of economics of education empirical work
(e.g., Chetty et al., 2014a,b), it is restrictive. We also discretize the observed student and
teacher attribute. This allows us to work with a parsimonously parameterized educational
production function that nevertheless accommodates complex patterns of complementarity
between student and teacher attributes. Discretization also allows us to apply linear program-
ming methods to study counterfactual assigments (c.f., Graham et al., 2007, Bhattacharya,
2009).
     Specifically we let Xi be a vector of indicators for each of K "types" of students. Types
correspond to intervals of baseline test scores. Our preferred specification works with K = 3
types of students: those with low, medium, and high baseline test scores.12 In this case Xi is
a 2 × 1 vector of dummies for whether student i's baseline test score was in the medium or
high range (with the low range being the omitted group). This definition of Xi means that
X¯ p(i) equals the 2 × 1 vector of fractions of peers in the medium and high baseline categories
(with the fraction low range omitted).
     We discretize the distribution of the teacher attribute similarly: Wi is a vector of indicators
for L different ranges of FFT scores. In our preferred specification we also work with L = 3
types of teachers: those with low, medium, and high FFT scores. Hence Wi is again a 2 × 1
vector of dummies for whether the teacher of student i's FFT score was in the medium or
high range (with the low range again being the omitted group).
     We assess the sensitivity of our results to coarser and finer discretizations of the baseline
test score and FFT distributions. Specifically we look at K = L = 2 and K = L = 4
dicretizations.
     We posit that end-of-school year achievement for student i is generated according to

                                                    ¯p(i) + Wi  + Ui
                                          ¯ p(i)  + V
                      Yi =  + Xi  + V i + X
                              Student Ability        Peer Effect         Teacher Quality
                                                                                                     (7)
                         +             ¯ p(i) 
                                   Xi  X                                       ¯ p(i) 
                                                            + (Xi  Wi )  + Wi  X
                             Student-Peer Complementarity          Student-Teacher Complementarity


                                                ¯p(i) , and teacher, Ui , unobservables enter
Observe that ­ as noted above ­ own, Vi , peer, V
  12
       Precise variable definitions are given below.


                                                             9
equation (7) additively. The labelled grouping of terms in equation (7) highlights the flex-
ibility of our model relative to those typically employed by researchers. As in traditional
models, observed and unobserved student and teacher attributes are posited to directly in-
fluence achievement. We add to this standard set-up the possibility of complementarity
between own and peer attributes, and complementarity between own and teacher attributes.
Additionally our model allows for both observed and unobserved peer attributes to influence
achievement.
    Conditional on working with a discrete student and teacher type space, equation (7) is
unrestrictive in how own and teacher attributes interact to generate achievement. In contrast,
equation (7) restricts the effect of peers' observed composition on the outcome. Partition
 = (1 , . . . , K -1 ) and similarly partition  = (1 , . . . , L-1 ). The (K - 1) × 1 gradient of
student i's outcome with respect to peer composition is

                                                   K -1             L-1
                                   Yi
                                   ¯ p(i) =  +
                                   X
                                                          Xki k +         Wli l ,                             (8)
                                                    k=1             l=1


which is constant in X ¯ p(i) , although varying heterogenously with student and teacher type.
Put differently convexity/concavity in X   ¯ p(i) is ruled out by equation (7). It should be noted
that the MET data, in which the assignment of peers is not random, are not suitable for
estimating peer effects (non-linear or otherwise).
    For completeness we also include the interaction of teacher type with peer composition
­ the Wi  X   ¯ p(i) regressor in equation (7) ­ although  is poorly identified in practice.13
Due to our limited sample size, we do not include the third order interactions of own, peer,
and teacher types.14
    Relative to a standard "linear-in-means" type model typically fitted to datasets like ours
(e.g., Hanushek et al., 2004):

                                              ¯ p(i)  + Wi  + Vi + Ui ,
                                Yi =  + Xi  + X                                                               (9)

equation (7) is rather flexible. It allows for rich interactions in observed own, peer, and
teacher attributes and is explicit in that both observed and unobserved peer attributes may
influence own achievement. The "linear-in-means" model (9) presumes homogenous effects
  13
      Admittedly, the Wi  X ¯ p(i) term is not entirely straightforward to interpret; however it seemed ad hoc
to include some second-order interactions while a priori excluding others. We also report specifications which
exclude this term below (as its coefficient is always insignificantly different from zero).
   14
      The educational production function in equation (7) includes J = dim() + dim( ) + dim( ) + dim( ) +
dim( ) + dim( ) + dim() = 1 + 2 + 2 + 2 + 4 + 4 + 4 = 19 parameters. A fully interacted model would
introduce 8 additional parameters, for 3 × 3 × 3 = 27 in total. Even this model would not be fully flexible
since, although constructed from averages of binary indicators, X    ¯ p(i) is not binary-valued. A more flexible
model would therefore also include, for example, interactions of Xi with the squares of the elements of X   ¯ p(i)
(and so on.)


                                                       10
and does not explicitly incorporate unobserved peer attributes.15
    As mentioned above, a student's assigned teacher and peers may deviate from her realized
ones due to attrition and non-compliance. To coherently discuss our assumptions about these
issues we require some additional notation. Let Wi and X    ¯ p (i) denote student i s assigned
teacher and peer attribute (here p (i) is the index set of i s assigned classmates). Random
assignment of teachers to classrooms ensures that a student's assigned teacher's attributes
are independent of her own unobservables:

                                                           ¯ p (i) def
                                ¯ p (i) , W  = E Vi | Xi , X
                    E Vi | Xi , X                                           ¯ p (i) .
                                                                    g1 Xi , X                             (10)
                                           i


Here g1 (x, x
            ¯) is unrestricted. Under double randomization, with students additionally grouped
into classes at random, we would have the further restriction

                                                  ¯ p (i) = E [ Vi | Xi ] .
                                     E Vi | X i , X

However, since the MET experiment placed no restrictions on how students were grouped
into classrooms, we cannot rule out the possibility that a student's peer characteristics, X ¯ p (i) ,
predict her own unobserved ability, Vi . Consequently our data are necessarily silent about the
presence and nature of any peer group effects in learning. This limitation does not limit our
ability to study the effects of teacher reallocations, because we leave the student composition
of classrooms ­ and hence the "peer effect" ­ fixed in our counterfactual experiments.
    Finally, even with double randomization, we would still have E [ Vi | Xi ] = 0. Observed
and unobserved attributes may naturally covary in any population (e.g., for example, average
hours of sleep, which is latent in our setting, plausibly covaries with baseline achievement
and also influences the outcome). Such covariance is only a problem if, as is true in the
traditional program evaluation setting, the policies of interest induce changes in the marginal
distribution of Xi ­ and hence the joint distribution of Xi and Vi .16 This is not the case here:
any reallocations leave the joint distribution of Xi and Vi unchanged.
    The MET protocol also ensures that assigned peer unobservables, V     ¯p (i) , are independent
of the observed attributes of one's assigned teacher:

                  ¯p (i) Xi , X
                E V           ¯ p (i) , Wi = E V           ¯ p (i) def
                                               ¯p (i) Xi , X                ¯ p (i) ,
                                                                    g2 Xi , X                             (11)

             ¯ p (i) , like g1 Xi , X
with g2 Xi , X                      ¯ p (i) , unrestricted.
   Random assignment of teachers to classrooms also ensures independence of the unobserved
  15
     Manski (1993) did allow for unobserved peer attributes as did Graham (2008); but these cases are
exceptional.
  16
     A prototypical example is a policy which increases years of completed schooling. Such a policy necessarily
changes the joint distribution of schooling and unobserved labor market ability relative to its status quo
distribution.


                                                      11
attribute of a student's assigned teacher and observed student and peer characteristics:

                                          ¯ p (i) , Wi = E [ Ui | Wi ] = 0.
                              E Ui | Xi , X                                                             (12)

The second equality is just a normalization.17
    Under MET as designed we could identify AREs using equations (10), (11), and (12).
To see this let, as would be true under perfect compliance, Wi = Wi and X       ¯ p(i) = X
                                                                                         ¯ p (i) for
all i = 1, . . . , N . Using equations (10), (11), and (12) yields, after some manipulation, the
partially linear regression model (e.g., Robinson, 1988):

                                             ¯ p(i)  + h Xi , X
                 Yi = Wi  + (Xi  Wi )  + Wi  X                ¯ p(i) + Ai                               (13)

                 ¯ p(i) , Wi = 0 for
with E Ai | Xi , X

                       def
                                        ¯ p(i)
                    Ai  V i - g 1 X i , X            ¯p(i) - g2 Xi , X
                                                   + V               ¯ p(i)       + Ui ,                (14)

and where the nonparametric regression component equals

         ¯ p(i) def
  h Xi , X                        ¯ p(i) + X
                  + Xi  + g1 Xi , X        ¯  + g2 Xi , X
                                                        ¯ p(i) + Xi  X
                                                                     ¯ p(i) . (15)
                                             p(i)


Note, even under this perfect experiment, we cannot identify  ,  , and  ; these terms are
                      ¯ p(i) and g2 Xi , X
confounded by g1 Xi , X                  ¯ p(i) and hence absorbed into the nonparametric
component of the regression model. This lack of identification reflects the inherent inability
of the MET experiment to tell us anything about peer group effects. Nevertheless, as detailed
below, knowledge of  ,  , and  is sufficient to identify the class of reallocation effects we
focus upon.

Patterns of non-compliance

Unfortunately, we do not observe student outcomes under full compliance. Non-compliance
may induce correlation between Ai and Xi , X       ¯ p(i) and Wi in regression model (13). Our
solution to this problem is to construct instrumental variables for observed teacher and peer
attributes, Wi and X  ¯ p(i) ­ which necessarily reflect any non-compliance and attrition on the
part of teachers and students ­ from the assigned values, Wi and X      ¯ p (i) .
    Rigorously justifying this approach requires imposing restrictions on how, for example,
realized and assigned teacher quality relate to one another. The first assumption we make
along these lines is:

  17
     Reallocations leave the joint distribution of Ui and Wi unchanged, so we are free to normalize this mean
to zero.



                                                     12
Assumption 1. (Idiosyncratic Teacher Deviations)

                                                  ¯ p (i) , Wi = 0.
                                 E Ui - Ui | Xi , X                                           (16)

    Assumption 1 implies that the difference between realized and assigned (unobserved)
teacher "quality" cannot be predicted by own and assigned peer and teacher observables.
While Assumption 1 is not directly testable, we can perform the following plausibility test.
             
Let Ri - Ri    be the difference between the realized and assigned value of some observed
teacher attribute other than Wi (e.g., years of teaching experience). Under equation (16),
if we compute the OLS fit of this difference onto 1, Xi , Wi , and X¯ p (i) , a test for the joint
significance of the non-constant regressors should accept the null of no effect. Finding that,
for example, students assigned to classrooms with low average peer prior-year achievement,
tend to move into classrooms with more experienced teachers suggests that Assumption 1
may be implausible.
    Assumption 1 and equation (12) above yield the mean independence restriction

                                                     ¯ p (i) = 0.
                                    E Ui | Xi , Wi , X                                        (17)

This equation imposes restrictions on the unobserved attribute of student i's realized teacher.
It is this latent variable which drives the student outcome actually observed.
    Our second assumption involves the relationship between the unobserved attributes of a
student's assigned peers and those of her realized peers. These two variables will differ if
some students switch out of their assigned classrooms.

Assumption 2. (Conditionally Idiosyncratic Peer Deviations)

                 E V                   ¯ p (i) , Wi = E V
                           ¯p (i) Xi , X
                   ¯p(i) - V                                                ¯ p (i)
                                                                ¯p (i) Xi , X
                                                        ¯p(i) - V                             (18)

    Assumption 2 implies that the difference between realized and assigned unobserved peer
"quality" cannot be predicted by assigned teacher observables. We do allow for these devia-
tions to covary with a student's type and the assigned composition of her peers. Assumption
2 and equation (11) yield a second mean independence restriction of

                             ¯p(i) Wi , Xi , X
                           E V               ¯ p (i) = g2
                                                               ¯ p (i) ,
                                                          Xi , X                              (19)

where g2        ¯ p (i) def
           Xi , X        E V                                        ¯ p (i) is unrestricted. We can
                                                  ¯ p (i) + g2 Xi , X
                                      ¯p (i) Xi , X
                              ¯p(i) - V
also pseudo-test Assumption 2 using observed peer attributes. Finding, for example, that
­ conditional on own type, Xi , and assigned peers' average type, X         ¯  ­ assigned teacher
                                                                              p(i)
           
quality, Wi , predicts differences between the realized and assigned values of other observed
peer attributes provides evidence against Assumption 2.

                                                 13
    The experiment-generated restrictions ­ equations (10), (11), and (12) above ­ in conjunc-
tion with our two (informally testable) assumptions about deviations from the experiment
protocol ­ Assumptions 1 and 2 above ­ together imply the following conditional moment
restriction:

                        ¯p(i) W  , Xi , X
            E Ui + Vi + V               ¯ p (i) = g1 Xi , X
                                                          ¯ p (i) + g  Xi , X
                                                                            ¯ p (i) .         (20)
                               i                                     2


We wish to emphasize two features of restriction (20). First, the conditioning variables
are assigned peer and teacher attributes, not their realized counterparts. This reflects our
strategy of using assignment constructs as instruments. Second, any function of Wi , as well
as interactions of such functions with functions of Xi and X   ¯ p (i) do not predict the composite
error Ui + Vi + V  ¯p(i) conditional on Xi and X
                                               ¯ p (i) ; hence such terms are valid instrumental
variables.
    More specifically we redefine h to equal

                                         def
                  h Xi , X p (i) , X p(i)   + Xi  + g1 Xi , X p (i) + X p(i) 
                                                                                              (21)
                                                  
                                               + g2 Xi , X p (i) + Xi  X p(i) 

and Ai to equal

                    def                                       
                Ai  Vi - g1 Xi , X p (i)         +  V p(i) - g2 Xi , X p (i)     + Ui .       (22)

Equations (7), (21), and (22) yield an outcome equation of

                                        ¯ p(i)  + h Xi , X
            Yi = Wi  + (Xi  Wi )  + Wi  X                ¯ p (i) , X p(i) + Ai .              (23)

                                                                     ¯ p (i) and W  .
Condition (20) implies that Ai is conditionally mean zero given Xi , X            i
   Summarizing, the experimentally-induced restrictions (10), (11), and (12), and our As-
sumptions 1 and 2 together imply that:

                                                  ¯ p (i) , W  = 0.
                                     E Ai | X i , X                                           (24)
                                                             i


   The estimation simplifies if we impose a restriction on the peer attrition/non-compliance
that is similar to Assumption 2, but is on the observable peer average:

                 ¯ p(i) - X
               E X                     ¯ p (i) , Wi = E X
                          ¯ p (i) Xi , X                         ¯ p (i) Xi , X
                                                        ¯ p(i) - X            ¯ p (i) .       (25)

This restriction is directly testable. By equation (25),

                            ¯ p(i) Xi , X
                          E X           ¯ p (i) , W  = E X
                                                         ¯ p(i) Xi , X
                                                                     ¯ p (i) .
                                                   i



                                                   14
If this restriction holds the outcome equation is as in (23), but with a redefined nonparametric
h that is a function of Xi and X  ¯ p (i) only,

                               def
                h Xi , X p (i)   + Xi  + g1 Xi , X p (i) + E X  ¯ p(i) Xi , X
                                                                            ¯ p (i)  +
                                                                                                   (26)
                                    
                                   g2                      ¯ p(i) Xi , X
                                      Xi , X p (i) + Xi  E X           ¯ p (i) ,

and Ai is


          def                                 
       Ai  Vi - g1 Xi , X p (i) +  V p(i) - g2  Xi , X p (i) + Ui +
                                                                                                   (27)
           ¯ p(i) - E X
           X           ¯ p(i) Xi , X
                                   ¯ p (i)  + Xi  X   ¯ p(i) - E X
                                                                 ¯ p(i) Xi , X
                                                                             ¯ p (i)        .

   The conditional moment restriction in equation (24) also holds for this error.
   Equations (23) and (24) jointly define a partially linear model with an endogenous para-
metric component. This is a well-studied semiparametric model (see, for example, Chen
et al., 2003). The parameters  ,  , and  are identified; h Xi , X    ¯ p (i) is a nonparametric
nuisance function.
   We implement the partial linear IV estimator using the following approximation for
h(x, x
     ¯):
                            ¯ p (i)  Xi b + X
                     h Xi , X                ¯ p (i) d + Xi  X¯ p (i) f.

For this approximation we estimate  ,  , and  by linear IV fit of Yi onto a constant,
     ¯ p (i) , Xi  X
Xi , X             ¯ p (i) , Wi , (Xi  Wi ), and Wi  X     ¯ p(i) using the excluded instruments
Wi , (Xi  Wi ), and Wi  X       ¯ p (i) . Note that both assigned and realized peer groups enter
the main equation.
    As in the case with perfect compliance, we do not identify  ,  , and  , again reflecting
the inherent inability of the MET experiment to tell us anything about peer group effects.
Nevertheless knowledge of  ,  , and  is sufficient to identify the class of reallocation effects
we focus upon.


3       Data and tests of identifying assumptions
The Measures of Effective Teaching (MET) study
The MET study was conducted during the 2009/10 and 2010/11 school years in elementary,
middle, and high schools located in six large urban school districts in the United States.18
  18
    The school districts are: Charlotte-Mecklenburg (North Carolina), Dallas Independent School District
(Texas), Denver Public Schools (Colorado), Hillsborough County Public Schools (Florida), Memphis City
Schools (Tennessee), and the New York City Department of Education (New York). The participation of
school districts and schools in the MET study was voluntary.


                                                  15
The goal of the study was to examine determinants and consequences of teacher quality and
teaching practices. In the first year of the study, the MET researchers collected detailed back-
ground information on teaching practices for each teacher as well as background performance
measures for each student. In the second year of the study, MET researchers conducted
a field experiment, randomly assigning teachers to classrooms within school-by-grade-by-
subject cells ("randomization blocks"). The randomization blocks typically consisted of two
to three classrooms each. Classroom composition was not manipulated as part of the study.
For more details about the study design, see White et al. (2019) and Kane et al. (2013).
    The dataset contains detailed information on the students, their classroom teachers, and
their classroom peers. As our key measure of teaching practices, we use Danielson's (2011)
"Framework for Teaching" (FFT) measure, collected at baseline (school year 2009/10). The
FFT is designed to provide feedback to teachers, but has also been used to study the impact
of teaching practices on student outcomes (c.f., Garrett and Steinberg, 2015, Aucejo et al.,
2019). The FFT is an observational measure: teachers are video-taped several times during
a school year and subsequently rated ­ using a specially designed rubric ­ by trained raters
(often former teachers).
    For our main outcome measure we use students' 2010/11 end-of-year standardized state
test scores in the subjects mathematics and English language arts (ELA). The dataset also
includes background characteristics from school district records for students (age, gender,
race/ethnicity, special-education status, free/reduced-price lunch eligibility, gifted status,
and whether a student is an English language learner) and for teachers (education, teaching
experience in the district). Through a section identifier, we can match a student to her
classroom peers.


Sample and summary statistics
In constructing our estimation sample, we closely follow Garrett and Steinberg (2015), who
investigate the impact of FFT on students' test score outcomes in the MET study. We
restrict our sample to all elementary- and middle-school students (grades 4­8) who took part
in the randomization. Furthermore, we only include students with non-missing information
on baseline and final test score outcomes as well as students with non-missing information on
the characteristics of the assigned and realized teacher, and the characteristics of the assigned
and realized classroom peers. Details of the data construction from the MET data files are
provided in Appendix B.
    Our final sample consists of about 8,500 students and 614 teachers in math and of about
9,600 students and 649 teachers in ELA.19 The majority of the students (60 percent) are ele-
mentary school students (grades 4­5), and the remaining students are middle school students
 19
      Appendix Table A.1 summarizes all student and teacher variables.


                                                    16
(grades 6­8). Nearly 60 percent of the students are economically disadvantaged, that is, el-
igible for free/reduced-price lunch.20 The student sample is diverse, with equal proportions
of white, black, and Hispanic students.
    Student test scores are centered at the relevant district-level mean and standardized by
the relevant district-level standard deviation. MET students exceed their district average
test score by about 0.15 standard deviations on average. The majority of the teachers are
female (about 85 percent), and about two-thirds of them are white. Most of the teachers
have substantial teaching experience ­ seven years on average ­ and about 40 percent of the
teachers have graduated from a Master's program.21

Teaching practices

The MET data includes ratings of teaching practices for two domains of the FFT, "Classroom
Environment" and "Instruction." These domains are divided into four components each,22
and each component is rated on a four-point scale by each rater (unsatisfactory, basic, pro-
ficient, distinguished), with high scores in a category indicating that a teacher is closer to
an ideal teaching practice according to the FFT. The teachers are video-taped at least twice
during the school year during lessons, and each video is rated independently by at least two
raters. In our analysis, we average the scores across all videos, raters, components, and do-
mains. This aggregation of the scores is the most common one in the literature (cf., Garrett
and Steinberg, 2015, Aucejo et al., 2019).
    The FFT is on average 2.5 in math and 2.6 in ELA, which corresponds to a rating between
"basic" and "proficient"; for the purpose of our analysis, we create three categories of FFT
(see Appendix Figure A.1). We set the cutoffs at FFTs of 2.25 and 2.75. In our sample, low-
FFT teachers have "basic" teaching practices on average (average FFT of 2.1 in both math
and ELA), and high-FFT teachers have "proficient" teaching practices on average (average
FFT of 2.9 in both math and ELA); 18 percent of the teachers in math and 14 percent of
the teachers in ELA are classified as having a low FFT, 62 percent of the teachers in math
and 58 percent of the teachers in ELA are classified as having a middle FFT, and 20 percent
of the teachers in math and 28 percent of the teachers in ELA are classified as having a high
FFT. Our results are not sensitive to the exact position of the cutoffs, and we investigate
a model with two or four, instead of three, FFT categories in our sensitivity checks below.
This categorization also creates variation in FFT levels within randomization blocks: in
  20
     This variable is missing for 30 percent of the students in the math sample and for 25 percent of students
in the ELA sample.
  21
     Teaching experience and teacher education are missing for about 30 percent of teachers.
  22
     The components of the domain "Classroom Environment" are: creating an environment of respect and
rapport; establishing a culture for learning; managing classroom procedures; managing student behavior. The
components of the domain "Instruction" are: communicating with students; using questioning and discussion
techniques; engaging students in learning; using assessment in instruction.



                                                     17
our sample, 65 percent of randomization blocks in math, and 70 percent of randomization
blocks in ELA include teachers with different levels of FFT (for example, both a low- and a
middle-FFT teacher).

Test score outcomes

The end-of-year test scores provided in the MET data are z -scores, i.e., they are standardized
such that district-wide, they will be mean zero with unit standard deviation. Since MET
schools are not representative at the district level, the mean test scores may ­ and do ­
deviate from zero. We use the 2010/11 z -score as our outcome variable.
   To identify reallocation effects, we split 2009/10 baseline test scores into three bins,
corresponding to terciles of the within-district z -score distribution. In our estimation sample,
27 percent of the students in math, and 26 percent in ELA, have "low" baseline test scores,
36 percent of the students in math, and 35 percent of the students in ELA, have "middle"
baseline test scores, and 36 percent of the students in math, and 39 percent of the students
in ELA, have "high" baseline test scores.23 To include classroom peers into the analysis, we
compute the fraction of each student's classmates with high, middle, and low baseline test
scores (leave-own-out means).

Non-compliance

As outlined in Section 2, some teachers and students switched classrooms or schools before
the start of the school year, which we take into account in our identification strategy. In
our sample, 69 percent of the students in math, and 73 percent of the students in ELA, are
actually taught by their randomly assigned teachers. This level of non-compliance is high
enough to make analyses which ignore it potentially problematic.
    We also observe changes in classroom peers after the randomization but before the be-
ginning of the school year. Changes in assigned peers were driven by students who leave
schools, repeat a grade or, in some cases, by the need to adjust their schedule. On average,
students' realized peers, however, are not appreciably different from their assigned ones. The
difference in baseline z -scores between the assigned and the realized peers amounts to just
0.02 standard deviations on average both in math and in ELA.


Tests of identifying assumptions and restrictions
In this section, we report the results of the series of specification tests discussed earlier; specif-
ically tests designed to assess the plausibility of Assumptions 1 and 2. These two assumptions
impose restrictions on the nature of non-compliance by students and teachers. We further
  23
    These numbers are not exactly 33 percent in each category, because the students in our sample have on
average higher baseline test scores than the full student population in a district.

                                                   18
directly test restriction (25), which is a restriction on the nature of non-compliance by peers.
We also assess the quality of the initial MET randomization of teachers to classrooms.
    To test whether the randomization was successful in balancing student characteristics
across teachers with different levels of FFT we regress the FFT of a student's assigned teacher
on the student's own characteristics, controlling for randomization block fixed effects. None
of the student characteristics predict assigned teacher's FFT, individually or jointly, which
confirms that the randomization indeed "worked" (see Appendix Table A.2).
    Covariate balance, however, is not a sufficient condition to identify reallocation effects
under non-compliance by both students and teachers (see Section 2). Assumption 1 requires
that own and assigned peer and teacher observables should not predict the difference between
realized and assigned unobserved teacher quality. Since this assumption involves a statement
about unobserved variables, we cannot test it directly. Instead we "test" it indirectly as
described in Section 2. Specifically we use those teacher background characteristics that are
not part of the the model as replacements for the unobserved quality of a teacher: a teacher's
demographics, experience, and education. We regress the difference between realized and
assigned teacher characteristics on the student's baseline test score, the FFT of the assigned
teacher, and the average baseline test score of the assigned peers. Consistent with Assumption
1, these variables do not jointly predict differences between the characteristics of the assigned
and realized teacher in any of the regression fits (see Appendix Table A.3).
    Assumption 2 states that differences between realized and assigned unobserved peer qual-
ity cannot be predicted by assigned teacher observables, conditional on own baseline achieve-
ment and the baseline achievement of assigned peers. Again, we can only perform an indirect
test of this assumption. To do so we regress differences between the assigned and realized
characteristics of classroom peers onto the FFT of the assigned teacher, controlling for own
baseline test scores and assigned peers' average baseline test scores. We do not find, consis-
tent with Assumption 2, that teacher FFT predicts differences between the characteristics of
the assigned and realized peers (see Appendix Tables A.4 and A.5).
    Finally, we directly assess restriction (25), which implies that the baseline test scores
of realized peers cannot be predicted by assigned teacher FFT. We test this restriction by
regressing the baseline test scores of realized peers onto a student's baseline test score, the
baseline test scores of her assigned peers, as well as the FFT of her assigned teacher. We
find that this restriction also holds in our data (see Appendix Table A.6).


4    Computing reallocation effects
To construct estimates of the average effect of reassigning teachers across classrooms we
proceed in three steps. First, as outlined in Section 2, we estimate (a subset of) the param-
eters of the educational production function. Second, we feed these parameters into a linear

                                               19
programming problem to compute an optimal assignment (i.e., an assignment that maxi-
mizes aggregate achievement). Third, we compare the aggregate outcome under the optimal
assignment to the aggregate outcome under the status quo assignment, as well as to that
under the worst assignment (i.e., the one which minimizes aggregate achievement). These
comparisons provide a sense of the magnitude of achievement gains available from improved
teacher assignment policies.


Estimation of the education production function
The specification that we use to estimate the parameters of the educational production func-
tion coincides with equation (23). Since randomization was carried out within randomization
blocks, we additionally include randomization block fixed effects in this regression model. We
then estimate the model's parameters by the method of instrumental variables (IV) as de-
scribed in Section 2. Tests for instrument relevance following Sanderson and Windmeijer
(2016) confirm that our IV estimates are unlikely to suffer from weak-instrument bias (see
Appendix Table A.7).


Computing and characterizing an optimal assignment
The aim of the analysis is to find an assignment of teachers to classrooms that improves
student outcomes. What is meant by an "optimal" assignment depends, of course, on the
objective function.
    In this paper we choose to maximize aggregate outcomes (i.e., the sum of all students' test
scores). This is the "simplest" objective we can consider, it is straightforward to compute,
justifiable from a utilitarian perspective, and easy to interpret. We would like to emphasize,
however, that our analysis can be modified to accommodate other objective functions ­ in
some cases easily, in others with more difficulty. In practice, for example, the social planner
may care about both the aggregate outcome as well as inequality, especially across identifiable
subgroups.
    Our intention is not to advocate for maximization of the aggregate outcome in practice,
although doing so is appropriate in some circumstances; rather this objective provides a
convenient starting point and makes our analysis comparable to that of other educational
policy evaluations (e.g., the typical regression-based class-size analysis provides an estimate
of the effect of class-size on average achievement).
    To determine the optimal allocation, we feed the estimated parameters from equation (23),
specifically  ^, ^, and ^ , into a linear program. Given these parameters, we can compute, for
each student, her predicted outcome when taught by a low-, middle-, or high-FFT teacher,
leaving the original classroom composition unchanged.


                                              20
    Formally, for each student i, we compute three counterfactual outcomes Yi (w), w 
{wL , wM , wH }, corresponding to an assignment to a low-, middle- or high-FFT teacher. Ag-
gregated to the classroom level this yields, in an abuse of notation, three counterfactual
classroom-level test score aggregates, Yc (w) = is(c) Yi (w), with w  {wL , wM , wH } (here
s (c) denotes the set of indices for students in classroom c).
    By aggregating the counterfactual outcomes to the classroom level, we transform the as-
signment problem from a many-to-one matching problem to a one-to-one matching problem.
This approach is only suitable because the configuration of students across classrooms re-
mains fixed; we only consider the effects of reassigning teachers across existing classrooms of
students.24 The one-to-one matching problem is a special linear program, a transportation
problem, which is easily solvable.25
    There are a few additional constraints we impose to make the reallocation exercise real-
istic. First, we do not allow teachers to be reassigned across districts or across school types
(i.e., elementary or middle school). We also present, as a sensitivity check, a version of the
allocation where we only allow teachers to be reassigned within their randomization block.
Second, there are a few teachers that teach several sections of a class. In this case, we treat
these sections as clusters, and allocate one teacher to all sections in each such cluster.
    When computing counterfactual outcomes for each student, we omit the nonparametric
component, h(x, x  ¯), as well as the randomization block fixed effects and the main effects of
own baseline achievement. This is appropriate because we report the difference between the
sum of aggregate outcomes for two allocations where the nonparametric component, the fixed
effects, and the main effects of own baseline achievement cancel out.
    In addition to the optimal assignment, we also compute a "worst" possible assignment, i.e.,
the assignment that minimizes aggregate test scores. The difference between the aggregate
outcome for the best and worst assignment is the maximal reallocation gain. This provides
an upper bound on the magnitude of student achievement gains that teacher reassignments
might yield in practice.


Average Reallocation Effects
An individual reallocation effect, or reallocation gain, is defined as the difference between
an individual student's outcome under two assignments. For example, one can compute, for
                  ~ opt ), i.e., the predicted outcome under the optimal allocation, where W
each student, Yi (W                                                                        ~ opt
                    i                                                                        i
takes the values wL , wM , or wH , depending on whether the student would be assigned to
a low-, middle-, or high-FFT teacher in an optimal allocation. Similarly, one can compute
  24
     As noted earlier the effects of classroom composition changes on student achievement are unidentifiable
here in any case.
  25
     Appendix C contains the details on how we specify the transportation problem. To compute the optimal
assignment, we use the function lpSolve in R.


                                                    21
the same parameter for each student under the status quo, which we denote as Yi (Wi ). In
MET schools the status quo assignment was induced by random assignment of teachers to
classrooms within randomization blocks. The allocation of teachers across schools within a
given district was, of course, non-random, and possibly non-optimal from the standpoint of
maximizing the aggregate outcome. An individual reallocation gain can then be computed
                                                  ~ opt ) - Yi (Wi ). The optimal assignment is
as the difference between these two outcomes, Yi (W i
not the assignment that maximizes the predicted outcome for student i, but the assignment
that maximizes the aggregate outcome across all the classrooms in the sample (subject to the
various constraints we impose on the problem ­ like ruling out reassignments across school
districts).
    These individual gains can be aggregated in many ways in order to create policy-relevant
parameters. We start by defining our key parameter of interest, the average reallocation
effect, as

                                                 N
                                    1                     ~ opt ) - Yi (Wi ) .
                              ARE =                   Yi (W i                                    (28)
                                    N          i=1

    We also consider conditional average reallocation effects, that is, average reallocation
effects for students with varying baseline characteristic x (e.g., students with low, middle,
and high baseline test scores):

                                                     N
                                      1                                  ~ opt ) - Yi (Wi ) .
              ARE (x) =        N
                                                           1(Xi = x) Yi (W i                     (29)
                               i=1   1(Xi = x)       i=1

    Below we show that only about one-half of MET students would experience a teacher
change when switching from the status quo teacher assignment to an optimal one. The
reallocation effect for students in classrooms not assigned a different teacher is, of course,
zero. This motivates a focus on the average achievement gain among those students who are
assigned a different teacher. We define the reallocation effect conditional on being reassigned
as:


                                1
  AREC (x) =      N                     ~ opt )
                        1(Xi = x)1(Wi = W
                  i=1                     i
                                           N
                                       ×                         ~ opt ) Yi (W
                                                 1(Xi = x)1(Wi = W           ~ opt ) - Yi (Wi ) . (30)
                                                                   i           i
                                           i=1


   We can, of course, not condition on x as well.
   Finally, the maximal reallocation gain is obtained if we compare the average outcome
under an optimal assignment with that under a worst assignment


                                                         22
                                                    N
                   max                   1                              ~ opt ) - Yi (W
                                                                                      ~ worst ) ,
            ARE          (x) =    N
                                                          1(Xi = x) Yi (W i             i                  (31)
                                  i=1   1(Xi = x)   i=1

          ~ worst ) is the predicted outcome for student i under an allocation that minimizes
where Yi (W i
aggregate test scores.


Inference on reallocation effects
We use the Bayesian bootstrap to quantify our (posterior) uncertainty about AREs. We treat
each teacher-classroom pair as an i.i.d. draw from some unknown (population) distribution.
Following Chamberlain and Imbens (2003), we approximate this unknown population by
a multinomial, to which we assign an improper Dirichlet prior. This leads to a posterior
distribution which (i) is also Dirichlet and (ii) conveniently only places probability mass on
data points observed in our sample.
    Mechanically, we draw C standard exponential random variables and weigh each student
in section/classroom c = 1, . . . , C with the cth weight (i.e., all students in the same section
have the same weight). Using this weighted sample, we compute the IV regression fit, solve
for the optimal (worst) assignment, and compute the various reallocation effects. We repeat
this procedure 1,000 times. This generates 1,000 independent draws from the posterior
distribution of the ARE.
    Formally this approach to inference is Bayesian. Consequently the "standard errors" we
present for our ARE estimates summarize dispersion in the relevant posterior distribution
(not variability across repeated samples).26 An alternative, frequentist, approach to inference
is provided by Hsieh et al. (2018). They transform the problem of inference on the solution
to a linear program into inference on a set of linear moment inequalities. If the binding
constraints are the same over the bootstrap distribution, then inference based on the Bayesian
bootstrap will be similar to that based on moment inequalities (see also Graham et al., 2007
and Bhattacharya, 2009).
  26
     The "standard errors" for the AREs are constructed as follows. Let ^(b) be the estimate of the reallocation
           th                                              th
effect in b the bootstrap sample (or equivalently the b draw from the posterior distribution for ) and
^ the reallocation effect in the original sample. Consider the centered statistic 
                                                                                     ^(b) - ^; let q (0.025) and
q (0.975) be the 0.025 and 0.975 quantiles of its bootstrap/posterior distribution. We then construct the
interval [^ - q (0.975), ^ - q (0.025)] (see Hansen, 2020). We compute the corresponding standard error by
dividing this interval by 2-1 (0.975)  3.92, where (.) is the standard normal CDF.




                                                        23
5     Results
Regression results
Before reporting parameter estimates for our preferred model ­ equation (23) above with
three categories of FFT, own and peer baseline achievement each ­ we present those for a
more conventional model with teacher FFT, student and peer average baseline test scores
all entering linearly. For this specification we leave the FFT and baseline test scores undis-
cretized. These initial results replicate and expand upon the prior work of Garrett and
Steinberg (2015), who study the impact of FFT on student achievement in (approximately)
the same sample.27
    These initial results indicate that teacher FFT does not affect students' test scores on
average (see Table 2, Panel A). This is consistent with the findings of Garrett and Steinberg
(2015). Table 2 presents estimates, using the instrumental variables described in Section
2. Here this involves using the FFT score of a student's randomly assigned teacher as an
instrument for that of her realized teacher (Panels A­C), and the average baseline test score
of her assigned peers as an instrument for the average baseline test score of her realized peers
(Panel B).
    OLS estimates of the same model are reported in Appendix Table A.8. The coefficient
on FFT is statistically significant and positive in the OLS results. The discrepancy between
the OLS and IV results may reflect the impact of correcting for non-compliance, as described
above, or simply reflect the greater sampling variability of the IV estimates.
    Next we add the interactions of teacher FFT with both the baseline student, and peer
average, test scores. This provides an initial indication of whether any complementarity
between teacher FFT and student baseline achievement is present. These results suggest
that high-FFT teachers are more effective at teaching students with higher baseline scores
(see Table 2, Panels B and C). This result is significant at the 5-percent level in the math
sample, but only weakly significant in the ELA sample. The magnitudes and precision of
the teacher-student match effects are similar across the IV and OLS estimates (the latter
reported in Appendix Table A.8). The coefficient on the interaction between teacher FFT
and peer average baseline achievement (Panel B) is poorly determined (whether estimated
by IV or OLS).
    In Table 3 we report IV estimates of our preferred 3 × 3 model. This corresponds to
equation (23) with both Wi and Xi consisting of dummy variables for middle and high FFT
and baseline test scores respectively. In this specification, the teacher FFT main effects
remain insignificant. We do, however, find positive match effects between teacher FFT and
student baseline scores. These are significant for the high-FFT teachers (i.e., teachers with
 27
    Aucejo et al. (2019) study the impact of FFT in the MET data, but focus on math classrooms in
elementary schools.

                                               24
Table 2: IV regression results of the linear model. Dependent variables: student test score outcomes

                                          (1)         (2)          (3)       (4)            (5)         (6)
                                         A. Only teacher           B. Full model             C. Without
                                              effects                                      teacher × peer
                                                                                             interactions
                                        Math         ELA         Math          ELA        Math         ELA
       FFT                              0.013        0.079       -0.004       0.104       -0.004      0.076
                                       (0.093)      (0.076)     (0.091)      (0.075)     (0.091)     (0.075)
       FFT × baseline                                          0.096**       0.073*      0.098**      0.049
                                                                (0.042)      (0.039)     (0.046)     (0.040)
       FFT × avg. peer baseline                                   0.016       -0.172
                                                                (0.103)      (0.197)
       Baseline                       0.749***     0.693***    0.505***     0.512***    0.498***     0.565***
                                       (0.011)      (0.011)     (0.109)      (0.099)     (0.119)      (0.103)
 R2                                     0.700        0.632       0.700        0.621       0.700        0.632
 N                                      8,534        9,641       8,534        9,641       8,534        9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The specifications
include linear terms for FFT, individual and peer baseline test scores. The instrumental variables are based
on assigned teacher FFT (Panels A­C) and assigned peer baseline test scores (Panel B). All regressions
control for the h(x, x
                     ¯) function (see Section 2) and for randomization block fixed effects. Analytic standard
errors, clustered by randomization block, are in parentheses.
** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.



a "proficient" score on average). Students with middle or high baseline test score levels
score significantly higher on end-of-year achievement tests when matched with a high-FFT
teacher, compared to students with low baseline test scores (see Table 3, Panels B and C).28
The OLS estimation results, reported in the appendix, are qualitatively similar to the IV
ones; although the interactions of the middle-FFT dummy variable with the middle- and
high-baseline student test score dummies are also significant when estimated by OLS (see
Appendix Table A.9).
    To compute optimal assignments and average reallocation effects, we use the IV estimates
presented in columns 5­6 of Table 3. These specifications omit the FFT-by-peer composition
interaction terms, whose coefficients are poorly determined in all specifications (whether
fitted by IV or OLS). Omitting these terms has little effect on either the location or the
precision of the coefficients on the FFT-by-baseline interactions. In Appendix Tables A.15
and A.16 we also present average rellocation effects based upon the specifications in columns
3­4 of Table 3. These ARE estimates are larger, albeit less precisely determined.
  28
    In contrast, the coefficients on interactions of the teacher FFT dummy variables with the peer composition
variables are imprecisely determined.




                                                     25
Table 3: IV regression results of the 3 × 3 model. Dependent variables: student test score outcomes

                                         (1)         (2)           (3)       (4)            (5)         (6)
                                        A. Only teacher            B. Full model             C. Without
                                             effects                                       teacher × peer
                                                                                             interactions
                                        Math         ELA         Math         ELA          Math        ELA
       FFT middle                       0.069        -0.029      -0.145       -0.219       0.027       -0.082
                                       (0.053)      (0.048)     (0.138)      (0.173)      (0.060)     (0.059)
       FFT high                         0.038        -0.058      -0.547       -0.137       -0.155     -0.154*
                                       (0.067)      (0.065)     (0.380)      (0.203)      (0.103)     (0.083)
       FFT middle
        × baseline middle                                        0.040        0.057        0.052       0.067
                                                                (0.060)      (0.067)      (0.060)     (0.063)
        × baseline high                                          0.015        0.076        0.050       0.097
                                                                (0.084)      (0.081)      (0.076)     (0.082)
       FFT high
        × baseline middle                                       0.184**      0.150**     0.196**      0.127*
                                                                (0.082)      (0.074)     (0.084)      (0.072)
        × baseline high                                         0.226**      0.187**     0.265**       0.149
                                                                (0.099)      (0.092)     (0.100)      (0.095)
       FFT middle
        × fraction peers middle                                  0.318        0.288
                                                                (0.299)      (0.401)
        × fraction peers high                                    0.239        0.161
                                                                (0.205)      (0.288)
       FFT high
        × fraction peers middle                                  0.641        0.227
                                                                (0.513)      (0.389)
        × fraction peers high                                    0.460        -0.355
                                                                (0.409)      (0.343)

       Baseline middle                0.888***     0.739***    0.843***     0.699***     0.840***    0.682***
                                       (0.077)      (0.084)     (0.092)      (0.096)      (0.092)     (0.094)
       Baseline high                  1.622***     1.555***    1.578***     1.503***     1.550***    1.470***
                                       (0.103)      (0.105)     (0.124)      (0.118)      (0.119)     (0.115)
 R2                                     0.617        0.554       0.616        0.552        0.617       0.555
 N                                      8,534        9,641       8,534        9,641        8,534       9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The instrumental
variables are based on assigned teacher FFT (Panels A­C) and assigned peer baseline test scores (Panel
B). All regressions control for the h(x, x¯) function (see Section 2) and for randomization block fixed effects.
Analytic standard errors, clustered by randomization block, are in parentheses.
*** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.




                                                      26
Characterization of an optimal reassignment
If an optimal assignment is similar to the status quo one, then large reallocation effects
are unlikely. Therefore, before quantifying any reallocation effects, we first discuss how an
optimal assignment and a worst assignment differ from the status quo.
    Our primary reassignment policy considers reassignments of teachers across classrooms
district-wide (that is, we allow teachers to move to a different school within their district).
We do restrict teachers to teach at the same level (e.g., elementary school teachers do not
move to middle school classrooms). Under this scenario we find that, when moving from the
status quo to an optimal assignment, 49 percent of the students in the math sample, and 47
percent of the students in the ELA sample, are assigned to a new teacher. The balance of
students remain with their status quo teacher.
    It is interesting to examine how the reallocation changes the "assortativeness" of the
assignment. An assignment is characterized as positive assortative if students with higher
baseline test scores are more frequently matched with higher-FFT teachers, compared to a
random assignment. Indeed, we observe this in our data for the optimal assignment. Figure 1
displays, for each level of FFT, the distribution of student baseline test scores in the average
class a teacher of that FFT level is assigned to. In both the math and in the ELA sample,
the optimal allocation is more assortative than the status quo. In the status quo in math,
for instance, a high-FFT teacher has on average 23 percent of students with low baseline test
scores and 40 percent of students with high baseline test scores. In the optimal allocation,
the fraction of students with low baseline test scores drops to 9 percent, and the fraction
of students with high baseline test scores increases to 61 percent on average. The optimal
allocation in the ELA sample displays a similar pattern. The positive assortativeness arises
in the optimal allocation because students with high baseline test scores benefit more from
a high-FFT teacher, compared to students with low baseline test scores (see Table 3). The
worst allocation displays negative assortativeness (see Appendix Figure A.2).


Average reallocation effects
Tables 4 and 5 present ARE estimates. In Panel A an optimal assignment is compared with
the status quo; while in Panel B optimal assignments are compared with "worst" assignments.
We presents results for all students (Panels A.I and B.I), as well as for just those students
who experience a teacher change as part of the reallocation (Panels A.II and B.II).
    In the math sample (Table 4), the optimal allocation improves average test scores by 1.7
percent of a test score standard deviation compared to the status quo. This effect is precisely
determined with a Bayesian bootstrap standard error of 0.6 percent. The reported effects are
largely driven by students with high baseline test scores. These students gain 2.8 percent of
a test score standard deviation on average; students with middle and low baseline test scores,

                                              27
      Figure 1: Assortativeness of the optimal allocation in comparison with the status quo


                                             (1) Math: status quo                                                               (2) Math: optimal allocation
                                                                                                                                                                                       0.61
                               .6




                                                                                                                          .6
             Fraction of students




                                                                                                        Fraction of students
                                                                                            0.40                               0.41 0.40                   0.39
                         .4




                                                                                                                    .4
                                           0.36                 0.36 0.37            0.37
                                                                                                                                                    0.33
                                    0.33                                                                                                                                        0.30
                                                  0.30                                                                                                            0.28
                                                         0.27
                                                                              0.23
                                                                                                                                             0.19
                 .2




                                                                                                            .2
                                                                                                                                                                         0.09
                       0




                                                                                                                  0

                                      FFT low            FFT middle            FFT high                                          FFT low            FFT middle            FFT high


                                             (3) ELA: status quo                                                                 (4) ELA: optimal allocation
                                                                                                                               0.59                                                    0.57
                               .6




                                                                                                                          .6
             Fraction of students




                                                                                                        Fraction of students




                                                                                            0.43
                                           0.38                        0.39                                                                                       0.40
                                                                                                                                                           0.37
                         .4




                                                                                                                    .4




                                                  0.34          0.35                 0.36                                             0.34
                                    0.29                                                                                                                                        0.31
                                                         0.27
                                                                              0.22                                                                  0.24
                 .2




                                                                                                            .2




                                                                                                                                                                         0.13
                                                                                                                                             0.06
                       0




                                                                                                                  0




                                      FFT low            FFT middle            FFT high                                          FFT low            FFT middle            FFT high


                                                                        Baseline low                                            Baseline middle
                                                                        Baseline high

Note: The figure compares the status quo allocation (Panels 1 and 3) with the optimal allocation (Panels 2
and 4). The bars represent the fractions of students with low, middle, and high baseline test scores that a
teacher with low, middle, and high FFT is assigned to on average under each of the allocations. For each
teacher type, the fractions add up to 1. The optimization is carried out within school types (elementary or
middle school) and districts.




                                                                                                   28
in contrast, gain only 1.2 and 1.4 percent of a test score standard deviation, respectively (on
average).
    Since only half of the students experience a change in their teacher, the average effect
represents an equal-weighted mixture of a zero effect and a positive effect on those students
who do experience a change in teachers. The average effect for the latter group is 3.6 percent
of a test score standard deviation (Panel A.II, SE = 1.2 percent).

 Table 4: Average reallocation gains in math. Gains expressed in test score standard deviations

                (1)          (2)        (3)       (4)            (5)          (6)       (7)        (8)
                                      Panel A. Optimal versus status quo
                          A.I Full sample                 A.II Conditional on being reallocated
           all students     high      middle      low       all students     high     middle      low
   Gain        0.017        0.028      0.012     0.014          0.036        0.059     0.028     0.026
   SE         (0.006)      (0.014)    (0.008)   (0.011)        (0.012)      (0.029)   (0.019)   (0.019)
   N           8,534        2,332      3,108     3,094          4,107        1,121     1,380     1,606

                                     Panel B. Optimal versus worst allocation
                          B.I Full sample                     B.II Conditional on being reallocated
           all students     high      middle      low       all students     high     middle      low
   Gain        0.040        0.072      0.019     0.038          0.060        0.103     0.032     0.053
   SE         (0.012)      (0.034)    (0.015)   (0.026)        (0.019)      (0.048)   (0.022)   (0.037)
   N           8,534        2,332      3,108     3,094          5,746        1,626     1,912     2,208
Note: The table shows the average reallocation gains from implementing the optimal assignment instead
of the random assignment (status quo) in Panel A, and the average reallocation gains from implementing
the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in test score
standard deviations. The computations are based on a 3 × 3 model without teacher-by-peer interactions
(see Table 3, column 5). The results are presented separately for the full sample of students (columns 1­4),
and for the sample of classrooms that would get a new teacher as a result of the reallocation (columns 5­8).
The reassignments are carried out within school types and districts. Standard errors are in parentheses and
computed using the Bayesian bootstrap with 1,000 replications (see Section 4). High/middle/low: students
in the top/middle/bottom tercile of the baseline test score distribution.



    The comparison of an optimal allocation with a worst allocation yields improvements that
are about twice as large. Relative to a worst allocation, an optimal allocation improves test
scores by 4.0 percent of a standard deviation on average (SE = 1.2 percent). The gains are
7.2 percent of a standard deviation for students with high baseline test scores, and 1.9 and
3.8 percent of a standard deviation for students with middle and low baseline test scores,
respectively. If one considers only those students who are reassigned to a new teacher, the
reallocation effect amounts 6.0 percent of a standard deviation on average (Panel B.II, SE =
1.9 percent).
    One way to benchmark the magnitude of these AREs is to compare them with the effects
of hypothetical policies aimed at improving teacher value-added measures (VAMs). As noted

                                                    29
in the introduction, such policies are controversial, as is the evidence marshalled to support
them. Here we offer no commentary on the advisability of actually adopting VAM-guided
teacher personnel policies; nor do we offer an assessment of VAM studies. Rather we simply
use these studies, and the policy thought experiments they motivate, to benchmark our ARE
findings.
    Teacher value-added is typically conceptualized as an invariant intercept-shifter, which
uniformly raises or lowers the achievement of all students in a classroom. In this framework
replacing a low value-added teacher with a high one will raise achievement for all students
in a classroom. Rockoff (2004) estimates that the standard deviation of the population
distribution of teacher value-added (in a New Jersey school district) is around 0.10 test
score standard deviations in both math and reading. Recent studies find somewhat higher
estimates: Chetty et al. (2014a) estimates that the standard deviation of teacher value-added
is 0.16 in math and 0.12 in reading; similarly, Rothstein (2017) finds values of 0.19 in math
and 0.12 in reading.
    Using a standard deviation of 0.15 we can consider the effect of a policy which removes
the bottom  × 100 percent of teachers, sorted by VAM, and replaces them with teachers
at the  ~th quantile of the VAM distribution. Under normality the effect of such a policy on
average student achievement is to increase test scores by

                                             q

                                (1 -  )          q   +  -1 (~
                                                            )
                                           1-    


standard deviations. Setting  = 0.05 and        ~ = 0.75 this expression gives an estimate of the
policy effect of 0.021 (i.e., 2.1 percent of a test score standard deviation). This is comparable
to the average effect on math achievement associated with moving from the status quo MET
assignment to an optimal one. In practice correctly identifying, and removing from class-
rooms, the bottom five percent of teachers would be difficult to do. Replacing them with
teachers in the top quartile of the VAM distribution perhaps even more so. Contextualized
in this way the AREs we find are large.
    An attractive feature of the policies we consider is that they are based on measurable
student and teacher attributes, not noisily measured latent ones. At the same time we are
mindful that most school districts would not find it costless to reallocate teachers freely across
classrooms and schools.
    Another way to calibrate the size of the effects we find is as follows. We find that when
implementing an optimal teacher-to-classroom assignment, only about one half of students
experience a change in teachers. We find that test scores increase by about 3.6 percent of a
standard deviation for these students. This is comparable to increasing the average VAM of
these students' teachers from zero (i.e., the median) to the 0.6 quantile of the teacher VAM
distribution. Again, increasing the VAM of half of all teachers by such an amount may be

                                               30
difficult to do in practice.29
     For English language arts (ELA) achievement we find smaller reallocation effects. Mov-
ing from the status quo to an optimal allocation is estimated to raise achievement by 0.8
percent of a test score standard deviation (SE = 0.6 percent). As with math, these gains
are concentrated among students with high baseline scores who are assigned a new teacher.
These students experience an average gain of 5 percent of a test score standard deviation
(SE = 2.5 percent).

  Table 5: Average reallocation gains in ELA. Gains expressed in test score standard deviations.

                (1)           (2)       (3)        (4)             (5)           (6)        (7)       (8)
                                      Panel A. Optimal versus status quo
                          A.I Full sample                 A.II Conditional on being reallocated
           all students     high      middle       low         all students    high      middle       low
   Gain        0.008        0.024      0.002      0.004            0.017       0.050      0.004      0.008
   SE         (0.006)      (0.011)    (0.007)    (0.010)          (0.012)     (0.025)    (0.013)    (0.020)
   N           9,641        2,480      3,402      3,759            4,529       1,167      1,627      1,735

                                     Panel B. Optimal versus worst allocation
                          B.I Full sample                       B.II Conditional on being reallocated
           all students     high      middle       low         all students    high      middle       low
   Gain        0.018        0.057      0.003      0.005            0.025       0.080      0.004      0.007
   SE         (0.010)      (0.028)    (0.011)    (0.019)          (0.015)     (0.038)    (0.017)    (0.024)
   N           9,641        2,480      3,402      3,759            6,675       1,770      2,229      2,676
Note: The table shows the average reallocation gains from implementing the optimal assignment instead
of the random assignment (status quo) in Panel A, and the average reallocation gains from implementing
the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in test score
standard deviations. The computations are based on a 3 × 3 model without teacher-by-peer interactions
(see Table 3, column 6). The results are presented separately for the full sample of students (columns 1­4),
and for the sample of classrooms that would get a new teacher as a result of the reallocation (columns 5­8).
The reassignments are carried out within school types and districts. Standard errors are in parentheses and
computed using the Bayesian bootstrap with 1,000 replications (see Section 4). High/middle/low: students
in the top/middle/bottom tercile of the baseline test score distribution.



   In sum implementing an optimal assignment generates improvements in test score out-
comes across the distribution of baseline achievement. Yet, while the gains are large for
students with high baseline test scores ­ up to 10 percent of a standard deviation for stu-
dents with high baseline test scores in math ­ for students with middle and low baseline test
scores, the gains are smaller. Our results suggest that reallocations matter more in math,
  29
    One may also use effect sizes of educational interventions in general as point of comparison. Based on a
meta-study by Kraft (forthcoming), an effect size of 4 percent of a standard deviation in math qualifies as a
"medium effect," corresponding to the 40th percentile of effect sizes found across 750 educational interventions
in pre-K­12 settings in the US (see Table 1 in Kraft, forthcoming).



                                                      31
compared to ELA. This is in line with the value-added literature, which consistently reports
higher value-added in math compared to ELA.
    Our results provide strong evidence of complementarity between student baseline test
scores and teacher practices. This complementarity, if taken into account when assigning
teachers to classrooms, appears to make a difference in students' performance across the
distribution of baseline achievement. Teacher reassignments that maximize the average test
score, however, will not close the achievement gap between students with low versus high
baseline achievement levels. They actually widen this achievement gap. A different objective
function, one that values equity as well as "efficiency," may be preferred in practice.
    It is also possible that assignments based on other student/teacher attributes might both
raise average achievement and narrow achievement gaps. For example, if literacy in a stu-
dent's native language helps develop literacy in English, then perhaps bilingual teachers could
help to raise the achievement levels of English language learners. Many other examples might
merit exploration.


6    Sensitivity checks
Teacher and student categories

Working with a discrete categorization of baseline achievement and teacher FFT provides a
simple, but also highly flexible, way of capturing non-linearities in educational production.
We tested the sensitivity of our results to alternative categorizations of teachers and students.
Specifically, we test (a) a coarser specification with two levels of teacher FFT (cutoff point
at 2.5) and two levels of student baseline test scores and (b) a finer specification with four
levels of teacher FFT (cutoff points at 2.25, 2.5, and 2.75) and four levels of student baseline
test scores.
    In the coarser specification, we do not detect any significant match effects between teacher
FFT and student baseline test scores (see Appendix Table A.10): the model with only two
levels of teacher FFT does not capture the positive effect of the high-FFT teachers on students
with middle or high baseline test scores. By contrast, the results of the finer specification,
with four levels of FFT, are very similar to the results of our preferred specification (see
Appendix Table A.11).

Measure of teaching practices

We also assess the sensitivity of our results to the measure of teaching practices that we use
in the analysis. The MET data also contains an alternative measure, the CLASS (Classroom
Assessment Scoring System), for a subset of the sample (6,320 observations in the math
sample and 6,999 observations in the ELA sample). The CLASS is a teacher observation

                                               32
protocol that uses different domains and evaluation criteria than the FFT (see Section B.4 in
the Data Appendix for details on the observation protocol and on how we process the data).
The CLASS is also widely used in research on teacher quality (e.g. Araujo et al., 2016). We
find that our results are similar when using the CLASS instead of the FFT (see Appendix
Table A.12).

Restrictions on the reassignment process

In our preferred optimization procedure, we optimize the assignment of teachers to classrooms
within types of schools (elementary or middle school) and school districts. We choose these
restrictions because teachers might not be willing or able to teach in a different school type
or a different school district. As a sensitivity check, we also calculated the results of both a
more restrictive and a less restrictive optimization procedure.
    Our least restrictive allocation optimizes the assignment within school types, but allows
for reassignments across districts. The magnitudes of the reallocation effects in this case
are only slightly larger than those where reallocations are within districts (see Appendix
Tables A.13 and A.14, columns 1­4). This finding may reflect the similarity of the distribu-
tions of baseline student achievement and teacher FFT in MET school districts. It would
be interesting to repeat our analysis in a metro area consisting of an urban core district and
multiple suburban ones. In such a setting is it seems plausible that moving teachers across
school districts might raise average achievement.
    Our most restrictive allocation reassigns teachers only within school-grade-subject cells
(i.e., randomization blocks). This restriction is strong because each randomization block
typically contains only two or three sections. Under this restriction, the reallocation gains
are overall negligible (see Appendix Tables A.13 and A.14, columns 5­8).

Accounting for teacher-peer match effects in the assignment

Our main results for the reallocation effects are based on a model without teacher-to-peer
match effects (i.e., in a model which imposes the restriction that  = 0), since these effects
are very noisily estimated using our data. Using a model which does not impose this restric-
tion generates reallocation effects about twice as large. These effects are also more noisily
measured (see Appendix Tables A.15 and A.16).


7    Conclusion
We provide an econometric framework that allows us to semiparametrically characterize
complementarity between teaching practices and student baseline test scores. Our framework



                                              33
exploits the random assignment of teachers to classrooms available in the MET dataset, while
formally dealing with non-compliance by both teachers and students.
    Our results show that the potential gains associated with an outcome-maximizing assign-
ment of teachers to classrooms are large. They are comparable to fairly large (hypothetical)
interventions to raise teacher VAM. An attractive feature is that they are, at least in theory,
resource neutral. No new teachers are required to implement the policies we consider.
    Our focus on the objective of maximizing the population average test score leads to an
optimal assignment that increases the gap between less and more prepared students. We
could also consider objective functions that do no focus on average test scores, but instead
on test score gaps or proficiency levels. We could, for instance, choose an assignment which
maximizes the number of students who reach a "proficient" level on their end-of-year assess-
ment. It is possible that this objective function would suggest a less assortative assignment:
students with high baseline scores would likely reach the proficient level regardless of their
teacher's FFT, while the incremental effect of having a high-FFT teacher on the probability
of attaining proficiency may be larger for students with lower baseline test scores. Outcomes
other than math and ELA achievement (e.g., socio-emotional skills) may also be of interest.
    We consider this paper as a first pass that establishes the feasibility of recovering match
effects from imperfect experimental data and shows that the resulting reallocation effects
that depend upon these match effects and the supply of teachers are substantial.




                                              34
References
Ai, C. and X. Chen (2003): "Efficient Estimation of Models with Conditional Moment
  Restrictions Containing Unknown Functions," Econometrica, 71, 1795 ­ 1843.

Araujo, M. C., P. Carneiro, Y. Cruz-Aguayo, and N. Schady (2016): "Teacher
 quality and learning outcomes in kindergarten," The Quarterly Journal of Economics, 131,
 1415 ­ 1453.

Aucejo, E., P. Coate, J. C. Fruehwirth, S. Kelly, and Z. Mozenter (2019):
 "Teacher Effectiveness and Classroom Composition," Manuscript.

Bhattacharya, D. (2009): "Inferring optimal peer assignment from experimental data,"
 Journal of the American Statistical Association, 104, 486 ­ 500.

Chamberlain, G. and G. W. Imbens (2003): "Nonparametric applications of Bayesian
 inference," Journal of Business and Economic Statistics, 21, 12 ­ 18.

Chen, X., O. Linton, and I. Van Keilegom (2003): "Estimation of semiparametric
 models when the criterion function is not smooth," Econometrica, 71, 1591 ­ 1608.

Chetty, R., J. N. Friedman, and J. E. Rockoff (2012): "Great Teaching," Education
 Next, 12, 59 ­ 64.

------ (2014a): "Measuring the Impacts of Teachers I: Evaluating Bias in Teacher Value-
  Added Estimates," American Economic Review, 104, 2593 ­ 2632.

------ (2014b): "Measuring the Impacts of Teachers II: Teacher Value-Added and Student
  Outcomes in Adulthood," American Economic Review, 104, 2633 ­ 2679.

Cohen-Vogel, L., L. Feng, and L. Osborne-Lampkin (2013): "Seniority provisions
 in collective bargaining agreements and the `teacher quality gap'," Educational Evaluation
 and Policy Analysis, 35, 324 ­ 343.

Danielson, C. (2011): "The Framework for Teaching Evaluation Instrument, 2011 Edi-
 tion," Retrieved on May 31, 2020, from https://danielsongroup.org/downloads/
 2011-framework-teaching-evaluation-instrument.

Darling-Hammond, L. (2015): "Can Value Added Add Value to Teacher Evaluation?"
 Educational Researcher, 44, 132 ­ 137.

Dee, T. S. (2004): "Teachers, race, and student achievement in a randomized experiment,"
 Review of Economics and Statistics, 86, 195 ­ 210.


                                            35
------ (2005): "A Teacher like Me: Does Race, Ethnicity, or Gender Matter?" The American
  Economic Review, 95, 158 ­ 165.

Garrett, R. and M. P. Steinberg (2015): "Examining Teacher Effectiveness Using
 Classroom Observation Scores: Evidence From the Randomization of Teachers to Stu-
 dents," Educational Evaluation and Policy Analysis, 37, 224 ­ 242.

Graham, B. (2008): "Identifying social interactions through conditional variance restric-
 tions," Econometrica, 76, 643 ­ 660.

Graham, B. S. (2011): "Econometric methods for the analysis of assignment problems in
 the presence of complementarity and social spillovers," in Handbook of social economics,
 ed. by J. Benhabib, A. Bisin, and M. O. Jackson, Amsterdam: North-Holland, vol. 1B,
 965 ­ 1052.

Graham, B. S., G. W. Imbens, and G. Ridder (2007): "Redistributive effects for
 discretely-valued inputs," IEPR Working Paper 07.7, University of Southern California.

------ (2010): "Measuring the effects of segregation in the presence of social spillovers: a
  nonparametric approach," Working Paper 16499, NBER.

------ (2014): "Complementarity and aggregate implications of assortative matching: a
  nonparametric analysis," Quantitative Economics, 5, 29 ­ 66.

------ (2020): "Identification and Efficiency Bounds for the Average Match Function Under
  Conditionally Exogenous Matching," Journal of Business & Economic Statistics, 38, 303
  ­ 316.

Grissom, J. A., D. Kalogrides, and S. Loeb (2015): "The micropolitics of educational
 inequality: The case of teacher­student assignments," Peabody Journal of Education, 90,
 601 ­ 614.

Hansen, B. E. (2020): "Econometrics," Retrieved on July 4, 2020, from https://www.
 ssc.wisc.edu/~bhansen/econometrics/.

Hanushek, E. (1971): "Teacher Characteristics and Gains in Student Achievement: Esti-
 mation Using Micro Data." American Economic Review, 61, 280 ­ 288.

Hanushek, E. A., J. F. Kain, and S. G. Rivkin (2004): "Disruption versus Tiebout
 improvement: The costs and benefits of switching schools," Journal of Public Economics,
 88, 1721 ­ 1746.

Hsieh, Y.-W., X. Shi, and M. Shum (2018): "Inference on estimators defined by math-
 ematical programming," Manuscript.

                                            36
Kalogrides, D., S. Loeb, and T. Beteille (2011): "Power Play? Teacher Char-
 acteristics and Class Assignments," Working Paper 59, National Center for Analysis of
 Longitudinal Data in Education Research.

Kane, Thomas, J., D. F. McCaffrey, T. Miller, and D. O. Staiger (2013):
 "Have we identified effective teachers? Validating measures of effect teaching using random
 assignment," Met project research paper, Bill & Melinda Gates Foundation.

Kraft, M. A. (forthcoming): "Interpreting Effect Sizes of Education Interventions," Edu-
 cational Researcher.

Loeb, S., J. Soland, and L. Fox (2014): "Is a Good Teacher a Good Teacher for
 All? Comparing Value-Added of Teachers with Their English Learners and Non-English
 Learners," Educational Evaluation and Policy Analysis, 36, 457 ­ 475.

Manski, C. F. (1993): "Identification of endogenous social effects: the reflection problem,"
 Review of Economic Studies, 60, 531 ­ 542.

McFarland, J. et al. (2019): "The Condition of Education 2019," NCES 2019-144,
 National Center for Education Statistics.

Morganstein, D. and R. Wasserstein (2014): "ASA Statement on Value-Added Mod-
 els," Statistics and Public Policy, 1, 108 ­ 110.

Robinson, P. M. (1988): "Root-N-Consistent Semiparametric Regression," Econometrica,
 56, 931 ­ 954.

Rockoff, J. E. (2004): "The Impact of Individual Teachers on Student Achievement:
 Evidence from Panel Data," American Economic Review, 94, 247 ­ 252.

Rothstein, J. (2010): "Teacher Quality in Educational Production: Tracking, Decay, and
 Student Achievement 2010," Quarterly Journal of Economics, 125, 175 ­ 214.

------ (2017): "Measuring the impacts of teachers: Comment," American Economic Review,
  107, 1656­84.

Sanderson, E. and F. Windmeijer (2016): "A weak instrument F-test in linear IV
  models with multiple endogenous variables," Journal of Econometrics, 190, 212 ­ 221.

Snyder, T. D. et al. (2017): "Digest of Education Statistics," NCES 2018-070, National
  Center for Education Statistics.

Stock, J. H. and M. Yogo (2005): "Testing for weak instruments in Linear IV regres-
  sion," in Identification and Inference for Econometric Models: Essays in Honor of Thomas
  Rothenberg, Cambridge University Press, 80 ­ 108.

                                            37
White, M., B. Rowen, G. Alter, L. Blankenship, C. Greene, and S. Windish
 (2019): User Guide to Measures of Effective Teaching Longitudinal Database (MET LDB),
 Ann Arbor: Inter-University Consortium for Political and Social Research, The University
 of Michigan.




                                           38
A      Figures and Tables

             Figure A.1: Distribution of teacher FFT and student baseline test scores

                                                      (1) FFT - math teachers                                                  (2) Math baseline test scores




                                                                                                                 .15
                                     .2
                  Fraction of teachers




                                                                                              Fraction of sections
                                     .15




                                                                                                                 .1
                                     .1




                                                                                                                 .05
                                     .05
                                     0




                                                                                                                 0
                                            1.5          2          2.5            3   3.5                                -2          -1          0           1         2
                                                                    FFT                                                       Baseline test scores (section averages)
                                           Number of teachers = 614, mean = 2.52                                       Number of sections = 792, mean = .02



                                                       (3) FFT - ELA teachers                                                  (4) ELA baseline test scores
                                     .2




                                                                                                                 .15
                  Fraction of teachers




                                                                                              Fraction of sections
                                     .15




                                                                                                                 .1
                                     .1




                                                                                                                 .05
                                     .05
                                     0




                                                                                                                 0
                                            1.5          2          2.5            3   3.5                                -2          -1          0           1         2
                                                                    FFT                                                       Baseline test scores (section averages)
                                           Number of teachers = 649, mean = 2.58                                       Number of sections = 796, mean = .07



Note: Distribution of teacher FFT (Panels 1 and 3) and student baseline test scores (Panels 2 and 4) in the
estimation sample. Student baseline test scores are section averages.




                                                                                             39
      Figure A.2: Assortativeness of the worst allocation in comparison with the status quo


                                             (1) Math: status quo                                                                (2) Math: worst allocation


             Fraction of students




                                                                                                        Fraction of students
                                                                                                                                                                       0.57



                              .6




                                                                                                                         .6
                                                                                                                                             0.50
                                                                                            0.40                                                           0.40 0.38
                       .4




                                                                                                                  .4
                                           0.36                 0.36 0.37            0.37
                                                                                                                                                                              0.33
                                    0.33                                                                                              0.32
                                                  0.30
                                                         0.27
                                                                              0.23                                                                  0.22
                                                                                                                               0.18
                .2




                                                                                                           .2
                                                                                                                                                                                     0.10
                       0




                                                                                                                  0
                                      FFT low            FFT middle            FFT high                                          FFT low            FFT middle          FFT high


                                             (3) ELA: status quo                                                                  (4) ELA: worst allocation
                                                                                                                                             0.65
             Fraction of students




                                                                                                        Fraction of students
                              .6




                                                                                                                         .6
                                                                                            0.43
                                           0.38                        0.39                                                                                0.37 0.37   0.37 0.37
                       .4




                                                                                                                  .4
                                                  0.34          0.35                 0.36
                                    0.29                 0.27                                                                         0.28          0.26                             0.26
                                                                              0.22
                .2




                                                                                                           .2
                                                                                                                               0.07
                       0




                                                                                                                  0
                                      FFT low            FFT middle            FFT high                                          FFT low            FFT middle          FFT high


                                                                        Baseline low                                            Baseline middle
                                                                        Baseline high

Note: The figure compares the status quo allocation (Panels 1 and 3) with the worst allocation (Panels 2
and 4). The bars represent the fractions of students with low, middle, and high baseline test scores that a
teacher with low, middle, and high FFT is assigned to on average under each of the allocations. For each
teacher type, the fractions add up to 1. The optimization is carried out within school types (elementary or
middle school) and districts.




                                                                                                   40
                     Table A.1: Summary statistics of the estimation samples

                                                        (1)       (2)       (3)       (4)
                                                       Math sample          ELA sample
                                                       Mean       SD       Mean       SD
              Student characteristics
                Age                                    10.32     (1.56)    10.28     (1.48)
                Fourth grade                            26%           -     26%           -
                Fifth grade                             35%           -     35%           -
                Sixth grade                             16%           -     15%           -
                Seventh grade                           10%           -     12%           -
                Eighth grade                            12%           -     12%           -
                Male                                    49%           -     49%           -
                Gifted                                   6%           -     11%           -
                Special education                        7%           -      7%           -
                ELL                                     15%           -     13%           -
                Free/reduced-price lunch                58%           -     57%           -
                White                                   27%           -     28%           -
                Black                                   31%           -     30%           -
                Hispanic                                31%           -     33%           -
                Asian                                    8%           -      7%           -
                Other race                               3%           -      3%           -
                Subject test score 2010 (baseline)      0.11     (0.89)     0.17     (0.93)
                Subject test score 2011 (outcome)       0.15     (0.90)     0.17     (0.91)
              Teacher characteristics
                Male                                    14%           -     11%           -
                White                                   65%           -     64%           -
                Black                                   28%           -     29%           -
                Hispanic                                 6%           -      6%           -
                Other race                               2%           -      1%           -
                Years in district                       7.39     (6.73)     7.36     (6.33)
                Master's or higher                      40%           -     37%           -
                FFT                                     2.53     (0.30)     2.59     (0.30)
              Classroom characterisics
                Class size                             25.54     (5.48)    25.60     (5.44)
              Sample size
                Students                                      8,534               9,641
                Teachers                                       614                 649
                Schools                                        153                 160
Note: Summary statistics of the estimation samples. Standard deviations are in parentheses. ELL: English
language learner. FFT: Framework for teaching. For details on the sample construction, see Appendix B.




                                                  41
           Table A.2: Balancing tests. Dependent variable: FFT of the assigned teacher

                                                      (1)        (2)         (3)        (4)
                                                        Math                    ELA
                                                   coeff      SE          coeff      SE
                   Baseline test score             0.004    (0.005)       0.000    (0.004)
                   Age                            -0.003    (0.006)      -0.006    (0.005)
                   Male                            0.001    (0.005)      -0.002    (0.003)
                   Gifted                         -0.015    (0.015)       0.010    (0.016)
                   Special education               0.013    (0.012)      -0.002    (0.009)
                   ELL                            -0.004    (0.011)      -0.014    (0.011)
                   Black                          -0.004    (0.008)      -0.010    (0.007)
                   Hispanic                       -0.013    (0.009)       0.002    (0.006)
                   Asian                           0.009    (0.014)       0.016    (0.011)
                   Other race                      0.014    (0.012)       0.010    (0.010)
                   Free/reduced-price lunch        0.005    (0.010)      -0.002    (0.006)
                   F-test for joint signifi-            0.465                  0.241
                   cance (p-value)
                   R2                                   0.598                  0.635
                   N                                    8,518                  9,630
Note: The table presents results of OLS regressions of the FFT of the assigned teacher on individual student
characteristics. Free/reduced-price lunch eligibility is coded as 0 for students who do not have information on
this variable in the dataset. All regressions control for randomization block fixed effects. Analytic standard
errors, clustered by randomization block, are in parentheses. ELL: English language learner. FFT: Framework
for teaching.




                                                      42
Table A.3: Tests of Assumption 1. Dependent variables: Differences between assigned and realized
           teacher characteristics

                                         (1)        (2)        (3)        (4)          (5)           (6)


                                                              Panel I. Math sample
                                        Male            Teacher's race             Experience     Master's
                                                  white     black hispanic          (years)        degree
  FFT, assigned teacher                0.009      -0.039      -0.061      0.059       -2.727        -0.018
                                      (0.060)    (0.107)     (0.068)    (0.059)      (2.236)       (0.099)
  Baseline test score                  0.003      -0.003      0.005      -0.002       0.071         -0.006
                                      (0.005)    (0.005)     (0.004)    (0.002)      (0.082)       (0.006)
  Avg. peer baseline test score,       0.027       0.037      0.007      -0.037       0.738         -0.052
  assigned peers                      (0.076)    (0.058)     (0.034)    (0.041)      (0.931)       (0.089)
  F-test for joint significance        0.956      0.799       0.537      0.731        0.635         0.849
  (p-value)
  R2                                   0.149      0.176       0.108      0.039        0.163         0.154
  N                                    8,163      8,098       7,689      7,689        5,585         6,083


                                                              Panel II. ELA sample
                                        Male               Teacher's race          Experience     Master's
                                                  white        black hispanic       (years)        degree
  FFT, assigned teacher                 0.008      0.036      -0.037      0.031       0.500         -0.003
                                      (0.067)    (0.085)     (0.071)    (0.028)      (0.799)       (0.060)
  Baseline test score                   0.003     -0.000      0.002      -0.002       -0.008        0.001
                                      (0.002)    (0.004)     (0.003)    (0.002)      (0.042)       (0.004)
  Avg. peer baseline test score,       -0.008    0.102**      -0.041    -0.056*       0.220          0.049
  assigned peers                      (0.027)    (0.046)     (0.031)    (0.029)      (0.436)       (0.049)
  F-test for joint significance        0.300      0.116       0.414      0.063        0.837         0.779
  (p-value)
  R2                                   0.090      0.130       0.053      0.050        0.142         0.111
  N                                    9,183      9,183       9,183      9,183        6,791         6,963
Note: The table presents results of OLS regressions of differences between assigned and realized teacher
characteristics on individual baseline test scores, the FFT of the assigned teacher, and the average baseline
test scores of the assigned peers. Each column represents a regression with a different dependent variable. All
regressions control for randomization block fixed effects. Analytic standard errors, clustered by randomization
block, are in parentheses. Teachers with ethnicity "white" and ethnicity "other" are pooled into one category.
FFT: Framework for teaching.
**significant at the 5%-level, *significant at the 10%-level.




                                                      43
       Table A.4: Tests of Assumption 2 in the math sample. Dependent variables: differences between assigned and realized peer characteristics

                                                   (1)       (2)        (3)         (4)          (5)       (6)        (7)       (8)         (9)       (10)
         Difference between assigned              Age       Male      Gifted      Special       ELL        FRL                  Race/ethnicity
         and realized peer characteristics                                       education                          White      Black     Hispanic     Asian
         FFT, assigned teacher                    0.008      0.015      0.006      -0.017      0.006      -0.005      0.004    -0.010       0.006     -0.001
                                                 (0.019)   (0.014)    (0.009)     (0.011)     (0.012)    (0.016)    (0.011)   (0.011)     (0.013)    (0.007)
         Baseline test score                      -0.006     0.000    0.004**      -0.001      0.000       0.000      0.001    -0.002       0.000    0.001*
                                                 (0.003)   (0.001)    (0.002)     (0.001)     (0.001)    (0.002)    (0.001)   (0.002)     (0.001)    (0.001)
         Avg. peer baseline test score,          -0.030*    -0.006     -0.013      0.009      0.033**     -0.001     -0.012    0.012       -0.007     0.008
         assigned peers                          (0.017)   (0.013)    (0.009)     (0.008)     (0.011)    (0.014)    (0.010)   (0.011)     (0.011)    (0.005)
         R2                                       0.124     0.264      0.222       0.240       0.200      0.241      0.207     0.232      0.247       0.185
         N                                        8,525     8,534      8,534       8,527       8,534      5,976      8,534     8,534      8,534       8,534
     Note: The table presents results of OLS regressions of differences between assigned and realized peer characteristics on the FFT of the assigned teacher,
     individual baseline test scores, and the average baseline test scores of the assigned peers. Each column represents a regression with a different dependent
44




     variable. All regressions control for randomization block fixed effects. Analytic standard errors, clustered by randomization block, are in parentheses. ELL:
     English language learner, FRL: Free/reduced-price lunch eligible, FFT: Framework for teaching.
     ** significant at the 5%-level * significant at the 10%-level.
       Table A.5: Tests of Assumption 2 in the ELA sample. Dependent variables: differences between assigned and realized peer characteristics

                                                  (1)        (2)         (3)          (4)         (5)        (6)        (7)       (8)        (9)        (10)
        Difference between assigned              Age        Male       Gifted       Special       ELL       FRL                   Race/ethnicity
        and realized peer characteristics                                         education                           White      Black    Hispanic     Asian
        FFT, assigned teacher                     0.000      0.008     0.008         -0.012       0.022     -0.003    -0.008     -0.001      0.012      -0.002
                                                (0.020)    (0.014)    (0.009)       (0.011)     (0.017)    (0.014)   (0.012)    (0.013)    (0.014)     (0.009)
        Baseline test score                    -0.005**     -0.001     0.002         0.000       -0.001     -0.002     0.001     0.000      -0.001      0.001
                                                (0.003)    (0.001)    (0.001)       (0.001)     (0.001)    (0.001)   (0.001)    (0.001)    (0.001)     (0.000)
        Avg. peer baseline test score,           -0.009     0.000    -0.029***       0.013      0.028**     0.007     -0.002     0.001      0.001       0.000
        assigned peers                          (0.013)    (0.011)    (0.007)       (0.009)     (0.009)    (0.011)   (0.008)    (0.008)    (0.010)     (0.006)
        R2                                       0.098      0.241       0.147        0.208       0.178      0.238     0.203      0.254      0.218       0.215
        N                                        9,635      9,641       9,641        9,636       9,641      7,270     9,641      9,641      9,641       9,641
     Note: The table presents results of OLS regressions of differences between assigned and realized peer characteristics on the FFT of the assigned teacher,
     individual baseline test scores, and the average baseline test scores of the assigned peers. Each column represents a regression with a different dependent
45




     variable. All regressions control for randomization block fixed effects. Analytic standard errors, clustered by randomization block, are in parentheses. ELL:
     English language learner, FRL: Free/reduced-price lunch eligible, FFT: Framework for teaching.
     ** significant at the 5%-level * significant at the 10%-level.
Table A.6: Tests of restriction (25). Dependent variables: average peer baseline test scores of
           realized peers

                                                             (1)                  (2)
                                                       Average peer baseline test score,
                                                                realized peers
                                                       Math sample           ELA sample
                   FFT, assigned teacher                     -0.015              0.036
                                                            (0.029)             (0.029)
                   Baseline test score                     0.031***            0.023***
                                                            (0.008)             (0.005)
                   Avg. peer baseline test score,            0.744               0.769
                   assigned peers                           (0.034)             (0.030)
                   R2                                       0.881                0.904
                   N                                        8,534                9,641
Note: The table presents results of OLS regressions of the average peer baseline test scores of the realized
peers on individual baseline test scores, FFT of the assigned teacher, and the average peer baseline test scores
of the assigned peers in the math and ELA samples. All regressions control for randomization block fixed
effects. Analytic standard errors, clustered by randomization block, are in parentheses. FFT: Framework for
teaching.
*** significant at the 1%-level.




                                                      46
                               Table A.7: Tests for instrument relevance

                                                           (1)          (2)              (3)
          Panel A. Math
                                                              First-stage F-statistics
                                                           unconditional              SW
          Variable                                     F(10,238)     p-value        F(1, 238)

          FFT   middle                                      17.57      (0.000)             60.17
          FFT   high                                        11.62      (0.000)             57.95
          FFT   middle × baseline middle                    82.49      (0.000)            498.96
          FFT   high × baseline middle                      33.30      (0.000)            387.27
          FFT   middle × baseline high                      39.59      (0.000)            322.43
          FFT   high × baseline high                        36.92      (0.000)            378.59
          FFT   middle × fraction peers middle              17.47      (0.000)            113.27
          FFT   high × fraction peers middle                12.85      (0.000)            102.70
          FFT   middle × fraction peers high                 8.07      (0.000)            182.12
          FFT   middle × fraction peers high                12.01      (0.000)            137.55

          Panel B. ELA
                                                              First-stage F-statistics
                                                           unconditional              SW
          Variable                                     F(10,238)     p-value        F(1, 238)

          FFT   middle                                      26.21      (0.000)             75.61
          FFT   high                                        22.34      (0.000)            102.87
          FFT   middle × baseline middle                   146.86      (0.000)            836.59
          FFT   high × baseline middle                     121.72      (0.000)           1500.06
          FFT   middle × baseline high                     128.34      (0.000)           1226.48
          FFT   high × baseline high                        88.44      (0.000)           1724.38
          FFT   middle × fraction peers middle              25.06      (0.000)            164.19
          FFT   high × fraction peers middle                21.57      (0.000)            213.78
          FFT   middle × fraction peers high                 13.9      (0.000)            362.49
          FFT   middle × fraction peers high                13.21      (0.000)            477.11
Note: The table presents weak instrument F-tests following Sanderson and Windmeijer (2016). Columns 1
and 2 present the unconditional F-statistics from first-stage regressions of equation (23). Column 3 presents
the Sanderson-Windmeijer conditional F-statistics for each of the endogenous variables. The F-statistics in
column 3 need to be compared to the critical values of the Stock-Yogo weak identification F-test (Stock and
Yogo, 2005). All of the F-statistics exceed the Stock-Yogo critical values for a 5% maximal IV relative bias
(critical value is 20.74).




                                                     47
Table A.8: OLS regression results of the linear model. Dependent variables: student test score
           outcomes

                                          (1)         (2)          (3)       (4)            (5)          (6)
                                         A. Only teacher           B. Full model              C. Without
                                              effects                                       teacher × peer
                                                                                              interactions
                                        Math         ELA          Math         ELA         Math         ELA
       FFT                             0.088**      0.118**     0.081**     0.116**       0.080**     0.116**
                                       (0.040)      (0.045)      (0.040)     (0.045)      (0.040)     (0.044)
       FFT × baseline                                            0.060*      0.088**      0.059**     0.078**
                                                                 (0.031)     (0.032)      (0.028)     (0.030)
       FFT × avg. peer baseline                                   -0.006      -0.066
                                                                 (0.066)     (0.081)
       Baseline                        0.749***    0.690***     0.595***    0.460***     0.598***     0.487***
                                        (0.011)     (0.011)      (0.079)     (0.081)      (0.073)      (0.078)
 R2                                      0.700       0.633        0.701       0.633        0.701        0.633
 N                                       8,534       9,641        8,534       9,641        8,534        9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The specifications
include linear terms for FFT, individual and peer baseline test scores. All regressions control for the h(x, x)
function (see Section 2) and for randomization block fixed effects. Analytic standard errors, clustered by
randomization block, are in parentheses. FFT: Framework for teaching.
*** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.




                                                      48
Table A.9: OLS regression results of the 3 × 3 model. Dependent variables: student test score
           outcomes

                                        (1)         (2)          (3)       (4)           (5)         (6)
                                       A. Only teacher           B. Full model            C. Without
                                            effects                                     teacher × peer
                                                                                          interactions
                                       Math         ELA         Math        ELA         Math        ELA
       FFT middle                     0.062*       0.028        0.032       -0.058      0.032      -0.127**
                                      (0.032)     (0.034)      (0.097)     (0.091)     (0.038)      (0.045)
       FFT high                        0.066       0.048        -0.060      -0.043      -0.016     -0.141**
                                      (0.041)     (0.043)      (0.113)     (0.125)     (0.052)      (0.054)
       FFT middle
        × baseline middle                                       0.030      0.108**      0.033      0.102**
                                                               (0.047)     (0.054)     (0.045)     (0.051)
        × baseline high                                         0.039      0.136**      0.053      0.137**
                                                               (0.060)     (0.067)     (0.055)     (0.062)
       FFT high
        × baseline middle                                      0.100*       0.113*     0.098*       0.094
                                                               (0.059)     (0.060)     (0.059)     (0.059)
        × baseline high                                        0.120*      0.225**      0.104      0.193**
                                                               (0.068)     (0.075)     (0.067)     (0.072)
       FFT middle
        × fraction peers middle                                 -0.024      -0.204
                                                               (0.198)     (0.187)
        × fraction peers high                                   -0.045      -0.126
                                                               (0.187)     (0.154)
       FFT high
        × fraction peers middle                                 0.155       -0.187
                                                               (0.224)     (0.232)
        × fraction peers high                                   0.460       -0.355
                                                               (0.409)     (0.343)

       Baseline middle               0.911***    0.823***     0.782***    0.713***    0.783***     0.723***
                                      (0.072)     (0.075)      (0.076)     (0.093)     (0.075)      (0.095)
       Baseline high                 1.678***    1.636***     1.551***    1.443***    1.544***     1.454***
                                      (0.105)     (0.101)      (0.111)     (0.113)     (0.106)      (0.116)
 R2                                    0.618       0.557        0.570       0.523       0.570        0.523
 N                                     8,534       9,641        8,534       9,641       8,534        9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. All regressions
control for the h(x, x) function (see Section 2) and for randomization block fixed effects. Analytic standard
errors, clustered by randomization block, are in parentheses. FFT: Framework for teaching.
*** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.




                                                     49
Table A.10: IV regression results of the 2 × 2 model. Dependent variables: student test score
            outcomes

                                       (1)         (2)          (3)       (4)            (5)          (6)
                                      A. Only teacher           B. Full model              C. Without
                                           effects                                       teacher × peer
                                                                                           interactions
                                      Math         ELA         Math          ELA        Math         ELA
        FFT high                     0.072*       -0.060       0.088         0.170      0.056       -0.027
                                     (0.038)     (0.043)      (0.087)      (0.107)     (0.047)     (0.046)
         × baseline high                                       0.039        -0.014      0.030       -0.062
                                                              (0.053)      (0.055)     (0.052)     (0.055)
         × fraction peers high                                 -0.068      -0.422*
                                                              (0.149)      (0.229)
        Baseline high               0.935***    0.927***     0.920***     0.938***    0.924***     0.956***
                                     (0.058)     (0.054)      (0.058)      (0.060)     (0.057)      (0.060)
  R2                                  0.545       0.485        0.545        0.481       0.545        0.485
  N                                   8,534       9,641        8,534        9,641       8,534        9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The instrumental
variables are based on assigned teacher FFT (Panels A­C) and assigned peer baseline test scores (Panel B). All
regressions control for the h(x, x) function (see Section 2) and for randomization block fixed effects. Analytic
standard errors, clustered by randomization block, are in parentheses. FFT: Framework for teaching.
*** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.




                                                      50
Table A.11: IV regression results of the 4 × 4 model. Dependent variables: student test score
            outcomes

                                         (1)         (2)          (3)       (4)             (5)         (6)
                                        A. Only teacher           B. Full model              C. Without
                                             effects                                       teacher × peer
                                                                                             interactions
                                        Math         ELA         Math         ELA         Math         ELA
       FFT lower middle                0.146**      -0.037       0.029       0.097        0.114       -0.056
                                       (0.063)     (0.048)      (0.307)     (0.188)      (0.092)     (0.059)
       FFT upper middle                 0.029        0.013      -0.656*      -0.222       -0.035      -0.114
                                       (0.059)     (0.055)      (0.386)     (0.268)      (0.078)     (0.072)
       FFT high                         0.017       -0.006     -1.622**      -0.044       -0.162      -0.132
                                       (0.069)     (0.060)      (0.815)     (0.213)      (0.122)     (0.086)
       FFT lower middle
       × baseline lower middle                                   0.111       0.084        0.083        0.074
                                                                (0.096)     (0.075)      (0.095)      (0.072)
       × baseline upper middle                                   0.028       0.023        -0.001       0.007
                                                                (0.104)     (0.087)      (0.107)      (0.079)
       × baseline high                                           0.053       0.028         0.016       0.002
                                                                (0.125)     (0.107)      (0.124)      (0.104)
       FFT upper middle
       × baseline lower middle                                   0.101       0.103        0.096       0.103
                                                                (0.087)     (0.070)      (0.078)     (0.069)
       × baseline upper middle                                   0.001      0.141*        0.015      0.142*
                                                                (0.087)     (0.084)      (0.083)     (0.080)
       × baseline high                                           0.110      0.214**       0.111      0.222**
                                                                (0.115)     (0.092)      (0.100)     (0.093)
       FFT high
       × baseline lower middle                                  0.269**      0.144*      0.200*       0.118
                                                                (0.120)     (0.075)      (0.104)     (0.074)
       × baseline upper middle                                   0.136      0.232**       0.140      0.181**
                                                                (0.111)     (0.089)      (0.113)     (0.085)
       × baseline high                                          0.266**     0.251**      0.253**      0.182*
                                                                (0.130)     (0.097)      (0.124)     (0.099)

       Baseline lower middle          0.635***    0.780***      0.517**     0.747***    0.563***     0.721***
                                       (0.131)     (0.098)      (0.195)      (0.105)     (0.156)      (0.107)
       Baseline upper middle          1.228***    1.273***     1.143***     1.246***    1.201***     1.203***
                                       (0.160)     (0.116)      (0.218)      (0.124)     (0.177)      (0.127)
       Baseline high                  1.913***    2.170***     1.750***     2.121***    1.835***     2.072***
                                       (0.172)     (0.141)      (0.246)      (0.148)     (0.201)      (0.151)
 
 R2                                     0.649       0.592        0.638       0.589        0.648        0.593
 N                                      8,534       9,641        8,534       9,641        8,534        9,641
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The instrumental
variables are based on assigned teacher FFT (Panels A­C) and assigned peer basedline test scores (Panel B).
All regressions control for the h(x, x) function (see Section 2) and for randomization block fixed effects. The
results for the coefficients on teacher-peer match effects (Panel B) are omitted. Analytic standard errors,
clustered by randomization block, are in parentheses. FFT: framework for teaching.
*** significant at the 1%-level ** significant at the 5%-level * significant at the 10%-level.
                                                      51
Table A.12: IV regression results of the 3 × 3 model with CLASS as measure of teaching practices.
            Dependent variables: student test score outcomes

                                        (1)         (2)          (3)       (4)            (5)         (6)
                                       A. Only teacher           B. Full model             C. Without
                                            effects                                      teacher × peer
                                                                                           interactions
                                       Math         ELA         Math         ELA         Math        ELA
       CLASS middle                    0.039       0.071        -0.214       0.115       0.008        0.038
                                      (0.061)     (0.067)      (0.489)      (0.235)     (0.103)      (0.072)
       CLASS high                      -0.050      0.010        -0.521       0.085      -0.211*       -0.099
                                      (0.079)     (0.088)      (0.520)      (0.262)     (0.117)      (0.107)
       CLASS middle
       × baseline middle                                        0.075        0.054       0.074        0.058
                                                               (0.105)      (0.070)     (0.098)      (0.067)
       × baseline high                                          0.008        0.040       0.019        0.048
                                                               (0.115)      (0.092)     (0.109)      (0.091)
       CLASS high
       × baseline middle                                       0.201*      0.177**      0.198**     0.168**
                                                               (0.103)     (0.076)      (0.100)     (0.077)
       × baseline high                                         0.253**     0.157*       0.240**      0.137
                                                               (0.114)     (0.085)      (0.106)     (0.088)
       CLASS middle
       × fraction peers middle                                  0.451        -0.165
                                                               (0.934)      (0.473)
       × fraction peers high                                    0.153        -0.040
                                                               (0.373)      (0.306)
       CLASS high
       × fraction peers middle                                  0.741        -0.168
                                                               (0.916)      (0.375)
       × fraction peers high                                    0.036        -0.324
                                                               (0.442)      (0.382)

       Baseline middle               0.929***    0.870***     0.819***     0.798***    0.820***     0.798***
                                      (0.095)     (0.087)      (0.148)      (0.100)     (0.143)      (0.099)
       Baseline high                 1.686***    1.645***     1.572***     1.584***    1.562***     1.586***
                                      (0.118)     (0.115)      (0.158)      (0.122)     (0.152)      (0.124)
 R2                                    0.607       0.557        0.603        0.557       0.607        0.558
 N                                     6,320       6,999        6,320        6,999       6,320        6,999
Note: The dependent variables are subject-specific test score outcomes in math and ELA. The instrumental
variables are based on assigned teacher CLASS (Panels A­C) and assigned peer baseline test scores (Panel
B). For details on the CLASS measure of teaching practices, see Appendix B. All regressions control for the
h(x, x) function (see Section 2) and for randomization block fixed effects. Analytic standard errors, clustered
by randomization block, are in parentheses.
***significant at the 1%-level, **significant at the 5%-level, *significant at the 10%-level.




                                                      52
Table A.13: Average reallocation gains in math: sensitivity to restrictions on possible assignments.
            Gains expressed in test score standard deviations.

               (1)          (2)        (3)      (4)          (5)         (6)             (7)       (8)
                                      Panel A. Optimal versus status quo
                     A.I Within school type                     A.II Within randomization block
           all students    high    middle    low            all students   high   middle      low
  Gain         0.019       0.031    0.015   0.015               0.005      0.009   0.004     0.003
  SE          (0.007)     (0.015) (0.010) (0.012)              (0.002)    (0.004) (0.003) (0.003)
  N            8,534       2,332    3,108   3,094               8,534      2,332   3,108     3,094

                                   Panel B. Optimal versus worst allocation
                     B.I Within school type                     B.II Within randomization block
           all students    high    middle    low            all students   high   middle      low
  Gain         0.048       0.089    0.025   0.041               0.011      0.020   0.008     0.008
  SE          (0.015)     (0.039) (0.019) (0.028)              (0.003)    (0.009) (0.006) (0.007)
  N            8,534       2,332    3,108   3,094               8,534      2,332   3,108     3,094
Note: The table shows the average reallocation gains from implementing the optimal assignment instead
of the random assignment (status quo) in Panel A, and the average reallocation gains from implementing
the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in test score
standard deviations. The computations are based on the 3 × 3 model without teacher-by-peer interactions
(see Table 3, column 5). Panels A.I and B.I display the reallocation effects when the reallocation is carried
out within school types (elementary or middle school) and across school districts. Panels A.II and B.II
display the reallocation effects when the reallocation is carried out within randomization blocks. Standard
errors are in parentheses and computed using the Bayesian bootstrap with 1,000 replications (see Section 4).
High/middle/low: students in the top/middle/bottom tercile of the baseline test score distribution.




                                                     53
Table A.14: Average reallocation gains in ELA: sensitivity to restrictions on possible assignments.
            Gains expressed in test score standard deviations

                (1)          (2)        (3)      (4)          (5)         (6)             (7)        (8)
                                       Panel A. Optimal versus status quo
                     A.I Within school type                      A.II Within randomization block
           all students    high    middle    low             all students   high   middle      low
   Gain        0.009       0.027    0.002   0.004                0.002      0.007   0.001     0.001
   SE         (0.007)     (0.013) (0.007) (0.012)               (0.002)    (0.004) (0.002) (0.003)
   N           9,641       2,480    3,402   3,759                9,641      2,480   3,402     3,759

                                    Panel B. Optimal versus worst allocation
                     B.I Within school type                      B.II Within randomization block
           all students    high    middle    low             all students   high   middle      low
   Gain        0.021       0.066    0.004   0.006                0.005      0.017   0.001     0.002
   SE         (0.013)     (0.034) (0.013) (0.022)               (0.004)    (0.009) (0.004) (0.007)
   N           9,641       2,480    3,402   3,759                9,641      2,480   3,402     3,759
Note: The table shows the average reallocation gains from implementing the optimal assignment instead
of the random assignment (status quo) in Panel A, and the average reallocation gains from implementing
the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in test score
standard deviations. The computations are based on the 3 × 3 model without teacher-by-peer interactions
(see Table 3, column 6). Panels A.I and B.I display the reallocation gains when the reallocation is carried out
within school types (elementary or middle school) and across school districts. Panels A.II and B.II display
the reallocation effects when the reallocation is carried out within randomization blocks. Standard errors
are in parentheses and computed using the Bayesian bootstrap with 1,000 replications. High/middle/low:
students in the top/middle/bottom tercile of the baseline test score distribution.




                                                      54
     Table A.15: Average reallocation gains in math: sensitivity to inclusion of teacher-by-peer interactions. Gains expressed in test score standard
                 deviations

                    (1)          (2)        (3)       (4)             (5)        (6)      (7)       (8)                 (9)          (10)       (11)      (12)
                                                                    Panel A. Optimal versus status quo
                         A.I Within school type                    A.II Within school type and district                 A.III Within randomization block
               all students    high    middle    low             all students   high    middle     low              all students    high   middle     low
       Gain        0.035       0.059    0.026   0.027                0.034     0.057     0.025    0.025                 0.009      0.016   0.008     0.006
       SE         (0.020)     (0.028) (0.017) (0.026)               (0.022)   (0.030) (0.018) (0.031)                  (0.006)    (0.008) (0.006) (0.006)
       N           8,534       2,332    3,108   3,094                8,534     2,332     3,108    3,094                 8,534      2,332   3,108     3,094

                                                                 Panel B. Optimal versus worst allocation
                         B.I Within school type                    B.II Within school type and district                 B.III Within randomization block
               all students    high    middle    low             all students   high    middle     low              all students    high   middle     low
       Gain        0.098       0.170    0.070   0.073                0.085     0.146     0.061    0.064                 0.022      0.035   0.019     0.015
       SE         (0.048)     (0.093) (0.043) (0.053)               (0.047)   (0.089) (0.046) (0.054)                  (0.012)    (0.018) (0.013) (0.012)
55




       N           8,534       2,332    3,108   3,094                8,534     2,332     3,108    3,094                 8,534      2,332   3,108     3,094
     Note: The table shows the average reallocation gains from implementing the optimal assignment instead of the random assignment (status quo) in Panel
     A, and the average reallocation gains from implementing the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in
     test score standard deviations. The computations are based on the 3 × 3 model with teacher-by-peer interactions (see Table 3, column 3). Columns 1­4
     display the reallocation effects when the reallocation is carried out within school types (elementary or middle school) and across districts, columns 5­8
     display the reallocation effects when the reallocation is carried out within school types and districts, and columns 9­12 display the reallocation effects when
     the reallocation is carried out within randomization blocks. Standard errors are in parentheses and computed using the Bayesian bootstrap with 1,000
     replications. High/middle/low: students in the top/middle/bottom tercile of the baseline test score distribution.
     Table A.16: Average reallocation gains in ELA: sensitivity to inclusion of teacher-by-peer interactions. Gains expressed in test score standard
                 deviations

                    (1)          (2)        (3)       (4)             (5)        (6)      (7)       (8)                 (9)          (10)       (11)      (12)
                                                                    Panel A. Optimal versus status quo
                         A.I Within school type                    A.II Within school type and district                 A.III Within randomization block
               all students    high    middle    low             all students   high    middle     low              all students    high   middle     low
       Gain        0.044       0.042    0.043   0.045                0.039     0.034     0.040    0.042                 0.012      0.011   0.011     0.014
       SE         (0.027)     (0.023) (0.024) (0.044)               (0.023)   (0.019) (0.020) (0.037)                  (0.008)    (0.005) (0.007) (0.011)
       N           9,641       2,480    3,402   3,759                9,641     2,480     3,402    3,759                 9,641      2,480   3,402     3,759

                                                                 Panel B. Optimal versus worst allocation
                         B.I Within school type                    B.II Within school type and district                 B.III Within randomization block
               all students    high    middle    low             all students   high    middle     low              all students    high   middle     low
       Gain        0.091       0.070    0.080   0.116                0.080     0.061     0.070    0.101                 0.027      0.023   0.021     0.035
       SE         (0.052)     (0.037) (0.043) (0.085)               (0.044)   (0.031) (0.035) (0.069)                  (0.016)    (0.011) (0.012) (0.026)
56




       N           9,641       2,480    3,402   3,759                9,641     2,480     3,402    3,759                 9,641      2,480   3,402     3,759
     Note: The table shows the average reallocation gains from implementing the optimal assignment instead of the random assignment (status quo) in Panel
     A, and the average reallocation gains from implementing the optimal assignment instead of the worst assignment in Panel B. The gains are expressed in
     test score standard deviations. The computations are based on the 3 × 3 model with teacher-by-peer interactions (see Table 3, column 4). Columns 1­4
     display the reallocation effects when the reallocation is carried out within school types (elementary or middle school) and across districts, columns 5­8
     display the reallocation effects when the reallocation is carried out within school types and districts, and columns 9­12 display the reallocation effects when
     the reallocation is carried out within randomization blocks. Standard errors are in parentheses and computed using the Bayesian bootstrap with 1,000
     replications. High/middle/low: students in the top/middle/bottom tercile of the baseline test score distribution.
B     Data Appendix
B.1     Construction of the dataset from the MET files
Our dataset combines eight different data files from the MET study (2018 release): the
randomization file, the teacher file, the class section file, the student file, two classroom
observation score files (the CLASS and the FFT file), as well as the district-wide files for the
school years 2009/10 and 2010/11.
     The basis of our data construction is the randomization file. It contains identifiers for
all students who were randomly assigned to a teacher in the second year of the MET study,
and an identifier (identifiers) for their assigned teacher(s). Through the teacher identifiers,
we merge this dataset to the FFT and CLASS files, and thus obtain the FFT and CLASS
of the assigned teachers. Moreover, we use the teacher identifiers to merge the data to the
teacher file, in order to obtain teacher background characteristics of the assigned teachers.
     Student characteristics and test score outcomes come from the student file and the district-
wide files. Through a student identifier, we first merge the randomization file with the
student file, which contains individual information for all students who were part of the
MET study and still had a MET teacher at the end of the school year; i.e., the student
file does not contain any information on students who switch to a non-MET teacher within
the same school, a non-MET school, or a non-MET district. We use the student file to
extract students' demographic characteristics, baseline test scores (test scores in school year
2009/10), and test score outcomes (test scores in school year 2010/11) in math and ELA.
While there are no missings for student background characteristics, some of the students
have missing baseline test scores or missing test score outcomes. Therefore, we obtain the
missing test score information from the district-wide files.
     To construct information on the peer group composition in the assigned classroom, we
average the student background characteristics and baseline test scores at the level of the
assigned teacher and randomization block, since each teacher can only be assigned to one
classroom within a randomization block. To be precise, we construct the leave-own-out mean,
i.e., the classroom mean excluding the student herself.
     Information on the realized teacher and the realized peers are constructed based on the
student file. This file contains an identifier for the section that the student attended in school
year 2010/11, as well as an identifier for the teacher who taught the section. Based on this
teacher identifer, we merge information on the FFT, CLASS, and background characteristics
of the realized teacher. Furthermore, we construct leave-own-out means of peer characteristics
based on the section identifiers. We add information on the size of the realized classroom
from the class section file.

B.2     Construction of the estimation sample
In our analysis, we focus on students in grades 4-8 who were randomized to a teacher before
the start of the school year. We create separate samples for math and ELA. In total, the
randomization sample contains information on about 16,000 students who were randomized
to a teacher in math and ELA in grades 4-8.




                                               57
                   Table B.1: Sample construction from the randomization file

                                                         (1)          (2)        (3)         (4)
 Restrictions                                                  Math                    ELA
                                                          N      percent         N      percent
                                                                 of base                of base
                                                                 sample                 sample
 1.   Students in randomization file                   15,749             -    16,252            -
 2.   Record in the student file                       10,268             -    11,271            -
 3.   At least two classrooms per randomization         9,824         100%     10,856        100%
      block (base sample)
 4.   Baseline test scores and test score outcomes      9,245          94%     10,136         93%
      available
 5.   FFT of the assigned teacher available             9,066          92%     10,057         93%
 6.   FFT of the realized teacher available             8,724          89%      9,767         90%
 7.   Information on the assigned peers available       8,718          89%      9,762         90%
 8.   Information on the realized peers available       8,717          89%      9,761         90%
 9.   At least two classrooms per randomization         8,534          87%      9,641         89%
      block after applying all restrictions
Note: Sample restrictions used to create the estimation sample from MET data files, school year 2010/11.



    Table B.1 details further restrictions that we apply to construct our estimation dataset.
We require each student to have a record in the student file, since we use this file to identify
the realized teacher, the realized peer group, and the student background variables. About
two-thirds of the students in the randomization sample can be identified in the student file.
Moreover, we restrict our sample to only randomization blocks with at least two classrooms.
The resulting dataset forms our base sample.
    After constructing our base sample, we remove observations with missing information
on baseline test scores or test score outcomes, with missing information on the FFT of
the assigned or realized teacher, and with missing information on the baseline test scores
of the assigned or realized peers. We further remove all randomization blocks with only
one classroom after applying these restrictions. Our resulting estimation sample contains
information on about 8,500 students in math and 9,600 students in ELA. Thus, we retain
about 87 percent of observations from the base sample in math, and 89 percent of observations
from the base sample in ELA.
    Our sample size is close to the sample size reported by Garrett and Steinberg (2015).
We obtain a slightly larger sample size because we complete missing test score information
in the student file with information from the district-wide files. These files are part of the
2018 MET release and were not available when Garrett and Steinberg (2015) published their
study.
    Our estimation dataset does not contain any missing information for the main variables
used in the analysis; however, it contains some missings in teacher and student demographics.
With the exception of free/reduced-price lunch eligibility (30 percent missings in math and 25
percent missings in ELA), the student background variables contain (virtually) no missings.
Further missings occur in the teacher demographics: teacher gender and race/ethnicity are
missing for 3­4 percent of the estimation sample. Teacher experience and teachers' education

                                                  58
are missing for about 30 percent of the estimation sample each, because one school district
did not provide information on teachers' education, and another district did not provide in-
formation on teachers' experience. Full information on teacher demographics is only available
for 42 percent of the math sample, and for 48 percent of the ELA sample.

B.3      Sample comparisons
This section investigates in how far the randomization sample differs from the estimation
sample. It compares the distribution of student baseline test scores and teacher FFT in the
original randomization sample with the distribution in the estimation sample.
    The randomization sample consists of about 15,700 students in math and 16,300 students
in ELA; baseline test scores are available for about 13,900 students in math and for about
14,400 students in ELA (see Figure B.1). The remaining student observations can neither
be matched to the district-wide files nor be matched to the student file. Our estimation
sample contains only students in the student file ­ because we use this file to identify realized
teachers and peers ­ and is thus considerably smaller (about 8,500 students in math and
about 9,600 students in ELA). Students in the estimation dataset have on average higher
baseline test scores than the students in the randomization dataset. The difference amounts
to 0.06 standard deviations in math and to 0.05 standard deviations in ELA.
Figure B.1: Distribution of baseline test scores in the randomization sample and the estimation
            sample


                                                               (1) Math baseline test scores                                                               (2) Math baseline test scores
                                                                  - randomization sample                                                                        - estimation sample
                                0 .02 .04 .06 .08 .1




                                                                                                                            0 .02 .04 .06 .08 .1
             Fraction of students




                                                                                                         Fraction of students




                                                       -4          -2            0              2   4                                              -4          -2            0             2   4
                                                                        Baseline test scores                                                                        Baseline test scores
                                                       Number of students = 13920, mean = .05                                                      Number of students = 8534, mean = .11



                                                               (3) ELA baseline test scores                                                                (4) ELA baseline test scores
                                                                 - randomization sample                                                                         - estimation sample
                                0 .02 .04 .06 .08 .1




                                                                                                                            0 .02 .04 .06 .08 .1
             Fraction of students




                                                                                                         Fraction of students




                                                       -4          -2            0              2   4                                              -4          -2            0             2   4
                                                                        Baseline test scores                                                                        Baseline test scores
                                                       Number of students = 14424, mean = .12                                                      Number of students = 9641, mean = .17



Note: The figure compares the distributions of student baseline test scores across the randomization sample
and the estimation sample for math (Panels 1 and 2) and ELA (Panels 3 and 4).



    Teacher FFT does not differ appreciably between the randomization sample and the
estimation sample (see Figure B.2). In the math randomization sample for grades 4­8, 666

                                                                                                        59
teachers have non-missing information on FFT; the estimation sample includes 614 teachers.
In both samples, the average FFT is 2.52. In the ELA randomization sample for these grades,
705 teacher have non-missing FFT, and the estimation sample contains 649 teachers. The
average FFT in both samples are nearly identical with 2.57 and 2.58.

     Figure B.2: Distribution of FFT in the randomization sample and the estimation sample


                                       (1) FFT (math) - randomization sample                                         (2) FFT (math) - estimation sample
                               .2




                                                                                                           .2
            Fraction of teachers




                                                                                        Fraction of teachers
                               .15




                                                                                                           .15
                               .1




                                                                                                           .1
                               .05




                                                                                                           .05
                               0




                                                                                                           0
                                      1.5          2          2.5            3   3.5                              1.5          2          2.5            3   3.5
                                                              FFT                                                                         FFT
                                     Number of teachers = 666, mean = 2.52                                       Number of teachers = 614, mean = 2.52



                                       (3) FFT (ELA) - randomization sample                                             (4) FFT (ELA) - estimation sample
                               .2




                                                                                                           .2
            Fraction of teachers




                                                                                        Fraction of teachers
                               .15




                                                                                                           .15
                               .1




                                                                                                           .1
                               .05




                                                                                                           .05
                               0




                                                                                                           0




                                      1.5          2          2.5            3   3.5                              1.5          2          2.5            3   3.5
                                                              FFT                                                                         FFT
                                     Number of teachers = 705, mean = 2.57                                       Number of teachers = 649, mean = 2.58



Note: The figure compares the distributions of teacher FFT across the randomization sample and the esti-
mation sample for math teachers (Panels 1 and 2) and ELA teachers (Panels 3 and 4). The red lines denote
the FFT cutoffs we use to classify teachers in our preferred specification.




B.4     Information on the CLASS measure
Information from the MET User Guide. The following information about the CLASS
(Classroom Assessment Scoring System) protocol is taken from the MET User Guide (White
et al., 2019, p. 32­33):
    "CLASS is an observational protocol designed to measure the extent to which teachers
effectively support children's social and academic development. Two different versions of
CLASS were used in the MET Study: the Upper Elementary (Grades 4-5) and the Secondary
(Grades 6-9).
    "The CLASS instrument is divided into three broad domains of measurement: Emotional
Support, Classroom Organization, and Instructional Support. Each domain, in turn, is mea-
sured by a number of dimensions. The domain "Emotional Support," for example, refers to
the emotional tone in a classroom, which can be measured along four dimensions: positive cli-
mate, negative climate, teacher sensitivity, and regard for student perspectives. The domain
"Classroom Organization" refers to the ways a classroom is structured to manage students'
behavior, time, and attention, which can be measured along three dimensions: behavior

                                                                                       60
management, productivity, and instructional learning formats. The domain "Instructional
Supports" refers to the ways a teacher provides supports to encourage student conceptual
understanding and student problem solving and can be measured along four dimensions:
content understanding, analysis and problem solving, instructional dialogue, and quality of
feedback. [...]
    "CLASS scoring is done using a detailed scoring rubric. In this rubric, a classroom is
scored on each instructional dimension at 15-minute intervals using a 7-point scale. For the
MET Study, only the first 30 minutes of each video was scored. Scores are assigned based
on anchor descriptions of what is to be observed in order for a classroom to be scored at
"high," "mid," and "low" points on the 7-point scale. In the MET Study, dimension scores
are often aggregated to higher levels of analysis simply by averaging raters' scores to get
a single segment score and then calculating the harmonic mean of segment scores across
all segments for a particular target of measurement (e.g., a day, a class section, a teacher).
Standard errors of measurement for these derived scores are not generally reported."

Use of the CLASS measure in our study. We use the CLASS measure to test the
sensitivity of our results to the classroom observation protocol used. To construct a unique
measure for each teacher, we take the average across the three CLASS domains.
    Our estimation sample contains 466 teachers in the math sample and 495 teachers in the
ELA sample. In the math sample, CLASS ranges from 2.54 to 5.58, with a mean of 4.34. In
the ELA sample, CLASS ranges from 2.95 to 5.58, with a mean of 4.39. We split teachers
in three categories according to this measure. We choose the cutoff values of 4 and 4.5 to
carry out the split. Both in the math and in the ELA sample, 20 percent of the teachers are
classified as low, 42 percent as middle, and 38 percent as high.




                                             61
C      Optimal allocation: linear program
The linear program aims at maximizing the aggregate test score outcomes in the data. We
use Yc (w) to denote the predicted aggregate outcome of classroom c when assigned a teacher
of level w, where w = wL when assigned a low-, w = wM when assigned a middle-, and
w = wH when assigned a high-FFT teacher (see Section 4 for details). We use C to denote
the total number of teachers in the dataset, and Cw to denote the number of teachers of level
w in the dataset. We define an indicator variable cw , which takes the value 1 if classroom c
is taught by a teacher of level w, and 0 otherwise. We also define an assignment matrix A,
which contains all cw . The linear program can then be written as:
                                       C
                                 max                        cw Yc (w)
                                  A
                                       c=1 w{wL ,wM ,wH }

    subject to


                                               cw = 1  c  C
                              w{wL ,wM ,wH }



                          C
                               cw = Cw         for w  {wL , wM , wH }
                         c=1




                                           cw  {0, 1}

   This is a transportation problem with C + 3 + (3 × C ) constraints. We solve the trans-
portation problem in R using lpSolve.




                                                   62
