                                 NBER WORKING PAPER SERIES




     PECUNIARY EXTERNALITIES IN ECONOMIES WITH FINANCIAL FRICTIONS

                                            Eduardo Dávila
                                            Anton Korinek

                                         Working Paper 22444
                                 http://www.nber.org/papers/w22444


                       NATIONAL BUREAU OF ECONOMIC RESEARCH
                                1050 Massachusetts Avenue
                                  Cambridge, MA 02138
                                       July 2016




This paper combines the manuscripts "Systemic Risk-Taking: Amplification Effects, Externalities,
and Regulatory Responses" by Anton Korinek (2011) and "Dissecting Fire Sales Externalities" by
Eduardo Dávila (2014). An earlier version of the combined manuscript was circulated under the title
"Fire-Sale Externalities." We thank our editor, Dimitri Vayanos, and three anonymous referees for
their guidance and insightful comments. We are also greatly indebted to participants at numerous conference
and seminar presentations who have provided many helpful comments. Korinek is grateful for financial
support from the Lamfalussy Fellowship of the ECB, the Institute for New Economic Thinking, and
the NFI. Dávila is grateful for financial support from the Rafael del Pino Foundation. The views expressed
herein are those of the authors and do not necessarily reflect the views of the National Bureau of Economic
Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2016 by Eduardo Dávila and Anton Korinek. All rights reserved. Short sections of text, not to exceed
two paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.
Pecuniary Externalities in Economies with Financial Frictions
Eduardo Dávila and Anton Korinek
NBER Working Paper No. 22444
July 2016, Revised February 2017
JEL No. D62,E44,G21,G28

                                              ABSTRACT

This paper characterizes the efficiency properties of competitive economies with financial constraints,
in which phenomena such as fire sales and financial amplification may arise. We show that financial
constraints lead to two distinct types of pecuniary externalities: distributive externalities that arise
from incomplete insurance markets and collateral externalities that arise from price-dependent financial
constraints. For both types of externalities, we identify three sufficient statistics that determine optimal
taxes on financing and investment decisions to implement constrained efficient allocations. We also
show that fire sales and financial amplification are neither necessary nor sufficient to generate inefficient
pecuniary externalities. We demonstrate how to employ our framework in a number of applications.
Whereas collateral externalities generally lead to over-borrowing, the distortions from distributive
externalities may easily flip sign, leading to either under- or over-borrowing. Both types of externalities
may lead to under- or over-investment.


Eduardo Dávila
Kaufman Management Center
44 West Fourth Street, KMC 9-85
New York, NY 10012
edavila@stern.nyu.edu

Anton Korinek
Department of Economics
Johns Hopkins University
Wyman Park Building 531
3400 N. Charles Street
Baltimore, MD 21218
and NBER
akorinek@jhu.edu
1     Introduction
Modern economies have experienced recurrent financial crises involving sharp drops in asset
prices and amplification effects. Policy discussions in the aftermath of the 2008/09 Global
Financial Crisis have understandably focused on the possibility that such “fire sales” may lead
to inefficient externalities that call for regulatory intervention – as exemplified by the speech
by Stein (2013). Understanding whether financial amplification and fire sales, i.e. asset sales at
dislocated prices by financially constrained agents, provide a rationale for policy intervention is
thus crucial to redesigning our financial regulatory framework.
    In the existing literature, the seminal papers of Gromb and Vayanos (2002) and Lorenzoni
(2008) describe how asset sales by financially constrained agents can generate pecuniary
externalities that lead to constrained inefficient allocations.1                         Some policymakers and
commentators have interpreted this as implying that sharp changes in prices always involve
inefficient externalities.        However, the efficiency properties of economies with financially
constrained agents are less obvious than commonly understood, and a general description of
the resulting externalities has been missing.
    This paper seeks to fill this gap by developing a general framework to characterize the
pecuniary externalities that arise in environments with financially constrained agents. Our first
main result characterizes constrained efficient allocations and optimal corrective policies with
borrowers who are subject to financial constraints. We describe the optimal corrective policies
for financing and investment decisions as a function of sufficient statistics that are invariant
to the precise nature of the underlying financial frictions, e.g., uncontingent bonds, limited
commitment, market segmentation, etc.2
    We show that two distinct types of pecuniary externalities arise in such environments. We
refer to the first type as distributive externalities to highlight that these externalities are zero-
sum across agents at a given date/state. Distributive externalities arise when marginal rates of
substitution (MRS) between dates/states differ across agents, and a planner can improve on the
allocation by affecting the relative prices at which agents trade. Potential reasons why the MRS
are not equalized include, for instance, that the set of traded assets does not span all possible
states of nature, or binding collateral constraints. Intuitively, when MRS are not equal, a planner
    1 Whenever   some agents are financially constrained, the market outcome is clearly not first-best: removing the
frictions that underlie the financial constraints increases efficiency. However, in practice, policymakers frequently
must take such frictions as given, which leads to the question of whether decentralized equilibrium allocations are
constrained efficient. In other words, can a policymaker subject to the same constraints as private agents improve on
the market outcome?
   2 We adopt the concept of sufficient statistics to refer to high-level variables, as opposed to primitives, that

determine, within the environment we study, the presence of pecuniary externalities and the nature of the optimal
corrective policy. In our applications, we link the sufficient statistics that we identify to primitives of the model.



                                                            1
can modify allocations to induce price changes that improve the terms of the transactions of those
agents with relatively higher marginal utility in a given date/state. For example, a planner may
internalize that reducing fire sales raises the price received by the sellers, who may greatly value
having resources in those states as reflected by a high MRS.
   We refer to the second type as collateral externalities. Collateral externalities arise when
financial constraints depend on the market value of capital assets that serve as collateral. They are
part of a broader class of externalities that arise when financial constraints depend on aggregate
state variables, for example via market prices, which we analyze in the appendix. Intuitively,
when agents are subject to a binding constraint that depends on aggregate variables, a planner
internalizes that she can modify allocations to relax financial constraints. For example, the
planner may reduce fire sales to raise the value of capital assets that serve as collateral, which
increases the borrowing capacity of constrained agents.
   The existing literature has found it remarkably difficult to provide general results on the
direction of inefficiency – except in tightly-defined special cases.        Our second main result
explains why and delineates under what conditions the pecuniary externalities can be signed
unambiguously and when they can go in either direction. The sign and magnitude of distributive
externalities are determined by the product of three sufficient statistics: the difference in MRS of
agents, the net trading positions (net buying or net selling) of capital and financial assets, and
the sensitivity of equilibrium prices to changes in sector-wide state variables. The first two of
the three sufficient statistics for distributive externalities can go in either direction. Depending
on parameters, it is plausible to find economies in which differences in MRS and net trading
positions take positive or negative values. Furthermore, if risk markets are complete, MRS
are equated and distributive externalities are zero. In short, “anything goes,” and distributive
externalities cannot be signed in general.
   The sign and magnitude of collateral externalities is also determined by the product of three
sufficient statistics: the shadow value on the binding financial constraint, the sensitivity of
the financial constraint to the asset price, and the sensitivity of the equilibrium asset price to
changes in sector-wide state variables. The first two of the three sufficient statistics for collateral
externalities are always positive. Under natural conditions, asset prices are increasing in net
worth for each sector, pinning down the sign of the third sufficient statistic. This allows us to
show that collateral externalities generally entail over-borrowing, but they may lead to either
over- or under-investment. Importantly, our characterization of both distributive and collateral
externalities holds in a broad class of environments and is invariant to the precise nature of the
underlying financial frictions.
   We present two results on the implementation of corrective policies. First, we show that the
optimal corrective policy for an arbitrary financial security can be designed using an externality
pricing kernel. This result provides a simple expression to guide financial regulators on the


                                                  2
optimal magnitude of regulatory interventions. Secondly, we show that there exists a relation
between distortions in investment in productive assets and distortions in financial market
allocations. Intuitively, because investing in productive assets and buying financial assets are
both mechanisms for shifting resources across time, optimal policies must intervene in both
margins in a consistent way.
   Next, we discuss the relationship with two positive phenomena that are distinct from
pecuniary externalities but frequently appear in the same context: fire sales and financial
amplification. For the purposes of our framework, we define fire sales as instances when
financially constrained agents sell capital assets at a price that discounts the future returns that
they could earn at a higher rate than the market discount rate. We define financial amplification
as a situation when a marginal increase in the net worth of a sector, as measured by the
consumption goods at its disposal, leads to general equilibrium effects that improve the sector’s
terms of trade or relax binding financial constraints on the sector. We show that both fire sales and
financial amplification effects are conceptually distinct phenomena from inefficient pecuniary
externalities. Formally, both phenomena are neither necessary nor sufficient for constrained
inefficiency. They are not necessary because inefficiency may arise without asset sales and may
involve pecuniary externalities that mitigate shocks rather than amplifying them. They are not
sufficient because equilibrium is constrained efficient when there are fire sales and amplification
effects that only involve distributive externalities and insurance markets are complete, or when
agents are in a corner solution. This result implies that policymakers have to be careful when
arguing that fire sales and financial amplification effects justify policy intervention.
   Finally, we show that the externalities discussed above can be tackled by a variety of taxes
or subsidies on borrowers and lenders. In particular, the planner faces three degrees of freedom
in the choice of a constrained optimal tax system. This flexibility allows a planner to restore
constrained efficiency without intervening in each individual decision made by each agent. For
example, we show that it is sufficient to intervene in the financial decisions of borrowers only, or
that we can often combine taxes on borrowing and on investment into a single tax. Furthermore,
when these degrees of freedom imply that the optimal tax on a decision margin can be set to zero,
that decision can be interpreted as constrained efficient.
   Subsequently, we study four applications of our general framework that illustrate the use of
our sufficient statistics and how they can be traced back to the primitives of the economy. In
doing so, we also provide specific examples of how some of our sufficient statistics may flip sign
when the primitives of the model cross a defined threshold, corroborating the “anything goes”
result of our general framework.
   Our first application illustrates the possibility of constrained efficient financial amplification
and fire sales. In an environment in which the financial constraint does not depend on prices and
risk markets are complete, we show that fire sales and financial amplification effects of arbitrary


                                                  3
magnitude are compatible with constrained efficiency. The reason is that the complete risk
markets allow agents to equate their MRS so distributive effects do not lead to inefficiency. Our
second and third applications consider environments in which there are distributive externalities
that flip sign when certain primitives of the economy cross well-defined thresholds. In the
second application, borrowers turn from net buyers into net sellers of capital when a productivity
parameter crosses a certain threshold. In the third application, the difference in the MRS of
borrowers and lenders switches sign as borrowers hit the upper versus the lower limit for trade
in the constrained financial market when their endowment crosses two well-defined thresholds.
When the sufficient statistics flip sign, the direction of inefficiency of financing and investment
decisions switches sign as well. Our fourth application provides an example of a price-dependent
collateral constraint in which collateral externalities cause over-borrowing and either over- or
under-investment. At last, we map our applications to real-world situations.
     Before concluding, we use the general framework developed in the paper to place in context
several results highlighted by previous literature. In particular, we classify papers according to
whether they focus on distributive or collateral externalities or both.

Outline         Section 2 describes the baseline model environment, characterizes the first best and
solves for the decentralized equilibrium. We study the constrained efficiency properties of the
equilibrium and present several corollaries in Section 3. In Section 4, we illustrate our findings
in a number of specific applications. Section 5 relates our results to previous work, and Section 6
concludes. All proofs and derivations as well as several extensions are in the appendix.


2      Baseline Model
Our baseline model describes fire sales in an economy with two types of agents that we call
borrowers and lenders. Borrowers are potentially more productive than lenders at using capital
but are subject to financial constraints that may lead to fire sales. The model environment
can be viewed as a simplified three-date version of Kiyotaki and Moore (1997) with alternative
preferences, technology, and financial market structure.3


2.1     Environment
Time is discrete and there are three dates t = 0, 1, 2. There is a unit measure of borrowers and a
unit measure of lenders, respectively denoted by i ∈ I = {b, `}. There are two types of goods, a
    3 For   expositional simplicity, our baseline model only features two agents and a specific production structure.
We extend our main results to multiple agents with more general state-dependent utilities and a more general
investment and production structure in the online appendix.




                                                           4
homogeneous consumption good, which serves as numeraire, and a capital good. We denote by
ω ∈ Ω the state of nature realized at date 1, where Ω is the set of possible states.

Preferences/endowments       Each agent i values consumption cit ≥ 0 according to a time
separable utility function                       "                     #
                                                      2           
                                      U i = E0       ∑      β u cit
                                                             t i
                                                                                                   (1)
                                                     t =0
where the flow utility function ui (c) is strictly increasing and weakly concave. We denote by
ei,ω
 t ≥ 0 the endowment of consumption good that agent i receives at date t given a state ω.

Technology At date 0, agents can invest hi ki1 units of consumption good to produce ki1 units
                                              

of date 1 capital goods, where the functions hi (k ) are increasing and convex and satisfy hi (0) = 0.
The economy’s total capital stock remains constant at kb1 + k`1 after the initial investment. We
denote by ki,ω
           2 the amount of capital that agent i carries from date 1 to 2. Capital fully depreciates
after date 2.
   At dates 1 and 2, agent i employs capital to produce Fti,ω (k) units of the consumption good,
where the production function is increasing and weakly concave and satisfies Fti,ω (0) = 0. As
is common in the literature on fire sales, we assume that the productivity of capital depends on
who owns it (see e.g. Shleifer and Vishny, 1992). We will typically assume that borrowers have a
superior use for capital goods than lenders in our applications.

Market structure     At date 0, agents trade one-period securities contingent on every state of
nature ω ∈ Ω. We denote by x1i,ω the date 0 purchases of state ω contingent securities by agent
i and by m1ω the date 0 state price density associated with such securities. If x1i,ω < 0, agent
i borrows against state ω. If x1i,ω > 0, agent i saves towards
                                                          h    state
                                                                   i ω. The total amount spent
                                                               i,ω
by agent i at date 0 on state-contingent securities is E0 m1 x1 . Because there is no further
                                                            ω

uncertainty at date 2, we denote by x2i,ω the date 1 holdings of uncontingent one-period bonds in
state ω, which trade at a price m2ω . There is also a market to trade capital at a price qω at date
1 after production has taken place. There is no role for trading capital at date 2 because it fully
depreciates.
   The budget constraints capture that consumption, capital investment, and net purchases of
capital and securities need to be covered by endowment income, security payoffs, and production
income for each agent i in every state ω ∈ Ω
                                    h      i
                  c0i + hi ki1 + E0 m1ω x1i,ω = e0i                                                (2)
                                                                              
                       c1i,ω + qω ∆ki,ω  ω i,ω
                                    2 + m2 x2
                                                         i,ω     i,ω
                                                     = e1 + x1 + F1      i,ω
                                                                               ki1 , ∀ω            (3)
                                                                                  
                                             c2i,ω   = e2i,ω + x2i,ω + F2i,ω ki,ω2   , ∀ω          (4)

where ∆ki,ω     i,ω   i
        2 : = k 2 − k 1 . All choice variables at dates 1 and 2 are contingent on the state of nature
ω, which is realized at date 1.

                                                      5
Financial constraints          The final ingredient of our model is a set of financial market
imperfections that constrain borrowers’ choices. We introduce these through two vector-valued
functions Φ1b (·) and Φ2b,ω (·).                      
    At date 0, borrowers’ security holdings x1b = x1b,ω ω ∈Ω are subject to a constraint of the form
                                                                        
                                                   Φ1b       x1b , kb1       ≥0                                       (5)

which defines a convex set. At date 1, borrowers’ security holdings x2b,ω are subject to a possibly
state-dependent constraint that is also a function of the asset price qω
                                                          
                                  Φ2b,ω x2b,ω , kb,ω
                                                 2   ; q ω
                                                             ≥ 0, ∀ω                                                  (6)

                                          b,ω                            ∂Φ2b,ω
which defines a convex set and satisfies Φ2q  :=             ≥ 0. This sign restriction implies that
                                                                          ∂qω
a higher price of the capital good weakly relaxes the financial constraint.4 For instance, if
borrowers have to collateralize their borrowing with a fraction φω ∈ [0, 1] of their asset holdings,
Φ2b,ω (·) := x2b,ω + φω qω kb,ω
                            2   ≥ 0. For symmetry of notation, we define Φ1` (·) = Φ2`,ω (·) := 0 so
the constraints are always trivially satisfied for lenders.5

Interpretation of financial constraints             This general specification allows us to consider a wide
range of financial constraints.6 Focusing on the date 0 constraints, one extreme, captured by
the specification Φ1b x1b , kb1 := 0, is that agents face no constraints at date 0 and can trade in
                               

a complete market, since constraint (5) becomes redundant under this specification. This can be
interpreted as well-functioning
                              risk markets. The opposite extreme, captured by the specification
                  b,ω
Φ1 x1 , k 1 : = x1
  b   b   b
                        ω ∈Ω and the vector constraint Φ1 (·) = 0 with equality, implies that no
                                                        b
            

financial trade is possible and borrowers have to satisfy x1b,ω = 0, ∀ω. This can be interpreted as
a severe disruption of financial markets. Clearly, a planner who is subject to the same constraint
cannot alter the financing decisions of agents who face this constraint.
   4 For   expositional simplicity, the financial constraint at date 0 does not depend on prices or other aggregate
variables in our baseline model. We show in the online appendix that it is straightforward to extend our results
to that case. We also show that it is straightforward to allow for constraints that depend on future aggregate state
variables, which is appropriate when financial constraints depend directly on future asset prices.
   5 We extend our results to the case in which both borrowers and lenders face financial constraints in the online

appendix, and our propositions and corollaries continue to hold. The results of the baseline model can be interpreted
as describing lenders that are subject to financial constraints but have sufficiently large endowments so that the
constraints are not binding for them.
   6 We have directly formulated financial constraints in the context of single-period claims.           These types of
constraints arise endogenously in some environments – see, for instance, the model of limited commitment without
exclusion of Rampini and Viswanathan (2010) – however, multi-period constraints may arise in more general
environments. The results of the paper can be adapted to that context. In particular, the sufficient statistics identified
in this paper would remain valid in the more general case.



                                                                 6
   The most interesting cases are in between, when borrowers face some market incompleteness
but still have some meaningful financing and investment decisions. Our framework can flexibly
accommodate intermediate degrees of financial market imperfections,   including different
                                                                                           types
                                                                               b,ω
of market incompleteness. For example, if we specify Φ1b x1b , kb1 := x1b,ω − x1 0
                                                                  
                                                                                           , then
                                                                                                             ω ∈ Ω \ ω0
the vector constraint   Φ1b (·)  = 0 describes that borrowers can only trade bonds at date 0 – all
                                                        b,ω     b,ω0
state-contingent payments   have to be identical, x1 = x1 . Alternatively, for the specification
Φ1b x1b , kb1 := x1b,ω − x̄       , where x̄ < 0, the vector inequality constraint Φ1b (·) ≥ 0 captures a
             
                             ω ∈Ω
form of limited commitment on date 1 repayments, such that borrowers cannot promise to repay
more than x̄.

Interpretation of environment Our baseline model captures a number of different situations
in which financial constraints matter and fire sales may occur.                                We provide four natural
interpretations. First, we can think of borrowers as entrepreneurs/firms who have a more
productive use of capital goods than other agents in the economy. When financial constraints
force them to sell, capital is diverted to a less efficient technology, leading to price declines.
Second, borrowers can be interpreted as an amalgamate of financial intermediaries and firms that
channel funds from savers/lenders into productive capital investment. If financial constraints
force the intermediaries to reduce credit to the real sector, the firms are less able to externally
finance their investments, leading to inefficient sales of capital. Third, we can also interpret
borrowers as homeowners who hold mortgages. The transfer of houses from borrowers to
lenders in case of foreclosure can accelerate house depreciation, causing declines in house prices.
Finally, more broadly, when agents have heterogeneous preferences, we can interpret borrowers
as financial specialists who place a higher value on risky assets than their lenders because they
have a better capacity to bear risk, but who may be forced to unwind their positions at unusually
low prices after a common negative shock.


2.2   First Best
                                                                                                                                 
A real allocation is a bundle of consumption vectors              c0i , c1i,ω , c2i,ω       and capital holdings       ki1 , ki,ω
                                                                                                                              2
for all ω ∈ Ω and i ∈ I. A real allocation is first-best if it maximizes the weighted sum of welfare
∑i θ i U i for some welfare weights θ b , θ ` > 0 subject to the resource constraints
                       h            i
                    ∑ 0  c i
                             + h i
                                    ki1 ≤ ∑ e0i                                                                                (7)
                    i                      i
                                               h                   i
                                  ∑ ci,ω
                                     t ≤   ∑       eit + Fti,ω ki,ω
                                                                t      , for t = 1, 2 and ∀ω                                   (8)
                                  i        i

                                  ∑ ki,ω
                                     2 ≤ ∑ k1 ,
                                            i
                                                     ∀ω                                                                        (9)
                                  i        i
It is easy to see that a real allocation is first-best if it satisfies the resource constraints, if the
marginal rates of substitution (MRS) between the two sets of agents are equated across time and

                                                          7
states,                                                               
                                   ub0 c0b       ub0 c1b,ω     ub0 c2b,ω
                                          
                                               =           =           , ∀ω
                                   u`0 c0`
                                           
                                                 u`0 c1`,ω     u`0 c2`,ω

                                                            discounted expected benefit, ui0 c0i hi0 ki1 =
                                                                                                        
if the
    h marginal
             cost of capital   investment
                                               equals
                                                       its
                                                        i
E0 βui0 c1i,ω F1i,ω 0 ki1 + β2 ui0 c2i,ω F2i,ω 0 ki,ω
                          
                                                            , ∀i, and if the marginal products of capital are
                                                 2
                                      j,ω 0    j,ω
equated at date 2, F2i,ω 0 ki,ω
                            2     = F2        k2 , ∀i, j.


2.3      Decentralized Equilibrium
                                                                                          
A decentralized equilibrium consists of a real allocation c0i , c1i,ω , c2i,ω , ki1 , ki,ω
                                                                                       2     , a security
                       
allocation x1i,ω , x2i,ω , together with a set of prices m1ω , m2ω , qω such that both sets of agents
                                                                       

solve their optimization problem and markets clear, i.e. equations (7), (8), and (9) hold, and
    i,ω
∑i xt = 0 holds at dates 1 and 2, ∀ω. For the rest of the paper, we proceed under the
presumption that there exists a unique equilibrium.7 When financial constraints never bind, the
real allocation of the decentralized equilibrium of our economy is first-best.
   We solve for the decentralized equilibrium via backward induction, paying particular
attention to date 1, which is when pecuniary externalities materialize.

Date 2 equilibrium Equilibrium at date 2 is simple. After production has taken place, agents
settle their security positions and consume their holdings of consumption goods. Capital is
worthless after date 2, since there is no further production in the economy.

Date 1 equilibrium The state of the economy at date 1 is fully described by two sets of state
variables: the net worth                                               
                                         ni,ω := e1i,ω + x1i,ω + F1i,ω ki1                                (10)

in terms of consumption goods (not including capital holdings), and the capital holdings ki1 of
both groups of agents. The agents’ net worth fully captures the impact of uncertainty on the
economy. Note that ni,ω may be negative if x1i,ω or F1i,ω 0 ki1 is sufficiently negative – in that case,
                                                               

the agents need to borrow and/or fire-sell at date 1 to service existing debt or maintain their
capital holdings.
   It is useful to distinguish between individual state variables nb,ω , n`,ω , kb1 , k`1 and sector-
                                                                                         

wide aggregate state variables N b,ω , N `,ω , K1b , K1` , which we denote by capitalized letters. In
                                                        

a symmetric equilibrium, it is always the case that ni,ω = N i,ω and ki1 = K1i , ∀i, ω. However, the
distinction matters because individual agents take sector-wide variables as given whereas they
  7 At    this level of generality, equilibrium existence and uniqueness are not guaranteed.   Under regularity
conditions, the generic existence results discussed, for instance, in Magill and Quinzii (2002) apply to our
environment. We carefully establish the regularity properties of the model in each of our applications. We also
provide examples of non-uniqueness in the appendix.


                                                          8
internalize that they can affect their own state variables through their date 0 actions. Sector-wide
variables enter the welfare function of individual agents since they affect the prices of capital
and financial securities. This plays a crucial role in our analysis of externalities below. In the
following, we collect the sector-wide net worth and capital holdings of borrowers and lenders at
date 1 in the two vectors N ω = N b,ω , N `,ω and K1 = K1b , K1` .
                                                               

       We describe the date 1 optimization problem of an individual agent i as a function of both sets
of state variables
                                                                                     
    V i,ω ni,ω , ki,ω
                  1   ; N ω
                            , K 1 =              max                 ui c1i,ω + βui c2i,ω       s.t.    (3), (4) and (6)   (11)
                                        c1i,ω ≥0,c2i,ω ≥0,ki,ω i,ω
                                                           2 ,x2


where we denote by λi,ω
                    t   the multipliers on the budget constraints (3) and (4), by κ2b,ω the
multiplier on borrowers’ financial constraint (6), and by ηti,ω the multipliers on the non-negativity
of consumption constraints.8 We define κ2`,ω := 0 to keep our notation symmetric. Since there is
no uncertainty at date 2, financial contracts between dates 1 and 2 are uncontingent. The resulting
Euler equation is
                                                m2ω λ1i,ω = βλ2i,ω + κ2i,ω Φ2x
                                                                            i,ω
                                                                                                                           (12)
       i,ω          ∂Φ2i,ω
where Φ2x  :=                 . For borrowers, the multiplier on the borrowing constraint satisfies κ2b,ω ≥ 0,
                     ∂x2i,ω
                                  b,ω b,ω
and they attach the shadow value κ2x Φ2x to the marginal unit of borrowing.
       The optimal capital accumulation decision implies
                                                             
                                 ω i,ω       i,ω i,ω 0
                                q λ1 = βλ2 F2            k2 + κ2i,ω Φ2k
                                                          i,ω        i,ω
                                                                                                                           (13)

       i,ω           ∂Φ2i,ω
where Φ2k  :=                 . If the financial constraint on agent i is slack, then κ2i,ω = 0 and the price of
                     ∂ki,ω
                       2
capital is simply its marginal value in the hands of agent i discounted by the market discount
                  βλ2i,ω
factor m2ω =               . This always holds for lenders. Borrowers, on the other hand, may be subject
                  λ1i,ω
to a binding financial constraint. In that case, equations (12) and (13) capture two effects. First,
                                                                                              βλ2b,ω
borrowers discount the future payoff of capital more than lenders,                                     < m2ω , which reduces
                                                                                              λ1b,ω
their valuation of capital. This leads to what is commonly referred to as a fire-sale discount in the
price of capital. Secondly, the term κ2i,ω Φ2k
                                            i,ω
                                                reflects the marginal benefit of relaxing the constraint,
which increases borrowers’ valuation of capital. The premium captured by this term is what is
sometimes called the collateral value of capital.
       In general equilibrium, optimality conditions (12) and (13) define the price of discount bonds
m2ω ( N ω , K1 ) and capital qω ( N ω , K1 ) as functions of the aggregate state variables. Both prices
are generally – but not always – increasing functions of the net worth of each sector in terms of
consumption goods N i,ω . Formally, we capture this in the following condition on the response of
the asset price to sector i net worth.
   8 The                i,ω
                   λt corresponds to the marginal value of wealth for agent i in a given date/state and satisfies
          multiplier
            
λi,ω
 t     = ui0 ci,ω
              t    + ηti,ω . If consumption is positive, λi,ω
                                                          t is identical to the marginal utility of consumption.


                                                                      9
Condition 1. (Asset price increasing in sectoral net worth) The price of capital assets is increasing
in the net worth of both sectors,
                                                  ∂qω
                                                        ≥0      ∀i ∈ {b, `}
                                                 ∂N i,ω
    Intuitively, a marginal increase in N i,ω corresponds to injecting more date 1 consumption
goods into the economy while holding the amount of capital in the economy fixed. This makes
capital goods relatively more scarce. The condition states that this increases the price of capital
goods, corresponding to a similar notion to the concept of “ordinary goods” in consumer theory.
    Condition 1 is not necessary to derive the two main propositions of our paper. However, it is
useful to determine the sign of pecuniary externalities. We impose assumptions on primitives
that ensure that the condition is satisfied in each of our four applications in the main text,
and we demonstrate in Appendix B.1 how to relate the condition to elasticities of utility and
production functions in our first application.9                    We also consider the alternate case in two
additional applications in the appendix to show that violations of the condition typically go
hand in hand with backward-bending demand curves that lead to multiple and locally unstable
equilibria.10
    We analyze next how changes in the sector-wide date 1 state variables of the economy N ω
and K1 affect the welfare of individual agents. Lemma 1 characterizes the properties of the date
1 equilibrium that are relevant for our efficiency analysis.

Lemma 1. (Uninternalized welfare effects of changes in sector-wide N ω and K1 ) The effects of
changes in the sector-wide state variables ( N ω , K1 ) on agent i’s indirect utility at date 1 are given by

                                                dV i,ω (·)
                                     VNi,ωj :=        j,ω
                                                           = λ1i,ω D i,ω
                                                                     N
                                                                              i,ω i,ω
                                                                         j + κ2 C N j                            (14)
                                                 dN
                                                dV i,ω (·)
                                     VKi,ω
                                         j   :=        j
                                                           = λ1i,ω DKi,ωj + κ2i,ω CKi,ωj                         (15)
                                                  dK1
                                                                                                j
where we refer to D i,ω
                    Nj
                        and DKi,ωj as the distributive effects of changes in N j,ω and K1 for type i agents

                                            ∂qω             ∂m2ω i
                           D i,ω := −             ∆K i,ω
                                                         −         X                                             (16)
                             Nj            ∂N j,ω    2
                                                            ∂N"j,ω 2                      #
                                                                    ω          ∂m ω
                                                               ∂q
                           DKi,ωj   := F1i,ω 0 K1i,ω D i,ω
                                                         Nj
                                                            −       j
                                                                      ∆K2i,ω +    2
                                                                                  j
                                                                                    X2i,ω                        (17)
                                                                 ∂K1           ∂K1
   9 The behavior of prices cannot be easily stated in terms of fundamentals in almost all general equilibrium models.

This makes it useful to focus on sufficient statistics, as we do in our approach.
  10 Although a full analysis is outside of the scope of this paper, the index theorem results in Chapter 17 of

Mas-Colell, Whinston and Green (1995) suggest that Condition 1 emerges naturally in models with well-behaved
equilibria.




                                                              10
                  i,ω       i,ω                                                             j
                                                                          j,ω and K for type i agents
and we refer to C N j and C K j as the collateral effects of changes in N          1

                                        i,ω        ∂Φ2i,ω ∂qω
                                       CN j     :=                                                             (18)
                                                    ∂qω ∂N j,ω
                                                    i,ω 0
                                                                     ∂Φ2i,ω ∂qω
                                       CKi,ωj   := F1        i,ω   i,ω
                                                            K1 C N j +                                         (19)
                                                                        ∂qω ∂K j
                                                                                   1
                                                                                                                  j
   As shown in equations (14) and (15), changes in the sector-wide net worth N j,ω and capital K1
                                                                                                           j
affect welfare through two distinct mechanisms that occur because changes in N j,ω and K1 affect
the equilibrium prices qω ( N ω , K1 ) and m2ω ( N ω , K1 ): distributive effects and collateral effects.
                                                 j
The effects of changes in N j,ω and K1 on all other equilibrium variables in problem (11) drop out
by the envelope theorem.
                                           j
   First, changes in N j,ω and K1 affect the equilibrium prices qω ( N ω , K1 ) and m2ω ( N ω , K1 ) at
which sector i agents trade capital and bonds. The distributive effects D i,ω
                                                                          Nj
                                                                              and DKi,ωj capture the
marginal wealth redistributions to sector i that result from price changes following a change in
the sector-wide net worth N j,ω or capital K1i . We use the terminology distributive effects because
they are zero-sum across agents on a state-by-state basis. Formally, exploiting market clearing

                                   ∑ D i,ω
                                       Nj
                                           =0           and        ∑ DKi,ωj = 0,       ∀ω                      (20)
                                   i                                i

   Second, changes in the equilibrium price                   qω
                                                             ( N ω , K1 ) directly affect the tightness of the
                                                                          i,ω        i,ω
financial constraint faced by borrowers. The collateral effects C N         j and C K j capture the direct effect

of changes in aggregate state variables on the tightness of Φ2i,ω (·). Unlike distributive effects,
collateral effects are generally not zero-sum across agents.
    In a symmetric equilibrium, it must be that ni,ω = N i,ω and ki1 = K1i , ∀i. In that case, agent i’s
indirect utility is given by V i,ω N i,ω , K1i ; N ω , K1 , and we can decompose the equilibrium effects
                                                         

of a change in sector i financial net worth N i,ω on welfare into two parts
                             dV i,ω N i,ω , K1i ; N ω , K1
                                                           
                                                             = Vni,ω (·) + VNi,ωi (·)
                                       dN i,ω
                        ∂V i,ω
The term Vni,ω :=        ∂ni,ω
                                 represents the private marginal utility of wealth and is given by the
envelope       condition Vni,ω
                            (·) = λ1i,ω . This part is internalized by individual agents who choose
how much wealth to carry into date 1. The term VNi,ωi represents the effects of changes in sector-
wide net worth that are not internalized by individual agents. A similar decomposition can
be performed for the internalized and uninternalized effects of changes in sector-wide capital
ki1 = K1i . In our welfare analysis in Section 3, these uninternalized effects will represent pecuniary
externalities.

Date 0 equilibrium We describe the date 0 optimization problem of agent i as
                      h                                             i
       max ui c0i + βE0 V i,ω e1i,ω + x1i,ω + F1i,ω ki1 , ki1 ; N ω , K1    s.t.                (2), (5)       (21)
     c0i ≥0,ki1 ,x1i,ω


                                                              11
Using the envelope conditions Vni,ω (·) = λ1i,ω and Vki,ω (·) = λ1i,ω qω , we obtain a set of standard
Euler equations and an optimal investment condition

                              m1ω λ0i = βλ1i,ω + κ1i Φ1x
                                                      i
                                                          ω,     ∀i, ω                                                                    (22)
                                          h                         i
                          i0   i    i           i,ω     i,ω 0    i,ω
                         h k1 λ0 = E0 βλ1 F1                    k1 + q ω
                                                                            + κ1i Φ1k
                                                                                   i
                                                                                      ,                                ∀i                 (23)

                                      ∂Φ1i                  ∂Φ1i
where we define Φ1x
                 i
                    ω :=                       and Φ1k
                                                    i :=         , we assign κ1b                         as the (vector) multiplier on the
                                      ∂x1i,ω                ∂ki1
financial constraint of borrowers and define               κ1` := 0 for lenders                          to keep notation symmetric.
     The Euler equations ensure that the intertemporal marginal rates of substitution of all agents
are equated to the market prices m1ω and thus to each other in every state of nature, unless
the financial constraint introduces a wedge. The optimal investment condition states that the
marginal cost of capitalinvestment
                                   equals its discounted marginal benefit, which consists of the
marginal product F1i,ω 0 ki,ω
                          1   , the continuation value qω of capital, and the benefit of relaxing the
constraint.


3      Efficiency Analysis
We set up a constrained social planner problem in the tradition of Stiglitz (1982) and Geanakoplos
and Polemarchakis (1986) to determine if the decentralized equilibrium is constrained efficient.
The social planner chooses date 0 allocations subject to the same constraints as the private market,
leaving all later decisions to private agents, and respecting that capital and security prices are
market-determined.11
     Formally, the constrained social planner maximizes the weighted sum of welfare of the
                           for given Pareto weights θ b , θ ` . The planner chooses date 0 allocations
                                                             
two
       sets of agents
                   
  C0i , K1i , X1i,ω , subject to the date 0 resource constraint. To emphasize that the planner chooses
sector-wide variables, we denote her allocations by upper-case letters.                                                      Given our earlier
definition of date 1 indirect utility functions V i,ω (·), the constrained planner’s problem is
                                    n                h                     io
                       max ∑ θ i ui C0i + βE0 V i,ω N i,ω , K1i ; N ω , K1                                                                (24)
                         C0i ,K1i ,X1i,ω i
                                                          h                                        i
                                               s.t.   ∑       C0i   +h     i
                                                                                   K1i       − e0i       ≤0        (ν0 )
                                                      i

                                                                           ∑ X1i,ω = 0,                  ∀ω       (ν1ω )
                                                                               i
                                                                                                                      
                                                              Φ1i        X1i , K1i           ≥ 0, ∀i             θ i κ1i
                                                                                                                        
                                                                                    C0i ≥ 0, ∀i                   i i
                                                                                                                 θ η0
    11 This setup is equivalent to the problem of a constrained Ramsey planner who chooses taxes on date 0 allocations

plus transfers, as shown in Online Appendix C.1.

                                                                    12
where N i,ω = e1i + X1i,ω + F1i,ω K1i , ∀ω, i. We assign the shadow price ν0 to the date 0 resource
                                     

constraint, ν1ω to the intertemporal resource constraint for state ω, the vector of shadow prices
θ i κ1i to the financial constraint, and θ i ηti,ω to the multipliers on the non-negativity constraints
                                                                                                      of
consumption.12 We also denote the marginal value of wealth for agent i by λi,ω
                                                                           t   = ui0 Cti,ω +
ηti,ω – it equals the marginal utility of consumption except when consumption is at a corner
solution.
    Proposition 1 characterizes constrained efficient allocations and shows how to implement
them.         Proposition 2 identifies the two distinct externalities that underlie inefficiency and
establishes that each of them can be characterized as a function of a small set of variables that
determine their sign and magnitude.
                                                                                                                           
Proposition 1. a) (Constrained efficient allocations) A date 0 allocation                               C0i , K1i , X1i,ω       is
                                                                                               θb         λ0`
constrained efficient if and only if there are positive welfare weights that satisfy           θ`
                                                                                                    =     λ0b
                                                                                                                and shadow
prices ν0 , ν1ω , and κ1i such that the allocation respects the constraints in problem (24) and satisfies the
following financing and investment conditions

       ν1ω i                               θ j j,ω
           λ0 = βλ1i,ω + κ1i Φ1x ω + β∑
                              i
                                              V , ∀i, ω
                                             i Ni
                                                                                               (25)
        ν0                            j∈ I θ
                    h                     i                  θj h                    i
                                                          + β ∑ i E0 F1i,ω 0 K1i VN i + VKi , ∀i
                                                                                  j,ω    j,ω
  hi0 K1i λ0i = βE0 λ1i,ω F1i,ω 0 K1i + qω + κ1i Φ1k    i
                                                              j∈ I θ
                                                                                                                            (26)

where all variables at dates 1 and 2 are determined by the optimization problem (11) and market clearing,
        j,ω         j,ω
and VN i and VKi are defined in Lemma 1.
    b) (Implementing constrained efficiency) A planner can implement any constrained efficient
allocation by setting taxes on state-contingent security purchases and capital investment that satisfy

                                   τxi,ω = − ∑ MRS j,ω D N i − ∑ κ̃2 C N i , ∀i, ω
                                                                j,ω           j,ω j,ω
                                                                                                                            (27)
                                                j∈ I                   j∈ I
                                                 h             i    h          i
                                         = − ∑ E0 MRS j,ω DKi − ∑ E0 κ̃2 CKi , ∀i
                                                           j,ω         j,ω j,ω
                                   τki                                                                                      (28)
                                                j∈ I                           j∈ I

                             j,ω                        j,ω
                           βλ1            j,ω          κ2
where MRS j,ω :=             j          , and conducting lump-sum transfers T i such that date 0 budget
                                   and κ̃2      :=          j
                            λ0                         λ0
                                                                                          h        i
constraints (2) with taxes are met and the government budget constraint ∑i T i = ∑i E0 τxi,ω X1i,ω +
∑i τki K1i is satisfied.

    Proposition 1.a) characterizes constrained efficient allocations through a set of Euler equations
for financing and investment decisions, as in the decentralized case. The left hand side of
  12 We   scale all agent-specific multiplier by θ i to keep notation symmetric with the optimization problem of private
agents.

                                                                      13
equation (25) is the social marginal price of saving one unit of wealth. The right hand side is
the associated social marginal benefit, consisting of the consumption value of an extra unit of
net worth, the value of relaxing the financial constraint and the uninternalized welfare effects
described in Lemma 1. Similarly, the left hand side of (26) reflects the social marginal cost of
capital investment, and the social marginal benefits on the right hand side consist of the marginal
product of capital, the continuation value of capital qω , the benefits of capital in relaxing the
financial constraint, and the uninternalized welfare effects described in Lemma 1. A comparison
of equations (22) and (23) with equations (25) and (26) highlights that the sole difference between
the decentralized and the constrained efficient allocation is that the planner internalizes the
general equilibrium effects captured by these uninternalized welfare effects. This difference
corresponds to the taxes described in equations (27) and (28) of Proposition 1.b).
    Proposition 1.b) describes how to set the corrective tax instruments τxi,ω and τki to modify
agents’ date 0 decisions and implement constrained efficient allocations. Intuitively, these tax
rates induce private agents to internalize the pecuniary externalities of their actions caused by
both the distributive and collateral effects. A positive τxi,ω induces agent i to allocate fewer
resources towards state ω – indicating that private agents underborrow in the decentralized
equilibrium; a positive τki induces agent i to invest less in capital – indicating that private
agents overinvest in the decentralized equilibrium – and vice versa for negative signs. As the
proposition illustrates, optimal corrective policies are agent-specific and cannot in general be
implemented as an anonymous set of taxes.13
    Proposition 1 holds verbatim for more than two types of agents, as we show in the appendix.
In the two-agent case, we can simplify the tax rates (27) and (28). For the first additive term
in each expression, corresponding to the distributive effects, we exploit market clearing, as in
equation (20), and define ∆MRSij,ω := MRSi,ω − MRS j,ω as the difference between marginal
rates of substitution between agents. For the second term, corresponding to the collateral effects,
we simply note that κ̃2`,ω = 0 by construction. This allows us to re-write equations (27) and (28)
and express τxi,ω and τki as follows:

                               τxi,ω = −∆MRSij,ω D i,ω
                                                   Ni
                                                       − κ̃2b,ω C N
                                                                  b,ω
                                                                    i , ∀i, ω                                      (29)
                                          h                 i          h         i
                                 i                ij,ω i,ω               b,ω b,ω
                               τk = −E0 ∆MRS DKi − E0 κ̃2 CKi , ∀i                                                 (30)

    Proposition 2 formally establishes the distinct nature of distributive and collateral
externalities. For both types of externalities, the direction of the inefficiency is fully determined
by a small set of sufficient statistics with a natural interpretation.
  13 In   general, when the planner is constrained to use anonymous linear taxes, the optimal corrective policy is
given by a cross-sectional weighted average of the individual taxes τxi,ω and τki identified in equations (27) and (28),
following the logic of Diamond (1973). When the allocations of agents differ sufficiently, a non-linear anonymous tax
schedule that imposes different rates on borrowing and lending may also be able to replicate the optimal tax system.


                                                          14
Proposition 2. (Distinct nature of externalities/sufficient statistics) There are two distinct types of
externalities: distributive externalities (D) and collateral externalities (C).
The sign and magnitude of distributive externalities are determined by the product of three variables:

(D1) The difference in MRS of agents ∆MRSij,ω

(D2) The net trading positions (net buying or net selling) on capital ∆K2i,ω and financial assets X2i,ω
                                                                                        ∂qω     ∂m2ω ∂qω ∂m2ω
(D3) The sensitivity of equilibrium prices to changes in sector-wide state variables   ∂N j,ω ,       ,    ,
                                                                                                ∂N j,ω ∂K j ∂K j
                                                                                                         1    1

The sign and magnitude of collateral externalities are determined by the product of three variables:

(C1) The shadow value on the financial constraint κ̃2i,ω
                                                                      ∂Φ2i,ω
(C2) The sensitivity of the financial constraint to the asset price    ∂qω

                                                                                                    ∂qω ∂qω
(C3) The sensitivity of the equilibrium capital price to changes in sector-wide state variables          ,
                                                                                                   ∂N j,ω ∂K j
                                                                                                            1

   Proposition 2 contains one of the main economic insights of this paper. A small number
of sufficient statistics encapsulate the information needed to determine whether an economy is
constrained efficient and how to correct any distortions. Distributive and collateral externalities
are generically present in any competitive environment in which financial market imperfections
nest into the form of equations (5) and (6).
   Distributive externalities arise because agents do not internalize that their actions change
equilibrium prices, affecting the amount received by other agents through capital or financial
asset sales or purchases. When financial constraints inhibit optimal risk-sharing and prevent the
equalization of MRS between agents across dates or states, independently of the reason why MRS
are not equalized, a suitable change in the behavior of agents redistributes resources through
price changes towards agents with higher MRS in a given date/state, improving efficiency.
   Therefore, understanding the nature of distributive externalities requires to understand the
difference in relative valuations of wealth (i.e. the MRS) of all agents across dates/states, their
net trading positions, and how changes in sector-wide state variables affect equilibrium prices.
   Collateral externalities arise because agents do not internalize that their actions change
equilibrium prices, directly modifying the borrowing/saving capacity of other constrained
agents. A suitable change in the behavior of agents modifies asset prices, relaxing financial
constraints directly and changing the effective financial decisions of those agents for which the
constraint binds.
   Therefore, understanding the nature of collateral externalities requires to understand the
welfare benefit of relaxing borrowers’ financial constraint, the change in borrowing capacity due
to a change in asset prices, and the sensitivity of equilibrium prices to changes in sector-wide
state variables.

                                                      15
    While distributive externalities operate by changing the value of the flow of resources,
collateral externalities operate by directly affecting the financing capacity of constrained agents
by changing the value of the stock of assets that serve as collateral, not just the flow of resources
between agents. For this reason, only borrowers in our baseline model experience the effects of
collateral externalities, while all agents experience the effects of distributive externalities.
    As usual in normative problems, it is in general not feasible to characterize distortions or
optimal corrective policies as a function of primitives.14 Instead, Proposition 2 shows that,
independently of the specific nature of the financial frictions, identifying the sign and magnitude
of the externalities boils down to identifying a small number of sufficient statistics, which should
guide the design of corrective policies. These variables will be invariant to the precise nature of
the underlying distortions, e.g., uncontingent bonds, limited commitment, market segmentation,
idiosyncratic risks, etc. In Section 4, we illustrate in specific applications how changes in
primitives affect the sign and magnitude of the externalities through changes in these sufficient
statistics. The sufficient statistics that we identify in Proposition 2 remain the key determinants of
the sign of the externalities in more general environments with multiple agents and more general
preferences and production technologies, as shown in Online Appendix C.3.15
    Propositions 1 and 2 characterize the entire Pareto frontier of the economy as a planner varies
                                    θ`
the relative welfare weights        θb
                                         on the two types of agents. When the decentralized equilibrium
is constrained inefficient, there is a continuum of constrained efficient allocations that constitute
Pareto improvements, which we characterize formally in Corollary 6 in the online appendix.
Each of these constrained efficient allocations corresponds to different relative welfare weights
and requires different lump-sum transfers and optimal tax rates to be implemented.16 However,
an additional advantage of our approach is that the optimal taxes are fully determined by the
sufficient statistics and depend on the welfare weights only indirectly.
    An important application of our optimal tax formulas is to identify general circumstances
under which equilibria with financially constrained agents and fire sales are constrained efficient.
Distributive pecuniary externalities are zero whenever either (i) financially constrained agents
face complete risk markets to insure against future fire sales so ∆MRSb`,ω = 0 or (ii) the net
trading position of capital and financial assets is zero or (iii) the prices of capital and financial
  14 Even   the most elementary results in normative economics are expressed as a function of high level observables
as opposed to primitives. For instance, Ramsey’s characterization of optimal commodity taxes relies on demand
elasticities, which are endogenous to the level of taxes.
  15 The online appendix also considers more general constraint sets Φi (·) that depend directly on aggregate
                                                                      t
state variables, e.g., moral-hazard/incentive constraints or value-at-risk requirements. For further examples see
Greenwald and Stiglitz (1986). We show that these are of the same nature as collateral externalities, although it may
be more appropriate to call them binding-constraint externalities instead of collateral externalities. In the appendix,
we explain how to adjust the sufficient statistics for collateral effects to this more general case.
 16 In fact, even the sign of the optimal taxes may depend on the chosen welfare weights.




                                                            16
assets are fixed, e.g. because of linear preferences and technologies. We will show an example
of (i) below in Application 1, and examples of (ii) and (iii) below in Application 4. Collateral
externalities are absent whenever (i) borrowers are unconstrained at date 1 so κ2b,ω = 0 or (ii) their
                                                                           ∂Φ2b,ω
financial constraint only depends on individual-level variables so         = 0 or (iii) the prices of
                                                                            ∂qω
capital assets are fixed. When neither type of externality is present, optimal taxes are zero and
equilibrium is constrained efficient.
   In the following corollaries, we provide five general results that follow from our analysis. We
further elaborate on those results in our applications in Section 4.

Sign of externalities      In the existing literature on pecuniary externalities, it has proven
remarkably difficult to provide general results on the direction of inefficiency – except in tightly-
defined special cases. The following corollary rationalizes why.

Corollary 1. (Sign of externalities and “anything goes”) The collateral externalities of sector-wide
net worth are non-negative under Condition 1. All distributive externalities as well as the collateral
externalities of sector-wide capital holdings can naturally take on either sign, so “anything goes.”

   The corollary states that in general, only the collateral externalities of financing decisions can
be signed since the sufficient statistics C1 and C2 are by construction non-negative; the shadow
value of borrowers’ financial constraint is weakly positive and a higher asset price weakly relaxes
the financial constraint. Furthermore, C3 is positive for sector-wide net worth if and only if
the natural Condition 1 is satisfied, implying that collateral externalities unambiguously lead to
overborrowing in that case.
   The sufficient statistics D1 and D2 can naturally take on either sign; plausible configurations
of primitives are consistent with positive or negative differences in MRS and with agents that
can be net buyers or sellers. For example, if borrowers have a high relative valuation compared
to lenders in a given state and they are net sellers of capital in that state, it will be optimal to
subsidize their savings towards that state. Furthermore, the sufficient statistics C3 and D3 can
take on either sign for the externalities of sector-wide capital holdings. As a result, “anything
goes” for the sign of distributive externalities and the collateral externalities of sector-wide capital
holdings.
   Unpacking the optimal tax rates for distributive and collateral externalities into three
sufficient statistics each is also helpful in spelling out explicit conditions under which they can
be signed. This is useful if we are explicitly concerned with devising conditions under which
the direction of inefficiency can be pinned down unambiguously, as we demonstrate in the
applications in Section 4 and as a number of papers that we discuss in Section 5 have done.

Externality pricing kernel      To apply Proposition 1 to a broader set of financial assets, consider
a financial security Z that is traded at date 0 with a state-contingent payoff profile ( Z ω )ω ∈Ω


                                                    17
at date 1. This security can be viewed as a bundle of Arrow securities with weight Z ω on the
security contingent on state ω ∈ Ω. For example, a risk-free bond corresponds to Z ω = 1, ∀ω.
To hold constant the set of trading
                                opportunities,
                                               we require that total security holdings satisfy
x̃1i,ω = x1i,ω + α Z Z ω , where Φ1i x̃1i,ω , ki1
                                         ≥ 0 and α Z denotes the holdings of security Z. Under
this assumption, the security Z is redundant and no-arbitrage pricing implies Corollary 2.

Corollary 2. (Externality pricing kernel) The optimal corrective tax on agent i’s holdings of a financial
security Z is given by                                      h         i
                                                    τZi = E0 τxi,ω Z ω ,                                     (31)

where τxi,ω is given by equation (27).

       Equation (31) reveals a close parallel between traditional security pricing and the pricing
of pecuniary externalities. We can view the optimal state-contingent tax rates τxi,ω defined in
Proposition 1 as an externality pricing kernel, which is used to determine the social cost of sector
i holding a security with payoff profile Z ω . The corollary provides a simple expression to guide
financial regulators on the design of optimal corrective policies for any financial instrument.

Investment and financing distortion                  Since investing in capital and financial assets are both
mechanisms for shifting resources across time, Corollary 2 also implies a relation between the
distortions in investment and financing decisions. Increasing capital K1i in sector i has two general
equilibrium effects. First, it increases output and sector i’s net worth by F1i,ω 0 K1i at date 1. In
                                                                                       

that sense, increasing K1i is identical to saving F1i,ω 0 K1i by sector i while holding N j,ω constant
                                                             

for the other sector. Secondly, additional capital increases output at date 2, which has general
equilibrium effects on prices qω and m2ω and may in turn lead to distributive and collateral
effects, as described in Lemma 1. The following corollary describes the relationship when the
latter effects are absent.

Corollary 3. (Relationship between distortion in investment and financing decisions) When
∂qω        ∂m2ω
∂K1i
       =   ∂K1i
                  = 0, the optimal corrective taxes τxi,ω and τki on financing and investment decisions satisfy
                                                      h              i
                                              τki = E0 τxi,ω F1i,ω 0 K1i                                     (32)

       Corollary 3 implies that an optimal policy must coordinate the distortions introduced in
                                                        ∂m2ω        ω
investment and saving decisions. When              = ∂q ∂K1i
                                                       ∂K1i
                                                            = 0, the resulting relationship is simple
and intuitive. The condition holds for example when production and utility functions are linear
                                                                                         ∂mω      ∂qω
at date 2. In that case, both distortions are tightly linked. The general case in which ∂K2i and ∂Ki
                                                                                            1       1
can take any values is formally described in the appendix.




                                                               18
Fire sales, amplification and welfare The role of fire sales, amplification effects, and their
relation with efficiency of an economy are often intertwined in policy discussions. However,
fire sales and amplification both describe positive phenomena happening in the economy, which
do not necessarily have normative implications that lead to inefficiency. Although there are no
universally agreed-upon definitions of the two concepts, it is useful to define them as follows in
the context of our framework.17
    We define fire sales as instances when financially constrained agents sell capital assets at a
price that discounts the future returns that they could earn at a higher rate than the market
discount rate. Furthermore, it is natural to define financial amplification as instances when
a decline in sector-wide net worth N i,ω leads to general equilibrium effects that deteriorate
the sector’s terms of trade or that tighten the financial constraint on the sector, and vice
versa for positive shocks.           Exploiting the definitions from Lemma 1, these two situations
formally correspond to amplification via distributive effects, which occurs when D i,ω
                                                                                   Ni
                                                                                       > 0, and
                                                          i,ω     18,19
amplification via collateral effects, which occurs when C N i > 0.


Corollary 4. (Decoupling of fire sales, amplification and inefficiency) The existence of fire sales
or of amplification effects (D i,ω
                               Ni
                                            i,ω
                                   > 0 or C N i > 0) is neither necessary nor sufficient for constrained

inefficiency.

    Fire sales are not necessary because inefficient pecuniary externalities may also arise when
constrained agents are buyers of capital or do not trade capital.                       Amplification effects are
not necessary because constrained inefficiency can also arise when D i,ω
                                                                     Ni
                                                                         < 0. Neither fire
sales nor amplification effects are sufficient because there are several situations in which the
two phenomena are consistent with constrained efficiency. First, if there are fire sales and
amplification via distributive effects D i,ω
                                         Ni
                                             > 0 but decentralized agents face complete date 0
financial markets and equate their MRS, Proposition 1 implies that equilibrium is constrained
efficient. Second, if there are fire sales and amplification but decentralized agents are in a corner
solution, a planner may not be able to improve welfare, implying that equilibrium is constrained
efficient.
  17 The   insights that emerge from Corollary 4 do not depend on the precise definitions adopted. More broadly,
Corollary 4 implies that positive phenomena, like positive feedback among variables, or price changes, are neither
necessary nor sufficient to obtain constrained inefficiency.
  18 These definitions capture the typical notion in the literature on financial amplification that shocks at the sector-

wide level are amplified via general equilibrium effects and have greater effects than the identical shocks on an
individual agent. In the notation of Lemma 1, this is captured by the inequality Vni + VNi i > Vni . The general
equilibrium effects in turn induce the affected sector to reduce consumption and/or asset purchases in response to
an adverse shock by more than if the shock affected an individual agent.
  19 For amplification via distributive effects, an alternative definition would be to focus on the distributive effects

of moving a marginal unit of net worth from type j to type i, corresponding to D i,ω
                                                                                 Ni
                                                                                     − D i,ω
                                                                                         Nj
                                                                                             > 0 in our notation. Our
corollary below still applies.


                                                           19
    Even when amplification leads to constrained inefficiency, Corollary 1 implies that the sign of
the resulting distortion is indeterminate – amplification via distributive effects D i,ω
                                                                                     Ni
                                                                                         > 0 may be
consistent with both over- and underborrowing.

Indeterminacy and simplified implementation results                           Proposition 1 provides the most
transparent exposition of pecuniary externalities in that it attributes taxes to each decision margin
and each sector according to the externalities it creates. However, intervening in every single
decision margin of private agents imposes a significant burden on regulators. In fact, we show
that the planner faces up to three degrees of freedom in the choice of a constrained
                                                                            n        optimalotax
system. This allows us to normalize one or more of the policy instruments τxb,ω , τx`,ω , τkb , τk`                    to
zero or to impose anonymous instead of agent-specific                  taxes.20   In the following, we assume that
all tax changes are performed in a wealth-neutral manner, i.e. any additional tax revenue raised
from a given sector is returned to the same sector in the form of a lump-sum transfer.

Corollary 5. (Degrees of freedom in setting taxes/simplified implementation) a) There are up to
three degrees of freedom in setting taxes to implement a given constrained optimal allocation: (1) we can
                                                                           i,ω     ω
change
        the tax
               burden on borrowers vs. lenders in any state ω by varying τx and m1 such that the sum
  τxi,ω + m1ω remains unchanged for each agent i ∈ I; (2) if consumption is a corner solution (η0i > 0),
we can change the tax burden on financing vs. investment decisions for any agent i by jointly varying
τxi,ω , τki and letting η0i adjust; (3) if the financial constraint is binding (κ1b (z) > 0 for the z’th element
of the constraint function Φ1b ), we can change the tax burden on financing vs. investment decisions for
                                           b ( z ) > 0) and τ b,ω (for all ω for which Φb
borrowers by jointly varying both τkb (if Φ1k                x                          1x ω ( z ) > 0) and
letting the shadow price κ1b (z) adjust.
    b) These degrees of freedom allow us in case (1) to normalize τxi,ω = 0 for one of the agents ∀ω ∈ Ω. In
cases (2) and (3) they allow us to normalize either τki = 0 or τxi,ω = 0 for one ω ∈ Ω or, alternatively, to
impose anonymous taxes τki = τk , ∀i or τxi,ω = τxω , ∀i for one ω ∈ Ω (as long as the respective constraints
are sufficiently binding).

    The first degree of freedom, or indeterminacy, captures that agents only care about the
after-tax price of financial securities when they trade – a parallel change in the tax rates on
borrowers
       and lenders    moves the pre-tax market prices m1ω but does not affect the after-tax
prices τxi,ω + m1ω faced by each sector. It also leaves the total wedge between borrowers and
                    
lenders τxb,ω − τx`,ω unchanged. Assuming that the tax change is performed in a wealth-neutral
manner, the resulting allocation is unaffected. This indeterminacy allows a financial regulator to
impose taxes or regulation on the financing decisions of one sector (e.g. lenders) and leave the
financing behavior of the other sector (e.g. borrowers) unregulated.
  20 This   finding is also useful to relate our optimal tax formulas to the existing literature. For example, there are a
number of papers in which constrained efficiency can be achieved by taxing financing decisions only, even though
both financing and investment decisions are distorted, as we will discuss in further detail in Section 5.


                                                            20
     The second and third degrees of freedom, or indeterminacies of implementation, arise when
either date 0 consumption is a corner solution (i.e. the non-negativity constraint on c0i is binding,
η0i > 0) or when the date 0 financial constraint is binding. In both cases, agents effectively face
a single decision margin between borrowing and investing. Both τxi,ω and τki target that single
decision margin and can substitute for each other. In particular, it is sufficient for a regulator to
regulate only the financing of sector i and leave investment decisions unregulated. We provide
an example in the appendix. Naturally, all three of the described degrees of freedom/strategies
for simplifying implementation can be combined.
     When private agents face corner solutions, an important implication of the corollary is that
any decision margin on which the taxes can be set to zero can be interpreted as constrained
efficient. For example, in an economy in which all financing and investment decisions are fully
determined by binding constraints, the three indeterminacies together imply that we can set
τxi,ω = τki = 0∀i – a planner cannot improve on the decentralized allocation if there are no free
decision margins – and equilibrium is constrained efficient. Another important application is
that the corollary may allow us to impose anonymous taxes when the decisions of one of the
two agents are corner solutions or determined by a binding constraint. For example, if lenders
do not produce capital k`1 = 0, then an anonymous tax can correct the investment decisions of
borrowers.21


4      Applications
We present four specific applications that allow us to zero in on the efficiency results of
Proposition 1 and illustrate how the sufficient statistics that underlie the sign of pecuniary
externalities may easily flip sign, as described in Proposition 2 and Corollary 1.
     Application 1 describes a setting in which there are fire sales but the economy is constrained
efficient since risk markets are complete and financial constraints do not depend on prices.
Applications 2 and 3 provide two distinct examples in which the sign of distributive externalities
depends on the primitives of the model. In Application 2, we describe a setting in which
borrowers switch from being net buyers to being net sellers of capital when their endowment
crosses a threshold, which changes the sign of sufficient statistic D2 and therefore the sign of the
inefficiency. In Application 3, we describe a setting in which borrowers may be either constrained
in their borrowing or in their saving, depending on their initial endowment. As their endowment
crosses the relevant thresholds, the difference in the MRS of borrowers and lenders and, by
implication, the sufficient statistic D1 and the associated distributive externalities change sign.
    21 If the planner has additional instruments, further degrees of freedom arise.   For example, a tax on borrowing and
subsidy to investment can be substituted by a tax on consumption, reflecting that when there is both over-borrowing
and under-investment, there must be over-consumption.


                                                            21
Application 4 provides an example of collateral externalities and illustrates that this always leads
to overborrowing, but may be consistent with either under- or over-investment.
   Below, we keep preferences and endowments unrestricted in Application 1 to illustrate the
generality of the efficient fire-sale phenomenon. In Applications 2 to 4, we assume that lenders
have linear utility U ` = c0` + c1` + c2` and large endowments of the consumption good at each date,
which pins down m2ω ≡ 1 so there are no distributive effects from bond prices, and that borrowers
have no endowments at dates 1 and 2, that is, e1b = e2b = 0. Throughout all four applications,
                                                                                   αk2
we assume that borrowers have an investment technology hb (k ) =                    2 ;   we also assume that
lenders cannot create capital at date 0, corresponding to h` (k ) = ∞ for any positive k > 0,
except in Application 2, in which lenders have the same investment technology as borrowers so
we can study trade of capital in both directions and changes in the sign of D2. We also assume
throughout our applications that borrowers have a more productive use for capital than lenders,
except in Application 3, in which the production function of lenders satisfies an Inada condition
so they always purchase some capital, pinning down the sign of D2 and allowing us to focus
on changes in the sign of D1. Regarding financial frictions, in Applications 1 and 4, we assume
that the date 0 market for Arrow securities is complete, captured by Φ1b ≡ 0, so that no inefficient
distributive externalities arise; in Applications 2 and 3 we assume that the date 1 financial market
is w.l.o.g. completely shut down, x2b,ω = 0, ∀ω, which is captured by the constraint specification
                     2
Φ2b,ω x2b,ω = − x2b,ω ≥ 0, to obtain simple analytic results for the distributive externalities
stemming from the date 0 financial imperfections.
   In each application, we illustrate our results graphically with a single figure. The parameter
values used to draw the figures are described in the appendix.


4.1    Efficient Fire Sales
Environment       We build on the baseline model from Section 2 and assume a specific formulation
for production technologies and financial constraints. Formally, the production technology of
borrowers is linear Ftb,ω (k) = Aω
                                 t k, whereas that of lenders is equally productive for the first
marginal unit Ft`,ω 0 (0) = Aω                                           `,ω 00
                             t but exhibits strictly decreasing returns Ft      (k) < 0. Date
1 productivity A1ω is a random variable, with negative realizations representing reinvestment
requirements, and date 2 productivity is given by a constant A2 > 0.
   Regarding financial constraints, at date 0, borrowers face complete financial markets but, at
date 1, they can only pledge to repay at most a fraction φ of their date 2 production. Formally,
the constraint they face at date 1 is
                                                                         
                            Φ2b,ω x2b,ω , kb,ω
                                           2     : = x b,ω
                                                       2   + φF2
                                                                b,ω
                                                                      k b,ω
                                                                        2     ∀ω

Equilibrium and efficiency     It is simplest to illustrate our results graphically.Figure 1 shows
                                                                                               
date 1 equilibrium prices m2ω and qω as well as saving X2b,ω and capital holdings K2b,ω , K2`,ω as a

                                                     22
               mω2                                     X2b,ω




                                                           0

                                              N b,ω                                   N b,ω
                             N̂ b,ω                                  N̂ b,ω

                qω                                         K2i,ω
                                                                                  K2b,ω
                                                      K1b




                                                                                  K2ℓ,ω
                                                           0
                                              N b,ω                                   N b,ω
                             N̂ b,ω                                  N̂ b,ω

                                      Figure 1: Date 1 Equilibrium


function of borrowers’ net worth N b,ω for given K1b and N `,ω . We describe the general conditions
under which the date 1 equilibrium of the economy is well-defined and unique as well as the
specific parameters used in the figure in the appendix.
     Figure 1 captures both optimal smoothing, when the financial constraint is slack, and fire
sales, when the constraint is binding. For any pair K1b , N `,ω , we can define a threshold
                                                                        

N̂ b,ω = N̂ b K1b , N `,ω such that, for N b,ω ≥ N̂ b,ω , borrowers keep all capital and save a fraction
                         

of any additional net worth to smooth consumption between dates 1 and 2. Bond prices and
capital prices increase (interest rates decrease) in parallel with borrowers’ net worth, reflecting
the greater abundance of wealth at date 1. If borrowers’ net worth falls below the threshold,
N b,ω < N̂ b,ω , the borrowing constraint binds, and borrowers sell some of their capital, which
forces them to reduce their borrowing. The price functions m2ω and qω experience a kink at the
threshold because the rate at which borrowers exchange date 1 and date 2 consumption goods
with lenders becomes more disadvantageous when fire sales are involved.
   At date 0, agents make investment and financing decisions optimally by solving problem (21).
If these decisions lead to N b,ω ≥ N̂ b,ω for all states ω, then the financial constraint is always slack
and the allocation is first-best. Otherwise, the financial constraint binds and fire sales occur in
some states. Independently of whether fire sales occur at date 1 or not, we find the following
result:

Application 1. (Efficient fire sales).     The decentralized equilibrium in the described economy is
constrained efficient.

                                                      23
   The general lesson of this application is that when agents face complete financial markets
between dates 0 and 1, the welfare effects of distributive externalities cancel in the decentralized
                                                              1
equilibrium. Formally, choosing Pareto weights θ i =                 ,   it is the case that
                                                          ui0 (c0i )


                                       ∑ θ i λ1i,ω D i,ω
                                                     Nj
                                                         = 0 ∀ω, j                                         (33)
                                        i

and similar for the distributive effects of capital holdings.
   Equation (33) is stronger than our earlier observation in equation (20) that distributive
externalities are zero-sum, ∑i D i,ω
                                 Nj
                                     = 0, at every date and state. It instead shows that we can
find welfare weights such that the welfare impact of the distributive externalities nets out to
zero. Because complete financial markets allow agents to equalize their marginal valuations of
wealth (MRS) across all states of nature, there is no scope for the planner to increase efficiency by
using distributive effects.
   This application highlights that in practice, we do not need to be concerned with the
distributive effects of fire sales as long as the agents engaging in the transactions have optimally
shared risk in complete insurance markets. This is likely the case e.g. for sophisticated financial
sector participants trading with each other.        Conversely, if financial sector participants are
forced to sell to outsiders who have not participated in optimal ex-ante risk-sharing, distributive
externalities are of concern.


4.2   Distributive Externalities and Direction of Capital Trade
Environment     We assume that both borrowers and lenders have linear utility U i = c0i + c1i + c2i ,
                                                                                          αk2
with cit ≥ 0, and access to the date 0 investment technology given by h (k ) =             2 . Borrowers have
no endowment. Borrowers’ production function is linear Ftb (k ) = Aω
                                                                   t k                with Aω t > 0, while that
of lenders is the same F1` (k) = A1ω k at date 1, but takes the value F2` (k) = A2 log (1 + k) at date
2. A binary shock ω ∈ Ω = { L, H } that affects solely productivity A1ω is realized at date 1. In the
                                                                                           E[ A1ω ]+ A2
first-best, borrowers and lenders invest such that h0 ki = αki = E A1ω + A2 or ki1 =
                                                                     
                                                                                                 α
for i = b, `. Since borrowers have the more efficient production technology at date 2, they hold
                                    `,ω
all the capital, so kb,ω    i
                     2 = 2k 1 and k 2 = 0.
   Regarding financial constraints, we assume that only uncontingent bonds are available for
trade at date 0 and that no borrowing or lending is possible at date 1, capturinga shutdown  of
                                                                                    b,L  b,H
financial markets. Formally, borrowers’ date 0 constraint is given by Φ1 x1 := x1 − x1
                                                                        b  b
                                                                             
                                                                                               =
                                                       
0, while their date 1 constraint is given by Φ2b,ω x2b,ω := x2b,ω = 0.

Equilibrium and efficiency      The date 1 demand for capital assets by lenders is given by their
optimality condition
                                                             A2
                                     qω = F2`0 k`2,ω =                                                     (34)
                                                          1 + k`2,ω

                                                  24
Given borrowers’ net worth nb,ω = A1ω kb1 + x1b , their date 1 budget constraint, financial constraint,
and non-negativity constraint on consumption can be combined into
                                                       
                                   nb,ω + qω kb1 − kb,ω
                                                    2     ≥0                                        (35)

Therefore, borrowers’ date 1 value function is
                                                             h                          i
               V b nb,ω , kb1 ; N ω , K1 = max A2 kb,ω
                                                   2   + λ b,ω
                                                           1     n b,ω
                                                                       + q ω
                                                                               k b
                                                                                 1 − k b,ω
                                                                                       2            (36)
                                              kb,ω
                                               2


   We define the threshold N̂ b := A2 K1` and observe that the date 1 financial constraint is slack
if N b,ω ≥ N̂ b and binding otherwise. If the constraint is slack, borrowers buy up all capital in
the economy K2b,ω = K1b + K1` at a price qω = Vkb,ω = A2 , which is independent of sectoral net
worth so all distributive effects are zero, D i,ω
                                              Nj
                                                  = DKi,ωj = 0. The marginal value of date 1 borrower
wealth in that case is λ1b,ω = Vnb,ω = 1.
   If N b,ω < N̂ b , borrowers’ financial constraint binds, causing them to reduce their capital
holdings below the efficient level, K2b,ω < K1b + K1` . Combining lenders’ demand (34) with
borrowers’ constraint (35) yields the equilibrium capital holdings and price of capital
                                    b,ω 1 + K `
                                                
                                  N                                N b,ω + A2
                   K2b,ω = K1b +              1
                                                    and      q ω
                                                                 =
                                    N b,ω + A2                       1 + K1`

where a well-defined equilibrium with strictly positive capital holdings exists when N b,ω ≥
               A Kb
N b,min = − 1+K2b +1K` . The equilibrium price of capital depends exclusively on two aggregate state
                1     1
                                         ∂qω            ∂qω
variables q N , K1` and satisfies ∂N b,ω > 0 and ∂K` < 0. The resulting distributive effects, as
                  b,ω
           ω
                          
                                                             1
defined in Lemma 1, are

                                  b,ω          ∂qω      b,ω          N b,ω
                                 DN b    = − b,ω ∆K2 = − b,ω
                                             ∂N                   N + A2
                                                            A1 N b,ω
                                                              ω
                                 DKb,ω
                                     b
                                                 b,ω
                                         = A1ω D N b = −
                                                          N b,ω + A2
                                             ∂qω              N b,ω
                                 DKb,ω
                                     `   = − ` ∆K2 = b,ω
                                             ∂K1             1 + K1`

Lenders’ net worth does not have distributive effects, D i,ω
                                                         N`
                                                             = 0. When the financial constraint
binds, the signs of the distributive externality terms can take all possible values, depending on the
value of N b,ω . We distinguish three regions for the date 1 equilibrium. First, if N b,ω ∈ N b,min , 0 ,
                                                                                                      

borrowers fire-sell assets, so K2b,ω < K1b . In this region, higher borrowers’ net worth and lower
lenders’ capital raise the price at which constrained borrowers are forced to sell their capital,
which distributes resources towards borrowers. Therefore, the distributive effects of additional
                                               b,ω     b,ω
borrowers’ net worth or capital are positive D N b , D K b > 0, while those of additional lenders’

capital are negative DKb,ω
                         ` < 0. Second, if N
                                             b,ω = 0, borrowers neither buy nor sell additional


                                                     25
     ∆M RS bℓ,L                   qL                   ∆K2b,L
                                                                                    τkℓ
                                                                                0
                                                           0                        τ̄xb



         0                       0                                                  τkb
                              AL1                     AL1                     AL1                   AL1
                ÃL1                    ÃL1                    ÃL1                       ÃL1

                  Figure 2: Components of Optimal Taxes τ̄xb , τk` , and τkb in Application 2


capital so K2b,ω = K1b , even though the marginal products satisfy F2`0 (K2`,ω ) < F2b0 (K2b,ω ). In
this knife-edge case there is no trade in capital goods and all distributive effects are zero,
  b,ω      b,ω
               = DKb,ω = 0. Third, if N b,ω ∈ 0, N̂ b , borrowers purchase additional capital
                                                     
DN  b = DK b         `

but less than the optimal amount so K1b < K2b,ω < K1b + K1` . In this region, the distributive effects
                                                             b,ω     b,ω
of additional borrowers’ net worth or capital are negative D N b , D K b < 0 but those of additional

lenders’ capital are positive DKb,ω
                                  ` > 0.

   We provide a full characterization of the date 0 equilibrium in the appendix. The interesting
case is when the financial constraint is slack in the high state and binding in the low state. In that
case, distributive effects have the following efficiency implications.

Application 2. (Changing sign of capital trade). There is a threshold value Ã1L such that a) if A1L <
Ã1L , the economy exhibits overborrowing and underinvestment by borrowers as well as overinvestment by
lenders, b) if A1L = Ã1L , the economy is constrained efficient, and c) if A1L > Ã1L , the economy exhibits
underborrowing and overinvestment by borrowers as well as underinvestment by lenders.

   Intuitively, case a) represents a traditional scenario in which constrained borrowers fire-sell
assets: a marginal reduction in borrowing, or additional date 1 capital income, pushes up the
price that borrowers fetch for their fire sales of capital. Since borrowers are constrained in
the low state and were unable to arrange contingent insurance towards that state, the positive
                                    b,ω    b,ω
distributive effects, captured by D N b , DK b > 0, improve insurance. A marginal reduction in
investment by lenders also raises the fire-sale price and has similar effects, captured by DKb,ω
                                                                                               ` < 0.

Case b) corresponds to the knife-edge case in which borrowers are constrained but neither buy
nor sell assets; as a result, marginal changes to either borrowing or investment do not affect
welfare. In case c), borrowers are also constrained but have positive date 1 net worth, which
allows them to purchase some assets from lenders. Higher borrowing and lower investment by
borrowers reduce borrowers’ net worth and push down the price of capital, making it cheaper
                                                       b,ω     b,ω
for constrained borrowers to buy assets, captured by D N b , D K b < 0. Similarly, more investment




                                                      26
by lenders reduces the price of capital, implying DKb,ω
                                                      ` > 0.
                                                             22

   Figure 2 depicts the key variables that drive the sign and magnitude of the distributive
externalities as we vary A1L . The first panel shows the difference in MRS between agents in
the low state of nature, which is decreasing in A1L and always weakly positive in state L since
borrowers are weakly constrained. The second panel depicts the price of capital in the low state
q L , which is increasing in the shock realization A1L as higher income implies smaller fire sales.
The third panel shows borrowers’ net trading position of capital ∆K2b,L in the low state, which
changes sign at the productivity threshold Ã1L . The fourth panel illustrates the resulting tax
rates: for A1L < Ã1L , it is optimal to tax borrowing (i.e. subsidize saving so τ̄ bx < 0), subsidize
investment by borrowers (so τkb < 0) and tax investment by lenders (so τk` > 0), and vice versa
for A1L > Ã1L . We denote by τ̄xb the optimal tax on uncontingent bond holdings since the date 0
financial constraint implies that only uncontingent bonds can be traded.
   The general lesson of this application is that constrained borrowers may be either buyers
or sellers of capital and financial assets. They may switch from one to the other in response
to small changes in fundamentals. As a result, sufficient statistic D2 can take on either sign.
It is straightforward to enrich this application allowing for multiple states of nature in which
borrowers are constrained, some of which satisfy A1ω < Ã1L and others A1ω > Ã1L . In that case,
there will be overborrowing towards some states and underborrowing towards others.
   In practice, such behavior is common for arbitrageurs and market makers who trade with
agents in incomplete risk markets. If they become financially constrained in response to an
adverse shock but have sufficient net worth so they can still buy assets, then their net worth
generates negative distributive externalities; if the shock is large enough that they are forced to
sell, then their net worth generates positive distributive externalities.


4.3   Distributive Externalities and Sign of ∆MRS
Environment     In this application, we assume a perfect foresight economy with no uncertainty.
Borrowers have concave utility U b = ∑2t=0 log cbt and a non-negative date 0 endowment e0b ≥ 0
                                                  

that we vary as our main experiment. Both borrowers and lenders are unproductive at date 1, but
produce according to F2b (k) = Ak and F2` (k ) = A log (k ) at date 2, where A > α. In the first-best,
                                                             A
borrowers’ date 0 investment corresponds to kb1 =            α.   At date 1, capital holdings are k`2 = 1 and
kb2 = kb1 − 1. Borrowers’ consumption is equalized across all dates.
   Regarding financial constraints, we assume that borrowers face limits both on how much they
can save and how much they can borrow at date 0 due to limited commitment, so φ ≤ x1b ≤ φ̄.
As in Application 2, no borrowing or lending is possible at date 1. Formally, borrowers’ date 0
  22 Whether   the distortions to investment of borrowers and lenders imply over- or under-investment in aggregate
depends on parameter values and cannot be determined in general.



                                                        27
financial constraint is given by the vector inequality
                                                                        !             !
                                                           φ̄ − x1b             0
                                         Φ1 x1b :=
                                          b
                                                                             ≥
                                                             x1b − φ              0

while borrowers’ date 1 financial constraint is given by Φ2b x2b := x2b = 0.
                                                                

Equilibrium and efficiency              The date 1 demand for capital assets by lenders is given by their
optimality condition
                                                                     A
                                                 q=      F2`0    k`2 = `                              (37)
                                                                      k2
Given borrowers’ date 1 net worth nb = x1b , their date 1 budget constraint and financial constraint
can be combined to c1b = nb + q kb1 − kb2 . Therefore, borrowers’ date 1 value function is
                                         

                                                                         
                   b    b b                    b   b       b   b        b     b
                 V n , k1 ; N, K1 = max u n + q k1 − k2 + u Ak2 ,                               (38)
                                                  kb2

Their optimality condition for capital holdings is given by

                                                                    nb
                                                        q=                                            (39)
                                                                2kb2 − kb1

Combining lenders’ demand (37) for capital with borrowers’ supply (39) yields the equilibrium
capital holdings and price of capital

                                           A + Nb b                               2A + N b
                                 K2b =            K               and        q=
                                          2A + N b 1                                K1b

where a well-defined equilibrium with non-negative capital holdings exist when N b ≥ − A.
Consequently, the date 1 equilibrium level of consumption for borrowers corresponds to C1b =
N b + q K1b − K2b = N b + A. Borrowers receive a constant amount A for their sales of capital,
                 

independently of the number of units of sold.
   The equilibrium asset price depends exclusively on two aggregate state variables q N b , K1b
                                                                                                        
                 ∂q               ∂q
and satisfies   ∂N b
                       > 0 and   ∂K1b
                                        < 0. The distributive effects in this economy, as defined in Lemma
1, satisfy

                                                b           ∂q
                                               DN b = −         ∆K2b > 0
                                                           ∂N b
                                                            ∂q
                                               DKb b    = − b ∆K2b < 0
                                                           ∂K1

where we use the fact that borrowers are always net sellers of capital, that is, ∆K2b = − 2A+
                                                                                            A
                                                                                              Nb
                                                                                                 <0
is negative. As in our previous application, lenders’ net worth does not have distributive effects,
so D iN ` = 0. Since lenders do not have capital at date 0, characterizing DKi ` is irrelevant.


                                                                28
       ∆M RS bℓ                 ∂q/∂K1b                      ∆K2b                     τkb

                                     0                       0
                                                                                  0
             0




                 e     e       eb0       e     e       eb0          e   e   eb0             e   e   eb0

                           Figure 3: Components of Optimal Tax τkb in Application 3


    We provide a full characterization of the date 0 equilibrium in the appendix. We show that
the optimal unconstrained financial decision by borrowers is given by

                                                       e0b − 2A
                                               X1∗   =
                                                           2.5
Therefore, depending on the borrowers’ endowment e0b , the date 0 equilibrium can take three
different forms. First, when X1∗ ∈ [φ, φ̄], the financial constraint is slack, so X1b = X1∗ . Second,
when X1∗ < φ, then borrowers hit their borrowing limit, so X1b = φ. Third, when X1∗ > φ̄, then
borrowers hit their saving limit, so X1b = φ̄.
    Because borrowers are constrained in their choice of x1b whenever the financial constraint is
binding, Corollary 5 implies that the same financing decision x1b can be implemented by setting
τ b = 0. Borrowing is therefore always constrained efficient in this economy, and it is sufficient
to focus on the optimal corrective policy for investment τkb . Out of the three sufficient statistics
from Proposition 2, our application restricts the signs of D2 and D3, since borrowers are always
net sellers and asset prices increase with the level of K1b . We summarize our findings on how the
form of the date 0 equilibrium affects D1 and efficiency of capital investment as follows.

Application 3. (Changing sign of ∆MRS) There are two thresholds e and e for the value of the
difference in borrowers’ endowments e0b such that a) if e0b < e, then ∆MRSb` < 0, and the economy
exhibits under-investment, b) if e ≤ e0b ≤ e, the economy is constrained efficient, and c) if e0b > e, then
∆MRSb` > 0, and the economy exhibits over-investment. Borrowing decisions are always constrained
efficient.

    In case a), when e0b < e, borrowers hit their date 0 borrowing limit, and ∆MRSb` < 0 – they
value wealth at date 1 relative to date 0 less than lenders. This makes it desirable to allocate
more wealth to lenders at date 1 and more to borrowers at date 0, but the borrowing constraint
prevents the financial market from performing this operation. However, the planner increases
capital investment by borrowers, which reduces the price at which borrowers sell capital at date
1 and effectively redistributes resources to lenders at date 1. Moreover, the planner provides a

                                                       29
lump-sum transfer from lenders to borrowers at date 0. Taken together, these two interventions
constitute a second-best way for the planner to emulate the effects of borrowing at date 0.
Conversely, in case c), borrowers would like to save more wealth than the saving limit allows for
and ∆MRSb` > 0. A planner can circumvent this constraint through reduced capital investment
by borrowers, which increases the date 1 price of capital and redistributes resources to borrowers,
combined with a lump-sum transfer from borrowers to lenders at date 0.
   Figure 3 depicts the key variables that drive the sign and magnitude of the distributive
externalities as we vary the endowment parameter e0b . The first panel illustrates that ∆MRSb`
is weakly increasing over the entire domain of e0b – it is negative for e0b < e and positive for e0b > e.
                                                                                     ∂q
The second and third panels depict the response of the asset price to capital       ∂K1b
                                                                                           and borrowers’
net trading position of capital ∆K2b , both of which are always negative. The fourth panel combines
the three sufficient statistics from the first three panels and reports the resulting tax rate τKb , which
is negative for low e0b (implying a subsidy) and positive for high e0b .
   The general lesson of this application is that the relative intertemporal valuation of resources
by agents – captured by ∆MRSb` – can take on either sign, and borrowers may switch from
having a higher valuation of resources to having a lower valuation of resources in response to
changes in fundamentals. We have set the described application in perfect foresight to crystallize
the message that distributive effects arise even if there is just a single state of nature. In that
case, a planner can only improve efficiency if she also has access to date 0 lump-sum transfers so
that the combination of distributive effect plus transfer substitute for incomplete date 0 financial
markets – without transfers, the distributive effects would constitute mere movements along
a constrained Pareto frontier. For an elaboration of this point, see Dávila (2014). In more
general stochastic settings, incomplete risk markets give rise to differences in marginal rates of
substitution for different agents across multiple states of nature, and the planner can employ
distributive effects to improve efficiency by improving risk-sharing between agents, even when
lump-sum transfers are ruled out.
   This application captures two different scenarios in practice. On the one hand, agents may
be constrained in their saving, as observed by a branch of literature that studies shortages of
safe assets (see e.g. Caballero and Farhi, 2014). On the other hand, borrowers may hit their
borrowing limit. Our application suggests that in such situations, a policymaker could improve
welfare by taxing the agents with excess savings or subsidizing the constrained agents, and
manipulating their capital investment decision to affect their terms-of-trade in the future in an
offsetting manner.




                                                   30
4.4      Collateral Externalities
Environment          Our last application illustrates the workings of collateral externalities.      We
assume that borrowers have quasilinear utility          =Ub      log c0b
                                                                   +       log c1b
                                                                              + with  c2b   c2b
                                                                                            ≥ 0 as well
as a date 0 endowment e0b ∈ [0, 1]. This is a perfect foresight economy with no uncertainty.
Borrowers have a linear production technology while lenders have no use for capital. Formally,
Ftb (k ) = At k and Ft` (k ) = 0 for t = 1, 2 where we assume 0 < A1 + A2 ≤ α. Importantly, we
assume A2 > 0, but we do not restrict the sign of A1 in this application – a negative value may
capture a reinvestment requirement that is necessary to maintain the capital. Our assumptions on
utility and the technology of lenders imply that the bond price m2 = 1 is constant and capital is
not traded among sectors, so all distributive effects are zero D iN j = DKi b = 0, focusing our analysis
                                                                                  1
exclusively on collateral externalities. In the first-best, as shown in the appendix, C0b = C1b = 1,
         A1 + A2
Ktb∗ =      α      and q = A2 .
   Regarding financial constraints, we assume that borrowers are unconstrained at date 0. We
also assume that borrowers can only borrow up to a fraction φ of the value of their asset holdings
at date 1, where φ ∈ (0, 1/1+ A2 ) to ensure equilibrium is well-defined. Formally, Φ1b := 0 and
                                                    
                                    Φ2b x2b , kb2 ; q := x2b + φqkb2 ≥ 0                         (40)

Equilibrium and efficiency Since capital always remains in the hands of borrowers, the price
of capital is pinned down by borrowers’ optimality condition for capital holdings

                                                   A2            A2 c1b
                                      q=                    =                                        (41)
                                           ub0   c1b + φκ2b   1 − φ + φc1b
                                                    


which defines a function q C1b with q0 C1b > 0.
                                         

   The interesting case is when the financial constraint (40) is binding. As we show in the
appendix, this is the case if N b ∈ 0, 1 − φA2 K1b . When borrowing is constrained to X2b = −φqK1b ,
                                                  

the date 1 budget constraint implies that

                                                                      A2 C1b
                                  C1b = N b + φqK1b = N b + φK1b                                     (42)
                                                                   1 − φ + φC1b

This equation defines a unique level of consumption C1b N b , K1b since the right-hand side is
                                                                 

increasing in C1b at a slope of less than one, given that our assumption on φ implies
                                                                                              φ
                                                                                             1− φ A 2 < 1
and given that K1b ≤ K1b∗ ≤ 1 in equilibrium.            Consumption is increasing in both N b and K1b .
                                                        the price of capital is a function q N b , K1b =
                                                                                                      
Substituting this consumption level into (41),
q C1b N b , K1b that is also increasing in both         N b and K1b . Equilibrium is independent of N ` ,
               

and Kt` = 0 at all times.
   Since the collateral constraint (40) depends on the price of capital, changes in the sector-wide


                                                       31
state variables N b , K1b have collateral effects, as defined in Lemma 1
                         


                     b             ∂q
                    CN b = φK1b        >0
                                  ∂N b         !
                                                   φK1b q0 C1b
                                                               
                                        ∂q  ∂q
                    CKb b       b
                            = φK1 A1 b + b =                      · ( A1 + φq) R 0
                                       ∂N  ∂K1   1 − φK1b q0 C1b

The sign of the collateral effects of capital depends on the sign of the last term in parentheses.
A1 is the marginal date 1 payoff of capital, which may be negative, and φq is the borrowing
capacity generated by an additional unit of capital. If A1 < −φq, then additional capital reduces
the liquid net worth of the borrower sector at date 1, which reduces q and generates negative
collateral effects, and vice versa for A1 > −φq.
      As shown in the appendix, the date 0 equilibrium is determined by the private Euler equation
C0b= C1b and the following optimality condition for capital investment, which equates the
marginal cost of investment to its private marginal benefit
                                         
                                     hb0 kb1 = 2kb1 = A1 + q                         (43)

    For our main experiment, we vary the parameter A1 and express all equilibrium variables as
                                                                     
a function of A1 . We define the threshold Â1 such that Â1 + φq Â1 = 0, where q ( A1 ) maps the
equilibrium price to the level of A1 . The normative properties of the described economy when
the financial constraint is binding are as follows.

Application 4. (Collateral externalities). Borrowers engage in overborrowing. There is a threshold
Â1 < 0 such that borrowers a) over-invest if A1 < Â1 , b) engage in efficient investment if A1 = Â1 and
c) under-invest if A1 > Â1 .

      Our result on overborrowing is a simple application of Corollary 1 and corresponds to the
          b , which is unambiguous. The distortion on borrowers’ level of investment depends on
sign of C N b

whether the marginal date 1 payoff plus the borrowing capacity generated by additional capital
                                        
is positive or negative. If Â1 + φq Â1 < 0, then additional capital soaks up liquidity in period 1
and there is over-investment; in the converse case additional capital generates net liquidity and
there is underinvestment.23
      Figure 4 depicts the key variables that drive the magnitude of the collateral externalities as
we vary the date 1 payoff of capital A1 . The first panel shows the net liquidity generated by
additional capital A1 + φq, which is increasing in A1 . The second panel depicts the shadow
price on the date 1 collateral constraint, which is hump-shaped – at first it increases since higher
A1 makes borrowers more eager to invest; then it declines as higher A1 generates more date 1
liquidity, which relaxes the constraint. The third panel shows the collateral effects as defined in
  23 Note   that when there is too much borrowing and too little investment at date 0, borrowers are consuming too
much.

                                                         32
     A1 + φq                      κ̃b2                   Cb                       τ
                                                                     CNb b
                                                                              0
                                                                      b
                                                                     CK b
                                                                         1
                                                                                            τkb
       0

                              0                      0
                                                                                            τxb
                            A1                     A1                        A1                   A1
               Â1                       Â1                  Â1                     Â1
                     Figure 4: Components of Optimal Taxes τxb , τkb in Application 4


           b is always positive when the constraint binds whereas C b changes sign when the
Lemma 1: C N b                                                     Kb
threshold Â1 is crossed. The fourth panel reports the resulting tax wedges on bonds and capital
investment, which represent the product of the variables shown in panels 2 and 3. It is always
desirable to tax borrowing when the constraint is binding, whereas the sign of the optimal tax on
capital switches at Â1 .
   This application illustrates the result of Corollary 1 that collateral externalities lead to
overborrowing. Since asset prices are increasing in sectoral net worth and since higher asset
prices relax collateral constraints, it is desirable for a planner to induce private agents to save
more when faced with collateral externalities, i.e. there is overborrowing in the decentralized
equilibrium. Furthermore, the application illustrates that collateral externalities may lead to
either under- or over-investment.
   In the real world, financial constraints that depend on asset prices are pervasive, both among
financial sector participants who are subject to margin constraints, and in the real economy, for
example among households purchasing homes or firms investing in real assets. This application
illustrates that in all these situations, it is desirable to shore up the net worth of the agents
determining the relevant asset prices. This can be done by inducing agents to buy insurance
against those states of nature in which prices decline or, absent insurance markets, to restrict their
borrowing. Furthermore, it is desirable to intervene in their investment decisions to mitigate
price declines. If the assets in question drain liquidity when financial constraints are binding,
e.g. houses that need to be maintained or highly cyclical capital investment that generates losses
during recessions, then it is desirable to restrict investment in them; if the assets in question
provide additional liquidity, e.g. by paying reliable dividends and providing a safe stream of
income, then it is desirable to induce additional investment.




                                                   33
5       Related Literature
Our paper is part of a strand of literature that analyzes pecuniary externalities in settings
with fire sales and financial amplification.             Hart (1975) and Stiglitz (1982) were the first
to identify pecuniary externalities that give rise to inefficiency when financial markets are
incomplete in the sense that the set of available assets is exogenously limited. Geanakoplos
and Polemarchakis (1986) generalized their results and showed that competitive equilibrium is
generically constrained inefficient in such a setting. This inefficiency is the basis of what we call
distributive externalities: changes in allocations influence market prices in a way that improves
risk-sharing or intertemporal smoothing. Greenwald and Stiglitz (1986) showed that pecuniary
externalities also arise when private agents are subject to other constraints that depend on market
prices such as selection or incentive constraints. This inefficiency is closely related to what we
call collateral externalities: changes in allocations influence markets prices in a way that relaxes
binding price-dependent constraints.24
     The analysis of financial amplification and fire sale effects as positive phenomena dates
back to at least Fisher (1933) and includes seminal contributions by Bernanke and Gertler
(1990), Shleifer and Vishny (1992), and Kiyotaki and Moore (1997). See Krishnamurthy (2010),
Shleifer and Vishny (2011), and Brunnermeier and Oehmke (2013) for recent surveys. The
main observation in these works is that changes in the net worth of borrowers may be
amplified by price changes that further reduce their net worth, corresponding to distributive
amplification effects (Shleifer and Vishny, 1992), or that tighten binding constraints on borrowers,
corresponding to collateral amplification effects (cf.              Corollary 4).      The remainder of this
section relates the existing literature on financial amplification and pecuniary externalities to our
framework with the objective of highlighting the precise mechanisms that lead to inefficiency
through the lens of our sufficient statistics results.
     Gromb and Vayanos (2002) analyze financially constrained agents who arbitrage between
segmented markets in an environment with incomplete risk markets (because market
segmentation restricts the set of assets that investors other than arbitrageurs can trade) and
price-dependent collateral constraints (which limit the borrowing of arbitrageurs). This gives rise
to both distributive and collateral externalities in our terminology. As a result, borrowing and
risk-taking by arbitrageurs can be either excessive or, when distributive externalities dominate,
insufficient.
     Caballero and Krishnamurthy (2003) analyze risk-taking by emerging market agents who
    24 Prescott   and Townsend (1984) show how such pecuniary externalities can be overcome when agents can
directly contract consumption levels and no anonymous re-trading is allowed. In a similar vein, Kilenthong and
Townsend (2014) propose to create segregated security exchanges with entry fees/subsidies for the exclusive right
and obligation to trade in a particular exchange, representing a Coasian solution to restore efficiency in pecuniary
externality problems.


                                                        34
insure against aggregate shocks but face uninsurable idiosyncratic shocks. Retrading among
domestic agents after the idiosyncratic shock is realized generates distributive externalities that
lead to excessive aggregate risk-taking and overinvestment. Lorenzoni (2008) considers fire
sales in an economy in which borrowers are financially constrained and limited commitment
by lenders constrains insurance provision, similar to Application 3. This generates distributive
externalities that give rise to overinvestment and excessive borrowing against the good state of
nature. In both papers, efficiency can be restored by solely taxing borrowing, even though both
borrowing and investment decisions are distorted. This is an application of our Corollary 5.
    Distributive externalities also arise in the literature that studies liquidity provision and the
coexistence of financial intermediaries and markets since the possibility of spot retrading in
financial markets, together with market incompleteness, reduces risk sharing opportunities. See
for example Jacklin (1987), Bhattacharya and Gale (1987), Allen and Gale (2004) and Farhi,
Golosov and Tsyvinski (2009). Kehoe and Levine (1993) endogenize financial constraints from
limited commitment and exclusion from intertemporal markets. Rampini and Viswanathan
(2010) endogenously derive state-dependent collateral constraints through limited commitment
without exclusion. Other recent papers that consider distributive externalities include Uribe
(2006), Dávila et al. (2012), Hart and Zingales (2015) and He and Kondor (2016).
    Jeanne and Korinek (2010a,b) and Bianchi and Mendoza (2012) consider borrowers in a
dynamic setting who are subject to a price-dependent collateral constraint that introduces
collateral externalities which lead to excessive borrowing, as implied by our Corollary 1. They
assume that lenders cannot hold capital and have linear utility so no distributive effects arise,
similar to Application 4. Other recent papers in which prices or other aggregate state variables
enter into financial constraints, generating externalities of the same nature as the collateral
externalities studied in our paper, include Gersbach and Rochet (2012), Stein (2012), Benigno
et al. (2013) and Kilenthong and Townsend (2014).
    There is also a complementary strand of literature that focuses on aggregate demand
externalities in the presence of nominal price rigidities. See e.g. Farhi and Werning (2016),
Korinek and Simsek (2016) and Schmitt-Grohé and Uribe (2016).              These externalities are
qualitatively different from the pecuniary externalities that we study. Farhi and Werning (2016)
provide an integrated welfare analysis of both aggregate demand and pecuniary externalities.
Korinek and Simsek (2016) illustrate that the two types of externalities interact and may mutually
reinforce each other.


6    Conclusion
This paper develops a general framework to characterize the pecuniary externalities that arise in
economies with financially constrained agents. We identify two distinct externalities, distributive


                                                 35
and collateral externalities, and show that each of the two types can be quantified as a function of
three intuitive sufficient statistics. Distributive externalities occur when a planner can employ
changes in prices to allocate wealth to agents who are underinsured because of incomplete
insurance markets. Collateral externalities occur when a planner can employ changes in prices
to relax binding collateral constraints that depend on market prices. Incomplete insurance
markets and financial constraints that depend on prices are pervasive in both theory and practice,
suggesting that our findings have broad applicability.
   Our general framework and our dichotomy between distributive and collateral externalities
can be applied to any economy with welfare-relevant pecuniary externalities to provide simple
and intuitive formulas for optimal policy intervention. Examples include externalities arising
from wage changes, terms of trade fluctuations, or exchange rate movements. The general
principle is that a planner wants to tax actions that redistribute wealth away from imperfectly
insured agents or that tighten binding financial constraints in proportion to how much the action
improves insurance or smoothing.
   However, even when pecuniary externalities are present, our paper shows that determining
their sign is not straightforward. Two of the three sufficient statistics that determine the sign
of distributive pecuniary externalities can flip sign in response to changes in fundamental
parameters, as we carefully illustrate in our applications, making it impossible to sign pecuniary
externalities in general. Furthermore, even though there is a close relationship between fire
sales, financial amplification and the distributive and collateral effects that underlie pecuniary
externalities, we show that both fire sales and amplification are neither necessary nor sufficient
to obtain inefficient pecuniary externalities.
   Our results also provide direct guidance to financial regulators who work on designing so-
called “macroprudential” financial regulations with the goal of reducing fire sales and financial
amplification to enhance financial stability. Our paper shows that fire sales are only constrained
inefficient if they occur between agents who are imperfectly insured or if financial constraints
depend on the prices of fire-sale assets. Regulators should thus pay attention to improving
insurance of financially constrained agents (e.g. by promoting contingent forms of financing) and
stabilizing the value of assets used as collateral (e.g. by adjusting margins in response to asset
price movements). This also suggests that it is dangerous if policymakers impose regulatory
constraints that explicitly depend on market prices. We hope that our findings help to discipline
the ongoing debate on the design of our financial architecture and macroprudential regulation.




                                                 36
References
Allen, Franklin, and Douglas Gale. 2004. “Financial intermediaries and markets.” Econometrica,
  72(4): 1023–1061.
Benigno, Gianluca, Huigang Chen, Christopher Otrok, Alessandro Rebucci, and Eric R. Young. 2013.
  “Financial Crises and Macro-Prudential Policies.” Journal of International Economics, 89(2): 453–470.
Bernanke, Ben S., and Mark Gertler. 1990. “Financial Fragility and Economic Performance.” Quarterly
  Journal of Economics, 105(1): 87–114.
Bhattacharya, S., and D. Gale. 1987. “Preference Shocks, Liquidity and Central Bank Policy.” New
  Approaches to Monetary Economics, W. Barnett and K. Singleton (eds.).
Bianchi, Javier, and Enrique G. Mendoza. 2012. “Overborrowing, Financial Crises and ’Macro-prudential’
  Taxes.” Working Paper.
Brunnermeier, Markus, and Martin Oehmke. 2013. “Bubbles, Financial Crises, and Systemic Risk.”
  Handbook of the Economics of Finance, 2B: 1221–1288.
Caballero, Ricardo J., and Arvind Krishnamurthy. 2003. “Excessive Dollar Debt: Financial Development
  and Underinsurance.” Journal of Finance, 58(2): 867–894.
Caballero, Ricardo J., and Emmanuel Farhi. 2014. “The Safety Trap.” NBER Working Paper, w19927.
Dávila, Eduardo. 2014. “Dissecting Fire Sale Externalities.” manuscript, Harvard University.
Dávila, Julio, Jay H. Hong, Per Krusell, and José-Víctor Ríos-Rull. 2012. “Constrained efficiency in the
  neoclassical growth model with uninsurable idiosyncratic shocks.” Econometrica, 80(6): 2431–2467.
Diamond, Peter A. 1973. “Consumption externalities and imperfect corrective pricing.” The Bell Journal of
  Economics and Management Science, 526–538.
Farhi, Emmanuel, and Ivan Werning. 2016. “A Theory of Macroprudential Policies in the Presence of
  Nominal Rigidities.” Econometrica, 84(5): 1645–1704.
Farhi, Emmanuel, Mikhail Golosov, and Aleh Tsyvinski. 2009. “A Theory Of Liquidity and Regulation
  of Financial Intermediation.” Review of Economic Studies, 76(3): 973–992.
Fisher, Irving. 1933. “The Debt-Deflation Theory of Great Depressions.” Econometrica, 1(4): 337–357.
Geanakoplos, John D., and Heraklis M. Polemarchakis. 1986. “Existence, regularity, and constrained
  suboptimality of competitive allocations when the asset market is incomplete.” Cowles Foundation Paper,
  652.
Gersbach,    Hans,    and Jean Charles Rochet. 2012. “Aggregate investment externalities and
  macroprudential regulation.” Journal of Money, Credit, and Banking, 44: 73–109.
Greenwald, Bruce C., and Joseph E. Stiglitz. 1986. “Externalities in Economies with Imperfect
  Information and Incomplete Markets.” Quarterly Journal of Economics, 90(May): 229–264.
Gromb, Denis, and Dimitri Vayanos. 2002. “Equilibrium and welfare in markets with financially
  constrained arbitrageurs.” Journal of Financial Economics, 66(2-3): 361–407.
Hart, Oliver D. 1975. “On the Optimality of Equilibrium When the Market Structure is Incomplete.”
  Journal of Economic Theory, 11(3): 418–443.
Hart, Oliver D., and Luigi Zingales. 2015. “Liquidity and Inefficient Investment.” Journal of the European
  Economic Association, 13(5): 737–769.


                                                     37
He, Zhiguo, and Péter Kondor. 2016. “Inefficient Investment Waves.” Econometrica, 84(2): 735–780.
Jacklin, Charles J. 1987. “Demand Deposits, Trading Restrictions, and Risk Sharing.” E Prescott and N
  Wallace, eds , Contractual Arrangements for Intertemporal Trade (University of Minnesota Press, Minneapolis,
  MN).
Jeanne, Olivier, and Anton Korinek. 2010a. “Excessive Volatility in Capital Flows: A Pigouvian Taxation
  Approach.” American Economic Review, 100(2): 403–407.
Jeanne, Olivier, and Anton Korinek. 2010b. “Managing Credit Booms and Busts: A Pigouvian Taxation
  Approach.” NBER Working Paper, 16377.
Kehoe, Timothy J., and David K. Levine. 1993. “Debt-Constrained Asset Markets.” Review of Economic
  Studies, 60: 865–888.
Kilenthong, Weerachart T., and Robert M. Townsend. 2014. “Segregated Security Exchanges with Ex
  Ante Rights to Trade: A Market-Based Solution to Collateral-Constrained Externalities.” NBER Working
  Paper, 20086.
Kiyotaki, Nobuhiro, and John Moore. 1997. “Credit Cycles.” Journal of Political Economy, 105(2): 211–248.
Korinek, Anton. 2011. “Systemic Risk-Taking: Amplification Effects, Externalities, and Regulatory
  Responses.” ECB Working Paper, 1345.
Korinek, Anton, and Alp Simsek. 2016. “Liquidity Trap and Excessive Leverage.” American Economic
  Review, 106(3): 699–738.
Krishnamurthy, Arvind. 2010. “Amplification Mechanisms in Liquidity Crises.” American Economic
  Journal: Macroeconomics, 2(2): 1–33.
Lorenzoni, Guido. 2008. “Inefficient Credit Booms.” Review of Economic Studies, 75(3): 809 – 833.
Magill, Michael, and Martine Quinzii. 2002. Theory of incomplete markets. Vol. 1, Mit press.
Mas-Colell, Andreu, Michael Dennis Whinston, and Jerry R. Green. 1995. Microeconomic Theory. Oxford
  University Press.
Prescott, Edward C., and Robert M. Townsend. 1984. “General Competitive Analysis In An Economy
  With Private Information.” International Economic Review, 25: 1–20.
Rampini, A., and S. Viswanathan. 2010. “Collateral, risk management, and the distribution of debt
  capacity.” The Journal of Finance, 65(6): 2293–2322.
Schmitt-Grohé, Stephanie, and Martín Uribe. 2016. “Downward Nominal Wage Rigidity, Currency Pegs,
  and Involuntary Unemployment.” Journal of Political Economy, 124: 1466–1514.
Shleifer, Andrei, and Robert W. Vishny. 1992. “Liquidation Values and Debt Capacity: A Market
  Equilibrium Approach.” Journal of Finance, 47(4): 1343–1366.
Shleifer, Andrei, and Robert W. Vishny. 2011. “Fire Sales in Finance and Macroeconomics.” Journal of
  Economic Perspectives, 25(1): 29–48.
Stein, Jeremy. 2012. “Monetary Policy as Financial-Stability Regulation.” Quarterly Journal of Economics,
  127: 57–95.
Stein, Jeremy. 2013. “The fire-sales problem and securities financing transactions.” FRB Speech.
Stiglitz, Joseph E. 1982. “The Inefficiency of the Stock Market Equilibrium.” Review of Economic Studies,
  49(2): 241–261.
Uribe, Martin. 2006. “On Overborrowing.” American Economic Review, Papers and Proceedings, 417–421.

                                                         38
Appendix
A         Proofs and Derivations from Sections 2 and 3
Proof of Lemma 1 Equation (14) follows from taking the partial derivatives of the value
function (11), exploiting agents’ privately optimal decisions, and applying the definitions of D i,ω
                                                                                                 Nj
                                                                                                     ,
DKi,ωj , C N
           i,ω         i,ω
             j , and C K j in equations (16) to (19). Equation (15) uses the definition of net worth from

equation (10), which implies that the total derivative of the value function with respect to K1i has
two components. The first one captures the marginal increase in net worth that leads to the same
redistribution D iN j effect as any other change in sector-wide net worth. The second one results
from the direct effect of K1i on market prices.
Proof of Proposition 1 The Lagrangian corresponding to problem (24) can be written as
                   n                   h                           i                  o
         L = ∑ θ i ui C0i + η0i C0i + βE0 V i,ω N i,ω , K1i ; N ω , K1 + κ1i Φ1i X1i , K1i
                     i
                    h                i
              − ν0 ∑ C0i + hi K1i − e0i − ∑ ν1ω ∑ X1i,ω
                         i                           ω       i

where N i,ω = e1i,ω + F1i,ω K1i + X1i,ω and N ω = N b,ω , N `,ω . The set of necessary conditions for
                                                              
the optimality of the constrained planner’s problem are
      dL       i
                 h  
                    i0    i     i
                                  i
           = θ    u     C0  + η 0 − ν0 = 0, ∀i
     dC0i
     dL
                                             ω + β ∑ θ V i = 0, ∀i, ω
                                                      j j,ω
       i,ω
           = −ν1ω + θ i βVni,ω + θ i κ1i Φ1x
                                          i
                                                        N
    dX1                                             j
      dL                              h                  i                         h                      i
                                                                           + β ∑ θ j E0 VN i F1i,ω 0 K1i + VKi = 0, ∀i
                                                                                         j,ω                j,ω
         i
           = −ν0 hi0 K1i + θ i βE0 Vni,ω F1i,ω 0 K1i + Vki,ω + θ i κ1i Φ1k
                                                                        i
     dK1                                                                       j


    a) Using the definition of λi,ω                                              i i
                                t , the first optimality condition implies ν0 = θ λ0 , ∀i. This
                θb           λ0`
implies that    θ`
                         =   λ0b
                                   as stated in the proposition. Equation (25) follows from dividing the
second optimality condition by θ i and using θ i =               ν0
                                                                 λ0i
                                                                       from the first optimality condition as well
as the envelope condition Vni,ω = λ1i,ω . Equation (26) follows from substituting ν0 from the
first optimality
           h     condition
                   i       into the third optimality condition and using the envelope condition
Vki,ω = E0 λ1i,ω qω .
    b) Substituting the tax rates from the proposition into the optimality conditions of private
agents with taxes25
                                
                      m1ω + τxi,ω λ0i = βλ1i,ω + κ1i Φ1x
                                                      i
                                                         ω,   ∀i, ω
                  h            i          h                         i
                   hi0 ki1 + τki λ0i = E0 βλ1i,ω F1i,ω 0 ki,ω 1    + q ω
                                                                            + κ1i Φ1k
                                                                                   i
                                                                                      , ∀i
  25 In the particular case of collateral constraints, there exists a relation between the shadow value of a binding
collateral constraint and the MRS across dates/states of a given agent, but this is not a robust feature of models
with binding price-dependent constraints. Importantly, because collateral effects are not zero-sum on the aggregate,
collateral externalities cannot in general be expressed as a difference of MRS between agents.


                                                           39
replicates the planner’s optimality conditions (25) and (26). The lump sum transfers ensure that
the budget constraints of private agents are met for the desired allocation. In conjunction with
the government budget constraint, this guarantees that the date 0 resource constraint holds. The
resulting allocation is thus constrained efficient.
Proof of Proposition 2 It follows from equations (29) and (30) by substituting the definition of
distributive and collateral effects from equations (16) to (19).
Proof of Corollary 1 For collateral externalities, sufficient statistic C1, corresponding to the
shadow value of the financial constraint κ̃2b,ω , is by definition non-negative; C2, corresponding to
                                           ∂Φ2b,ω
the price derivative of the constraint      ∂qω ,   is by construction non-negative; C3 for the effect of
                                                    ∂qω
financial net worth on the price of capital N b,ω is non-negative under Condition 1. Therefore
the product of the three is non-negative under the condition. Sufficient statistic C3 for the
                                                               ∂qω
effect of sector-wide capital holdings on the price of capital ∂Kb cannot be signed in general –
                                                                         1
                                                      ∂q
in Application 3 we provide an example of            ∂K1b
                                                            < 0 whereas in Application 4 we provide an
              ∂q
example of   ∂K1b
                    > 0. The collateral externalities of capital can thus take on either sign.
     For distributive externalities, sufficient statistic D1, corresponding to ∆MRSij,ω , can take
positive or negative values, as we illustrate in Application 3; D2, corresponding to ∆K2i,ω and
X2i , can take positive or negative values, as we illustrate in Application 2. Even though D3 pins
         ∂qω
down N b,ω , the product of the three sufficient statistics can take on either sign; thus “anything
goes” for distributive externalities.
Proof of Corollary 2       It follows from no-arbitrage considerations.
Proof of Corollary 3 The optimal corrective taxes τxi,ω and τki on financing and investment
decisions in the general case satisfy
                                          h            i
                                    i       i,ω 0  i,ω
                                   τk = E0 F1 (·) τx + Ξi , ∀i                         (A.1)

where we define Ξi as the direct effect of the level of capital on collateral and distributive
externalities for a given level of net worth
                           "                                     !                    #
                                            ω             ω                  b,ω    ω
                                         ∂q            ∂m                 ∂Φ     ∂q
                  Ξi := E0 ∆MRSij,ω         i
                                              ∆K2i,ω +    2
                                                          i
                                                            X2i,ω − κ̃2i,ω 2ω
                                         ∂K1           ∂K1                 ∂q ∂K b

Equation (A.1) follows by combining equations (18) and (19) with (29) and (30). Equation (32) in
the text is a special case of equation (A.1) when Ξi = 0.
Proof of Corollary 4       It follows from Propositions 1 and 2.
Proof of Corollary 5 Explicitly substituting λ0i , we can write the planner’s two main optimality
conditions as
         h           ih          i
            ω    i,ω
           m1 + τx     u c0 + η0 = βλ1i,ω + κ1i Φ1x
                        i0 i     i                  i
                                                      ω  ∀i, ω                              (A.2)
      h            ih          i      h                            i
       hi0 ki1 + τki ui0 c0i + η0i = E0 βui0 c1b,ω       F1i,ω 0 ki,ω
                                                                  1     + qω + κ1i Φ1k
                                                                                    i
                                                                                       ∀i   (A.3)

   For a given real allocations in the economy, these two optimality conditions as well as all the
constraints on the planner’s problem continue to be satisfied if

                                                       40
                                                                              h                   i
   1. we vary        m1ω
                     and       τxi,ω   in a given state ω such that the sum       m1ω   + τxi,ω       remains unchanged
      for all i ∈ I,
                                                                                  h                   i
           η0i    > 0 and we jointly vary τxi,ω , τki and η0i such that both m1ω + τxi,ω                   ui0 c0i + η0i , ∀ω
                                                                                                                       
   2. if
                  i0 i 
                  h k1 + τki ui0 c0i + η0i remain unchanged for a given agent i,
                                         
       and                                                                                            or

   3. if κ1b (z) > 0 for the z’th element of the vector κ1b and we jointly vary κ1i (z) and both τkb (if
                            b,ω
      Φ  b
       1k (z) > 0) and τx (for all ω for which       Φ1x
                                                        b
                                                           ω ( z ) > 0) such that both κ1 ( z ) Φ1x ω ( z ) −
                                                                                        b        b

        m1ω + τxb,ω λ0b , ∀ω and κ1b (z) Φ1k
                                          b ( z ) − hb0 k b + τ b λb remain unchanged.
                                                                   
                                                          1        k   0

Each of the three described variations of implementation consists of changes in tax rates, market
prices and shadow prices such that a given optimal real allocation continues to satisfy the
planner’s optimality conditions, proving the indeterminacy part of the corollary. It follows a
fortiori that the planner can employ the three described degrees of freedom to

   1. set τxi,ω = 0 for one of the types of agents i ∈ {b, `} in each ω ∈ Ω,

   2. if η0i > 0, set either τki = τ̂ (as long as the shadow price η0i remains non-negative, i.e. for any
      τ̂ such that τ̂ − τki ui0 c0i ≤ hi0 ki1h + τki η0ii at the original himplementation)   or τxi,ω = τ̂
                                                   
                                                                                     i
      in one ω ∈ Ω (for any τ̂ that satisfies τ̂ − τxi,ω ui0 c0i ≤ τxi,ω m1ω + τxi,ω η0i at the original
                                                                 

      implementation),
                                                                                                            λ0b
   3. if κ1b (z) > 0, set either τkb = τ̂ if Φ1k
                                              b ( z ) > 0 (for any τ̂ such that τ b − τ̂                             ≤ κ1i (z) at
                                                                                                       
                                                                                 k                         Φ1k (z)
                                                                                                            b

       the original allocation) or set τxb,ω = τ̂ in any state ω for which Φ1x
                                                                            b
                                                                               ω ( z ) > 0 (for any τ̂ that
                              b
                  b,ω         λ0
       satisfies τx − τ̂ Φb z ≤ κ1i (z) at the original allocation),
                                       1x ω
                                              ( )

while adjusting the remaining policy instruments and prices to satisfy the planner’s optimality
conditions (A.2) and (A.3). The conditions in parentheses ensure that the respective binding
constraints in points 2. and 3. continue to be binding so shadow prices do not become negative,
i.e. that c0i = 0 continues to be satisfied in point 2. and that the z’th element of the constraint
continues to bind, i.e. Φ1b (z) = 0 in point 3. Moreover, in point 3., only those decision variables
that are affected by the binding constraint are included in the indeterminacy, i.e. only the tax on
financing decisions in those states of nature ω for which Φ1x b
                                                                ω ( z ) > 0 is indeterminate, and the

tax on investment is only indeterminate if Φ1k (z) > 0.
                                               b

    A simple
              example
                           of the third indeterminacy is when the borrowing constraint
Φ1b x1b,ω , kb1      :=    x1b,ω + φ      ≥ 0 is strictly binding in a given state ω. In that case, a marginal
change in the tax rate τxb,ω changes the shadow price κ1b but does not have any real effects. If the
constraint is tight enough, the tax can be set to τxb,ω = 0 in that state without any effect on the real
allocation, and the financing decision for state ω can be considered constrained efficient. In this
example, the constraint does not depend on capital, Φ1k    b = 0, so the optimal tax rate on capital is

unchanged when we vary τxb,ω . We utilize this example in Application 3.




                                                            41
B     Proofs and Derivations of Applications in Section 4
B.1   Analytic Details on Application 1
Characterizing uniqueness at date 1 Assume that borrowers and lenders enter date 1 with state
variables (n, k1 ; N, K1 ) where n = N and k1 = K1 . Let us denote by z the amount of resources
that borrowers receive from lenders at date 1 – both via borrowing and fire sales – and by ρ (z)
the resulting payoff received by lenders at date 2 – both from the repayment of borrowing and
from production using fire-sold assets

                                                   z = m2 x2` + qk`2                                     (A.4)
                                                                 
                                               ρ (z) = x2` + F ` k`2                                     (A.5)

Given this notation, we can describe ρ (z) as the “supply of funds” of lenders. Let us also denote
by γ (z) the total resources given up by borrowers at date 2 – both as a repayment and because
of production foregone – and by δ (z) the deadweight loss of fire sales that results from the lower
productivity of lenders

                                      γ (z) = x2` + A2 k`2
                                                                                  
                                      δ (z) = γ (z) − ρ (z) =        A2 k`2   − F k`2
                                                                                `


The market prices m2 and q are pinned down by the optimality conditions of lenders

                                           u0 e2` + ρ (z)
                                                          
                                   m2 =                                                                  (A.6)
                                             u0 n` − z
                                                       
                                                   
                                     q = m2 F `0 k`2                                                     (A.7)

Our goal is to formally describe the conditions under which the “supply of funds” curve of
lenders is well-behaved so as to lead to a unique equilibrium. Given our assumptions on
production technology, there are two distinct regions for the date 1 equilibrium.
Unconstrained equilibrium When the financial constraint is slack, then equations (A.4) to (A.7)
together with k`2 = 0 (or, equivalently, z = m2 x2` ) define a system of 5 equations in 6 variables
 z, ρ, m2 , q, x2` , k`2 . We reduce the system to a single implicit equation,
                                                                   
                                          zu0 n` − z = ρu0 e2` + ρ

which defines a supply of funds curve ρ = ρ (z) by lenders that satisfies

                                       u0 c1` − zu00 c1`
                                                        
                                 ∂ρ
                                     = 0 `               >0
                                  ∂z   u c2 + ρu00 c2`

and is non-degenerate as long as
                                                            ρ
                                                      ηc2       <1                                       (A.8)
                                                            c2`
                    u00 (c2` )
where ηc2 := −c2`                . If condition (A.8) is satisfied, there exists a unique equilibrium.
                    u0 (c2` )


                                                            42
Constrained equilibrium When the constraint is binding, then equations (A.4) to (A.7) together
with x2` = m2 φA2 kb1 − k`2 defines a system of 5 equations in 6 variables z, ρ, m2 , q, x2` , k`2 .
                                                                                                  

Combining them, we find
                                               h                        i
         zu0 n` − z = u0 e2` + φA2 kb1 − k`2 + F ` k`2   φA2 kb1 − k`2 + k`2 F `0 k`2

This equation implicitly defines a “demand for fire sales” curve k`2 = k (z) that satisfies

                                        u0 c1` − zu00 c1`
                                                         
           ∂k
              = 0 `   `0 `                                                     >0
                u c2 F k2 − φA2 + k`2 F `00 k`2 + u00 c2` F `0 k`2 − φA2 ρ
                                                                    
           ∂z

and is non-degenerate as long as the denominator is positive, which requires two conditions,
                                                                       φA2
                                                            ηqk2 +      0
                                                                              <1                        (A.9)
                                                                     F ` k`2
                                                                                               
                                                      ρ                  ηqk2
                                                          1 −                                  <1     (A.10)
                                                                                                
                                                ηc2
                                                      c2`      1−
                                                                        φA2
                                                                                    − ηqk2
                                                                      F `0 (k`2 )

                  k`2 F `00 (k`2 )
where ηqk2 := −                      so that the first square bracket is positive, and where the term in square
                    F `0 (k`2 )
                                                                                k2` F `00 k2`
                                                                                       ( )
                                       F `0   k`2
                                              ( )−φA2                              F `0 k2`
                                                                                      ( )
brackets derives from
                              F `0 (k`2 )−φA2 +k`2 F `00 (k`2 )
                                                                  = 1−              φA              .
                                                                           1− `0 2` −ηqk2
                                                                             F (k )      2
    Under the three conditions (A.8), (A.9), and (A.10), the function k (z) is well-behaved and
captures how much capital borrowers have to give up to raise z units of funds at date 1 when
the constraint is binding. The function is defined up to an upper limit zmax that is given by
k (zmax ) = kb1 .
    It is now straightforward to express the supply of funds curve ρ (z) of lenders as well as
the deadweight loss  curve  δ (z) and the resources given up by borrowers γ (z) by substituting
  `           b   `       `
x2 = φA2 k1 − k2 and k2 = k (z) into the three expressions to obtain
                                                              
                       ρ (z) = x2` + F ` k`2 = φA2 kb1 − k (z) + F ` (k (z))
                                            
                       δ (z) = A2 k`2 − F ` k`2 = A2 k (z) − F ` (k (z))
                             γ (z) = x2` + A2 k`2 = φA2 kb1 + (1 − φ) A2 k (z)

Given that k (z) is non-degenerate and strictly increasing, all three
                                                                     functions are well-defined and
                                                             `0   `
strictly increasing. Note that condition (A.9) implies that F k2 > φA2 .
    In combination, under the stated assumptions the two regions, constrained and
unconstrained, define a supply of funds curve ρ (z) of lenders that is strictly increasing and
continuous over the interval z ∈ [0, zmax ], which is sufficient to guarantee existence and
equilibrium uniqueness at date 1. In conjunction with equations (A.6) and (A.7), this also ensures
that Condition 1 is satisfied.
Date 0 Given the lack of financial frictions, it is trivial to close the model at date 0 after defining
conditions for uniqueness of the date 1 equilibrium. Hence, for brevity, we omit the details of the
date 0 characterization.

                                                                      43
B.2    Analytic Details on Application 2
Date 1 lenders’ problem The date 1 value function of lenders is
                                                                               
                V `,ω n`,ω , k`1 ; N ω , K1 = max n`,ω + qω k`1 − k`2,ω + F2` k`2,ω
                                                     k`2,ω


Their optimality condition is given by equation (34). The partial derivatives of V `,ω internalized
by private agents are given by

                                                  Vn`,ω = λ1` = 1
                                                  Vk`,ω = qω

Date 1 borrowers’ problem and equilibrium The value function of borrowers is given by
equation (36). If N b,ω ≥ N̂, then equilibrium is unconstrained so qω = A2 and the value function
of borrowers can be simplified to
                                                          
                               V b,ω nb,ω , kb1 ; N ω , K1   = nb,ω + A2 kb1

where the partial derivatives of V b,ω internalized by private agents are given by Vnb,ω = λ1b,ω = 1,
Vkb,ω = A2 , and VNb,ω    b,ω
                     j = V j  = 0.
                           K1
   If N b,ω ≤ N̂, then equilibrium is constrained, and the value function of borrowers is
                                                                                   !
                                                                    n b,ω
                       V b,ω nb,ω , kb1 ; N b,ω , K1`   = A2 kb1 +
                                                                   q N b,ω , K1`
                                                                                 


The partial derivatives of this value function that are internalized by private agents are

                                                        A2                  1 + K1`
                                      Vnb,ω   =                        =
                                                  q N b,ω , K1`             1+   N b,ω
                                                                                  A2
                                      Vkb,ω = A2

The uninternalized distributive effects are

                                                   1 N b,ω 1 + K1`
                                                                    
              b,ω        ∂qω  b,ω     b
                                                                             N b,ω
             DN b    = − b,ω K2 − K1 = −                              = −
                        ∂N                      1 + K1` N b,ω + A2        N b,ω + A2
                                           N b,ω + A2 N b,ω 1 + K1`
                                                                    
                        ∂qω                                            N b,ω
             DKb,ω
                 `   = − ` K2b,ω − K1b =            2                =
                        ∂K1                 1 + K`      N b,ω + A2      1 + K1`
                                                                  1

It can easily be verified that VNb,ω
                                   b
                                              b,ω
                                      = λ1b D N         b,ω
                                                b and VK `  = λ1b DKb,ω
                                                                      ` . As described in the text,

whenever N b,ω ≥ N b,min , there exists a unique equilibrium at date 1.
Date 0 equilibrium      For both sets of agents, optimal date 0 capital investment is determined by
                                    h                                     i
                                        i,ω     ω i         i     i    b   `
                             max E V          A 1 k 1 − h k 1 , k 1 ; N , K1
                                ki1


                                                             44
with optimality condition                        h           h             i       i
                                             E       λ1i,ω       A1ω     0  i    i,ω
                                                                       − h k1 + Vk     =0
Under the assumption that the financial constraint is slack in the high state and binding in the
low state. For lenders, the optimality condition is then
                                                                                
               0   `        `                                          L     b,L `
             h K1 = αK1 = E [ A1 + q ] = E [ A1 ] + (1 − π ) A2 + πq N , K1
                                    ω    ω           ω
                                                                                          (A.11)

The left-hand side of this expression is increasing in K1` and the right-hand side is decreasing in
K1` (since ∂K` < 0), pinning down a unique solution for K1` . For borrowers, the date 0 optimality
            ∂q
                 1
condition is
                                                                         (                                           )
                                   h                             i                  A2           h            i
                        (1 − π ) A1H − αK1b + A2 = π                                               αK b
                                                                                                      1 − A L
                                                                                                            1 − A2       (A.12)
                                                                                   N b,L , K1`
                                                                                               
                                                                              qL

The left-hand side captures the marginal gains from additional capital investment in the high
state of nature, which, in equilibrium, must be positive and must offset the marginal losses from
additional investment in thelow state of nature,     captured by the right-hand side. The optimum
thus needs to satisfy αK1b ∈ A1L , A1H + A2 . Since the left-hand side is decreasing in K1b and the
                                              

right-hand side is increasing in K1b , the optimality condition pins down a unique solution within
this interval.
    The condition under which the constraint is indeed slack in a given state is N b,ω = A1ω K1b −
        2
α(K1b )
   2      ≥ A2 K1` = N̂ b or
                                                A2 K1` αK1b
                                          A1ω ≥         +
                                                  K1b      2
   Intuitively, the return on capital in the high state needs to cover both the additional capital
purchases from lenders (per unit of borrower capital) and the average cost of investment. We
assume that this inequality is satisfied in the high state but violated in the low state of nature.26
Proof of Application 2 Given all other parameters, we define the threshold Ã1L such that
N b,L = 0 or, equivalently,
                                                      αK1b
                                               Ã1L =
                                                        2
This condition together with the optimality conditions (A.11) and (A.12) pins down a unique
level of Ã1L . By construction, N b,L = 0 for A1L = Ã1L , proving case 2 of the proposition. Standard
                                              dN b,L
stability conditions imply that                dA1L
                                                        > 0. As a result, A1L < Ã1L implies N b,L < N̂ b and A1L > Ã1L
leads to N b,L > N̂ b , proving the other two cases. In the limit case π → 0, the threshold is easy to
                            αK1b       A1H + A2
characterize, Ã1L =         2     =       2    .
  26 In the limit case π   → 0, optimal investment implies αK1i = A1H + A2 for both agents, and the condition simplifies
           A1H + A2
to A1ω −       2      R A2 or

                                                                                      A1H + 3A2
                                                    A1H ≥ A2           and    A1L <
                                                                                          2



                                                                             45
B.3   Analytic Details on Application 3
Date 1 lenders’ problem         The date 1 value function of lenders is
                                                                          
                       V`       n` , k`1 ; N, K1 = max n` + q k`1 − k`2 + F2` k`2
                                                  k`2

Their optimality condition is given by equation (37). The partial derivatives of V ` internalized
by private agents are given by

                                       Vn` = λ1` = 1     and   Vk` = q
Date 1 borrowers’ problem and equilibrium The definition of date 1 borrowers’ net worth
nb = x1b together with their date 1 budget constraint and financial constraint implies c1b =
nb + q kb1 − kb2 . The value function of borrowers is thus given by equation (38) and the partial
                

derivatives of this value function that are internalized by private agents are
                                                               
                                Vnb = u0 c1b    and Vkb = qu0 c1b

The optimal capital holdings of borrowers are given by
                             u0 c2b     nb + q kb1 − kb2
                                                        
                                                                   nb
                         q = 0 b A =                      A =
                             u c1              Akb2            2kb2 − kb1
which corresponds to equation (39). Combining lenders’ demand (37) and borrowers’ supply
(39) for capital implies
                                      A + Nb b                         2A + N b
                            K2b =            K           and      q=
                                     2A + N b 1                          K1b
Date 0 equilibrium At date 0, borrowers solve
                                                                 
                   b   b   b     b     b   b b          b               b
           max u e0 − h k1 − x1 + V x1 , k1 ; K, N + λ x1 − φ + λ φ̄ − x1
            x1b ,kb1

Their optimality conditions are given by
                                               
                                   u0 c0b = u0 c1b + λ − λ
                                                    
                                   hb0 kb1 u0 c0b = qu0 c1b
Substituting  for the date
                        0 and
                             1 budget constraints, the second condition can be re-written as
hb0 K1b u0 e0b − h K1b − X1b = qu0 X1b + A and, using the equilibrium q from above, solved
                                         

for                                   s
                                                b
                                                   b       b
                                                              
                                         2A + X     e   − X
                                K1b =           1     0
                                                          1
                                          α 1.5X1b + 2A
If the date 0 financial constraints are slack, we find λ = λ = 0. The Eulerq equation then implies
                                                                            2A+ X1b
c0b = c1b , and the expression for capital investment simplifies to K1b∗ =    α     . We can solve for
the optimal unconstrained level of saving
                                                       e0b − 2A
                                              X1b∗   =
                                                           2.5

                                                        46
The two constraints on borrowing and saving are indeed slack if X1b∗ ∈ [φ, φ̄]. Otherwise, if the
constraint on borrowing (saving) is binding, then X1b = φ (or X1b = φ̄). The threshold values e
and e for the initial endowment e0b at which the two constraints become binding are defined by
X1b∗ = φ and X1b∗ = φ̄, respectively.
                                                                                 b
Welfare analysis The sensitivities of the equilibrium price of capital q = 2AK+bN to K1b , N b are
                                                                                              
                                                                                                        1
given by

                                              ∂q      2A + N b
                                                  = −       2 < 0
                                             ∂K1b       K b
                                                             1
                                              ∂q     1
                                                 b
                                                   = b >0
                                             ∂N     K1

                                              b,ω              b,ω ∂qω                       ∆K2b,ω
and the respective distributive effects are D N b = − ∂N b,ω ∆K2   = −                        K1b
                                                                                                      > 0 since ∆K2b,ω < 0
                                                           u0 (c1b )           λ−λ
always holds. Note that MRS` = 1 and MRSb =                            = 1−             .   Consequently,
                                                           u0 (c0b )          u0 (c0b )


                                                             λ−λ
                                                 ∆MRSb` =
                                                             u0 c0b
                                                                    


Therefore, if borrowers are borrowing-constrained at date 0, then λ > 0 and λ = 0, which implies
that ∆MRSb` < 0 and τkb < 0, so there is under-investment in that case. Instead, if borrowers are
saving-constrained at date 0, then λ = 0 and λ > 0, which implies that ∆MRSb` > 0 and τkb > 0,
so there is over-investment in that case.


B.4    Analytic Details on Application 4
Because lenders are risk neutral and have no use for capital, they simply pin down the
equilibrium value of m2 = 1. We thus focus exclusively on the borrowers’ problem.
Date 1 borrowers’ problem and equilibrium The date 1 value function is given by
                                                                           
            b   b b                  b    b    b      b      b    b    b      b
          V n , k1 ; N, K1 = max u n − q∆k2 − x2 + x2 + A2 k2 + κ2 x2 + φqk2
                                  x2b ,kb2

with optimality conditions
                                             
                                                    
                                             b   0  b
                                        q u c1 − φκ2 = A2
                                                  
                                               u0 c1b = 1 + κ2b

which, combined, yield equation (41) in the text and define a function q C1b with q0 C1b > 0.
                                                                                               

    In an unconstrained equilibrium, borrowers consume C1b = 1 and save X2b = N b − 1 at date 1,
resulting in a price of capital q = F2b0 (·) = A2 . This allocation is first-best and is feasible as long
as X2b ≥ −φqK2b or, equivalently, N b ≥ 1 − φA2 K1b .
    Otherwise, if N b ∈ 0, 1 − φA2 K1b , then borrowing is constrained to X2b = −φqK1b . This
                                          

is the case on which we focus in the main text. The date 1 budget constraint then implies

                                                      47
C1b = N b + φqK1b which leads to equation (42) in the text and implicitly defines a function
                              ∂C b ∂C b
C1b N b , K1b that satisfies ∂N1b , ∂N1b > 0. In combination with equation (41), this pins down the
             

price of capital q N b , K1b as a function that is strictly increasing in both arguments.
                            

    The  date 00 optimality conditions of individual agents are given by the standard Euler equation
  0
u C0 = u C1 or equivalently C0b = C1b and the optimality condition for capital investment
      b            b
                     

(43). Combining the condition N b = F K1b + X1b ≥ 1 − φA2 K1b for a slack financial constraint
                                                 

at date 1 with the date 0 budget     hconstraint,
                                                  we observe
                                                         i      that the unconstrained (and first-best)
allocation is feasible if e0b ≥ 2 + 21 − φ A2 − 12 A1 K1b∗ .
    In our application, we assume that this inequality is violated so that the financial constraint
is binding. In that case, the date 0 and 1 budget constraint, the binding financial constraint,
the Euler equation C0b = C1b = C b and the condition for optimal capital investment (43) can be
combined to obtain the equilibrium condition
                                                                   b
                                                                     
                                                        A    + q C
                                                 
                                          1         A     1
                         2C b + q C b       −φ − 1                     −e = 0
                                          2         2          α

Holding all other parameters constant, this equation defines a continuous equilibrium
consumption function C b ( A1 ) that satisfies C b0 ( A1 ) > 0 under the restrictions that we have
imposed on A1 and φ.   By implication, it gives rise to a strictly increasing asset price function
                b
q ( A1 ) = q C ( A1 ) and capital investment K1 ( A1 ) = ( A1 + q ( A1 )) /α and to a unique
threshold Â1 at which the A1 + φq ( A1 ) = 0.


B.5    Distributive Externalities and Multiple Equilibria
Applications 5 and 6 illustrate that violations of Condition 1 are typically associated with
backward-bending demand curves that lead to multiple and locally unstable equilibria.
Environment We modify Application 3 to introduce multiple equilibria. We now assume
                                                                               1− θ
that borrowers have CRRA utility U b = ∑2t=0 u cbt , where u (·) = c1−θ , and that lenders
                                                          

have linear utility U ` = c0` + c1` + c2` , with c`t ≥ 0. This is a perfect foresight economy with
no uncertainty. Lenders have large endowments of the consumption good at each date while
borrowers have non-negative endowments e0b ≥ 0, e1b = e2b = 0. Only borrowers invest at date 0.
                                                                        2
Formally, borrowers’ investment technology is given by hb (k ) = αk2 , while lenders’ technology
corresponds to h` (k ) = ∞, for k > 0. Both borrowers and lenders are unproductive at date 1,
                                                                                       (k +δ)η
but they produce according to F2b (k ) = Ak and F2` (k) = A                               η      at date 2, where η < 1, A > α
               k`2
and δ R 0, for > δ. Conceptually, this formulation introduces more curvature into the model.
Agents face the same financial constraints as in Application 3.
   In the first-best, borrowers’ date 0 investment corresponds to kb1 = Aα . At date 1, borrowers
hold k`2 = 1 − δ and kb2 = kb1 − 1 + δ. Borrowers’ consumption is equalized across all dates.
Date 1 equilibrium and multiplicity The date 1 demand for capital assets by lenders is given
by their optimality condition
                                                                  η −1                               η −1
                      q=   F2`0       K2`       =A       K2`   +δ            =A       K1b   − K2b   +δ                  (A.13)




                                                                48
Given borrowers’ net worth, which corresponds to nb = x1b , their date 1 budget constraint, and
financial constraint imply c1b = nb + q kb1 − kb2 . Therefore, borrowers’ date 1 value function
                                                 

corresponds to
                                                                     
                      b   b b                     b      b    b           b
                   V n , k1 ; N, K1 = max u n + q k1 − k2 + u Ak2 ,                      (A.14)
                                               kb2

Their optimal capital holdings for borrowers are given by
                                                            
                              qu0 nb + q kb1 − kb2    = Au0 Akb2                                        (A.15)

Setting A = 1 without loss of generality, because of the homogeneity of the problem, we show
that the sensitivity of borrowers’ demand for capital to prices is determined by
                                                                   
                                           0  b
                                                   q(kb1 −kb2 )
                                         u c1 θ c b              −1
                               ∂kb2                       1
                                    = − 2 00 b  b
                                       q u c1 k1 − kb2 + u00 c2b
                                                                     
                               ∂q

                                                     ∂kb
When income effects are sufficiently strong, ∂q2 can take on positive values, implying that lower
prices reduce the demand for capital of borrowers. Formally, this occurs when the curvature of
the utility function is sufficiently large

                                                                nb
                                            θ−1 >
                                                           q kb1 − kb2
                                                                       

We can solve equation (A.15) for K2b to explicitly find an expression for the demand for capital
given N b and K1b
                                          b    N b + qK1b
                                        K2 =      1
                                                                                          (A.16)
                                                 qθ + q
The equilibrium of the economy is then fully characterized by the solution to
                                                                             equations (A.13)
                                                                       b  b
and (A.16). Combining both equations we can directly characterize q N , K1 as the solution to
the following equation
                                                         ! η −1
                                           N b + qK b
                              q = K1b −       1
                                                   1
                                                      +δ                                (A.17)
                                            qθ + q

   For given N b and K1b , equation (A.17) may have multiple solutions, as illustrated in Figure A.1,
which depicts the left-hand side and right-hand side of the equation for the parameter values
                                                                 ∂q
reported at the end of Appendix B. It also follows that that ∂N b > 0 in the equilibrium with
low q, which is the one that survives for any value of θ whenever an equilibrium exists.27 The
                                        ∂q
equilibrium with high price features ∂N b < 0 , which violates Condition 1 in the text.
   Our assumptions guarantee that borrowers are net sellers of capital, so ∆K2b < 0. The
distributive effects of borrowers’ net worth, defined in Lemma 1, are given by

                                              b               ∂q
                                             DN b = −            b
                                                                   ∆K2b
                                                             ∂N
  27 Inthis specific example, because we have assumed that δ < 0, there is also a possibility of nonexistence of
equilibrium when N b is sufficiently high.

                                                           49
                                 Figure A.1: Multiple solutions for (A.17)




                                 Figure A.2: Equilibrium correspondences


and will therefore have the same sign as ∂N b . Consequently, for a given sign of ∆MRSb` ,
                                                   ∂q

whose determination is extensively discussed in Application 3, if one equilibrium features
overborrowing, the other one will feature underborrowing.
                                        ∂q
Application 5. (Changing sign of ∂N b , distributive externalities). For sufficiently large values of θ,
there exist N b and K1b such that the economy features multiple equilibria, each of them with different signs
of ∂N b . Therefore, for a given sign of ∆MRSb` , if one equilibrium features overborrowing, the other one
    ∂q

will feature underborrowing, and vice versa.

    For brevity, we do not repeat the date 0 characterization of the equilibrium, which follows the
same steps as in Application 3, after accounting for the expectation of equilibrium selection.
    Propositions 1 and 2 are valid to characterize the planner’s constrained optimum regardless
of whether there is a unique equilibrium or multiple equilibria. However, the solution to the
constrained planning problem will be generically unique for a given equilibrium selection rule,
or if the planner has sufficiently rich policy instruments to implement a specific equilibrium. We


                                                     50
leave a more detailed analysis of the implementation of optimal corrective policies with multiple
equilibria to future research.


B.6    Collateral Externalities and Multiple Equilibria
Environment We modify Application 4 to introduce multiple equilibria. We show that one of
                                                            ∂q
them violates Condition 1 in that the price derivative ∂N b is positive. We continue to assume a
perfect foresight economy in which lenders have large endowments, cannot invest at date 0 so
h` (k ) = ∞ for k > 0, have no use for capital Ft` (k) := 0, ∀t and linear utility U ` = c0` + c1` + c2`
with cit ≥ 0. Given this utility and technology, all distributive effects are zero D iN j = DKi b = 0.
                                                                                                1
    For borrowers, we modify the date 0 and 1 period utility functions to be CRRA instead of
                                                      1− θ
log so U b = u c0b + u c1b + c2b with u (c) = c1−θ . We will focus on the case θ > 1, since this
                               

increases the curvature of the utility function and naturally prepares the ground for multiplicity
in our setting. We assume borrowers have endowments e0b , e1b ∈ (0, 1) and e2b = 0; they invest at
                                                    2
date 0 according to the cost function hb (k ) = αk2 and have linear production function Ftb (k) = Ak
where we assume A ≤ α2 . The collateral constraints are the same as in Application 4, Φ1b := 0
                             p

and Φ2b x2b , kb2 ; q := x2b + φqkb2 ≥ 0 with φ ∈ (0, 1). The first-best exhibits C0b = C1b = 1, Ktb∗ = 2A
                     
                                                                                                         α
and q = A.
Date 1 equilibrium and multiplicity The date 1 optimization problem of borrowers is
                                             
                  V n , k1 ; N, K1 = max u c1b + c2b
                    b   b b
                                                           s.t. (3),(4),(40)
                                                  c1b ,c2b ,x2b ,kb2

Since capital always remains in the hands of borrowers, the price of capital as a function of
borrower consumption C1b is pinned down by their optimality condition for capital holdings
                                                     A                 A
                           q C1b =                             =             −θ
                                            u0   C1b         b
                                                       
                                                         + φκ2   (1 − φ) C1b     +φ

In an unconstrained equilibrium, borrowers consume C1b = 1 and save X2b = N b − 1 at date 1,
resulting in a price of capital of q = F2b0 (·) = A. This allocation is feasible as long as X2b ≥ −φqK2b
or, equivalently, N b ≥ 1 − φAK1b .

                                    1

                                  0.8

                                  0.6

                                  0.4

                                  0.2

                                    0
                                        0                              0.5   1

                                Figure A.3: Multiple solutions for (A.18)


                                                                   51
  In a constrained equilibrium X2b = −φqK1b and C1b < 1. The date 1 budget constraint then
implies that
                      b      b
                                    
                                     b  b     b          φAK1b
                     C1 = N + φq C1 K1 = N +                   −θ                  (A.18)
                                                   (1 − φ) C1b     +φ
For given N b and K1b , this is an implicit equation in C1b that may have multiple solutions, as
illustrated in an example in Figure A.3, in which the right-hand side of (A.18) is the curved line.
Formally, as we vary C1b over the interval [0, 1], the collateral term on the right-hand goes from
φq (0) K1b = 0 (for θ > 1) to φq (1) K1b < 1. Multiplicity arises for some values of N b if there exists
a range of C1b for which the slope of the right-hand side of (A.18) exceeds unity, as in the figure.
The slope is highest at the inflection point of the price function, i.e. at the value C̃ that satisfies
                                  h              i1
  00
                                   (θ −1)(1−φ) θ
q C̃ = 0 and is given by C̃ =          ( θ +1) φ
                                                    , which we assume w.l.o.g. to be in the unit interval.
At that point, the slope of the right-hand side of (A.18) is
                                                                 1                  θ +1          θ −1
                                                                                        ( θ − 1)
                                                      
                            0                               φ         θ   ( θ + 1)     θ             θ
                                     K1b       AK1b
                                 
                         φq C̃             =
                                                           1−φ                         4θ

    The first multiplicative term on the right-hand side of this expression is bounded to AK1b < 1
by our earlier assumptions; the second and third terms are increasing functions of φ and θ. If
they are chosen sufficiently large, the slope exceeds
                                        b
                                                        bunity at C̃, and there is a neighborhood
of borrowers’ net worth around Ñ = C̃ − φq C̃ K1 for which equation (A.18) has multiple
equilibria.
    In this area of multiplicity,
               b   b   b
                                 b   b
                                         set of state variables ( N, K1 ) is consistent with multiple
                                  a given
solutions C1 N , K1 and q N , K1 , as illustrated in Figure A.4. The two bottom panels of the
                                          ∂q
figure also show the price derivative ∂N b with respect to borrowers’ net worth and the collateral
          b . In the region between the two dashed vertical lines, three equilibria and three possible
effects C N
values for the price derivative and collateral effects exist. As can be seen from the top right panel,
the price q is an increasing function of banker net worth N b for two of the three equilibria, but a
decreasing function of banker net worth for the middle equilibrium. In the first two equilibria, the
standard results on excessive borrowing hold; in the third equilibrium, net worth has negative
collateral effects and the decentralized equilibrium exhibits insufficient borrowing.
                                            ∂q
Application 6. (Changing sign of           ∂N b
                                                ,   collateral externalities). If the parameters φ and θ are chosen
to be sufficiently large to satisfy
                                                     1               θ +1             θ −1
                                                                           ( θ − 1)
                                       
                                            φ          θ   ( θ + 1)     θ                θ
                                AK1b                                                          >1
                                           1−φ                            4θ

then there is a neighborhood of borrowers’ net worth around Ñ b such that the economy exhibits three
equilibria. Two of the three are stable and feature overborrowing and underinvestment; the third
equilibrium is unstable and features underborrowing and overinvestment.
    In the described setting of multiplicity, the equilibrium with the highest C1b is Pareto-superior
to the other two equilibria – the utility of lenders is always constant U ` = ∑2t=0 et` since there
are no distributive effects. However, this is not a general feature – when lenders have concave
utility or production technologies, distributive effects arise, and lenders may be better off in those
equilibria in which borrowers are worse off. A planner can rule out multiple equilibria if she has

                                                              52
                             C (Nb)                                        q(N )
                                                                                b
                               1
               1                                              1

             0.8                                             0.8

             0.6                                             0.6

             0.4                                             0.4

             0.2                                             0.2

               0                                   Nb         0                                   Nb
                     0.05     0.1     0.15   0.2                   0.05   0.1       0.15    0.2


                            ∂q(Nb)/∂Nb                             Collateral effects CbN



              10                                             10


               0                                              0


             −10                                         −10

                                                   Nb                                             Nb
                     0.05     0.1     0.15   0.2                   0.05   0.1       0.15    0.2
                               Figure A.4: Equilibrium correspondences


the capacity to coordinate private agents on one specific equilibrium, for example by committing
to a contingent tax/subsidy scheme that makes it suboptimal for individuals to choose inferior
equilibria.
    For brevity, we do not repeat the date 0 characterization of the equilibrium, which follows the
same steps as in Application 4, after accounting for the expectation of equilibrium selection.


Parameters Used for Figures in Applications
Figure 1 To illustrate Application 1, we assume date 2 production technologies F2b,ω (k) = k and
F2`,ω (k ) = log (1 + k ) and period utility functions ui (c) = log (c) with no discounting for both
agents. Furthermore we set φ = 0.2 and date 2 endowments e2b = 3 and e2` = 10. The figure
depicts date 1 equilibrium for N ` = 2.5, K1b = 0.5, K1` = 0 and N b ∈ N b,min , 1.30 where the the
                                                                                    

minimum admissible borrower wealth (at which borrowers fire-sell all their capital holdings and
obtain non-negative consumption) is N b,min = 0.33. The wealth threshold on which the financial
constraint on borrowers is marginally binding is N̂ b = 0.8.
Figure 2 To illustrate Application 2, we set the parameters α = 1, A1H = 3 and A2 = 1 and the
probability of the low state π = 5%. We vary A1L ∈ [1.2, 3] and compute the resulting equilibria,
which we trace out in the four panels of the figure. The net trading position of capital ∆K2b,L
switches sign at Ã1L = 1.8.



                                                        53
Figure 3 To illustrate Application 3, we set the parameters α = φ = 12 , A = 1. We vary
e0b ∈ [.25, 2.5] and compute the resulting equilibria, tracing out the three sufficient statistics and
the resulting tax rate in the four panels of the figure. The borrowing constraint is binding when
e0b < e0b = 0.75 and the constraint on saving is binding when e0b > ē0b = 2.
Figure 4 To illustrate Application 4, we set the parameters α = 2, A = 1, φ = 13 . We vary
e0b ∈ [0, 2.5] and compute the resulting equilibria, which we trace out in the four panels of the
figure. We observe that the collateral constraint is binding when e0b < ê0b = 53 .
Figures A.1 and A.2 To illustrate Application 5, we set the parameters η = 0.4, θ = 2.5, and
δ = −0.75. Figure A.1 plots the left- and right-hand-side of equation (A.17) for N b = 0.2 and
K1b = 3.5. For Figure A.2, we vary N b ∈ [−1, 1.5] and compute all resulting equilibria, which we
trace out in the two panels of the figure.
Figures A.3 and A.4 To illustrate Application 6, we set the parameters α = 2, A = 1, θ = 2,
φ = .8 and e1b = 0. Figure A.3 plots the left- and right-hand-side of equation (A.18) for N b = 0.03.
For Figure A.4, we vary N b ∈ [0, 0.22] and compute all resulting equilibria, which we trace out in
the four panels of the figure.




                                                 54
C      Online Appendix
C.1        Equivalence Ramsey and Constrained Social Planner
                                                                                                                  
The optimization problem of a Ramsey planner who has the tax instruments                                   τxi,ω       and τki on
date 0 security purchases and capital investment and agent specific transfers T i is equivalent to
the
 problem         of a constrained social planner who directly chooses the economy’s date 0 allocations
               i,ω
  C0i , K1i , X1 , or equivalently C0i , K1b , N i,ω for i ∈ I and ω ∈ Ω.
                                                    

     The budget constraint that incorporates taxes and transfers faced by agent i at date 0 is
formally given by
                                                    h                   i
                              i    i   i     i i                 i,ω    i,ω
                             c0 + h k1 + τk k1 + E0 m1 + τxω
                                                                       x1 = e0i + T0i

Formally,
        the optimality conditions of agents in a decentralized equilibrium with tax instruments
  τxi,ω and τki are
               

                                    
                          m1ω + τxi,ω λ0i = βλ1i,ω + κ1i Φ1x
                                                          i
                                                             ω   ∀i, ω
                                              h                       i
                       hi0 ki1 + τki λ0i = βE0 λ1i,ω F1i,ω 0 ki,ω 1    + q ω
                                                                                + κ1i Φ1k
                                                                                       i
                                                                                          ,           ∀i
                                                     
Any date 0 allocation             C0i , K1b , X1i,ω
                                     chosen by a social planner can be replicated by a Ramsey
planner who sets the tax instruments

                                      βλ1i,ω κ1i i,ω
                          τxi,ω  =    i
                                         + i Φ1x − m1ω
                                    λ0       λ0
                                      "                                    #
                                           i,ω 
                                        βλ         i,ω 0
                                                         
                                                             i,ω
                                                                             κ1i i        i0
                                                                                                
                             τki = E0      1
                                           i
                                                 F1        k 1     + q ω
                                                                             +   i
                                                                                   Φ 1k − h     ki1
                                         λ0                                    λ0

and who imposes transfers so that the date 0 budget constraints of individual agents are satisfied,
where the state price densities equal the increase in the social planner’s shadow prices on the
                           νω
resource constraint, m1ω = ν10 .28
 Conversely,
               any set of tax instruments and transfers will result in a date 0 allocation
 c0i , ki1 , x1i,ω for i ∈ I and ω ∈ Ω that satisfies the economy’s resource constraints. A constrained
                                                                                                        
social planner can therefore replicate the allocation by setting her date 0 allocation C0i , K1i , X1i,ω
equal to that chosen by decentralized agents under the planner’s optimal tax instruments.

C.2        Welfare Weights and Pareto Improvements
Proposition 1 characterizes constrained efficient allocations for given Pareto weights θ b , θ ` to
                                                                                                

describe the entire Pareto frontier of the economy, but only a subset of these allocations represent
a Pareto improvement over laissez-faire.
   In particular, imposing the optimal tax rates (27) and (28) without using transfers across
borrowers and lenders, i.e. rebating all tax revenue to the set of agents from whom it is obtained,
  28 See   Application 3 and Dávila (2014) for more detailed discussions regarding the role of transfers.

                                                              1
does not guarantee
           n       aoPareto improvement.29 For an example, consider an economy in which the
set of taxes τxi,ω , τki   implements a Pareto efficient allocation. Now assume that we move from
an inefficient set of taxes where one tax rate τ̂xi,ω0 is marginally below its efficient level τxi,ω0 to the
described efficient set of taxes. Since we were close to efficiency, the overall welfare improvement
is second-order, but the change in tax rates leads to a first-order change in equilibrium prices
and a first-order redistribution between sectors. One sector will experience a first-order welfare
gain, the other a first-order loss, implying that the policy change does not generate a Pareto
improvement, even though it moves the economy from an inefficient allocation to a constrained
Pareto efficient allocation.

                                            Ub

                                                         θ


                                                                    θ¯
                                                   DE



                                                                         Uℓ

                                            Figure A.5: Pareto frontier

   To achieve a Pareto improvement, a planner has to pick relative welfare weights θ ` /θ b that
correspond to the region of Pareto improvements, as illustrated by the section on the Pareto
frontier in between the two circles in Figure A.5. Formally, this region is characterized as follows.
Let us normalize θ b = 1 and capture by the fraction θ = θ ` /θ b how we vary the relative welfare
weights on the two sectors. Let the planner solve

                                        max U b         s.t.       U ` ≥ U `,DE

subject to the constraints of problem (24) and assign Lagrange multiplier θ to the constraint
U ` ≥ U `,DE where U i,DE is the welfare of sector i agents in the decentralized equilibrium
allocation. The solution to this optimization problem defines the minimum relative welfare
weight on lenders θ such that lenders are not made worse off by the planner’s intervention.
    Similarly, let the planner solve

                                        max U `         s.t.       U b ≥ U b,DE

subject to the constraints of problem (24) and assign Lagrange multiplier 1/θ̄ to the constraint
U b ≥ U b,DE . This optimization problem defines the maximum relative welfare weight on lenders
θ̄ such that borrowers are not made worse off by the planner’s intervention.
    Then we find following result, stated as a corollary of Propositions 1 and 2.30
  29 Rebating all tax revenue to the set of agents from whom it is obtained replicates the same allocation that would be

obtained if the planner used quantity restrictions on date 0 allocations – therefore our statement on Pareto efficiency
not guaranteeing a Pareto improvement extends to quantity regulations.
  30 It is not generally possible to obtain a simple explicit expression for the transfers required to obtain a

Pareto improvement. However, the planner can approximate the wealth transfer that occurred in response to an
                                                       j,ω
intervention using the marginal distributive effects D N i times the change in sector-wide net worth ∆N i,ω , and use


                                                               2
Corollary 6. (Pareto improvements) If the decentralized equilibrium allocation is constrained
inefficient, then θ < θ̄ and a planner
                                     can achieve a Pareto improvement by imposing any set of relative
welfare weights θ = θ ` /θ b ∈ θ, θ̄ . She can achieve a strict Pareto improvement for any θ in the interior
of the interval. Conversely, if the decentralized equilibrium is constrained efficient, then θ = θ = θ̄
corresponds to the planner’s relative welfare weights for the decentralized equilibrium allocation.


C.3     Generalizations of Baseline Model
This appendix generalizes our baseline model along several dimensions and shows that the
optimal corrective tax formulas (27) and (28) continue to apply. First, we allow for a more general
set of agents with general discount factors and state-contingent utility that can capture subjective
probabilities. Second, we allow for a more general investment and production structure. Finally,
we also allow for a more general specification of financial constraints that now apply to all agents.
Preferences/endowments Assume that there is a set of agents is given by I = {1, ... | I |}. Agents
have heterogeneous preferences, given by
                                        "                   #
                                          2  t         
                                U i = E0 ∑ βi uit cit ; ω                                    (A.19)
                                                       t =0

which allows both for agent-specific discount factors βi and arbitrary time separable utility
functions that may or may not satisfy an Inada condition limc→0 uit0 (c; ω ) = ∞. Since uit (·; ω )
depends on the state of nature, the setup is also able to capture heterogeneous beliefs, i.e. agents
may value consumption in some states of nature more highly because they believe them to be
more likely. We continue to denote agent i endowment at date t given state ω by ei,ω t . As in the
baseline model, consumption must be non-negative, so cit ≥ 0.
Technology Assume that each agent i is initially endowed              with ki0 units of capital and chooses
to create ιi0 capital goods at date 0 at a cost h0i ιi0 , ki0 and invest/disinvest into capital ιi1 at cost
                                                             

h1i ιi1 , ki1 at date 1, where the cost functions satisfy hit 0, kit = 0 and are increasing and convex
                                                                   

in ιit and      decreasing in kit . This formulation nests fixed capital endowments if we assume that
hit ιit , kit = ∞ for ιit 6= 0 for t = 0, 1. It also nests standard quadratic adjustment costs if
             

                                              ϕ ιi
we assume that h1i ιi1 , ki1 = ιi1 1 + 2 k1i , as well as a range of other models of endogenous
                                
                                                   1
investment with and without adjustment costs. We continue to assume that capital fully
depreciates at the end of date 2.
    Regarding production, we assume that type i agents have access to a production technology
given by the function Fti,ω (k ) that is increasing and weakly concave and depends on the agent
type i, the date t, and the state of nature ω. As we discussed in the main text, it is common in
the literature on fire sales to assume that the productivity of capital depends on who owns it and
differs between different agents. This rules out that capital is owned by one agent but rented out
and used in another agent’s production function. A typical justification for this assumption is
agency frictions, i.e. that efficient use of capital requires ownership to ensure proper incentives
(see e.g. Shleifer and Vishny, 1992).
the MRS j,ω to discount this to date 0. If, for example, a macroprudential intervention increases the net worth of sector
                                                                      j,ω
i by ∆N i,ω , this suggests that a date 0 transfer of −E0 [ MRS j,ω D N i ∆N i,ω ] would leave type j agents approximately
indifferent. A similar expression can be obtained for changes in sector-wide capital K1i .


                                                              3
   The budget constraints of type i agents, including tax instruments and transfers,                          which
generalize equations (2) to (4) in the text, are given by
                                                                  
               c0i + h0i ιi0 , ki0 + q0 + τki ki1 − ki0 − ιi0                                                 (A.20)
                                              h                      i              
                                                            i,ω    i,ω
                                         +E0 m1 + τxω
                                                                  x1 = e0 + F0 ki0 + T i
                                                                             i     i
                                                                                            
    c1i,ω + h1i ιi,ω
                   1 , k i
                         1   +  q ω
                                  1   k i,ω
                                        2   − k i
                                                1 − ι i,ω
                                                      1     +  m  ω i,ω
                                                                   x
                                                                  2 2    = e i,ω
                                                                             1   + x ω
                                                                                     1 + F1
                                                                                           i,ω
                                                                                                 ki1 , ∀ω     (A.21)
                                                                                                    
                                                                   c2i,ω = e2i,ω + x2ω + F2i,ω ki,ω2   , ∀ω   (A.22)

Financial constraints We generalize financial constraints along three dimensions. First, we
assume that Φ2i,ω (·) depends directly on the aggregate state variables N ω and K1 , not only
through the date 1 asset price. This more general formulation emphasizes the role played by the
dependence of financial constraints on aggregate state variables and allows for example the bond
price m2ω to enter the constraint. It can similarly capture more general moral hazard and incentive
constraints. Secondly, we assume that Φ1i,ω also depends on the entire vector of future aggregate
state variables N ω and K1 . This formulation allows us to capture date 0 financial constraints
that depend on future date 1 prices, which can be written as a function of these aggregate state
variables. Third, we assume that all agents, not only borrowers, are potentially subject to financial
constraints. Formally, agent i faces vector-valued financial constraints
                                                              
                                         i   i i
                                       Φ 1 x 1 , k 1 ; N , K1 ≥ 0
                                                         ω
                                                                                               (A.23)
                                                              
                                     Φ2i,ω x2i , ki2 ; N ω , K1 ≥ 0, ∀ω                        (A.24)

Equilibrium at dates 1 and 2 Agent i maximizes the generalized utility function (A.19) subject
to the set of budget constraints (A.20), (A.21), (A.22) and the set of financial constraints (A.23)
and (A.24).                                                                                        
                                                                                                  |I|
    As in the baseline model, the vectors N ω = N 1,ω , ...N | I |,ω and K1 = K11 , ...K1 ,
representing aggregate net worth and capital holdings of type i agents, become aggregate state
variables. We continue to index indirect utility by the state ω, to capture the direct effect of the
state on investment opportunities.
    The date 1 continuation utility V i,ω ni , ki1 ; N ω , K1 of type i agents is
                                                              

                                                                             
  i,ω    i,ω i,ω   ω                                  i     i,ω      i i   i,ω
V       n , k 1 ; N , K1 =         max               u1 c1 ; ω + β u2 c2 ; ω s.t. (A.21), (A.22) and (A.24)
                               c1i,ω ≥0,c2i,ω ≥0,x2i,ω ,ιi,ω  i,ω
                                                         1 ,k 2


Date 1 market prices are now functions q1ω ( N ω , K1 ) and m2ω ( N ω , K1 ) of the net worth and capital
holding vectors of all sectors. Agent i date 1 optimality conditions for borrowing/saving and
capital holdings can be expressed as

                                    λ1i,ω m2ω = βi λ2i,ω + κ2i,ω Φ2x i,ω
                                                                      
                                     λ1i,ω q1ω = βi λ2i,ω F2i,ω 0 ki,ω
                                                                   2     + κ2i,ω Φ2k
                                                                                  i,ω


                                                                            ∂hi
The optimality condition for investment is given by q1ω =                        .   Equations (14) and (15) remain
                                                                           ∂ιi,ω
                                                                             1
valid in this more general environment, with the exception that the collateral effects now

                                                                    4
correspond to

                                                                            i,ω         ∂Φ2i,ω
                                                                           CN j :=
                                                                                        ∂N j,ω
                                                                                                                     ∂Φ2i,ω
                                                                           CKi,ωj := F1i,ω 0 (·) C N
                                                                                                   i,ω
                                                                                                     j +                   j
                                                                                                                     ∂K1

Date 0 decentralized equilibrium At date 0, private agents of type i solve the maximization
problem
                        h                                              i
    max    u0i c0i + βi E0 V i,ω x1i,ω + e1i,ω + F1i,ω ki1 , ki1 ; N ω , K1    s.t. (A.20), (A.23)
 c0i ≥0,ιi0 ,ki1 ,x1i,ω

At date 0, agent i optimality conditions can be expressed as
                                           
        m1ω + τxi,ω u0i0 c0i = βi u1i0 c1i,ω ; ω + κ1i Φ1x
                                                        i,ω
                                                            , ∀ω                                                                                                               (A.25)
                                   "                                            !#
                                                                   ∂h i
            q0 + τki u0i0 c0i = E0 βi u1i0 c1i,ω ; ω    F1i,ω 0 ki1 + q1ω − i1     + κ1i Φ1k
                                                                                          i
                                                                                                                                                                               (A.26)
                                                                           ∂k1

                                                                                                                                 ∂hi
The optimality condition for investment is given by q0 + τki =                                                                   ∂i0i
                                                                                                                                      .

Date 0 constrained planner allocation The Lagrangian corresponding to the problem solved
by a constrained planner who leaves date 1 allocations to the market but determines date 0
allocations is given by

                                   n                                              h                                           i                                          o
        L = ∑θ                 i           i
                                      + β E0 V
                                       u           C0i
                                                   N         + η0i C0i         i        i,ω       i,ω
                                                                                                          , K1i ; N ω , K1             + κ1i Φ1i       X1i , K1i ; N ω , K1
                    i
                   h                          i    h             i
             − ν0 ∑ C0 + h0 ι0 , K0 − e0 − F0 K0 − µ0 ∑ K1 − K0 − ι0 − ∑ ν1ω ∑ X1i,ω
                     i    i   i   i      i   i   i       i    i    i
                          i                                                                                    i                                       ω        i

We assign the new shadow price µ0 to the new constraint on capital accumulation. The optimality
conditions of the planner problem are given by

                          dL       i
                                     h  
                                        i0   i     i
                                                     i
                               = θ    u 0  C0  + η 0 − ν0 = 0, ∀i
                          dC0i
                                                                                                                                                j
                          dL                                                                                                            j j ∂Φ1
                                                                                                +∑θ β                      +∑
                                                                 i i                      i,ω                      j,ω
                                       =       −ν1ω          +θ β      Vni,ω   + θ i κ1i Φ1x                j j
                                                                                                                  VN i                 θ κ1             = 0, ∀i, ω
                    dX1i,ω                                                                            j                           j         ∂N i,ω
                          dL                      h       i                           h                        i
                                                                            ∑ 0 Ni 1
                                           i i        i,ω       i i i            j        j,ω i,ω 0    i     j,ω
                               = − µ 0 + θ  β  E0   Vk      + θ  κ  Φ
                                                                   1 1k + β    θ   E    V    F       K 1 + VKi
                          dK1i                                              j
                                                                 j                 j
                                                                                     !
                                                             ∂Φ1 i,ω 0        ∂Φ1
                                        + ∑ θ κ1 ∑
                                                 j j
                                                               i,ω 1
                                                                    F (·) +            = 0, ∀i
                                             j           ω ∂N                 ∂K1i

                                           ∂hi                                                                                                                                     ∂h1i
                                                                                                                                
                        dL
                                                                                                Vni,ω         u1i0       C1i,ω        and Vki,ω = F1i,ω 0 ki1 + qω −
                                                                                                                                                             
Where also              dιi0
                                   =   −ν0 ∂ιi0              + µ0 , and we denote                         =                                                                        ∂ki1
                                                                                                                                                                                        .
                                             0
Rearranging the optimality conditions and the date 1 envelope conditions, we find the analogous

                                                                                                  5
equations to (25) and (26) characterizing constrained efficiency in this more general version

                         ν1ω i                                 θ j j j,ω
                             λ0 = βi λ1i,ω + κ1i Φ1x ω + ∑
                                                  i
                                                                 i
                                                                   β VN i , ∀i, ω             (A.27)
                         ν0                               j∈ I θ
                                      "                                         !#
                        ∂h0i i                                           ∂h i

                           i
                             λ0 = E0 βi λ1i,ω F1i,ω 0 ki1 + qω − i1                           (A.28)
                        ∂i0                                                ∂k1
                                                 θj j     h                          i
                                + κ1 Φ1k + ∑ i β E0 VN i F1
                                   i i                         j,ω i,ω 0    i      j,ω
                                                                           K1 + VKi
                                              j θ
                                                       j                    j
                                                                              !
                                      θj j          ∂Φ1 i,ω 0            ∂Φ1
                                + ∑ i κ1 ∑                F (·) +
                                                      i,ω 1
                                   j θ         ω ∂N                      ∂K1i

    The only difference with the baseline model is a new collateral externality term, capturing the
direct effect of changes in aggregate state variables on the date 1 financial constraints – this is a
straightforward generalization of the results in the text. As in the baseline model, the planner
can set optimal corrective taxes to ensure that the private optimality conditions (A.25) and (A.26)
replicate the planner’s optimality conditions (A.27) and (A.28). Propositions 1 and 2 and all their
implications, including the characterization of optimal corrective taxes in (27) and (28) and the
corollaries, remain valid in this more general environment after accounting for the new collateral
externality term. In the case with I agents, I − 1 differences in MRS are needed to express the
optimal tax wedges as in equations (29) and (30).




                                                       6
