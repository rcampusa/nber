                               NBER WORKING PAPER SERIES




              QUASI-EXPERIMENTAL SHIFT-SHARE RESEARCH DESIGNS

                                          Kirill Borusyak
                                            Peter Hull
                                          Xavier Jaravel

                                        Working Paper 24997
                                http://www.nber.org/papers/w24997


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                    September 2018




We are grateful to Rodrigo Adão, Joshua Angrist, David Autor, Moya Chin, Andy Garin, Ed
Glaeser, Paul Goldsmith-Pinkham, Larry Katz, Michal Kolesár, Gabriel Kreindler, Jack
Liebersohn, Eduardo Morales, Jack Mountjoy, Jörn-Steffen Pischke, Brendan Price, Isaac Sorkin,
Jann Spiess, Itzchak Tzachi Raz, various seminar participants, and five anonymous referees for
helpful comments. We thank David Autor, David Dorn, and Gordon Hanson, as well as Paul
Goldsmith-Pinkham, Isaac Sorkin, and Henry Swift, for providing replication code and data. The
views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2018 by Kirill Borusyak, Peter Hull, and Xavier Jaravel. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.
Quasi-Experimental Shift-Share Research Designs
Kirill Borusyak, Peter Hull, and Xavier Jaravel
NBER Working Paper No. 24997
September 2018, Revised August 2020
JEL No. C18,C21,C26,F16,J21

                                         ABSTRACT

Many studies use shift-share (or “Bartik”) instruments, which average a set of shocks with
exposure share weights. We provide a new econometric framework for shift-share instrumental
variable (SSIV) regressions in which identification follows from the quasi-random assignment of
shocks, while exposure shares are allowed to be endogenous. The framework is motivated by an
equivalence result: the orthogonality between a shift-share instrument and an unobserved residual
can be represented as the orthogonality between the underlying shocks and a shock-level
unobservable. SSIV regression coefficients can similarly be obtained from an equivalent shock-
level regression, motivating shock-level conditions for their consistency. We discuss and
illustrate several practical insights delivered by this framework in the setting of Autor et al.
(2013).

Kirill Borusyak                                 Xavier Jaravel
Drayton House                                   London School of Economics
30 Gordon Street                                Houghton Street
London                                          London
WC1H 0AX                                        WC2A 2AE
United Kingdom                                  UK
k.borusyak@ucl.ac.uk                            x.jaravel@lse.ac.uk

Peter Hull
University of Chicago
5757 South University Avenue
Chicago, IL 60637
and NBER
hull@uchicago.edu




A Replication programs and data is available at https://github.com/borusyak/shift-share
1     Introduction
A large and growing number of empirical studies use shift-share instruments: weighted averages of a
common set of shocks, with weights reflecting heterogeneous shock exposure. In many settings, such
as those of Bartik (1991), Blanchard and Katz (1992) and Autor et al. (2013), a regional instrument
is constructed from shocks to industries with local industry employment shares measuring the shock
exposure. In other settings, researchers may combine shocks across countries, socio-demographic
groups, or foreign markets to instrument for treatments at the regional, individual, or firm level.1
    The claim for instrument validity in shift-share instrumental variable (SSIV) regressions must
rely on some assumptions about the shocks, exposure shares, or both. This paper develops a novel
framework for understanding such regressions as leveraging exogenous variation in the shocks, allowing
the variation in exposure shares to be endogenous. Our approach is motivated by an equivalence result:
the orthogonality between a shift-share instrument and an unobserved residual can be represented as
the orthogonality between the underlying shocks and a shock-level unobservable. Given a first stage, it
follows that the instrument identifies a parameter of interest if and only if the shocks are uncorrelated
with this unobservable, which captures the average unobserved determinants of the original outcome
among observations most exposed to a given shock. SSIV regression coefficients can similarly be
obtained from an equivalent IV regression estimated at the level of shocks. In this regression the
outcome and treatment variables are first averaged, using exposure shares as weights, to obtain shock-
level aggregates. The shocks then directly instrument for the aggregated treatment. Importantly,
these equivalence results only rely on the structure of the shift-share instrument and thus apply to
outcomes and treatments that are not typically computed at the level of shocks.
    We use these equivalence results to derive two conditions sufficient for SSIV consistency. First,
we assume shocks are as-good-as-randomly assigned as if arising from a natural experiment. This
is enough for the shift-share instrument to be valid: i.e. for the shocks to be uncorrelated with the
relevant unobservables in expectation. Second, we assume that a shock-level law of large numbers
applies—that the instrument incorporates many sufficiently independent shocks, each with sufficiently
small average exposure. Instrument relevance further holds when individual units are mostly exposed
to only a small number of shocks, provided those shocks affect treatment. Our two quasi-experimental
conditions are similar to ones imposed in other settings where the underlying shocks are directly used
as instruments, bringing SSIV to familiar econometric territory.2
    1 Observations in shift-share designs may, for example, represent regions impacted by immigration shocks from

different countries (Card 2001; Peri et al. 2016), firms differentially exposed to foreign market shocks (Hummels et
al. 2014; Berman et al. 2015), product groups purchased by different types of consumers (Jaravel 2019), groups of
individuals facing different national income trends (Boustan et al. 2013), or countries differentially exposed to the U.S.
food aid supply shocks (Nunn and Qian 2014). We present a taxonomy of existing shift-share designs, and how they
relate to our framework, in Section 6.1.
    2 For example, Acemoglu et al. (2016) study the impact of import competition from China on U.S. industry employ-

ment using industry (i.e. shock-level) regressions with shocks constructed similarly to those underlying the regional
shift-share instrument used in Autor et al. (2013). Our framework shows that both studies can rely on similar econo-
metric assumptions, though the economic interpretations of the estimates differ.



                                                            1
    We extend our quasi-experimental approach to settings where shocks are as-good-as-randomly
assigned only conditionally on shock-level observables, to SSIVs with exposure shares that do not add
up to a constant for each observation, and to panel data. For conditional random assignment, we show
that quasi-experimental shock variation can be isolated with regression controls that have a shift-share
structure. Namely, it is enough to control for an exposure-weighted sum of the relevant shock-level
confounders. Relatedly, in SSIVs with “incomplete shares,” where the sum of exposure shares varies
across observations, it is important to control for the sum of exposure shares as the exposure-weighted
sum of a constant. In panel data, we show that the SSIV estimator can be consistent both with
many shocks per period and with many periods. We also show that unit fixed effects only isolate
variation in shocks over time when exposure shares are time-invariant. In other extensions we show
how SSIV with multiple endogenous variables can be viewed quasi-experimentally and how multiple
sets of quasi-random shocks can be combined with new overidentified shock-level IV procedures.
    Our framework also bears practical tools for SSIV inference and testing.Adão et al. (2019) show
that conventional standard errors in SSIV regressions may be invalid because observations which simi-
lar exposure shares are likely to have correlated residuals. They are also the first to propose a solution
to this inference problem in a framework based on ours, with identifying variation in shocks. We
present a convenient alternative based on our equivalence result: estimating SSIV coefficients at the
level of identifying variation (shocks) can yield asymptotically valid standard errors. The validity of
this solution requires an additional assumption on the structure of the included controls (producing
standard errors that are typically conservative otherwise). However, it offers several practical fea-
tures: it can be implemented with standard statistical software, extended to various forms of shock
dependence (e.g. autocorrelation), and computed in some settings where the estimator of Adão et
al. (2019) fails (e.g. when there are more shocks than observations). Appropriate measures of first-
stage relevance and valid falsification tests of shock exogeneity can also be obtained with conventional
shock-level procedures. Monte-Carlo simulations confirm the accuracy of our asymptotic approxima-
tions in moderately-sized samples of shocks, and that the finite-sample properties of SSIV are similar
to those of conventional shock-level IV regressions which use the same shocks as instruments.
    We illustrate the practical insights from our framework in the setting of Autor et al. (2013),
finding supporting evidence for the interpretation of their SSIV as leveraging quasi-random variation
in industry-specific Chinese import shocks. This application uses a new Stata package, ssaggregate,
which we have developed to help practitioners implement the appropriate shock-level analyses.3
    Our quasi-experimental approach is not the only framework for SSIV identification and consistency.
In related work, Goldsmith-Pinkham et al. (2020) formalize a different approach based on the exo-
geneity of the exposure shares, imposing no explicit assumption of shock exogeneity. This framework
   3 This Stata package creates the shock-level aggregates used in the equivalent regression. Users can install this

package with the command ssc install ssaggregate. See the associated help file and this paper’s replication archive at
https://github.com/borusyak/shift-share for more details.



                                                          2
is motivated by a different equivalence result: the SSIV coefficient also coincides with a generalized
method of moments estimator, with exposure shares as multiple excluded instruments. Though ex-
posure exogeneity is a sufficient condition for identification (and, as such, implies our shock-level
orthogonality condition), we focus on plausible conditions under which it is not necessary.
   Identification via exogenous shocks is attractive in many SSIV settings. Consider the Autor et al.
(2013; hereafter ADH) shift-share instrument, which combines industry-specific changes in Chinese
import competition (the shocks) with local exposure given by the lagged industrial composition of
U.S. regions (the exposure shares). In such a setting, exogeneity of industry employment shares is
difficult to justify a priori since unobserved industry shocks (e.g., automation or innovation trends)
are likely to affect regional outcomes through the same mixture of exposure shares. Our approach,
in contrast, allows researchers to specify a set of shocks that are plausibly uncorrelated with such
unobserved factors. Consistent with this general principle, ADH attempt to purge their industry
shocks from U.S.-specific confounders by measuring Chinese import growth outside of the United
States. Similarly, Hummels et al. (2014) combine country-by-product changes in transportation costs
to Denmark (as shocks) with lagged firm-specific composition of intermediate inputs and their sources
(as shares). They argue these shocks are “idiosyncratic,” which our approach formalizes as “indepen-
dent from relevant country-by-product unobservables.” Other recent examples of where our approach
may naturally apply are found, for example, in finance (Xu 2019), the immigration literature (Peri
et al. 2016), and studies of innovation (Stuen et al. 2012).
   In other shift-share designs, a researcher can think of quasi-experimental shocks but they are
not observed directly, and the construction of the instrument requires an initial step where these
shocks are estimated in-sample, potentially introducing biases. In the canonical estimation of regional
labor supply elasticities by Bartik (1991), for example, the shocks are measured as national industry
growth rates. Such growth captures national industry labor demand shocks, which one may be willing
to assume are as-good-as-randomly assigned across industries; however, industry growth rates also
depend on unobserved regional labor supply shocks. We show that our framework can still apply to
such settings by casting the industry employment growth rates as noisy estimates of latent quasi-
experimental demand shocks and establishing conditions to ensure the supply-driven estimation error
is asymptotically ignorable. These conditions are weaker if the latent shocks are estimated as leave-one-
out averages. Although leave-one-out shift-share IV estimates do not have a convenient shock-level
representation, we provide evidence that in the Bartik (1991) setting this leave-out adjustment is
unimportant.
   Formally, our approach to SSIV relates to the analysis of IV estimators with many invalid instru-
ments by Kolesar et al. (2015). Consistency in that setting follows when violations of individual instru-
ment exclusion restrictions are uncorrelated with their first-stage effects. For quasi-experimental SSIV,
the exposure shares can be thought of as a set of invalid instruments (per the Goldsmith-Pinkham et



                                                   3
al. (2020) interpretation), and our orthogonality condition requires their exclusion restriction violations
to be uncorrelated with the shocks. Despite this formal similarity, we argue that shift-share identi-
fication is better understood through the quasi-random assignment of a single instrument (shocks),
rather than through a large set of invalid instruments (exposure shares) that nevertheless produce a
consistent estimate. This view is reinforced by our equivalence results, yields a natural shock-level
identification condition, and suggests new validations and extensions of SSIV.
    Our analysis also relates to other recent methodological studies of shift-share designs, including
those of Jaeger et al. (2018) and Broxterman and Larson (2018). The former highlights biases of SSIV
due to endogenous local labor market dynamics, and we show how their solution can be implemented
in our setting. The latter studies the empirical performance of different shift-share instrument con-
structions. As discussed above we also draw on the inferential framework of Adão et al. (2019), who
derive valid standard errors in shift-share designs with a large number of idiosyncratic shocks. More
broadly, our paper adds to a growing literature studying the causal interpretation of common re-
search designs, including work by Borusyak and Jaravel (2017) and Goodman-Bacon (2018) for event
study designs; Hudson et al. (2017) and Chaisemartin and D’Haultfoeuille (2019) for instrumented
difference-in-difference designs; and Hull (2018) for mover designs.
    The remainder of this paper is organized as follows. Section 2 introduces the environment, derives
our equivalence results, and motivates our approach to SSIV identification and consistency. Section
3 establishes the baseline quasi-experimental assumptions and Section 4 derives various extensions.
Section 5 discusses shock-level procedures for valid SSIV inference and testing. Section 6 summarizes
the types of empirical settings where our framework may be applied and illustrates its practical
implications in the ADH setting. Section 7 concludes.



2     Setting and Motivation
We begin by presenting the SSIV setting and motivating our approach to identification and consistency
with two equivalence results. We first show that population orthogonality of the shift-share instrument
can be recast at the shock level, motivating identification by exogenous shocks when exposure shares
are endogenous. We then derive a similar shock-level equivalence result for the SSIV estimator,
motivating its consistency with many as-good-as-randomly assigned shocks.


2.1    The Shift-Share IV Setting

We observe an outcome y` , treatment x` , control vector w` (which includes a constant) and shift-share
instrument z` for a set of observations ` = 1, . . . , L. We also observe a set of regression weights e` > 0




                                                     4
                            1
       P
with     ` e`   = 1 (e` =   L   covers the unweighted case). The instrument can be written as

                                                                 X
                                                         z` =          s`n gn ,                                                (1)
                                                                  n


for a set of observed shocks gn , n = 1, . . . , N , and a set of observed shares s`n ≥ 0 defining the
exposure of each observation ` to each shock n.4 Initially we assume the sum of these exposure
                                                  P
weights is constant across observations, i.e. that n s`n = 1; we relax this assumption in Section
4.2. Although our focus is on shift-share IV, we note that the setup nests shift-share reduced-form
regressions, of y` on z` and w` , when x` = z` .
    We seek to estimate the causal effect or structural parameter β in a linear model of


                                                    y` = βx` + w`0 γ + ε` ,                                                    (2)


where the residual ε` is defined to be orthogonal with the control vector w` .5 For example, we might
be interested in estimating the inverse labor supply elasticity β from observations of log wage growth
y` and log employment growth x` across local labor markets `.6 The residual ε` in equation (2) would
then contain all local labor supply shocks, such as those arising from demographic, human capital, or
migration changes, that are not systematically related to the observed controls in w` . To estimate this
β we may use an instrument capturing local labor demand variation. For illustration, we consider a
z` based on new government subsidies gn to the output of different industries n and with s`n denoting
location `’s lagged shares of industry employment. In estimating β we may weight observations by
the overall lagged regional employment, e` . We return to this labor supply example at several points
to ground the following theoretic discussion.
    It is worth highlighting that in studying this setting we do not impose a typical assumption
of independent and identically-distributed (iid ) data {e` , z` , w` , x` , ε` }, as might arise from random
sampling of potential observations. Relaxing the usual iid assumption is required for us to treat the gn
as random variables, which generate dependencies of the instrument (1) across observations exposed
to the same random shocks. The non-iid setting further allows for unobserved common shocks, which
may generate dependencies in the residual ε` .
    Given this non-iid setting, we consider IV identification of β by the full-data moment condition
                                                         "               #
                                                             X
                                                     E           e` z` ε` = 0.                                                 (3)
                                                             `
   4 In practice shift-share instruments are sometimes presented differently, as footnote 38 below illustrates in the Autor

et al. (2013) setting. We recommend that researchers follow the representation in (1) to apply our theoretical results.
   5 Formally, given a linear causal or structural model of y = βx +  we define γ = E                        0 −1 E
                                                                                                P                  P           
                                                               `        `    `                       ` e` w` w`        ` e` w` `
and ε` = ` − w`0 γ as the residual from this population projection, satisfying E
                                                                                       P           
                                                                                          ` e` w` ε` = 0. Defining a unique γ
                                                                     0 is of full rank, which holds when there is no perfect
                                                     P               
requires an implicit maintained assumption that E        ` e ` w ` w`
collinearity in the control vector.
   6 We consider models with heterogeneous treatment effects in Appendix A.1; see footnote 15 for a summary.




                                                                   5
This condition captures the orthogonality of the shift-share instrument with the second-stage residual,
in expectation over realizations of {e` , z` , ε` } for all ` = 1, . . . , L. When such orthogonality holds the β
parameter is identified: i.e., uniquely recoverable from observable moments, provided the instrument
has a first stage.7 The full-data orthogonality condition generalizes the conventional condition of
E [z` ε` ] = 0, which might be considered in an iid setting with fixed e` .
    The moment condition (3) yields a natural estimator of β: the coefficient on x` in an IV regression
of y` which instruments by z` , controls for w` , and weights by e` . By the Frisch-Waugh-Lovell theorem,
this SSIV estimator can be represented as a bivariate IV regression of outcome and treatment residuals,
or as the ratio of e` -weighted sample covariances between the instrument and the residualized outcome
and treatment:
                                                               e` z` y`⊥
                                                            P
                                                       β̂ = P`         ⊥
                                                                         ,                                                     (4)
                                                             ` e` z` x`

where v`⊥ denotes the residual from an e` -weighted sample projection of a variable v` on the control
vector w` . Note that by the properties of residualization, it is enough to residualize y` and x` without
also residualizing the shift-share instrument z` .
    In our non-iid setting, we study consistency and other asymptotic properties of β̂ by considering
a sequence of data-generating processes, indexed by L, for the complete data {e` , s`n , gn , w` , x` , ε` },
                                                                                                                         p
for ` = 1, . . . , L, n = 1 . . . , N , and N = N (L). Consistency, for example, is defined as β̂ → β as
L → ∞ along this sequence. We do not employ conventional sampling-based asymptotic sequences
(and corresponding laws of large numbers) as these are generally inappropriate in a non-iid setting
where both z` and ε` may exhibit non-standard mutual dependencies. It is worth emphasizing that
any assumptions on the data-generating sequence are useful only to approximate the finite-sample
distribution of the SSIV estimator, not to define an actual process for realizations of the data. For
example, we will consider below a sequence in which the number of shocks N grows with L, recognizing
that in reality shift-share instruments are constructed from a fixed set of shocks (e.g. subsidies across
all industries) along with a fixed number of observations (e.g. all local labor markets). The assumption
of growing N should here be interpreted as a way to capture the presence of a large number of shocks
in a given set of observations, such that the asymptotic sequence provides a good approximation to
the observed data.8


2.2      A Shock-Level Orthogonality Condition

We first build intuition for our approach to satisfying the IV moment condition by showing that
the structure of the shift-share instrument allows equation (3) to be rewritten as condition on the
   7 Formally,                                                                                      0 0              0
                                                                                      P                                 
                 when equation (3) holds the moment condition m(b, c) ≡ E               ` e` (z` , w` ) (y` − bx` − w` c) = 0 has a
                                                      0  0       0
                                       P                           
unique solution of (β, γ), provided E     ` e` (z` , w` ) (x` , w` ) is of full-rank.
    8 This is similar to how Bekker (1994) uses a non-standard asymptotic sequence to analyze IV estimators with many

instruments: “The sequence is designed to make the asymptotic distribution fit the finite sample distribution better. It
is completely irrelevant whether or not further sampling will lead to samples conforming to this sequence” (p. 658).



                                                                6
orthogonality of shocks gn . Namely, by exchanging the order of summation across ` and n, we obtain
                            "               #   "                          #     "            #
                             X                   X           X                    X
                        E        e` z` ε` = E           e`       s`n gn ε` = E         sn gn ε̄n = 0,                     (5)
                             `                     `         n                     n

                                                        P
                                                          ` e` s`n ε`
                             P
where we define sn =             ` e` s`n   and ε̄n =   P             .   Just as the left-hand side of this expression
                                                           ` e` s`n

captures the orthogonality of the instrument z` with the residual ε` when weighted by e` , the right-
hand side captures the orthogonality of shocks gn and ε̄n when weighted by sn . Since these two
expressions are equivalent, equation (5) shows that such shock orthogonality is necessary and sufficient
condition for the orthogonality of the shift-share instrument. As with e` , the shock-level weights are
                                         P          P     P
also non-negative and sum to one, since n sn = ` e` ( n s`n ) = 1. The shock-level unobservables
ε̄n represent exposure-weighted averages of the residuals ε` .
    The labor supply example is useful for unpacking this first equivalence result. When s`n are
lagged employment shares and e` are similarly lagged regional employment weights, the sn weights
are proportional to the lagged industry employment.9 Moreover, with ε` capturing unmeasured supply
shocks, ε̄n is the average unobserved supply shock among regions ` that are the most specialized in
industry n, in terms of their lagged employment e` s`n . Equation (5) then shows that for the shift-
share instrument z` to identify the labor supply elasticity β, the industry demand shocks gn must be
orthogonal with these industry-level unobservables when weighted by industry size. For example, the
industries which see higher output subsidies should not face systematically different unobserved labor
supply conditions (e.g., migration patterns) in their primary markets.
    Shock orthogonality is a necessary condition for SSIV identification and is satisfied when, as in
the preferred interpretation of Goldsmith-Pinkham et al. (2020), the exposure shares are exogenous,
the data are iid, and the shocks are considered non-random.10 In practice, however, this approach to
SSIV identification may be untenable in many settings. In our labor supply example, the Goldsmith-
Pinkham et al. (2020) approach to identification requires the (lagged) local employment share of each
industry to be a valid instrument in the labor supply equation, i.e. uncorrelated with all unobserved
labor supply shocks. This assumption is unlikely to hold: changes in foreign immigration, for example,
are a type of a local labor supply shock which is likely related to the local industry composition (e.g.,
new immigrants may prefer to settle in areas with larger clusters of specific industries, such as high-
tech, even conditionally on the prevailing wage). Formally, whenever the second-stage error term has
                                              P
a component with the shift-share structure, n s`n νn for unobserved shocks νn , then the exposure
shares will be mechanically endogenous (see Appendix A.3 for a proof).11
   9 Without                                 1
              regression weights (i.e. e` = L   ), sn is instead the average
                                                                          Pemployment   share
                                                                                           P of P industry n across locations.
  10 Formally, in this framework E [e` s`n ε` ] = 0 for each (`, n), so E    n sn gn ε̄n =   n gn   ` E [e` s`n ε` ] = 0.
  11 In the immigration example, ν is positive in high-tech industries and negative in industries that do not attract
                                      n
immigrants. Note that the same argument applies to migration flows within the U.S., which can similarly make local
labor supply shocks related to local industry composition. Lagging local employment shares does not alleviate these
threats to identification in general.




                                                                 7
   When shares are endogenous, equation (5) suggests that identification may instead follow from the
exogeneity of shocks. We formalize this approach in Section 3.1, by specifying a quasi-experimental
design in which the gn are as-good-as-randomly assigned with respect to the other terms in the
expression. We show how this simple exogeneity can be relaxed with controls in Section 3.2.


2.3      Estimator Equivalence

We next build intuition for our approach to SSIV consistency by showing that the estimate β̂ is
equivalently obtained as the coefficient from a non-standard shock-level IV procedure, in which gn
directly serves as the instrument. This equivalence result suggests that the large-sample properties of
β̂ can be derived from a law of large numbers for the equivalent shock-level regression. An attractive
feature of this approach is that it does not rely on an assumption of iid observations, which can be
untenable in the presence of observed and unobserved n-level shocks. We instead place assumptions
on the assignment of the equivalent IV regression’s instrument gn , similar to a more standard analysis
of a randomized treatment in an experimental settings (Abadie et al. 2019).
   Formally, we have the following equivalence result:

Proposition 1 The SSIV estimator β̂ equals the second-stage coefficient from a sn -weighted shock-
               level IV regression that uses the shocks gn as the instrument in estimating


                                                            ȳn⊥ = α + β x̄⊥     ⊥
                                                                           n + ε̄n .                                   (6)


Proof By definition of z` ,

                                                                         ⊥
                            P        P            ⊥
                                                      P      P                P           ⊥
                              ` e` (  n s`n gn ) y`     n gn   ` e` s`n y`       n sn gn ȳn
                       β̂ = P       P             ⊥
                                                    = P      P           ⊥
                                                                            = P           ⊥
                                                                                             .                         (7)
                             ` e` (   n s`n gn ) x`    n gn   ` e` s`n x`       n sn gn x̄n


                            ⊥                           ⊥                 ⊥
                                                                              = 0, since y`⊥ is an e` -weighted regression
                 P                  P          P                P
Furthermore          n sn ȳn   =   ` e`   (   n s`n ) y`   =       ` e` y`

                            = 1. This and an analogous equality for x̄⊥
                 P
residual and        n s`n                                             n imply that (7) is a ratio of sn -

weighted covariances, of ȳn⊥ and x̄⊥
                                    n with gn . Hence it is obtained from the specified IV regression.


As with equation (5), Proposition 1 exploits the structure of the instrument to exchange orders of
summation in the expression for the SSIV estimator (4). This exchange shows that SSIV estimates can
also be thought to arise from variation across shocks, rather than across observations. The equivalent
IV regression uses the shocks gn directly as the instrument and shock-level aggregates of the original
(residualized) outcome and treatment, ȳn⊥ and x̄⊥                   ⊥
                                                 n . Specifically, ȳn reflects the average residualized

outcome of the observations most exposed to the nth shock, while x̄⊥
                                                                   n is the same weighted average of

residualized treatment. The regression is weighted by sn , representing each shock’s average exposure
across the observations.12
 12 In   the special case of reduced-form shift-share regressions, Proposition 1 shows that the equivalent shock-level


                                                                8
    The fact that shift-share estimates can be equivalently obtained by a shock-level IV procedure
suggests a new approach to establishing their consistency. Generally, IV regressions of the form of (7)
will be consistent when the instrument (here, gn ) is as-good-as randomly assigned, there is a large the
number of observations (here, N ), the importance weights are sufficiently dispersed (here, that the sn
are not too skewed), and there is an asymptotic first stage. Consistency is then guaranteed regardless
of the correlation structure of the residuals ε̄⊥
                                                n , and thus in the primitive residuals ε` and exposure

shares s`n . We formalize this approach below.
    Before proceeding, it is worth emphasizing that Proposition 1 is a motivating algebraic result
and that the equivalent shock-level IV regression does not have independent economic content. Its
outcome and treatment are unconventional shock-level objects which can, for example, be computed
for outcomes and treatment that are not typically observed at the level of the shocks, such as when
n indexes industries and y` measures regional marriage rates (Autor et al. 2019). Furthermore, even
if the outcome and treatment have natural measures at the shock level, ȳn and x̄n will generally not
coincide with them. For example, in the labor supply setting ȳn is not industry n’s wage growth;
rather, it measures the average wage growth in regions where industry n employs the most workers.
Thus, while β̂ can be computed at the industry level it does not lose its interpretation as a regional
SSIV estimate. In the labor supply setting, the shift-share regression estimates the elasticity of
regional, rather than industry, labor supply.13



3     A Quasi-Experimental SSIV Framework
We now show how SSIV identification and consistency can be satisfied by a quasi-experiment in which
shocks are as-good-as-randomly assigned, mutually uncorrelated, large in number, and sufficiently
dispersed in terms of their average exposure. Instrument relevance generally holds in such settings
when the exposure of individual observations tends to be concentrated in a small number of shocks,
and when those shocks affect treatment. We then show how this framework is naturally generalized
to settings in which shocks are only conditionally quasi-randomly assigned or exhibit some forms of
mutual dependence, such as clustering.


3.1     Quasi-Randomly Assigned and Mutually Uncorrelated Shocks

Our approach to SSIV consistency is based on a thought experiment in which the shocks gn are as-
good-as-randomly assigned conditional on the shock-level unobservables ε̄n and exposure weights sn .
                                          ⊥ on the transformed shift-share instrument z̄ ⊥ , again instrumented by g and
procedure is still an IV regression, of ȳn                                             n                           n
weighted by sn .
  13 In Appendix A.2 we develop a stylized model to illustrate how the SSIV coefficient can differ from a “native” shock-

level IV coefficient in the presence of local spillovers or treatment effect heterogeneity, though both parameters may
be of interest. Intuitively, in the labor supply case one may estimate a low regional elasticity but a high elasticity of
industry labor supply if, for example, migration is constrained but workers are mobile across industries within a region.




                                                           9
As motivated above, placing assumptions on this assignment process (rather than on the sampling
properties of observations) has two key advantages. First, we do not rely on conventional assumptions
of independent or clustered data which are generally inconsistent with the shift-share data structure
when the shocks are considered random variables. Second, in conditioning on ε̄ = {ε̄n }n and s = {sn }n
we place no restrictions on the dependence between the s`n and ε` , allowing shock exposure to be
endogenous. We first show that such endogeneity need not pose problems for SSIV identification:

Proposition 2 The SSIV moment condition (3) is satisfied by the following condition:

Assumption 1 (Quasi-random shock assignment): E [gn | ε̄, s] = µ, for all n.
                                                                 P                  P
Proof By equation (5) and the law of iterated expectations, E [ ` e` z` ε` ] = E [ n sn gn ε̄n ] = µ ·
   P                                                 P                 P
E [ n sn ε̄n ] under Assumption 1. Furthermore, since ` s`n = 1 and E [ ` e` ε` ] = 0 by construction,
   P                 P         P
E [ n sn ε̄n ] = E [( n s`n ) ( ` e` ε` )] = 0.

Proposition 2 shows that the shift-share instrument is valid, in that the IV moment condition (3)
holds, when the underlying shocks are as-good-as-randomly assigned: each gn has the same mean µ,
regardless of the realizations of the relevant unobservables ε̄ (and average exposures s). In the labor
supply example this assumption would mean that industry subsidies should not have been chosen
strategically, based on labor supply trends, or in a way that systematically favors certain industries
(e.g. only those in the manufacturing sector).14
    It follows from Proposition 2 that β is identified by Assumption 1 provided the instrument is
relevant.15 In practice, the existence of a non-zero first stage can be inferred from the data; we discuss
appropriate inferential techniques in Section 5. To illustrate how such instrument relevance might hold
with quasi-experimental shocks, we consider a simple first-stage model. Consider a setting without
controls (w` = 1) and where treatment is a share-weighted average of shock-specific components:
     P
x` = n s`n x`n , where x`n = π`n gn + η`n with π`n ≥ π̄ almost surely for some fixed π̄ > 0. In line
with Assumption 1, suppose that the shocks are independent mean-zero, given the full set of exposure
shares s`n and regression weights e` and the full set of π`n and η`n , with variances that are bounded
below by some fixed σ̄g2 > 0. Then the instrument first stage is positive:

                         "             #         "                                 !                            !#
                             X                       X            X                      X
                     E           e` z` x` = E             e`           s`n gn                 s`n (π`n gn + η`n )
                             `                       `             n                      n
                                                          "                        #
                                                              X        X
                                           ≥   π̄σ̄g2 E           e`        s2`n       > 0.                            (8)
                                                              `        n
  14 While we use output subsidies as g
                                         n in our idealized example, other shocks to industry labor demand can be
similarly considered. Differences in import tariffs across industries, for example, have been used as identifying variation
both directly (e.g. Fajgelbaum et al. (2020)) and in shift-share settings (e.g. by Kovak (2013) who argues that tariff
changes are uncorrelated with counterfactual industry performance).
  15 Appendix A.1 shows how SSIV identifies a convex average of heterogeneous treatment effects (varying potentially

across both ` and n) under a stronger notion of as-good-as-random shock assignment and a first-stage monotonicity
condition. This can be seen as generalizing both the IV identification result of Angrist et al. (2000) to shift-share
instruments, as well as the reduced-form shift-share identification result in Adão et al. (2019).


                                                                       10
    Given identification, SSIV consistency follows from an appropriate law of large numbers. Motivated
by the estimator equivalence in Section 2.3, we consider settings in which the effective sample size of
the shock-level IV regression (6) is large and the observations of the effective instrument (shocks) are
mutually uncorrelated:

                                                                            → 0 and Cov [gn , gn0 | ε̄, s] = 0 for all (n, n0 )
                                                             P     2
                                                                        
Assumption 2 (Many uncorrelated shocks): E                       n sn

              with n0 6= n.

The first part of Assumption 2 states that the expected Herfindahl index of average shock exposure,
  P 2 
E    n sn , converges to zero as L → ∞. This condition implies that the number of observed shocks

grows with the sample (since n s2n ≥ 1/N ), and can be interpreted as requiring a large effective sam-
                             P

ple for the equivalent shock-level IV regression. An equivalent condition is that the largest importance
weight in this regression, sn , becomes vanishingly small.16 The second part of Assumption 2 states
that the shocks are mutually uncorrelated given the unobservables and sn . Both of these conditions,
while novel for SSIV, would be standard assumptions to establish the consistency of a conventional
shock-level IV estimator with gn as the instrument and sn weights.
    Assumptions 1 and 2 are the baseline assumptions of our quasi-experimental framework. Given
a standard relevance condition and additional regularity conditions listed in Appendix B.1, they are
sufficient to establish SSIV consistency:17

                                                                                     ⊥ p
                                                                     P
Proposition 3 Suppose Assumptions 1 and 2 hold,                             ` e` z` x` −
                                                                                       →   π with π 6= 0, and Assumptions
                                          p
              B1-B2 hold. Then β̂ −
                                  → β.

Proof See Appendix B.1.

As before, the relevance condition merits further discussion. In our simple first-stage model, ` e` z` x⊥
                                                                                               P
                                                                                                         `
                 P
converges to E [ ` e` z` x` ] under appropriate regularity conditions, which is bounded above zero by a
                         P        P 2 
term proportional to E        ` e`  n s`n . Thus, in this case, SSIV relevance holds when the e` -weighted

average of local exposure Herfindahl indices n s2`n across observations does not vanish in expectation.
                                               P

In our running labor supply example, where x`n is industry-by-region employment growth, SSIV
relevance generally arises from individual regions ` tending to specialize in a small number of industries
n, provided subsidies have a non-vanishing effect on local industry employment.18 Compare this to
  16 Goldsmith-Pinkham et al. (2020) propose a different measure of the importance of a given n, termed “Rotemberg

weights.” In Appendix A.4 we show the formal connection between sn and these weights, and that the latter do not
carry the sensitivity-to-misspecification interpretation as they do in the exogenous shares view of Goldsmith-Pinkham
et al. (2020). Instead, the Rotemberg weight of shock n measures the leverage of n in the equivalent shock-level IV
regression from Proposition 1. Shocks may have large leverage either because of large sn , as would be captured by the
Herfindahl index, or because the shocks have a heavy-tailed distribution which is allowed by Assumption 2.
  17 One high-level condition used in Proposition 3 (Assumption B2) is that the control coefficient γ is consistently
                                                       0 −1
                                            P              P
estimated by its sample analog, γ̂ =          ` e` w` w`        ` e` w` ` (see footnote 5). We discuss sufficient conditions for
this assumption in Appendix A.5.
  18 Note that this precludes consideration of an asymptotic sequence where L remains finite as N grows. With L
                                                          P 2 P 2                                        P           
(and also e1 , . . . , eL ) fixed, Assumption 2 implies    ` e` E     n s`n → 0 and thus Var [z` ] = Var        n s`n gn → 0 for
each ` if Var [gn ] is bounded. If the instrument has asymptotically no variation it cannot have a first stage, unless
the π`n grow without bound. This result also highlights the role of picking the shares which reflect the impact of


                                                               11
the Herfindahl condition in Assumption 2, which instead states that the average shares of industries
across locations become small. Both conditions may simultaneously hold when most regions specialize
in a small number of industries, differentially across a large number of industries.19


3.2     Conditional Shock Assignment and Weak Shock Dependence

Proposition 3 establishes SSIV consistency when shocks have the same expectation across n and are
mutually uncorrelated, but both requirements are straightforward to relax. We next provide extensions
that allow the shock expectation to depend on observables and for weak mutual dependence (such as
clustering or serial correlation) of the residual shock variation.
    We first relax Assumptions 1 and 2 to only hold conditionally on a vector of shock-level observables
qn (that includes a constant). For example, it may be more plausible that shocks are as-good-as-
randomly assigned within a set of observed clusters c(n) ∈ {1, . . . , C} with non-random cluster-average
shocks, in which case qn collects C − 1 cluster dummies and a constant. In the labor supply example,
this may allow output subsidies to vary systematically across the agriculture, manufacturing, and
service sectors, but be as-good-as-random within each of those sectors. In general, with q = {qn }n ,
we consider the following weakened version of Assumption 1:

Assumption 3 (Conditional quasi-random shock assignment): E [gn | ε̄, q, s] = qn0 µ, for all n.

Similarly, we consider a weakened version of Assumption 2 which imposes mutual uncorrelatedness
on the residual g̃n = gn − qn0 µ:
                                                                       P     2
                                                                                  
Assumption 4 (Many uncorrelated shock residuals): E                        n sn       → 0 and Cov [g̃n , g̃n0 | ε̄, q, s] = 0
              for all (n, n0 ) with n0 6= n.

In the shock cluster example, Assumption 4 applies with a small number of clusters, each with its
own random effect, as in that case a law of large numbers may apply to the within-cluster residuals
g̃n but not the original shocks gn .
   By a simple extension of the proof to Proposition 3, the SSIV estimator is consistent when these
                                                                                    P
conditions replace Assumptions 1 and 2 and the residual shift-share instrument z̃` = n s`n g̃n replaces
z` . While this instrument is infeasible, since µ is unknown, the following result shows that SSIV
                                                                                         P
regressions that control for the exposure-weighted vector of shock-level controls, w̃` =   n s`n qn ,

provide a feasible implementation:
gn onP x` . Here when the shares are misspecified, i.e. when the treatment     is constructed
                                                                              P     P         from
                                                                                                   different shares s̃`n as
x` =      n s̃`n x`n , the first-stage is bounded by a term proportional to E    ` e` n s`n s̃`n , which can be arbitrarily
                    P      P 2 
small even if E        ` e`   n s̃`n 6→ 0.
  19 As an extreme example, suppose each region specializes on one industry only: s
                                                                                         `n = 1 [n = n(`)] for some n(`).
Then the average local concentration index ` e` n s2`n equals one, while Assumption 2 holds when national industry
                                                 P    P
composition is asymptotically dispersed: for example, when e` = 1/L and n(`) is drawn iid across regions and uniformly
over 1, . . . , N .




                                                            12
                                                                    ⊥ p
                                                        P
Proposition 4 Suppose Assumptions 3 and 4 hold,            ` e` z` x` −
                                                                      →   π with π 6= 0, and Assumptions
                                     p
            B1-B2 hold. Then β̂ −
                                → β provided w̃` is included in w` .

Proof See Appendix B.1.
                                                                                       P
This result highlights a special role of controls with a shift-share structure (i.e.    n s`n qn ):   besides
removing confounding variation from the residual (as any w` would do), they can also be viewed
as removing such variation directly from the shocks (i.e. implicitly using g̃n in place of gn ). In
particular, Proposition 4 shows that controlling for each observation’s individual exposure to each
        P
cluster n s`n 1 [c (n) = c] isolates the within-cluster variation in shocks. This allows for a thought
experiment in which shocks are drawn quasi-randomly only within observed clusters, but not across
clusters with potentially different shock means. Note that Proposition 3 is obtained as a special case
of Proposition 4, which sets qn = 1.
    Even conditional on observables, mutual shock uncorrelatedness may be undesirably strong. It is,
however, straightforward to further relax this assumption to allow for shock assignment processes with
weak mutual dependence, such as further clustering or autocorrelation. In Appendix B.1 we prove
extensions of Proposition 4 which replace Assumption 4 with one of the following alternatives:

Assumption 5 (Many uncorrelated shock clusters): There exists a partition of industries into clusters
                         P 2                  P
        c(n) such that E   c sc → 0 for sc =      n: c(n)=c sn and Cov [g̃n , g̃n0 | ε̄, q, s] = 0 for all

            (n, n0 ) with c(n) 6= c(n0 );

Assumption 6 (Many weakly correlated shocks): For some sequence of numbers BL ≥ 0 and a fixed
                                 P∞                   P 2 
        function f (·) satisfying r=1 f (r) < ∞, BL E    n sn → 0 and |Cov [g̃n , g̃n0 | ε̄, q, s]| ≤

            BL · f (|n0 − n|) for all (n, n0 ).

Assumption 5 relaxes Assumption 4 by allowing shock residuals to be grouped within mutually mean-
independent clusters c(n), while placing no restriction on their within-cluster correlation. At the same
time, the Herfindahl index assumption of Assumption 4 is strengthened to hold for industry clusters,
with sc denoting the average exposure of cluster c. Assumption 6 takes a different approach, allowing
all nearby shock residuals to be mutually correlated provided their covariance is bounded by a function
BL · f (|n0 − n|). This accommodates, for example, the case of first-order autoregressive time series
with the covariance bound declining at a geometric rate, i.e. f (r) = δ r for δ ∈ [0, 1) and constant BL .
With BL growing, stronger dependence of nearby shocks is also allowed (see Appendix B.1).



4    Extensions
We now present several other extensions of our quasi-experimental framework. Section 4.1 considers
shift-share identification with panel data. Section 4.2 explains the need for additional controls when


                                                   13
the sum of exposure shares vary across observations. Section 4.3 discusses how our framework applies
when the shocks are estimated within the sample, as in the canonical Bartik (1991) study. Finally,
Section 4.4 extends the framework to allow for multiple treatments and shift-share instruments.


4.1     Panel Data

In practice, SSIV regressions are often estimated with panel data, where the outcome y`t , treatment
x`t , controls w`t , importance weights e`t , exposure shares s`nt , and shocks gnt are additionally indexed
by time periods t = 1, . . . , T .20 In such settings a time-varying instrument

                                                            X
                                                    z`t =         s`nt gnt                                               (9)
                                                            n


is used, and the controls w`t may include unit- or period-specific fixed effects.
    It is straightforward to map this panel case to the previous cross-sectional setting by a simple
relabeling. Let `˜ ∈ {(`, t) : ` = 1, . . . , L; t = 1, . . . , T } and ñ ∈ {(n, t) : n = 1, . . . , N ; t = 1, . . . , T },
with the time-varying outcomes now indexed as y`˜ and similarly for x`˜, w`˜, e`˜, and gñ . Further let
s̃`ñ
  ˜ = s̃(`,t),(n,p) = s`nt 1[t = p] denote the exposure of observation ` in period t to shock n in period

p, which is by definition zero for t 6= p. The time-varying instrument (9) can then be rewritten
     P
z`˜ = ñ s̃`ñ
           ˜ gñ , as in the cross-sectional case. Generalizations of the preceding quasi-experimental

framework immediately follow.
    Unpacking these results in the panel setting shows how standard intuitions for consistency in long
and short shock-level panels translate into shift-share designs. First, consistency of the panel SSIV
estimator in long panels (T → ∞) follows even with relatively few shocks N and cross-sectional
observations L, provided shocks are mutually uncorrelated across units and either uncorrelated or
weakly serially correlated over time (Assumptions 4 and 6, respectively). Observing many time periods
yields both a growing sample size, LT → ∞, and a growing number of shocks, N T → ∞, which allows
                                                  P 2        P P 2 
the Herfindahl condition of Proposition 4 (that E   ñ sñ = E   n t snt → 0) to be satisfied. This

case accommodates, in particular, shift-share designs that leverage purely time-series shocks (N = 1,
T → ∞), as in Nunn and Qian (2014).21 Second, with many shocks observed in the cross-section
(N → ∞) and the corresponding per-period Herfindahl condition, consistency follows as LT → ∞
even with arbitrary serial correlation in the shocks (using Assumption 5, with cross-sectional units as
clusters).22 This case accommodates short panels and repeated cross-sections (T fixed, L, N → ∞).
  20 Exposure shares are typically lagged and sometimes fixed in a pre-period. Our subscript t notation indicates that

these shares are used to construct the instrument for period t, not that they are measured in that period.
  21 Nunn and Qian (2014) estimate the impact of U.S. food aid on civil conflict, using variation in U.S. wheat production

(a single “shock” per period) over a long time horizon (T = 36 years), interacted with a country’s tendency to receive
US food aid (the “exposure shares” for L = 125 countries). This case may also well-approximate settings like those of
Berman et al. (2017) and Imbert et al. (2019) where N T is large despite moderate N and T . Berman et al. (2017), for
example, leverage price changes for N = 14 minerals over T = 14 years in a very large cross-section of spatial cells.
  22 Proposition 4 also suggests an alternative way to handle serial correlation when the time series properties of shocks

are known. For example given a first-order autoregressive process gnt = ρ0 + ρ1 gn,t−1 + g̃nt , controlling for the



                                                             14
    The role of fixed effect (FE) controls in panel SSIV regressions is also worth discussing. In con-
ventional panels, with exogenous shocks varying at the same level as the observations, unit fixed
effects play a dual role: they purge time-invariant unobservables from the residual and isolate the
time-varying component of the shocks. The first role directly extends to the shift-share case: As-
sumption 1 would thus hold if shocks are as-good-as-randomly assigned with respect to aggregated
time-demeaned unobservables. However, the second role only extends when exposure shares are fixed
across periods, i.e. when s`nt ≡ s`n0 .23 This follows from Proposition 4: the exposure-weighted aver-
ages of the shock FEs which isolate the time-varying component of shocks are only subsumed by the
unit FEs when the exposure shares are time-invariant. A simpler argument applies to period FEs,
which isolate within-period shock variation when the exposure shares add up to one. In that case one
can represent period FEs in the original data as exposure-weighted averages of shock-level period FEs
                                                       1[p = t̄].24
                                       P
in the relabeled data, i.e. 1[t = t̄] = (n,p) s̃`(n,p)
                                                ˜

    To make these insights concrete, consider our labor supply example in a panel setting with subsidies
allocated to industries in each period. Imagine that certain industries get permanent subsidy shocks
that are not as-good-as-randomly assigned across industries. In that case, one may prefer to only use
the changes in industry subsidies over time as identifying variation. With fixed exposure shares, one
way to proceed is to include region FEs in the SSIV specification, which implicitly control for industry
FEs at the shock level while also removing any potential time-invariant regional characteristics that
could yield omitted variables bias. Including period FEs further removes any non-random variation
in the average level of subsidies in each period.
    We lastly note that while fixing exposure shares in a pre-period is useful for isolating time-varying
shocks, lagging shares by many periods is likely to make the shift-share instrument less predictive of
treatment, thereby reducing the first stage in panel SSIVs. Appendix A.8 formalizes this intuition
with a panel extension to our simple first-stage model. In such cases it may be preferable to employ
other ways of isolating time-varying shocks, which allow for updated shares. In particular, one may
use the first-differenced specification


                                         ∆y`t = β∆x`t + γ 0 ∆w`t + ∆ε`t ,                                           (10)

                                         P
instrumenting ∆x`t with z`t,F D =           n s`n,t−1 ∆gnt ,   where ∆ is the first-differencing operator for both
observations and shocks. This strategy has been employed, for example, by Autor et al. (2013) as we
                                            P
exposure-weighted average of past shocks n s`nt gn,t−1 extracts the idiosyncratic shock component g̃nt .
  23 Shift-share IV settings with panel data and time-invariant shares include, for example, Berman et al. (2015), Berman

et al. (2017), Hummels et al. (2014), Imbert et al. (2019), and Nunn and Qian (2014).
  24 Proposition 4 only applies under Assumption B2, which requires the control coefficient vector γ to be consistently

estimated as LT → ∞, even if w`t contains an increasing number of FEs (see Appendix B.1). In Appendix A.6 we show
how alternative notions of shock exogeneity, which are imposed on unit-demeaned unobservables, address this incidental
parameters problem. In Appendix A.7 we further discuss how these strict exogeneity assumptions can be relaxed in
long panels, allowing for sequential shock generating processes.




                                                           15
discuss in Section 6.2.25


4.2      SSIVs with Incomplete Shares
                                                                                                                                   P
While we have so far assumed the sum of exposure shares is constant, in practice this S` =                                            n s`n

may vary across observations `. For example, in the labor supply setting, the quasi-experiment in
government output subsidies may only cover manufacturing industries, while the lagged manufacturing
employment shares of s`n may be measured relative to total employment in region `. In this case S`
equals the lagged total share of manufacturing employment in region `. The Autor et al. (2013) setting
is an example of this scenario, as we discuss below.26
    Our framework highlights a potential problem with such “incomplete share” settings: even if As-
sumptions 1 and 2 hold, the SSIV estimator will generally leverage non-experimental variation in
S` in addition to quasi-experimental variation in shocks. To see this formally, note that one can
always rewrite the shift-share instrument with the “missing” (e.g., non-manufacturing) shock included
to return to the complete shares setting:

                                                                         X
                                                      z` = s`0 g0 +            s`n gn ,                                                (11)
                                                                         n>0

                                                            PN
where g0 = 0 and s`0 = 1 − S` , such that                      n=0 s`n    = 1 for all `. The previous quasi-experimental
framework then applies to this expanded set of shocks g0 , . . . , gN . Since g0 = 0, Proposition 3
requires in this case that E [gn | s, ε̄] = 0 for n > 0 as well; that is, that the expected shock to each
manufacturing industry is the same as the “missing” non-manufacturing shock of zero. Otherwise,
even if the manufacturing shocks are random, regions with higher manufacturing shares S` will tend
to have systematically different values of the instrument z` , leading to bias when these regions also
have different unobservables.27
    Cast in this way, the incomplete shares issue has a natural solution via Assumption 3. Namely, one
can allow the missing and non-missing shocks to have different means by conditioning on the indicator
1[n > 0] in the qn vector. By Proposition 4, the SSIV estimator allows for such conditional quasi-
  25 There is another argument for fixing the shares in a pre-period that applies when the current shares are affected by

lagged shocks in a way that is correlated with unobservables ε`t . In the labor supply example suppose local labor markets
vary in flexibility, with stronger reallocation of employment to industries with bigger subsidies in flexible markets. If
subsides are random but persistent, more subsidized industries will be increasingly concentrated in regions with flexible
labor markets and Assumption 1 will be violated if such flexibility is correlated with ε`t . This concern is distinct from
that in Jaeger et al. (2018) who focus on the endogeneity of shares to the lagged residuals, rather than shocks, in a
setting closer to Goldsmith-Pinkham et al. (2020). Jaeger et al. also point out another issue relevant to panel SSIV,
that the outcome may respond to both current and lagged shocks; we return to this issue in Section 4.4.
  26 We note that this scenario applies to quasi-experiments in which shocks are impossible (ex ante) for some industries.

In contrast, if all industries were equally likely to receive subsidies but only some did ex post, the set of n should include
all industries, with S` = 1, and zero subsidies are captured by gn = 0 for some n. In such a case, however, it is highly
unlikely that all manufacturing industries receive the subsidies by chance when no non-manufacturing industries                       do.
  27 Formally, if Assumptions 1 and 2 hold for all n > 0 we have from the proof to Proposition 3 that
                                                                                                                            P
                         hP                      i                                                                             ` e` z ` ε` =
PN                          N
   n=0   s n g n ε̄n = E    n=0 s n (g n − µ)ε̄n   + o p (1) = −µE [s 0 ε̄0 ] + o p (1).  If µ 6
                                                                                               = 0 and the missing industry share  is   large
       p                                                              P                
(s0 −6 → 0) this can only converge to zero when E [s0 ε̄0 ] = E             ` e` s`0 ε` does, i.e. when S` is exogenous.




                                                                    16
random assignment when the control vector w` contains the exposure-weighted average of 1[n > 0],
             PN
which here is n=0 s`n 1 [n > 0] = S` . Thus, in the labor supply example, quasi-experimental variation
in manufacturing shocks is isolated in regressions with incomplete shares provided one controls for a
region’s lagged manufacturing share S` .
    Two further points on incomplete shares are worth highlighting. First, allowing the observed shock
mean to depend on other observables will tend to involve controlling for share-weighted averages of
these controls interacted with the indicator 1[n > 0]. For example with period indicators in qnt , within-
period shock variation is isolated by controlling for sums of period-specific exposure S`t , interacted with
                        PN
period indicators (i.e.     n=0 s`nt 1[n > 0]1[t = t̄] = S`t 1[t = t̄]). Second, by effectively “dummying

out” the missing industry, SSIV regressions that control for S` require a weaker Herfindahl condition:
  hP        i
     N    2
E    n=1 sn   → 0, allowing the non-manufacturing industry share s0 to stay large.


4.3     Shift-Share Designs with Estimated Shocks

In some shift-share designs, the shocks are equilibrium objects that can be difficult to view as being
quasi-randomly assigned. For example, in the canonical Bartik (1991) estimation of the regional
labor supply elasticity, the shocks are national industry employment growth rates. Such growth
reflects labor demand shifters, which one may be willing to assume are as-good-as-randomly assigned
across industries. However industry growth also aggregates regional labor supply shocks that directly
enter the residual ε` . Here we show how the quasi-experimental SSIV framework can still apply
in such cases, by viewing the gn as noisy estimates of some latent true shocks gn∗ (labor demand
shifters, in the Bartik (1991) example) that satisfy Assumption 1. We establish the conditions on
estimation noise (aggregated labor supply shocks, in Bartik (1991)) such that a feasible shift-share
instrument estimator, perhaps involving a leave-one-out correction as in Autor and Duggan (2003), is
asymptotically valid.
    We leave a more general treatment of this issue to Appendix A.9 and for concreteness focus on
the Bartik (1991) example. The industry growth rates gn can be written as weighted averages of the
                                            P
growth of each industry in each region: gn = ` ω`n g`n , where the weights ω`n are the lagged shares of
                                             P
industry employment located in region `, with ` ω`n = 1 for each n. In a standard model of regional
labor markets, g`n includes (to first-order approximation) an industry labor demand shock gn∗ and a
term that is proportional to the regional supply shock ε` .28 We suppose that the demand shocks are
as-good-as-randomly assigned across industries, such that the infeasible SSIV estimator which uses
z`∗ = n s`n gn∗ as an instrument satisfies our quasi-experimental framework. The asymptotic bias of
      P
                                              P
the feasible SSIV estimator which uses z` = n s`n gn then depends on the large-sample covariance
  28 Appendix A.10 presents such a model, showing that g                                               ∗
                                                           `n also depends on the regional average of gn (via local general
equilibrium effects) and on idiosyncratic region-specific demand shocks. Both of these are uncorrelated with the error
term in the model and thus do not lead to violations of Assumption 1; we abstract away from this detail here.




                                                            17
between the labor supply shocks ε` and an aggregate of the supply shock “estimation error,”

                                                          X           X
                                        ψ` = z` − z`∗ ∝         s`n          ω`0 n ε`0 .                             (12)
                                                            n           `0

                                                                P
    Two insights follow from considering the bias term                ` e` ψ` ε` .   First, part of the covariance between
ψ` and ε` is mechanical, since ε` enters ψ` . In fact, if supply shocks are spatially uncorrelated this is
the only source of bias from using z` rather than z`∗ as an instrument. This motivates the use of a
                                              P                  P
leave-one-out (LOO) shock estimator, gn,−` = `0 6=` ω`0 n g`0 n / `0 6=` ω`0 n , and the feasible instrument
z`LOO = n s`n gn,−` to remove this mechanical covariance.29 Conversely, if the regional supply shocks
        P

ε` are spatially correlated a LOO adjustment may not be sufficient to eliminate mechanical bias in the
feasible SSIV instrument, though more restrictive split-sample methods (e.g. those estimating shocks
from distant regions) may suffice.
   Second, in settings where there are many regions contributing to each shock estimate even the
                    P
mechanical part of    ` e` ψ` ε` may be ignorable, such that the conventional non-LOO shift-share

instrument z` (which, unlike z`LOO , has a convenient shock-level representation per Proposition 1) is
asymptotically valid when z`LOO is.30 In Appendix A.9, we derive a heuristic for this case, under the
assumption of spatially-independent supply shocks. In a special case when each region is specialized
in a single industry and there are no importance weights, the key condition is L/N → ∞, or that the
average number of regions specializing in the typical industry is large. With incomplete specialization
or weights, the corresponding condition requires the typical industry to be located in a much larger
number of regions than the number of industries that a typical region specializes in.
    To illustrate the preceding points in the data, Appendix A.9 replicates the setting of Bartik (1991)
with and without a LOO estimator, using data from Goldsmith-Pinkham et al. (2020). We find that
in practice the LOO correction does not matter for the SSIV estimate, consistent with the findings
of Goldsmith-Pinkham et al. (2020) and Adão et al. (2019), and especially so when the regression is
estimated without regional employment weights. Our framework provides a explanation for this: the
heuristic statistic we derive is much larger without importance weights. These findings imply that
if, in the canonical Bartik (1991) setting, one is willing to assume quasi-random assignment of the
underlying industry demand shocks and that the regional supply shocks are spatially-uncorrelated,
one can interpret the uncorrected SSIV estimator as leveraging demand variation in large samples, as
some of the literature has done (e.g. Suárez Serrato and Zidar (2016)).
  29 This problem of mechanical bias is similar to that of two-stage least squares with many instruments (Bound et

al. 1995), and the solution is similar to the jackknife instrumental variable estimate approach of Angrist et al. (1999).
  30 Adão et al. (2019) derive the corrected standard errors for LOO SSIV and find that they are in practice very close

to the non-LOO ones, in which case the SSIV standard errors we derive in the next section are approximately valid
even when the LOO correction is used.




                                                           18
4.4        Multiple Shocks and Treatments

In some shift-share designs one may have access to multiple sets of shocks satisfying Assumptions
3 and 4 or their extensions. For example while Autor et al. (2013) construct an instrument from
average Chinese import growth across eight non-U.S. countries, in principle the industry shocks from
each individual country may be each thought to be as-good-as-randomly assigned. In other settings
multiple endogenous variables may be required for the SSIV exclusion restriction to plausibly hold. For
example Jaeger et al. (2018) show that when local labor markets respond dynamically to immigrant
inflows, it may be necessary to instrument both the current and lagged immigrant growth rate with
current and lagged shift-share instruments. Another example is provided by Bombardini and Li
(2019), who estimate the reduced-form effects of two shocks: the regional growth of all exports and
the regional growth of exports in pollution-intensive sectors. Both are shift-share variables based on
the same regional employment shares across industries but different shocks: an overall industry export
shock and the overall shock interacted with industry pollution intensity.31
    In Appendix A.11 we show how these settings fit into our quasi-experimental framework. The key
insight is that SSIV regressions with multiple instruments—with and without multiple endogenous
variables—again have an equivalent representation as particular shock-level IV estimators provided the
exposure shares used to construct the instruments are the same. This immediately implies extensions
of the foregoing results that establish consistency for just-identified SSIV regressions with multiple
instruments, such as the dynamic adjustment case of Jaeger et al. (2018). In overidentified settings,
the appendix derives new shock-level IV estimators that optimally combine the quasi-experimental
variation and permit omnibus tests of the identifying assumptions, via the generalized method of
moments theory of Hansen (1982) and inference results discussed in the next section. For example
when shocks are homoskedastic, a two-stage least squares regression of ȳn⊥ on x̄⊥
                                                                                 n , weighted by sn and

instrumented by multiple shocks g1n , . . . , gJn yields an efficient overidentified estimate of β.



5     Shock-Level Inference and Testing
A shock-level view also brings new insights to SSIV inference and testing. In this section we first show
how a problem with conventional SSIV inference, first studied by Adão et al. (2019), has a convenient
solution based on our estimator equivalence result. In particular, we show that conventional standard
error calculations may be asymptotically valid when SSIV coefficients are estimated at the level of
identifying variation (shocks). We then discuss how other novel shock-level procedures can be used to
assess first-stage relevance and to implement valid falsification tests of shock exogeneity. Lastly, we
  31 The
                                  P                P
          instruments here are       n s`n gn and    n s`n gn qn where qn denotes industry n’s pollution intensity. Our
framework applies in this case even if qn is not randomly assigned: as long as the export shock gn satisfies an appropriate
version of Assumption 1, E [gn | ε̄, q, s] = µ, the interacted shock satisfies E [gn qn | P
                                                                                          ε̄, q, s] = µqn , i.e. Assumption 3.
The natural extension of Proposition 4 to multiple instruments applies as long as             n s`n qn , a measure of pollution
intensity of the region, is controlled for, as Bombardini and Li (2019) do in some specifications.



                                                              19
summarize a variety of Monte-Carlo simulations illustrating the finite-sample properties of SSIV and
relating them to conventional shock-level analyses.


5.1     Exposure-Robust Standard Errors

As with consistency, SSIV inference is complicated by the fact that the observed shocks gn and any
unobserved shocks νn induce dependencies in the instrument z` and residual ε` across observations with
similar exposure shares. This problem can be understood as an extension of the standard clustering
concern (Moulton 1986), in which the instrument and residual are correlated across observations within
predetermined clusters, with the additional complication that in SSIV every pair of observations with
overlapping shares may have correlated (z` , ε` ). Adão et al. (2019) show the magnitude of the problem:
in Monte-Carlo simulations, they find that tests based on conventional standard errors with nominal
5% significance can reject a true null in 55% of placebo shock realizations. They then develop a
novel approach to conducting valid inference in presence of exposure-based clustering, building on our
quasi-experimental framework for identification.
    Our equivalence result in Section 2.3 motivates a convenient alternative to valid SSIV inference.
By estimating SSIV coefficients with an equivalent shock-level IV regression, one directly obtains valid
(“exposure-robust”) standard errors under the assumptions in Adão et al. (2019) and an additional
condition on the controls that we discuss below. This solution generalizes a well-known approach
to addressing conventional group clustering (Angrist and Pischke 2008, p. 313): by estimating a
regression at the level of as-good-as-random variation (here, shocks) one avoids inferential biases due
to clustering (here, by shock exposure).32 Like in Adão et al. (2019), the validity of this approach
derives from the properties of the shocks and does not restrict the correlation structure of ε` .
    We first present our formal result and then discuss its advantages and limitations relative to the
original solution of Adão et al. (2019).

Proposition 5 Consider sn -weighted IV estimation of the second stage equation


                                                      ȳn⊥ = α + β x̄⊥    0       ⊥
                                                                     n + qn τ + ε̄n                                       (13)


                                            is included in the control vector w` used to compute ȳn⊥ and x̄⊥
                              P
              where w̃` =        n s`n qn                                                                   n,

              and x̄⊥
                    n is instrumented by gn . The IV estimate of β is numerically equivalent to the

              SSIV estimate β̂. Furthermore, when Assumptions B3–B6 in Appendix B.2 hold and
              P       ⊥    p
                ` e` x` z` −
                           → π for π 6= 0, the conventional heteroskedasticity-robust standard error for β̂
              yields asymptotically-valid confidence intervals for β.
  32 It is easy to verify that the regression from our Proposition 5 is indeed the group-level regression of Angrist and

Pischke (2008, p. 313) when the exposure shares are binary, i.e. for each `, s`n = 1 [n = n(`)] for some n(`) ∈ {1, . . . , N },
and there are no controls. In this case z` = gn(`) , such that the shift-share instrument is constant among observations
belonging to the same group n(`).




                                                              20
Proof See Appendix B.2.

Equation (13) extends the previous shock-level estimating equation (6) by including a vector of controls
qn which, as in Proposition 4, are included in the SSIV control vector w` as exposure-weighted averages.
The first result in Proposition 5 is that the addition of these controls does not alter the coefficient
equivalence established in Proposition 1. The second result states conditions, which strengthen those
of Proposition 4, under which conventional shock-level standard errors from estimation of (13) yield
valid asymptotic inference on β. Appendix B.2 further establishes two related results. First, absent any
controls, i.e. with w` = qn = 1, the shock-level robust standard error for β is numerically equivalent to
the standard error formula that Adão et al. (2019) propose. Second, an alternative inference procedure
that Adão et al. (2019) propose to improve finite-sample performance, by imposing the null hypothesis
β = β0 when estimating the residual ε` , is also readily obtained from the shock-level equation (13).
    A limitation of Proposition 5, relative to the original result in Adão et al. (2019), concerns the
control vector w` . While our previous results do not restrict the structure of this vector, Assump-
                                                                                        P
tion B4 allows for only two types of controls: those with a shift-share structure (i.e.    n s`n qn , as

in Proposition 4) that capture all sources of shock-level confounding, and other controls that are
not asymptotically correlated with the instrument but may increase the asymptotic efficiency of the
estimator. Adão et al. (2019) further allow controls that are necessary for identification and have
                                             P
an “approximate” shift-share structure: i.e.  n s`n q̃n + u` , where q̃n is unobserved but the average

variance of the noise u` is asymptotically small. Appendix B.2 shows that in the presence of such
approximate shift-share controls, the standard errors obtained from estimating equation (13) will tend
to be asymptotically conservative.33 Valid shift-share inference with general control vectors, of the
kind we allow in our discussion of SSIV identification, remains an open problem.
    At the same time, our shock-level approach offers three practical features. First, it can be per-
formed with standard statistical software packages given an simple initial transformation of the data
(i.e. to obtain ȳn⊥ , x̄⊥
                         n , and sn ), for which we have released a Stata package ssaggregate (see footnote

3). Second, it is readily extended to settings where shocks are clustered (a case also considered by
Adão et al. (2019)) or autoregressive, as in Assumptions 5 and 6 respectively. Conventional cluster-
robust or heteroskedastic-and-autocorrelation-consistent (HAC) standard error calculations applied
to equation (13) are then valid. Third, the shock-level inference approach works in some cases where
the original standard error calculation procedure of Adão et al. (2019) fails. Their procedure involves
projecting z`⊥ on the vector of shares in order to account for the shock-level confounders underlying
the approximate shift-share controls. When N > L, or when some exposure shares are collinear, such
projection is infeasible.34 Our alternative approach avoids this issue, in settings without approximate
  33 In contrast, Appendix B.2 also shows that when the two inference procedures are asymptotically equivalent, standard

errors from Proposition 5 are likely to be smaller than those of Adão et al. (2019) in finite samples. We find that case
to be relevant in the application in Section 6.2.4.
  34 This is an empirically relevant issue: for instance, employment shares of some industries are collinear in the Autor

et al. (2013) setting. To give one example, SIC code 2068 “Salted and roasted nuts and seeds” was part of code 2065


                                                           21
shift-share controls.


5.2      Falsification and Relevance Tests

Our Proposition 5 also provides a practical way to perform valid regression-based tests of shock
orthogonality (i.e. falsification tests) and first-stage relevance. In the quasi-experimental SSIV frame-
work these tests also require computing exposure-robust standard errors, and shock-level inference
procedures allow for a convenient implementation via equivalent shock-level IV regressions.
    As usual, the validity of z` cannot be tested directly. However, indirect falsification tests may be
conducted given an observed variable r` thought to proxy for the unobserved residual ε` . Namely
one may test whether r` is uncorrelated with the shift-share instrument z` , while controlling for w` .
Examples of such an r` may include a baseline characteristic realized prior to the shocks or a lagged
observation of the outcome y` (resulting in what is often called a “pre-trend” test). To interpret the
magnitude of the reduced form falsification regression coefficient, researchers may also scale it by the
first stage regression of x` , yielding a placebo SSIV coefficient.
    The insights of Adão et al. (2019) and the previous section apply directly to such tests. For
exposure-robust inference on a placebo e` -weighted SSIV regression of r` on x` , instrumented by z` , one
may use the conventional standard errors from an sn -weighted regression of r̄n⊥ on x̄⊥
                                                                                      n , instrumenting

by gn and controlling for any shock-level covariates qn . Similarly, for valid inference from a reduced
form regression of r` on z` , one may use the conventional standard errors from an IV regression of r̄n⊥
on z̄n⊥ , with the same instrument, weights, and controls (see footnote 12).35 If a researcher observes a
                                                                                  P
shock-level confounder rn , they can construct its observation-level average r` = n s`n rn and perform
a similar test. A simpler test regresses rn on gn directly (weighting by sn and controlling for qn ).36
    Unlike exclusion, the SSIV relevance condition can be evaluated directly, via OLS regressions of
x` on z` that control for w` . For exposure-robust inference on this OLS coefficient one may again
use an equivalent shock-level IV regression: of x̄⊥      ⊥
                                                  n on z̄n , instrumenting by gn , weighting by sn , and

controlling for qn . The first stage F -statistic, which is a common heuristic for instrument relevance,
is then obtained as a squared t-statistic. We generalize this result to the case of multiple shift-share
instruments in Appendix A.11 by detailing the appropriate construction of the “effective” first-stage
“Candy and other confectionery products” until the 1987 revision of the classification; the rest of code 2065 we reassigned
to code 2064. Therefore, when using 1980 employment shares to construct the shift-share instrument for the 1990s,
Autor et al. (2013) allocate employment between 2064 and 2068 codes proportionately.
   35 One might also consider a simpler shock-level OLS regression of r̄ ⊥ on g weighted by s and controlling for q (i.e.
                                                                         n     n                   n                         n
the reduced form of the proposed IV regression). This produces a coefficient that typically cannot be generated from
the original observations of (r` , z` , w` ). Moreover, the power of the shock-level OLS balance test is likely to be lower
                                                                                         P          ⊥
                                                                                                          2 P 2 2 2
than the proposed IV: the robust Wald statistic for both tests has the same form,            n sn r̄n ĝn   / n sn κ̂n ĝn , where
ĝn is the residual from an auxiliary sn -weighted projection of gn on qn and the only difference is in the r̄n     ⊥ residuals,

κ̂n . Under the alternative model of r` = α0 + α1 z` + κ` , with α1 6= 0, the variance of these κ̂n is likely to be smaller
in the correctly specified IV balance test than the OLS regression, leading to a likely higher value of the test statistic.
   36 While pre-trend and other `-level balance tests are also useful in the alternative Goldsmith-Pinkham et al. (2020)

framework (albeit with a different approach to inference), this shock-level test is specific to our approach to identification.
We emphasize, however, that all tests discussed here are meant to falsify the quasi-random shock assignment assumption,
made a priori, and not to test the two frameworks against each other.



                                                               22
F -statistic of Montiel Olea and Pflueger (2013), again based on an equivalent shock-level IV regression.


5.3     Monte-Carlo Simulations

Though the exposure-robust standard errors obtained from estimating equation (13) are asymptoti-
cally valid, it is useful to verify that they offer appropriate coverage with a finite number of observations
and shocks. Of interest especially is whether the finite-sample performance of the equivalent regression
(13) is comparable to that of more conventional shock-level IV regressions, in which the outcome and
instrument are not aggregated from a common set of y` and x` .
    In Appendix A.12 we provide Monte-Carlo evidence suggesting that the finite-sample properties of
SSIV and conventional shock-level IV regressions are similar, and that the variance of SSIV estimators
is well-approximated by our exposure-robust standard errors. Specifically, we compare the finite-
sample behavior of two estimators which both measure the effects of import competition with China on
U.S. employment and use the same industry variation to construct the instruments. The first estimator
is an SSIV and takes regional growth of manufacturing employment as the outcome (following Autor
et al. (2013)) while the second is a conventional IV where the outcome is industry employment growth
(similar to Acemoglu et al. (2016)). While finite sample properties of SSIV are not always perfect,
e.g. there is moderate overrejection with heavy-tailed shocks, traditional industry-level IV suffers
from the same problems. Our results further indicate that the conventional rule of thumb to detect
weak instruments—the Montiel Olea and Pflueger (2013) first-state F -statistic—applies equally well
to both the SSIV and the traditional IV estimators when computed for SSIV as described in Appendix
A.11. Finally, our results also show that with the Herfindahl concentration index n s2n as high as
                                                                                  P

1/20 (i.e. with an effective sample size of 20 in the equivalent shock-level regression) the asymptotic
approximation for the SSIV estimator is still reasonable, with rejection rates in the vicinity of 7% for
tests with a nominal size of 5% despite heavy tails of the shock distribution. Together, these results
indicate that a researcher who is comfortable with the finite-sample performance of a shock-level
analysis with some set of gn should also be comfortable using such shocks in SSIV, provided there is
sufficient variation in exposure shares to yield a strong SSIV first stage.37



6     Shift-Share IV in Practice
We now summarize and illustrate the practical implications of our econometric framework. We first
characterize the kinds of empirical settings to which the foregoing framework may be applied. We
then apply the framework to the influential setting of Autor et al. (2013).
  37 Naturally, these simulation results may be specific to the data-generating process we consider here, modeled after

the “China shock” setting of Autor et al. (2013). In practice, we recommend that researchers perform similar simulations
based on their data if they are concerned with the quality of asymptotic approximation—a suggestion that of course
applies to conventional shock-level IV analyses as well.




                                                          23
6.1    A Taxonomy of SSIV Settings

Our framework can be applied to various empirical settings. To characterize these settings, we distin-
guish between three cases of SSIVs employed in the literature.
   In the first case, the shift-share instrument is based on a set of shocks which can itself be thought
of as an instrument. For example, the gn which enter z` might correspond to a set of observed
growth rates that could be plausibly thought of as being randomly assigned to a large number of
industries. Our framework shows how the shift-share instrument maps these shocks to the level of
observed outcomes and treatments (e.g., geographic regions). A researcher who is comfortable with
the identification conditions and finite-sample performance of an industry-level analysis based on gn
should generally also be comfortable applying our framework, provided there is sufficient variation
in the exposure shares and treatment to yield a strong first stage. Autor et al. (2013) and the
corresponding industry-level analysis conducted by Acemoglu et al. (2016) give a prime example of
this case, as we show below.
   Empirical settings covered by this first case belong to various fields in economics, with outcomes and
shocks defined at levels (` and n, respectively) different than regions and industries. In international
trade, Hummels et al. (2014) estimate the wage effects of offshoring across Danish importing firms
`. They leverage a shift-share instrument for offshoring based on shocks to export supply by type of
intermediate inputs and origin country; titanium hinges from Japan is an example of an n. While
they translate these shocks to the firm level by using the lagged composition of firm imports as the
shares, one could imagine an analysis of Danish imports at the input-by-country level directly that
would leverage the same supply shocks. In finance, Xu (2019) examines the long-term effects of
financial shocks on exports across countries `. Her shift-share instrument is based on a disruption
that affected some but not all London-based banks n in 1866, with country-specific exposure shares
measuring pre-1866 market shares of those banks in each country. In line with considering bank
shocks as-good-as-randomly assigned, she reports that affected and unaffected banks were balanced
on various observable characteristics. In the immigration literature, Peri et al. (2016) estimate the
effect of immigrant STEM workers on the labor market outcomes of natives across U.S. cities `. They
exploit variation in the supply of STEM workers across migration origin countries n and over time that
arises from plausibly exogenous shifts to national H1-B policy. Similarly, in a literature on innovation,
Stuen et al. (2012) leverage education policy shocks in foreign countries as a supply shock to U.S.
doctoral programs.
   In the second case, a researcher does not directly observe a large set of quasi-experimental shocks,
but can still conceive of an underlying set of gn which if observed would be a useful instrument.
Constructing the instrument then requires an initial step where these shocks are estimated in-sample,
potentially introducing mechanical biases. In the canonical setting of Bartik (1991) and Blanchard
and Katz (1992), for example, a local labor demand instrument is sought, with the ideal gn measuring


                                                   24
an aggregate change in industry labor demand that may be assumed orthogonal to local labor supply
shocks. Aggregate demand changes are however not directly observed and must be estimated from
national industry employment growth (often using leave-out corrections, as in Autor and Duggan
(2003) and Diamond (2016)). We have discussed how our framework generalizes to this more involved
setting in Section 4.3, showing the additional assumptions required for the estimation error to be
asymptotically ignorable. While this case differs from the first in terms of the instrument construction,
the underlying logic of our framework still applies. This case also covers instruments in the immigration
literature, as in Card (2001) and Card (2009), where latent shocks to out-migration from foreign
countries can be thought to be as-good-as-randomly assigned but are estimated from aggregate in-
migration flows in the U.S.
   The third case is conceptually distinct, in that the gn underlying the (perhaps idealized) instrument
cannot be naturally viewed as an instrument itself. This could either be because it is not plausible
that these shocks are as-good-as-randomly assigned, even conditionally on shock-level observables, or
because there are too few shocks. Identification in this case may instead follow from exogeneity of the
exposure shares, as suggested by Goldsmith-Pinkham et al. (2020).
   Share exogeneity may be a more plausible approach in the third case when the exposure shares
are “tailored” to the specific economic question, and to the particular endogenous variable included in
the model. In this case, the scenario considered in Section 2.2—that there are unobserved shocks νn
which enter ε` through the shares—may be less of a concern. Mohnen (2019), for example, uses the
age profile of older workers in local labor markets as the exposure shares of a shift-share instrument for
the change in the local elderly employment rate in the following decade. He argues, based on economic
intuition, that these tailored shares are uncorrelated with unobserved trends in youth employment
rates. This argument notably does not require one to specify the age-specific shocks gn , which only
affect power of the instrument (in fact, the shocks are dispensed with altogether in robustness checks
that directly instrument with the shares). Similarly, Algan et al. (2017) use the lagged share of the
construction sector in the regional economy as an instrument for unemployment growth during the
Great Recession, arguing that it does not predict changes in voting outcomes in other ways. With a
single industry the identification assumption reduces to that of conventional difference-in-differences
with continuous treatment intensity and our framework cannot be applied.
   In contrast, our framework may be more appropriate in settings where shocks are tailored to a
specific question while the shares are “generic,” in that they could conceivably measure an observa-
tion’s exposure to multiple shocks (both observed and unobserved). Both Autor et al. (2013) and
Acemoglu and Restrepo (Forthcoming), for example, build shift-share instruments with similar lagged
employment shares but different shocks—rising trade with China and the adoption of industrial robots,
respectively. According to the Goldsmith-Pinkham et al. (2020) view, these papers use essentially the
same instruments (lagged employment shares) for different endogenous variables (growth of import



                                                   25
competition and growth of robot adoption), and are therefore mutually inconsistent. Our framework
helps reconcile these identification strategies, provided the variation in each set of shocks can be de-
scribed as arising from a natural experiment. In principle, shares and shocks may simultaneously
provide valid identifying variation, but in practice it would seem unlikely for both sources of variation
to be a priori plausible in the same setting.
   This discussion highlights that plausibility of our framework, as with the alternative framework
of Goldsmith-Pinkham et al. (2020), depends on the details of the SSIV application. We encourage
practitioners to use our framework only after establishing an a priori argument for the plausibility
of exogenous shocks. Various diagnostics on the extent of shock variation and falsification of this
assumption may then be conducted to assess ex post the plausibility of exogenous shocks. We next
illustrate this approach in the Autor et al. (2013) setting.


6.2     Application to Autor, Dorn, and Hanson (2013)

Our application to Autor et al. (2013, henceforth ADH) aims to illustrate our theoretical framework
only, and not to reassess their substantive findings. In line with this goal, we first describe how
the ADH instrument could be thought to leverage quasi-experimental shocks and discuss potential
threats to this identification strategy. We then illustrate the tools and lessons that follow from
our framework, demonstrating steps that researchers can emulate in their own SSIV applications.
Specifically, we analyze the distribution of shocks to assess the plausibility of Assumption 4 (many
conditionally uncorrelated shocks), use balance tests to corroborate the plausibility of Assumption
3 (conditional quasi-random shock assignment), use equivalent shock-level IV regressions to obtain
exposure-robust inference, and analyze the sensitivity of the results to the inclusion of different shock-
level controls. This analysis shows how our quasi-experimental framework can help understand the
identifying variation in the ADH SSIV design.


6.2.1   Setting and Intuition for Identification

ADH use a shift-share IV to estimate the causal effect of rising import penetration from China on
U.S. local labor markets. They do so with a repeated cross section of 722 commuting zones ` and
397 four-digit SIC manufacturing industries n over two periods t, 1990-2000 and 2000-2007. In these
years U.S. commuting zones were exposed to a dramatic rise in import penetration from China, a
historic change in trade patterns commonly referred to as the “China shock.” Variation in exposure to
this change across commuting zones results from the fact that different areas were initially specialized
in different industries which saw different changes in the aggregate U.S. growth of Chinese imports.
ADH combine import changes across industries in eight comparable developed economies (as shocks)
with lagged industry employment (as exposure shares) to construct their shift-share instrument.
   To illustrate our framework in this setting we focus on ADH’s primary outcome of the change


                                                   26
in total manufacturing employment as a percentage of working-age population during period t in
location `, which we write as y`t . The treatment variable x`t measures local exposure to the growth
of imports from China in $1,000 per worker. The vector of controls w`t , which comes from the
preferred specification of ADH (Column 6 of their Table 3), contains start-of-period measures of
labor force demographics, period fixed effects, Census region fixed effects, and the start-of-period
                                                                                        P
total manufacturing share to which we return below. The shift-share instrument is z`t = n s`nt gnt ,
where s`nt is the share of manufacturing industry n in total employment in location ` (measured a
decade before each period t begins) and gnt is industry n’s growth of imports from China in the eight
comparable economies over period t (also expressed in $1,000 per U.S. worker).38 Importantly, the
                                                           P
sum of lagged manufacturing shares across industries (S`t = n s`nt ) is not constant across locations
and periods, placing the ADH instrument in the “incomplete shares” class discussed in Section 4.2.
All regressions are weighted by e`t , which measures the start-of-period population of the commuting
zone, and all variables are measured in ten-year equivalents.
   To see how the ADH instrument can be viewed as leveraging quasi-experimental shocks, it is useful
to imagine an idealized experiment generating random variation in the growth of imports from China
across industries. One could imagine, for example, random variation in industry-specific productivities
in China affecting import growth in both the U.S. and in comparable economies. This would yield a set
of observed productivity changes gnt which would plausibly satisfy our Assumption 1. Assumption
2 would further hold when the productivity shocks are idiosyncratic across many industries, with
small average exposure to each shock across commuting zones. Weaker versions of this experimental
ideal, in which productivity shocks can be partly predicted by industry observables and are only
weakly dependent across industries, are accommodated by the extensions in Section 3.2. For example,
in ADH’s repeated cross section one might invoke Assumption 3 in allowing the average shock to
vary across periods, in recognition that the 1990s and 2000s were very different trade environments,
with China joining the World Trade Organization in 2001. Here qnt would indicate periods. Other
extensions would allow the industry shocks to be serially correlated and clustered by larger groups.
   ADH’s approach can be seen as approximating this idealized experiment by using observed changes
in trade patterns between China and a group of developed countries outside the United States. The
use of non-U.S. data can be seen as avoiding a potential concern of omitted variables bias: trade
between the U.S. and China depends on changes in U.S. supply and demand conditions, which may
 38 To                                                                                                                 current g US .
                                                                                                                   P
         be precise, local exposure to the growth of imports from China is constructed for period t as x`t =        n s`nt      nt
                     US
        US       ∆Mnt                                                                                 US
Here   gnt   =    current
                 Ent
                            is the growth of U.S. imports from China in   thousands of dollars (∆Mnt ) divided by the industry
employment in the U.S. at the beginning of the current period                current ) and scurrent are local employment shares,
                                                                          (Ent              `nt                 P
also measured at the beginning of the period. The instrument,             in contrast, is constructed as z`t =     n s`nt gnt with
         ∆M 8 countries
           nt                    8 countries measures the growth of imports from China in eight comparable economies
gnt =       Ent
                    , where ∆Mnt
(in thousands of U.S. dollars) and both local employment shares s`nt and U.S. employment Ent are lagged by 10 years.
The eight countries are Australia, Denmark, Finland, Germany, Japan, New Zealand, Spain, and Switzerland. Note
that Autor et al. (2013) express the same instrument differently, based on employment shares relative to the industry
total, rather than the regional total. Our way of writing z`t aims to clearly separate the exposure shares from the
industry shocks, highlighting the shift-share structure of the instrument.


                                                                27
have direct effects on employment dynamics in U.S. regions. In contrast, variation in the ADH gnt
reflects only Chinese productivity shocks and the various supply and demand shocks in the non-U.S.
developed countries. In this way, the ADH strategy can be understood as eliminating bias from shocks
that are specific to the United States.
   This discussion gives an a priori justification for thinking of the ADH instrument as leveraging
quasi-experimental shocks within the two periods. Nonetheless, since the ADH shocks are not truly
randomized, one may still worry that they are confounded by other unobserved characteristics. For
example, China’s factor endowment may imply that it specializes in low-skill industries, which could
have been on different employment trends in the U.S. even absent increased trade with China. Simi-
larly, one can imagine a common component of import growth in the U.S. and the group of comparable
developed economies due to correlated technological shocks in those countries, which may have a di-
rect effect on U.S. labor markets. Given these potential concerns, it will be important assess the
plausibility of Assumption 3 in this setting by conducting within-period falsification tests of the kind
we describe in Section 5.2. It will also be important to access whether there is sufficient variation in
the ADH shocks for Assumption 4 to hold, allowing for serial correlation and clustering.
   Before applying these tests, it is worth highlighting that the assumption of exogenous exposure
shares, as discussed by Goldsmith-Pinkham et al. (2020), is likely to be a priori implausible in the
ADH setting. As indicated in Section 2.2, any unobserved shocks νn invalidate the share exogeneity
assumption if they enter the error ε` in a manner which is correlated with the shares. Because ADH
use generic manufacturing employment shares to instrument for a specific treatment variable, the
possibility of other industry shocks entering ε` looms large. These unobserved shocks could take
many forms, for example heterogeneous speeds of automation, secular changes in consumer demand,
or changes in factor prices which differentially affect industries based on their skill intensity.
   With a plausible justification of our framework in hand, we next illustrate its application.


6.2.2      Properties of Industry Shocks and Exposure Shares

Our quasi-experimental view of the ADH research design places particular emphasis on the variation
in Chinese import growth rates gnt and their average exposure snt across industries and periods. With
few or insufficiently-variable shocks, or highly concentrated shocks exposure, the large-N asymptotic
approximation developed in Section 3.1 is unlikely to be a useful tool for characterizing the finite-
sample behavior of the SSIV estimator. We thus first summarize the distribution of gnt , as well as
                                                             P
the industry-level weights from our equivalence result, snt ∝ ` e`t s`nt (normalized to add up to one
in the entire sample).39
   In summarizing the industry-level variation it is instructive to recall that the ADH instrument is
constructed with “incomplete” manufacturing shares. Per the discussion in Section 4.2, this means that
 39 Note  that snt would be proportional to lagged industry employment if the ADH regression weights e`t were lagged
regional employment. ADH however use a slightly different e`t : the start-of-period commuting zone population.


                                                        28
absent any regression controls the SSIV estimator uses variation not only in manufacturing industry
shocks but also implicitly the variation in the 10-year lagged total manufacturing share S`t across
commuting zones and periods. In practice, ADH control for the start-of-period manufacturing share,
which is highly—though not perfectly—correlated with S`t . We thus summarize the ADH shocks both
with and without the “missing” shock g0t = 0, which here represents the lack of a “China shock” in
service (i.e. non-manufacturing) industries. Moreover, in recognition of the fact that the Chinese trade
environment was very different in the 1990s and 2000s, so shock exogeneity may only plausibly hold
across industries, within periods, we focus on the within-period variation in manufacturing shocks.
    Table 1 reports summary statistics for the ADH shocks gnt computed with importance weights
snt , and characterizes these weights. Column 1 includes the “missing” service industry shock of zero
in each period. It is evident that with this shock the distribution of gnt is unusual: for example,
its interquartile range is zero. This is because the service industry accounts for a large fraction of
total employment (s0t is 71.9% of the period total in the 1990s and 79.5% in the 2000s). As a result
we see a high concentration of industry exposure as measured by the inverse of its Herfindahl index
(HHI), 1/ n,t s2nt , which corresponds to the effective sample size of our equivalent regression and
          P

plays a key role in Assumption 2. With the “missing” shock included, the effective sample size is
only 3.5. For an HHI computed at the level of three-digit industry codes c s2c , where sc aggregates
                                                                        P

exposure across the two periods and industries within the same 3-digit group c, it is even lower, at
1.7. This suggests even less industry-level variation is available when shocks are allowed to be serially
correlated or clustered by groups. Furthermore, the mean of manufacturing shocks is significantly
different from the zero shock of the missing service industry.40 Together, these analyses suggest that
the service industry should be excluded from the identifying variation, because it is likely to violate
both Assumption 1 (E [gnt | ε̄, s] 6= g0t = 0) and Assumption 2 ( n,t s2nt is not close to zero).
                                                                 P

    Column 2 of Table 1 therefore summarizes the sample with the service industry excluded. The
distribution of shocks is now much more regular, with an average of 7.4, a standard deviation of 20.9
and an interquartile range of 6.6. The inverse HHI of the snt is also relatively high: 191.6 across
industry-by-period cells and 58.4 when exposure is aggregated by SIC3 group. The largest shock
weights in this column are only 3.4% across industry-by-periods and 6.5% across SIC3 groups. This
suggests a sizable degree of variation at the industry level, consistent with Assumption 2. In general, we
recommend that researchers report the inverse of the HHI of shock-level average exposure as a simple
way of describing their effective sample size. A first-stage F -statistic, which we discuss appropriate
computation of in Section 5.2, will provide a formal test of the power of the shock variation.
    Finally, column 3 of Table 1 summarizes the distribution of within-period manufacturing shocks,
which would be leveraged by an assumption of conditional quasi-experimental assignment (Assumption
3). The column confirms that even conditional on period there is sizable residual shock variation.
  40 The weighted mean of manufacturing shocks is 7.4, with a standard error clustered at the 3-digit SIC level (as in

our analysis below) of 1.3.


                                                         29
The standard deviation and interquartile range of shock residuals (obtained from regressing shocks
on period fixed effects with snt weights) are only mildly smaller than in Column 2, despite the higher
mean shock in the later period, at 12.6 versus 3.6.
    Besides the condition on the effective sample size, Assumption 2 (and its clustered version in
Assumption 5) requires the shocks to be sufficiently mutually uncorrelated. To assess the plausibility
of this assumption and choose the appropriate level of clustering for exposure-robust standard errors,
we next analyze the correlation patterns of shocks across manufacturing industries using available
industry classifications and the time dimension of the pooled cross section. In particular, we compute
intra-class correlation coefficients (ICCs) of shocks within different industry groups, as one might do
to correct for conventional clustering parametrically (e.g. Angrist and Pischke (2008, p. 312)).41
These ICCs come from a random effects model, providing a hierarchical decomposition of residual
within-period shock variation:


                              gnt = µt + aten(n),t + bsic2(n),t + csic3(n),t + dn + ent ,                              (14)


where µt are period fixed effects; aten(n),t , bsic2(n),t , and csic3(n),t denote time-varying (and possibly
auto-correlated) random effects generated by the ten industry groups in Acemoglu et al. (2016), 20
groups identified by SIC2 codes, and 136 groups corresponding to SIC3 codes, respectively; and dn is a
time-invariant industry random effect (across our 397 four-digit SIC industries). Following convention,
we estimate equation (14) as a hierarchical linear model by maximum likelihood, assuming Gaussian
residual components.42
    Table 2 reports estimated ICCs from equation (14), summarizing the share of the overall shock
residual variance due to each random effect. These reveal moderate clustering of shock residuals at
the industry and SIC3 level (with ICCs of 0.169 and 0.073, respectively). At the same time, there
is less evidence for clustering of shocks at a higher SIC2 level and particularly by ten cluster groups
(ICCs of 0.047 and 0.016, respectively, with standard errors of comparable magnitude). This supports
the assumption that shocks are mean-independent across SIC3 clusters, so it will be sufficient to
cluster standard errors at the level of SIC3 groups, as Acemoglu et al. (2016) do in their conventional
industry-level IV regressions. The inverse HHI estimates in Table 1 indicate that at this level of shock
clustering there is still an adequate effective sample size.
   41 Note that similar ICC calculations could be implemented in a setting that directly regresses industry outcomes on

industry shocks, such as Acemoglu et al. (2016). Mutual correlation in the instrument is a generic concern that is not
specific to shift-share designs, although one that is rarely tested for. Getting the correlation structure in shocks right is
especially important for inference in our framework, since the outcome and treatment in the industry-level regression
   ⊥ and x̄⊥ ) are by construction correlated across industries.
(ȳnt       nt
   42 In particular we estimate an unweighted mixed-effects regression using Stata’s mixed command, imposing an ex-

changeable variance matrix for (aten(n),1 , aten(n),2 ), (bsic2(n),1 , bsic2(n),2 ), and (csic3(n),1 , csic3(n),2 ).




                                                             30
6.2.3    Falsification Tests

We next implement falsification tests of ADH shock orthogonality, which provide a way of assessing
the plausibility of Assumption 3. Following Section 5.2, we do this in two ways, both different from
conventional falsification tests sometimes run in SSIV settings. First, we regress potential proxies for
the unobserved residual (i.e., any unobserved industry labor demand or labor supply shock) on the
instrument z` but use exposure-robust inference that takes into account the inherent dependencies of
the data. Second, we regress potential industry-level confounders directly on the shocks (while again
clustering by SIC3). While this second type of falsification tests would be standard in industry-level
analyses, such as Acemoglu et al. (2016), it has rarely been used to assess the plausibility of SSIV
designs (with Xu (2019), mentioned above, being a rare exception).
   Choosing the set of potential confounders for these exercises is a context-specific issue, which
should be justified separately in every application. To discipline our illustrative exercise, we use
the industry-level production controls in Acemoglu et al. (2016) and the regional controls in ADH.
Consistent with our a priori view of the quasi-experiment, we maintain only the period fixed effects as
controls when evaluating balance on these other observables. For the industry-level balance test this
amounts to regressing each potential confounder on the manufacturing shocks (normalized to have a
unit variance) and period fixed effects, weighting by average industry employment shares. Regional
balance coefficients are obtained by regressing each potential confounder on the shift-share instrument
(normalized to have a unit variance) and the share-weighted average of period effects (i.e., the period-
interacted sum-of-shares), since ADH is a setting with incomplete shares. To obtain exposure-robust
standard errors, we implement these regressions at the shock level, as discussed above.
   Panel A of Table 3 reports the results of our industry-level balance tests. The five Acemoglu et
al. (2016) production controls are an industry’s share of production workers in employment in 1991,
the ratio of its capital to value-added in 1991, its log real wages in 1991, the share of its investment
devoted to computers in 1990, and the share of its high-tech equipment in total investment in 1990.43
Broadly, these variables reflect the structure of employment and technology across industries. If the
ADH shocks are as-good-as-randomly assigned to industries within periods, we expect them to not
predict these predetermined variables. Panel A shows that there is indeed no statistically significant
correlation within periods, consistent with Assumption 3.
   Panel B of Table 3 reports the results of our regional balance tests. The five ADH controls are
the fraction of a commuting zone’s population who is college-educated, the fraction of its population
who is foreign-born, the fraction of its workers who are female, its fraction of employment in routine
occupations, and the average offshorability index of its occupations. Broadly, these variables reflect
the composition of a region’s workforce. We again find no statistically significant relationships between
  43 The last two controls are missing for five out of 397 industries. We impute the missing values by the medians in

the SIC3 industry group or, when not available, in the SIC2 group.




                                                         31
these variables and the shift-share instrument within periods, except for the foreign-born population
fraction. Locations exposed to a large ADH trade shock tend to have a higher fraction of immigrants,
suggesting that they may be subject to different labor supply dynamics. We explore the importance
of this imbalance for the SSIV coefficient estimate in sensitivity tests below.
   Finally, the last two rows of the same panel conduct a regional “pre-trends” analysis. We regress the
pre-trend variables from ADH—manufacturing employment growth in the 1970s and 1980s—on the
shift-share instrument, using the same specification as in the previous rows. We find no relationship
between the shift-share instrument and manufacturing employment growth in the 1980s, but there is
a positive statistically significant relationship with manufacturing employment growth in the 1970s.
Both findings are similar to those from ADH’s pre-trend analysis.
   Overall, we fail to reject imbalance in ten out of the twelve potential confounders at conventional
levels of statistical significance. How to proceed when some balance tests fail is a general issue in
quasi-experimental analyses and has to be decided in the context of an application. One might
view the balance failures as sufficient evidence against Assumption 3 to seek alternative shocks or
more appropriate shock-level controls. Alternatively, one may argue that the observed imbalances
are unlikely to invalidate the research design. ADH, for example, note that the positive relationship
they find between the shift-share instrument and manufacturing employment in the 1970s occurs in
the distant past, while the insignificant relationship in the 1980s demonstrates that the relationship
between rising China trade exposure and declining manufacturing employment was absent in the
decade immediately prior to China’s rise. Similarly the imbalance of the foreign-born share that we
observe need not generate a bias in the estimate if it is not strongly correlated with the second-stage
residual. To gauge this potential for OVB one can include such variables as controls in the SSIV
specification and check sensitivity of the coefficient; we report results of this exercise next.


6.2.4    Main Estimates and Sensitivity Analyses

We next estimate the effects of import competition on local labor market outcomes, leveraging within-
period exogeneity of the industry shocks gnt . We then check sensitivity of results to inclusion of the
Autor et al. (2013) regional controls and Acemoglu et al. (2016) industry-level controls.
   Table 4 reports SSIV coefficients from regressing regional manufacturing employment growth in
the U.S. on the growth of import competition from China, instrumented by predicted Chinese import
growth.44 Per the results in Section 5.1, we estimate these coefficients with equivalent industry-level
regressions in order to obtain valid exposure-robust standard errors. Consistent with the above analysis
of shock ICCs, we cluster standard errors at the SIC3 level. We also report first-stage F -statistics with
corresponding exposure-robust inference. As discussed in Section 5.2, these come from industry-level
IV regressions of the aggregated treatment and instrument (i.e. x̄⊥       ⊥
                                                                  nt on z̄nt ), instrumented with shocks
 44 Appendix   Table C1 reports estimates for other outcomes in ADH: growth rates of unemployment, labor force
non-participation, and average wages, corresponding to columns 3 and 4 of Table 5 and column 1 of Table 6 in ADH.


                                                       32
and weighting by snt . The F -statistics are well above the conventional threshold of ten in all columns
of the table.
    Column 1 first replicates column 6 of Table 3 in Autor et al. (2013) by including in w`t period fixed
effects, Census division fixed effects, start-of-period conditions (% college educated, % foreign-born,
% employment among women, % employment in routine occupations, and the average offshorability
index), and the start-of-period manufacturing share. The point estimate is -0.596, with a corrected
standard error of 0.114.45
    As noted, the ADH specification in column 1 does not include the lagged manufacturing share
control S`t , which is necessary to solve the incomplete shares issue in Section 4.2, though it does
include a highly correlated control (start-of-period manufacturing share). In column 2 of Table 4
we isolate within-manufacturing variation in shocks by replacing the latter sum-of-share control with
the former. The SSIV point estimate remains almost unchanged, at -0.489 (with a standard error
of 0.100). Here exposure-robust standard errors are obtained from an industry-level regression that
drops the implicit service sector shock of g0t = 0.
    Isolating the within-period variation in manufacturing shocks requires further controls in the in-
complete shares case, as discussed in Section 4.2. Specifically, column 3 controls for lagged manufac-
turing shares interacted with period indicators, which are the share-weighted sums of period effects
in qnt . This is equivalent to the use of period fixed effects in the industry-level analysis of Acemoglu
et al. (2016). With these controls the SSIV point estimate is -0.267 with an exposure-robust standard
error of 0.099.46 While the coefficient remains statistically and economically significant, it is smaller
in magnitude than the estimates in columns 1 and 2. The difference stems from the fact that 2000–07
saw both a faster growth in imports from China (e.g., due to its entry to the WTO) and a faster
decline in U.S. manufacturing. The earlier columns attribute the faster manufacturing decline to
increased trade with China, while the specification in Column 3 controls for any unobserved shocks
specific to the manufacturing sector overall in the 2000s (e.g., any demand or supply shock affecting
the manufacturing sector, which could include automation, innovation, falling consumer demand due
to income effects, etc.). Conventional industry-level IV regressions control for such unobserved shocks
  45 Appendix Table C2 implements three alternative methods for conducting inference in Table 4, reporting conventional

state-clustered standard errors as in ADH (which are not exposure-robust), the Adão et al. (2019) standard errors (which
are asymptotically equivalent to ours but differ in finite samples), and null-imposed confidence intervals obtained from
shock-level Lagrange multiplier tests (which may have better finite-sample properties). Consistent with the theoretical
discussion in Appendix B.2, the conventional standard errors are generally too low, while the Adão et al. (2019) standard
errors are slightly larger than those from Table 4 in most columns. Imposing the null widens the confidence interval
more substantially, by 30–50%, although more so on the left end, suggesting that much larger effects are not rejected
by the data. This last finding is consistent with Adão et al. (2019), except that we use the equivalent industry-level
regression to compute the null-imposed confidence interval.
  46 Appendix Figure C1 reports binned scatter plots that illustrate the first-stage and reduced-form industry-level

relationships corresponding to the column 3 specification. This estimate can be interpreted as a weighted average of
two period-specific shift-share IV coefficients. Column 1 of Appendix Table C3 shows the underlying estimates, from
a just-identified IV regression where both treatment and the instrument are interacted with period indicators (as well
as the manufacturing share control, as in column 3), with exposure-robust standard errors obtained by the equivalent
industry-level regression discussed in Section 5. The estimated effect of increased Chinese import competition is negative
in both periods (–0.491 and –0.225). Other columns repeat the analysis for other outcomes.




                                                           33
with period fixed effects, as in Table 3, column 1 of Acemoglu et al. (2016).47 The translation of their
industry specification into the regional setup of ADH requires interacting the lagged manufacturing
shares with period indicators, a simple but important insight of our framework.
    Column 4 implements a simple sensitivity test to assess the stability of the results when the
controls from ADH are omitted. This test is motivated by the result of the balance test in panel B of
Table 3, which indicated that the shift-share instrument was correlated with the share of foreign born
population. It is therefore instructive to see whether the headline regression coefficient is sensitive to
the inclusion of this and other controls. In fact, we find that the results remain very similar without
controls, with a point estimate of -0.314 and an exposure-robust standard error of 0.134. We proceed
by keeping the ADH controls for the remainder of the analysis.
    Further columns of Table 4 parallel the specifications of Acemoglu et al. (2016, Table 3) that
include further industry-level controls. This illustrates how our framework makes it straightforward
to introduce more detailed industry-level controls in SSIV, which are commonly used in industry-level
studies of the China shock. The validity of these estimates relies on weaker versions of conditional ran-
dom assignment (Assumption 3), and robustness of the coefficients is therefore reassuring. Specifically,
Acemoglu et al. (2016) control for fixed effects of ten broad industry groups (one-digit manufacturing
sectors) in column 2 of their Table 3. By Proposition 4, we can exploit shock variation within these
industry groups in the SSIV design by controlling for the lagged shares of exposure to these industry
groups (and including fixed effects of these groups in the equivalent industry regressions for correct
inference, per Section 5.1). The resulting point estimate in column 5 of Table 4 remains very similar
to that of column 3, at -0.310 with a standard error of 0.134.
    Column 6 instead parallels the specification of Acemoglu et al. (2016) that includes production
controls, which we used for the balance tests in Panel A of Table 3. This is done by controlling for
the regional share-weighted sums of those controls. The results remain virtually unchanged, with a
regression coefficient of -0.293 and an exposure-robust standard error of 0.125.
    Finally, column 7 instead introduces industry fixed effects, again following Acemoglu et al. (2016).
This specification is more ambitious because it isolates changes in trade with China within each four-
digit SIC industry, across the two periods. To translate the industry fixed effects to the location-level
setup, we control for the lagged location-specific share of exposure to each industry.48 The magnitude
of the regression coefficient increases, to -0.432, with an exposure-robust standard error of 0.205.
  47 In principle, China could have affected the path of the U.S. manufacturing sector as a whole, and thus the variation

in the average China shock across periods may be informative about the effects of interest. However, because of the
multiplicity of shocks that may affect the manufacturing sector as a whole in a given period, this variation cannot
be viewed as a quasi-experimental source of variation for the impact of trade with China on employment and other
outcomes. This is why industry-level studies of the China shock use period fixed effects, possibly reducing power but
substantially improving robustness of the estimates. In the ADH application the estimation power is not actually
reduced, as the Table 4 column 3 standard error is even slightly smaller than that in the previous columns.
  48 If the shares used to construct the instrument were time-invariant, a more conventional and intuitive way to exploit

over-time variation in the shocks would be by including the regional fixed effects in the regression, as Section 4.1
explained. In the ADH setting where the shares vary over time, they need to be controlled for directly.




                                                           34
Broadly, these results demonstrate the stability of the SSIV regression coefficient under alternative
sets of controls, corresponding to different assumptions of conditional quasi-random shock assignment.
    The appendix reports estimates from additional specifications. Appendix Table C4 includes addi-
tional controls corresponding to other specifications of Acemoglu et al. (2016), Table 3: for example,
controlling for observed changes in employment in the pre-periods or combining multiple sets of con-
trols. The regression coefficients remain stable across all specifications. Appendix Table C5 instead
shows robustness of the coefficients to using overidentified SSIV procedures (leveraging variation in
eight country-specific Chinese import growth, instead of the ADH total), illustrating the theoretical
results of Section 4.4. The table also reports a p-value for the shock-level overidentification test of
0.142, providing further support to the identification assumptions.


6.2.5    Discussion

Taken together, the sensitivity, falsification, and overidentification exercises suggest that the ADH
approach can be reasonably viewed as leveraging exogenous shock variation via our framework. This
is notably in contrast to the analysis of Goldsmith-Pinkham et al. (2020), who find the ADH exposure
shares to be implausible instruments via different balance and overidentification tests. This contrast
should perhaps come as no surprise. As mentioned, the exogeneity of industry employment shares is
an ex ante implausible research design, because it is invalidated by any unobserved labor demand or
supply shocks across industries (which we view as an inherent feature of the economy).
    In contrast, our approach relies on the exogeneity of the specific ADH trade shocks, allowing for
endogenous exposure shares. With this view, the potential confounders are a more specific set of
unobserved industry shocks (namely, unobserved shocks that would correlate with the ADH shocks),
rather than any unobserved shocks. In principle, the conditions for shock orthogonality could still fail
because of these specific unobserved shocks. In practice, our balance tests indicate that there is little
evidence to suggest that the ADH shocks are confounded.
    Our ADH application therefore illustrates two points. First, the assumptions of our framework
are plausible, both ex ante and ex post, in an influential empirical setting, where an alternative SSIV
framework is inapplicable. Second, our framework helps researchers translate shock-level identify-
ing assumptions to appropriate SSIV regression controls, falsify those assumptions with appropriate
balance tests, and perform correct inference.



7       Conclusion
Shift-share instruments combine a common set of observed shocks with variation in shock exposure.
In this paper, we provide a quasi-experimental framework for the validity of such instruments based
on identifying variation in the shocks, allowing the exposure shares to be endogenous. Our framework



                                                   35
revolves around novel equivalence results: the orthogonality between a shift-share instrument and an
unobserved residual can be represented as the orthogonality between the underlying shocks and a
shock-level unobservable, and SSIV regression coefficients can be obtained from a transformed shock-
level regression with shocks directly used as an instrument. Shift-share instruments are therefore valid
when shocks are idiosyncratic with respect to an exposure-weighted average of the unobserved factors
determining the outcome variable, and yield consistent IV estimates when the number of shocks is
large and they are sufficiently dispersed in terms of their average exposure.
   Through various extensions and illustrations, we show how our quasi-experimental SSIV framework
can guide empirical work in practice. By controlling for exposure-weighted averages of shock-level
confounders, researchers can isolate more plausibly exogenous variation in shocks, such as over time
or within narrow industry groups. By estimating SSIV coefficients, placebo regressions, and first stage
F -statistics at the level of shocks, researchers can conveniently perform exposure-robust inference
that accounts for the inherent non-standard clustering of observations with common shock exposure.
Our shock-level analysis also raises new concerns: SSIV designs with few or insufficiently dispersed
shocks may have effectively small samples, despite there being many underlying observations, and
instruments constructed from exposure shares that do not add up to a constant require appropriate
controls in order to isolate quasi-random shock variation. We illustrate these practical implications
in an application to the influential study of Autor et al. (2013).
   In sum, our analysis formalizes the claim that SSIV identification and consistency may arise from
the exogeneity of shocks, while providing new guidance for SSIV estimation and inference that may
be applied across a number of economic fields, including international trade, labor economics, urban
economics, macroeconomics, and public finance. Our shock-level assumptions connect SSIV in these
settings to conventional shock-level IV estimation, bringing shift-share instruments to more familiar
econometric territory and facilitating the assessment of SSIV credibility in practice.




                                                   36
Figures and Tables




                  Table 1: Shock Summary Statistics in the Autor et al. (2013) Setting


                                                                   (1)      (2)      (3)

                              Mean                                1.79     7.37       0

                              Standard deviation                 10.79    20.92    20.44

                              Interquartile range                   0      6.61     6.11

                              Specification

                              Excluding service industries                          

                              Residualizing on period FE                             

                              Effective sample size (1/HHI of snt weights)

                              Across industries and periods        3.5    191.6    191.6

                              Across SIC3 groups                   1.7     58.4     58.4

                              Largest snt weight

                              Across industries and periods      0.398    0.035    0.035

                              Across SIC3 groups                 0.757    0.066    0.066

                              Observation counts

                              # of industry-period shocks         796      794      794

                              # of industries                     398      397      397

                              # of SIC3 groups                    137      136      136

Notes: This table summarizes the distribution of China import shocks gnt across industries n and periods t in the
Autor et al. (2013) application. Shocks are measured as the total flow of imports from China in eight developed
economics outside of the United States. All statistics are weighted by the average industry exposure shares snt ; shares
are measured from lagged manufacturing employment, as described in Section 6.2.1. Column 1 includes the non-
manufacturing industry aggregate in each period with a shock of 0, while columns 2 and 3 restrict the sample to
manufacturing industries. Column 3 residualizes manufacturing shocks on period indicators. We report the effective
sample size (the inverse renormalized Herfindahl index of the snt weights, as described in Section 6.2.2) with and
without the non-manufacturing industry, at the industry-by-period level and at the level of SIC3 groups (aggregated
across periods), along with the largest snt .




                                                          37
                Table 2: Shock Intra-Class Correlations in the Autor et al. (2013) Setting


                                                                Estimate          SE

                                                                   (1)            (2)

                                    Shock ICCs

                                    10 sectors                    0.016         (0.022)

                                    SIC2                          0.047         (0.052)

                                    SIC3                          0.073         (0.057)

                                    Industry                      0.169         (0.047)

                                    Period means

                                    1990s                         4.65          (1.38)

                                    2000s                         16.87         (3.34)

                                    # of industry-periods                 794

Notes: This table reports intra-class correlation coefficients for the Autor et al. (2013) manufacturing shocks, estimated
from the hierarchical model described in Section 6.2.2. Estimates come from a maximum likelihood procedure with
an exchangeable covariance structure for each industry and sector random effect and with period fixed effects. Robust
standard errors are reported in parentheses.




                                                           38
                       Table 3: Shock Balance Tests in the Autor et al. (2013) Setting

                                          Panel A: Industry-Level Balance

                  Balance variable                                                      Coef.          SE

                  Production workers’ share of employment, 1991                         -0.011     (0.012)

                  Ratio of capital to value-added, 1991                                 -0.007     (0.019)

                  Log real wage (2007 USD), 1991                                        -0.005     (0.022)

                  Computer investment as share of total, 1990                           0.750      (0.465)

                  High-tech equipment as share of total investment, 1990                0.532      (0.296)

                  # of industry-periods                                                          794




                                              Panel B: Regional Balance

                Balance variable                                                          Coef.          SE

                Start-of-period % of college-educated population                          0.915        (1.196)

                Start-of-period % of foreign-born population                              2.920        (0.952)

                Start-of-period % of employment among women                               -0.159       (0.521)

                Start-of-period % of employment in routine occupations                    -0.302       (0.272)

                Start-of-period average offshorability index of occupations               0.087        (0.075)

                Manufacturing employment growth, 1970s                                    0.543        (0.227)

                Manufacturing employment growth, 1980s                                    0.055        (0.187)

                # of region-periods                                                              1,444
Notes: Panel A of this table reports coefficients from regressions of the industry-level covariates in Acemoglu et al. (2016)
on the Autor et al. (2013) shocks, controlling for period indicators and weighting by average industry exposure shares.
Standard errors are reported in parentheses and allow for clustering at the level of three-digit SIC codes. Panel B
reports coefficients from regressions of commuting zone-level covariates and pre-trends from Autor et al. (2013) on
the shift-share instrument, controlling for period indicators interacted with the lagged manufacturing share. Balance
variables (the first five rows of this panel) vary across the two periods, while pre-trends (the last two rows) do not.
SIC3-clustered exposure-robust standard errors are reported in parentheses and obtained from equivalent industry-level
IV regressions as described in Section 6.2.3. Independent variables in both panels are normalized to have a variance of
one in the sample.




                                                             39
 Table 4: Shift-Share IV Estimates of the Effect of Chinese Imports on Manufacturing Employment



                                                 (1)        (2)        (3)        (4)        (5)        (6)         (7)

 Coefficient                                   -0.596     -0.489     -0.267     -0.314      -0.310     -0.290     -0.432

                                              (0.114)     (0.100)    (0.099)    (0.107)    (0.134)    (0.129)    (0.205)

 Regional controls

 Autor et al. (2013) controls                                                                                  

 Start-of-period mfg. share                      

 Lagged mfg. share                                                                                             

 Period-specific lagged mfg. share                                                                              

 Lagged 10-sector shares                                                                                           

 Local Acemoglu et al. (2016) controls                                                                   

 Lagged industry shares                                                                                             

 SSIV first stage F -stat.                     185.6       166.7      123.6      272.4       64.6       63.3       27.6

 # of region-periods                           1,444       1,444      1,444      1,444      1,444      1,444      1,444

 # of industry-periods                          796         794        794        794        794        794        794

Notes: This table reports shift-share IV coefficients from regressions of regional manufacturing employment growth
in the U.S. on the growth of import competition from China, instrumented with predicted China import growth as
described in Section 6.2.1. Column 1 replicates column 6 of Table 3 in Autor et al. (2013) by controlling for period fixed
effects, Census division fixed effects, start-of-period conditions (% college educated, % foreign-born, % employment
among women, % employment in routine occupations, and the average offshorability index), and the start-of-period
manufacturing share. Column 2 replaces the start-of-period manufacturing shares control with the lagged manufacturing
shares underlying the instrument, while column 3 interacts this control with period indicators. Column 4 removes the
Census division fixed effects and start-of-period covariates. Columns 5–7 instead add exposure-weighted sums of industry
controls from Acemoglu et al. (2016): indicators of 10 industry sectors (column 5), production controls (column 6), and
indicators of 397 industries (column 7). Production controls are: employment share of production workers, ratio of
capital to value-added, log real wage (all measured in 1991); and computer investment as share of total and high-
tech equipment as share of total employment (both measured in 1990). Exposure-robust standard errors (reported in
parentheses) and first-stage F -statistics are obtained from equivalent industry-level IV regressions, as described in the
text, allowing for clustering of shocks at the level of three-digit SIC codes. For commuting zone controls which have
a shift-share structure (all controls starting with the lagged manufacturing share), we include the corresponding qnt
controls in the industry-level IV regression. The sample in columns 2–7 includes 722 locations (commuting zones) and
397 industries, each observed in two periods; the estimate in column 1 implicitly includes an additional two observations
for the non-manufacturing industry with a shock of zero in each period.




                                                           40
References
Abadie, Alberto, Susan Athey, Guido W. Imbens, and Jeffrey M. Wooldridge. 2019.
   “Sampling-based vs. Design-based Uncertainty in Regression Analysis.” Working Paper.

Acemoglu, Daron, David H. Autor, David Dorn, Gordon H. Hanson, and Brendard Price.
   2016. “Import Competition and the Great U.S . Employment Sag of the 2000s.” Journal of Labor
   Economics 34:S141–S198.

Acemoglu, Daron, and Pascual Restrepo. Forthcoming. “Robots and Jobs: Evidence from US
   Labor Markets.” Journal of Political Economy.

Adão, Rodrigo, Michal Kolesár, and Eduardo Morales. 2019. “Shift-Share Designs: Theory
   and Inference.” The Quarterly Journal of Economics 134:1949–2010.

Algan, Yann, Sergei Guriev, Elias Papaioannou, and Evgenia Passari. 2017. “The European
   Trust Crisis and the Rise of Populism.” Brookings Papers on Economic Activity 2017:309–400.

Angrist, Joshua D., Kate Graddy, and Guido W. Imbens. 2000. “The Interpretation of In-
   strumental Variables Estimators in Simultaneous Equations Models with an Application to the
   Demand for Fish.” The Review of Economic Studies 67:499–527.

Angrist, Joshua D., Guido W. Imbens, and Alan B. Krueger. 1999. “Jackknife Instrumental
   Variables Estimation.” Journal of Applied Econometrics 14:57–67.

Angrist, Joshua D., and JS Pischke. 2008. Mostly Harmless Econometrics: An Empiricist’s Com-
   panion. Princeton University Press.

Autor, David H., David Dorn, and Gordon H. Hanson. 2013. “The China Syndrome: Local
   Labor Market Effects of Import Competition in the United States.” American Economic Review
   103:2121–2168.

       . 2019. “When Work Disappears: Manufacturing Decline and the Falling Marriage-Market Value
    of Young Men.” American Economic Review: Insights 1:161–178.

Autor, David H., and Mark G. Duggan. 2003. “The Rise in the Disability Rolls and the Decline
   in Unemployment.” The Quarterly Journal of Economics 118:157–205.

Bartik, Timothy J. 1991. Who Benefits from State and Local Economic Development Policies?
   Kalamazoo, MI: W. E. Upjohn Institute for Employment Research.

Bekker, Paul A. 1994. “Alternative Approximations to the Distributions of Instrumental Variable
   Estimators.” Econometrica 62:657.

Berman, Nicolas, Antoine Berthou, and Jérôme Héricourt. 2015. “Export Dynamics and Sales
   at Home.” Journal of International Economics 96:298–310.

Berman, Nicolas, Mathieu Couttenier, Dominic Rohner, and Mathias Thoenig. 2017. “This
   mine is mine! How minerals fuel conflicts in Africa.” American Economic Review 107:1564–1610.

Blanchard, Olivier Jean, and Lawrence F. Katz. 1992. “Regional Evolutions.” Brookings Papers
   on Economic Activity: 1–75.




                                               41
Bombardini, Matilde, and Bingjing Li. 2019. “Trade , Pollution and Mortality in China.” Working
   Paper.

Borusyak, Kirill, and Xavier Jaravel. 2017. “Revisiting Event Study Designs, with an Application
   to the Estimation of the Marginal Propensity to Consume.” Working Paper.

Bound, John, David A. Jaeger, and Regina M. Baker. 1995. “Problems with instrumental vari-
   ables estimation when the correlation between the instruments and the endogenous explanatory
   variable is weak.” Journal of the American Statistical Association 90:443–450.

Boustan, Leah, Fernando Ferreira, Hernan Winkler, and Eric M. Zolt. 2013. “The Effect of
   Rising Income Inequality on Taxation and Public Expenditures: Evidence from U.S. Municipali-
   ties and School Districts, 1970-2000.” The Review of Economics and Statistics 95:1291–1302.

Broxterman, Daniel A, and William D Larson. 2018. “An Examination of Industry Mix Demand
   Indicators : The Bartik Instrument at Twenty-Five.” Working Paper.

Card, David. 2001. “Immigrant Inflows, Native Outflows, and the Local Labor Market Impacts of
   Higher Immigration.” Journal of Labor Economics 19:22–64.

      . 2009. “Immigration and Inequality.” American Economic Review 99:1–21.

Chaisemartin, Clément de, and Xavier D’Haultfoeuille. 2019. “Two-way Fixed Effects Esti-
   mators with Heterogeneous Treatment Effects.” NBER Working Paper No. 25904.

Diamond, Rebecca. 2016. “The Determinants and Welfare Implications of US Workers’ Diverging
   Location Choices by Skill: 1980-2000.” American Economic Review 106:479–524.

Fajgelbaum, Pablo D., Pinelopi K. Goldberg, Patrick J. Kennedy, and Amit K. Khan-
    delwal. 2020. “The Return to Protectionism.” Quarterly Journal of Economics 135:1–55.

Goldsmith-Pinkham, Paul, Isaac Sorkin, and Henry Swift. 2020. “Bartik Instruments: What,
   When, Why, and How.” American Economic Review 110:2586–2624.

Goodman-Bacon, Andrew. 2018. “Difference-in-Differences with Variation in Treatment Timing.”
   NBER Working Paper 25018.

Hansen, Lars Peter. 1982. “Large Sample Properties of Generalized Method of Moments Estima-
   tors.” Econometrica 50:1029–1054.

Hudson, Sally, Peter Hull, and Jack Liebersohn. 2017. “Interpreting Instrumented Difference-
   in-Differences.” Mimeo.

Hull, Peter. 2018. “Estimating Treatment Effects in Mover Designs.” Working Paper.

Hummels, David, Rasmus Jorgensen, Jakob Munch, and Chong Xiang. 2014. “The Wage
  Effects of Offshoring: Evidence From Danish Matched Worker-Firm Data.” American Economic
  Review 104:1597–1629.

Imbert, Clement, Marlon Seror, Yifan Zhang, and Yanos Zylberberg. 2019. “Migrants and
   Firms: Evidence from China.” Working Paper.

Jaeger, David A, Joakim Ruist, and Jan Stuhler. 2018. “Shift-Share Instruments and Dynamic
    Adjustments: The Case of Immigration.” Working Paper.



                                              42
Jaravel, Xavier. 2019. “The Unequal Gains from Product Innovations: Evidence from the U.S. Retail
    Sector.” The Quarterly Journal of Economics 134:715–783.

Kolesar, Michal, Raj Chetty, John Friedman, Edward Glaeser, and Guido W. Imbens.
   2015. “Identification and Inference With Many Invalid Instruments.” Journal of Business and
   Economic Statistics 33:474–484.

Kovak, Brian K. 2013. “Regional Effects of Trade Reform: What is the Correct Measure of Liber-
   alization?” American Economic Review 103:1960–1976.

Mohnen, Paul. 2019. “The Impact of the Retirement Slowdown on the U.S. Youth Labor Market.”
   Working Paper.

Montiel Olea, Jose Luis, and Carolin Pflueger. 2013. “A robust test for weak instruments.”
   Journal of Business and Economic Statistics 31:358–369.

Moulton, Brent R. 1986. “Random group effects and the precision of regression estimates.” Journal
   of Econometrics 32:385–397.

Nunn, Nathan, and Nancy Qian. 2014. “US Food Aid and Civil Conflict.” American Economic
   Review 104:1630–1666.

Peri, Giovanni, Kevin Shih, and Chad Sparber. 2016. “STEM workers, H-1B Visas, and pro-
    ductivity in US cities.” Journal of Labor Economics 49:277–307.

Stuen, Eric T., Ahmed Mushfiq Mobarak, and Keith E. Maskus. 2012. “Skilled Immigra-
    tion and Innovation: Evidence from Enrolment Fluctuations in U.S. Doctoral Programmes.” The
    Economic Journal 122:1143–1176.

Suárez Serrato, Juan Carlos, and Owen Zidar. 2016. “Who Benefits from State Corporate Tax
   Cuts? A Local Labor Markets Approach with Heterogeneous Firms.” American Economic Review
   106:2582–2624.

Xu, Chenzi. 2019. “Reshaping Global Trade: The Immediate and Long-Run Effects of Bank Failures.”
    Working Paper.




                                               43
     Appendix to “Quasi-Experimental Shift-Share Research
                          Designs”
                                      Kirill Borusyak, UCL
                             Peter Hull, University of Chicago
                        Xavier Jaravel, London School of Economics
                                            August 2020


Contents
A Appendix Results                                                                                     45
  A.1 Heterogeneous Treatment Effects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      45
  A.2 Comparing SSIV and Native Shock-Level Regression Estimands . . . . . . . . . . . . .             46
  A.3 Unobserved n-level Shocks Violate Share Exogeneity . . . . . . . . . . . . . . . . . . .         48
  A.4 Connection to Rotemberg Weights . . . . . . . . . . . . . . . . . . . . . . . . . . . . .        49
  A.5 Consistency of Control Coefficients . . . . . . . . . . . . . . . . . . . . . . . . . . . . .    50
  A.6 SSIV Consistency in Short Panels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     51
  A.7 Sequential Exogeneity in Long Panels . . . . . . . . . . . . . . . . . . . . . . . . . . .       52
  A.8 SSIV Relevance with Panel Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .       53
  A.9 Estimated Shocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   54
  A.10 Equilibrium Industry Growth in a Model of Local Labor Markets . . . . . . . . . . . .           57
  A.11 SSIV with Multiple Endogenous Variables or Instruments . . . . . . . . . . . . . . . .          59
  A.12 Finite-Sample Performance of SSIV: Monte-Carlo Evidence . . . . . . . . . . . . . . .           63

B Appendix Proofs                                                                                      69
  B.1 Proposition 4 and Extensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .     69
  B.2 Proposition 5 and Related Results . . . . . . . . . . . . . . . . . . . . . . . . . . . . .      72
  B.3 Proposition A1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   77
  B.4 Proposition A2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   78
  B.5 Proposition A3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   80
  B.6 Proposition A4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   81
  B.7 Proposition A5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   81
  B.8 Proposition A6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .   83

C Appendix Figures and Tables                                                                          84




                                                  44
A      Appendix Results

A.1     Heterogeneous Treatment Effects

In this appendix we consider what a linear SSIV identifies when the structural relationship between y`
and x` is nonlinear. We show that under a first-stage monotonicity condition the large-sample SSIV
coefficient estimates a convexly weighted average of heterogeneous treatment effects. This holds even
when the instrument has different effects on the outcome depending on the underlying realization
                                   P
of shocks, for example when y` =      n s`n β̃`n x`n + ε` with β̃`n capturing the effects of (possibly
                                                                                           P
unobserved) observation- and shock-specific treatments x`n making up the observed x` = n s`n x`n .
    Consider a general structural outcome model of


                                               y` = y(x`1 , . . . , x`R , ε` ),                                  (15)


where the R treatments are given by x`r = xr (g, η`r ) with g collecting the vector of shocks gn and with
η` = (η`1 , . . . , η`R ) capturing first-stage heterogeneity. We consider an IV regression of y` on some
                                 P
aggregated treatment x` = r α`r x`r with α`r ≥ 0. Note that this nests the case of a single aggregate
treatment (R = 1 and α`1 = 1) with arbitrary effect heterogeneity, as well as the special case above
(R = N and α`r = s`n ). We abstract away from controls w` and assume each shock is as-good-as-
randomly assigned (mean-zero and mutually independent) conditional on the vector of second-stage
unobservables ε` and the matrices of first-stage unobservables η`r , exposure shares s`n , importance
weights e` , and aggregation weights α`r , collected in I = {ε` , e` , {η`r , α`r }r , {s`n }n }` . This assump-
tion is stronger than Assumption 3 but generally necessary in a non-linear setting while still allowing for
the endogeneity of exposure shares. For further notational simplicity we assume that y(·, ε` ) and each
                                                                                     ∂
xr (·, η`r ) are almost surely continuously differentiable, such that β`r (·) =     ∂xr y(·, ε` )   captures the ef-
                                                                                                        ∂
fect, for observation `, of marginally increasing treatment r on the outcome and π`nr (·) =            ∂gn xr (·, η`r )

captures the effect of marginally increasing the nth shock on the rth treatment at `.
    Under an appropriate law of large numbers, the shift-share IV estimator approximates the IV
estimand:
                             P                           P P
                          E [ ` e` z` y` ]                     E [s`n e` gn y` ]
                   β̂ =      P             + op (1) = P P ` Pn                        + op (1).                  (16)
                          E [ ` e` z` x` ]             `  n  r E [s`n e` gn α`r x`r ]


Given this, we have the following result:

Proposition A1 When π`nr ([ğ; g−n ]) ≥ 0 almost surely for all ğ ∈ R, equation (16) can be written
                                                     hR                     i
                                          P P P         ∞
                                           `      n E −∞ β̃`nr (ğ)ω`nr (ğ) dγ
                                                        r
                                   β̂ =        P P P hR ∞             i         + op (1),                        (17)
                                                ` n  rE      ω (ğ) dγ
                                                          −∞ `nr




                                                             45
             where ω`nr (ğ) ≥ 0 almost surely and

                                                         β`r (x1 ([ğ; g−n ], η`1 ), . . . xR ([ğ; g−n ], η`R ))
                                         β̃`nr (ğ) =                                                                 (18)
                                                                                  α`r

             is a rescaled treatment effect, evaluated at (x1 ([ğ; g−n ], η`1 ), . . . xR ([ğ; g−n ], η`R ) for [ğ; g−n ] =
             (g1 , . . . , gn−1 , ğ, gn+1 , . . . gN )0 .

Proof See Appendix B.3.

This shows that in large samples β̂ estimates a convex average of rescaled treatment effects, β̃`nr (ğ),
when the first stage is monotone in each shock. Appendix B.3 shows that the weights ω`nr (ğ) are pro-
portional to the first-stage effects π`nr ([ğ; g−n ]), exposure shares s`n , regression weights e` , treatment
aggregation weights α`r , and a function of the shock distribution. In the case without aggregation, i.e.
R = α`r = 1, there is no rescaling in the β̃`nr (ğ). Equation (17) then can be seen as generalizing the
result of Angrist et al. (2000), on the identification of heterogeneous effects of continuous treatments,
to the continuous shift-share instrument case. Intuition for the ω`nr (ğ) weights follows similarly from
this connection. With aggregation—that is, when the realization of shocks may have heterogeneous
effects on y` holding the aggregated x` fixed—equation (17) shows that SSIV captures a convex aver-
                                                                                     P
age of treatment effects per aggregated unit. Thus in the leading example of y` = n s`n β̃`n x`n + ε`
           P
and x` = n s`n x`n , this result establishes identification of a convex average of the β̃`n . In this way
the result generalizes Adão et al. (2019), who establish the identification of convex averages of rescaled
treatment effects in reduced form shift-share regressions.


A.2      Comparing SSIV and Native Shock-Level Regression Estimands

In this appendix we illustrate economic differences between the estimands of two regressions that
researchers may consider: SSIV using outcome and treatment observations y` and x` (which we show
in Proposition 1 are equivalent to certain shock-level IV regressions), and more conventional shock-level
IV regressions using “native” yn and xn . These outcomes and treatments capture the same economic
concepts as the original y` and x` , in contrast to the constructed ȳn and x̄n discussed in Section 2.3.
In line with the labor supply and other key SSIV examples, we will for concreteness refer to the ` and
n as indexing regions and industries, respectively. We consider the case where both the outcome and
treatment can be naturally defined at the level of region-by-industry cells (henceforth, cells)—y`n and
x`n , respectively—and thus suitable for aggregation across either dimension with some weights E`n
                                                                                             P
(e.g., cell employment growth rates aggregated with lagged cell employment weights): y` = n s`n y`n
for s`n = P E0 `n     and yn = ` ω`n y`n for ω`n = P E0 `n
                              P
                E                                           , with analogous expressions for x` and xn .
              n  `n 0                               ` E`0 n

We further define E` = n E`n and En = ` E`n .49
                           P                 P

  49 This formulation nests reduced-form shift-share regressions when x
                                                                          `n = gn for each `. The labor supply example
of Section 2.1 fits only partially in this formal setup because the industry or regional wage growth yn is not equal to a



                                                                    46
    We consider the estimands of two regression specifications: β from the regional level model (2),
                                                       P
instrumented by z` and weighted by e` = E` /E for E = ` E` , and βind from a simpler industry-level
IV regression of
                                                   yn = βind xn + εn ,                                                 (19)

instrumented by the industry shock gn and weighted by sn = En /E. For simplicity we do not include
any controls in either specification and implicitly condition on {E`n }`,n (and some other variables as
described below), viewing them as non-stochastic.50
    We show that β and βind generally differ when there are within-region spillover effects or when
treatment effects are heterogeneous. We study these cases in turn, maintaining several assumptions:
(i) a first stage relationship analogous to the one considered in Section 3.1:


                                                  x`n = π`n gn + η`n ,                                                 (20)


for non-stochastic π`n ≥ π̄ > 0, (ii) a stronger version of our Assumption 1 that imposes E [gn ] =
E [gn ε`n0 ] = E [gn η`n0 ] = 0 for all `, n, and n0 , with ε`n0 denoting the unobserved cell-level residual of
each model, (iii) the assumption that gn is uncorrelated with gn0 for all n and n0 , and (iv) that all
appropriate laws of large numbers hold.


Within-Region Spillover Effects Suppose the structural model at the cell level is given by

                                                             X
                                        y`n = β0 x`n − β1          s`n0 x`n0 + ε`n .                                   (21)
                                                              n0


Here β0 captures the direct effect of the shock on the cell outcome, and β1 captures a within-region
spillover effect. The local employment effects of industry demand shocks from the model in Appendix
A.10 fit in this framework, see equation (49).51 The following proposition shows that the SSIV
estimand β captures the effect of treatment net of spillovers (i.e. β0 − β1 ), whereas βind subtracts the
spillover only partially; this is intuitive since the spillover effect is fully contained within regions but
not within industries.

Proposition A2 Suppose equation (21) holds and the average local concentration index HL =
                    2
          P
            `,n e` s`n is bounded from below by a constant H̄L > 0. Further assume π`n = π̄

              and Var [gn ] = σg2 for all ` and n. Then the SSIV estimator satisfies


                                                        β̂ = β0 − β1 + op (1)                                          (22)
weighted average of wage growth across cells: reallocation of employment affects the average wage growth even in the
absence of wage changes in any given cell.
   50 Note that we thereby condition on the shares s
                                                     `n and importance weights e` . Yet we still allow for share endogeneity
by not restricting E [ε`n ] to be zero.
   51 In the labor supply example from the main text y
                                                         `n is the cell wage, which is equalized within the region, and x`n
is cell employment. Equation (21) therefore holds for β0 = 0 and −β1 being the inverse labor supply elasticity.


                                                            47
            while the native industry-level IV estimator satisfies


                                                 β̂ind = β0 − β1 HL + op (1),                      (23)


            If β1 6= 0 (i.e. in presence of within-region spillovers), β̂ and β̂ind asymptotically coin-
                                      p
            cide if and only if HL → 1, which corresponds to the case where the average region is
            asymptotically concentrated in one industry.

Proof See Appendix B.4.


Treatment Effect Heterogeneity Now consider a different structural model which allows for
heterogeneity in treatment effects:
                                            y`n = β`n x`n + ε`n .                                  (24)

We also allow the first-stage coefficients π`n and shock variance σn2 to vary. The following proposition
shows that β and βind differ in how they average effect β`n (here treated as non-stochastic) across
the (`, n) cells. The weights corresponding to the SSIV estimand β are relatively higher for cells that
represent a larger fraction of the regional economy. This follows because in the regional regression
s`n determines the cell’s weight in both the outcome and the shift-share instrument, while in the
industry regression only the former argument applies. Heterogeneity in the π`n and σn2 , in contrast,
has equivalent effects on the weighting scheme of both estimands.

Proposition A3 In the casual model (24),

                                                          E`n s`n π`n σn2 · β`n
                                                 P
                                                    `,n
                                          β̂ =       P                              + op (1)       (25)
                                                          `,n   E`n s`n π`n σn2

            and
                                                                E`n π`n σn2 · β`n
                                                     P
                                                          `,n
                                          β̂ind =         P                         + op (1),      (26)
                                                                `,n   E`n π`n σn2

Proof See Appendix B.5.


A.3     Unobserved n-level Shocks Violate Share Exogeneity

In this appendix, we show that the assumption of SSIV share exogeneity from Goldsmith-Pinkham
et al. (2020) is violated when there are unobserved shocks νn that affect outcomes via the exposure
shares s`n , i.e. when the residual has the structure

                                                     X
                                            ε` =           s`n νn + ε̌` .                          (27)
                                                     n




                                                           48
We consider large-sample violations share exogeneity in terms of the asymptotic non-ignorability of the
ε̄n terms in the equivalent moment condition (5). It is intuitive that the cross-sectional dependence
between s`n and ε` will not asymptotically vanish when N is fixed (as in Goldsmith-Pinkham et
                                                                                         p
al. (2020)) and each νn shock contributes significantly to the residual, causing ε̄n −
                                                                                     6 → 0 for some or
all n. We next prove this result and show that it generalizes to the case of increasing N , where
the contribution of each νn to the variation in ε` becomes small. The intuition here is that the SSIV
relevance condition generally requires individual observations to be sufficiently concentrated in a small
number of shocks (see Section 3.1), and under this condition the share exogeneity violations remain
asymptotically non-ignorable even as N → ∞.
   We define share endogeneity as non-vanishing Var [ε̄n ] at least for some n. This will tend to make
the SSIV estimator inconsistent, unless shocks are as-good-as-randomly assigned (Assumption 1), even
if the importance weights of individual shocks, sn , converge to zero (Assumption 2). Here we treat e`
and s`n as non-stochastic to show this result with simple notation.

Proposition A4 Suppose condition (27) holds with the νn mean-zero and uncorrelated with the
            ε̌` and with each other, and with Var [νn ] = σn2 ≥ σν2 for a fixed σν2 > 0. Also assume
            HL = ` e` n s2`n → H̄ > 0 such that first-stage relevance can be satisfied. Then there
                   P    P

            exists a constant δ > 0 such that maxn Var [ε̄n ] > δ for sufficiently large L.

Proof See Appendix B.6.


A.4     Connection to Rotemberg Weights

In this appendix we rewrite the decomposition of the SSIV coefficient β̂ from Goldsmith-Pinkham
et al. (2020) that gives rise to their “Rotemberg weight” interpretation, and show that these weights
measure the leverage of shocks in our equivalent shock-level IV regression. We then show that, in
our framework, skewed Rotemberg weights do not measure sensitivity to misspecification (of share
exogeneity) and do not pose a problem for SSIV consistency. We finally discuss the implications of
high-leverage observations for SSIV inference.
   Proposition 1 implies the following decomposition:

                                             sn gn ȳn⊥
                                          P               X
                                     β̂ = Pn          ⊥
                                                        =   αn β̂n ,                                (28)
                                           n sn gn x̄n    n


where
                                                                   ⊥
                                                ȳn⊥
                                                       P
                                                         ` e` s`n y`
                                        β̂n =      ⊥
                                                     = P           ⊥
                                                                                                    (29)
                                                x̄n     ` e` s`n x`

and
                                                     sn gn x̄⊥
                                                             n
                                          αn = P                 ⊥
                                                                    .                               (30)
                                                    n0 sn0 gn0 x̄n0




                                                     49
This is a shock-level version of the decomposition discussed in Goldsmith-Pinkham et al. (2020): β̂n is
the IV estimate of β that uses share s`n as the instrument, and αn is the so-called Rotemberg weight.
   To see the connection with leverage (defined, typically in the context of OLS, as the derivative of
each observation’s fitted value with respect to its outcome) in our equivalent IV regression, note that
                                           
                                   ∂ x̄⊥
                                       n β̂              sn gn
                                                = x̄⊥
                                                    n P            ⊥
                                                                      = αn .                           (31)
                                      ∂ ȳn⊥          n0 sn0 gn0 x̄n0


In this way, αn measures the sensitivity of β̂ to β̂n .
   In the preferred interpretation of Goldsmith-Pinkham et al. (2020), exposure to each shock is a
                                  p
valid instrument such that β̂n → β for each n. However, in our framework deviations of β̂n from
β reflect nonzero ε̄n in large samples, and such share endogeneity is not ruled out; thus αn does
not have the same sensitivity-to-misspecification interpretation. Moreover, a high leverage of certain
shocks (“skewed Rotemberg weights,” in the language of Goldsmith-Pinkham et al. (2020)) is not a
problem for consistency in our framework, provided it results from a heavy-tailed and high-variance
distribution of shocks (that still satisfies our regularity conditions, such as finite shock variance), and
each sn is small as required by Assumption 2.
   Nevertheless, skewed αn may cause issues with SSIV inference, as would high leverage observations
in any regression. In general, the estimated residuals ε̄ˆ⊥
                                                          n of high-leverage observations will tend to be

biased toward zero, which may lead to underestimation of the residual variance and too small standard
errors (e.g., Cameron and Miller 2015). This issue can be addressed, for instance, by computing
confidence intervals with the null imposed, as Adão et al. (2019) recommend and as we discuss in
Section 5.1. In practice our Monte-Carlo simulations in Appendix A.12 find that the coverage of
conventional exposure-robust confidence intervals to be satisfactory even with Rotemberg weights as
skewed as those reported in the applications of Goldsmith-Pinkham et al. (2020) analysis.


A.5     Consistency of Control Coefficients

This appendix shows how the control coefficient γ, defined in footnote 5, can be consistently estimated
                                                                              P          p      P
as required in Proposition 3 (Assumption B2). We discuss conditions for ` e` w` ε` −    → E [ ` e` w` ε` ],
where by definition E [ ` e` w` ε` ] = 0. Consistency of the estimator γ̂ = γ +( ` e` w` w`0 ) −1 ` e` w` ε`
                       P                                                        P                P

                                                 −1
follows, provided the elements of ( ` e` w` w`0 ) are stochastically bounded (i.e., Op (1)). For simplic-
                                     P

ity we consider control vectors w` of fixed length.
                                       P
    The argument for convergence of ` e` w` ε` depends on the source of randomness in w` and ε` .
We consider two characteristic cases. In the first case, (e` , w`0 , ε` )0 can be viewed as iid or clustered
in a conventional way. For example, w` and ε` may contain observed and unobserved local labor
supply shocks which are uncorrelated across markets, clusters of markets (e.g. states), or beyond a
given distance threshold. In this case conventional laws of large numbers can be used to establish


                                                      50
               p
               → 0. For instance if (e` , w`0 , ε` )0 is iid then
P                                                                   P
  ` e` w` ε`   −                                                      ` e` w` ε`   gives a vector of sample averages
of mutually uncorrelated mean-zero random variables, which weakly converge to zero when the e`
                                        P 2                       2 2 
weights are asymptotically dispersed (E    ` e` → 0) and when E w` ε` | e is uniformly bounded.
                                                                                      P
   In the second case, either w` or ε` has a shift-share structure like z` : i.e. w` = n s`n qn for an
                                                      P
observed qn (in line with our Proposition 3) or ε` = n s`n νn for an unobserved νn (capturing, for
example, a set of unobserved industry-level factors averaged with the employment weights s`n ). In
                          P
this case convergence of ` e` w` ε` can be shown to follow similarly to the convergence of the sample
                                                                       P
analog of the instrument moment condition (3). If, for instance, ε` = n s`n νn with E [νn | s, w] = 0
                                                                   P              P
and Cov [νn , νm | s, w] = 0 for w = {wn }n , then for each control ` e` w`m ε` = n sn νn w̄nm weakly
                                                 P 2                                        2      
converges when the sn weights are dispersed (E       n sn → 0) and both Var [νn | s, w] and E w̄nm | s

are uniformly bounded. This argument can be extended to the case where either w` or ε` is formed from
different exposure shares s̃`k , perhaps defined over a different range of K observed qk or unobserved
νk , and when the qk or νk are clustered or otherwise weakly mutually correlated.
                                                                                       P
     More generally, the two cases can be combined to settings where w` = k s̃`k qk + w̌` and ε` =
                                    0        0
P
   k0 s̃`k0 νk0 + ε̌` where (e` , w̌` , ε̌` ) is iid or conventionally clustered and where qk and νk0 are many

weakly correlated random shocks or, even more generally, allowing for multiple shift-share terms with
different exposure shares.


A.6      SSIV Consistency in Short Panels

This appendix shows how alternative shock exogeneity assumptions imply the consistency of panel
SSIV regressions with many fixed effect coefficients. We consider the incidental parameters problem
in “short” panels, with fixed T and L → ∞ and with unit fixed effects, in which case the control
coefficient γ cannot be consistently estimated with the fixed effects included in w` . We show how an
analog of Assumption 3 can be instead applied to a demeaned shock-level unobservable that partials
out the fixed effect nuisance coefficients. A similar argument applies to period fixed effects in the fixed
L and T → ∞ asymptotic.
  Suppose for the linear causal model y`t = βx`t + `t and control vector w`t (which includes unit
                                ∆ ∆0 −1
                      P                  P        ∆ ∆
                                                                  ∆
FEs), we define γ = E    ` e`t w`t w`t   E    ` e`t w`t `t where v`t is a subvector of the (weighted)
                                                          P
                                                           t0 e`t0 v`t0
unit-demeaned observation of variable v`t , v`t −          P              , that drops any elements that are iden-
                                                              t0 e`t0

tically zero (e.g. those corresponding to the unit FEs in w`t ). Note we have assumed no perfect
                                                        P          ∆ ∆0
                                                                           
multicollinearity in the remaining elements such that E      ` e`t w`t w`t   is invertible. We can then
        ∆       ∆     ∆0     ∆                                ⊥ p
                                                  P
write y`t = βx`t + w`t γ + ε`t . Suppose also that ` e`t z`t x`t −
                                                                 → π for some π 6= 0 and the analog
of Assumption B2 for unit-demeaned controls holds. Then, following the proof to Proposition 3, β̂ is




                                                          51
consistent if and only if

                                                     X                    p
                                                            snt gnt ε̄∆
                                                                      nt −
                                                                         → 0,                                    (32)
                                                      n,t



                                          P             ∆
                                  ∆         ` e`t s`nt ε`t
               P
where snt =      ` e`t s`nt and ε̄nt =
                                           P               .   This condition is satisfied when analogs of Assumptions
                                              ` e`t s`nt

1,2, and B1 hold, or under the various extensions discussed in Section 3. In particular when w`t con-
                                                                                               
tains t-specific FE the key assumption of quasi-experimental shock assignment is E gnt | ε̄∆ , s = µt ,
for all n and t, allowing endogenous period-specific shock means µt via Proposition 4. This assumption
avoids the incidental parameters problem by considering shocks as-good-as-randomly assigned given
the set of unobserved ε̄∆
                        nt , each of which is a function of the time-varying ε`p across all periods p.

   An intuitive special case is when the exposure shares and importance weights are time-invariant:
s`nt = s`n0 and e`t = e`0 . Then the weights in (32) are also time-invariant, snt = sn0 , and

                                                                  ∆
                                                   P
                                                      ` e`0 s`n0 ε`t
                                         ε̄∆
                                           nt   = P
                                                          e` s`n0
                                                   P `                     1
                                                                             P        
                                                      ` e`0 s`n0 ε`t − T      t0 ε`t0
                                                =             P
                                                                  ` e`0 s`n0
                                                           1X
                                                = ε̄nt −           ε̄nt0 ,                                       (33)
                                                          T 0
                                                                 t

               P
                 ` e`0 s`n0 ε`t
where ε̄nt =    P                 is an aggregate of period-specific unobservables ε`t . It is then straightfor-
                   ` e`0 s`n0

ward to extend Propositions 3 and 4 under a shock-level assumption of strong exogeneity, i.e. that
E [gnt | ε̄, s] = µn + τt for all n and t. Here endogenous n-specific shock means are permitted by the
observation in Section 4.1, that share-weighted n-specific FEs at the shock level are subsumed by
`-specific FEs in the SSIV regression when shares and weights are time-invariant.


A.7     Sequential Exogeneity in Long Panels

This appendix shows how the strict exogeneity condition of Assumption 3 can be relaxed to a sequential
exogeneity assumption in long panels (with T → ∞ and L fixed). In contrast to Appendix A.6 we
assume the unit FEs can be consistently estimated and included in γ.52
   To see this extension simply, we consider a scenario where qn = 1 (such that Assumption 3 coincides
with Assumption 1) and µ = 0. Rather than imposing E [gnt | ε̄, s] = 0, we make a weaker assumption
                            n                                                   o
E [gnt | Int ] = 0 for Int = {ε̄nt0 , snt0 }t0 ≥t , {ε̄n0 t0 , sn0 t0 }n0 6=t,t0 . This assumption captures the pos-
sibility of a sequential shock generating process in which draws of gnt do not on average depend on
present or future realizations of the unit’s unobservables, or the realizations of unobservables at other
  52 Arguments similar to those in Appendix A.5 imply consistency of the fixed effects. Some sequences with both L

and T growing can also be accommodated as long as the fixed effects are estimated sufficiently precisely, such that
Assumption B2 holds.



                                                                     52
units, but may depend on past realizations ε̄nt0 for t0 < t. Similarly, we suppose Cov [gnt , gnt0 | Int ] = 0
for t0 ≥ t and Cov [gnt , gn0 t0 | Int ] = 0 for n0 6= n and all t0 . Following the proof to Proposition 3, we
                    hP                     i
continue to have E       n,t s nt gnt ε nt   = 0. Furthermore,

                      "                   #                                   !2 
                       X                                  X
                Var         snt gnt εnt =E                      snt gnt εnt        
                      n,t                                  n,t
                                                  XX
                                              =                E [snt sn0 t0 gnt gn0 t0 ε̄nt ε̄n0 t0 ]
                                                  n,t n0 ,t0
                                                  X               XX
                                              =    E s2nt gnt
                                                           2 2
                                                              ε̄nt +   E [snt snt0 gnt gnt0 ε̄nt ε̄nt0 ]
                                                  n,t                               n,t t0 <t
                                                      XX
                                                  +                  E [snt snt0 E [gnt gnt0 | Int ] ε̄nt ε̄nt0 ]
                                                        n,t t0 ≥t
                                                      X X
                                                  +                     E [snt sn0 t0 E [gnt gn0 t0 | Int ] ε̄nt ε̄n0 t0 ]
                                                        n,t n0 6=n,t0
                                                  X               XX
                                              =    E s2nt gnt
                                                           2 2
                                                              ε̄nt +   E [snt snt0 gnt gnt0 ε̄nt ε̄nt0 ] .                   (34)
                                                  n,t                               n,t t0 <t

                                                    hP        i
                                                            2
The first term of this expression is o(1) when E       n,t snt → 0, as in Assumption 2, and when
  2                              
      | ε̄nt , snt and E ε̄2nt | snt are uniformly bounded. The weak convergence of n,t snt gnt εnt
                                                                                    P
E gnt
thus depends on whether the second term of equation (34) is also o(1). One way this convergence
would hold is when N is fixed (with T → ∞) and |E [gnt gnt0 | ε̄, s]| ≤ f (t − t0 ) for all n and t0 < t given
                                 P∞
a fixed function f (·) satisfying r=1 f (r) < ∞. This approach can be seen to extend Assumption 6
to relax strict exogeneity in the sense of E [gnt | ε̄, s] 6= 0. Another way this convergence would hold is
                                                    hP P                  i
                                                                        2
when N → ∞, units are sufficiently dispersed (E           n(    t snt )     → 0) and E [gnt gnt0 | ε̄, s] is uniformly
bounded. This approach can be seen to similarly relax Assumption 1 by imposing Assumption 5, with
clusters given by the units observed over time.


A.8      SSIV Relevance with Panel Data

This appendix shows that holding the exposure shares fixed in a pre-period is likely to weaken the
SSIV first-stage in panel regressions. Consider a panel extension of the first stage model used in
                        P
Section 3.1, where x`t = n s`nt x`nt with x`nt = π`nt gnt + η`nt , π`n ≥ π̄ for some fixed π̄ > 0, and the
                                                          2
gnt are mutually independent and mean-zero with variance σnt ≥ σ̄g2 for fixed σg2 > 0, independently
of {η`nt }`,n,t . As in other appendices, we here treat s`nt , e`t , and π`nt as non-stochastic. Then an
SSIV regression with z`t = n s∗`nt gnt as an instrument, where s∗`nt is either s`nt (updated shares) or
                              P

s`n0 (fixed shares), yields a first-stage of
                                  "                              #
                                      XX                                      XX                X
                              E                   e`t z`t x`t ≥ σ̄g2 π̄                   e`t       s∗`nt s`tn .             (35)
                                      `       t                                 `     t         n




                                                                         53
                                                                                     ∗
                                                                                  P
For panel SSIV relevance we require the e`t -weighted average of                  n s`nt s`nt   to not vanish asymptoti-
cally. With updated shares this is satisfied when the Herfindahl index of an average observation-period
(across shocks) is non-vanishing, while in the fixed shares case the overlap of shares in periods 0 and
  P
t, n s`n0 s`nt , may become weak or even vanish as T → ∞, on average across observations.


A.9     Estimated Shocks

This appendix establishes the formal conditions for the SSIV estimator, with or without a leave-
one-out correction, to be consistent when shocks gn are noisy estimates of some latent gn∗ satisfying
Assumptions 1 and 2. We also propose a heuristic measure that indicates whether the leave-one-out
correction is likely to be important and compute it for the Bartik (1991) setting. Straightforward
extensions to other split-sample estimators follow.
   Suppose a researcher estimates shocks via a weighted average of variables g`n . That is, given
                         P
weights ω`n ≥ 0 such that ` ω`n = 1 for all n, she computes

                                                     X
                                              gn =           ω`n g`n .                                              (36)
                                                     `


A leave-one-out (LOO) version of the shock estimator is instead
                                                    P
                                                         0
                                                     ` 6=`      ω`0 n g`0 n
                                          gn,−` =    P                        .                                     (37)
                                                             `0 6=`   ω`0 n

We assume that each g`n is a noisy version of the same latent shock gn∗ :


                                               g`n = gn∗ + ψ`n ,                                                    (38)


where gn∗ satisfies Assumptions 1 and 2 and ψ`n is estimation error (in Section 4.3 we considered
the special case of ψ`n ∝ ε` ).      This implies a feasible shift-share instrument of z` = z`∗ + ψ`
and its LOO version z`LOO      = z`∗ + ψ`LOO , where z`∗ =           ∗
                                                            P                 P      P
                                                              n s`n gn , ψ` =  n s`n  `0 ω` n ψ` n , and
                                                                                           0    0
                   P
                    `0 6=` ω`0 n ψ`0 n
ψ`LOO = n s`n P
            P
                                       . Consistency with these instruments, given a first stage, requires that
                        `0 6=` ω`0 n
P             p         P             LOO p
   ` e` ε` ψ` → 0 and        ` e` ε` ψ`    → 0 respectively.
   We now present three sets of results. First, we establish a simple sufficient condition under which
                                            p
the LOO instrument satisfies ` e` ε` ψ`LOO → 0. We also propose stronger conditions that guarantee
                            P

consistency of LOO-SSIV. Second, we explore the conditions under which the covariance between ε`
and ψ`n is ignorable, i.e. asymptotically does not lead to a “mechanical” bias of the conventional
non-leave-one-out estimator. We propose a heuristic measure that is large when the bias is likely to
be small. Lastly, we apply these ideas to the setting of Bartik (1991) using the data from Goldsmith-
Pinkham et al. (2020). In line with previous appendices, we condition on s`n , ω`n , and e` and treat



                                                      54
them as non-stochastic for notational convenience. We also assume the SSIV regressions are estimated
without controls w` .


LOO Identification and Consistency The following proposition establishes three results. The
first is the most important one, providing the condition for orthogonality to hold . The second
strengthens this condition so that the estimator converges, which naturally requires that most shocks
are estimated with sufficient amount of data. A tractable case of complete specialization is considered
in last part, where there should be many more observations than shocks.

Proposition A5

   1. If E [ε` ψ`0 n ] = 0 for all ` 6= `0 and n, then E [ ` e` ε` ψ`,LOO ] = 0.
                                                            P

           h                                       i
   2. If E (ε` , ψ`n ) | {(ε`0 , ψ`0 n0 )}`0 6=`,n0 = 0 for all ` and n, then the LOO estimator is consistent,
                                                                                                   
      provided it has a first stage and two regularity conditions hold: E ε`1 ε`2 ψ`01 n1 ψ`02 n2 ≤ B for
      a constant B and all (`1 , `2 , `01 , `02 , n1 , n2 ) and

                                      X                                         ω`01 n1     ω`0 n
                                                         e`1 e`2 s`1 n1 s`2 n2 P          P 2 2       → 0,       (39)
                                                                               `6=`1 ω`n1  `6=`2 ω`n2
                             (`1 ,`2 ,`01 ,`02   )∈J ,
                                    n1 ,n2


      with J denoting the set of tuples (`1 , `2 , `01 , `02 ) for which one of the two conditions hold: (i)
      `1 = `2 and `01 = `02 6= `1 , (ii) `1 = `02 and `2 = `01 6= `1 .

                                                   N
   3. Condition (39) is satisfied if               L      → 0 in the special case where each region is specialized in
                                                                                                                  1
      one industry, i.e. s`n = 1 [n = n(`)] for some n(·), there are no importance weights (e` =                  L ),

      and shocks estimated by simple LOO averaging among observations exposed to a given shock
      (ω`n = L1n for Ln = ` 1 [n(`) = n]), assuming further that Ln ≥ 2 for each n so that the LOO
                         P

      estimator is well-defined.

Proof See Appendix B.7.

The condition in the first part of Proposition A5 would be quite innocuous in random samples of ` –
the environment in which leave-one-out adjustments are often considered (e.g. Angrist et al. (1999))
– but is strong without random sampling. It requires ε` and ψ`0 n to be uncorrelated for `0 6= `,
which may easily be violated when both ` and `0 are exposed to the same shocks—a situation in which
excluding own observation is not sufficient. Moreover, since we have conditioned on the exposure shares
throughout, E [ε` ψ`0 n ] = 0 generally requires either ε` or ψ`0 n to have a zero conditional mean—the
share exogeneity assumption applied to either the residuals or the estimation error. At the same time,
this condition does not require E [ε` ψ`0 n ] = 0 for ` = `0 , which reflects the benefit of LOO: eliminating
the mechanical bias from the residual directly entering shock estimates.


                                                                      55
Heuristic for Importance of LOO Correction We now return to the non-LOO SSIV estimator.
As in Proposition A5, we assume that E [ε` ψ`0 n ] = 0 for `0 6= ` and all n, so the LOO estimator is
consistent under the additional regularity conditions. We also assume, without loss of generality, that
z` is mean-zero. Then the “mechanical bias” mentioned in Section 4.3 is the only potential problem:
under appropriate regularity conditions (similar to those in part 2 of Proposition A5),
                                                           P
                                                        E [ ` e` ε` ψ` ]
                                           β̂ − β =        P              + op (1)
                                                        E [ ` e` z` x` ]
                                                        P
                                                           `,n e` s`n ω`n E [ε` ψ`n ]
                                                      =           P                   + op (1).                                             (40)
                                                              E [ ` e` z` x` ]

With |E [ε` ψ`n ]| bounded by some B1 > 0 for all ` and n, the numerator of (40) is bounded by HN B1 ,
                                                            P
for an observable composite of the relevant shares HN = `,n e` s`n ω`n . The structure of the shares
also influences the strength of the first stage in the denominator. Imposing our standard model of
the first stage from Section 3.1 (but specified based on the latent shock gn∗ ), i.e. x` = n s`n x`n for
                                                                                          P

x`n = π`n gn∗ + η`n , η`n mean-zero and uncorrelated with gn∗ 0 for all `, n, n0 , Var [gn∗ ] ≥ σ̄g2 > 0 and
π`n ≥ π̄ > 0, yields:
              "              #                    "                              !                                          !#
                  X                  X                 X                                X
          E            e` z` x` =          e` E              s`n (gn∗   + ψ`n )                s`n0 (π`n gn∗ 0   + η`n0 )
                  `                   `                  n                               n0
                                     X                                    X           X
                                 =         e` s2`n · π`n Var [gn∗ ] +            e`          s`n s`n0 E [ψ`n (π`n gn∗ 0 + η`n0 )] .         (41)
                                     `,n                                     `        n,n0


                                                                                                                        ⊥
                                                                                                            P                 
Excepting knife-edge cases where the two terms in (41) cancel out, E                                              ` e` z` x`       6→ 0 provided
HL = `,n e` s2`n ≥ H̄ for some fixed H̄ > 0.
     P

   We thus define the following heuristic:

                                                                         2
                                                               P
                                                         HL      `,n e` s`n
                                                      H=    = P               .                                                             (42)
                                                         HN    `,n e` s`n ω`n


When H is large, we expect the non-LOO SSIV estimator to be relatively insensitive to the mechanical
bias generated by the average covariance between ψ`n and ε` , and thus similar to the LOO estimator.
   We note an important special case. Suppose all weights are derived from variable E`n (e.g. lagged
employment level in region ` and industry n) as s`n = EE`n , ω`n = EE`n , and e` = EE` , for E` = n E`n ,
                                                                                                 P
                                                         `           n
     P                  P
En = ` E`n , and E = ` E` . Then

                                     X E` E`n E`n                X En  E`n 2 X X
                                                                                      2
                           HN =                                =              =   sn ω`n ,                                                  (43)
                                            E E` En                E    En      n
                                     `,n                          `,n                                       `


              En
where sn =    E       is the weight in our equivalent shock-level regression. Therefore, HN is the weighted
average across n of n-specific Herfindahl concentration indices, while HL is the weighted average


                                                                        56
across ` of `-specific Herfindahl indices. With E`n denoting lagged employment, H is high (and thus
we expect the LOO correction to be unnecessary) when employment is much more concentrated across
industries in a typical region than it is concentrated across regions for a typical industry.
    The formula simplifies further with E`n = 1 [n = n(`)] for all `, n, corresponding to the case of
complete specialization of observations in shocks with no regression or shock estimation weights, as
in part 3 of Proposition A5. In that case,

                                           1                       1                  L
                                H=P        1  1      =   1
                                                             P P              1   =     .                        (44)
                                         ` L Ln(`)       L    n   ` : n(`)=n Ln       N


Our heuristic is therefore large when there are many observations per estimated shock.53


Application to Bartik (1991) We finally apply our insights to the Bartik (1991) setting, using the
Goldsmith-Pinkham et al. (2020) replication code and data. Table C6 reports the results. Column
1 shows the estimates of the inverse local labor supply elasticity using SSIV estimators with and
without the LOO correction and using population weights, replicating Table 3, column 2, of Goldsmith-
Pinkham et al. (2020) except with employment on the left-hand side and wages on the right-hand
side.54 Column 2 repeats the analysis without the population weights.55 We find all estimates to
range between 1.2 and 1.3, showing that in practice for Bartik (1991) the LOO correction does not
play a substantial role.
    This is however especially true without weights, where the LOO and conventional SSIV estimators
are 1.30 and 1.29, respectively. Our heuristic provides an explanation: H is almost 8 times bigger
when computed without weights. The intuition is that large commuting zones, such as Los Angeles
and New York, may constitute a substantial fraction of employment in industries of their comparative
advantage. This generates a potential for the mechanical bias: labor supply shocks in those regions
affect shock estimates; this bias is avoided by LOO estimators. However, the role of the largest
commuting zones is only significant in weighted regressions (by employment or, as in Goldsmith-
Pinkham et al. (2020), population).


A.10      Equilibrium Industry Growth in a Model of Local Labor Markets

This appendix develops a simple model of regional labor supply and demand, similar to the model in
Adão et al. (2020). Our goal is to show how the national growth rate of industry employment can
be viewed as a noisy version of the national industry-specific labor demand shocks, and how regional
labor supply shocks (along with some other terms) generate the “estimation error.”
  53 Here 1/H = N/L is proportional to the “bias” of the non-LOO estimator, which is similar to how the finite-sample

bias of conventional 2SLS is proportional to the number of instruments over the sample size (Nagar 1959).
  54 Goldsmith-Pinkham et al. (2020) estimate the inverse labor supply elasticity. By properties of IV estimation, our

coefficient is the inverse of theirs.
  55 Industry growth shocks in this column are the same as in Column 1, again estimated with employment weights.




                                                             57
   Consider an economy that consists of a set of L regions. In each region ` there is a prevailing wage
W` , and labor supply has constant elasticity φ:


                                                E` = M` W`φ ,                                       (45)


where E` is total regional employment and M` is the supply shifter that depends on the working-age
population, the outside option, and other factors. Labor demand in each industry n is given by a
constant-elasticity function


                                             E`n = An ξ`n W`−σ ,                                    (46)


where E`n is employment, An is the national industry demand shifter, ξ`n is its idiosyncratic compo-
nent, and σ is the elasticity of labor demand. The equilibrium is given by

                                                X
                                                     E`n = E` .                                     (47)
                                                 n


   Now consider small changes in fundamentals An , ξ`n and M` . We use log-linearization around the
observed equilibrium and employ the Jones (1965) hat algebra notation, with v̂ denoting the relative
change in v between the equilibria. We then establish:

Proposition A6 After a set of small changes to fundamentals, the national industry employment
           growth is characterized by
                                                            X
                                                     gn =       ω`n g`n ,                           (48)
                                                            `
                               P
           for ω`n = E`n /     `0   E`0 n denoting the share of region ` in industry employment, and the
           change in region-by-industry employment g`n is characterized by

                                              σ               σ X               
                               g`n = gn∗ +       ε` + ξˆ`n −       s`n gn∗ + ξˆ`n ,                 (49)
                                             σ+φ             σ+φ n


           where gn∗ = Ân is the national industry labor demand shock, ε` = M̂` is the regional labor
                                          P
           supply shock, and s`n = E`n / n0 E`n0 .

Proof See Appendix B.8.

The first term in (49) justifies our interpretation of the observed industry employment growth as
a noisy estimate of the latent labor demand shock gn∗ . The other terms constitute the “estimation
error.” The first of them is proportional to the residual of the labor supply equation, ε` ; we have
previously established the conditions under which it may or may not confound SSIV estimation. The
other terms, that we abstracted away from in Section 4.3, include the idiosyncratic demand shock ξˆ`n


                                                      58
and shift-share averages of both national and idiosyncratic demand shocks. If the model is correct,
all of these are uncorrelated with ε` , thus not affecting Assumption 1.


A.11       SSIV with Multiple Endogenous Variables or Instruments

This appendix first generalizes our equivalence result to SSIV regressions with multiple endogenous
variables and instruments, and discusses corresponding extensions of our quasi-experimental frame-
work via the setting of Jaeger et al. (2018). We also describe how to construct the effective first-stage
F -statistic of Montiel Olea and Pflueger (2013) for SSIV with one endogenous variable but multiple
instruments. We then consider new shock-level IV procedures in this framework, which can be used
for efficient estimation and specification testing. Finally, we illustrate these new procedures in the
Autor et al. (2013) setting.


Generalized Equivalence and SSIV Consistency We consider a class of SSIV estimators of an
outcome model with multiple treatment channels,


                                                y` = β 0 x` + γ 0 w` + ε` ,                                        (50)


where x` = (x1` , . . . , xK` )0 is instrumented by z` = (z1` , . . . , zJ` )0 , for zj` =
                                                                                             P
                                                                                             n s`n gjn   and J ≥ K, and
observations are weighted by e` . Members of this class are parameterized by a (possibly stochastic)
full-rank K × J matrix c, which is used to combine the instruments into a vector of length J, cz` . For
example the two-stage least squares (2SLS) estimator sets c = x⊥0 ez(z ⊥0 ez ⊥ )−1 , where z ⊥ stacks
observations of the residualized z`⊥0 . IV estimates using a given combination are written as


                                              β̂ = (cz 0 ex⊥ )−1 cz 0 ey ⊥ ,                                       (51)


where y ⊥ and x⊥ stack observations of the residualized y`⊥ and x⊥0                            0
                                                                 ` , z stacks observations of z` , and e

is an L × L diagonal matrix of e` weights. In just-identified IV models (i.e. J = K) the two c’s cancel
in this expression and all IV estimators are equivalent. Note that while the shocks gjn are different
across the multiple instruments, we assume here that the exposure shares s`n are all the same.
    As in Proposition 1, β̂ can be equivalently obtained by a particular shock-level IV regression.
Intuitively, when the shares are the same, cz` also has a shift-share structure based on a linear
combination of shocks cgn , and thus Proposition 1 extends. Formally, write z = sg where s is an
L × N matrix of exposure shares and g stacks observations of the shock vector gn0 ; then,


                                             β̂ = (cg 0 s0 ex⊥ )−1 cg 0 s0 ey ⊥

                                               = (cg 0 S x̄⊥ )−1 (cg 0 S ȳ ⊥ ),                                   (52)




                                                            59
where S is an N × N diagonal matrix with elements sn , x̄⊥ is an N × K matrix with elements x̄⊥
                                                                                              kn ,

and ȳ ⊥ is an N × 1 vector of ȳn⊥ . This is the formula for an sn -weighted IV regression of ȳn⊥ on
x̄⊥              ⊥
  1n , . . . , x̄Kn with shocks as instruments, no constant, and the same c matrix. Furthermore, as in

Proposition 1,
                                                                               !
                                    X                  X         X                         X
                          0   ⊥
                         ι S ȳ =        sn ȳn⊥   =       e`            s`n       y`⊥ =       e` y`⊥ = 0,             (53)
                                     n                 `             n                     `


and similarly for ι0 S x̄0 , where ι is a N × 1 vector of ones. Therefore, the same estimate is obtained by
including a constant in this IV procedure (and the same result holds including a shock-level control
                    P
vector qn provided    n s`n has been included in w` , as in Proposition 5). The c matrix is again

redundant in the just-identified case.
   A natural generalization of the quasi-experimental framework of Section 3 follows. Rather than
rederiving all of these results, we discuss them intuitively in the setting of Jaeger et al. (2018). Here
y` denotes the growth rate of wages in region ` in a given period (residualized on Mincerian con-
trols), x1` is the immigrant inflow rate in that period, and x2` is the previous period’s immigration
rate. The residual ε` captures changes to local productivity and other regional unobservables. Jaeger
                                                                                          P
et al. (2018, Table 5) estimate this model with two “past settlement” instruments z1` = n s`n g1n
            P
and z2` = n s`n g2n , where s`n is the share of immigrants from country of origin n in location `
at a previous reference date and g n = (g1n , g2n )0 gives the current and previous period’s national
immigration rate from n. When this path of immigration shocks is as-good-as-randomly assigned
with respect to the aggregated productivity shocks ε̄n (satisfying a generalized Assumption 1), the
                                            P 2 
g n are uncorrelated across countries and E   n sn → 0 (satisfying a generalized Assumption 2), and

appropriately generalized regularity conditions hold, the multiple-treatment shock orthogonality con-
                    P             p
dition is satisfied: n sn gkn ε̄n −
                                  → 0 for each k. Then under the relevance condition from Proposition
                                                                                                   p
2, again appropriately generalized, the SSIV estimates are consistent: β̂ −
                                                                          → β.


Effective First-Stage F -statistics With one endogenous variable and multiple instruments, the
Montiel Olea and Pflueger (2013) effective first-stage F -statistic provides a state-of-art heuristic for
detecting a weak first-stage. Here we describe a correction to it for SSIV that generalizes the F -
statistic in the single instrument case discussed in Section 5.2. The Stata command weakssivtest,
provided with our replication archive, implements this correction.56
   Consider a structural first stage with multiple instruments and one endogenous variable:


                                               x` = π 0 z` + ρw` + η` .                                                (54)


Suppose each of the shocks satisfies Assumption 3, i.e. E [gjn | ε̄, q, s] = µ0j qn , where
                                                                                                             P
                                                                                                                 n s`n qn   is
 56 Our   package extends the weakivtest command developed by Pflueger and Wang (2015).


                                                                60
                                          ∗
included in w` , and the residual shocks gjn = gjn − µ0j qn are independent from {η` }` . The Montiel
Olea and Pflueger (2013) effective F -statistic for the 2SLS regression of y` on x` , instrumenting with
z1` , . . . , zJ` , controlling for w` , and weighting by e` , is given by

                                                           ⊥ ⊥ 0              ⊥ ⊥
                                                  P                   P           
                                                     ` e` x` z`         ` e` x` z`
                                      Feff =                                       ,                         (55)
                                                                 tr V̂

                                          ⊥
                                 P              
where V̂ estimates V = Var          ` e` z` η`    . Note that, as before, the first-stage covariance of the original
SSIV regression equals that of the equivalent shock-level one from Proposition 5:

                          X                   X                  X                   X
                                e ` x⊥  ⊥
                                     ` z` =        e ` x⊥
                                                        ` z` =         sn gn x̄⊥
                                                                               n =       sn gn⊥ x̄⊥
                                                                                                  n,           (56)
                            `                 `                    n                 n


where gn⊥ is the residuals from an sn -weighted projection of gn on qn , which consistently estimates
gn∗ . A natural extension of Proposition 5 to many mutually-uncorrelated shocks further implies that
V is well-approximated by
                                                         X
                                                                      0 ¯2
                                                  V̂ =       s2n gn⊥ gn⊥ η̂n ,                                 (57)
                                                         n

where, per the discussion in Section 5.2, η̂¯n denotes the residuals from an IV regression of x̄⊥
                                                                                                n on
  ⊥              ⊥
z̄1n , . . . , z̄Jn , instrumented with g1n , . . . , gJn , weighted by sn and controlling for qn . Plugging this V̂
into (55) yields the corrected effective first-stage F -statistic.


Efficient Shift-Share GMM In overidentified settings (J > K), it is natural to consider which
estimators are most efficient; for quasi-experimental SSIV, this can be answered by combining the
asymptotic results of Adão et al. (2019) with the classic generalized methods of moments (GMM)
theory of Hansen (1982). Here we show how standard shock-level IV procedures (such as 2SLS) may
yield efficient coefficient estimates β̂ ∗ , depending on the variance structure of multiple quasi-randomly
assigned shocks.
    We first note that the equivalence result (52) applies to SSIV-GMM estimators as well:

                                                       0
                                β̂ = arg min y ⊥ − x⊥ b ezW z 0 e y ⊥ − x⊥ b
                                                                            
                                          b
                                                        0
                                  = arg min ȳ ⊥ − x̄⊥ b SgW g 0 S ȳ ⊥ − x̄⊥ b ,
                                                                               
                                                                                                               (58)
                                          b


where W is an J × J moment-weighting matrix. This leads to an IV estimator with c = x̄⊥0 SgW .
For 2SLS estimation, for example, W = (z ⊥0 ez ⊥ )−1 . Under appropriate regularity conditions, the
efficient choice of W ∗ consistently estimates the inverse asymptotic variance of z 0 e y ⊥ − x⊥ β =
                                                                                                  

g 0 S ε̄ + op (1). Generalizations of results in Adão et al. (2019) can then be used to characterize this
W ∗ when shocks are as-good-as-randomly assigned with respect to ε̄. Given an estimate Ŵ ∗ , an



                                                              61
                                                                                                       ∗
efficient coefficient estimate β̂ ∗ is given by shock-level IV regressions (52) that set c∗ = x̄⊥0 Sg Ŵ . A
χ2J−K test statistic based on the minimized objective in (58) can be used for specification testing.
   As an example, suppose shocks are conditionally homoskedastic with the same variance-covariance
matrix across n, Var [g n | ε̄, s] = G for a constant J × J matrix G. Then the optimal β̂ ∗ is obtained
by a shock-level 2SLS regression of ȳn⊥ on all x̄⊥
                                                  kn (instrumented by gjn and weighted by sn ). We show

this in the case of no controls (and mean-zero shocks) for notational simplicity. Then,


                                Var g 0 S ȳ ⊥ − x̄⊥ β = E [ε̄0 Sgg 0 S ε̄]
                                                     

                                                            = tr (E [ε̄0 SGS ε̄])

                                                            = kG                                       (59)


for k = tr (E [S ε̄ε̄0 S]). The optimal weighting matrix thus should consistently estimate G, which is
satisfied by Ĝ = g 0 Sg. Under appropriate regularity conditions, a feasible optimal GMM estimate is
thus given by

                                              −1                         −1
                            β̂ ∗ = (x̄⊥0 Sg Ĝ g 0 S x̄⊥ )−1 (x̄⊥0 Sg Ĝ g 0 S ȳ ⊥ )
                                            0     −1          0
                                 = Pg x̄⊥ S x̄⊥           Pg x̄⊥ S ȳ ⊥ ,                              (60)


where Pg = g(g 0 Sg)−1 g 0 S is an sn -weighted shock projection matrix. This is the formula for an
sn -weighted IV regression of ȳn⊥ on the fitted values from projecting the x̄⊥
                                                                              kn on the shocks, cor-

responding to the 2SLS regression above. Straightforward extensions of this equivalence between
optimally-weighted estimates of β and shock-level overidentified IV procedures follow in the case of
heteroskedastic or clustered shocks, in which case the 2SLS estimator (60) is replaced by the estimator
of White (1982). We emphasize that these shock-level estimators are generally different than 2SLS
or White (1982) estimators at the level of original observations, which are optimal under conditional
homoskedasticity and independence assumptions placed on the residual ε` (assumptions which are
generally violated in our quasi-experimental framework).


Many Shocks in Autor et al. (2013) Appendix Table C5 illustrates different shock-level overiden-
tified IV estimators in the setting of Autor et al. (2013), introduced in Section 6.2.1. ADH construct
their shift-share instrument based on the growth of Chinese imports in eight economies comparable to
the U.S., together. We separate them to produce eight sets of industry shocks gjn , j = 1, . . . , 8, each
reflecting the growth of Chinese imports in one of those countries. As in Section 6.2, the outcome of
interest is a commuting zone’s growth in total manufacturing employment with the single treatment
variable measuring a commuting zone’s local exposure to the growth of imports from China (see foot-
note 38 for precise variable definitions). The vector of controls coincides with that of column 3 of



                                                       62
Table 4, isolating within-period variation in manufacturing shocks. Per Section 5.1, exposure-robust
standard errors are obtained by controlling for period main effects in the shock-level IV procedures,
and we report corrected first stage F -statistics constructed as detailed above.
   Column 1 reports estimates of the ADH coefficient β using the industry-level two-stage least
squares procedure (60). At -0.238, this estimate it is very similar to the just-identified estimate in
column 3 of Table 4. Column 2 shows that we also obtain a very similar coefficient of -0.247 with
an industry-level limited information maximum likelihood (LIML) estimator. Finally, in column 3
we report a two-step optimal IV estimate of β using an industry-level implementation of the White
(1982) estimator. Both the coefficient and standard error fall somewhat, with the latter consistent
with the theoretical improvement in efficiency relative to columns 1 and 2. From this efficient estimate
we obtain an omnibus overidentification test statistic of 10.92, distributed as chi-squared with seven
degrees of freedom under the null of correct specification. This yields a p-value for the test of joint
orthogonality of all eight ADH shocks of 0.142. Table C5 also reports the corrected effective first-
stage F -statistic which measures the strength of the relationship between the endogenous variable
and the eight shift-share instruments across regions. At 15.10 it is substantially lower than with one
instrument in column 3 of Table 4 but still above the conventional heuristic threshold of 10.


A.12     Finite-Sample Performance of SSIV: Monte-Carlo Evidence

In this appendix we study the finite-sample performance of the SSIV estimator via Monte-Carlo
simulation. We base this simulation on the data of Autor et al. (2013), as described in Section 6.2.
For comparison, we also simulate more conventional shock-level IV estimators, similar to those used
in Acemoglu et al. (2016), which also estimate the effects of import competition with China on U.S.
employment. We begin by describing the design of these simulations and the benchmark Monte-
Carlo results. We then explore how the simulation results change with various deviations from the
benchmark: with different levels of industry concentration, different numbers of industries and regions,
and with many shock instruments. Besides showing the general robustness of our framework, these
extensions allow us to see how informative some conventional rules of thumb are on the finite-sample
performance of shift-share estimators.


Simulation design We base our benchmark data-generating process for SSIV on the specification
in column 3 of Table 4. The outcome variable y`t corresponds to the change in manufacturing em-
ployment as a fraction of working-age population of region ` in period t, treatment x`t is a measure of
regional import competition with China, and the shift-share instrument is constructed by combining
the industry-level growth of China imports in eight developed economies, gnt , with lagged regional
employment weights of different industries s`nt . We also include pre-treatment controls w`t as in
column 3 of Table 4 and and estimate regressions with regional employment weights e`t ; see Section


                                                  63
6.2.1 for more detail on the Autor et al. (2013) setting.
    In a first step we obtain an estimated SSIV second and first stage of


                                             y`t = β̂x`t + γ̂ 0 w`t + ε̂`t ,                                       (61)

                                             x`t = π̂z`t + ρ̂0 w`t + û`t .                                        (62)

                                                             ∗
We then generate 10,000 simulated samples by drawing shocks gnt , as detailed below, and constructing
                                      ∗            ∗
                                                      and treatment x∗`t = π̂z`t ∗
                                           P
the simulated shift-share instrument z`t = n s`nt gnt                              + û`t . Imposing a
true causal effect of β ∗ = 0, we use the same y`t
                                                ∗
                                                   ≡ ε̂`t as the outcome in each simulation (note that
it is immaterial whether we include π̂ 0 w`t and ρ̂0 w`t , since all our specifications control for w`t ). By
keeping ε̂`t and û`t fixed, we study the finite sample properties of the estimator that arises from the
randomness of shocks, which is the basis of the inferential framework of Adão et al. (2019); we also
avoid having to take a stand on the joint data generating process of (ε`t , u`t ), which this inference
framework does not restrict.
    We estimate SSIV specifications that parallel (61)-(62) from the simulated data

                                             ∗
                                            y`t = β ∗ x∗`t + γ ∗0 w`t + ε∗`t ,                                     (63)

                                            x∗`t = π ∗ z`t
                                                        ∗
                                                           + ρ∗0 w`t + u∗`t .                                      (64)


using the original weights e`t and controls w`t . We then test the (true) hypothesis β ∗ = 0 using either
the heteroskedasticity-robust standard errors from the equivalent industry-level regression or their
version with the null imposed, as in Section 5.1.57 As in column 3 of Table 4, we control for period
indicators as qnt in the industry-level regression.
    Our comparison estimator is a conventional industry-level IV inspired by Acemoglu et al. (2016).
However, we try to keep the IV regression as similar to the SSIV as possible, thus diverging from
Acemoglu et al. (2016) in some details. Specifically, the outcome ynt is the industry employment
growth as measured by these authors. It is defined for 392 out of the 397 industries in Autor et
                                                                                                     US
al. (2013), so we drop the remaining five industries in each period. The endogenous regressor xnt ≡ gnt
(growth of U.S. imports from China per worker) and the instrument gnt (growth of China imports
into eight developed economies) are those from which we built the shift-share endogenous regressor
and treatment, respectively (see footnote 38). Construction of those variables differ from Acemoglu
et al. (2016) who measure imports relative to domestic absorption rather than employment. We also
follow our SSIV analysis in using period indicators as the only industry-level control variables qnt and
taking identical regression importance weights snt .
  57 Note that there is no need for clustering since we generate the shocks independently across industries in all simu-

lations. We have verified, however, that allowing for correlation in shocks within industry groups and using clustered
standard errors yields similar results.




                                                           64
   The Monte-Carlo strategy for the conventional shock-level IV parallels the one for SSIV; we obtain
an estimated industry-level second and first stage of


                                          ynt = β̂ind xnt + γ̂ 0 qnt + ε̂nt ,                                  (65)

                                          xnt = π̂ind gnt + ρ̂0 qnt + ûnt .                                   (66)


using the snt importance weights. We then perform 10,000 simulations where we regenerate shocks
 ∗               ∗
gnt and regress ynt = ε̂nt (consistent with a true causal effect of β ind = 0, given that we control for
qnt ) on x∗nt = π̂ind gnt
                       ∗                             ∗
                          + ûnt , instrumenting by gnt , controlling for qnt , and weighting by snt . We test
βind = 0 by using robust standard errors in this IV regression or the version with the null imposed,
which corresponds to a standard Lagrange Multiplier test for this true null hypothesis.
   In both simulations we report the rejection rate of nominal 5% level tests for β = 0 and βind = 0
to gauge the quality of each asymptotic approximation. We do not report the bias of the estimators
because they are all approximately unbiased (more precisely, the simulated median bias is at most 1%
of the estimator’s standard deviation). However we return to the question of bias at the end of the
section, where we extend the analysis to having many instruments with a weak first stage.


Main results Table C7 reports the rejection rates for shift-share IV (columns 1 and 2) and conven-
tional industry-level IV (columns 3 and 4) in various simulations. Specifically, column 1 corresponds
to using exposure-robust standard errors from the equivalent industry-level IV, and column 2 imple-
ments the version with the null hypothesis imposed. Columns 3 and 4 parallel columns 1 and 2 when
applied to conventional IV: the former uses heteroskedasticity-robust standard errors and the latter
tests βind = 0 with the null imposed, which amounts to using the Lagrange multiplier test.
   The simulations in Panel A vary the data-generating process of the shocks. Following Adão et
al. (2019) in row (a) we draw the shocks iid from a normal distribution with the variance matched
to the sample variance of the shocks in the data after de-meaning by year. The rejection rate is close
to the nominal rate of 5% for both SSIV and conventional IV (7.6% and 6.8%, respectively), and in
both cases it becomes even closer when the null is imposed (5.2% and 5.0%).
   This simulation may not approximate the data-generating process well because of heteroskedastic-
ity: smaller industries have more volatile shocks.58 To match unrestricted heteroskedasticity, in row
                                       ∗         ∗
(b) we use wild bootstrap, generating gnt = gnt νnt by multiplying the year-demeaned observed shocks
        ∗  iid
gnt by νnt ∼ N (0, 1) (Liu 1988). This approach also provides a better approximation for the marginal
distribution of shocks than the normality assumption. Here the relative performance of SSIV is even
better: the rejection rate is 8.0% vs. 14.2% for conventional IV.
   We now depart from the row (b) simulation in several directions, as a case study for the sensitivity
 58 This is established by unreported regressions of |gnt | on snt , for year-demeaned gnt from ADH, with or without
weights. The negative relationship is significant at conventional levels.



                                                         65
of the asymptotic approximation to different features of the SSIV setup. Specifically, we study the
role of the Herfindahl concentration index across industries, the number of regions and industries,
and the many weak instrument bias. We uniformly find that the performance of the SSIV estimator
is similar to that of industry-level IV. Our results also suggest that the Herfindahl index is a useful
statistic for measuring the effective number of industries in SSIV, and the first-stage F -statistic is
informative about the weak instrument bias, as usual.


The Role of Industry Concentration Since Assumption 2 requires small concentration of in-
                                                                          P        2
dustry importance weights, measured using the Herfindahl index n,t s2nt /
                                                              P
                                                                            n,t snt    , Panel B of
Table C7 studies how increasing the skewness of snt towards the bigger industries affects coverage of
the tests.59 For conventional IV this simply amounts to reweighting the regression. Specifically, for a
parameter α > 1, we use weights                                P
                                                                n ,t   0   0   sn0 t0
                                             s̃nt =     sα
                                                         nt   ·P           α            .
                                                                   n0 ,t0 sn0 t0


We choose the unique α to match the target level of HHI
                                                    ^ by solving, numerically,

                                               P               2
                                                  (s̃nt )
                                                  n,t
                                              P         2 = HHI.
                                                              ^                                                  (67)
                                                n,t s̃nt


    Matching the Herfindahl index in SSIV is more complicated since we need to choose how exactly
to amend shares s̃`nt and regional weights ẽ`t that would yield s̃nt from (67). We proceed as follows:
we consider the lagged level of manufacturing employment by industry E`nt = e`t s`nt and the total
regional non-manufacturing employment E`0t = e`t (1 − n s`nt ).60 We then define Ẽ`nt = E`nt · ss̃nt
                                                     P                                             nt



for manufacturing industries (and leave non-manufacturing employment unchanged, Ẽ`0t = E`0t ).
This increases employment in large manufacturing industries proportionately in all regions, while
reducing it in smaller ones. We then recompute shares s̃`nt and weights ẽ`t accordingly:

                                                          N X
                                                          X
                                                 ẽ`t =                    Ẽ`nt ,
                                                          n=0      t

                                                          Ẽ`nt
                                               s̃`nt =          .
                                                           ẽ`t

    Rows (c)–(e) of Table C7 Panel B implement this procedure for target Herfindahl levels of 1/50,
1/20, and 1/10, respectively. For comparison, the Herfindahl in the actual ADH data is 1/191.6
(Table 1, column 2). The table finds that even with the Herfindahl index of 1/20 (corresponding to
the “effective” number of shocks of 20 in both periods total) the rejection rate is still around 7%, a level
 59 Note
                       P
          that in ADH n s`nt equals the lagged share of regional manufacturing employment, which is below one. We
thus renormalize the shares when computing the Herfindahl.
  60 The interpretation of E
                            `nt as the lagged level is approximate since e`t is measured at the beginning of period in
ADH, while s`nt is lagged.



                                                              66
that may be considered satisfactory. It also shows that the rejection rate grows when the Herfindahl is
even higher, at 1/10, suggesting that the Herfindahl can be used as an indicative rule of thumb. More
importantly, the rejection rates are similar for SSIV and conventional industry-level IV, as before.


Varying the Number of Industries and Regions The asymptotic sequence we consider in
Section 3.1 relies on both N and L growing. Here we study how the quality of the asymptotic
approximation depends on these parameters.
    First, to consider the case of small N , we aggregate industries in a natural way: from 397 four-
digit manufacturing SIC industries into 136 three-digit ones and further into 20 two-digit ones and
reconstruct the endogenous right-hand side variable and the instrument using aggregated data.61 Rows
(f) and (g) of Table C7 Panel C report simulation results based on the aggregated data. They show that
rejection rates are similar to the case of detailed industries, and between SSIV and conventional IV.
This does not mean that disaggregated data are not useful: the dispersion of the simulated distribution
(not reported) increases with industry aggregation, reducing test power. However, standard errors
correctly reflect this variability, resulting in largely unchanged test coverage rates.
    Second, to study the implications of having fewer regions L, we select a random subset of them
in each simulation. The results are presented in Rows (h) and (i) of Panel C for L = 100 and 25,
compared to the original L = 722, respectively.62 They show once again that rejection rates are not
significantly affected (even though unreported standard errors expectedly increase).


Many Weak Instruments In this final simulation we return to the question of SSIV bias. Since
our previous simulations confirm that just-identified SSIV is median-unbiased, we turn to the case of
multiple instruments. We show that the problem of many weak instruments is similar between SSIV
and conventional IV, and that first-stage F -statistics, when properly constructed, can serve as useful
heuristics.
    For clarity, we begin by describing the procedure for the conventional shock-level IV that is a small
departure from Column 3 of Table C7. For a given number of instruments J ≥ 1, in each simulation
             ∗
we generate gjnt , j = 1, . . . , J, independently across j using wild bootstrap (as in Table C7 Row
                                                                                   PJ
(b)).63 We make only the first instrument relevant by setting x∗nt = π̂ind g1nt
                                                                              ∗              ∗
                                                                                 + j=2 0 · gjnt + ûnt .
                                       ∗
We then estimate the IV regression of ynt ≡ ε̂nt on x∗nt , instrumenting with g1nt
                                                                               ∗              ∗
                                                                                   , . . . , gJnt , controlling
for qnt , and weighting by snt . We use robust standard errors and compute the effective first-stage
  61 Specifically, we aggregate imports from China to the U.S. and either developed economies as well as the number

of U.S. workers by manufacturing industry to construct the new gnt and gnt    US . We then aggregate the shares s
                                                                                                                  `nt and
scurrent
 `nt     to construct x`t and z`t (see footnote 38 for formulas). We do not change the regional outcome, controls, or
importance weights. For conventional IV, we additionally reconstruct the outcome (industry employment growth) by
aggregating employment levels by year in the Acemoglu et al. (2016) data and measuring growth according to their
formulas.
  62 When we select regions, we always keep observations from both periods for each selected region. We keep the

second- and first-stage coefficients from the full sample to focus on the noise that arises from shock randomness.
  63 For computational reasons we perform only 15, 000/J simulations when J > 1 (but 10,000 for J = 1 as before).




                                                           67
F -statistic using the Montiel Olea and Pflueger (2013) method.
   The procedure for SSIV is more complex but as usual parallels the one for the conventional shock-
                                                          ∗
level IV as much as possible. Given simulated shocks gjnt    , we construct shift-share instruments
  ∗            ∗
                                                                            PJ
                   and make only the first of them relevant, x∗`t = π̂z1`t
                                                                       ∗              ∗
       P
zj`t = ` s`nt gjnt                                                         + j=2 0 · zjnt + û`t . Since
the equivalence result from Section 2.3 need not hold for overidentified SSIV, we rely on the results
in Appendix A.11: we estimate β ∗ from the industry-level regression of ȳnt
                                                                          ∗⊥            ∗
                                                                             (based on y`t = ε̂`t as
before) on x̄∗⊥                            ∗              ∗
             nt by 2SLS, instrumenting by g1nt , . . . , gJnt , controlling for qnt and weighting by snt .

We compute robust standard errors from this regression to test β ∗ = 0. For effective first-stage F -
statistics, we follow the procedure described in Appendix A.11 and implemented via our weakssivtest
command in Stata.
   Table C8 reports the result for J = 1, 5, 10, 25, and 50, presenting the rejection rate corresponding
to the 5% nominal, the median bias as a percentage of the simulated standard deviation, and the
median first-stage F -statistic. Panel A corresponds to SSIV and Panel B to the conventional shock-
level IV. For higher comparability, we adjust the first-stage coefficient π̂ind in the latter in order to
make the F -statistics approximately match between the two panels. We find that the median bias is
now non-trivial and grows with J, at the same time as the F -statistic declines. However, the level of
bias is similar for the two estimators. The rejection rates tend to be higher for conventional IV than
SSIV, although they converge as J grows.




                                                   68
B     Appendix Proofs

B.1     Proposition 4 and Extensions

This section proves Proposition 4 and extensions that allow for certain forms of mutual shock depen-
dence (Assumptions 5 and 6). Proposition 3 is obtained as a special case, where qn = 1. In addition
                                                                     p
to Assumptions 3 and 4 and the relevance condition of ` e` z` x⊥
                                                        P
                                                                 ` −→ π with π 6= 0, the proof of
Proposition 4 uses two regularity conditions:
                                            
Assumption B1: E g̃n2 | ε̄, q, s and E ε̄2n | s are uniformly bounded by some fixed Bg and Bε .

                                           = op (1), max ( ` e` w` w`0 ) −1 = Op (1), and max | ` e` w` z` | =
                       P                                  P                                    P
Assumption B2: k          ` e` w` ε` k1

            Op (1).

The first of these is a weak condition on the second moments of shocks and shock-level unobserv-
ables which we show below permits a shock-level law of large numbers. The second condition en-
sures the consistency of the IV estimate of the control coefficient, γ̂ = ( ` e` w` w`0 ) −1 ` e` w` ` =
                                                                              P             P

γ + ( ` e` w` w`0 ) −1 ` e` w` ε` (see footnote 5), and stochastic boundedness of the weighted average
      P                P
P
  ` e` w`m z` , while generally allowing the length of the control vector to increase with L. We discuss

low-level conditions for the consistency of γ̂ in Appendix A.5.
    To prove Proposition 4, we first note that under Assumption B2,

             X                  X                 X
                                    sn gn ε̄⊥         e` z` ε` − ε⊥
                                                                            
                  sn gn ε̄n −               n =                   `
              n                 n                 `
                                                                      !
                                                  X
                                              =           e` z` w`0       (γ̂ − γ)
                                                      `
                                                                      !                       !
                                                  X                         X                          X           p
                                              =           e` z` w`0               e` w` w`0       −1
                                                                                                           e` w` ε` −
                                                                                                                    → 0,   (68)
                                                      `                      `                         `


so that, when the relevance condition holds,

                                                            ⊥
                                               P
                                                  n sn gn ε̄n
                                      β̂ − β = P            ⊥
                                                  n sn gn x̄n
                                                    X
                                             = π −1     sn gn ε̄n (1 + op (1)) .                                           (69)
                                                           n

                      P
Furthermore, since      n s`n   = 1, we also have under Assumption B2 that

                                                                                  !0
                                      X                        X                        p
                                           sn qn0 µε̄n =              e` w̃` ε`        µ−
                                                                                        → 0.                               (70)
                                       n                       `




                                                               69
Thus

                                        X                      X
                                              sn gn ε̄n =               sn g̃n ε̄n + op (1),                                         (71)
                                         n                      n


with
                                                       "                    #
                                                           X
                                                   E           sn g̃n ε̄n = 0                                                        (72)
                                                           n


under Assumption 3.
                                                                                P                                      P             p
   To prove consistency of β̂, it remains to show that Var [                          n sn g̃n ε̄n ]   → 0 such that   n sn gn ε̄n   −
                                                                                                                                     → 0.
Since


                                  E [g̃n g̃n0 | ε̄, q, s] = Cov [g̃n , g̃n0 | ε̄, q, s] = 0                                          (73)


under Assumptions 3 and 4,

                              "                #                                     !2 
                                  X                             X
                        Var           sn g̃n ε̄n = E                    sn g̃n ε̄n       
                                  n                                 n
                                                       XX
                                                   =                E [sn sn0 g̃n g̃n0 ε̄n ε̄n0 ]
                                                           n   n0
                                                       X 
                                                        E s2n E E g̃n2 | ε̄, q, s ε̄2n | s .
                                                                                       
                                                   =                                                                                 (74)
                                                           n


Then, by Assumption B1 and the Cauchy-Schwartz inequality:
                                        "                  #                    "               #
                                         X                                       X
                                  Var         sn g̃n ε̄n ≤ Bg Bε E                        s2n       → 0.                             (75)
                                          n                                           n




                                                                70
Extensions Similar steps establish equation (75) when Assumption 4 is replaced by either Assump-
tion 5 or 6. Under Assumption 5 we have, for N (c) = {n : c(n) = c},
                                                                           2 
                              "                     #
                               X                             X X
                        Var            sn g̃n ε̄n       = E     sn g̃n ε̄n  
                                                                                
                                  n                                   c    n∈N (c)
                                                                                  2 
                                                            X           X sn
                                                        = E   s2c E       g̃n ε̄n  | s
                                                                                        
                                                             c
                                                                          sc
                                                                                      n∈N (c)
                                                                                                                          
                                                            X                   X          sn sn0
                                                        = E  s2c                                 E [g̃n g̃n0 ε̄n ε̄n0 | s]
                                                                  c
                                                                                           sc sc
                                                                           n,n0 ∈N (c)
                                                                       "              #
                                                                        X
                                                        ≤ Bg Bε E               s2c       → 0.                                 (76)
                                                                            c


Here the last line used Assumption B1 and the Cauchy-Schwartz inequality twice: to establish, for
n, n0 ∈ N (c),

                                                                      p
                                      E [g̃n g̃n0 | ε̄, q, s] ≤        E [g̃n | ε̄, q, s] E [g̃n0 | ε̄, q, s]

                                                                 ≤ Bg                                                          (77)


and

                                                                            q
                                            E [|ε̄n | |ε̄n0 | | sc ] ≤       E [ε̄2n | s] E [ε̄2n0 | s]

                                                                          ≤ Bε .                                               (78)


If we instead replace Assumption 4 with Assumption 6, we have

              "               #                                  !2 
                  X                           X
        Var           sn g̃n ε̄n = E                   sn g̃n ε̄n 
                  n                                n
                                       XX
                                  =                 E [sn sn0 E [g̃n g̃n0 | ε̄, q, s] ε̄n ε̄n0 ]
                                        n     n0
                                              XX
                                  ≤ BL                      f (|n0 − n|) E [|sn ε̄n sn0 ε̄n0 |]
                                              n        n0
                                                                        −1 N −r
                                                                      N
                                                                                                                   !
                                               X                     X    X
                                                           2
                                                             
                                  = BL          E (sn ε̄n ) f (0) + 2           E [|sn+r ε̄n+r | · |sn ε̄n |] f (r)
                                                   n                                       r=1 n=1
                                                                             −1
                                                               !           N
                                                                                     !
                                            X                             X
                                             E s2n E ε̄2n | s
                                                            
                                  ≤      BL                      f (0) + 2      f (r)
                                                   n                                                  r=1
                                                                 −1
                                                               N
                                                                                !            "             #!
                                                               X                              X
                                  ≤ Bε        f (0) + 2               f (r)           BL E           s2n        → 0,           (79)
                                                                r=1                              n




                                                                            71
                
using E ε̄2n | sn < Bε in the last line. Here the second-to-last line follows because for any sequence
of numbers a1 , . . . , aN and any r > 0,

                                                      −r                −r
                                                    N                 N
                                                                                     !
                               X            1       X                 X
                                    a2n   ≥                a2n   +           a2n+r
                                n
                                            2        n=1              n=1
                                                  N −r                           N −r
                                              1   X                          2
                                                                                 X
                                          =              (an − an+r ) +                  an an+r
                                              2   n=1                            n=1
                                              N
                                              X −r
                                          ≥          an an+r ,                                                         (80)
                                              n=1


and the same is true in expectation if an = |sn ε̄n | are random variables. We note that allowing BL
to grow in the asymptotic sequence imposes much weaker conditions on the correlation structure of
shocks. For example, with shock importance weights sn approximately equal, i.e. n s2n = Op (1/N ),
                                                                               P

it is enough to have |Cov [g̃n , g̃n0 | ε̄, q, s]| ≤ B1 /N α for any α > 0: in this case one can satisfy
Assumption 6 by setting BL = B1 N 1−α/2 and f (r) = r−1−α/2 .


B.2     Proposition 5 and Related Results

This section proves Proposition 5 and establishes several additional results mentioned in Section
5.1. First, we show the heteroskedasticity-robust standard error from estimating equation (13) is
numerically equivalent to the baseline IV standard error of Adão et al. (2019) when w` contains only
a constant. Second, we discuss the likely difference between our standard error estimates and those
of Adão et al. (2019), both without and with approximate shift-share controls. Finally, we show how
the alternative null-imposed inference procedure of Adão et al. (2019) is also conveniently obtained
from our equivalent shock-level regression.
   We prove Proposition 5 in a restricted version of our baseline framework that largely follows Adão
et al. (2019), imposing the following assumptions:
                                                             P
Assumption B3: The first stage satisfies x` =                     n s`n π`n gn       + η` , for all `.

Assumption B4: The control vector can be partitioned as w` = [w̃`0 , u0` ]0 , for w̃` =
                                                                                                             P
                                                                                                                  n s`n qn .

            The vector qn captures all sources of shock confounding: E [gn | IL ] = qn0 µ, for all n and
                 
            IL = {qn }n , {u` , ` , η` , {s`n , π`n }n , e` }` .

                                                                                                             s2n
Assumption B5: The gn are mutually independent given IL , maxn sn → 0, and maxn                          P
                                                                                                                s2n0
                                                                                                                       → 0.
                                                                                                             n0

                             
Assumption B6: E |gn |4+v | IL is uniformly bounded for some v > 0 and ` e` n s2`n Var [gn | IL ] π`n 6=
                                                                      P    P

0 almost surely. The support of π`n is bounded, the fourth moments of ` , η` , ũ` , and q̃n exist and
                                            p
are uniformly bounded, and ` e` w` w`0 −
                              P
                                           → Ωww for positive definite Ωww . The control vector γ is
                                              −1 P
consistently estimated by γ̂ = ( ` e` w` w`0 )
                                P
                                                  ` e` w` ` .




                                                                 72
   We note that Assumption B5 both strengthens our baseline Herfindahl index condition in As-
sumption 4 and implicitly treats the set of sn as non-stochastic, following Assumption 2 of Adão
et al. (2019). The regularity condition B6 includes the relevant conditions from Assumptions 4 and
A.3 of Adão et al. (2019). These assumptions strengthen those of Proposition 4: Assumptions B3–B6
imply our Assumptions 3, 4, B1, and B2. Relative to Adão et al. (2019), we do not impose that L > N
or that the shares are non-collinear.
                                                                                                                           P
   To establish the equivalence of IV coefficients in Proposition 5, note that when                                        n s`n qn   is included
in w`
                                                                                                     !
                                          X                      X                    X
                                              sn qn ȳn⊥     =              e` y`⊥          s`n qn          =0                              (81)
                                          n                         `                  n


                                    ⊥
                                          The sn -weighted regression of ȳn⊥ and x̄⊥
                      P
and similarly for         n sn qn x̄n .                                             n on qn thus produces a

coefficient vector that is numerically zero, implying the sn -weighted and gn -instrumented regression
of ȳn⊥ on x̄⊥
             n is unchanged with the addition of qn controls. Proposition 1 shows that the IV coefficient

from this regression is equivalent to the SSIV estimate β̂.
   To establish validity of the standard errors, note that the conventional heteroskedasticity-robust
standard error from for the sn -weighted shock-level IV regression of ȳn⊥ on x̄⊥
                                                                                n and qn , instrumented

by gn , is given by                                                   pP
                                                                           s2 ε̂2 ĝ 2
                                                     se
                                                     b equiv        = P n n⊥n n ,                                                           (82)
                                                                      | n sn x̄n gn |

where ε̂n = ȳn⊥ − β̂ x̄⊥
                        n is the estimated shock-level regression residual (where we used the fact that

the estimated coefficients on qn in that regression are numerically zero) and ĝn = gn − µ̂qn , where
                    −1 P
µ̂ = ( n sn qn qn0 )
      P
                         n sn qn gn , is the residual from a projection of the instrument in equation (13)

on the control vector qn . By Proposition 1, ε̂n coincides with the share-weighted aggregate of the
SSIV estimated residuals ε̂` = y`⊥ − β̂x⊥
                                        ` :


                                       e` s`n y`⊥          e` s`n x⊥
                                    P                   P             P
                                     `                   `         `      e` s`n ε̂`
                               ε̂n = P            − β̂ · P           = P`            .                                                      (83)
                                       ` e` s`n            ` e` s`n      ` e` s`n


The squared numerator of (82) can thus be rewritten

                                                                                                   !2
                                          X                         X X
                                                  s2n ε̂2n ĝn2 =                     e` s`n ε̂`        ĝn2 .                              (84)
                                              n                         n         `


The expression in the denominator of (82) estimates the magnitude of the shock-level first-stage
covariance, which matches the e` -weighted sample covariance of x` and z` :
                                                                                        !
                                X                      X X                                           X
                                     sn x̄⊥
                                          n gn     =                        e` s`n x⊥
                                                                                    `       gn =             e ` x⊥
                                                                                                                  ` z` .                    (85)
                                 n                       n          `                                   `




                                                                             73
Thus                                                qP        P              2
                                                         n   ( ` e` s`n ε̂` ) ĝn2
                                       se
                                       b equiv =             P       ⊥
                                                                                   .                                            (86)
                                                               ` e` x` z`

We now compare this expression to the standard error formula from Adão et al. (2019), incorporating
the e` importance weights. Equation (39) in their paper yields
                                                    qP        P              2
                                                         n   ( ` e` s`n ε̂` ) g̈n2
                                       se
                                       b AKM =               P       ⊥
                                                                                   ,                                            (87)
                                                               ` e` x` z`


where g̈n denotes the coefficients from regressing the residualized instrument z`⊥ on all shares s`n ,
without a constant; note that to compute this requires L > N and that the matrix of exposure shares
s`n is full rank. The formulas for se
                                   b equiv and se
                                               b AKM therefore differ only in the construction of shock
residuals, ĝn versus g̈n .
                                                       b 2equiv and se
    We establish the general asymptotic equivalence of se           b 2AKM , and thus the asymptotic
            b equiv , by showing that both capture the conditional asymptotic variance of β̂ given IL
validity of se
under Assumptions B3-B6. Both of the resulting confidence intervals are then asymptotically valid
                                                                 h h              ii
unconditionally, since if P r(β ∈ CI
                                  c | IL ) = α then P r(β ∈ CI)
                                                            c = E E 1[β ∈ CIc | IL = α by the

law of iterated expectations.Under Assumptions B3-B6, Proposition A.1 of Adão et al. (2019) applies
and shows that
                                                                                 
                                      √                               VL
                                           rL (β̂ − β) = N       0, rL 2              + op (1)                                  (88)
                                                                      π

                   P    2
                                      P   P         2
where rL = 1/        n sn       and VL =
                                      ( ` e` s`n ε` ) Var [gn | IL ], provided rL VL converges to a non-
                                             n
                                                                            P P                                p
                                                                                                    2 2
random limit. To establish the asymptotic validity of se
                                                       b AKM , i.e. that rL    n (  ` e ` s`n ε̂` )  g̈n − V L   −
                                                                                                                 →
0, Adão et al. (2019) further assume that L ≥ N , the matrix of s`n is always full rank, and additional
                                                                   P P                                 p
                                                                                            2 2
regularity conditions (see their Proposition 5). We establish rL        n ( ` e ` s`n ε̂ ` ) ĝn − V L   −
                                                                                                         → 0
without imposing those assumptions.
    To start, we write gn∗ = gn − qn0 µ and decompose
                         !2                           !2         
            X X                             X X
        rL     e` s`n ε̂` ĝn2 − VL  =rL     e` s`n ε` g̃n2 − VL 
               n       `                                     n        `
                                                                                              !2                     !2 
                                                             X            X                             X
                                                     + rL                        e` s`n ε̂`        −        e` s`n ε`  g̃n2
                                                              n               `                          `
                                                                                           !2
                                                             X X
                                                                                                 ĝn2 − g̃n2 .
                                                                                                            
                                                     + rL                     e` s`n ε̂`                                        (89)
                                                              n           `


Adão et al. (2019) show that the second term of this expression is op (1) under our assumptions, using
the fact (their Lemma A.3, again generalized to include importance weights) that for a triangular array


                                                             74
{AL1 , . . . , ALL , BL1 , . . . , BLL , CL1 , . . . , CLNL }∞
                                                                        4                          4                          
                                                             L=1 with E AL` | {{s`0 n }n , e`0 }`0 , E BL` | {{s`0 n }n , e`0 }`0 ,
        4                            
and E CLn       | {{s`0 n }n , e`0 }`0 uniformly bounded,

                                                 XXX
                                            rL                           e` e`0 s`n s`0 n AL` BL`0 CLn = Op (1).                                                                       (90)
                                                     `     `0       n


Here with D` = (z` , w`0 )0 , θ = (β, γ 0 )0 , and θ̂ = (β̂, γ̂ 0 )0 we can write

                                            !2                                    !2
                       X                                      X                             XX                                            
                               e` s`n ε̂`            =              e` s`n ε`          +2                       e` e`0 s`n s`0 n D`0 θ − θ̂ ε`0
                           `                                    `                               `       `0
                                                              XX
                                                         +                   e` e`0 D`0 (θ − θ̂)D`0 0 (θ − θ̂),                                                                        (91)
                                                                `       `0


and both D` and ε` have bounded fourth moments by the assumption of bounded fourth moments of
` , η` , u` , and pn in Assumption B6. Thus by the lemma
                                  !2                             !2                                                                                                              !
     X       X                                  X                                                                      XXX
rL               e` s`n ε̂`            −                e` s`n ε`  g̃n2 =2 θ − θ̂ 0                               rL                              e` e`0 s`n s`0 n g̃n2 D` ε`0
     n        `                                  `                                                                        `       `0        n
                                                                                                                                                                                       !
                                                                                                                        XXX                                                                          
                                                                                                                0
                                                                                        + θ − θ̂                     rL                              e` e`0 s`n s`0 n g̃n2 D` D`0 0            θ − θ̂
                                                                                                                              `        `0       n
                                                                                                                                                            
                                                                                                        0                                       0
                                                                                      = θ − θ̂              Op (1) + θ − θ̂                         Op (1) θ − θ̂ ,                    (92)


which is op (1) by the consistency of θ̂ (implied by Assumptions B3-B6). Adão et al. (2019) further
show the first term of equation (89) is op (1), without using the additional regularity conditions of
their Proposition 5.
     It thus remains for us to show the third term of (89) is also op (1). Note that

                                                                    2                                           2
                                    ĝn2 = (gn − qn0 µ̂) = g̃n2 + (qn0 (µ̂ − µ)) − 2g̃n qn0 (µ̂ − µ) ,                                                                                 (93)


so that
                                                         !2
                       X X
                                                                ĝn2 − g̃n2
                                                                              
                  rL                    e` s`n ε̂`
                       n            `
                                                         !2
                       X X
              =rL                       e` s`n ε̂`            (qn0 (µ̂ − µ) − 2g̃n ) qn0 (µ̂ − µ)
                       n            `
                                                         !2
                       X X
              =rL                       e` s`n ε`             (qn0 (µ̂ − µ) − 2g̃n ) qn0 (µ̂ − µ)                                                                                      (94)
                       n            `
                                                               !2                             !2 
                           X                X                                  X
                  + rL                          e` s`n ε̂`             −             e` s`n ε`  (qn0 (µ̂ − µ) − 2g̃n ) qn0 (µ̂ − µ) .
                               n            `                                     `




                                                                                       75
Using the previous lemma, the first term of this expression is Op (1)(µ̂ − µ) since ε` , pn , and g̃n have
bounded fourth moments under Assumption B6. The second term is similarly Op (1)(µ̂ − µ) by the
                                                                                     −1 P             p
lemma and the decomposition used in equation (92). Noting that µ̂−µ = ( n sn qn qn0 )
                                                                       P
                                                                                          n sn qn g̃n −
                                                                                                      →
0 under the assumptions completes the proof.


The Case of No Controls We show that when there are no controls besides a constant, i.e.
w` = gn = 1, the standard errors are numerically the same. To prove this, it suffices to show that
                                       P
ĝn = g̈n . Absent controls, ĝn = gn − n sn gn is the sn -weighted demeaned shock. The g̈n are obtained
as the projection coefficient of z`⊥ = z` − ` e` z` on the N shares. Note that
                                           P


                                         X                X          X                 X
                                                e` z` =         e`          s`n gn =       sn gn ,                                (95)
                                          `                 `          n               n

                P
so that, with      n s`n   = 1,

                                         X                X                  X              X
                                  z` −         e` z` =          s`n gn −          sn gn =        s`n ĝn .                        (96)
                                          `                n                  n              `


This means that the projection in Adão et al. (2019) has exact fit and produces g̈n = ĝn .


Comparison of Standard Errors The characterization of the standard errors in equations (86)–(87)
offers insights into how these standard errors may differ in presence of controls. We argue that under
the conditions of Proposition 5, our standard errors are likely smaller in finite samples. However,
when Assumption B3 is violated because some controls have the approximate shift-share structure
allowed by Adão et al. (2019), our standard errors are likely asymptotically conservative.
    To see this, consider versions of the two standard error formulas obtained under shock homoskedas-
ticity (i.e. Var [gn | IL ] = σg2 ):

                                                          pP               P
                                                           ( n s2n ε̂2n ) ( n sn ĝn2 )
                                              b homo
                                              seequiv   =                                                                         (97)
                                                                    sn x̄⊥
                                                               P
                                                             |             n gn |
                                                          pP n             P
                                                                 2    2
                                                           ( n sn ε̂n ) ( n sn g̈n2 )
                                              b homo
                                              seAKM     =      P          ⊥
                                                                                        ,                                         (98)
                                                                  ` e` x` z`

                                  pP                  P
                                                2                2
which differ by a factor of              n sn ĝn /       n sn g̈n .
                                                                                                     P
    When the SSIV controls have an exact shift-share structure, w` =                                  n s`n qn ,   the share projection
producing g̈n has exact fit such that one can represent g̈n = gn − qn0 µ̂AKM for some µ̂AKM . In
this case the sn -weighted sum of squares of shock residuals is lower in our equivalent regression by
                              2           2
                    P             P
construction of µ̂:    n sn ĝn ≤  n sn g̈n (with strict inequality when µ̂AKM 6= µ̂). Similarly, when

w` instead contains controls that are included for efficiency only and are independent of the shocks,
                                                                   P
projection of z` on the shares produces a noisy estimate of gn − n sn gn , which again has a higher



                                                                       76
weighted sum of squares.
                                                                                                                     P
    In contrast, if some controls have an approximate shift-share structure, w` =                                    n s`n q̃n   + u` ,
where q̃n is unobserved and correlated with gn and the variance of the noise u` converges to zero,
then g̈n asymptotically residualizes gn on q̃n while ĝn does not. Therefore, the sum of squares of g̈n is
asymptotically smaller than that of ĝn . Since the Adão et al. (2019) standard errors are asymptotically
correct, our formula is asymptotically conservative in this scenario.


Null-Imposed Inference Procedure Finally, our shock-level equivalence provides a convenient
implementation for the alternative inference procedure that may have superior finite-sample perfor-
mance. Adão et al. (2019) show how standard errors that impose a given null hypothesis β = β0 in
estimating the residual ε` can generate confidence intervals with better coverage in situations with
few shocks (and a similar argument can be made in the case of shocks with a heavy-tailed distribu-
tion).64 Building on Proposition 5, such confidence intervals can be constructed in the same way as
in any regular shock-level IV regression. To test β = β0 , one regresses ȳn⊥ − β0 x̄⊥
                                                                                     n on the shocks gn

(weighting by sn and including any relevant shock-level controls qn ) and uses a null-imposed residual
variance estimate. This procedure corresponds to the standard shock-level Lagrange multiplier test
for β = β0 that can be implemented by standard statistical software.65 The confidence interval for β
is constructed by collecting all candidate β0 that are not rejected.


B.3      Proposition A1

We consider each expectation in equation (16) in turn. For each n, write


                   κn (g−n , ε` , η` ) =    lim     y(x1 ([gn ; g−n ], η`1 ), . . . , xR ([gn ; g−n ], η`R ), ε` )                (99)
                                           gn →−∞


such that


              s`n e` gn y` =s`n e` gn κn (g−n , ε` , η` )                                                                        (100)
                                          Z gn
                                                 ∂
                            + s`n e` gn               y(x1 ([γ; g−n ], η`1 ), . . . xR ([γ; g−n ], η`R ), ε` )dγ.
                                           −∞   ∂g  n


By as-good-as-random shock assignment, the expectation of the first term is


               E [s`n e` gn κn (g−n , ε` , η` )] = E [s`n e` E [gn | s, e, g−n , ε, η` ] κn (g−n , ε` , η` )] = 0,               (101)
  64 As explained by Adão et al. (2019), the problem that this “AKM0” confidence interval addresses generalizes the

standard finite-sample bias of cluster-robust standard errors with few clusters (Cameron and Miller 2015). With few or
heavy-tailed shocks, estimates of the residual variance will tend to be biased downwards, leading to undercoverage of
confidence intervals based on standard errors that do not impose the null.
  65 For example in Stata one can use the ivreg2 overidentification test statistic from regressing ȳ ⊥ − β x̄⊥ on q with
                                                                                                     n     0 n      n
no endogenous variables and with gn specified as the instrument (again with sn weights).




                                                                77
while the expectation of the second is
                 Z gn                                                                
                        ∂
      E s`n e` gn          y(x1 ([γ; g−n ], η`1 ), . . . xR ([γ; g−n ], η`R ), ε` )dγ
                   −∞ ∂gn
                  Z ∞ Z gn                                                                                
                                 ∂
      = E s`n e`             gn     y(x1 ([γ; g−n ], η`1 ), . . . xR ([γ; g−n ], η`R ), ε` )dγdFn (gn | I)
                    −∞ −∞       ∂gn
                  Z ∞                                                               Z ∞                   
                         ∂
      = E s`n e`            y(x1 ([γ; g−n ], η`1 ), . . . xR ([γ; g−n ], η`R ), ε` )     gn dFn (gn | I)dγ             (102)
                    −∞ ∂gn                                                            γ


where Fn (· | I) denotes the conditional distribution of gn . Thus
                                    Z ∞                                                                           
                                            ∂
        E [s`n e` gn y` ] = E s`n e`            y(x1 ([γ; g−n ], η` ), . . . xR ([γ; g−n ], η` ), ε` )µn (γ | I)dγ
                                      −∞ ∂gn
                            X    Z  ∞                                                        
                          =    E        s`n e` α`r π`rn ([γ; g−n ])µn (γ | I)β̃`rn (γ)dγ                               (103)
                                 r         −∞


where
                  Z    ∞
   µn (γ | I) ≡            gn dFn (gn | I).
                   γ

              = (E [gn | gn ≥ γ, I] − E [gn | gn < γ, I]) P r (gn ≥ γ | I) (1 − P r (gn ≥ γ | I)) ≥ 0 a.s.
                                                                                                                       (104)

Similarly

                                                 X Z     ∞                                          
                           E [s`n e` gn x` ] =    E           s`n e` α`r π`rn ([γ; g−n ])µn (γ | I)dγ .                (105)
                                                 r       −∞


Combining equations (103) and (105) completes the proof, with


                                     ω`rn (γ) = s`n e` α`r µn (γ | I)π`rn ([γ; g−n ]) ≥ 0 a.s.                         (106)


B.4     Proposition A2

To prove (22), we aggregate (21) across industries within a region using E`n weights:


                                                     y` = (β0 − β1 ) x` + ε` ,                                         (107)




                                                                 78
               P
where ε` =         n s`n ε`n .       The shift-share instrument z` is relevant because
                                     "                   #                       "                                                      #
                                         X                       X                X                                     X
                                 E           e` x` z` =                   e` E            s`n (π̄gn + η`n ) ·                s`n0 gn0
                                         `                           `               n                                  n0
                                                                 X
                                                             =            e` s2`n π̄σg2
                                                                 `,n

                                                             ≥ H̄L π̄σg2 ,                                                                        (108)


while exclusion holds because
                                             "                   #                       "                                        #
                                                 X                           X            X                       X
                                         E           e` z` ε` =                  e` E                 s`n ε`n ·        s`n0 gn0
                                                 `                           `                n                   n0

                                                                     = 0.                                                                         (109)


Thus by an appropriate law of large numbers, β̂ = β0 − β1 + op (1).
   To study β̂ind , we aggregate (21) across regions (again with E`n weights):

                                                                                 X            X
                                                 yn = β0 xn − β1                     ω`n                s`n0 x`n0 + εn ,                          (110)
                                                                                 `                n0

           P
for εn =     `   ω`n ε`n . The resulting IV estimate yields
                                                  P
                                                      sn yn gn
                                     β̂ind − β0 = P n          − β0
                                                   n n xn gn
                                                      s
                                                  P            P       P
                                                      sn (−β1 ` ω`n n0 s`n0 x`n0 + εn ) gn
                                                = n              P                         .                                                      (111)
                                                                    n sn xn gn


The expected denominator of β̂ind is non-zero:
                                             "                   #                        "                                       #
                                                 X                           X                X
                                         E           sn xn gn =                  sn E                  ω`n (π̄gn + η`n ) gn
                                                 n                           n                    `
                                                                             X
                                                                         =       sn ω`n π̄σ 2
                                                                             n
                                                                             X En             E`n 2
                                                                         =                ·      π̄σ
                                                                             n
                                                                                     E         E

                                                                         = π̄σ 2 ,                                                                (112)


while the expected numerator is
                         "                                                                            !    #
                             X                       X           X                                                       X
                     E           sn          −β1         ω`n               s`n0 x`n0 + εn                 gn = −β1             sn ω`n s`n π̄σ 2
                             n                       `           n0                                                      n,`

                                                                                                               = −β1 HL π̄σ 2 ,                   (113)


                                                                                     79
where the last equality follows because

                                   X                     X En E`n E`n
                                          sn ω`n s`n =
                                                           E En E`
                                    n,`                  n,`
                                                      X E`  E`n 2
                                                    =
                                                           E      E`
                                                      n,`
                                                      X
                                                    =     e` s2`n
                                                         n,`

                                                    = HL .                        (114)


Thus by an appropriate law of large numbers,


                                      β̂ind = β0 − β1 HL + op (1).                (115)


B.5     Proposition A3

By appropriate laws of large numbers,
                                  P         P             P
                               E [ ` E` ( n s`n y`n ) ( n0 s`n0 gn0 )]
                          β̂ =    P         P             P            + op (1)
                               E [ ` E` ( n s`n x`n ) ( n0 s`n0 gn0 )]
                                          2       2
                               P
                                  `,n E` s`n π`n σn β`n
                             = P            2        2
                                                         + op (1)
                                    `,n E` s`n π`n σn
                                                    2
                               P
                                  `,n E`n s`n π`n σn β`n
                             = P                       2
                                                          + op (1)                (116)
                                    `,n E`n s`n π`n σn


while
                                      P
                                           En yn gn
                              β̂ind = P n
                                         n En xn gn
                                         P         P
                                      E [ n En ( ` ω`n y`n ) gn ]
                                    =    P         P                  + op (1)
                                      E [ n En ( ` ω`n x`n ) gn ]
                                                          2
                                      P
                                         `,n En ω`n π`n σn β`n
                                    = P                     2
                                                                + op (1)
                                           `,n En ω`n π`n σn
                                                      2
                                      P
                                         `,n E`n π`n σn β`n
                                    = P                 2
                                                              + op (1).           (117)
                                           `,n E`n π`n σn




                                                     80
B.6       Proposition A4

By definition of ε̄n ,
                                                           P                    P
                                                                    ` e` s`n   ( n0 s`n0 νn0 + ε̌` )
                                                  ε̄n =                        P
                                                                                 ` e` s`n
                                                           X
                                                      ≡              αnn0 νn0 + ε̌¯n ,                                                          (118)
                                                               n0

                 P                               P
                  ` e` s`n s`n0                   ` e` s`n ε̌`
for αnn0 =        P               and ε̌¯n =     P             .      Therefore,
                     ` e` s`n                      ` e` s`n


                                                                        X
                                                  Var [ε̄n ] =                 σn2 0 αnn
                                                                                      2          ¯n ]
                                                                                        0 + Var [ε̌

                                                                        n0

                                                                    ≥ σν2 αnn
                                                                           2
                                                                              ,                                                                 (119)


and
                                                       max Var [ε̄n ] ≥ σν2 max αnn
                                                                                 2
                                                                                    .                                                           (120)
                                                           n                                     n

    To establish a lower bound on this quantity, observe that the sn -weighted average of αnn satisfies:

                                                                                                           2
                                                                                                 P
                                                                                                     ` e` s`n
                                                     X                             X
                                                               sn αnn =                  sn
                                                       n                           n
                                                                                                      sn

                                                                            = HL .                                                              (121)


                   = 1, it follows that maxn αnn ≥ HL and therefore maxn Var [ε̄n ] ≥ σν2 HL2 . Since HL →
        P
Since       n sn

H̄ > 0, we conclude that, for sufficiently large L, maxn Var [ε̄n ] is bounded from below by any positive
δ < σν2 H̄ 2 .


B.7       Proposition A5

We prove each part of this proposition in turn.

   1. Expanding the moment condition yields:
                                        "                           #                    "                       P                          #
                                            X                               X                        X               `0 6=`   ω`0 n ψ`0 n
                                    E           e` ε` ψ`,LOO =                      E e` ε`                s`n      P
                                                                                                      n                 `0 6=`   ω`0 n
                                            `                                  `
                                                                                                       P
                                                                            X            X                 `0 6=`ω`0 n E [ε` ψ`0 n ]
                                                                        =           e`           s`n            P
                                                                               `             n                   `0 6=` ω`0 n

                                                                        = 0.                                                                    (122)

                                                          P
   2. The assumption of part (1) is satisfied here, so E [ ` e` ε` ψ`,LOO ] = 0. We now establish that
       hP                   i                                    p
                          2                     P
      E ( ` e` ε` ψ`,LOO ) → 0, which implies ` e` ε` ψ`,LOO → 0 and thus consistency of the LOO


                                                                                   81
   SSIV estimator provided it has a first stage:
                           !2 
          X                                       X                                      ω`01 n1    ω`0 n
                                                                                                  P 2 2 E ε`1 ε`2 ψ`01 n1 ψ`02 n2
                                                                                                                                 
   E           e` ε` ψ`,LOO  =                                e`1 e`2 s`1 n1 s`2 n2 P
                                                                                               ω
                                                                                        `6=`1 `n1        ω
                                                                                                   `6=`2 `n2
            `                              `1 ,`2 ,n1 ,n2 ,
                                           `01 6=`1 ,`02 6=`2
                                                    X                                        ω`01 n1     ω`0 n
                                       ≤                             e`1 e`2 s`1 n1 s`2 n2 P           P 2 2       · B → 0.
                                                                                            `6=`1 ω`n1  `6=`2 ω`n2
                                           (`1 ,`2 ,`01 ,`02 )∈J ,
                                                   n1 ,n2

                                                                                                                              (123)

                                                                                                        
   Here the second line used the first regularity condition, which implies that E ε`1 ε`2 ψ`01 n1 ψ`02 n2 =
   0 whenever there is at least one index among {`1 , `2 , `01 , `02 } which is not equal to any of the others,
   i.e. for all (`1 , `2 , `01 , `02 ) 6∈ J .

3. We show that under the given assumptions on s`n , e` , and ω`n , the expression in (39) is bounded
   by 4N/L:

                                          X                                            ω`01 n1     ω`0 n
                                                            e`1 e`2 s`1 n1 s`2 n2 P              P 2 2
                                                                                      `6=`1 ω`n1  `6=`2 ω`n2
                                  (`1 ,`2 ,`01 ,`02 )∈J ,
                                         n1 ,n2
                                                X               1    ω`0 n(` )       ω`0 n(` )
                                  =                              2
                                                                   P 1 1           P 2 2
                                                                L   `6=`1 ω`n(`1 )  `6=`2 ω`n(`2 )
                                   (`1 ,`2 ,`01 ,`02 )∈J
                                    1              X                1           1
                                  = 2
                                   L                           Ln(`1 ) − 1 Ln(`2)
                                                                                  −1
                                         (`1 ,`2 ,`01 ,`02 )∈J
                                                n(`01 )=n(`1 ),
                                                n(`02 )=n(`2 )

                                       1 X 2Ln (Ln − 1)   N
                                  =                     ≤4 .                                                                  (124)
                                       L2 n (Ln − 1)2     L

   Here the second line plugs in the expressions for s`n and e` , and the third line plugs in ω`n . The
   last line uses the fact that any tuple (`1 , `2 , `01 , `02 ) ∈ J such that n(`01 ) = n(`1 ) and n(`02 ) = n(`2 )
   has all four elements exposed to the same shock n. Moreover, it is easily verified that all of these
   tuples have a structure (`A , `B , `A , `B ) or (`A , `B , `B , `A ) for any `A 6= `B exposed to the same
                                                                                                         Ln
   shock. Therefore, there are 2Ln (Ln − 1) of them for each n. Finally,                                Ln −1   ≤ 2 as Ln ≥ 2.




                                                                        82
B.8     Proposition A6
                                                  P
National industry employment satisfies En =           `   E`n ; log-linearizing this immediately implies (48).
To solve for g`n , log-linearize (45), (46), and (47):


                                           Ê` = φŴ` + ε` ,                                            (125)

                                          g`n = gn∗ + ξˆ`n − σ Ŵ` ,                                    (126)
                                                X
                                          Ê` =     s`n g`n .                                           (127)
                                                  n


Solving this system of equations yields
                                                                                    !
                                        1        X                         
                                 Ŵ` =                s`n       gn∗   + ξˆ`n − ε`                       (128)
                                       σ+φ        n


and expression (49).




                                                      83
C                                       Appendix Figures and Tables




                                             Figure C1: Industry-Level Variation in the Autor et al. (2013) Setting


                                                   First stage                                                                                  Reduced form
                                                                                                                                       .6
                   .6




                                                                                           Avg Manufacturing Employment Growth Residual
    Avg Regional China Shock Residual




                                                                                                                               .4
                                  .4




                                                                                                                       .2
                          .2




                                                                                                                0
                   0




                                                                                                        -.2
          -.2




                                                                                                -.4
   -.4             -.6




                                                                                        -.6




                                         0           50                    100   150                                                        0       50                    100   150
                                                 Industry China Shock (binned)                                                                  Industry China Shock (binned)




                                                                                               ⊥ and x̄⊥ , corresponding
Notes: This figure shows binned scatterplots of shock-level outcome and treatment residuals, ȳnt      nt
to the SSIV specification in column 3 of Table 4. The manufacturing industry shocks, gnt , are residualized on period
indicators (with the full-sample mean added back) and grouped into fifty weighted bins, with each bin representing
around 2% of total share weight snt . Lines of best fit, indicated in red, are weighted by the same snt . The slope
coefficients equal 5.71 × 10−3 and −1.52 × 10−3 , respectively, with the ratio (-0.267) equalling the SSIV coefficient in
column 3 of Table 4.




                                                                                   84
      Table C1: Shift-Share IV Estimates of the Effect of Chinese Imports on Other Outcomes

                                       (1)        (2)          (3)     (4)        (5)        (6)       (7)

       Unemployment growth            0.221      0.217     0.063      -0.014     0.104     0.107      0.235

                                     (0.049)    (0.046)    (0.060)   (0.079)    (0.079)   (0.083)    (0.178)

       NILF growth                    0.553      0.534     0.098      0.149      0.142     0.117      0.187

                                     (0.185)    (0.183)    (0.133)   (0.083)    (0.155)   (0.161)    (0.297)

       Log weekly wage growth        -0.759     -0.607     0.227      0.320      0.145     0.063      -0.211

                                     (0.258)    (0.226)    (0.242)   (0.209)    (0.264)   (0.260)    (0.651)

       # of industry-periods           796        794          794     794        794       794        794

       # of region-periods            1,444      1,444     1,444      1,444      1,444     1,444      1,444

Notes: This table extends the analysis of Table 4 to different regional outcomes in Autor et al. (2013): unemployment
growth, labor force non-participation (NILF) growth, and log average weekly wage growth. The specifications are
otherwise the same as in the corresponding columns of Table 4. SIC3-clustered exposure-robust standard errors are
computed using equivalent industry-level IV regressions and reported in parentheses.




                                                          85
                  Table C2: Alternative Standard Errors in the Autor et al. (2013) Setting


                                      (1)         (2)            (3)        (4)         (5)         (6)         (7)

    Coefficient                     -0.596      -0.489       -0.267       -0.314      -0.310      -0.290      -0.432

    Table 4 SE                     (0.114)      (0.100)      (0.099)     (0.107)      (0.134)     (0.129)     (0.205)

    State-clustered SE             (0.099)      (0.086)      (0.086)     (0.097)      (0.104)     (0.101)     (0.193)

    Adão et al. (2019) SE          (0.126)      (0.116)      (0.113)     (0.107)      (0.143)     (0.140)     (0.192)

    Confidence interval with       [-1.059,    [-0.832,     [-0.568,     [-0.637,    [-0.705,    [-0.699,     [-1.207,

         the null imposed           -0.396]     -0.309]      -0.028]      -0.018]     -0.002]      0.002]      0.122]

Notes: This table extends the analysis of Table 4 by reporting conventional state-clustered standard errors, the Adão
et al. (2019) SIC3-clustered standard errors, and confidence intervals based on the equivalent industry-level IV regression
with the null imposed, as discussed in Section 5.1. The specifications are the same as those in the corresponding columns
of Table 4; for comparison we repeat the coefficient estimates and exposure-robust standard errors from that table.




                                                            86
                    Table C3: Period-Specific Effects in the Autor et al. (2013) Setting


                                                       (1)           (2)        (3)        (4)

                                                  Mfg. emp.        Unemp.      NILF       Wages

                          Coefficient (1990s)        -0.491        0.329       1.209      -0.649

                                                    (0.266)        (0.155)    (0.347)    (0.571)

                          Coefficient (2000s)        -0.225        0.014      -0.109      0.391

                                                    (0.103)        (0.083)    (0.123)    (0.288)

Notes: This table reports coefficient estimates for versions of the shift-share IV specification in column 3 of Tables 4 and
C1, allowing the treatment coefficient to vary by period. This specification uses two endogenous treatment variables
(treatment interacted with period indicators) and two corresponding shift-share instruments. The controls are the same
as in column 3 of Table 4. SIC3-clustered exposure-robust standard errors are obtained by the equivalent shock-level
regressions and reported in parentheses.




                                                              87
     Table C4: Robustness to Acemoglu et al. (2016) Controls in the Autor et al. (2013) Setting

                                                                 (1)        (2)           (3)       (4)

                Coefficient                                    -0.200     -0.293         -0.241   -0.232

                                                               (0.093)    (0.125)    (0.115)      (0.122)

                Regional controls (w`t )

                Autor et al. (2013) controls                                                     

                Period-specific lagged mfg. share                                                

                Lagged 10-sector shares                                                           

                Local Acemoglu et al. (2016) controls                                              

                Local Acemoglu et al. (2016) pre-trends                                           

                SSIV first stage F -stat.                       118.9      53.3           65.9     56.6

                # of region-periods                                               1,444

                # of industry-periods                                              794

Notes: This table extends Table 4 by adding exposure-weighted sums of the other industry-level controls in Table 3 of
Acemoglu et al. (2016). Pre-trends controls refer to the changes in industry log average wages and in the industry share
of total U.S. employment over 1976–91; see the notes to Table 4 notes for details on the other controls and calculation
of the SIC3-clustered exposure-robust standard errors (in parentheses) and first-stage F-statistics.




                                                          88
                      Table C5: Overidentified Shift-Share IV Estimates of the Effect
                            of Chinese Imports on Manufacturing Employment


                                                                    (1)         (2)           (3)

                          Coefficient                             -0.238       -0.247       -0.158

                                                                  (0.099)     (0.105)       (0.078)

                          Shock-level estimator                    2SLS        LIML         GMM

                          Effective first stage F -statistic                   15.10

                          χ2 (7) overid. test stat. [p-value]               10.92 [0.142]

Notes: Column 1 of this table reports an overidentified estimate of the coefficient corresponding to column 3 of Table 4,
obtained from a two-stage least squares regression of shock-level average manufacturing employment growth residuals
  ⊥ on shock-level average Chinese import competition growth residuals x̄⊥ , instrumenting by the growth of imports
ȳnt                                                                         nt
(per U.S. worker) in each of the eight non-U.S. countries from ADH, gnk for k = 1, . . . , 8, controlling for period fixed
effects qnt , and weighting by average industry exposure snt . Column 2 reports the corresponding limited information
maximum likelihood estimate, while column 3 reports a two-step optimal generalized method of moments estimate.
Standard errors, the optimal weight matrix, and the Hansen (1982) χ2 test of overidentifying restrictions all allow for
clustering of shocks at the SIC3 industry group level. The first-stage F -statistic is computed by a shift-share version of
the Montiel Olea and Pflueger (2013) method described in Appendix A.11.




                                                            89
                                       Table C6: Bartik (1991) Application

                                                                      (1)           (2)

                                    Leave-one-out estimator         1.277       1.300

                                                                   (0.150)     (0.124)

                                    Conventional estimator          1.215       1.286

                                                                   (0.139)     (0.121)

                                    H heuristic                      1.32       10.50

                                    Population weights                

                                    # of region-periods                     2,166

Notes: Column 1 replicates column 2 of Table 3 from Goldsmith-Pinkham et al. (2020), reporting two SSIV estimators
of the inverse labor supply elasticity, with and without the leave-one-out adjustment. Regions are U.S. commuting
zones; periods are 1980s, 1990s, and 2000s; all specifications include controls for 1980 regional characteristics interacted
with period indicators (see Goldsmith-Pinkham et al. (2020) for more details). Standard errors allow for clustering by
commuting zones. Column 1 uses 1980 population weights, while column 2 repeats the same analysis without population
weights. The table also reports the H heuristic for the importance of the leave-one-out adjustment proposed in Appendix
A.9 (equation (42)).




                                                            90
      Table C7: Simulated 5% Rejection Rates for Shift-Share and Conventional Shock-Level IV

                                                                  SSIV                   Shock-level IV

                                                        Exposure-Robust SE                 Robust SE

                                                        Null not         Null         Null not       Null

                                                        Imposed      Imposed          Imposed     Imposed

                                                           (1)           (2)             (3)          (4)

                               Panel A: Benchmark Monte-Carlo Simulation

           (a)    Normal shocks                           7.6%           5.2%           6.8%         5.0%

           (b)    Wild bootstrap (benchmark)              8.0%           4.9%          14.2%         4.0%

                                  Panel B: Higher Industry Concentration

           (c)    1/HHI = 50                              5.6%           4.9%           8.4%         6.1%

           (d)    1/HHI = 20                              7.3%           5.5%           7.0%         10.7%

           (e)    1/HHI = 10                              9.0%           8.2%          14.8%         23.8%

                           Panel C: Smaller Numbers of Industries or Regions

           (f)    N = 136 (SIC3 industries)               5.4%           4.5%           7.7%         4.3%

           (g)    N = 20 (SIC2 industries)                7.7%           3.7%           7.9%         3.2%

           (h)    L = 100 (random regions)                9.7%           4.5%                  N/A
           (i)    L = 25 (random regions)                 10.4%          4.3%                  N/A

Notes: This table summarizes the results of the Monte-Carlo analysis described in Appendix A.12, reporting the
rejection rates for a nominal 5% level test of the true null that β ∗ = 0. In all panels, columns 1 and 2 are simulated
from the SSIV design based on Autor et al. (2013), as in column 3 of Table 4, while columns 3 and 4 are based on
the conventional industry-level IV in Acemoglu et al. (2016). Column 1 uses exposure-robust standard errors from the
equivalent industry-level IV and column 2 implements the version with the null hypothesis imposed. Columns 3 and 4
parallel columns 1 and 2 when applied to conventional IV. In Panel A, the simulations approximate the data-generating
process using a normal distribution in row (a), with the variance matched to the sample variance of the shocks in the
data after de-meaning by year, while wild bootstrap is used in row (b), following Liu (1988). Panel B documents the
role of the Herfindahl concentration index across industries, varying 1/HHI from 50 to 10 in rows (c) to (e), compared
with 191.6 for shift-share IV and 189.7 for conventional IV. Panel C documents the role of the number of regions and
industries. We aggregate industries from 397 four-digit manufacturing SIC industries into 136 three-digit industries in
row (f) and further into 20 two-digit industries in row (g). In rows (h) and (i), we select a random subset of region in
each simulation. See Appendix A.12 for a complete discussion.




                                                          91
             Table C8: First Stage F -statistics as a Rule of Thumb: Monte-Carlo Evidence

                                                                  Number of Instruments

                                                         1          5        10        25        50

                                                        (1)        (2)       (3)       (4)       (5)

                                                    Panel A: SSIV

                    5% rejection rate                  8.0%       8.9%     11.5%     15.0%     23.0%

                    Median bias, % of std. dev.        0.3%       14.6%    28.3%     43.2%     72.1%

                    Median first-stage F                54.3      14.8       9.1       6.4       7.7

                                    Panel B: Conventional Shock-Level IV

                    5% rejection rate                  13.6%      13.9%    14.9%     17.7%     22.0%

                    Median bias, % of std. dev.        -0.3%      10.1%    27.1%     57.0%     80.2%

                    Median first-stage F                59.4      19.4      13.2      10.0      11.2

                    Number of simulations              10,000     3,000     1,500      500       300

Notes: This table reports the results of the Monte-Carlo analysis with many weak instruments, described in Appendix
A.12. Panel A is simulated from the SSIV design based on Autor et al. (2013), as in column 3 of Table 4, while Panel B
is based on the conventional industry-level IV in Acemoglu et al. (2016). The five columns increase the number of shocks
J = 1, 5, 10, 25, and 50, with only one shock relevant to treatment. The table reports the rejection rates corresponding
to a nominal 5% level test of the true null that β ∗ = 0, the median bias of the estimator as a percentage of the simulated
standard deviation, and the median first-stage F -statistic obtained via the Montiel Olea and Pflueger (2013) method
(extended to shift-share IV in Panel A, following Appendix A.11). See Appendix A.12 for a complete discussion.




                                                             92
References
Acemoglu, Daron, David H. Autor, David Dorn, Gordon H. Hanson, and Brendard Price.
   2016. “Import Competition and the Great U.S . Employment Sag of the 2000s.” Journal of Labor
   Economics 34:S141–S198.

Adão, Rodrigo, Costas Arkolakis, and Federico Esposito. 2020. “General Equilibrium Indirect
   Effects in Space: Theory and Measurement.” Working paper.

Adão, Rodrigo, Michal Kolesár, and Eduardo Morales. 2019. “Shift-Share Designs: Theory
   and Inference.” The Quarterly Journal of Economics 134:1949–2010.

Angrist, Joshua D., Kate Graddy, and Guido W. Imbens. 2000. “The Interpretation of In-
   strumental Variables Estimators in Simultaneous Equations Models with an Application to the
   Demand for Fish.” The Review of Economic Studies 67:499–527.

Angrist, Joshua D., Guido W. Imbens, and Alan B. Krueger. 1999. “Jackknife Instrumental
   Variables Estimation.” Journal of Applied Econometrics 14:57–67.

Autor, David H., David Dorn, and Gordon H. Hanson. 2013. “The China Syndrome: Local
   Labor Market Effects of Import Competition in the United States.” American Economic Review
   103:2121–2168.

Bartik, Timothy J. 1991. Who Benefits from State and Local Economic Development Policies?
   Kalamazoo, MI: W. E. Upjohn Institute for Employment Research.

Cameron, A. Colin, and Douglas L. Miller. 2015. “A Practitioner’s Guide to Cluster-Robust
   Inference.” The Journal of Human Resources 50:317–372.

Goldsmith-Pinkham, Paul, Isaac Sorkin, and Henry Swift. 2020. “Bartik Instruments: What,
   When, Why, and How.” American Economic Review 110:2586–2624.

Hansen, Lars Peter. 1982. “Large Sample Properties of Generalized Method of Moments Estima-
   tors.” Econometrica 50:1029–1054.

Jaeger, David A, Joakim Ruist, and Jan Stuhler. 2018. “Shift-Share Instruments and Dynamic
    Adjustments: The Case of Immigration.” Working Paper.

Jones, Ronald W. 1965. “The Structure of Simple General Equilibrium Models.” Journal of Political
   Economy 73:557–572.

Liu, Regina Y. 1988. “Bootstrap Procedures under Some Non-I.I.D. Models.” The Annals of Statis-
    tics 16:1696–1708.

Montiel Olea, Jose Luis, and Carolin Pflueger. 2013. “A robust test for weak instruments.”
   Journal of Business and Economic Statistics 31:358–369.

Nagar, Anirudh L. 1959. “The Bias and Moment Matrix of the General k-class Estimators of the
   Parameters in Simultaneous Equations.” Econometrica 27:575–595.

Pflueger, Carolin E., and Su Wang. 2015. “A robust test for weak instruments in Stata.” Stata
    Journal 15:216–225.

White, Halbert. 1982. “Instrumental Variables Regression with Independent Observations.” Econo-
   metrica 50:483–499.




                                               93
