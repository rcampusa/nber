                             NBER WORKING PAPER SERIES




    MACROECONOMICS WITH HETEROGENEOUS AGENTS AND INPUT-OUTPUT
                           NETWORKS

                                     David Rezza Baqaee
                                      Emmanuel Farhi

                                     Working Paper 24684
                             http://www.nber.org/papers/w24684


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                                Cambridge, MA 02138
                          June 2018, Revised September 2018




Previously circulated as "Unbundling Macroeconomics via Heterogeneous Agents and Input-
Output Networks." We thank Natalie Bau and Per Krusell for their valuable comments. The
views expressed herein are those of the authors and do not necessarily reflect the views of the
National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2018 by David Rezza Baqaee and Emmanuel Farhi. All rights reserved. Short sections of text,
not to exceed two paragraphs, may be quoted without explicit permission provided that full
credit, including © notice, is given to the source.
Macroeconomics with Heterogeneous Agents and Input-Output Networks
David Rezza Baqaee and Emmanuel Farhi
NBER Working Paper No. 24684
June 2018, Revised September 2018
JEL No. E23,E3

                                         ABSTRACT

The goal of this paper is to simultaneously unbundle two interacting reduced-form building
blocks of traditional macroeconomic models: the representative agent and the aggregate
production function. We introduce a broad class of disaggregated general equilibrium models
with Heterogeneous Agents and Input-Output networks (HA-IO).We characterize their properties
through two sets of results describing the propagation and the aggregation of shocks. Our results
shed light on many seemingly disparate applied questions, such as: sectoral comovement in
business cycles; factor-biased technical change in task-based models; structural transformation;
the effects of corporate taxation; and the dependence of fiscal multipliers on the composition of
government spending.


David Rezza Baqaee
UCLA
315 Portola Plaza
Los Angeles
D.R.Baqaee@lse.ac.uk

Emmanuel Farhi
Harvard University
Department of Economics
Littauer Center
Cambridge, MA 02138
and NBER
emmanuel.farhi@gmail.com




A data appendix is available at http://www.nber.org/data-appendix/w24684
    Macroeconomics with Heterogeneous Agents and
              Input-Output Networks
                          David Rezza Baqaee                   Emmanuel Farhi∗
                                   UCLA                              Harvard

                                           September 16, 2018


                                                    Abstract
         The goal of this paper is to simultaneously unbundle two interacting reduced-form
     building blocks of traditional macroeconomic models: the representative agent and the ag-
     gregate production function. We introduce a broad class of disaggregated general equilib-
     rium models with Heterogeneous Agents and Input-Output networks (HA-IO). We charac-
     terize their properties through two sets of results describing the propagation and the aggre-
     gation of shocks. Our results shed light on many seemingly disparate applied questions,
     such as: sectoral comovement in business cycles; factor-biased technical change in task-
     based models; structural transformation; the effects of corporate taxation; and the depen-
     dence of fiscal multipliers on the composition of government spending.



Introduction
This paper takes inspiration from François Quesnay’s approach to economics as put forth in his
classic Tableau Economique. While largely forgotten today, the Tableau Economique, published
in 1758, was one of the first great works of economic theory. Quesnay’s Tableau conceived of
economies as systems of interacting parts: merchants, farmers, and artisans, trading in laissez-
faire marketplaces, produced and consumed intermediate and final goods and services. Ques-
nay’s conception of the economy, which marked the beginning of general equilibrium theory
and influenced luminaries from Adam Smith to Wassily Leontief, emphasized heterogeneity in
production and in consumption.
    We revive this tradition by introducing and elucidating the properties of a broad class of
general equilibrium models with Heterogeneous Agents and Input-Output networks (HA-IO).
  ∗ Emails:   baqaee@econ.ucla.edu, efarhi@harvard.edu. We thank Natalie Bau and Per Krusell for their valuable
comments.

                                                       1
Our goal is to simultaneously unbundle two interacting reduced-form building blocks of tradi-
tional macroeconomic models: the representative agent and the aggregate production function.
Our hope is to contribute to the general foundations of a disaggregated approach to the study
of macroeconomic phenomena.
    Our framework is general and does not rely on specific functional forms. It features an
arbitrary number of households with heterogeneous preferences supplying different factors of
production to an arbitrary network of producers who combine factors and intermediate inputs
using arbitrary neoclassical technologies. It also allows for an arbitrary pattern of distortions
captured as explicit or implicit wedges. The model can be applied intra-temporally or inter-
temporally using the Arrow-Debreu construct of indexing commodities by dates and states.
The latter interpretation allows us to build a theoretical bridge between input-output models
of production networks and heterogeneous-agent models with idiosyncratic risk, incomplete
markets, and borrowing constraints.1
    We investigate the patterns of shock propagation and aggregation generated by the model,
and by pinning them down, clarify the way shocks, mediated by elasticities of substitution and
general equilibrium forces, transmit through production networks and to consumers.
    We show that in models with representative agents and balanced-growth preferences, a
class that includes many present-day models of production networks, the patterns of propa-
gation are incredibly constrained.2 Specifically, in such models, the response of the sales of a
producer (or collection of producers) i to a productivity shock to j is the same as j’s response
to a shock to i. Symmetric propagation in these models is a consequence of the first welfare
theorem, and so can be established without taking a stance on the parametric structure of the
model. This improbable property suggests that such efficient representative-agent production-
networks models, despite their considerable influence in empirical and quantitative analyses
of comovement, are also restrictive in important and unexpected dimensions. The practical
relevance of this observation obviously depends on the applied question under consideration,
but it underscores the surprising importance of apparently innocuous modeling choices in dis-
aggregated approaches.
    We use symmetry and symmetry-breaking as organizing devices for the paper. We start
by providing general non-parametric comparative statics for how shocks propagate in effi-
cient representative agent models with homothetic preferences over consumption goods and
inelastic factor supplies where symmetric propagation holds. Then, we introduce various in-
gredients which break symmetry: heterogeneous consumers; non-homothetic preferences over
consumption goods; elastic factor supplies with non-balanced growth preferences; and distor-
   1 Under   this interpretation, consumer- and commodity-specific wedges capture the different endogenous
shadow rates of returns on different assets by different consumers implicit in decentralizations of these models.
    2 By balanced-growth preferences, we mean preferences that are separable between consumption and leisure,

homothetic over consumption, and balanced-growth over consumption and leisure. See King, Plosser, and Rebelo
(1988) for more information on these preferences.


                                                       2
tions. These features all materially change the way the same production network transmits
shocks from one producer to another.
     These results show how to interpret regression-based empirical studies of the effects of
shocks on prices and quantities. Many such analyses use instruments to trace out the effects
of exogenous microeconomic shocks, and interpret their results using a partial equilibrium
framework where the exclusion restriction is that non-shocked good and factor prices are fixed.
Of course, only general equilibrium responses can be observed in practice. The presumption is
that general equilibrium effects are small if the shock only hits a small part of the economy. HA-
IO linkages weaken these interpretations and the underlying exclusion restrictions. They blur
the line between partial and general equilibrium by introducing “local” general equilibrium
effects. In a nutshell, even if the parts of the economy of the economy that are directly hit
by the shock are small, other parts of the economy can be hit indirectly through the HA-IO
network. Our analysis shows how to map regression coefficients to structural primitives while
properly taking into account these general equilibrium forces.
     Our results on propagation are also helpful in terms of thinking about aggregation in disag-
gregated economies. We propose new definitions of “industry-level” productivity and markups,
for any collection of producers, and characterize the behavior of these aggregates. Our notion
of industry-level productivity growth has a structurally interpretable decomposition into pure
changes in technology and changes in allocative efficiency. When the economy is efficient, there
are no changes in allocative efficiency, and our definition then coincides with the usual Solow
residual.
     In inefficient economies, both the measure of industry-level productivity and industry-level
markup have non-trivial aggregation properties. Changes in these industry-level aggregates
are endogenous in the sense that their evolution is not a simple average of the changes in mi-
croeconomic productivities and markups in that industry. They depend on shocks outside
of the industry. They can also be the subject of fallacies of composition whereby the behav-
ior of aggregates is divorced from the behavior of the individual components. For instance,
it is possible for industry-level productivity to fall even as all firms in that industry become
more productive, or for industry markups to fall even as all firms in the industry increase their
markups.
     To streamline the exposition we restrict our attention to nested-CES microeconomic produc-
tion and utility functions for most of the paper, with an arbitrary number of nests, input-output
shares, and elasticities. This choice is partly driven by the popularity of these functional forms
in the literature, and partly due to the fact that they are relatively parsimonious. However,
we show that with a simple and relatively minor modification, all of our results can be readily
extended to arbitrary neoclassical production functions. Perhaps more importantly, this also
shows that the essential intuition built from the CES benchmark survive to the more general
case. Our non-CES results are particularly useful for empirical applications, such as structural

                                               3
estimation, where more flexibility in the microeconomic functional forms is especially desir-
able.
    By characterizing the way shocks diffuse throughout the economy using a very general
framework, our formulas nest most models in the literature, and can be used to help extend
the insights in simple models to quantitatively more realistic environments. Taken together, our
propagation and aggregation results can be used to trace out the effects of changes in technol-
ogy or distortions at various levels of aggregation. This allows us to speak to many seemingly
disparate questions in a variety of contexts ranging from sectoral comovement in business cy-
cles, factor-biased technical change in task-based models, Baumol’s cost disease and structural
transformation, the effects of corporate taxation on output, and the dependence of fiscal mul-
tipliers on the composition of government spending. We sketch some example applications
along these lines in the paper.
    The outline of the paper is the following: in Section 1, we set up the general model, the
necessary notation, and the notion of equilibrium. In Section 2, we establish general conditions
for symmetric propagation. To make the paper more digestible and more modular, we begin
by analyzing a special case, and then introduce successive generalizations, to highlight what
each additional ingredient brings to the table. Section 3 analyzes the baseline case: an efficient
representative agent model with homothetic preferences and inelastic factor supplies (non-
homothetic preferences are treated in Appendix G). We enrich the baseline model by allowing
for: heterogeneous consumers in Section 4; elastic factor supplies, in Section 5; and distortions,
in Section 6. Having fully characterized propagation, in Section 7, we introduce our industry-
level aggregates of productivity and markups, whose evolution can be immediately established
with the aid of the earlier results on propagation. Although we restrict our focus on nested-
CES economies, in Section 8, we show how all of our results can be generalized to arbitrary
neoclassical production functions with one weird trick.


Related Literature

This paper is closely related to Baqaee and Farhi (2017a) and Baqaee and Farhi (2017b) and uses
some of the tools developed in those papers. However, whereas those papers focused on the
effects of shocks on GDP and aggregate TFP, this paper focuses on the propagation of shocks
from one producer to another. Rather than aggregating value-added for the whole economy
and characterizing its properties, we define and characterize the behavior of sub-aggregates of
producers. Furthermore, the analysis in this paper is strictly more general since we allow for
heterogeneous agents, whereas those papers worked with a representative agent. Allowing for
heterogeneous agents is especially important given our focus, since the representative agent
assumption has important implications for the comovement patterns.
    More broadly, this paper relates to the literature on multi-sector models and models with


                                                4
production networks. Much attention in this literature has focused on the implications of het-
erogeneity for the behavior of GDP with less emphasis on comovement, for example, Gabaix
(2011), Acemoglu, Carvalho, Ozdaglar, and Tahbaz-Salehi (2012), Jones (2011), Jones (2013),
Bigio and La’O (2016), Acemoglu, Ozdaglar, and Tahbaz-Salehi (2017), as well as the aforemen-
tioned Baqaee and Farhi (2017a), and Baqaee and Farhi (2017b).
    Theoretical interest in comovement in production networks started with Long and Plosser
(1983) and Shea (2002) who use efficient representative agent models with homothetic pref-
erences.3 More recently, the question of how shocks propagate in production networks has
become a topic of a vibrant empirical literature; examples include Foerster, Sarte, and Watson
(2011), Di Giovanni, Levchenko, and Méjean (2014), Stella (2015), Barrot and Sauvagnat (2016),
Acemoglu, Akcigit, and Kerr (2015), Atalay (2017), and Carvalho, Nirei, Saito, and Tahbaz-
Salehi (2016). These analyses, although primarily empirical, use efficient representative agent
models with balanced-growth preferences and production networks to interpret their empirical
findings.
    Our model nests the models in these papers as special cases, and shows that they all feature
symmetric propagation. This is due to different reasons in different papers: the representative
agent assumption, efficiency of the equilibrium, Cobb-Douglas functional forms, or having a
single factor. By relaxing these common assumptions, our paper sheds light on the generic
structure of propagation in general equilibrium.
    Finally, our paper also relates to the literature on heterogeneous agent models. Broadly
speaking, this literature can be divided in two parts: dynamic models, which focus on hetero-
geneity in marginal propensities to consume across different periods of time, and static mod-
els, which focus on heterogeneity in marginal propensities to consume across different types
of goods. The former types of models are increasingly popular in macroeconomics, whereas
the latter are common in international and regional economics. By adopting an Arrow-Debreu
view where goods can be indexed by states of nature and dates, our result speak to both sets of
models.
    The literature focusing on heterogeneous agents in a dynamic context dates back to Bewley
(1977), Huggett (1993), Aiyagari (1994), and Krusell and Smith (1998). Indexing commodities
by dates and states, our framework can in principle capture these economies via consumer- and
commodity-specific wedges that capture the different endogenous shadow rates of returns on
different assets faced by different consumers implicit in decentralizations of these economies
with heterogeneous agents, idiosyncratic risk, incomplete markets, and borrowing constraints.
More recently, a large literature has extended this framework to environments with nominal
rigidities. To illustrate how our formulas can be applied to study such economies, we set up
a simple example inspired by Baqaee (2015), which extends the environments in Bilbiie (2008),
     3 Some recent papers that study propagation in inefficient environments with representative agents and spe-

cific functional forms include Baqaee (2018), Altinoglu (2016), and Grassi (2017).


                                                       5
Eggertsson and Krugman (2012), and Farhi and Werning (2016). The model features input-
output linkages, sticky-wages, and two classes of agents (borrowers and savers) with different
marginal propensities to consume because one class is up against a borrowing constraint while
the other is not. We use it to study the dependence of fiscal multipliers on the composition of
government spending.
    The literature focusing on heterogeneous agents in a static context, once one includes mod-
els of international and inter-regional trade, is too voluminous to list. However, a more recent
and smaller literature, for example Jaravel (2016), Argente and Lee (2017), Clayton, Jaravel, and
Schaab (2018), and Cravino, Lan, and Levchenko (2018), shows that static marginal propensities
to consume can be heterogeneous not just across regions or countries, but also across sectors
or product categories. We present a simple illustrative example with three sectors (agriculture,
manufacturing, and servinces) and two classes of workers (skilled and unskilled) with different
sources of income and spending patterns, to characterize the reaction of the the skill premium
to productivity shocks to the different sectors.


1     Setup
In this section, we setup the model, define the equilibrium, and lay down some input-output
definitions.


1.1   Model
The model has a set of consumers C, a set of producers N, and a set of factors F with supply
functions L f . What distinguishes goods from factors is the fact that goods are produced by
combining factors and goods, whereas factors are produced ex nihilo. The output of each
producer is produced using intermediate inputs and factors, and is sold as an intermediate
good to other producers and as a final good. What distinguishes consumers from producers is
their ownership of the factors.


Households

Each agent c has preferences
                                                                             
                               Uc Dc (cc1 , . . . , ccN ), Lc1 , . . . , Lc f ,




                                                      6
where Dc is homothetic, ccj is consumer c’s consumption of good j, and Lcj is consumer c’s
supply of factor j. Each consumer faces the budget constraint

                                   N                       F
                                  ∑ (1 + τck ) pi cci =   ∑ w f Lc f + πc + τc ,
                                  i =1                    f =1


where pi and cci are the price and quantity of good i used by consumer c, w f and Lc f are the
price and quantity of the factor f owned by consumer c, πc is profits and τc is net revenues
earned by taxes and subsidies rebated back to household c. The numbers τci denote consump-
tion taxes or subsidies on consumer c.
    Without loss of generality, we can assume Dc is constant-returns-to-scale, allowing us to
define a composite consumption good Yc = Dc (c) for each consumer. To model factor supply,
we often use an alternative formulation where factor supplies are not derived from utility max-
imization and are instead given by factor supply functions Lc f = Gc f (w f , Yc ).4 When we do so,
we maintain the assumption that given factor supplies, final demand for consumer c is given
by the maximization of Dc (cc1 , . . . , ccN ) subject to the budget constraint and denote by Yc is the
corresponding real consumption index.5


Producers

Each good k is produced with some constant or decreasing returns to scale production function.
Without loss of generality, we can assume that all production functions are constant-returns-
to-scale simply by adding producer-specific fixed factors to the economy. Crucially, this means
that our results will apply to economies with arbitrary non-homothetic production functions,
as long as they do not have increasing-returns-to-scale.6 Hence, we can write the cost function
of each producer as

                 yk   
                                                                      f                      f
                                                                                                   
                    C (1 + τk1 ) p1 , . . . , (1 + τkN ) p N , (1 + τk1 )w1 , . . . , (1 + τkF )w F ,
                 Ak k

where yk is the total output of k, and Ck /Ak is the marginal cost of producing good k. The
number Ak is a Hicks-neutral productivity shifter, and τki and τk f are producer-input-specific
taxes or subsidies.
   4 We   use this specific formulation, which assumes zero cross-factor-price elasticites, for simplicity and ease of
exposition. Our results can easily be generalized away from this case.
    5 The distinction between these two formulations is obviously irrelevant when factor supplies are inelastic,

but it will be useful for some of our applications, for example for comparative statics of the steady-state of a
multi-sector Ramsey model with capital and labor where capital supply is infinitely elastic.
    6 See Baqaee (2018) for analysis of a production network economy with increasing returns to scale.




                                                          7
Notation

Going forward, and to make the exposition more intuitive, we slightly abuse notation in the
following way. For each factor f , we interchangeably use the notation w f or p N + f to denote
its wage, the notation Li f or xi( N + f ) to denote its use by producer i, and the notation L f or y f
or to denote total factor supply. We interchangeably use the notation cci or xci to denote the
consumption of good i in final demand.
    Furthermore, we represent all wedges in the economy as markups by adding additional
producers. For example, the wedge τij can be modeled in a modified setup as a markup charged
by a new producer that buys input j and sells it to producer i. Going forward, we take advan-
tage of this equivalence and assume that all wedges take the form of markups. Each producer
i charges a price pi equal to a markup µi over its marginal cost.


Equilibrium

Given productivities Ai and markups µi , a general equilibrium is a set of prices pi , intermediate
input choices xij , factor input choices li f , outputs yi , and final demands cci , such that:

  i. each producer chooses inputs to minimize its costs taking prices as given;

 ii. each household maximizes utility subject to its budget constraint taking prices as given;

iii. the markets for all goods and factors clear.

Although markups are primitives in our model, our results can also be applied to models with
endogenous markups along the lines mentioned in Baqaee and Farhi (2017b).


1.2   Input-Output Definitions
We introduce some input-output notation and definitions. We define input-output objects such
as input-output matrices, Leontief inverse matrices, and Domar weights. In the presence of
markups/wedges, a distinction must be made between cost-based and revenue based input-
output concepts. We denote the cost-based concepts with a tilde. Of course, when there are no
wedges, the cost-based and revenue-based definitions will coincide.


Final Expenditure Shares

Let b(c) be the N × 1 vector whose ith element is equal to the share of good i in consumer c’s
expenditures
                                               pi cci
                                       bci =              .
                                             ∑i∈ N pi cci



                                                  8
Let χc be consumer c’s share of total expenditure

                                                    ∑i∈ N pi cci
                                          χc =                       .
                                                 ∑ j∈ N ∑d∈C p j cdj

HA-IO Matrix

We define the revenue-based HA-IO matrix to be the (C + N + F ) × (C + N + F ) matrix Ω
whose ijth element is equal to i’s expenditures on inputs from j as a share of its total revenues

                                                           p j xij
                                                 Ωij ≡             .
                                                           pi yi

Note that the HA-IO matrix Ω includes expenditures on the factors of production and of the
consumers. We also define the factor-distribution matrix Φ to be the C × ( F + 1) matrix whose
c f th element is
                                                w f Lc f
                                        Φc f =           .
                                                wf Lf

In words, Φc f is the share of factor f ’s income accruing to consumer c.7 We let F + 1 index net
income due to taxes and profits.
   By analogy, define the cost-based HA-IO matrix Ω̃ as

                                                        p j xij
                                              Ω̃ij ≡             .
                                                       ∑l pl xil

Its ijth element Ω̃ij records the expenditure of producer i on good j as a fraction of the total cost
of producer i. By Shephard’s lemma, Ω̃ij is also the elasticity of the cost of i to the price of j,
holding the prices of all other producers constant.


HA-IO Leontief Inverse Matrix

We define the HA-IO Leontief inverse matrix as

                                  Ψ ≡ ( I − Ω ) −1 = I + Ω + Ω 2 + . . . ,

and the cost-based HA-IO Leontief-inverse matrix as

                                  Ψ̃ ≡ ( I − Ω̃)−1 = I + Ω̃ + Ω̃2 + . . . .
   7 In the body of the paper, we analyze the case with heterogeneous consumers and the case with distortions
separately. Since we do not simultaneously consider heterogeneous consumers and pure profits, we do not need
to track how profits are disbursed across different consumers. In the Appendix H, where we show how heteroge-
neous consumers and wedges can be analyzed at the same time, we will augment the Φ matrix so that, in addition
to factor payments, it also records how profits are being disbursed to different households.


                                                       9
   While the input-output matrix Ω records the direct exposures of one producer to another,
the Leontief inverse matrix Ψ records instead the direct and indirect exposures through the pro-
duction network. This can be seen most clearly by noting that (Ωn )ij measures the weighted
sums of all paths of length n from producer i to producer j.
   By Shephard’s lemma, Ψ̃ij is also the elasticity of the cost of i to the price of j holding fixed
the price of factors but taking into account how the price of all other goods in the economy will
change. Note that this is still a partial-equilibrium elasticity, which does not take into account
changes in factor prices that occur in general equilibrium (when the requirement that factor
markets clear is imposed). These general equilibrium effects are complex and will be fully
characterized below.


GDP and Domar Weights

GDP or nominal output is the total sum of all expenditures on final consumption by all con-
sumers
                                    GDP = ∑ ∑ pi cci .
                                                      i ∈ N c∈C

We define the Domar weight λi of producer i to be its sales share as a fraction of GDP

                                                          pi yi
                                                λi ≡            .
                                                          GDP

Note that ∑iN=1 λi > 1 in general since some sales are not final sales but intermediate sales.
   For expositional convenience, for a factor f , we sometimes use Λ f instead of λ f . Note that
the revenue-based Domar weight Λ f of factor f is simply its total income share. Then, we can
write consumer c’s share in aggregate income as

                                     ∑i pi cci
                              χc =
                                      GDP
                                               =   ∑ Φc f Λ f + ΦcF+1 ΛF+1,
                                                   f ∈F


where F + 1 indexes net income due to taxes and profits.
  We can also define the vector b to be final demand expenditures as a share of GDP

                                             ∑c∈C pi cci
                                     bi =                = ∑ χc Ωci .
                                               GDP         c∈C

The accounting identity

                   pi yi =   ∑ pi cci + ∑ pi x ji = ∑ Ωci χc GDP + ∑ Ω ji λ j GDP
                             c∈C         j            c∈C               j




                                                      10
links the revenue-based Domar weights to the Leontief inverse via

                                λ 0 = b 0 Ψ = b 0 I + b 0 Ω + b 0 Ω2 + . . . .

Another way to see this is that the i-th element of b0 Ωn measures the weighted sum of all paths
of length n from producer i to final demand.
    We can decompose λi into the sum of all paths from producer i to consumer c weighted by
that consumer’s size. Let λic be
                                          λic = ∑ Ωcj Ψ ji .
                                                   j∈ N

Using language from Baqaee (2015), we can think of λic as the network-adjusted consumption
share of good i for agent c. Then
                                     λi = ∑ χc λic ,
                                                    c∈C

so that λc provides a decomposition of λi by consumers. For a factor f , we sometimes use Λcf
instead of λcf .
    We also define the share of the sales of good j as input to producer i as a fraction of aggregate
output
                                               p j xij
                                        λij ≡          = Ωij λi ,
                                              GDP
and for a factor f , we sometimes use Λi f instead of λi f .
    By analogy, the cost-based Domar weights are

                                        0
                                 λ̃ ≡ b Ψ̃ = b0 + b0 Ω̃ + b0 Ω̃2 + . . . .

As above, for a factor f , we sometimes use Λ̃ f instead of λ̃ f .


Real Output and GDP Deflator

Since our economy has heterogeneous households the level of real GDP or output is ambiguous
to define. Hence, we do not offer a definition for the level of real GDP, defining instead only the
changes in real GDP using the Divisia index. We define the change in real GDP as

                                        d log Y =    ∑ bi d log ci .
                                                      i

Similarly, we can define changes in the GDP deflator as

                                        d log P =    ∑ bi d log pi .
                                                      c




                                                     11
If there exists a representative consumer with homothetic preferences in this economy, then
d log Y and is equivalent, to a first order, to the change in real GDP defined via the represen-
tative consumer’s ideal price index. Similarly, d log P is equivalent to the change in the repre-
sentative agent’s ideal price index.8 Through out the rest of the paper, we measure changes in
prices in real terms using the GDP deflator.


1.3    Interpretation
Before stating our results, we briefly discuss two important points of interpretation.


Intratemporal vs. Intertemporal

There are several ways to interpret this model and we will explicitly make use of all of them
in our examples: (1) we could view it as a purely static model; (2) we could interpret final
demand as a per-period part of a larger dynamic problem, where the inelastically supplied fac-
tors are pre-determined state variables; (3) we could interpret final demand as an intertemporal
consumption function where goods are also indexed by time and states à la Arrow-Debreu.
    Interpretation (1) is the most straightforward. In interpretation (2), final demand encom-
passes consumption demand and investment demand, and the formulation with factor supply
functions must be used. In interpretation (3), the process of factor (capital or human capi-
tal for example) accumulation is captured via intertemporal production functions that trans-
form goods in one period into goods in other periods.9 Our formulas would apply to these
economies without change, but of course, in such a world, input-output definitions are ex-
pressed in net-present value terms.
    In principle, interpretation (3) also allows us to capture borrowing constraints and incom-
plete markets for consumers facing idiosyncratic risk, with the consumer- and commodity-
specific wedges capturing the different endogenous shadow rates of returns on different assets
by different consumers implicit in decentralizations of these models.


Biased Technical Change and Demand Shocks

Although the model is written in terms of Hicks-neutral productivity shocks, this is done
without loss of generality. We can always capture non-neutral productivity shocks, say factor-
augmenting shocks, by relabelling the relevant factor of a given producer to be a separate pro-
ducer. Then, Hicks-neutral productivity shocks to that industry would be identical to factor-
biased productivity shocks in the original model.
   8 See Hulten (1973) for more details on the relationship between Divisia indices and cardinal measures of
welfare and output.
   9 This modeling choice would also be well-suited to handle technological frictions to the reallocation of factors

such as adjustment costs and variable capacity utilization.


                                                        12
   Demand shocks can also be modeled in this way. A demand shock for a certain input used
by i can be modelled via a positive consumer-specific productivity shock for that input along
with negative consumer-specific productivity shocks to all other inputs, leaving the overall
productivity of i unchanged.


1.4   Standard Form for CES Economies
Any nested-CES economy, with an arbitrary numbers of agents, producers, factors, CES nests,
elasticities, and intermediate input use, can be re-written in what we call standard form, which
is more convenient to study. Throughout the paper, variables with over-lines are normalizing
constants equal to the values at some initial allocation.
    A CES economy in standard form is defined by a tuple (ω, θ, F ). The ( N + F + C ) × ( N +
F + C ) matrix ω is a matrix of input-output parameters. The ( N + C ) × 1 vector θ is a vector of
microeconomic elasticities of substitution. Finally, for economies with distortions, we supple-
ment the definition with the specification of a N × 1 vector µ is a vector of markups/wedges
for the N goods. Each good k in N or in C is produced with the production function

                                                                             θk
                                                             θ k −1
                                                                      
                                                                          θ k −1
                               yk  A                 xkl        θk
                                  = k ∑ ωkl                                       ,
                               yk  Āk l
                                                     x kl

where xlk are intermediate inputs from l used by k. Without loss-of-generality, we represent
the final good Yc consumed by each consumer c as being purchased by the household from a
producer producing the final good. When there is only one consumer, we can define aggregate
output in levels using the consumer’s consumption aggregator.
   Through a relabelling, this structure can represent any CES economy with an arbitrary pat-
tern of nests and wedges and elasticities. Intuitively, by relabelling each CES aggregator to be
a new producer, we can have as many nests as desired.
   For the rest of paper, except in Section 2, we work with nested-CES economies. However,
in Section 8, we show that all of our nested-CES results can be easily extended to non-CES
economies with a simple modification using the concept of a substitution operator.


1.5   Outline of Analysis
Our results are comparative statics describing how, starting from an initial equilibrium, the
equilibrium levels of various quantities change in responses to shocks to productivities or
wedges. To help build intuition, we focus on nested-CES economies, which it turns out, capture
much of the important intuition of more general models.
   In Section 2, we establish general conditions for symmetric propagation. In Section 3, we


                                               13
study the basic model with a representative consumer, inelastically supplied factors, and no
distortions. We characterize propagation and see a concrete demonstration of symmetric prop-
agation. In Sections 4-6, we enrich the basic model by introducing ingredients which change
the patterns of propagation and break symmetry. In Section 4, we allow for heterogeneous con-
sumers, in Section 5, we allow for elastic factor supplies that are not derived from balanced-
growth perferences, and in Section 6 we allow for wedges. We study each of these general-
izations in isolation to keep the exposition clear. In the appendix, we provide results for the
general model, which simultaneously allows for heterogeneous agents, elastic factors, and dis-
tortions. Once we end our analysis of propagation, we close out the analysis in Section 7 by
defining and characterizing the properties of industry aggregates of productivity and wedges
in this class of models. As previously indicated, all of our results easily generalize beyond CES
functional forms as explained in Section 8.


2      Symmetric Propagation
In this section, we establish a surprising (and most likely counterfactual) symmetry result for
this class of models when there is a representative-agent with balanced-growth preferences.
This result helps organize our analysis in the rest of the paper, since we can show how adding
more ingredients can break this symmetry. We use the most general version of the model,
which does not impose a nested CES structure.

Proposition 1 (Symmetric Propagation). Consider the efficient model without markups/wedges. For
two producers i and j, symmetric propagation

                                                d λj       d λi
                                                       =
                                              d log Ai   d log A j

holds in equilibrium if either of the following conditions is satisfied:

    (i) There is a representative agent with balanced-growth preferences

                                U (D(c1 , . . . , c N ), L1 , · · · , L F ) = U (D(c)v( L)),

       where D is homogenous of degree one, and factor supply is derived from these preferences; or

 (ii) There is a single primary factor, indexed by L, and preferences are

                                                U (D(c1 , . . . , c N ), L),

       where D is homothetic.


                                                         14
    Note that in the definition of balanced-growth preferences in (i), the disutility of factor sup-
ply function v( L) need not be homothetic.
    Many papers in the multisector literature and almost all papers in the production network
literature work with either a single factor of production or balanced-growth preferences, mean-
ing that most of these papers feature symmetric propagation of shocks.10 We discuss these
sufficient conditions in turn.
    We start with condition (i): symmetric propagation is consequence of chaining together
three facts: (1) efficiency of the equilibrium, (2) the existence of a representative agent, (3) ho-
motheticity of preferences D over consumption goods and balanced-growth preferences over
consumption goods and factors.
    To understand the intuition for this result, it is easier to start with the case where factors
supplies are inelastic where condition (i) boils down to the requirement that preferences over
goods are homothetic. Efficiency (1) implies that proportional impact of real output of a shock
to the productivity of producer i is given by its sales share λi . With a representative agent (2)
with homothetic preferences over consumption goods (3), we can define a price index to deflate
nominal GDP to obtain real output in levels. Hence λi is the derivative of log real output with
respect to the log productivity of producer i, i.e. λi = d log Y/ d log Ai . The symmetry of
partial derivatives d2 log Y/(d log A j d log Ai ) = d2 log Y/(d log Ai d log A j ) then immediately
implies symmetric propagation in sales shares d λi / d log A j = d λ j / d log Ai .
    The generalization to the case of elastic factor supplies and balanced-growth preferences
involves several modifications. We can define an extended price index for welfare which loads
not just on goods but also on factor prices and starts not with nominal GDP but with nominal
GDP net of factor payments. An envelope theorem then implies that the sales share of producer
i as a fraction of nominal GDP net of factor payments is equal to the elasticity of welfare to the
productivity of this producer. Because of balanced growth preferences, the expenditures on
consumption goods are proportional to nominal GDP net of factor payments and welfare is
proportional to real output. As a consequence, the elasticity of real output to productivities are
again given by sales shares as a fraction of nominal GDP. The result follows.
    As usual, Proposition 1 can be applied both to static or to dynamic environments. In a
dynamic setting, if per-period preferences are log-balanced-growth, then the environment sat-
isfies condition (i) (as in Foerster, Sarte, and Watson (2011) for example), and Proposition 1
applies.
    Symmetric propagation follows from (ii) for the following reasons. First, changes in fac-
tor prices do not lead to any redistribution across consumers and so final demand is de facto
homothetic as if there were a representative agent. Second, when there is a single factor, an in-
  10 This symmetry property involves general equilibrium responses and is therefore different from the “reci-
procity relations” discussed by Samuelson (1953) which involve the equilibrium change in quantities (or shares)
of goods to changes in factor supplies in partial equilibrium holding goods prices constant.


                                                      15
crease in the supply of that factor affects the marginal cost of all producers in exactly the same
way: one-for-one. Hence, changes in the supply of the factor do not change relative prices, and
therefore, propagation in sales-shares in the one factor model does not depend on the elasticity
of factor supply. The result then follows from (i).
    When the conditions in Proposition 1 are satisfied, symmetric propagation holds not only
for sales shares but also for sales, as long as GDP is used as the numeraire. In fact, symmetric
propagation holds for sales even in situations where it does not for sales shares. To state this
result, temporarily relax our maintained assumption of homotheticity over consumption and
separability between consumption and factors.

Proposition 2. Consider a modification of the efficient model without markups/wedges with a represen-
tative agent whose preferences are given by

                                          U ( c1 , . . . , c N , L1 , . . . , L F ),

where preferences over consumption goods are not necessarily homothetic. Then there exists some price
index Pu such that
                                        d pi yi     d pj yj
                                                =           ,
                                      d log A j    d log Ai
when Pu is used as the numeraire. If U is homothetic, then Pu is the ideal price index associated with U.
If U is homothetic and factors are inelastically supplied, then Pu is the GDP deflator.

    Interestingly, the logic for symmetry in sales is even stronger than for sales shares. In par-
ticular, if we measure prices using the household’s ideal price index (one which accounts ap-
propriately for leisure), then symmetric propagation in sales holds for any representative agent
model where the first welfare theorem holds. However, symmetric propagation in sales is not
readily observable since it applies to real sales measured using the household’s unobservable
ideal price index. Since we do not directly observe these real sales, this makes symmetric prop-
agation in sales less interesting from an applied perspective (except when utility is homothetic
and factors supplies are inelastic).
    In the rest of the paper, we start in Section 3 by analyzing a setup with is a representative
agent and inelastic factor supplies where Proposition 1 holds. We then proceed to show how
Proposition 1 can be broken. In Section 4, we break homotheticity of final demand by intro-
ducing hetereogenous consumers.11 In Section 5, we break symmetry by allowing for multiple
   11 In Appendix G, we also show an example where symmetry is broken with a representative consumer with

non-homothetic preferences. The example in Appendix G uses the non-homothetic demand system used by
Comin, Lashkari, and Mestieri (2015) and proposed by Sato (1977). Non-homothetic preferences are a key in-
gredient in the sizeable literature on structural change, and Appendix G connects our results to this literature. We
show how to recover the two key facts emphasized by Comin, Lashkari, and Mestieri (2015): the hump-shaped
consumption share of manufacturing over time, and the decline in the quantity manufacturing goods relative to
services despite faster productivity growth in manufacturing.


                                                             16
factors which cannot be derived from balanced-growth preferences. Finally, we break symmet-
ric propagation in Section 6 by allowing for distortions, which severs the link between sales
and derivatives of the welfare function established by the first-welfare theorem.


3     Basic Model
We begin by stating our comparative static results for nested-CES economies with a representa-
tive consumer, inelastic factors, and no distortions. We then work through some examples. From
now on, unless stated otherwise, we work with nested-CES economies. Section 8 shows how
to generalize the results to non-CES economies.


3.1     Comparative Statics
In this section, we characterize the elasticities to the different productivities of aggregate out-
put, shares, sales, prices, and quantities.


Aggregate Output and Shares

We start by characterizing the elasticities to the different productivities of the sales shares or
Domar weights. For this result, it is useful to use a notation which explicitly differentiate factors
from other producers. The following proposition is taken from Baqaee and Farhi (2017a).12

Proposition 3. (Aggregate Output and Shares) The elasticities of aggregate output to the different
productivities are given by
                                      d log Y
                                               = λk .                                          (1)
                                      d log Ak
The elasticities of the sales shares or Domar weights of i is given by

    d log λi                 λj                                           λj                        d log Λ g
    d log Ak
             =   ∑(θ j − 1) λi CovΩ(j) (Ψ(k) , Ψ(i) ) − ∑ ∑(θ j − 1) λi CovΩ(j) (Ψ(g) , Ψ(i) ) d log Ak .        (2)
                  j                                        g   j

    12 We first established Proposition 3 in Baqaee and Farhi (2017a) where our focus was the characterization
to the second order of the macroeconomic impacts of microeconomic shocks in order to account for non-
linearities. Since the linear or first-order macroeconomic impact of microeconomic shocks is given by Hul-
ten’s theorem as d log Y/ d log Ai = λi , it follows that their second-order or nonlinear impact is given by
d2 log Y/(d log Ai d log Ak ) = d λi / log Ak = λi d log λi / d log Ak . Our focus here is different: we aim to char-
acterize to the first order the propagation of microeconomic shocks in production networks, i.e. the impact of a
shock to producer k on producer i. Proposition 3 turns out to be useful for these two different objectives.




                                                         17
The elasticities of the factor shares solve the following system of linear equations

  d log Λ f                     λj                                                λj                        d log Λ g
  d log Ak
            =   ∑(θ j − 1) Λ f CovΩ(j) (Ψ(k) , Ψ( f ) ) − ∑ ∑(θ j − 1) Λ f CovΩ(j) (Ψ(g) , Ψ( f ) ) d log Ak .
                 j                                                  g   j
                                                                                                                        (3)

   In these equations, we make use of the input-output covariance operator introduced by
Baqaee and Farhi (2017a):
                                                                                   !                !
                     CovΩ( j) (Ψ(k) , Ψ(l ) ) =    ∑ Ω ji Ψik Ψil − ∑ Ω ji Ψik         ∑ Ω ji Ψil       ,               (4)
                                                    i                       i              i


where Ω( j) corresponds to the jth row of Ω, Ψ(k) to kth column of Ψ, and Ψ(l ) to the lth column
of Ψ. In words, this is the covariance between the kth column of Ψ and the lth column of
Ψ using the jth row of Ω as the distribution. Since the rows of Ω always sum to one for a
reproducible (non-factor) good j, we can formally think of this as a covariance, and for a non-
reproducible good, the operator just returns 0. The input-ouput covariance operator turns out
to be a key statistic for nested-CES economies.
    Equation (1) is an output aggregation equation, the content of which is simply Hulten’s the-
orem: the elasticity of aggregate output to productivity of a producer is given by its Domar
weight. We call equations (2) and (3) the share propagation equations. Of course, equation (3) is
obtained simply by letting i = f in (2).
    Our analysis will show that this basic structure, where all equilibrium relationships can be
deduced by combining an aggregation equation with share propagation equations, holds in
general, and is not an artefact of the simplifications made in this section. Even as we open
the door to distortions, elastic factor supplies, and non-CES functional forms, an aggregation
equation along with share propagation equations will pin down the equilibrium. Intuitively,
the share propagation equations determine how each quantity’s share of the pie changes, and
the aggregation equations determines how the size of the pie changes.
    Note that we can rewrite the system of linear factor share propagation equations (3) as

                                              d log Λ     d log Λ
                                                       =Γ          + δ(k) ,                                             (5)
                                              d log Ak    d log Ak

with
                                                     λj                     
                                 Γfg   = − ∑(θ j − 1) CovΩ( j) Ψ( g) , Ψ( f ) ,
                                           j
                                                     Λf

and
                                                             λj                      
                                     δf k =   ∑ ( θ j − 1)   Λf
                                                                CovΩ( j) Ψ(k) , Ψ( f ) .
                                               j



                                                               18
    We call δ the factor share impulse matrix. Its kth column encodes the direct or first-round
effects of a shock to the productivity of producer k on factor income shares, taking relative
factor prices as given. We call Γ the factor share propagation matrix. It encodes the effects of
changes in relative factor prices on factor income shares, and it is independent of the source of
the shock k.
    Imagine a positive shock d log Ak > 0 to producer k. For fixed relative factor prices, every
producer i will substitute across its inputs in response to this shock. Suppose that θ j > 1, so
that producer j substitutes (in shares) towards those inputs i that are more reliant on producer k,
captured by Ψik , the more so, the higher is θ j − 1. Now, if those inputs are also more reliant on
                                                   
factor f , captured by a high CovΩ( j) Ψ(k) , Ψ( f ) , then substitution by j will increase demand
for factor f and hence the income share of factor f . These substitutions, which happen at the
level of each producer j, must be summed across producers leading to the term δ f k .
    This first round of changes in the demand for factors triggers changes in relative factor
prices which then sets off additional rounds of substitution in the economy that we must ac-
count for, and this is the role Γ plays. For a given set of factor prices, the shock to k affects the
demand for each factor, hence factor income shares and in turn factor prices, as measured by
the F × 1 vector δ(k) . These changes in factor prices then cause further substitution through
the network, leading to additional changes in factor demands and prices. The impact of the
change in the relative price of factor g on the share of factor f is measured by the f gth element
of the F × F matrix Γ. The movements in factor shares are the fixed point of this process, i.e.
the solution of equation (3).
    The intuition for equation (2) is similar. The first term on the right-hand side accounts for
the effect of the shock for given relative factor prices, and the second term on the right-hand
side accounts for the effects of the changes in relative factor prices.
    In the case where there is only one factor, which we then denote by L, then we have
d log Λ L / d log Ak = 0 since Λ L is always equal to 1. Equation (3) becomes trivial, and the
second covariance terms on the right-hand side of equations 2 drop outs.

Prices

We now characterize the elasticities of prices to the different productivities.
Proposition 4. (Prices) The elasticities of the prices of the different producers to the different produc-
tivities are given by
                                 d log w f      d log Λ f     d log Y
                                             =            +            ,                               (6)
                                 d log Ak       d log Ak     d log Ak
                                 d log pi                d log w g
                                          = −Ψik + ∑ Ψig           ,                                   (7)
                                 d log Ak          g     d log Ak

where d log Y/ d log Ak and d log Λ f / d log Ak are given in Proposition 3.

                                                   19
    Equation (6) characterizes the general-equilibrium elasticities of wages to the different pro-
ductivities. These are necessary to complete the partial-equilibrium elasticities encoded in the
Leontief inverse matrix in order to get the general-equilibrium elasticities of prices to produc-
tivities in equation (7).
    Note that with one factor, denoted by L, equations (6) and (7) become d log w f / d log Ak =
λk and d log pi / d log Ak = −Ψik + λk . Since λk and Ψik only depend on the downstream
input-output linkages of producer k, shocks propagate downstream in prices. This property no
longer holds with multiple factors, because productivity shocks then propagate downstream
and upstream. Indeed, they lead to upstream changes in the relative prices of factors which
depend on all the input-output linkages in the economy. These upstream changes in relative
factor prices in turn propagate downstream, and since all producers are downstream from
factors, affect all prices. 13

Sales, and Quantities

Armed with Propositions 3 and 4, we can characterize the elasticities of sales and output quan-
tities of the different producers to the different productivities.
Corollary 1. (Sales and Quantities) The elasticities of the sales and output quantities of the different
producers to the different productivities are given by

                                       d log pi yi   d log λi   d log Y
                                                   =          +         ,                                             (8)
                                       d log Ak      d log Ak d log Ak

                                       d log yi   d log pi yi   d log pi
                                                =             −          ,                                            (9)
                                       d log Ak   d log Ak      d log Ak
where d log λi / d log Ak , d log Y/ d log Ak , and d log pi / d log Ak are given in Propositions 3 and 4.
These formulas can be applied to factors by treating them as producers of non-reproducible goods using
i = f and replacing pi by w f , yi by L f , and λi by Λ f .
    The formula for sales is straightforward. Indeed, equation (8) can be obtained by combining
Hulten’s theorem as stated in equation (1) and the formula for sales shares as stated in equation
(2) since pi yi = Yλi .
    The formula for quantities in (9) can then be obtained by combining the formula for sales in
equation (8) and the formula for prices in equation (7) since yi = pi yi /pi .
   13 An interesting implication of Hulten’s theorem (see Proposition 3) in efficient economies with inelastic factor
supplies is that changes to the composition of final demand have no effect on aggregate output. When factor
supplies are elastic as in Section 5, this property remains true as long as there is only one factor, but fails in general
when there are multiple factors and the different producers are differentially exposed to the different factors (see
Proposition 6), a point previously made in Baqaee (2015). It also fails in general when there are distortions as
in Section 6, since then changes in the composition of demand can affect aggregate TFP by directing resources
towards or away from more distorted parts of the economy and impacting the degree of allocative efficiency (see
Propositions 8 and 14).

                                                           20
Input Shares, Input Expenditures, and Input Quantities

Using Propositions 3 and 4 as well as Corollary 1, it is easy to derive the elasticities of input
shares, expenditures and quantities of the different producers to the different productivities.
These results can actually be derived by relabeling the network to treat the sales of good l to
producer i as going through a new fictitious producer specific to i and l. They are collected in
Corollary 2 in Appendix B.


Symmetric Propagation

Since the economy in this section satisfies the conditions of Proposition 1, it features symmetric
propagation. λk = d log Y/ d log Ak , we have14

                                     d λi        d λj         d2 log Y
                                             =          =                    .
                                   d log A j   d log Ai   d log Ai d log A j

Of course, one can also prove symmetry directly by relying on the shares propgation equations
(2) and (3).


3.2   Regressions in General Equilibrium
Proposition 3 shows the propagation of shocks from one micro producer to another are pro-
foundly affected by general equilibrium assumptions. Modelling decisions about whether or
not there is a representative consumer or whether factor markets for some goods are shared
non-trivially affect the way that shocks propagate, for a fixed input-output matrix and vector
underlying micro-elasticities of substitution. Specifically, we can write expressions of the form

                                              d log xi = eijx d log A j ,

for the effect of an exogenous shock to j on the sales share (xi = λi ), sales, (xi = pi yi ), out-
put (xi = yi ), or price (xi = pi ) of i, where eijx depends on all the primitives of the model,
including the HA-IO matrix, the micro-elasticities of substitution, and the structure of factor
markets. Once we disaggregate the economy, “local” factor markets and “local” input-output
connections introduce “local” general equilibrium responses. To see why this matters, we work
through two simple examples.
  14 Symmetric   propagation also applies to factors, for example, replacing i by f , λi by Λ f , and Ai by L f .




                                                           21
Elasticities of Substitution

Consider regressions of the form

                                  ∆ log(λi /λ j ) = a∆ log A j + controls + ε,

where ∆ log A j is an exogenous shock to the production of j, a is the regression coefficient and
ε is the error term. To interpret the coefficient a, local general equilibrium forces must be taken
into account.
    For example, this regression could be the second stage of an IV regression designed to es-
timate elasticities of substitution. Anticipating an upcoming example, suppose that GDP is
given by
                                                    θ −1 ! θ −θ 1
                                                    yi θ
                                     Y = ∑ bi                       .
                                              i
                                                     y

Imagine each producer has a production function yi = Ai Li where Li is the labor used by
producer i. In such a world, we know that

                                      d log(λi /λ j ) = −(1 − θ ) d log p j .

Under the exclusion restriction that ∆ log A j moves p j and no other prices or wages, we can
use the regression equation to estimate the elasticity of substitution θ. However, in this model,
                              β 1− β
suppose that we say Li = Mi Fi , where Mi corresponds to mobile labor, which can be real-
located across producers, and Fi corresponds to fixed labor, which cannot be reallocated.15 In
this case, if we apply Proposition 3, we find

                                                           1−θ
                                d log(λ j /λi ) =                      d log Ai .
                                                    1 + (θ − 1)(1 − β)

Hence, the estimated coefficient a is not a simple function of the elasticity of substitution, but
also depends on how mobile the labor force is, and this holds regardless of the size of i and
j. In other words, simply knowing that i and j are small is not enough to logically rule out
the importance of general equilibrium mechanisms. In essence, the aforementioned exclusion
restriction is violated due to the existence of local labor markets.


Output Elasticity

Consider regressions of the form

                                     ∆ log pi = a∆ log A j + controls + ε,
  15 See   Appendix B.1 for more details on this example.


                                                        22
where ∆ log A j is an exogenous shock to the production of j, a is the regression coefficient and
ε is the error term. For example, this regression could be the second stage of an IV regression
designed to estimate elasticities of the cost function. In general,

                                      d log pi = Ωij d log p j ,

where Ωij is the elasticity of i’s marginal cost with respect to j’s price. Under the exclusion
restrict that ∆ log A j moves only p j and no other prices or wages, we can use the regression
equation to estimate output elasticities. However, applying Proposition 4, we know that

                             d log pi = Ψij d log A j + ∑ Ψig d log w g .
                                                         g


Even if i and j are infinitesimal and the prices of factors are assumed to be constant, if there
exists some producer k who sells to k and buys from j, so that Ωik Ψkj , 0 then our regressions
are contaminated by local GE effects. In this case, the existence of local supply chains violate
the exclusion restriction.
   Propositions 3 and 4, and their extensions and generalizations in subsequent sections, are
useful for two reasons. First, they suggest caution in inferring structural objects from coeffi-
cients of regressions due to the presence of these general equilibrium forces. Second, they offer
a way to map the results of regressions to structural primitives once one takes a stance on the
nature of the general equilibrium forces.


3.3   Simple Illustrative Examples
In this section, we illustrate the results derived in Section 3.1 with three simple economies: the
vertical economy, the horizontal economy, and a double-nested CES economy. In each of these
economies, we apply our results to characterize some selected propagation results. We end this
section by applying our results, using the intertemporal interpretation, to the classic model of
Long and Plosser (1983).
    In the first two examples, there is a single factor called labor. The vertical economy is a chain
of producers: producer N produces linearly using labor and downstream producers transform
linearly the output of the producer immediately upstream from them. The household pur-
chases the output of the most downstream producer. The horizontal economy features down-
stream producers who produce linearly from labor. The household purchases the output of the
downstream producers according to a CES aggregator. The last economy has two factors, L
and K, used by CES producers who then sell to the household.
    We will be particularly interested in the possibility of generating positive comovement in a
given producer-level variable, by which we mean that these variables all move in the same di-


                                                 23
                    L                               L
                                                                           L                    K


                                     1             ···              N      1        ···         N
        ···         N



                                                                                   HH
         1         HH                             HH
                                                                               (c) Nested-CES
      (a) Vertical Economy            (b) Horizontal Economy

Figure 1: The solid arrows represent the flow of goods. The flow of profits and wages from
firms to households has been suppressed in the diagram.


rection across producers i in response to the productivity shock of a given producer k. We will
identify two distinct channels for positive comovement in output: an intermediate-input chan-
nel (vertical economy); and a labor reallocation channel in the presence of complementarities
(horizontal economy).
    In the final example, we show how we can capture the insights of models of capital-biased
technical change and automation, like Acemoglu and Restrepo (2018), in our framework, and
to extend those models to more complex and quantitatively realistic production structures.


Example: Vertical Economy

In the vertical economy, we have
                                           d log Y
                                                    = 1,
                                           d log Ak
                                d log λi                d log Λ L
                                         = 0,                     = 0,
                                d log Ak                d log Ak
                              d log pi                    d log w L
                                       = 1{ i > k } ,               = 1,
                              d log Ak                    d log Ak
                               d log pi yi              d log w L L
                                           = 1,                     = 1,
                               d log Ak                  d log Ak
                              d log yi                    d log Li
                                       = 1{ i < k } ,              = 0.
                              d log Ak                    d log Ak
    In this economy, shocks propagate downstream for quantities and upstream for prices, and
in both directions for sales. A shock d log Ak > 0 to the productivity of producer k generates
positive comovement in sales, positive comovement in quantities for all for all downstream
producers i ≤ k. Positive comovement in output is entirely due to propagation via intermediate


                                                  24
inputs.


Example: Horizontal Economy

In the horizontal economy, we have

                                          d log Y
                                                   = λk ,
                                          d log Ak

                         d log λi                             d log Λ L
                                  = (θ − 1)(δik − λk ),                 = 0,
                         d log Ak                             d log Ak
                            d log pi                    d log w L
                                     = −(δik − λk ),              = λk ,
                            d log Ak                    d log Ak
                     d log pi yi                               d log w L L
                                 = λk + (θ − 1)(δik − λk ),                = λk ,
                     d log Ak                                   d log Ak
               d log yi                                d log Li
                        = δik + (θ − 1)(δik − λk ),             = (θ − 1)(δik − λk ),
               d log Ak                                d log Ak
where δik is a Kronecker delta. Consider a positive shock d log Ak > 0 to the productivity of
producer k. Aggregate output increases by λk d log Ak . The price of producer k decreases by
(1 − λk ) d log Ak and the prices of the other producers increase by λk d log Ak .
    Suppose that producers are substitutes so that θ > 1. Then the share of producer k in-
creases and those of the other producers decrease. Labor is reallocated towards producer k
and away from the other producers. The output of producer k increases by more than d log Ak
and the output of the other producers decreases. The sales of producer k increase by more
than λk d log Ak and those of other producers increase by less than λk d log Ak (they actually
decrease if θ > 2). These propagation patterns are reversed when producers are complements
with θ < 1, which provides a simple illustration of the notion of cost disease emphasized by
Baumol (1967): a positive shock to the productivity of producer k causes the output of this
producer to expand more than the rest of the economy and at the same time its relative share
to decrease because of a strong adverse relative price effect while labor is reallocated to other
producers.
    In the substitutes case θ > 1, it is possible to get positive comovement in sales but not in
output. In the complements case θ < 1 by contrast, we can get positive comovement in both
sales and output. Positive comovement in output then comes about through labor reallocation
in the presence of complementarities, a channel entirely different from the intermediate input
channel at work in the vertical economy. We can never get positive comovement in labor since
total labor is fixed.
    This example emphasizes the importance of the reallocation of inputs for comovement. In-
deed, if labor could not be reallocated, then the equations would coincide with the formulas for

                                                25
the Cobb-Douglas case with full labor reallocation, no matter what the true elasticity of substi-
tution θ between producers is. In Appendix B.1, we consider cases with intermediate amounts
of reallocation.
    This example confirms a noticeable implication of Hulten’s theorem: that impediments to
factor reallocation are irrelevant for the effects on aggregate output. However we see here that
such impediments matter for the propagation of shocks and comovement: they mitigate the
channel of positive comovement through complementarities that we identified above.


Example: Capital-biased Technical Change in a Task-Based Model

Our results are well-suited to studying questions of structural change. For instance, a large and
growing literature studies the causes of the recent decline in labor’s share of income. This lit-
erature emphasizes the importance of the substitution patterns in the production technologies
available to society.
   One of the themes of this literature is that a single-good aggregate production function
Y = F (K, L) is not complex enough to capture the data. Karabarbounis and Neiman (2013),
Oberfield and Raval (2014), Rognlie (2016) and Acemoglu and Restrepo (2018) use more com-
plex production structures to draw out the implications of capital-augmenting shocks on la-
bor’s share of income.Proposition 3, and its generalizations in the subsequent sections, can
transport the key intuitions of this literature into environments with realistic input-output link-
ages, frictions, disaggregated factor markets, and non-parametric production functions.
   As an example, in this section, we consider an example along the lines of Acemoglu and
Restrepo (2018), and show how their insights can be recovered in our framework. They argue
that a possible consequence of capital-biased technical change and automation has been a si-
multaneous decline in both labor’s share of income and the real wage. However, they point
out that capital-biased shocks cannot generate a decline in the real wage with an aggregate
production function, since the positive shock to capital will always increase labor’s marginal
product.
   To capture their intuition, suppose that each producer, associated to a “task”, produces from
capital and labor according to

                                                                                        θ θKL−1
                                                θKL −1                     θKL −1       KL
                         yi               L̃i      θKL                 K̃i      θKL
                             = ωiL                        + ωiK                        
                         ȳi              L̃¯
                                            i                          K̃¯
                                                                         i


with
                                      AiK                                      AiL
                              K̃i =        Ki            and       L̃i =            Li .
                                      ĀiK                                     ĀiL
The consumer values the output of these producers according to a CES aggregator with elas-


                                                           26
ticity of substitution θ.
    We characterize the elasticity of wages and of the labor share in response to shocks, using
Proposition 3.16 We follow Acemoglu and Restrepo (2018) and assume that θ = 1, so that

                                     d log Λ L     −(θKL − 1)λk ωkK ωΛkLL
                                               =                                 ,
                                     d log AkK   1 + (θKL − 1) ∑i λi ωΛiLL ωΛiKK

and                                                                                          
                            d log w L               1 + (θKL − 1) ∑i λi            ωkL
                                                                                  ωiL
                                                                                  ΛL
                                                                                   ΛL   −         ωiK
                                                                                                  ΛK
                                      = λk ωkK                                                          .
                            d log AkK                      1 + (θKL − 1) ∑i λi Λ L ΛK
                                                                               ωiL ωiK


So, a capital-augmenting shock to task k decreases labor’s share of income as long as labor
and capital are substitutes θKL > 1. However, the effect of such a shock on the real wage is
ambiguous. If task k is more labor intensive than the average task, and capital and labor are
highly substitutable, then the real wage falls. This is because as task k substitutes from labor to
capital, labor is reallocated to other tasks who use labor less productively. This reallocation of
labor reduces labor’s marginal product, and hence the real wage.
    It is easy to see that a single-good model could not generate these patterns: simply let k’s
sales share equal λk = 1. In that case, ωkL = Λ L and ωkK = Λk , so that d log w L / d log AkK =
Λk /θKL > 0 for all θKL .
    Our analysis also shows that the assumption that the consumer have Cobb-Douglas pref-
erences is important: to get a decline in the wage, we require consumption goods to be less
substitutable than inputs into production. This is because as task k substitutes from labor to
capital, it does not expand relative to other producers in the economy, and hence the labor
moves from task k to other tasks. If consumption goods were highly substitutable, then this
channel would break down. For instance, if instead consumption goods were perfect substi-
tutes, then using (10), we would have
                                                                                       
                                                                            ωkL
                                  d log w L                                 ΛL    −1
                              lim           = λk ωkK 1 +              1
                                                                                            >0
                             θ →∞ d log AkK
                                                                      ΛK Varλ ( ω( L) )


since ωkL > ∑i λi ωiL = Λ L .
   16 In   general, when θ , 1, Proposition (3) gives

                           d log Λ L      (θ − 1)λk ωkK ( ωΛkLL − 1) − (θKL − 1)λk ωkK ωΛkLL
                                     =                                                                  .   (10)
                           d log AkK   1 + (θ − 1) Λ L1ΛK Varλ (ω( L) ) + (θKL − 1) ∑i λi ωΛiLL   ωiK
                                                                                                  ΛK

Combine this with d log Y/ d log AkK = λk ωkK to get an expression for d log w L = d log Λ L + d log Y.




                                                             27
Example: The Long-Plosser Model

Finally, we give the example of the Long and Plosser (1983) model. There is a representa-
tive consumer. Per-period preferences are logarithmic in a Cobb Douglas consumption ag-
                                                          b
gregator ct across the N sectors with ct = ΠiN=1 citi . Labor supply in all periods Lt is inelas-
tic.17 The discount factor is β < 1. Good i in period t + 1 is produced using labor and
the different goods from period t according to a constant-returns Cobb-Douglas aggregator
                                ωij
yi(t+1) = Ai(t+1) Lit iL Π N
                   ω
                           j=1 Xijt .
    We imagine that the economy is at a steady state with Ait = 1 for all t. At t = 0, a one-time
unanticipated shock hits the economy in the form of a new path for the productivities. The
solution is available in closed-form and can be found in Long and Plosser (1983). Our purpose
here is to show how this economy and its propagation mechanisms can be captured by our
formalism in its inter-temporal interpretation.
    The goods it are the different goods i in the different periods t ≥ 1. The factors are labor Lt
in the different periods t ≥ 0, and the goods i0 in the initial period. The input-output matrix is
given by Ω(it) Lt−1 = ωiL , Ω(it)( j(t−1)) = ωij , and all the other entries are 0. In addition, we have
$ = 1 and λt = (1 − β)b0 ( I − βω )−1 where λt is the vector [λ1t , · · · , λ Nt ]. Define ω to be the
( N + 1) × ( N + 1) matrix given by ωij , with labor treated as the ( N + 1)th element. We get

                                                      d log Y
                                                               = λkt
                                                     d log Akt
                                           d log λis                 d log Λ Ls
                                                     = 0,                       = 0,
                                           d log Akt                 d log Akt

                             d log pis                                          d log w Ls
                                       = −1{t≤s} ω s−t ik + λkt ,
                                                      
                                                                                           = λkt ,
                             d log Akt                                          d log Akt
                                     d log( pis yis )                d log(w Ls Ls )
                                                      = λkt ,                        = λkt ,
                                        d log At                        d log At
                                    d log yis                                d log Ls
                                              = 1{t≤s} ω s−t ik ,
                                                            
                                                                                       = 0.
                                    d log Akt                                d log Akt
These equations demonstrate how positive comovement through intermediate inputs arises
in the Long-Plosser model. The model is particularly tractable because all the elasticities of
substitution are unitary, so that all shares are invariant to all the shocks.
    When the economy has only one sector, then the Long-Plosser model can be reinterpreted
as the Brock-Mirman specification of the neoclassical growth model with log balanced-growth
preferences, Cobb-Douglas production from labor and capital, and full depreciation of capi-
  17 In   the original Long-Plosser model, labor supply is elastic with log balanced-growth per-period preferences
                      (1 + ζ −1 )
log ct − ν(1 + ζ − 1
                 L ) Lt
                        L
                          . Equilibrium labor supply is constant and so the model is isomorphic to the one with
exogenous labor supply that we study here.


                                                                28
tal.18 There positive comovement arises through capital accumulation because capital is an
intermediate input. The Brock-Mirman specification is also extremely tractable, lending itself
to a closed-form solution, and for the same reason.


4      Heterogeneous Agents
In this section, we characterize how shocks propagate in economies with heterogeneous con-
sumers. For simplicity, we focus on the special case with inelastically supplied factors and no
distortions. The more general case is treated in the appendix.


4.1     Comparative Statics
We start by characterizing the elasticities to the different productivities of the sales shares or
Domar weights.

Proposition 5. (Aggregate Output and Shares) The elasticities of aggregate output to the different
productivities are given by
                                      d log Y
                                               = λk .                                         (11)
                                      d log Ak
The elasticities of the sales shares or Domar weights of i is then given by

    d log λi           λj                                                 λj                               d log Λ g
    d log Ak
             =    ∑ λi (θ j − 1)CovΩ(j) (Ψ(k) , Ψ(i) ) − ∑ ∑ λi (θ j − 1)CovΩ(j) (Ψ(g) , Ψ(i) ) d log Ak
                   j                                      g       j
                                                                               1
                                                                          +
                                                                               λi   ∑ ∑(λic − λi )Φcg Λg d log Λg .    (12)
                                                                                        g       c


The elasticities of the factor shares solve the following system of linear equations

    d log Λ f          λj                                                  λj                                  d log Λ g
    d log Ak
              =   ∑ Λ f (θ j − 1)CovΩ(j) (Ψ(k) , Ψ( f ) ) − ∑ ∑ Λ f (θ j − 1)CovΩ(j) v(Ψ(g) , Ψ( f ) ) d log Ak
                   j                                          g       j
                                                                          1                              d log Λ g
                                                                  +
                                                                          Λf    ∑ ∑(Λcf − Λ f )Φcg Λg d log Ak .       (13)
                                                                                    g       c


   The overall effect on real GDP, as measured by the Divisia index, are exactly the same as
before, following Hulten’s theorem. Relative to (5), with heterogeneous consumers, the factor
    18 There is a small difference: inputs are imposed to be purchased one period in advance in the Long-Plosser
version of the model while they can in principle be freely adjusted in the Brock-Mirman model. However, because
labor is fixed and capital must be accumulated, these distinctions are irrelevant for the equilibrium allocation.




                                                       29
share equations solve
                           d log Λ     d log Λ     d log Λ
                                    =Γ          +Θ          + δ(k) ,
                           d log Ak    d log Ak    d log Ak
where Γ and δ(k) are exactly as they were in the representative consumer economy:

                                                     λj                       
                          Γ f g = − ∑ ( θ j − 1)        CovΩ( j) Ψ( g) , Ψ( f ) ,
                                          j
                                                     Λf

and
                                                    λj                      
                            δf k =   ∑ ( θ j − 1)   Λf
                                                       CovΩ( j) Ψ(k) , Ψ( f ) .
                                      j

The new term Θ is an F × F matrix whose f gth element is

                                              1
                                Θfg =
                                              Λf   ∑ (Λcf − Λ f )Φcg Λg .
                                                   c∈C

This captures how changes in the price of the factor g change the distribution of income across
consumers, and how this change in the distribution of income, in turn, affects demand for
the factor f (since different households are differently exposed, directly and indirectly, to the
different factors). If for some good l all consumers are symmetrically exposed λcl = λl , then the
changes in the distribution of income will have no effect and the final term will disappear.
    Intuitively, in the representative agent model, factor prices change in response to substitu-
tion across inputs, captured by δ(k) and Γ. In the hetereogenous agent model, relative factor
prices can also change in response to changes in the distribution of income Θ. Furthermore,
whereas due to the symmetry of Γ and δ(k) , the propagation of shocks was symmetric for the ef-
ficient, representative agent model, the addition of the non-symmetric income effects Θ breaks
symmetry. It is easy to see that if there exists a representative consumer with homothetic pref-
erences, the income distribution effect disappears.


Prices and Quantities

Given Proposition 5 characterizing the output and share propagation equations, we can easily
characterize comparative statics for how various prices, quantities, and input choices change
in response to shocks along the exact same lines as in Section 3. In fact, the corresponding
equations are exactly the same, and the only difference is that different output and share prop-
agation equations must be plugged in. We do not spell all of this out for the sake of brevity.




                                                         30
Asymmetric Propagation

As alluded to earlier, models with heterogeneous consumers have asymmetric propagation
in sales shares and in sales. This comes about from the non-homotheticities in final demand
generated via the income distribution channel. To see how this can happen, consider two goods
i and j. Suppose that λic = λi for every c, but that λcj , λ j for some c such that c’s preferences
are different from average preferences and c’s factor ownership is different from average factor
ownership. Then, the income distribution term disappears for the propagation of a shock to
j on i in equation (12), but is present for the effect of a shock to i on j, thereby generating an
asymmetry in propagation. We fully work out a concrete example to demonstrate this logic in
Appendix C.
    Equation (12) also makes clear that symmetry will return if each consumer’s share of ag-
gregate income is fixed. In this case, there exists a representative consumer with stable prefer-
ences: namely, a geometric social welfare function where the Pareto-weights are equal to each
consumer’s fixed share of aggregate income would implement the decentralized equilibrium.
Since this social welfare function is homothetic, that immediately implies that propagation
must be symmetric, since Hulten’s theorem would then tie the derivatives of the welfare func-
tion to the sales shares.


4.2   Simple Illustrative Example
To illustrate the implications of abandoning the representative agent assumption, we take the
nested-CES economy in Figure 1c considered in Section 3 and add multiple consumers. This
economy is depicted in Figure 2 and has two factors of production, two consumers, and three
goods which use the factors in different ways.


Skill-biased Technology and the Skill Premium

To make the exercise more concrete, we can think of the first factor as high-skill labor H and the
second factor as low-skill labor L. Agent 1 is high-skilled and agent 2 is low-skilled. The three
producers are services S, manufacturing M, and agriculture A. Services are relatively more
intensive in H, agriculture is relatively more intensive in L, and manufacturing uses H and L
evenly. Finally, high-skilled agents consume relatively more services and low-skilled agents
consumer relatively less services.19 Finally, for simplicity, consumption of both households is
Cobb-Douglas, but the elasticity of substitution between H and L is σ > 1 for all producers.
    Consider a positive productivity shock to high-skill labor d log A H > 0. Then, by Proposi-
tion 5, high-skill labor’s share of income solves the following fixed-point equation:
  19 These   patterns are broadly consistent with the data, see for example Jaravel (2016).




                                                          31
                                                  H                    L



                                                  S           M        A




                                                 C1                   C2

Figure 2: The solid arrows represent the flow of goods. The dashed arrows represent the flow
of wages to households.




                                                        ( σ − 1)
  d Λ H = (σ − 1) ∑ λi ωiH ωiL d log A H −
                                                        ΛL ΛH ∑
                                                                   λi ωiH ωiL d Λ H + ∑ ωiH (b1i − b2i ) d Λ H ,
                    i                                            i                    i
                                                                                                            (14)
where i indexes A, M, and S.
   The overall change in equilibrium is the fixed point of the system depicted graphically in
Figure 3, which it is tempting to call a “Quesnaysian” cross and to associate with a “Ques-
naysian” multiplier given by the denominator of the solution

                                               (σ − 1) ∑i λi ωiH ωiL d log A H
                        d ΛH =               ( σ −1)
                                                                                             .
                                     1+      ΛL ΛH     ∑i λi ωiH ωiL + ∑i ωiH (b1i − b2i )

    The first term on the right-hand side of (14), the positive intercept, is the effect of substitu-
tion towards H and away from L holding fixed the factor prices. This is the partial equilibrium
effect. In equilibrium, as producers substitute towards H, the price of H rises relative to L, and
general equilibrium forces attenuate the amount of substitution. This effect is the second term,
which is negative. However, the increase in high-skilled labor’s share of income redistributes
income towards high-skilled agents, who’s consumption is more H intensive. This final “in-
come distribution” effect, which is also a general equilibrium force, is positive and acts in the
opposite direction because skilled labor exposure and bias in consumption are positively asso-
ciated. The first two terms are present both in representative agent and heterogeneous agent
models, but the third term appears only in the latter.
    To see the effects of the shock to high-skill labor on the skill premium, we use d log Λ L =
−(Λ H )/(Λ L ) d log Λ H to get
                                        
                                    wH                                       1
                        d log                = d log Λ H − d log Λ L =          d log Λ H .
                                    wL                                       ΛL


                                                             32
                    d ΛH                                             45◦




                                                                Distribution + Substitution




(σ − 1) (∑i∈ N λi ωiH ωiL )


                                                                      Substitution




                                                                           d ΛH
                       O

                                                                              ( σ −1)
Figure 3: The “Quesnaysian Cross”: the substitution line has slope            ΛL ΛH     ∑i λi ωiH ωiL ; and the
                                             ( σ −1)
distribution + substitution line has slope   ΛL ΛH     ∑i λi ωiH ωiL + ∑i ωiH (b1i − b2i ).


Whether general equilibrium forces amplify or attenuate the partial equilibrium effect depends
on whether the line in Figure 3 is upward sloping or not. In the representative agent model,
general equilibrium always attenuates the partial equilibrium effect. However, with more con-
sumers, if the income-distribution effect is strong enough, then general equilibrium can amplify
the impact of the shock on the skill premium.
   In Section 6.2, we connect the Quesnaysian cross to the Keynesian cross, and use it to an-
alyze the dependence of fiscal multipliers on the composition of government spending, in a
dynamic setting with a production network and heterogeneous agents.


5    Elastic Factor Supplies
In this section, we characterize how shocks propagate in economies with elastic factor supplies.
For simplicity, we focus on the special case with a representative agent and no distortions. The
more general case is treated in the appendix.
    To model elastic factor supplies, we focus for simplicity on the case where cross-factor-price
elasticies of factor supplies are zero. The general case can be derived along the same lines. We
can therefore write the supply of factor f as L f = G f (w f , Y ), where w f is the price of the factor
and Y is aggregate output.
    Let ζ f = ∂ log G f /∂ log w f be the elasticity of the supply of factor f to its real wage, and
γ f = −∂ log G f /∂ log Y be its income elasticity. The setup of Section 3 can be obtained as the

                                                   33
special case where γ f = ζ f = 0 for all f .
    Our derivations apply whenever factor supplies can be modeled with such factor supply
functions, whether or not they arise from the maximization of utility functions. This general-
ization will prove useful when we apply the model to a setup with labor and capital to derive
comparative statics on the steady-state of a Ramsey model.


5.1    Comparative Statics
In this section, we characterize the elasticities to the different productivities of aggregate out-
put, shares, sales, prices, and quantities.


Aggregate Output and Shares.

Hulten’s theorem fails with elastic factor supplies and this complicates the analysis. The fol-
lowing proposition, taken from Baqaee and Farhi (2017b), provides a joint characterization of
the elasticities of aggregate output and factor shares to the different productivity shocks.

Proposition 6. (Aggregate Output and Shares with Elastic Factors) In economies with elastic factor
supplies, the elasticities of aggregate output and and factor shares to the different productivities are given
by the solution of the following system of equations
                                                   "                           #
                                       d log Y               1       d log Λ g
                                                = $ λk − ∑        Λg             ,                       (15)
                                       d log Ak          g 1 + ζg    d log Ak



  d log Λ f                       λj
  d log Ak
            =      ∑(θ j − 1) Λ f CovΩ(j) (Ψ(k) , Ψ( f ) )
                       j
                             λj                     1 d log Λ g              γg − ζ g d log Y
           − ∑ ( θ j − 1)       CovΩ( j) (∑ Ψ( g)                  + ∑ Ψ( g)                  , Ψ ), (16)
               j
                             Λf           g       1 + ζ g d log Ak   g       1 + ζ g d log Ak ( f )

                           1+ γ
where $ ≡ 1/(∑ f Λ f 1+ζ f ). The elasticities of the shares of the other producers to the different produc-
                         f
tivities are given by

  d log λi                        λj
  d log Ak
           =       ∑(θ j − 1) λi CovΩ(j) (∑ Ψ(k) , Ψ(i) )
                    j                           k
                              λj                     1 d log Λ g              γg − ζ g d log Y
            − ∑ ( θ j − 1)       CovΩ( j) (∑ Ψ( g)                  + ∑ Ψ( g)                  , Ψ ). (17)
                   j
                              λi           g       1 + ζ g d log Ak   g       1 + ζ g d log Ak (i)

   In this case, the share propagation equations need to be solved jointly with the aggregation
equation for aggregate output. The share propagation matrix and the share impulse matrix

                                                             34
must be adjusted accordingly.
    With only one factor, which we denote by L, the results take a simpler form. We then
get d log Y/ d log Ak = $λk with $ = (1 + ζ L )/(1 + γL ). The parameter $ encodes the rela-
tive strength of the income and substitution effects on factor supply d log L = ζ L d log w −
γL d log Y associated with a productivity shock d log Ak > 0: on the one hand, the shock in-
creases output and so reduces factor supply via an income effect, the strength of which depends
on γL ; on the other hand, it increases the real wage of this factor and so increases factor supply
via a substitution effect, the strength of which depends on ζ L . Only in the special case where
the balanced-growth condition is verified so that ζ L = γL and $ = 1 do we recover Hulten’s
theorem d log Y/ d log Ak = λk .
    When there are several factors, then we need not only to average these effects over fac-
tors but also to keep track of changes in relative factor prices, and the changes in relative fac-
tor prices in turn depend on each other and on changes in output. We will show below that
the quantities (1 + ζ g )−1 d log Λ g / d log Ak + (γg − ζ g )(1 + ζ g )−1 d log Y/ d log Ak are simply
equal to d log w g / d log Ak − d log Y/ d log Ak and therefore encode relative changes in prices
across factors, exactly as in the case with inelastic factor supply examined in Proposition 3. This
is why we need to jointly solve for aggregate output elasticities and factor share elasticities to
the different productivity shocks in equations (15) and (16). These elasticities are also needed to
compute the elasticities to the different productivities of the shares of the producers in equation
(17). We only recover Hulten’s theorem when ζ g = γg is independent of g.


Prices

We now characterize the elasticities of prices to the different productivities.

Proposition 7. (Prices) The elasticities of the prices of the different producers to the different produc-
tivities are given by
                         d log w f        1 d log Λ f        1 + γ f d log Y
                                    =                     +                   ,                       (18)
                         d log Ak      1 + ζ f d log Ak      1 + ζ f d log Ak
                                 d log pi                d log w g
                                          = −Ψik + ∑ Ψig           ,                                 (19)
                                 d log Ak          g     d log Ak

where d log Y/ d log Ak and d log Λ f / d log Ak are given in Proposition 3.

    The only difference with the case with inelastic factors covered in Proposition 4 is in equa-
tion (18) which describes the general equilibrium elasticity of the price of factor f to the produc-
tivity of producer k. The mapping of the elasticities of the factor share d log Λ f / d log Ak and
of aggregate output d log Y/ d log Ak to these elasticities now involves the substitution and in-
come elasticities ζ f and γ f , which are necessary to decompose the elasticity of the factor share



                                                   35
into the elasticity of the factor price d log w f / d log Ak and the elasticity of the factor quantity
d log L f / d log Ak . The latter will be characterized below.


Sales, and Quantities

Armed with Propositions 6 and 7, we can characterize the elasticities of the sales and output
quantities of the different producers to the different productivities, along the same lines as in
Corollary 1. In fact, equations (8) and (9) in Corollary 1 still apply. The only difference is that
now d log λi / d log Ak , d log Y/ d log Ak , and d log pi / d log Ak must be taken from Proposi-
tions 6 and 7 instead of Propositions 3 and 4.


Input Shares, Input Expenditures, and Input Quantities

Using Propositions 6 and 7, it is easy to derive the elasticities of input shares, expenditures and
quantities of the different producers to the different productivities. As in the case of inelastic
factor supplies, these results can actually easily be derived by relabeling the network to treat
the sales of good l to producer i as going through a new fictitious producer specific to i and l.
The results can be found in the appendix.


Asymmetric Propagation

With elastic factors, propagation is still symmetric in sales as long factor supplies satisfy bal-
anced growth with γ f = ζ f for all f . We actually saw earlier that this result applies more
generally to balanced-growth preferences, even if factor supplies are not separable.
    Below, we provide a simple example of asymmetric propagation with elastic factor supply
in the context of our example on structural transformation and capital deepening with fully
elastic capital and inelastic labor, a configuration of factor supplies which does not satisfy bal-
anced growth. Asymmetric propagation between producers i and j obtains if the two producers
do not have the same capital intensity.


5.2   Simple Illustrative Examples
In this section, we provide some simple examples to illustrate our formulas with elastic factors.


Example: Vertical Economy with Elastic Labor

We start with the case of a horizontal economy with a single factor, which we call labor. Let
L = GL (w L , Y ) be labor supply, where w L is the wage and Y is aggregate output. Let ζ L =
∂ log GL /∂ log w L be the elasticity of labor supply to its real wage, and γL = −∂ log GL /∂ log Y
be its income elasticity, and define $ = (1 + ζ L )/(1 + γL ).


                                                 36
   In the vertical economy with elastic labor, we have

                                             d log Y
                                                      = $,
                                             d log Ak
                                   d log λi               d log Λ L
                                            = 0,                    = 0,
                                   d log Ak               d log Ak
                                d log pi                    d log w L
                                         = 1{ i > k } ,               = 1,
                                d log Ak                    d log Ak
                                 d log pi yi              d log w L L
                                             = $,                     = $,
                                 d log Ak                  d log Ak
                        d log yi                                d log L
                                 = 1{ i < k } + ( $ − 1 ),               = $ − 1.
                        d log Ak                                d log Ak
    When labor supply is inelastic so that ζ L = γL = 0, we get $ = 1 and we recover the
formulas in Section 3.3. These formulas also apply more generally when preferences satisfy the
balanced-growth condition ζ L = γL = 1, which also implies $ = 1, since then labor supply is
invariant to productivity shocks.
    When $ > 1, labor supply d log L = ($ − 1) d log Ak increases in response to a productiv-
ity shock d log Ak > 0 since the substitution effect outweighs the income effect. Compared to
the case with inelastic labor supply, this increase in labor supply contributes to increasing la-
bor employment, output, sales, and wage payments in all sectors proportionally. Elastic factor
supply therefore represents a new force for positive comovement, which is different from the
other two forces that we have already identified, namely intermediate inputs and complemen-
tarities. Unlike the other two forces, it can generate positive comovement not only in output
and sales, but also in labor.


Example: Horizontal Economy with Elastic Labor

We continue with the case of a horizontal economy with a single factor called labor. We define
GL , ζ L , γL and $ exactly as in the vertical economy example above.
    In the horizontal economy with elastic labor, we have

                                           d log Y
                                                    = $λk ,
                                           d log Ak

                         d log λi                                 d log Λ L
                                  = (θ − 1)(δik − λk ),                     = 0,
                         d log Ak                                 d log Ak
                            d log pi                           d log w L
                                     = −(δik − λk ),                     = λk ,
                            d log Ak                           d log Ak



                                                    37
                    d log pi yi                                                   d log w L L
                                = $λk + (θ − 1)(δik − λk ),                                   = $λk ,
                    d log Ak                                                       d log Ak
                          d log yi
                                   = δik + (θ − 1)(δik − λk ) + ($ − 1)λk ,
                          d log Ak
               d log L                          d log Li
                        = ( $ − 1) λ k ,                 = (θ − 1)(δik − λk ) + ($ − 1)λk ,
               d log Ak                         d log Ak
    The comments that we made about the vertical economy also apply here. When labor sup-
ply is inelastic so that ζ L = γL = 0, we get $ = 1 and we recover the formulas in Section 3.3.
These formulas also apply more generally when preferences satisfy the balanced-growth condi-
tion ζ L = γL = 1, which also implies $ = 1, since then labor supply is invariant to productivity
shocks. When $ > 1, labor supply d log L = ($ − 1)λk d log Ak increases in response to a pro-
ductivity shock d log Ak > 0 since the substitution effect outweighs the income effect, which
increases labor, employment, output, sales, and wage payments in all sectors proportionally.
Elastic factor supply contributes to positive comovement, not only in output and sales, but also
in labor.


Example: Structural Transformation and Capital Deepening

We can also use our formulae to think about the long-run steady-state of a Ramsey model
with two factors: capital and labor. Suppose capital is perfectly elastically supplied at some
price wK = rK reflecting its user cost. The other factor is labor and is fully inelastic at some
quantity L. We can use this model to capture some of the insights in the literature on structural
transformation.
   Each producer produces from capital and labor according to a CES production function

                                                                                                  θKL
                                                      θKL −1                      θKL −1
                                                                                            
                                                                                               θKL −1
                       yi   A                  Li       θKL                 Ki       θKL
                           = i ωiL                             + ωiK                                    ,
                       ȳi  Āi                L̄i                          K̄i

with ωiK + ωiL = 1. At the initial allocation, the labor and capital shares of producer i are
given by ωiL and ωiK , the aggregate labor and capital shares are given by Λ L = ∑i λi ωiL and
ΛK = ∑i λi ωiK , and in addition we have $ = 1/Λ L .
   In Appendix D, we fully characterize the patterns of comovement in this model by apply-
ing Proposition 6. Here we only use the general version of the model to emphasize how this
example can generate asymmetric propagation. We have

                         d λi                               λi λ j
                                 = −(θ − 1)λi λ j + (θ − 1)        (ωiK − ΛK ),
                       d log A j                            ΛL

Assuming θ , 1, this implies that d λi / d log A j , d λ j / d log Ai as long as ωiK , ω jK so that,

                                                              38
we get asymmetric propagation if and only if i and j do not have the same capital intensity.
    We now make the analysis more concrete. We take inspiration from Acemoglu and Guerri-
eri (2008), and specialize the model to Cobb-Douglas production functions within sectors with
θKL = 1, and complementarities in consumption with θ < 1. We consider an aggregate produc-
tivity Hicks-neutral productivity shock with d log Ak = d log A for all k. We find

                                d log Λ L            Varλ (ω( L) )
                                          = −(θ − 1)               ,
                                d log A                 Λ2L

                                d log λi          1
                                         = (θ − 1) (ωiK − ΛK ),
                                d log A           ΛL
and
                   d log yi              1                  1    d log Λ L
                            = 1 + (θ − 1) (ωiK − ΛK ) + ωiK    −           .
                   d log A               ΛL                 ΛL   d log A
In response to an aggregate productivity shock, sectors that are more capital intensive expand
relatively more than the rest of the economy, but their value expands relatively less because of
complementarities in consumption, so that their relative share decreases and factors are reallo-
cated to other producers—a form of cost disease à la Baumol (1967) originating in differences
in capital intensities rather than in productivities. As a result, the labor share increases and
the capital share decreases. The plausibility of these empirical patterns is documented in Ace-
moglu and Guerrieri (2008).


6     Distortions
In this section, we characterize how shocks propagate in economies with distortions. For sim-
plicity, we focus on the special case with a representative agent and inelastically supplied fac-
tors. The more general case is treated in the appendix.
    We allow for an arbitrary set of wedges modeled (without loss of generality) as markups.
These wedges do not dissipate resources but result instead in the misallocation of resources.
They could arise from distortions in factor or intermediate input markets, credit constraints, as
well as markups. We start with the special case where factors are inelastically supplied, and
then generalize to the case with elastic factors. We end the section by looking at some examples.
As before, we stick to a representative agent model for clarity.


6.1   Comparative Statics
In this section, we derive the counterparts of the results in Sections 3 for inefficient economies.




                                                39
Aggregate Output and Shares

In Section 5, we showed that Hulten’s theorem fails when factors supplies are not inelastic.
Hulten’s theorem also fails when factor supplies are inelastic but when the economy is ineffi-
cient. The following proposition, taken from Baqaee and Farhi (2017b), provides a joint charac-
terization of the elasticities of aggregate output and factor shares to the different productivity
shocks.

Proposition 8. (Aggregate Output and Shares in Inefficient Economies) In inefficient economies with
markups/wedges, the elasticities of aggregate output to the different productivities are given by

                                    d log Y                 d log Λ g
                                             = λ̃k − ∑ Λ̃ g           ,                                   (20)
                                    d log Ak         g      d log Ak

where the elasticities of the factor shares to the different productivities are given by the solution of the
following system of equations

                                            µ− 1                                                  !
               d log Λ f                     j λj                                d log Λ g
               d log Ak
                         =   ∑ ( θ j − 1)    Λf
                                                    CovΩ̃( j)   Ψ̃(k) − ∑ Ψ̃( g)           ,Ψ
                                                                                 d log Ak ( f )
                                                                                                      .   (21)
                              j                                         g


The elasticities of the shares of the other producers to the different productivities are given by

                                            µ− 1                                                !
               d log λi                      j λj                                d log Λ g
               d log Ak
                        =    ∑ ( θ j − 1)    λi
                                                    CovΩ̃( j)   Ψ̃(k) − ∑ Ψ̃( g)           ,Ψ
                                                                                 d log Ak (i)
                                                                                                      .   (22)
                              j                                         g


    The intuition for the difference between these results and those that arise in efficient economies
derived in Proposition 3 is as follows. In Baqaee and Farhi (2017b), we show that the effects
of productivity shocks on output can be decomposed into pure changes in technology and
changes in allocative efficiency, and that this decomposition corresponds to the two terms on
the right-hand side of the output aggregation equation (20).
    In efficient economies, λ̃k = λk , Λ̃ g = Λ g , and so ∑ g Λ̃ g d log Λ g / d log Ak = 0: changes
in technology are captured by revenue-based Domar weights and changes in allocative effi-
ciency are zero so that we recover Hulten’s theorem as stated in equation (1). In inefficient
economies with markups/wedges, allocative efficiency improves when the weighted aver-
age of changes in factor shares decreases. It can only happen if resources are re-allocated to
parts of the economies that are more distorted downwards because of higher downstream
markups/wedges. This improves allocative efficiency because these parts of the economy were
too small to begin with.
    We now turn to the share propagation equations (21) and (22). In inefficient economies,
changes in the share of i or f to a productivity shock to producer k, must now combine expo-


                                                          40
sures to k in costs as captured by Ψ̃k and exposure to i and f in revenues as captured by Ψi and
Ψ f . In efficient economies, Ψ̃k = Ψk and µ j = 1 and we recover equations (2) and (3). The share
propagation matrix and the share impulse matrix must be adjusted accordingly.


Prices

We now characterize the elasticities of prices to the different productivities.

Proposition 9. (Prices) In inefficient economies with markups/wedges, the elasticities of the sales,
prices, and output quantities of the different producers to the different productivities are given by

                                  d log w f   d log Λ f   d log Y
                                            =           +          ,                            (23)
                                  d log Ak    d log Ak    d log Ak

                                d log pi                  d log w f
                                         = −Ψ̃ik + ∑ Ψ̃ig           ,                           (24)
                                d log Ak           g      d log Ak

where d log Λ f / d log Ak and d log Y/ d log Ak are given in Proposition 8.

    The only difference with the case of efficient economies with no markups/wedges covered
in Proposition 4 is in equation (24) which describes the general equilibrium elasticities of the
prices of the different producers to the different productivities, and which now involves the
cost-based Leontief-inverse matrix instead of the revenue-based input-output matrix. This is
because in the presence of markups/wedges, it is the cost-based Leontief inverse matrix which
encodes the partial-equilibrium elasticities of the prices of the different producers to the prices
of the other producers.


Sales, and Quantities

Armed with Propositions 8 and 9, we can characterize the elasticities of the sales and output
quantities of the different producers to the different productivities, along the same lines as in
Corollary 1. In fact, equations (8) and (9) in Corollary 1 still apply. The only difference is that
now d log λi / d log Ak , d log Y/ d log Ak , and d log pi / d log Ak must be taken from Proposi-
tions 8 and 9 instead of Propositions 3 and 4.


Input Shares, Input Expenditures, and Input Quantities

Using Propositions 8 and 9, it is easy to derive the elasticities of input shares, expenditures and
quantities of the different producers to the different productivities. As above, these results can
actually easily be derived by relabeling the network to treat the sales of good l to producer i as
going through a new fictitious producer specific to i and l. They can be found in Appendix E.



                                                 41
Shocks to Markups/Wedges

In Appendix D, we give a detailed characterization of the propagation of shocks to markups
and wedges with elastic and inelastic factors. In the same appendix, we apply these formulas
to study the long-run effects of corporate-taxation in the presence of markup heterogeneity.


Asymmetric Propagation

Even with a representative agent, the propagation of shocks is asymmetric for sales shares
and for sales in inefficient economies. The reason is that wedges sever connection between
the elasticities of the output function and the sales shares. Symptoms of asymmetry can be
seen directly in Proposition 8, since the input-output covariance operator, and the factor share
propagation matrix Γ, is no longer symmetric due to the involvement of both Ψ and Ψ̃.


6.2     Simple Illustrative Examples
In this section, we illustrate these results with some examples. We work through the vertical
and horizontal economies with inelastic factor supply, where we assume that the distortions
take the form of markups. Then we work through an example with heterogeneous agents,
elastic labor supply, nominal rigidities, and borrowing constraints to analyze the dependence
of fiscal multipliers on the composition of government spending. In the appendix, we also
consider an application to the incidence of corporate income taxes in a model with markups,
elastic capital, and inelastic labor


Vertical Economy with Inelastic Labor

In the vertical economy, the formulas derived in Section 3.3 are unchanged. The difference is
that in the calculations that lead to these formula, we must take into account the difference
between cost-based and revenue-based input-output objects. For example we have λ̃k = 1 and
Λ̃ L = 1 but λk = Πik=−11 µi−1 and Λ L = ΠiN=1 µi−1 .20


Horizontal Economy with Inelastic Labor

In the horizontal economy, we have

                                    d log Y                               µ−k
                                                                               1
                                             = λ k + ( θ − 1) λ k (1 −               ),
                                    d log Ak                           ∑ j λ j µ−j
                                                                                   1


   20 Similarly,   we have Ω̃ij = δj(i+1) and Ω̃iL = δNi but Ω̃ij = µi−1 δj(i+1) and Ω̃iL = µi−1 δNi . And likewise, we
                                                                   j −1
have Ψ̃ij = δij + 1{ j<i} and Ψ̃iL = 1 but Ψij = δij + 1{ j>i} Πl =i µi−1 and ΨiL = 1{ j>i} ΠlN=i µi−1 .




                                                              42
             d log λi                             d log Λ L                      µ−k
                                                                                      1
                      = (θ − 1)(δik − λk ),                 = −(θ − 1)λk (1 −               ),
             d log Ak                             d log Ak                    ∑ j λ j µ−j
                                                                                          1


              d log pi                       d log w L                              µ−k
                                                                                         1
                       = −(δik − λk ),                 = λ k − ( θ − 1) λ k (1 −               ),
              d log Ak                       d log Ak                            ∑ j λ j µ−j
                                                                                             1




  d log pi yi                                               µ−k
                                                                 1
              = λk + (θ − 1)(δik − λk ) + (θ − 1)λk (1 −               ),
  d log Ak                                               ∑ j λ j µ−j
                                                                     1


                                                          d log w L L                              µk−1
                                                                      = λ k − ( θ − 1) λ k (1 −              ),
                                                           d log Ak                             ∑ j λ j µ−
                                                                                                         j
                                                                                                           1




  d log yi                                                µ−k
                                                               1
           = δik + (θ − 1)(δik − λk ) + (θ − 1)λk (1 −               ),
  d log Ak                                             ∑ j λ j µ−j
                                                                   1


                                                                   d log Li                  λk µ−  k
                                                                                                      1
                                                                            = (θ − 1)(δik −               ).
                                                                   d log Ak                 ∑ j λ j µ−j
                                                                                                        1



To derive these results, we must distinguish cost-based and revenue-based input-output ob-
jects. For example, we have λi = λ̃i but Λ̃ L = 1 , Λ L = (∑ j λ j µ−      1 −1
                                                                          j ) .
    Overall, the difference with the case of an efficient economy studied in Section 3.3 comes
from the terms (θ − 1)λk [1 − µ−   1             −1
                                  k / ( ∑ j λ j µ j )] which appear in various of these expressions.
To understand the intuition behind this term, consider its effect on the output aggregation
equation, in the case where producer k charges a higher markup than the (harmonic) average
of markups across producers. Suppose that producers are substitutes so that θ > 1. Then
labor is reallocated towards producer k and away from the other producers. This improves
allocative efficiency by (θ − 1)λk [1 − µ−   1             −1
                                            k / ( ∑ j λ j µ j )] d log Ak because this producer was too
small to begin with. Aggregate output increases by more than λk d log Ak . This increase in
allocative efficiency also boosts the output and the sales of all producers. However, it reduces
the labor share and the real wage because it increases the average markup. The effects are
reversed when producers are complements so that θ < 1, or when producers are substitutes
with θ > 1 but producer k charges a lower markup than average.
    Overall, the implications for comovement are subtle. Depending on whether producers are
complements or substitutes, and whether the producer experiencing the shock has a relatively
high or low markup, the effects identified in the efficient case are magnified or mitigated. Of
course, as before, it is impossible to get positive comovement in labor.
    To see asymmetric propagation in action, consider the effects of a productivity shock to
a good d log Ai or a productivity shock to the factor d log A L . Since all goods are produced


                                                     43
from labor, d λi / d log A L = 0. However, d Λ L / d log Ai = −(θ − 1)λk (1 − µi−1 /Λ L ), and so
d λi / d log A L , d Λ L / d log Ai .


Fiscal Multipliers – The Quesnaysian-Keynesian Cross

The baseline model in Section 3 is a representative agent efficient model with inelastic factors.
In Sections 4-6, we provide, one by one, extensions of the baseline model to allow for heteroge-
neous consumers, elastic factors, and distortions. In the Appendix, we describe the formulas
when all these these ingredients are present together. The example in this section is an appli-
cations of these general results, bringing together all the elements that have been emphasized
separately so far. Specifically, we investigate the “bang-for-buck” from different types of gov-
ernment spending in terms of stimulating employment. This example features heterogeneous
agents (the government, borrowers, and savers), frictions (borrowing constraints, sticky wages
and the zero lower bound), and elastic labor supply.
    We use our formulas to investigate the “bang-for-buck” from different types of govern-
ment spending in terms of stimulating employment. We show that heterogeneous agents and
input-output linkages can shape the Keynesian cross, and how the composition of government
spending can affect the fiscal multiplier through both the slope and the intercept of the Key-
nesian cross. This example builds heavily on the analysis of fiscal multipliers in production
networks by Baqaee (2015). It extends the environments in Bilbiie (2008) and Eggertsson and
Krugman (2012) as well as the analysis in Farhi and Werning (2016) to incorporate input-output
linkages.
    Suppose there are two types of households indexed by o ∈ {b, s}. These households have
differing discount factors ρo : the more patient household is the saver (s) and the less patient
one the borrower (b), with ρs > ρb . Each household maximizes

                                             ∑ ρto log(co,t ),
                                              t


where co,t = ∏k (co,t,k )bk is total private consumption. The household has budget constraint

              ∑ pt,k co,t,k + Do,t = ∑ (wit lit ) Φoi + rt Kt ΦoK + (1 + it−1 ) Do,t−1 − τt ,
               k                      i

where pt,k is the price of good k in time t, Do,t is assets, and it is the nominal interest rate. The
household receives a fraction Φoi of the labor employed in each industry wit lit and capital in-
come rt Kt in proportion ΦoK to its share of factor ownership. Finally, the household faces lump
sum taxes τt . In addition, there is a time-varying borrowing constraint Do,t ≥ Dt , which we
assume binds always for borrowers and never for savers. This binding borrowing constraint
can be captured in our framework via intertemporal wedges for the borrower.


                                                    44
   The firms are competitive and rent capital and labor on spot markets from the household
and re-optimize every period. Therefore, their problems are static.

                               max            pit yit − ∑ p jt xijt − wt lit − rt k it ,
                             yit ,lit ,xijt              j


such that
                                              yit = (lit )αi k iti ∏ xijt .
                                                                  η       ωij


   The government faces the budget constraint

                                Bt = (1 + it−1 ) Bt−1 + ∑ pt,k gt,k − τt ,
                                                                      k

where τt is income from lump sum taxation. Denote the total size of government outlays in
period t by Gt = ∑k pt,k gt,k . We let δi be the share of government expenditures pt,i gt,i /Gt on
good i. We assume that there is no government spending, and constant taxes from period 2
onwards.
   Prices are flexible and the market for the goods and services clears:

                           pt,k yt,k = pt,k ( gt,k + cbt,k + cst,k ) + ∑ pt,k xt,j,k .
                                                                                j


The rental rate of capital is also flexible and so capital, which is perfectly inelastically supplied,
is always fully employed. In period 1, wages are perfectly sticky and households supply labor
elastically at this nominal wage. From period 2 onwards, the labor market clears, and the labor
supply function is perfectly inelastic at a level given by the endowment of labor.
    We consider situation where the borrowing constraint is tighter in period 1 than in future
periods, so much so that the natural rate of the economy is negative in period 1 but positive
from period 2 onwards. In addition, we assume that the central bank does not tolerate wage
inflation. From period 2 onwards, this intolerance for inflation does not prevent the economy
from operating at full potential: the central bank simply sets the nominal interest rate at the
natural interest rate and achieves full employment and no inflation. However, it generates a
recession in period 1: the central bank sets the nominal interest rate at the zero lower bound,
there is no inflation, hence the real interest is higher than the natural interest rate and there is a
recession.
    The zero lower bound, sticky wages and the insistence on no wage inflation, can all be cap-
tured in our framework via a set of endogenous markups/wedges. These markups/wedges
are endogenous to any shock or policy hitting the economy and we can solve for this depen-




                                                             45
                                lt                                               45◦




                                                                                           lt
                               O

Figure 4: The Quesnaysian-Keynesian Cross. Both the slope and the intercept of the Keynesian
cross depend on the composition of government spending across different goods.


dence explicitly. 21 The same goes for the borrowing constraint.22
   Equilibrium labor l1 during the recession in period 1 is given by
                    "                                                   #
                        ∑
                                            g
          w1 l1 =           (λic (1 − B) + λi B)αi Φbi   + (1 − ΛcL )ΦbK w1 l1
                        i
                                                                             !
                        ∑
                                            g                                          g
                +           (λic (1 − B) + λi B)αi (1 − Φbi ) + (1 − ΦbK )       (Λ L − ΛcL ) Gt + const     (25)
                        i

where ΦbK is the share of capital and Φbi is the share of each labor type owned by the bor-
rower, λ g is the network-adjusted consumption share of each good from the perspective of the
government given by δ0 Ψ, where δ is the vector of government expenditure shares on different
goods. The term B is the size of the government spending relative to GDP given by

                              G1         G        w1 l1         G              ΛcL
                B=                     = 1                    = 1                                .
                        w1 l1 + r 1 K1  w1 l1 w1 l1 + r 1 k 1  w1 l1 1 + (ΛcL − Λ gL ) G1 /w1 l1

    In equation (25), const is a term which is independent of the composition δ of government
spending and employment w1 l1 , but does depend on the level G1 of government spending. To
streamline the exposition, and since our main focus is on the dependence of fiscal multipliers
  21 In  the particular context of this simple example, it suffices to use a consumption tax and a markup on labor
in period 1. The point, however, is more general.
   22 In the model, it can be captured via a set of increasing consumption taxes specific to the borrower.




                                                          46
on the composition of government spending for a given level of government spending, we
refrain from giving its full expression as a function of primitive parameters.23
    Equation (25) is a Keynesian cross, which can be written in closed form in levels thanks to
our Cobb-Douglas assumptions. Similar to Baqaee (2015), we can use equation (25) to under-
stand the effects of changes to the composition of government spending, given by the vector
δ, holding fixed the amount of government spending G1 . Unlike Baqaee (2015), this Keynesian
cross is nonlinear. We refer to the first term on the right side of (25) as the “slope” effect and
the second term as the intercept. Whereas traditionally, government spending only affects the
intercept term, in this example, both the intercept term, and the slope terms are affected by the
composition of government spending.
                                       g
    The intercept is increasing in (Λ L − ΛcL ) = (δ − b)0 Ψ( L) , which is the same force as em-
phasized by Baqaee (2015): Ψ( L) is the network-adjusted labor intensity of each good. If the
government spends relatively more on labor intensive goods than the private sector, then the
initial boost in demand for labor is higher.
                                                        g
    The slope of the Keynesian cross depends on λi αi (1 − Φbi ). Hence, if the government
spends in such a way that relatively more income is generated for borrowers, then this makes
the multiplier effect on employment and output larger, because borrowers have a higher marginal
propensity to consume out of current income than savers.
    The slope effect, which depends on the fraction of income going to borrowers versus savers,
depends on the size of government spending relative to GDP B . This is because differences be-
tween the pattern of spending of the government and the private sector causes changes in
the fraction of income going to borrowers versus savers. Hence, as output expands, holding
fixed government spending G1 , causes the share of government expenditures in output B to
decline. If the government spending stimulates borrower income relatively more than private
spending, then the slope effect declines in output. Since output increases as employment in-
creases, this gives rise to concavity in the Keynesian cross. This nonlinearity is stronger when
                                                                                        g
the government spending is relatively more labor intensive than private spending Λ L − ΛcL =
(δ − b)0 Ψ( L) > 0.
    The aforementioned Quesnaysian cross, in this example, would be the linearized version
of equation (25), showing the change in employment in response to a disturbance, say to the
composition of government spending. This linearized system has the same form as a Keynesian
cross, except that now, both the slope and intercept terms depend on how the government
chooses to spend its budget across different goods.
  23 The   details are in the Appendix.




                                              47
7     Industry-level Aggregation
In this section, we introduce and characterize the movements of industry-level aggregates of
productivity and markups/wedges. We introduce a new measure of industry-level TFP for
economies with distortions, and we characterize its properties, along with the properties of
the industry-level markup/wedge. We conclude with a discussion of aggregating industry-
level information back up to the level of the whole economy. Our analysis is motivated by the
proliferation of high-quality industry-level data, which whilst having a lot of detail, often lack
universal coverage and fall short of the requirements for general equilibrium aggregation à la
Baqaee and Farhi (2017b) or Baqaee and Farhi (2018).
    For our industry-level analysis, we group producers into an arbitrary partition of “indus-
tries.” We make sure that producers of non-factor goods are never in the same industry as
producers of factor goods, however, an industry might be using some of its own goods as in-
puts. We start by defining and analyzing industry-level productivity, and then move on to
industry-level markups/wedges.


7.1   Industry-level Productivity
Productivity measures how much output can be produced per unit of (appropriately weighted)
inputs. For efficient economies, output can only change either because inputs have changed or
because the production technology has changed. We can therefore measure changes in tech-
nology by constructing a Solow residual and subtracting input growth from output growth.
    This intuition breaks down in inefficient models since, for a given set of production tech-
nologies and inputs, the amount of output produced can vary due to changes in the efficiency
of the allocation. Alternative definitions of TFP have been proposed for inefficient economies,
e.g. Hall (1990), Basu and Fernald (2002), and Petrin and Levinsohn (2012). In Baqaee and
Farhi (2017b), we show that these measures all suffer from shortcomings, and we introduce a
notion of aggregate TFP growth which can be decomposed into productivity growth due to im-
provements in technology and improvements in allocative efficiency. When applied to efficient
models, the definition collapses to the usual definition offered by Solow (1957). A downside of
our approach in Baqaee and Farhi (2017b) is that we only define and decompose aggregate TFP
for the whole economy. In practice, we may want to measure the productive efficiency of a set
of producers even when that set does not constitute the whole of the economy. In this section,
we extend our approach to cover subsets of the economy.
    We show that we can compute an interpretable notion of industry TFP growth, and decom-
pose it into pure changes in technology and changes in allocative efficiency. When the economy
is efficient, we recover the standard industry-level Solow residuals and there are no changes
in allocative efficiency. When the economy is not efficient, the measure is different from the


                                               48
Solow residual, there are changes in allocative efficiency driven by shocks inside and outside
the industry, and the pure changes in technology are weighted according to some cost-based
modifications of sales shares.
   Consider some collection of producers indexed by the set I , which we call an industry.
Industry I receives some factors and intermediate inputs from outside of the industry, these
resources are distributed across producers inside the industry, potentially combined with some
goods the industry produces itself, and then resources are sent out to the rest of the economy.
   The net output of the industry is its output minus intermediate consumption of its own
inputs. Denote industry I ’s total use of good l by

                                              xI l ≡    ∑ xil .
                                                        i ∈I

Define the industry net output to be
                                             ciI ≡ yi − xI i .

Letting
                                                        pi ciI
                                          λiI ,c   ≡               ,
                                                     ∑ j∈I p j cIj
denote the net output shares of the different producers in the industry, we can define industry
I ’s net-output growth using the Divisia index

                                    d log cI ≡       ∑ λiI ,c d log ciI .
                                                     i ∈I

Note that when I is the whole economy, then d log cI corresponds to real GDP growth.
   Let e j be the jth standard basis vector. For j < I , define the revenue-based exposure of net
industry output to producer j to be
                                  0                                       p j xI j
                       ΛIj ≡ λI ,c      I − Ω I ,I −1 Ω I ,N I e j =                      ,
                                                                            ∑i∈I pi ciI

the cost-based exposure of net industry output to producer j to be
                                          0            
                              Λ̃Ij ≡ λI ,c      I − Ω̃I ,I −1 Ω̃I ,N I e j ,

and for i ∈ I , the cost-based exposure of net industry output to producer i to be
                                              0            
                                  λ̃iI = λI ,c      I − Ω̃I ,I −1 ei ,

with obvious vector, matrix, and block sub-matrix notations.


                                                       49
Proposition 10 (Industry-level Productivity Growth). Net industry output growth can be written
as
        d log cI = ∑ Λ̃Ij d log xI j + ∑ λ̃iI d log Ai − ∑ λ̃iI d log µi − ∑ Λ̃Ij d log ΛIj ,
                       j<I                       i ∈I                    i ∈I                 j<I
                       |        {z       }|               {z        }|                   {z               }
                              ∆ input              ∆ technology                 ∆ allocative efficiency

where d log ΛIj and d log xI j are characterized by the formulas in the preceding sections.

     The left-hand side is the industry net-output growth. The right-hand side is the contribution
of input growth, technology growth, and changes in allocative efficiency, respectively. We now
explain each of these terms and their interpretation.
     Intuitively, the change in the industry’s net-output depends on the inputs to the industry
xI j ( j < I), the productivity level of producers in the industry Ai (i ∈ I), and the distribution
of resources across producers in industry I , which we index by the proportion XI ij = xij /xI j
of the total use of input j by industry I coming from producer i:

                                  ∂ log cI            ∂ log cI           ∂ log cI
                    d log cI =             d log xI +          d log A +          d XI .
                                  ∂ log xI            ∂ log A              ∂XI

Proposition 10 gives us a way to decompose these various effects, since

     ∂ log cI                ∂ log cI                   ∂ log cI
                = Λ̃Ij ,              = λ̃iI ,                   d XI = − ∑ λ̃iI d log µi − ∑ Λ̃Ij d log ΛIj .
     ∂ log xI j              ∂ log Ai                     ∂XI             i ∈I              j<I


    Intuitively, following a shock, the net-output of industry I changes for two reasons: (1)
holding fixed the distribution of resources XI across all producers in industry I , the indus-
try’s net-output changes due (1a) to a change in the inputs and (1b) productivity; and (2) the
distribution of resources across producers in the industry may change.
    We think of (1a) as the input growth effect, of (1b) as the pure change in technology ef-
fect, and of (2) as the change in allocative efficiency. If the economy is efficient, it follows from
the envelope theorem that the change in allocative efficiency effect is zero. By contrast, when
the economy is inefficient, the envelope theorem fails and changes in allocative efficiency are
nonzero.
    By subtracting input growth from output growth, we arrive at a measure of industry-level
productivity growth its decomposition into changes in technology and changes in allocative
efficiency:24
   24 When   I is the whole economy, then these definitions and decompositions are identical to the definition and
decomposition of aggregate TFP in Baqaee and Farhi (2017b). When I is a single producer that does not use its
own output as an input, then there is no scope for changes in allocative efficiency, since there is only one way to
allocate a fixed amount of resources to a production function.




                                                               50
        d log cI − ∑ Λ̃Ij d log xI j =   ∑ λ̃iI d log Ai − ∑ λ̃iI d log µi − ∑ Λ̃Ij d log ΛIj .
                   j<I                   i ∈I                     i ∈I                    j<I
                                         |         {z        }|                      {z              }
                                             ∆technology                    ∆allocative efficiency

When there are markups/wedges, productivity and markups/wedges shocks inside and out-
side the industry influence allocative efficiency by changing the relative demands for the out-
puts of the different producers in the industry. It follows that industry TFP growth depends on
productivity and markup/wedges shocks inside and outside the industry.
    When there are no markups/wedges, these changes in relative demands originating from
shocks outside the industry have no impact on the TFP growth of the industry. In this case,
there are no changes in allocative efficiency, and industry TFP growth depends only on produc-
tivity shocks inside the industry. Moreover, our definition collapses to a traditional industry-
level Solow residual.


Example: Fallacy of Composition

Consider an industry where each producer produces linearly from a common input ci = Ai xi
and charges a markup µi over marginal cost. Let x = ∑i xi is the total input use of the in-
dustry and assume for simplicity that total input supply x to the industry fixed. In addition,
assume that the consumer and all the producers in the economy are exposed to producers in
this industry via a CES aggregator

                                                             θ −1 ! θ −θ 1
                                                            ci θ
                                  cI =          ∑    ω I i
                                                            ci
                                                                             ,
                                                i ∈I

with θ > 1.
    Now, suppose that a series of positive productivity shocks hits producers in industry I so
that every producer in industry I becomes more productive. In the presence of heterogeneous
markups, it is possible for the industry as a whole to become less productive.
    To see how, let d log Ai = (µI /µi )/(θ − 1) > 0. In other words, firms with higher markups
receive smaller productivity shocks. Now, using Proposition 10, we can show that as long as θ
is sufficiently large or markups are sufficiently dispersed, we have

                                       1    Varλi /λI (µi−1 |i ∈ I)
                         d log cI =       −                         < 0.
                                      θ−1    Eλi /λI (µi−1 |i ∈ I)

Of course, when the model is efficient, dispersion in markups is zero, and the industry-level
productivity must increase.
   The first term in the sum corresponds to the pure technology effect of the productivity


                                                        51
shock, while the second term corresponds to the change in allocative efficiency. Intuitively, in-
dustry I becomes less productive, despite the increase in microeconomic productivity, because
allocative efficiency can fall more quickly than technology improves.


7.2   Industry-level Markups/Wedges
We define an industry markup/wedge µI by requiring that it matches the share in aggregate
output of the profits of industry I so that λI (µI − 1)/µI = ∑i∈I λi (µi − 1)/µi . This means that
the industry markup is the sales-weighted harmonic average of the markups of the producers
in the industry
                                                         ! −1
                                                  λ i −1
                                      µI ≡ ∑         µ        ,
                                                  λ i
                                              i ∈I I

where
                                                λI ≡   ∑ λi .
                                                       i ∈I

Industry markups are endogenous objects, in a way that we can characterize.

Proposition 11. (Industry Markup/Wedge) The elasticities of the industry markup/wedge to the differ-
ent productivities and markups/wedges are given by

                                     λi µi−1                  λi µi−1
                 d log µI =   ∑      λI µ−  1
                                              d log µ i − ∑ λ −1 (d log λi − d log λI ).          (26)
                              i ∈I        I               i ∈I I µI

where d log λi is given by the formulas in are given by the formulas in the preceding sections.

    The first term on the right-hand side of equation (26) is the weighted average of the change
of the markups/wedges of the producers in the industry, which captures a partial-equilibrium
effect taking the relative sizes of the different producers as given. The second term captures the
effects of reallocations effects across producers in the industry with different markups/wedges,
which captures the endogenous equilibrium changes in the industry markup delivered by
the model. These arise from changes in productivity shocks and markups/wedges from pro-
ducers in the industry, but also from producers outside the industry. By implication, even if
markups/wedges and productivities are independent across producers, industry markups are
not independent across industries.
    Once again, inference about industry-level markups is subject to fallacies of composition,
just like industry-level productivity. It is easy to construct examples where the markups of all
producers in an industry increase and yet the industry markup decreases.
    An important message that emerges from this analysis is that aggregate markups and aggre-
gate productivity are highly endogenous objects. As a result, many patterns are possible. See


                                                     52
Burstein, Carvalho, and Grassi (2018) for an investigation of the cyclical properties of aggregate
markups in a model with an industry structure and with endogenous markups.
   Since we have characterized the comovement patterns the model generates, our results can
be used to study changes in industry-level productivity and markups while taking the endoge-
nous compositional effects into account.


7.3    Aggregating Industry-level Outcomes
We have shown how to define and characterize industry aggregates for a given partition of
producers into industries. A different question is whether theses industry aggregates are suf-
ficient statistics for the model to the first order, a property which we call first-order economic
aggregation.
    We say that first-order economic aggregation holds for a variable of interest if: given the ini-
tial industry-aggregates (input-output information at the industry level, industry markup/wedges),
changes in industry productivities and in industry markups/wedges are enough to compute
changes in output. In general, first-order economic aggregation does not hold, and industry-
level aggregates are not enough to deduce the movements in output, unless we make some
very restrictive assumptions. We discuss these issues in more detail in the appendix, and show
a special case where first-order economic aggregation does obtain: a situation where all pro-
ducers in each industry use the same production function, and all producers in each industry
enter into the production functions of other industries via a homothetic aggregator.


8     Beyond CES
The input-output covariance operator defined in equation (4) is useful in characterizing the
substitution patterns in economies where all production and utility functions are nested CES
functions. In this section, we generalize this input-output covariance operator in such a way
that allows us to work with arbitrary production functions.
                                                                                       
   For a producer j with cost function C j , let θ j ( x, y) = C j C j,xy / C j,x C j,y denote the Allen-
Uzawa elasticity of substitution between inputs x , y, noting that θ j ( x, y) = θ j (y, x ) due to
symmetry of partial derivatives.
   Then, we define the input-output substitution operator for j as

             Φ j ( Ψ(k) , Ψ(l ) ) =   ∑ Ω jx Ω jy (θ j (x, y) − 1)Ψxl Ψyk ,                          (27)
                                      x,y
                                      x,y
                                 1
                                = EΩ( j) (θ j ( x, y) − 1)(Ψk ( x ) − Ψk (y))(Ψl ( x ) − Ψl (y)) ,
                                                                                                
                                                                                                     (28)
                                 2

where Ψk ( x ) = Ψ xk .

                                                           53
   When all the Allen-Uzawa elasticities θ j ( x, y) are identical θ j ( x, y) = θ j , as happens for ex-
ample when the production function of producer j is CES with elasticity θ j , then we recover
recover the product of the input-output covariance operator CovΩ( j) (Ψ(k) , Ψ(l ) ) and of the de-
viation from one of the common elasticity of substitution θ j − 1:

                                       Φ j (Ψ(k) , Ψ(l ) ) = (θ j − 1)CovΩ( j) (Ψ(k) , Ψ(l ) ).

Even when the Allen-Uzawa elasticities θ j ( x, y) are not identical across couples ( x, y), the
input-output substitution operator shares many properties with the CES case.25 It is imme-
diate to verify, for example, that: Φ j (Ψ(k) , Ψ(l ) ) is bilinear in Ψ(k) and Ψ(l ) ; Φ j (Ψ(k) , Ψ(l ) ) is
symmetric in Ψ(k) and Ψ(l ) ; and Φ j (Ψ(k) , Ψ(l ) ) = 0 whenever Ψ(l ) or Ψ(k) is a constant.
    Intuitively, Φ j (Ψ(k) , Ψ(l ) ) captures the way in which j redirects demand (in cost shares) to-
wards l in response to one percent change in the price of j. To see this, we make use of the
following well-known result (see for example Russell, 2017): the derivative of the expenditure
share in cost of input x with respect to the price of input y is given by Ω jx Ω jy (θ j ( x, y) − 1). The
first line in equation (27) says that this requires considering, for each pair of inputs x and y, how
much the percentage change Ψyk in the price of y induced by a one percent change in the price
of k causes j to substitute towards x (in cost shares) as measured by Ω jx Ω jy (θ j ( x, y) − 1)Ψyk
and on on the exposure of x to l as measured by Ψ xl .
    Equation (28) exploits the symmetry of Allen-Uzawa elasticities of substitution to say that
this amounts to considering, for each pair of inputs x and y, whether or not increased exposure
to k as measured by Ψk ( x ) − Ψk (y), corresponds to increased exposure to l as measured by
Ψl ( x ) − Ψl (y), and whether x and y are complements or substitutes as measured by (θ j ( x, y) −
1). So, for example, if x and y are substitutes, so that θ j ( x, y) > 1, and if x is more exposed
to the shock to the price of k than y, so Ψk ( x ) − Ψk (y) > 0, then substitution by j between x
and y will result in increased demand for l if, and only if, x is also more exposed to l, given by
Ψl ( x ) − Ψl (y) > 0.
    Luckily, it turns out that all of the results stated so far can be generalized to non-CES
economies simply by replacing terms of the form (θ j − 1)CovΩ( j) (Ψ(k) , Ψ(l ) ) by Φ j (Ψ(k) , Ψ(l ) ).
   25 Thefunction Φ is related to the distance covariance function defined by Székely, Rizzo, and Bakirov (2007). A
probabilistic interpretation of Φ is given by

                                   1
              Φ j ( Ψ(k) , Ψ(l ) ) = EΩ( j) (Ψl ( x ) − Ψl (y))(Ψk ( x ) − Ψk (y))(θ j ( x, y) − 1) ,
                                                                                                    
                                   2
                                   1                                                                              
                                 =    −2CovΩ( j) (Ψ(k) , Ψ(l ) ) + θ j E j ((Ψl ( x ) − Ψl (y))(Ψk ( x ) − Ψk (y))) ,
                                   2

where θ j is the grand mean of θ j ( x, y) and E j is the expectation taken with respect to the bivariate distribution
defined by the marginal distributions Ω j ( x ), Ω j ( x ) and the copula θ j ( x, y)/θ j .




                                                                 54
So, for example, Proposition 3 becomes

                     d λi                                                     d log Λ f
                  d log Ak
                           =   ∑ Φ j (Ψ(k) , Ψ(i) ) − ∑ ∑ Φ j (Ψ(i) , Ψ( f ) ) d log Ak .
                               j =0                     f   j


    By replacing the input-output covariance operator with the input-output substitution op-
erator, we fully characterize the comovement patterns of the general economy described in
Section 1, with arbitrary, and potentially, non-homothetic production functions, arbitrary dis-
tortions, an arbitrary number of factors, and arbitrary patterns of input-output linkages. The
substitution operator can be used in a similar way to extend the results in all the other sections.


Conclusion
In this paper, we characterize the effects of microeconomic shocks on all prices and quantities in
a general equilibrium environment. Our results allow for any neoclassical production structure
and patterns of distorting wedges.
    We show that without non-homotheticities in final demand, non-balanced growth prefer-
ences, or wedges, propagation patterns in these models is constrained to have strong symme-
tries. Neglecting these features can therefore jeopardize the realism of the model in important
and surprising ways. The importance of this observation obviously depends on the question
at hand, but it underscores the importance of carefully-deliberated modeling choices in disag-
gregated approaches.
    With the aid of these propagation results, we define and characterize the properties of
industry-level aggregates. Aggregation is non-trivial, and can easily be susceptible to falla-
cies of composition whereby propositions that are true about the productivity or markup of
every single producer in an industry is false for the aggregate.
    The generality of the results also show how seemingly disparate questions like “how does
automation affect the skill premium” are, theoretically speaking, similar to questions like “how
do sectors co-move in business cycles ”, and “how do corporate taxes affect productivity,”: the
same set of tools and relationships determine their answer.


References
Acemoglu, D., U. Akcigit, and W. Kerr (2015). Networks and the macroeconomy: An empirical
 exploration. NBER Macro Conference.

Acemoglu, D., V. M. Carvalho, A. Ozdaglar, and A. Tahbaz-Salehi (2012). The network origins
 of aggregate fluctuations. Econometrica 80(5), 1977–2016.


                                                   55
Acemoglu, D. and V. Guerrieri (2008). Capital deepening and nonbalanced economic growth.
 Journal of political Economy 116(3), 467–498.

Acemoglu, D., A. Ozdaglar, and A. Tahbaz-Salehi (2017). Microeconomic origins of macroeco-
 nomic tail risks. The American Economic Review 107(1), 54–108.

Acemoglu, D. and P. Restrepo (2018). Artificial intelligence, automation and work.

Aiyagari, S. R. (1994). Uninsured idiosyncratic risk and aggregate saving. The Quarterly Journal
  of Economics 109(3), 659–684.

Altinoglu, L. (2016). The origins of aggregate fluctuations in a credit network economy.

Argente, D. and M. Lee (2017). Cost of living inequality during the great recession.

Atalay, E. (2017). How important are sectoral shocks? American Economic Journal: Macroeco-
  nomics (Forthcoming).

Baqaee, D. and E. Farhi (2018). The microfoundations of aggregate production functions. Tech-
  nical report.

Baqaee, D. R. (2015). Targeted fiscal policy.

Baqaee, D. R. (2018). Cascading failures in production networks. Econometrica (Forthcoming).

Baqaee, D. R. and E. Farhi (2017a). The macroeconomic impact of microeconomic shocks: Be-
  yond Hulten’s Theorem.

Baqaee, D. R. and E. Farhi (2017b). Productivity and Misallocation in General Equilibrium.
  NBER Working Papers 24007, National Bureau of Economic Research, Inc.

Barrot, J.-N. and J. Sauvagnat (2016). Input specificity and the propagation of idiosyncratic
  shocks in production networks. The Quarterly Journal of Economics.

Basu, S. and J. G. Fernald (2002). Aggregate productivity and aggregate technology. European
  Economic Review 46(6), 963–991.

Baumol, W. J. (1967). Macroeconomics of unbalanced growth: the anatomy of urban crisis. The
  American economic review, 415–426.

Bewley, T. (1977). The permanent income hypothesis: A theoretical formulation. Journal of
  Economic Theory 16(2), 252–292.

Bigio, S. and J. La’O (2016). Financial frictions in production networks. Technical report.



                                                56
Bilbiie, F. O. (2008). Limited asset markets participation, monetary policy and (inverted) aggre-
  gate demand logic. Journal of Economic Theory 140(1), 162–196.

Burstein, A., V. Carvalho, and B. Grassi (2018). Bottom-up markup cyclicality. Technical report.

Carvalho, V. M., M. Nirei, Y. Saito, and A. Tahbaz-Salehi (2016). Supply chain disruptions:
  Evidence from the great east japan earthquake. Technical report.

Clayton, C., X. Jaravel, and A. Schaab (2018). Heterogeneous price rigidities and monetary
  policy.

Comin, D. A., D. Lashkari, and M. Mestieri (2015). Structural change with long-run income
 and price effects. Technical report, National Bureau of Economic Research.

Cravino, J., T. Lan, and A. A. Levchenko (2018). Price stickiness along the income distribution
  and the effects of monetary policy. Technical report, National Bureau of Economic Research.

Di Giovanni, J., A. A. Levchenko, and I. Méjean (2014). Firms, destinations, and aggregate
  fluctuations. Econometrica 82(4), 1303–1340.

Eggertsson, G. B. and P. Krugman (2012). Debt, deleveraging, and the liquidity trap: A fisher-
  minsky-koo approach*. The Quarterly Journal of Economics 127(3), 1469–1513.

Farhi, E. and I. Werning (2016). Fiscal multipliers?: Liquidity traps and currency unions. In
  Handbook of Macroeconomics, Volume 2, pp. 2417–2492. Elsevier.

Foerster, A. T., P.-D. G. Sarte, and M. W. Watson (2011). Sectoral versus aggregate shocks: A
  structural factor analysis of industrial production. Journal of Political Economy 119(1), 1–38.

Gabaix, X. (2011). The granular origins of aggregate fluctuations. Econometrica 79(3), 733–772.

Grassi, B. (2017). IO in I-O: Competition and volatility in input-output networks. Technical
  report.

Hall, R. E. (1990). Growth/ Productivity/Unemployment: Essays to Celebrate Bob Solow’s Birthday,
 Chapter 5, pp. 71–112. MIT Press.

Huggett, M. (1993). The risk-free rate in heterogeneous-agent incomplete-insurance economies.
 Journal of economic Dynamics and Control 17(5-6), 953–969.

Hulten, C. R. (1973). Divisia index numbers. Econometrica: Journal of the Econometric Society,
 1017–1025.

Jaravel, X. (2016). The unequal gains from product innovations: Evidence from the us retail
  sector.

                                               57
Jones, C. I. (2011). Intermediate goods and weak links in the theory of economic development.
  American Economic Journal: Macroeconomics, 1–28.

Jones, C. I. (2013). Input-Output economics. In Advances in Economics and Econometrics: Tenth
  World Congress, Volume 2, pp. 419. Cambridge University Press.

Karabarbounis, L. and B. Neiman (2013). The global decline of the labor share. The Quarterly
  Journal of Economics 129(1), 61–103.

King, R. G., C. I. Plosser, and S. T. Rebelo (1988). Production, growth and business cycles: I. the
  basic neoclassical model. Journal of monetary Economics 21(2-3), 195–232.

Krusell, P. and A. A. Smith, Jr (1998). Income and wealth heterogeneity in the macroeconomy.
  Journal of political Economy 106(5), 867–896.

Long, J. B. and C. I. Plosser (1983). Real business cycles. The Journal of Political Economy, 39–69.

Oberfield, E. and D. Raval (2014). Micro data and macro technology. Technical report, National
 Bureau of Economic Research.

Petrin, A. and J. Levinsohn (2012). Measuring aggregate productivity growth using plant-level
  data. The RAND Journal of Economics 43(4), 705–725.

Quesnay, F. (1758). Tableau Économique.

Rognlie, M. (2016). Deciphering the fall and rise in the net capital share: accumulation or
  scarcity? Brookings papers on economic activity 2015(1), 1–69.

Russell, R. R. (2017). Elasticities of substitution. Technical report.

Samuelson, P. A. (1953). Prices of factors and good in general equilibrium. The Review of Eco-
  nomic Studies, 1–20.

Sato, R. (1977). Homothetic and non-homothetic ces production functions. The American Eco-
  nomic Review 67(4), 559–569.

Shea, J. (2002). Complementarities and comovements. Journal of Money, Credit, and Bank-
  ing 34(2), 412–433.

Solow, R. M. (1957). Technical change and the aggregate production function. The review of
  Economics and Statistics, 312–320.

Stella, A. (2015). Firm dynamics and the origins of aggregate fluctuations. Journal of Economic
  Dynamics and Control 55, 71–88.


                                                 58
Székely, G. J., M. L. Rizzo, and N. K. Bakirov (2007). Measuring and testing dependence by
  correlation of distances. The annals of statistics, 2769–2794.




                                           59
