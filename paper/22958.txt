                              NBER WORKING PAPER SERIES




                   LEARNING, CONFIDENCE, AND BUSINESS CYCLES

                                         Cosmin L. Ilut
                                          Hikaru Saijo

                                      Working Paper 22958
                              http://www.nber.org/papers/w22958


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                   December 2016




We would like to thank George-Marios Angeletos, Yan Bai, Nick Bloom, Fabrice Collard, Jesus
Fernandez-Villaverde, Tatsuro Senga, Martin Schneider, Mathieu Taschereau-Dumouchel, Carl
Walsh, as well as to seminar and conference participants at the "Ambiguity and its Implications in
Finance and Macroeconomics" Workshop, Bank of England, Canon Institute for Global Studies,
EIEF, Northwestern, NBER Summer Institute, San Francisco Fed, Stanford, UC Santa Cruz, SED
Annual Meeting, the SITE conference on Macroeconomics of Uncertainty and Volatility, and
Wharton for helpful comments. The views expressed herein are those of the authors and do not
necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2016 by Cosmin L. Ilut and Hikaru Saijo. All rights reserved. Short sections of text, not to
exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.
Learning, Confidence, and Business Cycles
Cosmin L. Ilut and Hikaru Saijo
NBER Working Paper No. 22958
December 2016
JEL No. C11,D81,E32,E44

                                          ABSTRACT

We build a tractable heterogeneous-firm business cycle model where firms face Knightian
uncertainty about their profitability and learn it through production. The cross-sectional mean of
firm-level uncertainty is high in recessions because firms invest and hire less. The higher
uncertainty reduces agents' confidence and further discourages economic activity. We
characterize this feedback mechanism in linear, workhorse macroeconomic models and find that
it endogenously generates empirically desirable cross-equation restrictions such as: amplified and
hump-shaped dynamics, co-movement driven by demand shocks and countercyclical correlated
wedges in the equilibrium conditions for labor, risk-free and risky assets. In a rich model
estimated on US macroeconomic and financial data, the information friction changes inference
and significantly reduces the empirical need for standard real and nominal rigidities. Furthermore,
endogenous idiosyncratic uncertainty propagates shocks to financial conditions, disciplined by
observed spreads, as key drivers of fluctuations, and magnifies the aggregate activity's response
to monetary and fiscal policies.


Cosmin L. Ilut
Department of Economics
Duke University
223 Social Sciences Building
Box 90097
Durham, NC 27708
and NBER
cosmin.ilut@duke.edu

Hikaru Saijo
University of California at Santa Cruz
Economics Department
401 Engineering 2 Building
1156 High Street
Santa Cruz, CA 95064
hsaijo@ucsc.edu
1       Introduction
A fundamental issue in the business cycle analysis is to model the source of frictions that matter
for the economy’s response to shocks. On the one hand, for a given set of structural shocks and
policy actions, a specific propagation mechanism provides the identification needed to evaluate the
relative importance of disturbances in explaining the observed macroeconomic data. On the other
hand, a change in the nature of shocks or in the policy actions leads to different economic outcomes
depending on the frictions that are taken to be policy-invariant.
    In this paper we argue that imperfect observability about firm’s profitability is an information
friction that has the theoretical and quantitative potential to act as a key internal propagation
mechanism in business cycle models that fit macroeconomic data well. In our model, there are
two crucial aspects of uncertainty that matter for the mechanism. First, learning occurs through
production. In particular, our environment implies that by producing at a larger scale, the firm
reduces the variability of an unobserved temporary ’firm luck’ component in its profitability and thus
gets to observe a more precise signal about its unobserved persistent ’firm quality’ component.1 The
second feature is that agents perceive uncertainty not just as risk but also as ambiguity, described
here by the recursive multiple priors preferences.2 This preference representation makes agents act
as if they evaluate plans according to a worst case scenario drawn from a set of multiple beliefs.
A wider set of beliefs corresponds to a loss of confidence in probability assessments. In particular,
we assume that when facing a larger estimation uncertainty, the agent is less confident about the
conditional mean of the underlying persistent firm quality component. The lower confidence makes
the agent behave as if the worst-case mean becomes worse.3
    The two ingredients generate a feedback loop at the firm level: lower production leads to more
estimation uncertainty, which in turn shrinks the optimal size of productive inputs. In our model, the
firm-level feedback loop linearly aggregates so that recessions are periods of a high cross-sectional
mean of firm-level uncertainty because firms on average invest and hire less. In turn, the high
average uncertainty further dampens aggregate activity. We show how this feedback turns our
heterogeneous firm model into a standard linear business cycle model with a modified equilibrium
law of motion compared to its rational expectations version.
    We characterize the equilibrium dynamics with endogenous uncertainty and find strong internal
    1
      What matters for our mechanism is the procyclical signal to noise ratio at firm level. We discuss several
modeling approaching to generate this, which produce the same dynamics at the aggregate. Our specific approach
is to consider two unobservable shocks into a firm’s production. Each unit of production is hit by a persistent firm-
specific productivity shock, which we call ’firm quality’, and by a transitory, unit-specific shock, uncorrelated with
firm quality and independently distributed over units in the economy. The firm’s total observed output is thus given
by the observed number of production units times their observed average productivity. This average equals the sum
of unobserved firm quality and of the unobserved average realization of the unit-specific shocks, which we call ’firm
luck’. It follows that this luck component is more variable the lower is the number of units produced.
    2
      The multiple priors preferences have been introduced by Gilboa and Schmeidler (1989). Epstein and Schneider
(2003b) provide axiomatic foundations for the extension to intertemporal choice.
    3
      This is simply a manifestation of precautionary behavior, which lowers the certainty equivalent of the return to
production, but, compared to risk, it allows for first-order effects of uncertainty on decisions.


                                                          1
propagation, with amplified and hump-shaped responses to shocks. In addition, the equilibrium
law of motion is characterized by the following cross-equation restrictions: (i) endogenous counter-
cyclical wedges in the labor optimality condition as well as in the pricing of a risk-free bond and
a risky asset such as capital; (ii) positive co-movement of aggregate variables in response to either
supply or demand shocks. When the model is fit to a set of observed macroeconomic and financial
data, these cross-equation restrictions provide over-identifying discipline on the mechanism.
    Propagation mechanism. The feedback between the agent’s degree of confidence and the
endogenous state of the economy results in an implied ’as if’ confidence process that sustains
the equilibrium allocation. Fluctuations in confidence lead to state-dependent wedges between
the worst-case belief and the econometrician’s data generating process (DGP). For example, in a
recession, caused either by supply or demand shocks, the lower degree of confidence widens the
belief distortion. The distortion appears in state prices and therefore in all the relevant Euler
equations. As such, the model produces correlated, countercyclical wedges. In turn, the state-
dependent distortion affects dynamics through those Euler equations. For example, in a recession,
the lower confidence decreases the uncertainty-adjusted return to labor, consumption and capital
which reduces incentives to work, consume and invest. Of particular importance for macroeconomic
aggregates is the lower perceived return to hiring, manifested as a high labor wedge, which leads
to low equilibrium hours worked even if consumption is low and the realized marginal product
of labor is on average unchanged under the econometrician’s DGP.4 By producing an endogenous
labor wedge, the model can generate co-movement between consumption, hours and investment as
a response to either supply or demand shocks.
    We analyze the mechanism of endogenous confidence by first exploring a basic RBC model that
besides imperfect information is otherwise frictionless. This provides a useful laboratory to explain
the formal and intuitive arguments on how the model is solved with linear methods as well as the
mechanisms through which uncertainty maps into correlated endogenous wedges.
    Importantly for our aggregation result, we show that when uncertainty is modeled as ambiguity
with multiple priors that differ in their mean, the law of large numbers implies that sets of beliefs
converge, but that idiosyncratic uncertainty cannot be diversified away. Such results have been
developed in decision-theoretical work on the law of large numbers under ambiguity, as in Marinacci
(1999) and Epstein and Schneider (2003a), but have not yet been used in macroeconomic models.
    More specifically, we model an otherwise typical representative agent that works, consumes the
final good, trades bonds and owns the portfolio of firms. This agent therefore has to forecast the
aggregate dividend of this portfolio. In models in which uncertainty over the firms’ dividends is
modeled only as risk, the agent is assumed to have full confidence in the probability distributions of
firms’ productivity. This results in a law of large numbers that eliminates the role of idiosyncratic
uncertainty. The only difference from the standard model is that our agent is not confident about
the distributions of firms’ individual productivity and hence profit. Faced with this ambiguity, the
  4
      See Shimer (2009) and Chari et al. (2007) for evidence and discussion of labor wedges.


                                                          2
agent evaluates choices as if mean firm productivity is low. Therefore, the representative agent
who owns a portfolio of many firms acts as if the entire portfolio has a low mean payoff. This
means that the confidence about idiosyncratic conditions does not vanish in the aggregate.
    We highlight the key parameters that control the feedback between uncertainty and economic
activity. Since uncertainty is an equilibrium object in our model, in general the whole set of struc-
tural parameters matters for this feedback. It is useful to separate these in three categories. First,
the standard production and preference parameters that control the variability of the production
inputs, such as the Frisch elasticity or capital share. The second set includes the persistence of firm-
level shocks and the steady state signal-to-noise ratio for the firm’s learning problem. For the former
we use values from the empirical literature on micro-level data, such as Kehrig (2015). The latter
parameter controls not just the average amount of estimation uncertainty, but also how variation in
the productive inputs maps into the uncertainty variation. While quantifying the learning friction
at the firm level is inherently difficult, we appeal to recent empirical work by David et al. (2015),
who estimate a firm-level signal-to-noise ratio relevant for our model. The third key parameter is the
entropy constraint, which determines not only the average ambiguity level, but also how fluctuations
in the estimation uncertainty map into fluctuations in ambiguity. To discipline this parameter, we
use a model consistency criterion developed in Ilut and Schneider (2014), according to which agents’
ambiguity should not be “too large”, in a statistical sense, compared to the variability of the data.
    We compare the behavior of the information friction model against the version where this is
absent. This comparison is controlled by only one parameter, the entropy constraint. Indeed, in the
rational expectations model the effects of firm-level learning disappear entirely due to linearization
and the law of large numbers. Our impulse response analysis highlights the key forces that the
friction brings. First, we find that endogenous uncertainty is a powerful propagation mechanism. A
positive shock that raises economic activity increases the level of confidence, which in turn further
affects economic activity, leading to an amplified and hump-shaped impulse response.
    Second, we explain how endogenous uncertainty generates countercyclical correlated wedges, a
feature that is strongly present in the data. In our model, in periods of low production, when
estimation uncertainty is larger, firms lower its demand for inputs ’excessively’, as compared to
what the econometrician measures for the equilibrium marginal product of labor or realized return
on capital. Because uncertainty has first order effects on firms’ decision rules these reduced-
form wedges linearly aggregate up. Thus, during recessions, we observe an unusually low level
of equilibrium hours, manifested as a higher labor wedge. The endogenous uncertainty also leads
to a countercyclical desire to save in risk-free assets. From the perspective of an econometrician
that measures the realized growth rate of marginal utility, the low real rates in recessions look
like countercyclical discount factor wedges.5 Finally, the increase in ambiguity also makes capital
   5
     See Christiano et al. (2005) and Smets and Wouters (2007) as examples for the large literature on estimated
DSGE models with shocks to the discount factor. In addition, the literature on the zero lower bound on nominal
interest rate, such as Eggertsson et al. (2003) and Christiano et al. (2015), argue that disturbances to the demand
for risk-free assets are key stochastic forces.


                                                        3
less attractive to hold. Investors holding an ambiguous asset are thus compensated by the higher
measured excess return.6 The countercyclical labor, discount factor and financial wedges do not
arise from separate shocks to labor supply, demand for risk-free assets and premia, or even from
exogenous confidence shocks, but instead from any underlying shock that moves the economy.
    Third, the model generates positive co-movement in response to shocks that do not move actual
labor productivity or labor supply. Consider, for example, a negative shock to the expected return
to investment, a form of what has been recently proposed in the literature as a reduced form
of a negative financial shock. This shock produces standard intertemporal and wealth effects on
consumption, which overall tends to lead to a fall in investment and hours, as well as a rise in
consumption. In standard RBC models, consumption and hours co-move positively only in the long
run after the negative productivity effect of capital accumulation kicks in. In our model, the lower
economic activity decreases average confidence. This leads to a stronger negative wealth effect,
as well as a lower perceived marginal return to labor. The negative effect can be strong enough
to make consumption fall and the labor wedge can be high enough to simultaneously lead to low
equilibrium labor. Therefore, our model can generate positive co-movement in consumption and
labor after a demand shock much quicker than the typical effects present in standard models that
arise from endogenous capital accumulation.
    Fourth, firms have an incentive to actively use their productive inputs to learn about their
profitability. We show that this experimentation incentive has a first-order effect in our setup and
we characterize its cyclical properties. We find that experimentation exerts a procyclical influence on
aggregates in the short run, turning experimentation into an amplifying factor, and a countercyclical
one in the medium term, where it dampens fluctuations.
    Quantitative results. We use the linearity of the solution method to estimate by likelihood
based methods a quantitative model with a large state space. Our estimated model includes an
aggregate TFP shock and a financial shock, analyzed for example in Christiano et al. (2015). We use
standard observables for US aggregate data: the growth rate of output, hours worked, investment
and consumption, as well as inflation and nominal interest rate. In addition, we use the Baa
corporate spread as an observable proxy for the financial shock.
    The estimated model provides evidence that endogenous confidence significantly changes the
inference on the role of rigidities and shocks driving fluctuations. In terms of rigidities, learning
reduces the need of additional frictions for fitting the data. In particular, compared to the rational
expectations (RE) version, the habit formation parameter is lowered by 40%, the investment
adjustment cost becomes negligible, the average Calvo adjustment period of prices falls from 9
to 2 quarters, and for wages from 6 quarters to 1 quarter. The reason for these smaller estimated
frictions is that the learning mechanism provides strong internal propagation and induces by itself
positive co-movement in response to the financial shock.
    In terms of model comparison, the model with endogenous uncertainty fits the data significantly
  6
      For a review of the evidence on countercyclical excess returns see Cochrane (2011).


                                                          4
better. The reason is twofold. First, as described above, learning emerges as a parsimonious
friction, as opposed to the array of other rigidities. Second, in the RE version the observed spread
generates a counterfactual negative co-movement between observed macroeconomic variables. The
information friction changes significantly the propagation mechanism to the point that the observed
countercyclical spread is now consistent with co-movement and thus the estimation prefers observed
contractionary financial shocks during recessions. At the same time, in our model agents lose
confidence during recessions, which further contributes to the countercyclicality of the spread
endogenously and therefore improves the model fit.
    Our quantitative results point to an important takeaway on the role of financial shocks. On the
one hand, part of the observed spread is explained by the endogenous model-implied component
and therefore there is less empirical need for finding financial shocks. On the other hand, the
propagation mechanism produced by our information friction makes the estimated shocks, whose
time-series properties are disciplined by the observable proxy, have large and empirically plausible
effects on the observed macroeconomic aggregates.
    Finally, while the feedback between activity and uncertainty puts strong discipline on the
estimated confidence process, we further test the model implied path for ambiguity against an
observable that has not been used for the estimation. In particular, in our model the lack of
confidence about the probability distribution of firm’s profitability is reflected in a set of conditional
mean forecasts about each firm’s return on capital. We use a recent time-series dataset on survey
forecasts by financial analysts built by Senga (2015) that refers to the cross-sectional average
dispersion of conditional mean forecasts about firm-level returns. We find that the time-series
path for the model-implied dispersion matches the empirical counterpart very well.
    Relation to literature. We relate to a recent literature on confidence shocks. Indeed, once
our equilibrium ’as if’ confidence process is taken as given, the economic mechanisms by which
confidence impacts decisions through Euler equation wedges are therefore common to models with
exogenous confidence shocks. In this context, Ilut and Schneider (2014) allow for time-variation in
confidence about aggregate conditions that arises from exogenous ambiguity, while Angeletos and
La’O (2009, 2013) and Angeletos et al. (2014) study confidence shocks in the form of correlated
higher order beliefs in models of dispersed information. This work has analyzed the impact of
belief shocks on Euler equations and the quantitative appeal of such confidence shocks in fitting
macroeconomic dynamics. In particular, Angeletos et al. (2014) describe desirable properties of
these beliefs shocks, such as the focus on short-run rather than long-run activity, and their empirical
success. Through these lenses, the ’as if’ confidence interpretation of our model helps explain why
the information friction model fits the data well. Indeed, the friction provides the endogenous
mechanism to map the observed financial shocks into countercyclical movements in confidence
about short-run activity, which in turn, at their equilibrium path, affects macroeconomic dynamics
through empirically desirable countercyclical wedges.
    By connecting to the existing literature on exogenous confidence shocks, our approach is


                                                    5
complementary, as it provides a propagation mechanism for how these processes can arise. As
a consequence, we put significant discipline on the nature and size of the confidence shocks. In
particular, the parameters that matter for confidence have specific interpretation since we provide a
micro-founded model. In addition, the information friction ties, through the endogenous equilibrium
law of motion, the ’as if’ confidence process to the observed macroeconomic and financial data. For
policy purposes, the micro-foundation also makes clear that the ’as if’ confidence process cannot be
taken as policy-invariant since it depends on the whole equilibrium path of actions.
    Our paper is also related to a rapidly growing literature on time-varying uncertainty. There
are models that generate recessions through exogenous increases in the volatility of firm-level or
aggregate productivity.7 Compared to that literature, we do not rely on additional real or nominal
rigidities to generate contractionary effects of higher uncertainty and positive co-movement. The
reason is that in our model the level of input (such as labor) is chosen under imperfect information,
and thus under uncertainty, about the underlying productivity process. This leads in our model to
a countercyclical labor wedge, an issue that we take on below. In addition, in line with the ’as if’
confidence argument above, in our economy changes in perceived uncertainty are endogenous and
hence affect the propagation of any aggregate shocks, including exogenous volatility or confidence
shocks, as well as outcomes of policy experiments.
    An important outcome of our proposed mechanism is the endogenous labor wedge. It is useful
to observe that in a traditional model labor supply is chosen based on the same information set
as consumption and the return to working is perfectly observed when the labor demand is made.
For belief distortions or time-varying uncertainty to matter, the literature has deviated from that
environment by typically allowing for a labor choice made under uncertainty about its return.
Angeletos and La’O (2009, 2013) describe the key income and substitution forces through which
confidence shocks show up as labor wedges in a model where hiring occurs under such uncertainty.
Angeletos et al. (2014) further emphasize the critical role of beliefs being about the short-run rather
than the long-run activity in producing stronger substitution effects.
    In the literature, this ’labor in advance’ timing is typically assumed as part of a technological
friction,8 or it arises as a manifestation of an information friction. The latter category includes
models where the individual firm needs to forecast the actions of others, such as in models of
dispersed information referenced above, or in models where firms learn from an endogenously
determined action, such as production in our model and a learning literature described below.
Indeed, in our context, the information set used to learn about exogenous fundamentals conditions
   7
     For idiosyncratic volatility see for example Bloom (2009), Arellano et al. (2012), Bachmann and Bayer (2013)
and Christiano et al. (2014). For aggregate volatility see for example Fernández-Villaverde et al. (2011); Fernández-
Villaverde et al. (2015), Basu and Bundick (2012), Born and Pfeifer (2014) and Bianchi et al. (2014).
   8
     This timing assumption is typically made in models with some financial friction, where labor is assumed to be
chosen before a cash flow shock is realized. In those models, a higher uncertainty, either exogenous (as in Arellano
et al. (2012)) or endogenous (as in Gourio (2014), Straub and Ulbricht (2016)), about that cash flow realization, may
lead to a labor wedge. Kozlowski et al. (2015) obtain a labor wedge instead from persistent belief distortions that
arise from non-parametric learning about the distribution of shocks.



                                                          6
on optimally chosen actions, including labor. We therefore naturally obtain a lack of synchronization
of labor and spending choices, a feature that Angeletos et al. (2014) discuss as key for allowing
confidence movements to manifest as labor wedges.
    The low scale - high uncertainty feedback characteristic of our model is present in different
forms in a literature on learning. The typical approaches, as in Caplin and Leahy (1993), van
Nieuwerburgh and Veldkamp (2006), Ordoñez (2013) and Fajgelbaum et al. (2016), have two main
common features: (i) the feedback matters through non-linear dynamics and (ii) uncertainty is
about aggregate conditions.9 Here we show that expanding the notion of uncertainty to ambiguity
allows studying an endogenous uncertainty mechanism in models with: (i) tractable linear dynamics
and (ii) uncertainty about idiosyncratic conditions.
    Our approach advances the modeling of information frictions in business cycle models in two
major ways, which connect back to our fundamental motivation of building micro-founded structural
models that are useful for policy interventions. The first is quantitative: why and by how much
does the friction matter empirically? Working with tractable linear dynamics allows the information
friction to be embedded in quantitative macroeconomic models that use standard solution and
estimation methods. This leads to a transparent characterization of the mechanism through which
endogenous uncertainty matters for key business cycle patterns, such as the delayed and persistent
response to shocks and the ’as if’ countercyclical wedges.
    Importantly, we are able to evaluate its quantitative effect by empirically fitting a standard set
of macroeconomic variables even within models that include widely-used alternative frictions, such
as nominal or real rigidities. To generate persistent and hump-shaped dynamics, arbitrary frictions
such as consumption habit and investment adjustment costs are often added to the standard models.
Sticky prices and wages are also usually important because they generate additional persistence and
help break the Barro and King (1984) critique to make other types of shocks, besides productivity
or intratemporal labor supply shocks, generate positive co-movements of macro aggregates.10 In our
estimated model, we find that endogenous uncertainty generates a rich set of empirically desirable
cross-equation restrictions that reduce significantly the need for such additional rigidities. At the
same time, these restrictions affect the identification of the relevant disturbances. In particular,
endogenous uncertainty changes the propagation mechanism to the point that financial shocks,
disciplined by observed asset prices in our estimated model, can generate a positive co-movement
in macroeconomic aggregates and thus become a significant driver of business cycle dynamics.
   9
      The reasons why uncertainty matters in that literature differ, including the representative agent’s risk aversion,
financial frictions or irreversible investment costs. As with confidence shocks in linear models, a countercyclical
labor wedge arises in these non-linear models if the substitution effect from a lower risk-adjusted return to working
overcomes the income effect. Evaluating those wedges has not been typically the object of those models.
   10
      Recent line of attacks to break Barro and King (1984) critique include: strategic complementary in a model
with dispersed information (Angeletos and La’O (2013), Angeletos et al. (2014)), heterogeneity in labor supply and
consumption across employed and non-employed (Eusepi and Preston (2015)), variable capacity utilization together
with a large preference complementarity between consumption and hours (Jaimovich and Rebelo (2009)), and the
large literature on countercyclical markups through nominal rigidities.



                                                           7
    The second, and related, question is that of policy interventions: how does policy affect the
economy differently in the information friction model? On the one hand, the source of uncertainty,
whether it is about firm-level or aggregate conditions, matters for policy recommendations. In our
model, linearity allows for an easy aggregation of decision rules and therefore for a tractable modeling
of uncertainty about firm-level shocks. This not only extends the plausible sources of imperfect
information to firm-level volatilities, which are empirically larger than aggregate fluctuations, but
also means that the competitive equilibrium is constrained Pareto optimal.11 Thus, differently
from learning about aggregate conditions, in this world there are no information externalities since
learning occurs at the individual firm level and not from observing the aggregate economy.12
    On the other hand, the endogeneity of uncertainty matters because it transmits policy changes
differently compared to an exogeneity benchmark. We show that in our estimated model a policy
change where the Taylor rule responds to the financial spread would significantly lower output
variability only because it stabilizes the endogenous variation in uncertainty.13 For fiscal policy we
find a significantly larger government spending multiplier because of the effect on confidence.
    The paper is structured as follows. In Section 2 we introduce our heterogeneous-firm model and
discuss the solution method. We describe the endogenous countercyclical wedges and illustrate its
dynamic properties through impulse response analysis in Section 3. In Section 4 we add additional
rigidities to estimate a model on US aggregate data.


2        The model
Our baseline model is a real business cycle model in which, as in the standard framework, firms
are owned by the household and maximize shareholder value. We augment the standard framework
with two key features: the infinitely-lived representative household is ambiguity averse and that
ambiguity is about the firm-level profitability processes.


2.1       Technology
There is a continuum of firms, indexed by l ∈ [0, 1], which act in a perfectly competitive manner.
They use capital Kl,t−1 and hire labor Hl,t to produce Yel,t units of good l by a production function

                                                        α      1−α
                                               Yel,t = Kl,t−1 Hl,t                                           (2.1)

       A firm that produces good l consists of production units, indexed by j. These units are defined
  11
     Our approach can incorporate learning not only about idiosyncratic but also aggregate conditions, and as such,
our results can be viewed as a lower bound on the overall business cycle effects of endogenous uncertainty.
  12
     For example, the increased economic activity, and the associated average reduction in uncertainty, produced by
a government spending increase can not be welfare increasing in our model.
  13
     Such a policy was proposed by Taylor (2008), among others. Cúrdia and Woodford (2010) and Christiano et al.
(2010) study the effects of similar policies using standard DSGE models.


                                                        8
such that combining capital Kj,l,t−1 and labor Hj,l,t results in one unit of good l. The firm obtains
more production by operating more such units. Each unit produces a stochastic quality adjusted
output, which is driven by three components: an aggregate shock, a firm-specific shock and an
idiosyncratic shock. In particular, this output equals

                                                   At (zl,t + ν̃l,j,t ) ,                                        (2.2)

where At is an aggregate technology shock that follows

                                ln At = ρA ln At−1 + A,t ,            A,t ∼ N (0, σA2 ),                       (2.3)

zl,t is a firm-specific technology shock that follows14

                           zl,t = (1 − ρz )z̄ + ρz zl,t−1 + z,l,t ,         z,l,t ∼ N (0, σz2 ),               (2.4)

and the unit specific shock is iid ν̃l,j,t ∼ N (0, σν2 ).
   Since the firm is able to operate Yel,t number of units given by (2.1) and each unit produces
according to (2.2), the firm’s total output equals

                                              Yl,t = Yel,t At (zl,t + νl,t ) ,                                   (2.5)

where the average realization over unit specific shocks, νl,t , is given by

                                                    Yel,t
                                                                                       !
                                                1 X                        Yel,t σν2
                                       νl,t ≡       ν̃l,j,t ∼ N         0,                                       (2.6)
                                              Yel,tj=1                       Ye 2l,t


       Given production outcomes and its associated costs, firms pay out dividends

                                            Dl,t = Yl,t − Wt Hl,t − Il,t ,                                       (2.7)

where Wt is the real wage and Il,t is investment. Their capital stock follows the law of motion

                                            Kl,t = (1 − δ)Kl,t−1 + Il,t .


2.2       Imperfect information
Agents cannot directly observe the realizations of firm-specific shocks zl,t and ν̃l,j,t . Instead, every
agent in the economy observes the aggregate shocks, the inputs used for the production of units Yel,t ,
as well as the quality adjusted output Yl,t of each firm l. As a consequence, from the production
  14
    We assume that zl,t follows a normal process, a technical assumption that is useful in solving the learning problem
because it makes the information friction linear.


                                                             9
function in (2.5), agents observe the sum (zl,t + νl,t ) , but not its individual components. This
informational assumption leads to a non-invertibility problem: Agents cannot tell whether an
unexpectedly high realization of firm’s output Yl,t is due to the firm being ’better’ (an increase in
the persistent firm’s specific profitability zl,t ) or just ’lucky’ (an increase in the average realization
of the unit specific shocks νl,t ).15
    Faced with this uncertainty, agents use the available information, including the path of output
and inputs, to form estimates on the underlying source of profitability zl,t . Since the problem is linear
and Gaussian, Bayesian updating using Kalman filter is optimal from the statistical perspective of
minimizing the mean square error of the estimates. 16 After production at period t, the measurement
equation of the Kalman filter is given by
                                                                                      
                                                                                 −1 2
                                  Yl,t /(Yl,t At ) = zl,t + νl,t , νl,t ∼ N 0, Yl,t σν
                                         e                                     e

and the transition equation is given by equation (2.4).
    Note that, unlike the standard time-invariant Kalman filter, the variance in the measurement
equation, Yel,t−1 σν2 , is time-varying.17 This reflects that when the firm l produces more units Yel,t the
’luck’ component, νl,t , becomes less variable. Indeed, as shown by equation (2.6), the firm knows
that the average of the unit specific shocks is a random variable with a variance that decreases in
the number of units produced. As such, when Yel,t is higher the firm extracts the information that
the observed firm output Yl,t is more likely to have been generated by the firm specific profitability
shock zl,t . Put differently, the signal-to-noise ratio becomes procyclical. 18
    The flip side implication of the procyclical signal-to-noise ratio is that uncertainty is countercycli-
cal: the posterior variance of idiosyncratic technology zl,t rises during recessions. Intuitively, when
a firm puts less resources into production, its estimate about its productivity is imprecise because
the level of output is largely determined by the realization of the transitory shock. Conversely, its
estimate is accurate when it uses more resources because output mostly reflects the realization of
productivity zl,t .
    To characterize the filtering problem, we start by deriving the one-step-ahead prediction from
  15
     The revenue obtained by firm l is Pt Yl,t , where we normalize Pt = 1. We can rewrite the revenue as Pl,t Yel,t ,
where the relative price paid for the units of good l, Pl,t , is given by its quality adjustment Yl,t /Yel,t . This shows
that the shocks zl,t and ν̃l,j,t can be equivalently interpreted as productivity or quality shocks, and so we use them
interchangeably as profitability shocks.
  16
     The learning problem of the model with growth is in Appendix 6.3, along with other equilibrium conditions.
  17
     Note that, after production, this variance is pre-determined, which allows us to use the Kalman filter.
  18
     The pro-cyclicality of the signal-to-noise ratio is obtained as long as the unit specific shock ν̃l,j,t is not perfectly
correlated with the firm specific shock. With less than perfect correlation, there is still residual uncertainty about
the realization of the average νl,t that decreases with the number of units Yel,t .




                                                             10
the period t − 1 estimate z̃l,t−1|t−1 and its associated error variance Σl,t−1|t−1 . We have

                                         z̃l,t|t−1 = (1 − ρz )z̄ + ρz z̃l,t−1|t−1 ,
                                         Σl,t|t−1 = ρ2z Σl,t−1|t−1 + σz2 .

   Then, given observables (Yl,t , Yel,t and At ) firms update their estimates according to

                                z̃l,t|t = z̃l,t|t−1 + Gainl,t (Yl,t /(Yel,t At ) − z̃l,t|t−1 ),                            (2.8)

where Gainl,t is the Kalman gain and is given by
                                                                           
                                                           Σl,t|t−1
                                           Gainl,t =                         .                                             (2.9)
                                                     Σl,t|t−1 + Yel,t−1 σν2

The updating rule for variance is

                                                                      σν2
                                                                                
                                         Σl,t|t =                                    Σl,t|t−1 .                           (2.10)
                                                          Yel,t Σl,t|t−1 + σν2

Intuitively, the error variance is increasing in the un-informativeness of the observation, which is
the variance of noise divided by the total variance. We can see that, holding Σl,t|t−1 constant, the
posterior variance Σl,t|t increases as input Yel,t decreases.
   The dynamics of the idiosyncratic technology zl,t according to the Kalman filter can thus be
described as
                              zl,t+1 = (1 − ρz )z̄ + ρz (z̃l,t|t + ul,t ) + z,l,t+1 ,        (2.11)

where ul,t is the estimation error of zl,t and ul,t ∼ N (0, Σl,t|t ).


2.3     Household wealth
There is a representative household whose budget constraint is given by
                            Z                                                        Z
                                  e                                                                e
                Ct + Bt +       Pl,t θl,t dl   ≤ Wt Ht + Rt−1 Bt−1 +                     (Dl,t + Pl,t )θl,t−1 dl + Tt ,

where Bt is the one-period riskless bond, Wt is the real wage, Rt is the interest rate, and Tt is a
                     e
transfer. Dl,t and Pl,t are the dividend and price of a unit of share θl,t of firm l, respectively.
Market clearing and resource constraint
  We impose the market clearing conditions for the labor market and the bond market:
                                                      Z       1
                                               Ht =               Hl,t dl,   Bt = 0.
                                                          0




                                                                      11
The resource constraint is given by
                                                 Ct + It + Gt = Yt                                              (2.12)
            R1
where It ≡ 0 Il,t dl, Gt is the government spending and we assume a balanced budget each period
(Gt = −Tt ). We assume the government spending as a constant share of output: ḡ = Gt /Yt .
A financial shock
    On purpose, our model has no other frictions except the incomplete information about the firms’
profitability. In particular, on the financing side, the model has a frictionless financial market.
However, guided by recent theoretical and empirical developments, we are interested in analyzing
the role of shocks to financial conditions as potential drivers of business cycle dynamics. In the
context of our frictionless model, we follow existing reduced-form approaches in modeling such
disturbances as a “financial wedge” shock ∆kt to agents’ Euler equation for capital accumulation.
In particular, as in Christiano et al. (2015), we introduce a shock ∆kt to the expected return on
          k
capital Rt+1  such that
                                     1 = (1 − ∆kt )Et∗ Mt+1 Rt+1
                                                             k
                                                                 .

Here Mt+1 ≡ M0t+1 /M0t , where M0t denote prices of t-period ahead contingent claims given by

                                                     M0t = β t λt ,                                             (2.13)

where λt is the marginal utility of consumption at time t by the representative household. Im-
portantly for the propagation mechanism through the learning friction, these prices are evaluated
under the representative agent’s equilibrium conditional probability distribution Et∗ . We describe
the properties of these beliefs in section 2.4 below.
   We assume the process for ∆kt :

                                         ¯ k + ρ∆ ∆k + ∆,t ,
                          ∆kt = (1 − ρ∆ )∆                                              2
                                                                          ∆,t ∼ N (0, σ∆ ).                    (2.14)
                                                   t−1


    As discussed in Christiano et al. (2015), the financial wedge could reflect variations in costs of
financial intermediation such as bankruptcy costs or changes in the desirability of corporate bonds
due to, for example, liquidity concerns.19 In our full-fledged estimated business cycle model of
section 4, we will use observed variation in corporate bond spreads to discipline movements in this
shock. In addition, as we will show later in section 3.3, our model generates additional movements
in that spread through the endogenous variation in confidence. For now, in the baseline frictionless
model developed here, our focus is to explore how endogenous uncertainty affects the propagation
of the financial shock.
  19
    The only distinction between the two interpretations is in their effect on the resource constraint. As in Christiano
et al. (2015), the quantitative magnitude of this impact is likely to be very small and hence we have ignored it for
simplicity in our market clearing condition (2.12).




                                                          12
2.4    Optimization
We have described so far the firms’ production possibilities, the household budget constraint, the
sources of stochasticity and the available information set. We now present the optimization problems
of the representative household and of the firms.
Imperfect information and ambiguity
    The representative household perceives ambiguity (Knightian uncertainty) about the vector of
idiosyncratic productivities {zl,t }l∈[0,1] . We now describe how that ambiguity process evolves.
    The agent uses observed data to learn about the hidden technology by using the Kalman filter
to obtain a benchmark probability distribution. The Kalman filter problem has been described in
section 2.2. Ambiguity is modeled as a one-step ahead set of conditional beliefs that consists of
alternative probability distributions surrounding the benchmark Kalman filter estimate z̃l,t in (2.11)
of the form

                zl,t+1 = (1 − ρz )z̄ + ρz z̃l,t|t + µl,t + ρz ul,t + z,l,t+1 ,   µl,t ∈ [−al,t , al,t ]   (2.15)

    In particular, the agent considers a set of alternative probability distributions surrounding the
benchmark that is controlled by a bound on the relative entropy distance. More precisely, the agent
only considers the conditional means µl,t that are sufficiently close to the long run average of zero
in the sense of relative entropy:
                                              µ2l,t    1
                                              2
                                                      ≤ η2,                                    (2.16)
                                           2ρz Σl,t|t  2
where the left hand side is the relative entropy between two normal distributions that share the
same variance ρ2z Σl,t|t , but have different means (µl,t and zero), and η is a parameter that controls
the size of the entropy constraint. The entropy constraint (2.16) results in a set [−al,t , al,t ] for µl,t
in (2.15) that is given by
                                                        p
                                              al,t = ηρz Σl,t|t                                     (2.17)

    The interpretation of the entropy constraint is that agents are less confident, i.e. the set of
beliefs is larger, when there is more estimation uncertainty. The relative entropy can be thought of
as a measure of distance between the two distributions. When uncertainty Σl,t|t is high, it becomes
difficult to distinguish between different processes. As a result, agents become less confident and
contemplate wider sets µl,t of conditional probabilities. Therefore, from the perspective of the agent,
a change in posterior variance translates into a change in uncertainty about the one-step-ahead mean
realization of technology.
Household problem
    We model the household’s aversion to ambiguity through recursive multiple priors preferences,
which capture an agent’s lack of confidence in probability assessments. This lack of confidence
is manifested in the set of one step ahead conditional beliefs about each zl,t+1 given in equations


                                                         13
(2.15) and (2.17). Collect the exogenous state variables in a vector st ∈ S. This vector includes the
aggregate shocks At and ∆kt , as well as the cross-sectional distribution of idiosyncratic productivities
{zl,t }l∈[0,1] . A household consumption plan C gives, for every history st , the consumption of the final
good Ct (st ) and the amount of hours worked Ht (st ). For a given consumption plan C, the household
recursive multiple priors utility is defined by

                                            Ht1+φ
                    Ut (C; st ) = ln Ct −         +β        min              E µ [Ut+1 (C; st , st+1 )],     (2.18)
                                            1+φ      µl,t ∈[−al,t ,al,t ],∀l


where β is the subjective discount factor and φ is the inverse of Frisch labor supply elasticity.20
    Notice that there is a cross-sectional distribution of sets of beliefs over the future {zl,t+1 }l∈[0,1] .
Indeed, for each firm l, the agent entertains a set of conditional means µl,t ∈ [−al,t , al,t ]. If each set is
singleton we obtain standard separable log utility with those conditional beliefs. Otherwise, agents
are not willing to integrate over the beliefs and narrow down each set to a singleton. In response,
households take a cautious approach to decision making and act as if the true data generating
process is given by the worst-case conditional belief.
Worst-case belief
   The worst-case belief can be easily solved for at the equilibrium consumption plan: the worst-
case expected idiosyncratic productivity is low. Given the bound in equation (2.17), the worst-case
mean is
                                        µ∗l,t = −ηρz Σl,t|t .
                                                    p
                                                                                             (2.19)

Thus, the agent’s cautious behavior faced with the sets of beliefs µl,t ∈ [−al,t , al,t ], one for each l,
results in acting as if the conditional mean of each firm’s idiosyncratic productivity is given by the
worst-case mean in (2.19). We denote conditional moments under these worst case belief by stars.
   The worst-case conditional mean for each firm’s zl,t+1 is therefore given by

                                 Et∗ zl,t+1 = (1 − ρz )z̄ + ρz z̃l,t|t − ηρz
                                                                               p
                                                                                Σl,t|t                       (2.20)

where z̃l,t|t is the Kalman filter estimate of the mean obtained in equation (2.8).
Law of large numbers
   The worst-case conditional distribution of each firm’s productivity is

                                      zl,t+1 ∼ N Et∗ zl,t+1 , ρ2z Σl,t|t + σz2
                                                                                 
                                                                                                             (2.21)

Once the worst-case distribution is determined, it is easy to compute the cross-sectional average
  20
    The recursive formulation ensures that preferences are dynamically consistent. Details and axiomatic foundations
are in Epstein and Schneider (2003b). Subjective expected utility obtains when the set of beliefs collapses to a
singleton.




                                                           14
              R
realization       zl,t+1 dl. Indeed, by the law of large numbers this average converges to
                          Z                                          Z                      Z
                              Et∗ zl,t+1 dl
                                                                                                p
                                              = (1 − ρz )z̄ + ρz         z̃l,t|t dl − ηρz        Σl,t|t dl.   (2.22)

                                           R
Moreover, it can be easily showed that z̃l,t|t dl = 0. Intuitively, since under the true DGP the cross-
sectional mean of zl,t is constant, the cross-sectional mean of the Kalman posterior mean estimate
is a constant as well.
    Equation (2.22) is a manifestation of the law of large numbers where uncertainty is modeled as
ambiguity (Knightian uncertainty) with multiple priors that differ in their mean. In this setting, law
of large numbers imply that sets of beliefs converge, but that idiosyncratic Knightian uncertainty
cannot be diversified away. Intuitively, agents care about uncertainty because it affects their future
continuation utility, as shown in equation (2.18). The representative agent derives wealth through
the average dividend from the portfolio of firms, and the continuation utility is increasing in wealth.
Therefore, when this representative agent does not know the distribution of firms’ productivity, and
hence their dividends, she evaluates choices as if mean productivity is low. An agent who owns a
portfolio of many firms then acts as if the entire portfolio has a low mean payoff.
    Modeling idiosyncratic uncertainty as both risk and ambiguity matters crucially for its effect
on the law of large numbers. When modeled as risk, uncertainty is diversified away, following
the standard argument that once we control for the conditional mean, given there by ρz z̃l,t|t , the
idiosyncratic variance Σl,t|t does not matter for the cross-sectional average of expected zl,t+1 in
(2.22). Instead, with ambiguity, the variance Σl,t|t also affects the set of mean beliefs. In particular,
by (2.19), a larger estimation uncertainty makes it harder to distinguish between different processes,
increasing ambiguity and therefore lowering the worst-case mean Et∗ zl,t+1 . Thus, the average
                            Rp
idiosyncratic uncertainty,      Σl,t|t dl, matters for the average worst-case expected zl,t+1 in (2.22).21
Firms’ problem
   Firms choose Kl,t , Hl,t , Il,t to maximize shareholder value
                                                             ∞
                                                             X
                                                       E0∗         M0t Dl,t ,                                 (2.23)
                                                             t=0


where E0∗ denotes expectation under the representative agent’s worst case probability and Dl,t is
given by equation (2.7). The random variables M0t denote prices of t-period ahead contingent claims
based on conditional worst case probabilities and are given by equation (2.13).
    Compared to a standard model of full information and expected utility, the firm problem in
(2.23) has two important specific characteristics. The first is that, as described above, unlike the
  21
     See Marinacci (1999) or Epstein and Schneider (2003a) for formal treatments of the law of large numbers for
i.i.d. ambiguous random variables. There they show that cross-sectional averages, such as that of equation (2.22),
must (almost surely) lie in an interval bounded by the highest and lowest possible cross-sectional mean, and these
bounds are tight in the sense that convergence to a narrower interval does not occur.



                                                               15
case of expected utility, the idiosyncratic uncertainty that shows up in these state prices does
not vanish under diversification. The second concerns the role of experimentation. On one hand,
with full information there is no role for experimentation. On the other hand, under incomplete
information but Bayesian decision making, experimentation is valuable because it raises expected
utility by improving posterior precision. Here, ambiguity-averse agents also value experimentation
since it affects utility by tightening the set of conditional probability considered. Therefore, firms
take into account in their problem (2.23) the impact of the level of input on worst-case mean.
Although we allow such active learning by firms, our model can nevertheless still be solved using
standard linear methods.22
Role of information structure
    The key property emerging from our information structure is the procyclical signal-to-noise ratio
at the firm level. There are several other structural ways to generate this, which will produce the
same dynamics at the aggregate. First, we could have an additive shock to the production function.
In that case the produced output would simply be Yl,t = At (zl,t Yel,t + γ t νl,t ), where νl,t is an iid
additive shock, unobserved at the firm level, with a constant variance. This setup is equivalent
because it produces the same learning dynamics, in which a larger Yel,t means a larger coefficient in
the measurement equation, and thus a higher signal-to-noise ratio.
    Second, in Appendix 6.1, we offer an additional interpretation of this shock based on a more
complex structure of imperfect competition. There we can refer to noisy demand signals and have
a setup where firms learn more about the demand of their goods when they produce and sell more.
In that version of the model, firms are subject to unobservable idiosyncratic shocks to the weight
attached to their goods in the CES aggregator for final goods. There the temporary shock νl,t is
replaced with an i.i.d. observation error of the underlying idiosyncratic shock; agents observe noisy
signals about demand, whose precision is increasing in the level of individual production. Given
the equivalent aggregate dynamics, we prefer the transparency of the current setup.
Timing
   We find it useful to summarize the timing of events within a period t, which follows:

   1. Stage 1 : Pre-production stage

         • Agents observe the realization of aggregate shocks (At and ∆kt ).
         • Given forecasts about the idiosyncratic technology and its associated worst-case scenario,
           firms hire labor (Hl,t ). The household supplies labor Ht and the labor market clears at
           the wage rate Wt .

   2. Stage 2 : Post-production stage
  22
    When we present our quantitative results, we assess the contribution of experimentation by comparing our
baseline results with those under passive learning, i.e. where agents do not actively experiment.


                                                    16
         • Idiosyncratic shocks zl,t and νl,t realize (but are unobservable) and production takes
           place.
         • Given output and input, firms update estimates about their idiosyncratic technology and
           use it to form forecasts for production next period.
         • Firms make investment Il,t and pay out dividends Dl,t . The household makes consump-
           tion and asset purchase decisions (Ct , Bt , and θl,t ).


2.5     Log-linearized solution
We solve for the equilibrium law of motion using standard log-linear methods. This is possible for
two reasons. First, since the filtering problem firms face is linear, the law of motion of the posterior
variance can be characterized analytically (Saijo (2014)). Because the level of inputs has first-order
effects on the level of posterior variance, linearization captures the impact of economic activity on
confidence. Second, we consider ambiguity about the mean and hence the feedback from confidence
to economic activity can be also approximated by linearization. In turn, log-linear decision rules
facilitate aggregation because the cross-sectional mean becomes a sufficient statistic for tracking
aggregate dynamics.
    We follow Ilut and Schneider (2014) and solve for the equilibrium law of motion using a guess-
and-verify approach: (a) guess the worst case beliefs p0 ; (b) solve the model assuming that agents
have agents have expected utility and beliefs p0 ; (c) compute the agent’s value function V and (d)
verify that the guess p0 indeed achieves the minima.
    For step (b) we log-linearize the equilibrium conditions. Details on the recursive representation
are in Appendix 6.2. In Appendix 6.3 we present the resulting optimality conditions, which will
be a subset of those characterizing the estimated model with additional rigidities introduced in
section 4. In what follows we explain the log-linearizing logic by simple expressions for the expected
worst-case output at stage 1 (pre-production) and the realized output at stage 2 (post-production).
We use the example to illustrate that uncertainty about the firm-level productivity has a first-order
effect at the aggregate. We provide a general description of the procedure in Appendix 6.4.
    We first find the worst-case steady state by evaluating a deterministic version of the filtering
problem and standard first-order conditions under the guessed worst-case belief.23 Next, we log-
linearize the model around the worst-case steady state. To do this, we first log-linearize the expected
worst-case output of individual firm l at stage 1:

                                                                           ˆ0
                                          Et∗ Ŷl,t0 = Â0t + Et∗ ẑl,t
                                                                    0
                                                                        + Ye l,t ,                           (2.24)
  23
    Potential complications arise because the worst-case TFP depends on the level of economic activity. Since
the worst-case TFP, in turn, determines the level of economic activity, there could be multiple steady states. We
circumvent this multiplicity by treating the posterior variance of the level of idiosyncratic TFP as a parameter and
by focusing on the steady state that is implied by that posterior variance.



                                                            17
and the realized output of individual firm l at stage 2:

                                                                   ˆ0
                                                            0
                                          Ŷl,t0 = Â0t + ẑl,t + Ye l,t ,                       (2.25)

where we use x̂0t = xt − x̄0 to denote log-deviations from the worst-case steady state and set the
trend growth rate γ to zero to ease notation. The worst-case individual output (2.24) is the sum
of three components: the current level of aggregate TFP, the worst-case individual TFP, and the
input level. The realized individual output (2.25), in turn, is the sum of aggregate TFP, the realized
individual TFP, and the input level.
    We then aggregate the log-linearized individual conditions (2.24) and (2.25) to obtain the cross-
sectional mean of worst-case individual output:

                                                                     ˆ0
                                       Et∗ Ŷt0 = Â0t + Et∗ ẑt0 + Ye t ,                       (2.26)

and the cross-sectional mean of realized individual output:

                                                                 ˆ0
                                           Ŷt0 = Â0t + ẑt0 + Ye t ,                           (2.27)
                                                                                      R1
where we simply eliminate subscript l to denote the cross-sectional mean, i.e., x̂0t ≡ 0 x̂0l,t dl.
    So far we have characterized the dynamics of output under the worst-case scenario. Our final
step is to characterize the dynamics under the true data generating process (DGP). To do this,
we feed in the cross-sectional mean of individual TFP, which is constant under the true DGP, into
(2.26) and (2.27). Using (2.26), the cross-sectional mean of worst-case output is given by

                                                                   ˆ
                                        Et∗ Ŷt = Ât + Et∗ ẑt + Ye t ,                         (2.28)

where we use x̂t = xt − x̄ to denote log-deviations from the steady-state under the true DGP. Using
(2.27), the realized aggregate output is given by

                                                            ˆ
                                               Ŷt = Ât + Ye t ,                                (2.29)

where we used ẑt = 0 under the true DGP. Importantly, Et∗ ẑt in (2.29) is not necessarily zero outside
the steady state. To see this, combine (2.15) and (2.19) and log-linearize to obtain an expression
for Et∗ ẑl,t :
                                Et∗ ẑl,t = εz,z z̃ˆl,t−1|t−1 − εz,Σ Σ̂l,t−1|t−1 .                (2.30)

From (2.10), the posterior variance is negatively related to the level of input Ye :

                                                                       ˆ
                                Σ̂l,t−1|t−1 = εΣ,Σ Σ̂l,t−2|t−2 − εΣ,Y Ye l,t−1 ,                 (2.31)



                                                        18
The elasticities εz,z , εz,Σ , εΣ,Σ , and εΣ,Y are functions of structural parameters and are all positive.
We combine (2.30) and (2.31) to obtain

                                                                                            ˆ
                         Et∗ ẑl,t = εz,z z̃ˆl,t−1|t−1 − εz,Σ εΣ,Σ Σ̂l,t−2|t−2 + εz,Σ εΣ,Y Ye l,t−1 .         (2.32)

Finally, we aggregate (2.32) across all firms:

                                                                               ˆ
                                   Et∗ ẑt = −εz,Σ εΣ,Σ Σ̂t−2|t−2 + εz,Σ εΣ,Y Ye t−1 ,                        (2.33)
                R1
where we used 0 z̃ˆl,t−1|t−1 dl = 0.24
    Notice again that the worst-case conditional cross-sectional mean simply aggregates linearly
the worst-case conditional mean, −al,t , of each firm. Since the firm-specific worst-case means are
a function of idiosyncratic uncertainty, which in turn depend on the firms’ scale, equation (2.33)
                                                    ˆ
shows that the average level of economic activity, Ye t−1 , has a first-order effect on the cross-sectional
average of the worst-case mean. For example, this means that during recessions, firms on average
produce less, which leads to lower confidence about their firm-level TFP. This endogenous reduction
in confidence further reduces equilibrium hours worked and other economic activity.


3      Propagation mechanism
In this section we characterize the main properties of the propagation mechanism implied by the
endogenous firm-level uncertainty. An important part of understanding those dynamics is to explore
the way in which the model generates correlated endogenous wedges and co-movement. We find
the basic RBC model described in section 2 a particularly useful laboratory for the purpose of
facilitating comparison with the standard paradigm. In section 4 we further introduce nominal and
real rigidities and estimate the augmented model using a likelihood-based method.


3.1     Co-movement and the labor wedge
Endogenous uncertainty leads to co-movement and a countercyclical labor wedge. This can be
analyzed by considering the optimal labor tradeoff of equating the marginal cost to the expected
marginal benefit under the worst-case belief Et∗

                                                 Htφ = Et∗ (λt M P Lt )                                        (3.1)

In the standard model, there is no expectation on the right-hand side. As emphasized by Barro
and King (1984), there hours and consumption move in opposite direction unless there is a TFP or
  24
    This follows from aggregating the log-linearized version of (2.8) and evaluating the equation under the true DGP.
Intuitively, since the cross-sectional mean of idiosyncratic TFP is constant, the cross-sectional mean of the Kalman
posterior mean estimate is a constant as well.


                                                             19
a labor supply shock (a preference shock to hours worked in agent’s utility (2.18)).
    Instead, in our model, there can be such co-movement. Suppose that there is a period of low
confidence. From the negative wealth effect there is a low consumption, so the standard effect would
be to see high labor supply as a result of the high marginal utility of consumption λt . However,
because the firm chooses hours as if productivity is low, there is a counter substitution incentive for
hours to be low. To see how the model generates countercyclical labor wedge, note that an increase
in ambiguity due to a reduction in labor supply looks, from the perspective of an econometrician,
like an increase in the labor income tax.25 The labor wedge can now be easily explained by implicitly
defining the labor tax τtH as
                                       Htφ = (1 − τtH )λt M P Lt

Using the optimality condition in (3.1), the labor tax is

                                                           Et∗ (λt M P Lt )
                                              τtH = 1 −                                                              (3.2)
                                                              λt M P L t

    Consider first the linear rational expectations case. There the role of idiosyncratic uncertainty
disappears and the labor tax in equation (3.2) is constant and equal to zero. To see this, note our
timing assumption that labor is chosen after the aggregate shocks are realized and observed at the
beginning of the period. This makes the optimality condition in (3.1) take the usual form of an
intratemporal labor decision.26
    In our model, the role of idiosyncratic uncertainty does not vanish and instead it shows up in
the as if expected return to working, formed under the worst-case belief Et∗ . Thus, even if labor is
chosen after aggregate shocks are realized and observed, the average idiosyncratic uncertainty has
a first-order effect on the cross-sectional average of the worst-case mean, as detailed in section 2.5.
    Consider now the econometrician that measures realized hours, consumption and the marginal
product of labor as of time t. While agents take the labor decision under Et∗ , the econometrician
measures these equilibrium objects under the data generating process which uses the average
µ = 0. The difference between the worst-case distribution and the average realization under the
econometrician’s data generating process produces a labor wedge, which, in log-linear deviations,
  25
     Given the equilibrium confidence process, which determines the worst-case belief Et∗ , the economic reasoning
behind the effects of distorted beliefs on labor choice has been well developed by existing work, such as Angeletos
and La’O (2009, 2013). There they describe the key income and substitution forces through which correlated higher-
order beliefs, a form of confidence shocks, show up as labor wedges in a model where hiring occurs under imperfect
information on its return. In addition, Angeletos et al. (2014) emphasize the critical role of beliefs being about
the short-run rather than the long-run activity in producing stronger substitution effects. In our setup agents learn
about the stationary component of firm-level productivity and therefore the equilibrium worst-case belief typically
leads to such stronger substitution effects.
  26
     If we would assume that labor is chosen before the aggregate shocks are realized, there would be a fluctuating
labor tax in (3.2) even in the rational expectations model. In that model, the wedge is τtH = 1− Et−1 (λt M P Lt )
                                                                                                    λt M P Lt      , where,
by the rational expectations assumptions, Et−1 reflects that agents form expectations using the econometrician’s data
generating process. Crucially, in such a model, the labor wedge τtH will not be predictable using information at time
t − 1, including the labor choice, such that Et−1 τtH = 0. In contrast, our model with learning produces predictable,
countercyclical, labor wedges.


                                                            20
is inversely proportional to the time-varying confidence.
    In a period of low confidence, the ratio between the expected benefit to working under the
worst-case belief compared to the econometrician’s measure of λt M P Lt is typically lower. Thus,
the econometrician rationalizes the ‘surprisingly low’ labor supply by a high labor tax τtH . In turn,
the low confidence is generated endogenously from a low level of average economic activity, as
reflected in the lower cross-sectional average of the worst-case mean, as given by equation (2.33).
Therefore, the econometrician finds a systematic negative relationship between economic activity
and the labor income tax. This relationship is consistent with empirical studies that suggest that
in recessions labor falls by more than what can be explained by the marginal rate of substitution
between labor and consumption and the measured marginal product of labor (see for example
Shimer (2009) and Chari et al. (2007)).
    Finally, for an ease of exposition, we have described here the behavior of the labor wedge by
ignoring the potential effect of experimentation on the optimal labor choice. This effect adds an
additional reason why labor moves ‘excessively’, from the perspective of an observer that only uses
equation (3.1) to understand labor movements. As discussed later in section 3.4, experimentation
amplifies the effects of uncertainty during the short-run, and thus leads to even more variable labor
wedges, while it dampens fluctuations in the medium-run.


3.2    Intertemporal discount factor wedge
Uncertainty also affects the consumption-savings decision of the household. This is reflected in the
Euler condition for the risk-free asset:

                                        1 = βRt Et∗ (λt+1 /λt )                                  (3.3)

   As with the labor wedge, let us implicitly define an intertemporal savings wedge:

                                    1 = (1 + τtB )βRt Et (λt+1 /λt )

    Importantly, this wedge is time varying, since the bond is priced under the uncertainty adjusted
distribution, Et∗ , which differs from the econometrician’s DGP, given by Et . By substituting the
optimality condition for the interest rate from (3.3), the wedge becomes:

                                                       Et∗ λt+1
                                          1 + τtB =                                              (3.4)
                                                       Et λt+1

    Equation (3.4) makes transparent the predictable nature of the wedge. In particular, during
low confidence times, the representative household acts as if future marginal utility is high. This
heightened concern about future resources drives up demand for safe assets and leads to a low
interest rate Rt . However, from the perspective of the econometrician, the measured average


                                                  21
marginal utility at t + 1 is not particularly high. To rationalize the low interest rate without
observing large changes in the growth rates of marginal utility, the econometrician recovers a high
savings wedge τtB .
    Therefore, the model offers a mechanism to generate movements in the relevant discount factor
that arise endogenously as a countercyclical desire to save in risk-free assets. On the one hand,
the endogenous wedge is not simply a by-product, but it helps understand the model mechanism.
Indeed, even a supply shock such as an aggregate TFP shock will endogenously generate features
resembling a demand shock, such as those arising from an intertemporal preference shock. On the
other hand, the endogenous wedge is a type of overidentifying restriction that is consistent with the
data, without requiring exogenous shocks to the demand for safety, a source of stochasticity used
in recent macroeconomic models, such as Fisher (2015) or Christiano et al. (2015).


3.3       Excess return
A similar logic applies to the countercyclical excess return. The Euler condition for capital is

                                               λt = βEt∗ [λt+1 Rt+1
                                                                K
                                                                    ]

Under our linearized solution, using equation (3.3), we get Et∗ Rt+1
                                                                 K
                                                                     = Rt , where Et∗ Rt+1
                                                                                       K
                                                                                           is the
expected return on capital under the worst-case belief. As with the intertemporal savings wedge,
let us define the measured excess return wedge as

                                                 K
                                             Et Rt+1 = Rt (1 + τtK )

       As with bond pricing, this wedge is time-varying and takes the form
                                                                   K
                                                              Et Rt+1
                                                1 + τtK =                                                      (3.5)
                                                              Et∗ Rt+1
                                                                   K



    During low confidence times, demand for capital is ‘surprisingly low’. This is rationalized by the
                             K                                                            K
econometrician, measuring Rt+1   under the true DGP, as a high ex-post excess return Rt+1     − Rt , or
as a high wedge τtK in equation (3.5). In the linearized solution, the excess return, similarly to the
labor tax and the discount factor wedge, is inversely proportional to the time-varying confidence.
In times of low economic activity, when confidence is low, the measured excess return is high.
    Thus, the model can generate a countercyclical labor and savings wedge at the same time when
the measured premia on uncertain assets is high.27 This arises from any type of shock that moves
the economic activity.
  27
   The pricing logic can be extended to defaultable corporate bonds. This will likely generate countercyclical excess
bond premia, as documented for example by Gilchrist and Zakrajšek (2012).




                                                         22
                           Table 1: Parameters for the impulse response exercise

                     γ       α     β      φ     δ   η          Σ̄    ḡ   ρz    σz     ρA     ρ∆
                   1.004    0.3   0.99    0   0.025 2         0.1   0.2   0.5   0.4   0.95   0.95



3.4     Impulse response analysis
In the previous sections we have described some of the analytics behind the emergence of counter-
cyclical wedges. In this subsection we illustrate the dynamics through impulse response functions.
In order to facilitate comparison with a standard RBC model, we use common values from the
literature whenever possible and explain the role of the other parameters. Table 1 summarizes the
parameters used in our exercise. These parametrization serves an illustration purpose, while in
section 6 we estimate a model rich in various rigidities.
    The magnitude of the feedback loop between uncertainty and economic activity is determined by
three factors. The first factor is the variability of labor, controlled by the elasticity of labor supply.
For illustration purposes, we set the inverse Frisch elasticity φ equal to zero following the indivisible
labor model by Hansen (1985) and Rogerson (1988). Second, the parameters that are related to the
idiosyncratic processes control how changes in inputs translate to changes in the posterior variance.
We choose ρz = 0.5 and σz = 0.4 for the idiosyncratic TFP process. Idiosyncratic TFP is less
persistent than the aggregate, which is in line with the finding in Kehrig (2015). The values imply
a cross-sectional standard deviation of TFP of 0.46 and is in line with the estimates found in Bloom
et al. (2014) using the establishment-level data. David et al. (2015) estimate the posterior variance
of a firm-specific shock (in the context of our model, a TFP shock) to be around 8–13%. We choose
the worst-case steady state posterior variance so that at the zero-risk steady state the posterior
variance Σ̄ is 10%.28 Finally, the size of the entropy constraint η determines how changes in the
posterior standard deviation translate into changes in confidence. Ilut and Schneider (2014) argue
that a reasonable upper bound for η is 2, based on the view that agents’ ambiguity should not be
“too large”, in a statistical sense, compared to the variability of the data.
    Figure 1 plots the impulse response to a positive TFP shock. In addition to the response from
the baseline model (labeled ‘Baseline’), we also report the responses from the model with passive
learning (labeled ‘Passive’), in which the firm does not internalize the effect of its input choice on
its future uncertainty, and the standard rational expectation (RE) RBC model (labeled ‘RE’). The
solution to the RE model is obtained by simply setting the entropy constraint η to zero. In this
  28
    We re-parameterize the model so that we take the worst-case steady state posterior variance Σ̄0 of idiosyncratic
TFP as a parameter. This posterior variance, together with ρz and σz , will pin down the standard deviation of the
luck component σν . The zero-risk steady state is the ergodic steady state of the economy where optimality conditions
take into account uncertainty and the data is generated under the econometrician’s DGP. Appendix 6.4 provides
additional details. Under the resulting parametrization, the Kalman gain at the zero-risk steady state, normalizing
the level of input to one, is 0.47. This implies that an observation from four quarters ago will receive a weight
(1 − 0.47)4 ≈ 0.08.


                                                         23
                                             Figure 1: Impulse response to an aggregate TFP shock


                                                   Output                                         Investment
           Percent deviation




                               0.3
                                                                               0.6
                               0.2                                             0.4

                                                                               0.2
                               0.1
                                             5      10         15   20                       5       10        15    20
                                                 Consumption                                        Hours

                               0.1
                                                                               0.2
                          0.08
                                                                               0.1
                          0.06
                                                                                0
                                             5      10         15   20                       5       10        15    20
                                                 Labor wedge                            −3   Discount factor wedge
                                                                                     x 10
                                 0                                              0
               −0.01

               −0.02                                                           −1

               −0.03
                                                                               −2
                                             5      10         15   20                       5       10        15    20
                                        −4
                                     x 10 Ex−post excess return                 Cross−sectional mean of worst−case TFP
                                 0                                            0.06
                                                                                                          Baseline
                               −5
                                                                              0.04                        Passive
                               −10                                                                        RE
                                                                              0.02
                               −15
                                                                                0
                                             5      10         15   20                       5       10        15    20




Notes: Thick black solid line (‘Baseline’) is our baseline model with active learning, thin blue dashed line
(‘Passive’) is the model with passive learning, and thick red dashed line (‘RE’) is the frictionless, rational
expectations, RBC model.




                                                                         24
                                          Figure 2: Impulse response to a financial shock


                                            Output                                  Investment
             Percent deviation




                                 3
                                                                        8
                                 2                                      6
                                                                        4
                                 1                                      2

                                     5       10        15    20                 5      10        15         20
                                         Consumption                                   Hours
                                                                        4
                       0.5
                                                                        3
                                 0                                      2

             −0.5                                                       1

                                     5       10        15    20                 5      10        15         20
                                         Labor wedge                           Discount factor wedge
                                 0                                      0

             −0.2                                                  −0.01

                                                                   −0.02
             −0.4
                                                                   −0.03
                                     5       10        15    20                 5      10        15         20
                                     Ex−post excess return             Cross−sectional mean of worst−case TFP
            −0.04
                                                                       0.8                       Baseline
            −0.06
                                                                       0.6                       Passive
            −0.08                                                      0.4                       RE
             −0.1                                                      0.2
            −0.12                                                       0
                                     5       10        15    20                 5      10        15         20




Notes: Thick black solid line (‘Baseline’) is our baseline model with active learning, thin blue dashed line
(‘Passive’) is the model with passive learning, and thick red dashed line (‘RE’) is the frictionless, rational
expectations, RBC model.




                                                                  25
case, agents think in terms of single probabilities and the model reduces to a rational expectation
model. Note that when η = 0, firm-level learning cancels out in the aggregate due to linearization
and the law of large numbers.
    Compared to the RE version, our model generates amplified and hump-shaped response in
output, investment, and hours. These dynamics are due to the endogenous variation in firms’
confidence. In response to a positive TFP shock, firms (on average) increase their inputs, such as
hours and the capital utilization rate. The increase in inputs lowers uncertainty which implies that
firms contemplate a narrower set of conditional probabilities; the worst-case scenarios become less
worse. As a result, the agent acts as if the mean idiosyncratic productivities are higher and this
may further stimulate economic activity. At the same time, from the econometrician’s perspective,
the labor supply, the return on risk-free bonds and the demand for capital are surprisingly high.
Thus, various wedges co-move: the labor wedge, the discount factor wedge and the ex-post excess
return on capital decline.
    Finally, we compare our baseline impulse response with the response from the passive learning
model. Initially the output and hours responses of the baseline model with active learning are
larger than those of passive learning. In the medium run, however, the responses of passive learning
become larger. This is due to a dynamic interaction of two opposing forces. On one hand, higher
production during booms increases the value of experimentation because it raises the marginal
benefit of an increase in the expected worst-case technology. On the other hand, there is an
offsetting effect coming from a reduction in posterior variance. Since the level of posterior variance
is downward convex in the level of inputs, the marginal reduction in posterior variance due to an
increase in inputs is smaller during booms. During the initial period of a positive technology shock,
the first effect dominates the second. As the economy slows down, the second effect becomes more
important.
    Figure 2 shows the impulse response to a financial shock. In a standard RBC model the increase
in expected return to capital, as a result of the reduced financial wedge shown in the last row of the
first column, produces a standard intertemporal and wealth effect on consumption. The former tends
to be stronger since the financial shock affects directly the expected return to investment while the
former is weaker since the shock does not directly impact the resource constraint. As a consequence,
investment rises through a fall in consumption. In turn, the fall in consumption stimulates hours
worked as marginal utility of consumption is higher. Consumption and hours co-move positively
only in the long run after the positive productivity effect of capital accumulation kicks in. In our
model, the increase in hours raises average confidence and further stimulates economic activity. This
leads to a stronger positive wealth effect, as well as a higher perceived marginal return to labor. The
positive effect can be strong enough to make consumption increase and the labor wedge can be low
enough to simultaneously lead to high equilibrium labor. Therefore, our model can generate positive
co-movement in consumption and labor after a demand shock much quicker than the typical effects
present in the RE model that arise from endogenous capital accumulation. At the same time, the


                                                  26
financial shock, similarly to the technology shock, manifests as correlated countercyclical wedges.


4      Quantitative analysis
We now estimate the model by conducting Bayesian inference. We introduce variable capital
utilization and embed real and nominal rigidities widely used in the literature. These extensions
allow us to to compare our learning mechanism with traditional frictions and to investigate the
extent to which those frictions, in turn, are replaceable by our mechanism.


4.1     Bayesian estimation
We start by describing the additional features that we introduce to the estimated model. The
production function with capital utilization is

                                           Yel,t = (Ul,t Kl,t−1 )α (γ t Hl,t )1−α

and a(Ul,t )Kl,t−1 is an utilization cost that reduces dividends in equation (2.7).29 We modify the
representative household’s utility (2.18) to allow for habit persistence in consumption:

                                                       Ht1+φ
               Ut (C; st ) = ln(Ct − bCt−1 ) −               +β        min              E µ [Ut+1 (C; st , st+1 )],
                                                       1+φ      µl,t ∈[−al,t ,al,t ],∀l


where b > 0 is a parameter. We also introduce a standard investment adjustment cost:
                                                                     2 
                                                           κ Il,t
                                Kl,t = (1 − δ)Kl,t−1 + 1 −          −γ      Il,t ,                                    (4.1)
                                                           2 Il,t−1

where κ > 0 is a parameter. We introduce nominal rigidity by considering Calvo-type price and
wage stickiness along with monopolistic competition.30 We assume a Taylor-type reaction function:
                                      ρR         φπ         φY 1−ρR
                     Rt         Rt−1            πt           Yt
                        =                                                     R,t ,   R,t ∼ N (0, σR2 ),
                     R̄          R̄             π̄           Ȳ
  29
     We specify: a(U ) = 0.5χ1 χ2 U 2 + χ2 (1 − χ1 )U + χ2 (0.5χ1 − 1), where χ1 and χ2 are parameters. We set χ2 so
that the steady-state utilization rate is one. The cost a(U ) is increasing in utilization and χ1 determines the degree
of the convexity of utilization costs. In a linearized equilibrium, the dynamics are controlled by the χ1 .
  30
     To avoid complications arising from directly embedding infrequent price adjustment into firms, we follow
Bernanke et al. (1999) and assume that the monopolistic competition happens at the “retail” level. Retailers purchase
output from firms in a perfectly competitive market, differentiate them, and sell them to final-goods producers, who
aggregate retail goods using the conventional CES aggregator. The retailers are subject to the Calvo friction and
thus can adjust their prices in a given period with probability 1 − ξp . To introduce sticky wages, we assume that
households supply differentiated labor services to the labor packer with a CES technology who sells the aggregated
labor service to firms. Households can only adjust their wages in a given period with probability 1 − ξw .




                                                                  27
where π̄ is the inflation target, R̄ = π̄γ/β, and Ȳ is output along the balanced growth path. ρR ,
φπ , and φY are parameters and R,t is a monetary policy shock.
    The stochastic structure of our economy is the same as in the baseline model of section 3. There
are three sources of aggregate shocks: the technology shock At , the financial shock ∆kt , and the
monetary policy shock R,t . The technology and financial shocks follow the AR(1) processes in (2.3)
and (2.14), respectively.
    Of particular importance for the identification discussed below, note that combining the Euler
equation for the risk-free asset, 1 = Et∗ Mt+1 Rt , with that for capital accumulation and rearranging,
we obtain ∆kt ' Et∗ Rt+1
                       k
                          − Rt . Therefore, the unobserved financial shock is tightly connected to a
measure of excess return on capital, for which we will use an observable in our estimation.
    Because the aggregate law of motion is linear, we can use standard Bayesian techniques as
described in An and Schorfheide (2007) to estimate the model. The sample period is 1985Q1–
2014Q4. The data is described in Appendix 6.5. The vector of observables is

                              [∆ ln Yt , ∆ ln Ht , ∆ ln It , ∆ ln Ct , ln πt , ln Rt , Spreadt ].

where Spreadt is the Baa corporate bond yield relative to the yield of Treasury bond with ten-year
maturity.31 We assume that the model counterpart of Spreadt is the excess-return on capital so
that Spreadt = Rtk − Rt−1 .32
    We fix a small number of parameters prior to estimation. The growth rate of technology γ, the
depreciation rate of capital δ, and the share of government spending to output ḡ are set to the values
in Table 1. The prior distributions for other structural parameters are collected in Tables 2 and 3.
We reparametrize the parameter that determines the size of ambiguity (η) and instead estimate 0.5η.
We set a Beta prior for 0.5η, so that the lowest value corresponds to rational expectations and the
highest value corresponds to the upper bound η = 2 suggested by Ilut and Schneider (2014). Since
all our estimation exercises have less structural shocks than observables, we add i.i.d. measurement
error to observables except for the interest rate and the financial spread. At the posterior mean,
measurement error explains 1 percent of variation of a particular observable. We place discipline
on the estimation and set relatively small and tight priors for the measurement error so that the
model tries to explain observables through movements in endogenous variables as much as possible.
To facilitate comparison we also estimate the RE version of the model.
  31
       We also used the spread constructed in Gilchrist and Zakrajšek (2012) and obtained similar results.
  32
       To understand what causes variations in the spread, it is useful to decompose it into three components:
                                                                       0          0
                                        ∗                                               ∗
                            Spreadt = (Et−1 Rtk − Rt−1 ) + (Rtk − Et Rtk ) + (Et Rtk − Et−1 Rtk ),                (4.2)
                  0
where we use Et to use worst-case expectations at the end of stage 1 (after the realization of period t aggregate shock
but before the realization of idiosyncratic shocks). The financial shock ∆kt causes variations in the first component,
changes in confidence cause variations in the second component, and innovations to aggregate shocks (such as TFP
shocks) cause variations in the third component.




                                                              28
                    Table 2: Estimated parameters: preference, technology, and policy


                                                                Prior             Posterior mode
                                                         Type   Mean    Std     Ambiguity     RE
             100(γ − 1)      Growth rate                 N      0.5     0.3       0.57       0.41
                                                                                 [0.56, 0.58]   [0.35, 0.46]
             100(β −1 − 1)   Discount factor             G      0.1     0.05       0.06           0.05
                                                                                 [0.03, 0.08]   [0.02, 0.10]
             100(π̄ − 1)     Net inflation               N      0.2     0.05       0.39           0.23
                                                                                 [0.34, 0.40]   [0.12, 0.29]
             α               Capital share               B      0.3     0.04       0.41           0.26
                                                                                 [0.40, 0.42]   [0.21, 0.34]
             φ               Inverse Frisch elasticity   G      1       0.4        0.20           1.14
                                                                                 [0.17, 0.21]   [1.13, 1.51]
             χ1              Utilization cost            G      0.7     0.3        0.52           0.51
                                                                                 [0.49, 0.54]   [0.40, 0.83]

             b               Consumption habit           B      0.3     0.1        0.57           0.95
                                                                                 [0.54, 0.59]   [0.92, 0.97]
             κ               Investment adj. cost        G      1.5     0.5        0.09           4.77
                                                                                 [0.08, 0.09]   [4.52, 4.93]
             ξp              Calvo price                 B      0.5     0.2        0.44           0.89
                                                                                 [0.42, 0.45]   [0.85, 0.93]

             ξw              Calvo wage                  B      0.5     0.2        0.02           0.82
                                                                                 [0.00, 0.02]   [0.57, 0.93]
             ρR              Interest smoothing          B      0.7     0.1        0.66           0.40
                                                                                 [0.63, 0.66]   [0.31, 0.46]
             φπ              Inflation response          N      1.5     0.05       1.65           1.61
                                                                                 [1.62, 1.66]   [1.55, 1.71]

             φY              Output response             N      0.2     0.05       0.05           0.25
                                                                                 [0.05, 0.06]   [0.19, 0.35]
             ρz              Idiosyncratic TFP           B      0.5     0.05       0.44              –
                                                                                 [0.43, 0.45]
             σz              Idiosyncratic TFP           G      0.4     0.1        1.13              –
                                                                                 [1.13, 1.15]

             0.5η            Entropy constraint          B      0.5     0.2        0.85              0
                                                                                 [0.81, 0.86]
             Σ̄              SS posterior variance       G      0.1     0.05       0.17              –
                                                                                 [0.09, 0.31]



Notes: ‘Ambiguity’ corresponds to our baseline model with endogenous uncertainty and ‘RE’ corresponds to its
rational expectations version. B refers to the Beta distribution, N to the Normal distribution, G to the Gamma
distribution, IG to the Inverse-gamma distribution. 95% posterior intervals are in brackets and are obtained from
draws using the random-walk Metropolis-Hasting algorithm.




                                                         29
                       Table 3: Estimated parameters: shocks and measurement errors


                                                              Prior            Posterior mode
                                                      Type    Mean    Std    Ambiguity     RE
                    ρA        Aggregate TFP           B       0.9     0.05     0.93       0.97
                                                                              [0.91, 0.94]   [0.90, 0.96]
                    ρ∆        Financial               B       0.9     0.05      0.97           0.95
                                                                              [0.97, 0.98]   [0.93, 0.97]
                    100σA     Aggregate TFP           IG      1       1         0.28           0.48
                                                                              [0.24, 0.29]   [0.34, 0.61]
                    100σ∆     Financial               IG      0.1     1         0.04           0.02
                                                                              [0.03, 0.05]   [0.02, 0.03]
                    100σR     Monetary policy         IG      0.1     1         0.06           0.05
                                                                              [0.06, 0.09]   [0.03, 0.08]
                    100σY     Meas. error output      G       0.060   0.03      0.37           0.56
                                                                              [0.38, 0.40]   [0.50, 0.62]
                    100σH     Meas. error hours       G       0.073   0.03      0.44           0.54
                                                                              [0.43, 0.47]   [0.48, 0.60]
                    100σI     Meas. error investm.    G       0.18    0.08      1.12           1.62
                                                                              [1.08, 1.13]   [1.48, 1.75]
                    100σC     Meas. error consum.     G       0.050   0.02      0.32           0.44
                                                                              [0.30, 0.35]   [0.40, 0.49]
                    100σπ     Meas. error inflation   G       0.024   0.01      0.21           0.36
                                                                              [0.20, 0.24]   [0.33, 0.40]

                    Log marginal likelihood                                     3262           3096

Notes: See notes for Table 2.




4.2        Results
The posterior estimates are collected in Tables 2 and 3. Our model with endogenous uncertainty is
labeled ‘Ambiguity’ and its rational expectations version is labeled ‘RE’.
    We first study the rational expectations (RE) version of the model. The row labeled ‘RE’ in
Table 4 reports the contribution of a financial shock for business cycles. The Table shows that the
financial shock accounts for a modest fraction of variables such as output and hours. For example,
the financial shock explains only 19 and 4 percents of variations in output and hours, respectively.
This implies that in the RE model the TFP shock is the major driver of business cycles.33 Next, the
column labeled ‘RE’ in Table 2 shows that the estimated degree of rigidities is high. This happens
because the model tries to be consistent with the observed data by generating persistent dynamics
and co-movement. Nevertheless, as shown in Figures 9 and 10 in Appendix 6.6, neither the TFP nor
the financial shock end up generating that co-movement. As is common in New Keynesian models,
hours fall after an improvement in technology. In response to a reduction in financial wedge, output,
investment, and hours increase but consumption slightly declines.
  33
       The contribution of a monetary policy shock is negligible.


                                                             30
                       Table 4: Theoretical variance explained by financial shock


                                Output     Hours    Investm.    Consum.      Inflation   Interest
                  Ambiguity      0.56       0.61      0.61        0.47         0.67        0.72
                  RE             0.19       0.04      0.34        0.69         0.00        0.01

Notes: ‘Ambiguity’ corresponds to our baseline model with endogenous uncertainty and ‘RE’ corresponds to its
rational expectations version. We report the percent of variance at the business cycle frequency (6–32 quarters)
that can be explained by the financial shock.




    As a result, the RE model fails to explain aggregate fluctuations in the data. To see this, we
report the summary statistics of our observables and their model counterparts at the posterior
mode, computed by the Kalman smoothing algorithm in the panel labeled ‘RE’ in Table 5. Figure
7 in Appendix 6.6 visualizes this by plotting the historical path of observables along with the
model counterparts. Due to the high estimated habit and adjustment cost, the model understates
the standard deviations for all endogenous variables, except for inflation. The predicted output,
investment, and consumption are negatively correlated with data. To understand the discrepancy
between the model and the data, first consider the role of the financial shock. Recall that in the
estimation the financial shock is tightly connected to the observed credit spread. Since empirically
the spread increases during recessions, this implies that the RE model predicts a fall in output,
investment, and hours but an increase in consumption during recessions. Next, consider the role
of the TFP shock. Since this shock explains most of variations in hours (95 percent), the model
predicts an increase in TFP during recessions, which makes hours fall but output, investment, and
consumption increase. The combination of those two shocks make model-implied hours positively
correlated with data and model-implied output, investment, and especially consumption negatively
correlated with the data (panel ‘RE’ in Table 5). In addition, the model cannot replicate the
co-movement patterns in the data: for example, in the data the correlation between hours and
consumption growths is 0.52 while in the model it is negatively correlated at -0.44.
    Next, consider our model with endogenous uncertainty. The column labeled ‘Ambiguity’ in Table
2 shows that the estimated degree of rigidities is substantially smaller compared to the RE version.
For example, the estimated habit parameter is 40% smaller and the investment adjustment cost is
negligible. The prices are adjusted every 1/(1 − 0.44) ≈ 2 quarters and wages are adjusted roughly
every quarter, instead of the 9 and 6 quarters, respectively, in the RE model. This is because our
model can generate co-movement and persistent dynamics without relying on traditional rigidities.
    To illustrate the ability to produce co-movement, Figure 3 shows the estimated impulse response
to a financial shock. In addition to the baseline impulse response (labeled ‘Baseline’), we also display
the response for a version of the model in which we set η = 0 and freeze the remaining parameters

                                                        31
                                          Table 5: Fit of observables


              Model         Statistic           Output     Hours    Investm.    Consum.      Inflation
                            σ(data)               0.60      0.73       1.79       0.50         0.24
              Ambiguity     σ(model)             0.64       0.47       1.29       0.35         0.22
                            ρ(data, model)       0.84       0.76       0.77       0.74         0.48
              RE            σ(model)             0.11       0.37       0.47       0.03         0.53
                            ρ(data, model)       -0.16      0.60      -0.05      -0.30         0.49

Notes: ‘Ambiguity’ refers to our baseline model with endogenous uncertainty and ‘RE’ refers to its rational
expectations version. σ(data) and σ(model) refer to standard deviations of the observables and the model
counterparts expressed in percentage points. ρ(data, model) is the correlation between data and model.




to the baseline estimated values (labeled ‘RE counterfactual’).34 In the RE counterfactual, an
expansionary financial shock leads to a transitory increase in output, hours, and investment but
a decline in consumption. In contrast, in our model, output, hours, investment, and consumption
all increase in a persistent and delayed manner, with peak responses around 20 quarters after the
shock. Because of this, the financial shock emerges as a major driver of the business cycle in our
model (the row labeled ‘Ambiguity’ in Table 4). For example, the financial shock explains 56 and
61 percent of output and hours variances, compared to the 19 and 4 percent in the RE version,
respectively. That our learning mechanism changes inference about the source of the business cycle
and makes demand shock important is one of the main results of this paper.
    Endogenous uncertainty improves the model performance compared to the RE version in terms
of the fit of observables (Panel ‘Ambiguity’ in Table 5). In Figure 8 in Appendix 6.6, the smoothed
variables from the model tracks the path of observables quite well. In addition, our model (correctly)
predicts that consumption and hours growth are positively correlated (0.72 versus 0.52 in the data).
The model fit, measured in terms of log marginal likelihood computed by the Geweke’s modified
harmonic mean estimator, which penalizes more parameters, is improved as well. Table 3 reports
that in our model the marginal likelihood is 166 log points larger than the RE version.
    An additional cross-equation restriction implied by our friction is that part of the movement in
the credit spread can be explained by endogenous variation in confidence. Figure 4 visualizes this
result by plotting the spread and the model counterpart computed from the Kalman smoother. Note
that because there is no measurement error in the spread, the model and data spread is identical.
The endogenous variation in the spread is labeled ‘Model (ambiguity component)’.35 Since agents
lose confidence during recessions, the movement in confidence can explain a substantial fraction of
  34
     In other words, all parameters except for η are set to the values reported under the column ‘Ambiguity’ in Table
2 and 3.
  35
     This endogenous variation corresponds to the second component in the spread decomposition of equation (4.2).


                                                         32
                       Figure 3: Estimated impulse response to a financial shock
                                                                                          Output                                    Investment

                                              2




                         Percent deviation
                                                                                                                         3
                                             1.5
                                                                                                                         2
                                              1
                                                                                                                         1
                                             0.5
                                                                                                                         0
                                                                                   10       20      30       40                10      20        30      40

                                                                                        Consumption                                   Hours

                                                                                                                                     Baseline
                                              1                                                                                      RE counterfactual
                                                                                                                         1


                                             0.5                                                                       0.5


                                              0                                                                          0
                                                                                   10       20      30       40                10      20        30      40




Notes: Black solid line (‘Baseline’) is the impulse response from our baseline model with endogenous uncertainty
and the red dashed line (‘RE counterfactual’) is the response where we set the entropy constraint η = 0 while
holding other parameters at their estimated values.




                                                                                                 Figure 4: Credit spread
                                                                             1.6

                                                                                            Model & Data
                                                                             1.4            Model (ambiguity component)
                                               Quarterly percentage points




                                                                             1.2


                                                                              1


                                                                             0.8


                                                                             0.6


                                                                             0.4


                                                                             0.2
                                                                              1985         1990       1995        2000       2005      2010




Notes: We plot the Baa corporate bond spread along with the model counterpart computed from the Kalman
smoother. Black solid line (‘Model & Data’) is the data and the model, red dashed line (‘Model (ambiguity
component)’) is the spread generated by endogenous variation in confidence.




                                                                                                                  33
                                                          Figure 5: Time series of firm-level uncertainty
                                                           0.8

                                                                     Data
                                                           0.6       Model




                               Log deviation from trend
                                                           0.4



                                                           0.2



                                                            0



                                                          −0.2



                                                          −0.4
                                                            1985   1990      1995    2000   2005   2010




Notes: Black dashed line (‘Data’) is the dispersion of firm-level capital return forecasts across analysts constructed
by Senga (2015) and red solid line (‘Model’) is the model counterpart computed from the Kalman smoother.



the variation in the spread, which is countercyclical.
    The results point to a important takeaway on the role of financial shocks. On the one hand,
as shown by Figure 4, part of the observed spread is explained by the endogenous model-implied
component and therefore there is less empirical need for finding financial shocks. On the other hand,
the propagation mechanism produced by our information friction makes the estimated shocks, whose
time-series properties are disciplined by the observable proxy, have large and empirically plausible
effects on the observed macroeconomic aggregates.


4.3        Time-series evidence from firm-level survey data
While our theory puts tight restrictions on time-varying uncertainty through the feedback between
learning and economic activity, we can use evidence outside the model to test its predictions. In
this section we show that our model-implied firm-level confidence process lines up well with the
time-series pattern in uncertainty directly measured from the micro survey data.
    Our measure of confidence is the cross-sectional average dispersion of firm-level capital return
forecasts. We use a series constructed by Senga (2015) using I/B/E/S and Compustat data.36
For each firm, Senga (2015) measures the coefficient of variation across analysts’ forecasts of the
return on capital for that firm. Taking the cross-sectional average across firms of that coefficient of
variation results in a time-series measure. For the model counterpart, we calculate the coefficient
of variation of capital return forecasts by computing expected capital returns implied by the set of
  36
       We thank Tatsuro Senga for generously sharing his data.



                                                                                    34
                   Table 6: Changing the Taylor rule coefficient on the credit spread


                                                 Std. of output growth
                                     φspread   Baseline Fixed uncertainty
                                        0       0.64           0.64
                                      -0.5      0.62           0.63
                                      -0.8      0.59           0.63
                                       -1       0.56           0.63

Notes: The standard deviation of output growth as the Taylor rule coefficient on the credit spread φspread is
changed from the original value (φspread = 0). All other parameter values are fixed to the estimated values.
‘Baseline’ refers to our baseline model with endogenous uncertainty. ‘Fixed uncertainty’ refers to a counterfactual
economy where the path of uncertainty is fixed exogenously to the original path computed from the economy with
φspread = 0.




productivity process (2.15).37 To control for low-frequency variations in the data possibly stemming
from the unbalanced panel and other factors, we detrend both the data and the model using a linear
trend. Figure 5 reports Senga (2015)’s uncertainty measure along with the model counterpart. The
model tracks the data reasonably well and the increases in uncertainty around the 2000-2001 and
2007-2009 recessions are of similar magnitudes.
   To conclude, the time-series variation in uncertainty implied from our estimated model broadly
matches firm-level data that was not used in the estimation. This external validation provides
additional evidence that the our endogenous uncertainty mechanism is empirically plausible.


4.4     Policy implications of endogenous uncertainty
Finally, the fact that in our model uncertainty is endogenous has important policy implications.
To illustrate this point, we conduct two policy experiments. First, we evaluate the impact of
modifying the Taylor rule to incorporate an adjustment to the credit spread. Table 6 reports the
standard deviation of output growth as we keep all parameters at their baseline estimated values but
change the Taylor rule coefficient on the credit spread φspread from the original value of zero in the
estimated model. The standard deviation decreases as monetary policy responds more aggressively
to the spread movements. For example, the standard deviation decreases from 0.64 to 0.56 when
the coefficient φspread decreases from 0 to −1.
    We find that the reduction in output variability in this counterfactual policy intervention comes
  37
    In terms of mapping the model to data, the idea here is that the representative agent samples experts’ forecast and
aggregates them when making decisions. Since the agent is ambiguity averse, stronger disagreement among experts
about conditional firm-level mean returns generates lower confidence in probability assessments of the future.



                                                          35
                                        Figure 6: Government spending multiplier

                                        3
                                                 Baseline
                                                 RE counterfactual
                                       2.5



                                        2



                             dYt/dGt   1.5



                                        1



                                       0.5


                                             5       10      15      20   25   30   35   40




Notes: We plot the government spending multiplier for output. We hit the economy with a positive government
spending shock at t = 1 and the path of government spending follows an AR(1) process. Thick black solid line
(‘Baseline’) is our model with endogenous uncertainty and thick red dashed line (‘RE counterfactual’) is the
multiplier where we set the entropy constraint η = 0 while holding other parameters at their estimated values. In
thin blue solid lines, we plot the multipliers for various values of the entropy constraint in an increment of 0.02
from η = 0 to the estimated baseline value of η = 1.7.



from stabilizing the endogenous variation in uncertainty. To see this, we also show the effects of
policy changes in the counterfactual economy where the path of uncertainty is fixed to the original
one (labeled “Fixed uncertainty”). In this economy, changes in φspread have much smaller effects.
Indeed, the standard deviation decreases from 0.64 only up to 0.63.
    Second, we consider fiscal policy effects. In standard models, an increase in government spending
crowds out consumption and hence the government spending multiplier on output, dYt /dGt , tends
to be modest and below one. In our model, however, an increase in hours worked triggered by an
increase in government spending raises agents’ confidence, which feeds back and raises the level of
consumption and other economic activities. Because of this amplification effect, the government
spending multiplier could be larger and above one.
    In Figure 6, we plot the multiplier in our estimated model after a one-time, positive shock to
government spending at t = 1.38 The model predicts a multiplier that becomes larger than one
after six quarters with a peak value at around 3.1. In contrast, in the RE counterfactual, where
we set the entropy constraint to η = 0 and keep other parameters at their estimated values, the
multiplier stays persistently below one.39 We also plot the multipliers for various values of the
  38
      We assume that the government spending Gt in the resource constraint (2.12) is given by Gt = gt Yt , where gt
follows ln gt = (1 − 0.95) ln ḡ + 0.95 ln gt−1 + g,t .
   39
      We also computed a multiplier in the re-estimated RE model, where we set η = 0 and re-estimated the remaining
parameters, and found that there the multiplier also stays below one.


                                                                     36
entropy constraint in an increment of 0.02 from η = 0 to the estimated baseline value of η = 1.7
to further understand the role of confidence. Interestingly, the relationship between the size of the
entropy constraint and the government spending multiplier is non-linear; the higher the entropy
constraint, the larger effect an additional increase of the entropy constraint has on the size of the
multiplier. An increase in government spending raises hours and hence confidence, which in turn
feeds back to further raise hours and confidence. When ambiguity is larger, this feedback is stronger
and hence the effect of an increase in the entropy constraint magnifies and has a stronger effect on
the government spending multiplier.
    It is important to emphasize that the large effects of government spending on output are not
welfare increasing even though it arises due to a reduction in uncertainty. Indeed, since in this model
learning arises at firm-level there are no information externalities that the government can correct.
This is in contrast to models where learning occurs through observing the aggregate economy and it
highlights the importance of modeling the underlying source of uncertainty for evaluating policies.
    At a more general level, the comparisons of these counterfactual models in the monetary and
fiscal policy experiments underscore the importance for policy analysis of modeling time-variation
in uncertainty as an endogenous response that in turn further affects economic decisions.


5    Conclusion
In this paper we construct a tractable heterogeneous-firm business cycle model in which a represen-
tative household faces Knightian uncertainty about the firm level profitability. Firm’s production
serves as a signal about this hidden state and learning is more informative for larger production
scales. The feedback loop between economic activity and confidence makes our model behave as a
standard linear business cycle model with (i) countercyclical wedges in the equilibrium supply for
labor, for risk-free as well as for risky assets, (ii) positive co-movement of aggregate variables in
response to either supply or demand shocks, and (iii) strong internal propagation with amplified and
hump-shaped dynamics. When the model is estimated using US macroeconomic and financial data,
we find that (i) a financial shock emerges as a key source of business cycles, (ii) the empirical role
of traditional frictions become smaller, and (iii) the aggregate activity becomes more responsive
to monetary and fiscal policies. We conclude that endogenous idiosyncratic uncertainty is a
quantitatively important mechanism for understanding business cycles.




                                                  37
References
An, S. and F. Schorfheide (2007): “Bayesian Analysis of DSGE Models,” Econometric Reviews,
 26, 113–172.

Angeletos, G.-M., F. Collard, and H. Dellas (2014): “Quantifying Confidence,” NBER
 Working Paper No. 20807.

Angeletos, G.-M. and J. La’O (2009): “Noisy business cycles,” in NBER Macroeconomics
 Annual 2009, Volume 24, 319–378.

——— (2013): “Sentiments,” Econometrica, 81, 739–779.

Arellano, C., Y. Bai, and P. J. Kehoe (2012): “Financial Markets and Fluctuations in
 Uncertainty,” Federal Reserve Bank of Minneapolis Staff Report.

Bachmann, R. and C. Bayer (2013): “‘Wait-and-See’ Business Cycles?” Journal of Monetary
 Economics, 60, 704–719.

Barro, R. J. and R. G. King (1984): “Time-Separable Preferences and Intertemporal-
 Substitution Models of Business Cycles,” Quarterly Journal of Economics, 99, 817–839.

Basu, S. and B. Bundick (2012): “Uncertainty Shocks in a Model of Effective Demand,” NBER
 Working Paper No. 18420.

Bernanke, B. S., M. Gertler, and S. Gilchrist (1999): “The Financial Accelerator in a
 Quantitative Business Cycle Framework,” in Handbook of Macroeconomics, ed. by J. B. Taylor
 and M. Woodford, Amsterdam: Elsevier, vol. 1, Part C, chap. 21, 1341–1393.

Bianchi, F., C. L. Ilut, and M. Schneider (2014): “Uncertainty Shocks, Asset Supply and
  Pricing over the Business Cycle,” NBER Working Paper No. 20081.

Bloom, N. (2009): “The Impact of Uncertainty Shocks,” Econometrica, 77, 623–685.

Bloom, N., M. Floetotto, N. Jaimovich, I. Saporta-Eksten, and S. Terry (2014):
 “Really Uncertain Business Cycles,” Working Paper.

Born, B. and J. Pfeifer (2014): “Policy Risk and the Business Cycle,” Journal of Monetary
 Economics, 68, 68–85.

Caplin, A. and J. Leahy (1993): “Sectoral Shocks, Learning, and Aggregate Fluctuations,” The
 Review of Economic Studies, 60, 777–794.

Chari, V. V., P. J. Kehoe, and E. R. McGrattan (2007): “Business Cycle Accounting,”
 Econometrica, 75, 781–836.

                                            38
Christiano, L. J., M. Eichenbaum, and C. L. Evans (2005): “Nominal Rigidities and the
 Dynamic Effects of a Shock to Monetary Policy,” Journal of Political Economy, 113, 1–45.

Christiano, L. J., M. S. Eichenbaum, and M. Trabandt (2015): “Understanding the Great
 Recession,” American Economic Journal: Macroeconomics, 7, 110–167.

Christiano, L. J., C. L. Ilut, R. Motto, and M. Rostagno (2010): “Monetary Policy and
 Stock Market Booms,” NBER Working Papers 16402.

Christiano, L. J., R. Motto, and M. Rostagno (2014): “Risk Shocks,” American Economic
 Review, 104, 27–65.

Cochrane, J. H. (2011): “Presidential address: Discount rates,” Journal of Finance, 66, 1047–
 1108.

Cúrdia, V. and M. Woodford (2010): “Credit Spreads and Monetary Policy,” Journal of
  Monetary, Credit, and Banking, 42, 3–35.

David, J. M., H. A. Hopenhayn, and V. Venkateswaran (2015): “Information, Misalloca-
 tion, and Aggregate Productivity,” Quarterly Journal of Economics, forthcoming.

Eggertsson, G. B. et al. (2003): “Zero bound on interest rates and optimal monetary policy,”
 Brookings Papers on Economic Activity, 2003, 139–233.

Epstein, L. G. and M. Schneider (2003a): “IID: independently and indistinguishably
 distributed,” Journal of Economic Theory, 113, 32–50.

——— (2003b): “Recursive Multiple-Priors,” Journal of Economic Theory, 113, 1–31.

Eusepi, S. and B. Preston (2015): “Consumption Heterogeneity, Employment Dynamics and
 Macroeconomic Co-movement,” Journal of Monetary Economics, 71, 13–32.

Fajgelbaum, P., E. Schaal, and M. Taschereau-Dumouchel (2016): “Uncertainty Traps,”
  Quartery Journal of Economics, forthcoming.

Fernández-Villaverde, J., P. Guerrón-Quintana, K. Kuester, and J. F. Rubio-
 Ramı́rez (2015): “Fiscal Volatility Shocks and Economic Activity,” American Economic Review,
 forthcoming.

Fernández-Villaverde, J., P. Guerrón-Quintana, J. F. Rubio-Ramı́rez, and M. Uribe
 (2011): “Risk Matters: The Real Effects of Volatility Shocks,” American Economic Review, 101,
 2530–2561.

Fisher, J. D. (2015): “On the Structural Interpretation of the Smets-Wouters Risk Premium
  Shock,” Journal of Money, Credit and Banking, 47, 511–516.

                                             39
Gilboa, I. and D. Schmeidler (1989): “Maxmin Expected Utility with Non-unique Prior,”
 Journal of Mathematical Economics, 18, 141–153.

Gilchrist, S. and E. Zakrajšek (2012): “Credit Spreads and Business Cycle Fluctuations,”
 American Economic Review, 102, 1692–1720.

Gourio, F. (2014): “Financial distress and endogenous uncertainty,” Manuscript.

Hansen, G. D. (1985): “Indivisible Labor and the Business Cycle,” Journal of Monetary
 Economics, 16, 309–337.

Ilut, C. and M. Schneider (2014): “Ambiguous Business Cycles,” American Economic Review,
  104, 2368–2399.

Jaimovich, N. and S. Rebelo (2009): “Can News about the Future Drive the Business Cycle?”
  American Economic Review, 99, 1097–1118.

Kehrig, M. (2015): “The Cyclical Nature of Productivity Dispersion,” Working Paper.

Kozlowski, J., L. Veldkamp, and V. Venkateswaran (2015): “The tail that wags the
 economy: Belief-driven business cycles and persistent stagnation,” NBER Working Paper No.
 21719.

Lorenzoni, G. (2009): “A Theory of Demand Shocks,” American Economic Review, 99, 2050–
 2084.

Marinacci, M. (1999): “Limit Laws for Non-Additive Probabilities, and Their Frequentist
 Interpretation,” Journal of Economic Theory, 84, 145–195.

Ordoñez, G. (2013): “The Asymmetric Effects of Financial Frictions,” Journal of Political
 Economy, 5, 844–895.

Rogerson, R. (1988): “Indivisible Labor, Lotteries and Equilibrium,” Journal of Monetary
 Economics, 21, 3–16.

Saijo, H. (2014): “The Uncertainty Multiplier and Business Cycles,” Working Paper.

Senga, T. (2015): “A New Look at Uncertainty Shock: Imperfect Information and Misallocation,”
  Working Paper.

Shimer, R. (2009): “Convergence in Macroeconomics: The Labor Wedge,” American Economic
  Journal: Macroeconomics, 1, 280–297.

Sims, C. A. (2002): “Solving Linear Rational Expectations Models,” Computational Economics,
  20, 1–20.

                                             40
Smets, F. and R. Wouters (2007): “Shocks and Frictions in US Business Cycles: A Bayesian
 DSGE Approach,” The American Economic Review, 97, 586–606.

Straub, L. and R. Ulbricht (2016):                       “Endogenous Uncertainty and Credit Crunches,”
  Manuscript.

Taylor, J. B. (2008): “Monetary Policy and the State of the Economy,” Testimony before
  theCommittee on Financial ServicesU.S. House of Representatives.

van Nieuwerburgh, S. and L. Veldkamp (2006): “Learning Asymmetries in Real Business
  Cycles,” Journal of Monetary Economics, 53, 753–772.



6     Appendix (For online publication)
6.1    A model of learning about firm-specific demand
In this section, we show that the baseline model with additive shock in the production function
(2.5) can be reinterpreted as a model where firms learn about their demand from noisy signals.
    There is a continuum of firms, indexed by l ∈ [0, 1], which produce intermediate goods and
sell them to a large representative “conglomerate”. The conglomerate, who holds shares of the
intermediate firms, acts in a perfectively competitive manner and combine the intermediate goods
to produce final goods. To ease exposition, we momentarily abstract from all aggregate shocks and
labor-augmenting technological growth.
    The conglomerate combines intermediate output Yl,t according to the following CES aggregator:
                                                                   σ
                                       Z    1     σ−1   σ−1
                                                                 σ−1
                                Yt =             zl,t Yl,t dl
                                                    σ     σ
                                                                        ,   σ>1
                                         0


where zl,t follows an AR(1) as in (2.4). In turn, intermediate goods Yl,t are produced according to

                                                         α      1−α
                                                 Yl,t = Kl,t−1 Hl,t .

We assume that all agents, including the conglomerate and households, cannot observe the real-
ization of zl,t . Instead, after the production of final and intermediate goods they observe noisy
signals
                                 sl,t = Yl,t zl,t + ν̃l,t , ν̃l,t ∼ N (0, σν̃2 )             (6.1)

where ν̃l,t is an observation error. Agents use all available information, including the path of signals
sl,t and intermediate output Yl,t , to form estimates about the realization of zl,t .
     In this context, it is natural to think zl,t as a “quality” of intermediate good l that is difficult
to observe. Alternatively, since the final good could directly be used for consumption, zl,t can be

                                                          41
interpreted as an unobservable demand for a variety l. Crucially, (6.1) implies that the signal-to-
noise ratio is increasing in the level of output Yl,t . It is plausible that firms learn more about the
quality or demand, zl,t , of their goods when they produce and sell more. For example, when a
restaurant serves more customers it generates more website reviews and hence people learn more
about the quality of their meals.
    Intermediate firms l choose price Pl,t and inputs to maximize the shareholder value
                                                    ∞
                                                    X
                                              E0∗           M0t Dl,t .
                                                    t=0


Dl,t is the dividend payout to the conglomerate given by

                                              Pl,t
                                    Dl,t =         Yl,t − Wt Hl,t − Il,t ,
                                              Pt

where Pt is the price of the final good given by
                                                                          1
                                                Z      1               1−σ
                                                              1−σ
                                        Pt =                Pl,t  dl           .
                                                    0


The conglomerate, in turn, choose intermediate inputs Yl,t and shares θl,t to maximize the share-
holder value                                ∞
                                            X
                                          ∗
                                        E0      M0t Dt ,
                                                     t=0

where Dt is the dividend payout to the households
                                        Z                                          Z
                                                          e                              e
                            Dt = Yt +       (Dl,t +     Pl,t )θl,t−1 dl   −            Pl,t θl,t dl.

The household side of the economy is the same as in the baseline model except that the households
hold shares θt of conglomerates instead of shares θl,t of intermediate firms.
   We now reintroduce aggregate shocks and utilization and describe the timing of the event at
period t.

  1. Stage 1 : Pre-production stage

        • Agents observe the realization of aggregate shocks (At and ∆kt ).
        • Given forecasts about zl,t and its associated worst-case scenario, firms hire labor and
          choose price (Hl,t and Pl,t ). The household supply labor Ht and the labor market clears
          at the wage rate Wt .
        • Firms produce intermediate output Yl,t and sells it to the conglomerates at price Pl,t .

  2. Stage 2 : Post-production stage

                                                            42
         • zl,t realize (but are unobservable) and production of the final goods Yt takes place. Agents
           observe noisy signals sl,t .
         • Firms and conglomerates update estimates about zl,t and use it to form forecasts for
           production next period.
         • Firms make investment Il,t and pay out dividends Dl,t to the conglomerates. The
           conglomerates make asset purchase decisions θl,t and pay out dividends Dt to the
           households. Finally, households make consumption and asset purchase decisions (Ct ,
           Bt , and θt ).

     In the perfect competition limit (σ → ∞), this version of the model is observationally equivalent
to the baseline model at the aggregate level. The introduction of the conglomerate is important
for two reasons. First, it prohibits households from inferring zl,t from utility by directly consuming
intermediate goods Yl,t . Second, it generates countercyclical ex-post excess return on equity held by
the household. This is because dividend payout by the conglomerate to the household (Dt ) is based
on the realized return on capital. Note that the dividend payout by the intermediate firms to the
conglomerate (Dl,t ) is not based on the realized return since the production and market clearing of
Yl,t happens before the realization of zl,t .


6.2     Recursive competitive equilibrium for the frictionless model
We collect exogenous aggregate state variables (such as aggregate TFP) in a vector X with a
cumulative transition function F (X 0 |X). The endogenous aggregate state is the distribution of
firm-level variables. A firm’s type is identified by the posterior mean estimate of productivity z̃l ,
the posterior variance Σl , and its capital stock Kl . The worst-case TFP is not included because it
is implied by the posterior mean and variance. We denote the cross-sectional distribution of firms’
type by ξ1 and ξ2 . ξ1 is a stage 1 distribution over (z̃l , Σl , Kl ) and ξ2 is a stage 2 distribution over
(z̃l0 , Σ0l , Kl ). ξ10 , in turn, is a distribution over (z̃l0 , Σ0l , Kl0 ) at stage 1 in the next period.40
       First, consider the household’s problem. The household’s wealth can be summarized by a
                →
                −
portfolio θl which consists of share θl for each firm and the risk-less bond holdings B. We use V1h
and V2h to denote the household’s value function at stage 1 and stage 2, respectively. We use m to
summarize the income available to the household at stage 2. The household’s problem at stage 1 is

                                                      H 1+φ
                                                                                
                             →
                             −                                  ∗        ˆ
                        V1h ( θl , B; ξ1 , X)
                                            = max −                h
                                                            + E [V2 (m̂; ξ2 , X)]
                                               H      1+φ
                                                              Z                                             (6.2)
                                        s.t. m̂ = W H + RB + (D̂l + P̂l )θl dl

  40
    See also Senga (2015) for a recursive representation of an imperfect information heterogeneous-firm model with
time-varying uncertainty.




                                                        43
where we momentarily use the hat symbol to indicate random variables that will be resolved at
stage 2. The household’s problem at stage 2 is
                                                                                                                
                                                                                   →
                                                                                   −
                                                                          Z
                           V2h (m; ξ2 , X)     = max
                                                  −
                                                  →
                                                      ln C + β                V1h ( θl 00 ; ξ10 , X 0 )dF (X 0 |X)
                                                   C, θl 00
                                                         Z
                                                                                                                     (6.3)
                                          s.t. C + B + Pl θl0 dl ≤ m
                                                    0


                                                  ξ10 = Γ(ξ2 , X)

In problem (6.2), households choose labor supply based on the worst-case stage 2 value (recall that
we use E ∗ to denote worst-case conditional expectations). The problem (6.3), in turn, describes
the household’s consumption and asset allocation problem given the realization of income and
aggregate states. In particular, they take as given the law of motion of the next period’s distribution
ξ10 = Γ(ξ2 , X), which in equilibrium is consistent with the firm’s policy function. Importantly, in
contrast to the stage 2 problem, a law of motion that describes the evolution of ξ2 from (ξ1 , X)
is absent in the stage 1 problem. Indeed, if there is no ambiguity in the model, agents take as
given the law of motion ξ2 = Υ(ξ1 , X), which in equilibrium is consistent with the firm’s policy
function and the true data generating process of the firm-level TFP. Since agents are ambiguous
about each firm’s TFP process, they cannot settle on a single law of motion about the distribution
of firms. Finally, the continuation value at stage 2 is governed by the transition density of aggregate
exogenous states X.
     Next, consider the firms’ problem. We use v1f and v2f to denote the firm’s value function at stage
1 and stage 2, respectively. Firm l’s problem at stage 1 is

                                  v1f (z̃l , Σl , Kl ; ξ1 , X) = max E ∗ [v2f (z̃ˆl0 , Σ0l , Kl ; ξˆ2 , X)]
                                                                    Hl
                                                                                                                     (6.4)
                                                          s.t. Updating rules (2.8) and (2.10)

and firm l’s problem at stage 2 is
                                                                 Z                                     
     v2f (z̃l0 , Σ0l , Kl ; ξ2 , X)                                 f 0       0    0 0       0      0
                                      = max λ(Yl − W Hl − Il ) + β v1 (z̃l , Σl , Kl ; ξ1 , X )dF (X |X)
                                          Il
                                                                                                                     (6.5)
                              s.t. Kl0 = (1 − δ)Kl + Il
                                       ξ10 = Γ(ξ2 , X)

where we simplify the exposition by expressing a firm’s value in terms of the marginal utility λ of
the representative household. Similar to the household’s problem, a firm’s problem at stage 1 is to
choose the labor demand so as to maximize the worst-case stage 2 value. Note that the posterior
mean z̃l0 will be determined by the realization of output Yl at stage 2 while the posterior variance
Σ0l is determined by Σl and the input level at stage 1. In problem (6.5), the firm then chooses
investment taking as given the realization of output and the updated estimates of its productivity.

                                                                         44
    The recursive competitive equilibrium is therefore a collection of value functions, policy func-
tions, and prices such that

   1. Households and firms optimize; (6.2) – (6.5).

   2. The labor market, goods market, and asset markets clear.

   3. The law of motion ξ10 = Γ(ξ2 , X) is induced by the firms’ policy function Il (z̃l0 , Σ0l , Kl ; ξ2 , X).


6.3     Equilibrium conditions for the estimated model
As we describe below in Appendix 6.4, we express equilibrium conditions from the perspective of
agents at both stage 1 and stage 2. At stage 1, we need not only equilibrium conditions for variable
determined before production (such as utilization and hours), but also those for variables determined
after production (such as consumption and investment). At stage 2, we treat variables determined
before production as pre-determined. To do this, we index period t variables determined at stage
1 by t − 1 and period t variables determined at stage 2 by t. We then combine stage 1 and stage 2
equilibrium conditions by using the certainty equivalence property of linearized decision rules.
    We scale the variables in order to introduce stationary:

             Ct           Yl,t            Kl,t−1          Il,t           Yel,t−1       Wt
      ct =     t
                 , yl,t =   t
                               , kl,t−1 =    t
                                                 , il,t =   t
                                                               , y
                                                                 e l,t =      t
                                                                                 , wt = t , λ̃t = γ t λt , µ̃l,t = γ t µl,t ,
             γ            γ                γ              γ                γ           γ

where µl,t is the Lagrangian multiplier on the capital accumulation equation of firm l.
   We first describe the stage 1 equilibrium conditions. An individual firm l’s problem is to choose
{Ul,t , Kl,t , Hl,t , Il,t } to maximize
                           ∞
                           X
                     Et∗         β t+s λt+s [Pt+s
                                               W
                                                  Yl,t+s − Wt+s Hl,t+s − Il,t+s − a(Ul,t+s )Kl,t+s−1 ],
                           s=0


where PtW is the price of whole-sale goods produced by firms and λt , and its detrended counterpart
λ̃t , is the marginal utility of the representative household:

                                                       γ                   1
                                           λ̃t =              − βbEt∗             ,                                             (6.6)
                                                   ct − bct−1         γct+1 − bct

subject to the following three constraints. The first constraint is the production function:

                                                                  ∗
                                                yl,t = At yel,t {Et−1 zl,t + νl,t },                                            (6.7)

where yel,t is the input,
                                                                            1−α
                                                   yel,t = (Ul,t kl,t−1 )α Hl,t .                                               (6.8)



                                                                45
The worst case TFP Et∗ zl,t+1|t+1 is given by

                              Et∗ zl,t+1|t+1 = (1 − ρz )z̄ + ρz z̃l,t|t − ηa ρz
                                                                                   p
                                                                                    Σl,t|t .                    (6.9)

and the Kalman filter estimate z̃l,t|t evolves according to

                                                                     yl,t At ) − z̃l,t|t−1 ),
                               z̃l,t|t = z̃l,t|t−1 + Gainl,t (yl,t /(e                                         (6.10)

where Gainl,t is the Kalman gain and is given by
                                                                       
                                                          Σl,t|t−1
                                          Gainl,t =               −1 2 .                                       (6.11)
                                                    Σl,t|t−1 + yel,t σν

The second constraint is the capital accumulation equation:
                                                                    2 
                                                          κ γil,t
                              γkl,t = (1 − δ)kl,t−1 + 1 −          −γ      il,t                                (6.12)
                                                          2 il,t−1

and the last constraint is the law of motion for posterior variance:

                                           Σl,t|t = (1 − Gainl,t )Σl,t|t−1 .                                   (6.13)

As described in the main text, firms take into account the impact of their input choice on worst-case
probabilities.
   The first-order necessary conditions for firms’ input choices are as follows:

   • FONC for Σl,t|t
                          
                         1                            −1
             ψl,t =βEt∗             W
                           λ̃t+1 Pt+1   At+1 ηa ρz Σl,t|t2 yel,t+1
                         2
                                                                                                               (6.14)
                                             σν2 ρ2z                 σν2 ρ2z (ρ2z Σl,t|t + σz2 )e2
                                                                                                yl,t+1
                                                                                                        
                   + ψl,t+1 2                                      − 2                                     ,
                               yel,t+1 (ρ2z Σl,t|t + σz2 ) + σν2 {fl,t+1    (ρ2z Σl,t|t + σz2 ) + σν2 }2

     where ψl,t is the Lagrangian multiplier for the law of motion of posterior variance.

   • FONC for Ul,t
                                             yl,t           2ασν2 (ρ2z Σl,t−1|t−1 + σz2 )e 2
                                                                                         yl,t
                                 λ̃t PtW α        + ψl,t 2 2
                                             Ul,t        yl,t (ρz Σl,t−1|t−1 + σz2 ) + σν2 }2 Ul,t
                                                        {e                                                     (6.15)
                               =λ̃t {χ1 χ2 Ul,t + χ2 (1 − χ1 )}kl,t−1

   • FONC for Hl,t

                                       yl,t        2(1 − α)σν2 (ρ2z Σl,t−1|t−1 + σz2 )e  2
                                                                                        yl,t
                     λ̃t (1 − α)PtW         + ψl,t 2 2                                       = λ̃t w̃t ,       (6.16)
                                       Hl,t        yl,t (ρz Σl,t−1|t−1 + σz2 ) + σν2 }2 Hl,t
                                                  {e

                                                            46
     where w̃t is the real wage: w̃t ≡ wt /Pt .

   • FONC for kl,t
                                                                                  k
                                                                                 Rt+1
                                             γ λ̃t =   βEt∗ (1     −    k
                                                                       ∆t )λ̃t+1      ,
                                                                                 πt+1
     where the return on capital is defined as
                                
                                        yl,t
                         Rtk   = PtW α         + ql,t (1 − δ) − a(Ul,t )
                                       kl,t−1
                                                                                                (6.17)
                                             2ασν2 (ρ2z Σl,t−1|t−1 + σz2 )e2
                                                                          yl,t
                                                                                 
                                    k                                                  πt
                                + ψl,t 2 2                       2      2  2
                                                                                   ×        ,
                                      {eyl,t (ρz Σl,t−1|t−1 + σz ) + σν } kl,t−1     ql,t−1

     where

                                                          ql,t = µ̃l,t /λ̃t ,                   (6.18)
                                                           k
                                                          ψl,t = ψl,t /λ̃t .                    (6.19)


   • FONC for il,t
                                                         2                        
                                             κ γil,t               γil,t         γil,t
                          γ λ̃t =γ µ̃l,t 1 −          −γ −κ              −γ
                                             2 il,t−1             il,t−1        il,t−1
                                                                      2                   (6.20)
                                                    γil,t+1       γil,t+1
                                 + βEt∗ µ̃l,t+1 κ           −γ
                                                      il,t          il,t
                                                                          R1
   We eliminate l-subscripts to denote cross-sectional means (e.g., yt ≡ 0 yl,t dl).
   Firms sell their wholesale goods to monopolistically competitive retailers. Conditions associated
with Calvo sticky prices are
                                                                                  θp
                                                                            πt+1
                                  Ptn    =   λ̃t PtW yt   +   ξp βEt∗                      n
                                                                                         Pt+1   (6.21)
                                                                             π̄
                                                              θ −1
                                                         πt+1 p
                                   Ptd= λ̃t yt +       ξp βEt∗        d
                                                                    Pt+1                        (6.22)
                                                          π̄
                                                          n
                                              ∗       θp     Pt
                                            pt =                                                (6.23)
                                                    θp − 1 Ptd
                                                               1−θp
                                                  ∗ 1−θp        π̄
                                   1 = (1 − ξp )(pt )    + ξp                                   (6.24)
                                                                πt
                                                                 −θp
                                                       yt∗ = p̃t       yt                       (6.25)
                                                                                      −θp
                                                                                  π̄
                                    p̃t = (1 −      ξp )(p∗t )−θp      + ξp                     (6.26)
                                                                                  πt



                                                              47
   Conditions associated with Calvo sticky wages are

                                                                 vt1 = vt2                                                     (6.27)

                                                         w      ∗
                                                                   θw −1      
                                                        πt+1 wt+1
                           = vt1     (wt∗ )1−θw λ̃t Ht w̃t
                                              +                     ξw βEt∗1
                                                                          vt+1                                                 (6.28)
                                                           π̄wt∗
                                                          w ∗ θw (1+η)
                    2     θw    ∗ −θw (1+η) 1+η         ∗ πt+1 wt+1             2
                   vt =       (w )         Ht + ξw βEt                         vt+1                                            (6.29)
                        θw − 1 t                               π̄wt∗
                                                            1−θw
                                            ∗ 1−θw       ∗    π̄
                             1 = (1 − ξw )(wt )    + ξw Et                                                                     (6.30)
                                                             πtw
                                                          πtw = πt w̃t /w̃t−1                                                  (6.31)

   Households’ Euler equation:
                                                    γ λ̃t = βEt∗ λ̃t+1 Rt /πt+1                                                (6.32)

   Monetary policy rule:
                                                        ρR           φπ  φY 1−ρR
                                    Rt           Rt−1               πt        yt
                                       =                                                 R,t                                  (6.33)
                                    R̄            R̄                π̄        ȳ

   Resource constraint:
                                                        ct + it = (1 − ḡ)yt                                                   (6.34)

   The 30 endogenous variables we solve are:

                kt , yt , it , ct , Ht , Ut , ỹt , λ̃t , µ̃t , ψt , Rt , Rtk , qt , ψtk , Et∗ zt+1 , z̃t|t , Σt|t , Gaint ,
                PtW , Ptn , Ptd , p∗t , πt , yt∗ , p̃t , vt1 , vt2 , w̃t , wt∗ , πtw

We have listed 30 conditions above, from (6.6) to (6.34). Of the above 30 endogenous variables,
those that are determined at stage 1 are:

                                                 Ht , Ut , yet , vt1 , vt2 , w̃t , wt∗ , πtw

   We now describe the state 2 equilibrium conditions. To avoid repetitions, we only list conditions
that are different from the state 1 conditions.

   • (6.7):
                                                       yl,t = yel,t−1 At {zl,t + νl,t },

   • (6.8):
                                                                                  1−α
                                                           yel,t = (Ul,t kl,t )α Hl,t



                                                                     48
• (6.10):
                                            z̃l,t|t = z̃l,t|t−1 + Gainl,t (yl,t /At − z̃l,t|t−1 )

• (6.11):                                                                                  
                                                                   Σl,t|t−1
                                                  Gainl,t =
                                                            Σl,t|t−1 + yel,t−1 σν2

• (6.13):
                                                    Σl,t|t = (1 − Gainl,t )Σl,t|t−1

• (6.14):
                                   
                                  1                             −1
                  ψl,t =βEt∗        λ̃t+1 Pt+1W
                                                 At+1 ηa ρz Σl,t|t2 yel,t
                                  2
                                                     σν2 ρ2z                 σν2 ρ2z (ρ2z Σl,t|t + σz2 )e2
                                                                                                        yl,t
                                                                                                            
                            + ψl,t+1 2 2                                  − 2 2
                                        yel,t (ρz Σl,t|t + σz2 ) + σν2 {e   yl,t (ρz Σl,t|t + σz2 ) + σν2 }2

• (6.15):

                                                                         2ασν2 (ρ2z Σl,t|t + σz2 )e 2
                                                                                                  yl,t
                                                                                                                   
                                                    yl,t+1
                             Et∗               W
                                       λ̃t+1 Pt+1 α          + ψl,t+1 2 2
                                                     Ul,t             yl,t (ρz Σl,t|t + σz2 ) + σν2 }2 Ul,t
                                                                     {e
                           =Et∗ λ̃t+1 {χ1 χ2 Ul,t + χ2 (1 − χ1 )}kl,t


• (6.16):



                                                               2(1 − α)σν2 (ρ2z Σl,t|t + σz2 )e  2 
                                                                                                yl,t
                  
                                       W yl,t+1
            Et∗       λ̃t+1 (1 −   α)Pt+1             + ψl,t+1 2 2                                   = Et∗ λ̃t+1 w̃t
                                          Hl,t                 yl,t (ρz Σl,t|t + σz2 ) + σν2 }2 Hl,t
                                                              {e

• (6.17):
                                    
                                            yl,t
                            Rtk    = PtW α         + ql,t (1 − δ) − a(Ul,t−1 )
                                           kl,t−1
                                                 2ασν2 (ρ2z Σl,t−1|t−1 + σz2 )e2
                                                                              yl,t−1
                                                                                       
                                        k                                                    πt
                                    + ψl,t 2         2                 2       2  2
                                                                                         ×
                                          {eyl,t−1 (ρz Σl,t−1|t−1 + σz ) + σν } kl,t−1     ql,t−1

• (6.28):
                                                                                        w     ∗
                                                                                                    θw −1
                                                                                        πt+1 wt+1
                            vt1    =    (wt∗ )1−θw Et∗ λ̃t+1 Ht w̃t   +   ξw βEt∗                             1
                                                                                                             vt+1
                                                                                          π̄wt∗

• (6.31):
                                                        πtw = Et∗ πt+1 w̃t /w̃t−1


                                                                 49
6.4    Solution procedure
Here we describe the general solution procedure of the model. The procedure follows the method
used in the example in Section 2.5. First, we derive the law of motion assuming that the model is
a rational expectations model where the worst case expectations are on average correct. Second,
we take the equilibrium law of motion formed under ambiguity and then evaluate the dynamics
under the econometrician’s data generating process. We provide a step-by-step description of the
procedure:

  1. Find the worst-case steady state.
      We first compute the steady state of the filtering problem (2.8), (2.9), (2.10), and (2.15),
      under the worst-case mean (2.19) to find the firm-level TFP at the worst-case steady state,
      z̄ 0 . We then solve the steady state for other equilibrium conditions evaluated at z̄ 0 .

  2. Log-linearize the model around the worst-case steady state.
      We can solve for the dynamics using standard tools for linear rational expectation models.
      We base our discussion based on the method proposed by Sims (2002).
      We first need to deal with the issue that idiosyncratic shocks realize at the beginning of stage
      2. Handling this issue correctly is important, since variables chosen at stage 1, such as input
      choice, should be based on the worst-case TFP, while variables chosen at stage 2, such as
      consumption and investment, would be based on the realized TFP (but also on the worst-case
      future TFP). To do this, we exploit the certainty equivalence property of linear decision rules.
      We first solve for decision rules as if both aggregate and idiosyncratic shocks realize at the
      beginning of the period. We call them “pre-production decision rules”. We then solve for
      decision rules as if (i) both aggregate and idiosyncratic shocks realize at the beginning of the
      period and (ii) stage 1 variables are pre-determined. We call them “post-production decision
      rules”. Finally, when we characterize the dynamics from the perspective of the econometrician,
      we combine the pre-production and post-production decision rules and obtain and equilibrium
      law of motion.
      To obtain pre-production decision rules, we collect the linearized equilibrium conditions, which
      include firm-level conditions, into the canonical form:

                                  Γpre pre,0
                                   0 ŷt     = Γpre pre,0
                                                1 ŷt−1 + Ψ
                                                           pre
                                                               ωt + Υpre ηtpre ,

      where ŷtpre,0 is a column vector of size k that contains all variables and the conditional
      expectations. ŷtpre,0 = ytpre − ȳ0 denotes deviations from the worst-case steady state and
      ηt are expectation errors, which we define as ηtpre = ŷtpre,0 − Et−1 ∗
                                                                               ŷtpre,0 such that Et−1
                                                                                                   ∗
                                                                                                       ηtpre = 0.
      We define ωt = [el,t et ]0 , where el,t = [z,l,t ul,t νl,t ]0 is a vector of idiosyncratic shocks and



                                                      50
  et is a vector of aggregate shocks of size n. For example, for the baseline model introduced in
  Section 2, et is a 2 × 1 vector of aggregate TFP and financial shocks.
  The vector ŷtpre,0 contains firm-level variables such as firm l’s labor input, Hl,t . In contrast to
  other linear heterogeneous-agent models with imperfect information such as Lorenzoni (2009),
  all agents share the same information set. Thus, to derive the aggregate law of motion, we
  simply aggregate over firm l’s linearized conditions and replace firm-specific variables with
                                                                   R1
  their cross-sectional means (e.g., we replace Hl,t with Ht ≡ 0 Hl,t dl) and set el,t = 0, which
  uses the law of large numbers for idiosyncratic shocks.
  We order variables in ŷtpre,0 as
                                                            pre,0
                                                                 
                                                          ŷ1,t
                                           ŷtpre,0
                                                          pre,0 
                                                       = ŷ2,t   ,
                                                            pre,0
                                                          ŝt
          pre,0                                                                        pre,0
  where ŷ1,t   is a column vector of size k1 of variables determined at stage 1, ŷ2,t      is a column
                                                                pre,0      pre,0   pre,0 0
  vector of size k2 of variables determined at stage 2, and ŝt       = [ŝ1,t   ŝ2,t ] , where s1,t =
        ∗
  z̄ − Et−1 zt and s2,t = z̄ − z̃t|t .
  The resulting solution of pre-production decision rules is obtained applying the method
  developed by Sims (2002):

                                 ŷtpre,0 = Tpre ŷt−1
                                                   pre,0
                                                         + Rpre [03×1     et ]0 ,                (6.35)

  where Tpre and Rpre are k × k and k × (n + 3) matrices, respectively.
  The solution of post-production decision rules can be obtained in a similar way by first
  collecting the equilibrium conditions into the canonical form

                           Γpost
                            0 ŷt
                                 post,0
                                        = Γpost post,0
                                           1 ŷt−1 + Ψ
                                                       post
                                                            ωt + Υpost ηtpost ,

  and is given by
                               ŷtpost,0 = Tpost ŷt−1
                                                   post,0
                                                          + Rpost [03×1     et ]0 ,              (6.36)

  where
                                                            post,0
                                                                  
                                                          ŷ1,t
                                           ŷtpost,0
                                                          post,0 
                                                       = ŷ2,t    ,
                                                          ŝpost,0
                                                            t

  and Tpost and Rpost are k × k and k × (n + 3) matrices, respectively.

3. Characterize the dynamics from the econometrician’s perspective.
  The above law of motion was based on the worst-case probabilities. We need to derive the
  equilibrium dynamics under the true DGP, where the cross-sectional mean of firm-level TFP


                                                   51
is z̄. We are interested in two objects: the zero-risk steady state and the dynamics around
that zero-risk steady state.

(a) Find the zero-risk steady state.
    This the fixed point ȳ where the decision rules (6.35) and (6.36) are evaluated at the
    realized cross-sectional mean of firm-level TFP z̄:

                            ȳpre − ȳ0 = Tpre (ȳ − ȳ0 ),
                                                                                                              (6.37)
                            ȳpost − ȳ0 = Tpost (ȳ − ȳ0 ) + Rpost [s̄ 0(n+1)×1 ]0 ,

    where
                                                          ȳ1pre
                                                                

                                                   ȳ = ȳ2post  .
                                                                

                                                          s̄post
    Note that we do not feed in the realized firm-level TFP to the pre-production decision
    rules since idiosyncratic shocks realize at the beginning of stage 2.
    We obtain s̄ from
                                 s̄ = [Tpost
                                        3,1       Tpost
                                                   3,2             Tpost         0      0
                                                                    3,3 ](ȳ − ȳ ) + s̄ ,

    where Tpost   post       post
           3,1 , T3,2 , and T3,3 are 2×k1 , 2×k2 , and 2×2 submatrices of T
                                                                            post
                                                                                 , respectively:
                                                   post
                                                                    Tpost    Tpost
                                                                                   
                                                   T1,1              1,2      1,3
                                                   post
                                        Tpost   = T2,1             Tpost    Tpost
                                                                              2,3  ,
                                                                                   
                                                                     2,2
                                                   Tpost
                                                    3,1
                                                                     post
                                                                    T3,2     Tpost
                                                                              3,3


    where Tpost      post   post   post   post       post
              1,1 , T1,2 , T1,3 , T2,1 , T2,2 , and T2,3 are k1 × k1 , k1 × k2 , k1 × 2, k2 × k1 ,
    k2 × k2 , and k2 × 2 matrices, respectively.
(b) Dynamics around the zero-risk steady state.
    Denoting ŷt ≡ yt − ȳ the deviations from the zero-risk steady state, we combine the
    decision rules (6.35) and (6.36) evaluated at the true DGP and the equations for the
    zero-risk steady state (6.37) to characterize the equilibrium law of motion:

             ŷtpre = Tpre ŷt−1 + Rpre [03×1        et ]0 ,                                                  (6.38)
            ŷtpost = Tpost [ŷ1,t
                               pre
                                     ŷ2,t−1    ŝt−1 ]0 + Rpost [ˆs̃t        0 et ]0 ,                       (6.39)
               ˆs̃t = [Tpost
                        3,1     Tpost
                                 3,2      Tpost    pre
                                           3,3 ][ŷ1,t         ŷ2,t−1      ŝt−1 ]0 + Rpost
                                                                                        3,3 [03×1   et ]0 ,   (6.40)

    and
                                                             pre
                                                                
                                                          ŷ1,t
                                                          post 
                                                   ŷt = ŷ2,t  .                                           (6.41)
                                                            post
                                                          ŝt

                                                   52
Rpost
 3,3 is a 2 × n submatrix of R
                               post
                                    :
                                         post
                                                  Rpost    Rpost
                                                                 
                                         R1,1      1,2      1,3
                                         post     post
                              Rpost   = R2,1     R2,2     Rpost
                                                            2,3  ,
                                                                 

                                         Rpost
                                          3,1     Rpost
                                                   3,2     Rpost
                                                            3,3


where Rpost     post   post   post   post   post   post       post
         1,1 , R1,2 , R1,3 , R2,1 , R2,2 , R2,3 , R3,1 , and R3,2 are k1 × 2, k1 × 1, k1 × n,
k2 × 2, k2 × 1, k2 × n, 2 × 2, and 2 × 1 matrices, respectively.
We combine equations (6.38), (6.39), (6.40), and (6.41) to obtain the equilibrium law of
motion. To do so, we first define submatrices of Tpre and Rpre :
                                                  pre 
                                                  T1
                                                  pre 
                                        Tpre   = T2  ,
                                                  Tpre
                                                   3


where Tpre  pre      pre
       1 , T2 , and T3   are k1 × k, k2 × k, and 2 × k matrices, respectively, and
                                             pre
                                                     Rpre
                                                          
                                             R1,1     1,2
                                             pre
                                   Rpre   = R2,1    Rpre
                                                      2,2  ,
                                                          

                                             Rpre
                                              3,1    Rpre
                                                      3,2


where Rpre    pre    pre    pre    pre        pre
       1,1 , R1,2 , R2,1 , R2,2 , R3,1 , and R3,2 are k1 × 3, k1 × n, k2 × 3, k2 × n, 2 × 3, and
2 × n matrices, respectively.
We then define matrices T and R. A k × k matrix T is given by
                                               pre 
                                               T1
                                          T =  T2  ,
                                                   

                                                T3

where T2 and T3 are k2 × k2 and 2 × 2 matrices, respectively, given by

           T2 = [Q2,1     Q2,2 + Tpost   post post
                                  2,2 + R2,1 T3,2         Q2,3 + Tpost   post post
                                                                  2,3 + R2,1 T3,3 ],

           T3 = [Q3,1     Q3,2 + Tpost   post post
                                  3,2 + R3,1 T3,2         Q3,3 + Tpost   post post
                                                                  3,3 + R3,1 T3,3 ],


and Q2,1 , Q2,2 , and Q2,3 are k2 × k1 , k2 × k2 , and k2 × 2 submatrices of Q2 , where
Q2 ≡ (Tpost       post post   pre
         2,1 +R2,1 T3,1 )T1 , so that Q2 = [Q2,1      Q2,2 Q2,3 ]. Similarly, Q3,1 , Q3,2 , and
Q3,3 are k3 ×k1 , k3 ×k2 , and k3 ×2 submatrices of Q3 , where Q3 ≡ (Tpost    post post
                                                                      3,1 +R3,1 T3,1 )T1 ,
                                                                                            pre

so that Q3 = [Q3,1 Q3,2 Q3,3 ].




                                          53
          A k × n matrix R is given by              pre 
                                                    R1,2
                                               R =  R2  ,
                                                        

                                                     R3
          where

                             R2 = Tpost pre    post  post pre    post     post
                                   2,1 R1,2 + R2,1 (T3,1 R1,2 + R3,3 ) + R2,3 ,

                             R3 = Tpost pre    post  post pre    post     post
                                   3,1 R1,2 + R3,1 (T3,1 R1,2 + R3,3 ) + R3,3 .



          The equilibrium law of motion is then given by

                                            ŷt = Tŷt−1 + Ret .


6.5    Data sources
We use the following data:

  1. Real GDP in chained dollars, BEA, NIPA table 1.1.6, line 1.

  2. GDP, BEA, NIPA table 1.1.5, line 1.

  3. Personal consumption expenditures on nondurables, BEA, NIPA table 1.1.5, line 5.

  4. Personal consumption expenditures on services, BEA, NIPA table 1.1.5, line 6.

  5. Gross private domestic fixed investment (nonresidential and residential), BEA, NIPA table
     1.1.5, line 8.

  6. Personal consumption expenditures on durable goods, BEA, NIPA table 1.1.5, line 4.

  7. Nonfarm business hours worked, BLS PRS85006033.

  8. Civilian noninstitutional population (16 years and over), BLS LNU00000000.

  9. Effective federal funds rate, Board of Governors of the Federal Reserve System.

 10. Moody’s Seasoned Baa Corporate Bond Yield Relative to Yield on 10-Year Treasury Constant
     Maturity (Baa spread), downloaded from Federal Reserve Economic Data, Federal Reserve
     Bank of St. Louis.

   We then conduct the following transformations of the above data:

 11. Real per capita GDP: (1)/(8)


                                               54
12. GDP deflator: (2)/(1)

13. Real per capita consumption: [(3)+(4)]/[(8)×(12)]

14. Real per capita investment: [(5)+(6)]/[(8)×(12)]

15. Per capita hours: (7)/(8)




                                             55
6.6     Additional figures from the estimated model


Figure 7: Data and predicted endogenous variables from the estimation: rational expectations
model

                             Output growth                                  Hours growth

                1                                              1

                                                               0
                0
                                                              −1
              −1
                              Model
                              Data                            −2
              −2

                     1990         2000          2010                1990        2000        2010

                            Investment growth                           Consumption growth

                2
                                                               1
                0
                                                               0
              −2

              −4                                              −1

              −6                                              −2

                     1990         2000          2010                1990        2000        2010

                                Inflation
              1.5

                1

              0.5

                0

                     1990         2000          2010




Notes: Thick blue line (‘Model’) is the smoothed variable from the estimated model and the thin black line (‘RE
counterfactual’) is the data. By construction, the difference between the model and the data is due to the
measurement error.




                                                        56
 Figure 8: Data and predicted endogenous variables from the estimation: model with ambiguity

                             Output growth                                  Hours growth

                1                                              1

                0                                              0

                                                              −1
              −1
                             Model
                             Data                             −2
              −2

                     1990         2000          2010                1990        2000        2010

                            Investment growth                           Consumption growth

                2
                                                               1
                0
                                                               0
              −2

              −4                                              −1

              −6                                              −2

                     1990         2000          2010                1990        2000        2010

                                Inflation

                1
              0.8
              0.6
              0.4
              0.2
                0

                     1990         2000          2010




Notes: Thick blue line (‘Model’) is the smoothed variable from the estimated model and the thin black line (‘RE
counterfactual’) is the data. By construction, the difference between the model and the data is due to the
measurement error.




                                                        57
  Figure 9: Estimated impulse response to a TFP shock: rational expectations model
                                                 Output                             Investment

                                   0.12                                  0.4




               Percent deviation
                                    0.1                                  0.3
                                   0.08
                                                                         0.2
                                   0.06
                                                                         0.1
                                   0.04
                                          10       20     30   40              10      20        30   40

                                               Consumption                            Hours

                                   0.04
                                                                     −0.2
                                   0.03
                                                                     −0.3
                                   0.02
                                                                     −0.4
                                   0.01
                                          10       20     30   40              10      20        30   40




Figure 10: Estimated impulse response to a financial shock: rational expectations model
                                                 Output                             Investment
                                                                         0.4
                                   0.06
               Percent deviation




                                                                     0.35
                                   0.05
                                                                         0.3
                                   0.04                              0.25
                                   0.03                                  0.2
                                   0.02                              0.15

                                          10       20     30   40              10      20        30   40

                                               Consumption                            Hours
                              −0.01                                  0.06

                              −0.02
                                                                     0.04
                              −0.03
                                                                     0.02
                              −0.04
                                                                          0
                                          10       20     30   40              10      20        30   40




                                                                    58
           Figure 11: Estimated impulse response to a TFP shock: model with ambiguity
                                                          Output                             Investment




                         Percent deviation
                                                                                   2
                                              1

                                                                                   1
                                             0.5
                                                                                   0
                                              0
                                                                                  −1
                                                   10       20     30   40              10      20        30      40

                                                        Consumption                            Hours
                                                                                  0.8
                                             0.8                                              Baseline
                                                                                  0.6         RE counterfactual
                                             0.6                                  0.4
                                                                                  0.2
                                             0.4
                                                                                   0
                                             0.2                              −0.2
                                                                              −0.4
                                                   10       20     30   40              10      20        30      40




Notes: Black solid line (‘Baseline’) is the impulse response from our baseline model with endogenous uncertainty
and the red dashed line (‘RE counterfactual’) is the response where we set the entropy constraint η = 0 while
holding other parameters at their estimated values.




                                                                             59
