                                NBER WORKING PAPER SERIES




               TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS

                                       Arun G. Chandrasekhar
                                        Matthew O. Jackson

                                        Working Paper 20276
                                http://www.nber.org/papers/w20276


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                      June 2014




We thank Isaiah Andrews, Gabriel Carroll, Victor Chernozhukov, Esther Duflo, Marcel Fafchamps,
Ben Golub, Bryan Graham, Bo Honore, Randall Lewis, Angelo Mele, Eduardo Morales, Stephen
Nei, Elie Tamer, Juan Pablo Xandri and Yiqing Xing for helpful discussions and/or comments on earlier
drafts, and especially Andres Drenik for valuable research assistance. We thank participants at the
Simons Workshop at Berkeley on Unifying Theory and Experiments for Large-Scale Networks,
thePrinceton Econometrics Seminar, and the Second Economics of Networks Conference (Essex).
Chandrasekharis grateful for support from the NSF Graduate Research Fellowship Program and NSF
grant SES-1156182.Jackson gratefully acknowledges financial support from the NSF under grants
SES-0961481 and SES-1155302 and from grant FA9550-12-1-0411 from the AFOSR and DARPA,
and ARO MURI award No. W911NF-12-1-0509. The views expressed herein are those of the authors
and do not necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2014 by Arun G. Chandrasekhar and Matthew O. Jackson. All rights reserved. Short sections of
text, not to exceed two paragraphs, may be quoted without explicit permission provided that full credit,
including © notice, is given to the source.
Tractable and Consistent Random Graph Models
Arun G. Chandrasekhar and Matthew O. Jackson
NBER Working Paper No. 20276
June 2014
JEL No. C01,C51,D85,Z13

                                             ABSTRACT

We define a general class of network formation models, Statistical Exponential Random Graph Models
(SERGMs), that nest standard exponential random graph models (ERGMs) as a special case. We provide
the first general results on when these models' (including ERGMs) parameters estimated from the
observation of a single network are consistent (i.e., become accurate as the number of nodes grows).
Next, addressing the problem that standard techniques of estimating ERGMs have been shown to have
exponentially slow mixing times for many specifications, we show that by reformulating network
formation as a distribution over the space of sufficient statistics instead of the space of networks, the
size of the space of estimation can be greatly reduced, making estimation practical and easy. We also
develop a related, but distinct, class of models that we call subgraph generation models (SUGMs)
that are useful for modeling sparse networks and whose parameter estimates are also directly and easily
estimable, consistent, and asymptotically normally distributed. Finally, we show how choice-based
(strategic) network formation models can be written as SERGMs and SUGMs, and apply our models
and techniques to network data from rural Indian villages.


Arun G. Chandrasekhar
Department of Economics
Stanford University
579 Serra Mall
Stanford, CA 94305
and NBER
arungc@stanford.edu

Matthew O. Jackson
Department of Economics
Stanford University
Stanford, CA 94305-6072
and CIFAR
and also external faculty of the Santa Fe Institute
jacksonm@stanford.edu
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      1

                                        1. Introduction


        ...[A] pertinent form of statistical treatment would be one which deals
        with social configurations as wholes, and not with single series of facts,
        more or less artificially separated from the total picture.
            Jacob Levy Moreno and Helen Hall Jennings, 1938.

   For a researcher interested in an economic or social interaction, endogeneity of the
interactions often makes network estimation essential. That estimation is challenging
both because relationships are generally not independent and because the researcher
usually only observes one network. A literature spanning several disciplines (computer
science, economics, sociology and statistics) has turned to exponential random graph
models (ERGMs) to meet these challenges.1 However, recently these models have
come under fire as the maximum likelihood estimator of the parameters may not be
computationally feasible nor consistent, and so the software being used may provide
inaccurate parameter estimates. In this paper, we develop two new classes of models
that provide for (i) rich interdependencies, (ii) interdependencies that have economic
and social micro-foundations, (ii) computationally feasible parameter estimates, (iii)
and consistent and asymptotically normal parameter estimates.
   To begin with some background about why such models are needed, let us begin with
an illustrative question. To what extent is someone’s proclivity to form relationships
influenced by whether those relationships are in public or private? For example, are
people of different castes or races more reluctant to form relationships across types
when they have a friend in common than when they do not? This has implications for
communication, learning, inequality, diffusion of innovations, and many other behaviors
that are network-influenced. Being able to statistically test whether people’s tendencies
to interact across groups depends on social context requires allowing for correlation
in relationships within a network. Beyond this illustrative question, correlations in
relationships are important in many other social and economic settings: from informal
favor exchange where the presence of friends in common can facilitate robust favor
exchange (e.g., Jackson, Barraquer, and Tan (2012)), to international trade agreements
where the presence of one trade agreement can influence the formation of another (e.g.,
Furusawa and Konishi (2007)). Similarly, in forming a network of contacts in the
context of a labor market, an individual benefits from relationships with others who
are better-connected and hence relationships are not independently distributed (e.g.,
Calvo-Armengol (2004); Calvo-Armengol and Zenou (2005)); nor are they in a setting
of risk-sharing (e.g., Bramoullé and Kranton (2007)).
   Once such interdependencies exist, estimation of network formation cannot take
place at the level of pairs of nodes, but must encompass the network as a whole. ERGMs
incorporate such interdependencies and thus have become the workhorse models for
estimating network formation.2 Indeed, as originally shown via a powerful theorem
1
 See, e.g., Frank and Strauss (1986); Wasserman and Pattison (1996); Mele (2013).
2
 These grew from work on what were known as Markov models (e.g., Frank and Strauss (1986)) or
p∗ models (e.g., Wasserman and Pattison (1996)). An alternative approach is to work with regression
models at the link (dyadic) level, but to allow for dependent error terms, as in the “MRQAP” approach
(e.g., see Krackhardt (1988)). That approach, however, is not well-suited for identifying the incidence
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      2

by Hammersley and Clifford (1971), the exponential form can nest any random graph
model and can incorporate arbitrary interdependencies in connections.3 Moreover,
ERGMs admit a variety of strategic (choice-based) network formation models, as we
show below and others have shown in related contexts (e.g., Mele (2013)).
   Let us be more explicit about the issues that ERGMs face. In an ERGM, the
probability of observing a network g depends on an associated vector of statistics
S(g), that might include, for example, the density of links, number of cliques of given
sizes, the average distance between nodes with various characteristics, counts of nodes
with various degrees, and so forth. The probability of the network is assumed to be
proportional to
                                    exp (β · S (g))
where β is a vector of model parameters. Turning the above expression into a proba-
bility of observing network g requires normalizing this expression by summing across
all possible networks, and so the probability of observing g is
                                                exp (β · S (g))
(1.1)                             Pβ (g) = P                     0
                                                                     .
                                                g 0 exp (β · S (g ))

   ERGMs have become widely used because they provide an intuitive formulation
focusing on key structural aspects that researchers believe are important in network
formation and that can encode rich types of interdependencies. Recent work providing
utility based micro-foundations has made these models even more desirable. However,
there are three critical challenges faced in working with ERGMs.
   First, computing parameter estimates for an ERGM and drawing simulations from
the distribution may be infeasible to do accurately in any nontrivial cases (Bhamidi
et al., 2008; Chatterjee et al., 2010). This is because estimating the likelihood of a
given network requires having some estimate of relative likelihood of other networks
that could have appeared instead, which involves explicitly or implicitly estimating the
denominator of (1.1). Directly estimating the denominator is impossible: the number
of possible networks on a given number of nodes is an exponential function of the
number of nodes. The adaptation of Markov Chain Monte Carlo (MCMC) sampling
techniques to draw networks and estimate ERGMs, by Snijders (2002) and Handcock
(2003), provided a seeming breakthrough and the subsequent development of computer
programs based on those techniques led to their widespread use.4 However, it was clear
to the developers and practitioners that the programs had convergence problems for
many specifications of ERGMs. Given the huge set of networks g 0 to sample, any
MCMC procedure can visit only an infinitesimal portion of the set, and until recently

of particular patterns of network relationships that may be implied by various social or economic
theories of the type that we wish to address here. There are also a set of growing random network
models where one explicitly models a meeting process and a link formation algorithm (e.g., Barabasi
and Albert (1999); Jackson and Rogers (2007); Currarini, Jackson, and Pin (2009),Bramoullé et al.
(2012)), which can be estimated in some cases. However, those are specific models with a couple of
tunable parameters, and they are not designed or intended for the statistical testing of a wide variety
of network formation models and hypotheses, which is the intention of the exponential formulation.
3
  Their theorem applies to undirected and unweighted networks. See the discussion in Jackson (2008).
Of course, the representation can become fairly complicated; but the point is that the ERGM model
class is broadly encompassing.
4See Snijders et al. (2006) for more discussion.
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                             3

it was unclear whether such a technique would lead to an accurate estimate in any
practical amount of time. Unfortunately, important recent papers have shown that
for broad classes of ERGMs standard MCMC procedures will take exponential time
to mix unless the links in the network are approximately independent (e.g., see the
discussions in Bhamidi et al. (2008) and Chatterjee et al. (2010)). Of course, if links
are approximately independent then there is no real need for an ERGM specification to
begin with, and so in cases where ERGMs are really needed they cannot be accurately
estimated by such MCMC techniques. Such difficulties were well-known in practice to
users of software programs that perform such estimations, as rerunning even simple
models can lead to very different parameter and standard error estimates, but now
these difficulties have been proven to be more than an anomaly.
   Second, setting aside the feasibility of estimation, there is also little that is known
about the consistency of parameter estimates of ERGMs: would estimated parameters
converge to the true parameters as the size of the network grows if those estimates
were exactly computed? Given that data in many settings consist of a single network
or a handful of networks, we are interested in asymptotics where the number of nodes
in a network grows. However, it may be the case that increasing the number of nodes
does not increase the information in the system. In fact, for some sequences of network
statistics and parameters it is obvious that the parameters of the associated ERGM
are not consistent. For example, suppose that S(g) includes a count of the number of
components in the network and the parameters are such that the network consists of
a single or a few components. The limited number of components would not permit
consistent estimation of the generative model. Thus, there are models where consistent
estimation is precluded. On the other extreme where links are all independent, we
know that consistent estimation holds. Thus, the question is for which models is it
that consistent estimation can be obtained. With nontrivial interdependencies between
links, standard asymptotic results do not apply. This does not mean that consistency
is precluded, (just as it is not precluded in time series or spatial settings) as there
is still a lot of information that can be discerned from the observation of a single
large network. Nonetheless, it does mean that asymptotic analyses must account for
potentially complex interdependencies in link formation.
   The third gap is providing microfoundations for estimable economic models of net-
work formation. While there are many theoretical models of strategic network forma-
tion (see Jackson (2008) for references), there are only a handful of econometric models
that have been built from such foundations ( Currarini, Jackson, and Pin (2009, 2010);
Christakis, Fowler, Imbens, and Kalyanaraman (2010); Goldsmith-Pinkham and Im-
bens (2013); Mele (2013)) and those are rather specific to particular estimation exer-
cises.
   In this paper we make five contributions:




     • First, we propose a generalization of the class of ERGMs that we call SERGMs:
       Statistical ERGMs. Note that in any ERGM the probability of forming a net-
       work is determined by its statistics: e.g., having a given link density, a given
       clustering coefficient, specific path lengths, etc. Every network exhibiting the
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      4

        same statistics is equally likely.5 SERGMs nest the usual ERGM models by
        noting that: (i) we can define the model as one in which statistics are gener-
        ated rather than graphs and thus greatly reduce the dimensionality of the space,
        and (ii) we can weight the distribution over the space of statistics in many ways
        other than simply by how many networks exhibit the same statistics. Changing
        to the space of statistics and the reference distribution allows us to provide
        computationally practical techniques for estimation of SERGMs.
      • Second, we examine sufficient conditions as well as some necessary conditions for
        consistent estimation of SERGM parameters (nesting ERGMs as a special case)
        and identify a class of SERGMs for which it is both easy to check consistency
        and estimate parameters. Models in this class are based on “count” statistics:
        for instance, how many links exist between nodes with certain characteristics,
        how many triangles nodes exist, how many nodes have a given degree, etc.
      • Third, we identify a related class of models that are based on the formation of
        subgraphs that we call SUGMs (Subgraph Generated Models).6 Such a network
        is constructed from building up subgraphs of various types: links, triangles,
        larger cliques, stars, etc., layered upon each other, all of which can depend on
        characteristics of the nodes involved. We show if such models are sufficiently
        sparse, parameter estimates are consistent and asymptotically normally dis-
        tributed. Such sparse networks appear in many if not most applications as
        they have realistic features (e.g., average degree that grows at a rate less than
        n, but still allow for high clustering, homophily, rich degree distributions, and
        so forth).
      • Fourth, we provide a set of strategic network formation models that combine
        utility-based choices of subgraph formation by agents with randomness in meet-
        ing opportunities. We describe two basic approaches: one based on consent in
        link and subgraph formation and another based on strategic search intensity
        choices. We show how these provide foundations for classes of SERGMs and
        SUGMs, and illustrate them in our applications.
      • Our fifth and final contribution is to provide illustrations of the techniques de-
        veloped here by applying them to data on social networks from Indian villages.
        We show that many patterns of empirical networks are replicable by a parsimo-
        nious SUGM with very few parameters. We also answer the question that we
        began with above, of whether individuals tend to form cross-caste relationships
        more frequently when there are no friends in common than when there are.
        We find that cross caste relationships occur with significantly higher frequency
        when in isolation than when embedded in triads.
  The only work to date on consistency in ERGMs is by Shalizi and Rinaldo (2012).
They examine sequences of models (here, random networks indexed by the number of
nodes n) that satisfy a certain ‘projective’ condition. In that context, they show that
this implies an independence of statistics across increments of the model, and show that
5This is related to the well-known property of sufficient statistics of the exponential family. As an
analogy, a binomial distribution defines the probability of seeing x heads but does not care about the
exact sequence under which the x heads arrive.
6Although some particular examples of random networks have previously been built up from randomly
generated subgraphs (Bollobás et al. (2011)), our general specification and analysis of SUGMs is new.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                       5

this is sufficient for consistency. That might be thought of as a somewhat pessimistic
result, given the required independence condition, which rules out many of the most
interesting ERGM models - essentially any models that involve more than link counts.
Our results are not implied by theirs and, in particular, their assumptions rule out
counting any subgraphs that involve more than links, as those are not projective, while
we are directly interested in counting such subgraphs as these are basic to many models
of social networks.7
   The connection between ERGMs, SERGMs, and SUGMs is as follows. SERGMs
not only provide an alternative way of representing ERGMs by working directly with
statistics rather than graphs, but also substantially generalize the class by allowing
for alternative reference distributions. SUGMs then allow for an additional change
relative to SERGMs in terms the way the graph is generated. A SERGM – in order
to maintain the nesting of ERGMs – has the likelihood of a network depend on the
observed counts of various statistics, including subgraphs. A SUGM can be thought
of as generating subgraphs, but allowing them to overlap: it is not clear whether a
given triangle was generated directly as a triangle or as three separate links. Thus, one
needs to infer the true statistics in estimating the parameters of the model. This subtle
change allows for a more direct estimation in the case of sparse networks. Nonetheless,
there is a close relationship, and we provide an exact relationship between SUGMs and
SERGMs below. SERGMs, in addition to nesting ERGMs, provide the intuitive link
between SUGMs and exponential-style representations.

                             2. Preliminaries and Examples
   Let G n be a set of possible graphs on a finite number of nodes n. The class can consist
of undirected or directed graphs with a generic element denoted by g ∈ {0, 1}n×n . We
often omit notation G n , and for instance, g is understood to mean g∈G n .
                                              P                         P

   We observe a single (large) graph from which to estimate a network formation model,
which is a estimation problem faced by researchers. A family of models is indexed
by a vector of parameters β, and can be represented by corresponding probability
distributions over graphs Pβ (g), which depends on parameters β.
   Some of our results concern asymptotic properties of such models, and so at times we
consider a sequence of random graphs g n , n ∈ N, drawn from a sequence of probability
distributions Pnβn (·). Since everything then carries an n index we suppress it except
when we want to highlight dependence.
   A vector of statistics of a network g ∈ G n , S(g) = (S1 (g), . . . , Sk (g)), is a k-
dimensional vector where S` : G n → R for each ` ∈ {1, . . . k}. For example, a statistic
7To  be specific, note that if one is counting subgraphs such as triangles, then generating those on
the larger graph can lead to new triangles on a smaller graph. For instance, suppose that triangles
between nodes 1,2, and 3, as well as 3, 4, and 5, are formed on the first five nodes. Then if a triangle
between nodes 2, 4, and 6 is formed when we go to the sixth node, this introduces a new triangle on
the first five nodes, as now there are links between 2, 3 and 4. Thus, the model on the larger graph
results in a different distribution of triangles on the first five nodes than what was originally there,
and so the marginal distribution working on six nodes is not the same as the distribution one started
with on five nodes. This is ruled out under the Shalizi and Rinaldo (2012) projective assumption.
Similar points hold for richer cliques or other subgraphs that can generate incidental instances, which
are most of the cases of interest here. Thus, our results cover large classes of models that are ruled
out under their projective/independence conditions.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                              6

might be the number of links in a network, the average path length, the number of
cliques of a given size, the number of isolated nodes, the number of links that go
between two specific types of groups, and so forth.

2.1. Links across social boundaries.
   To motivate the various models that we introduce and analyze below, let us recon-
sider the question that we mentioned in the introduction.
   Individuals are associated with groups and identities that can lead to strong social
norms about interactions across groups. For instance, in much of India there are
strong forces that influence if and when individuals form relationships across castes.
Are people significantly more likely to form cross-caste relationships when those links
are unsupported (without any friends in common) compared to when those links are
supported with at least one friend in common? To answer this we need models that
account for link dependencies, as cliques of three or more may dictate greater adherence
to a group norm prohibiting certain inter-caste relationships, while the norm may be
circumvented in isolated bilateral relationships.
   To analyze this, we examine data from 75 Indian villages (from our study Banerjee
et al. (2014) that we discuss in more detail below). We link two households if members
of either engaged in favor exchange with each other: that is, they borrowed or lent
goods such as kerosene, rice or oil in times of need. We work with two caste categories:
the first consists of people in scheduled castes and scheduled tribes and the second
consists of those people in any other caste (Munshi and Rosenzweig, 2006). Scheduled
castes and scheduled tribes are those defined by the Indian government as being dis-
advantaged. This is a fundamental distinction over which the strongest cultural forces
are likely to focus. Additional norms are at work with finer caste (jati) distinctions,
but those norms are more varied depending on the particular castes in question while
this provides for a clear barrier.
   As a simple model to address this issue, consider a process in which individuals may
meet in pairs or triples and then decide whether to form a given link or triangle. The
link is formed if and only if both individuals prefer to form the link, and a triangle is
formed if and only if all three individuals prefer to form it. This minimally complicates
an independent-link model enough to require modeling link interdependencies.
   In particular, there are probabilities, denoted πL (dif f ), πL (same), that a given link
has an opportunity to form (i.e., the pair meets and can choose to form the relationship)
that depend on the pair of individuals being of different castes or of the same caste,
respectively. Similarly, there are probabilities, denoted πT (dif f ), πT (same), that a
given triangle has an opportunity to form (that the three people involved meet and
can choose to form the relationship) that depend on the triple of individuals being of
all the same castes or two of the same and one of a different caste.
   Preferences are similarly described in a random utility framework (McFadden, 1973).
Individual i’s utility of having a relationship with j can by influenced by whether they
share caste and is given by
                    ui (ij) = β0,L + β1,L SameCasteij + δL0 Xij − L,ij ,
where SameCasteij is a dummy for whether both individuals are members of the
same caste, Xij is a vector of covariates depending on Xi and Xj . For expositional
simplicity here set δL = 0. The outside option is zero, so pL (same) is the probability
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                         7

that an individual will desire to form a link with an individual of the same caste group,
and pL (dif f ) is the probability that an individual will desire to form a link with an
individual of a different caste group.
   The crucial point is that i can have returns that depend on being in a multilateral
relationship with j and k – that is conceptually distinct from having these two bilateral
relationships – and this can be given by
                    ui (ijk) = β0,T + β1,T SameCasteijk + δT0 Xijk − T,i,jk ,
where SameCasteijk is a dummy for whether all three individuals are members of the
same caste, Xijk is a vector of covariates depending on Xi , Xj , and Xk . Again for
expositional simplicity δT = 0. Correspondingly, pT (same) is the probability that an
individual will desire to form a triangle when all individuals are of the same caste
group, and pT (dif f ) is the probability that an individual will desire to form a triangle
when it consists of people from both caste groups.8
  The hypothesis that we explore is that pT (dif f )/pT (same) < pL (dif f )/pL (same) so
that people are more reluctant to involve themselves in cross-caste relationships when
those are “public” in the sense that other individuals observe those relationships; with
a null hypothesis that they are equal pT (dif f )/pT (same) = pL (dif f )/pL (same).
2.2. ERGMs.
   The standard (and to date essentially only) model for dealing with this sort of
formulation in which we want to test hypotheses about the formation of triangles and
links is an ERGM.
   In order to work with the data, which also contains non-trivial numbers of isolated
nodes (asocial individuals who do not form relationships with others), we also allow
for isolates.
   Before incorporating the distinction between links and triangles of various types (e.g.,
same, different) let us show that ERGMs are ill-equipped even to handle a non-type
based model. So, suppose that the probability of the formation of a network g can be
expressed as a function of the network’s number of isolated nodes SI (g), number of
links SL (g), and number of triangles ST (g). In its exponential random graph model
(ERGM) form, the probability of a network g being formed is
                                   exp (βI SI (g) + βL SL (g) + βT ST (g))
(2.1)               Pβ (g) = P                     0            0            0
                                                                                 .
                                  g 0 exp (βI SI (g ) + βL SL (g ) + βT ST (g ))
  If βI = βT = 0 then this reduces to a standard Erdős-Rényi random graph. The
more interesting case is where at least one of βI 6= 0 or βT 6= 0, so that networks
become more (βT > 0) or less (βT < 0) likely based on the number of triangles they
contain - or, similarly, of isolates they contain.
2.2.1. ERGM Estimation. The difficulty with estimating such a model is that the num-
                                                                       n
ber of such networks in the calculation of the denominator’s g0 is 2( 2 ) .9 Thus, the
                                                              P

fraction of networks that can be sampled is necessarily negligible, and unless careful
8This  is a simplified model for illustration, but one can clearly consider preferences conditional on any
string of covariates. This extends a model such as that of Currarini, Jackson, and Pin (2009, 2010)
to allow for additional link dependencies. We could also be interested in higher order relationships.
9In the undirected case, even with a tiny society of just 30 nodes this is 2435 , while estimates of the
number of atoms in the universe are less than 2258 (Schutz, 2003).
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                       8

knowledge of the model is used in guiding the sampling, the estimation of the denom-
inator can be inaccurate.
   Given that estimating the parameters of an ERGM are thus forced to circumvent di-
rect calculation of the denominator, approximation methods such as MCMC techniques
have been used.10 The rough intuition is that such methods sample some networks
(picking a few g 0 s ) to estimate the relative sizes of exp (βI SI (g 0 ) + βL SL (g 0 ) + βT ST (g 0 ))
                                  P
from which to extrapolate the g0 in the denominator of (2.1). Even with this approach,
the space of all possible networks is difficult to sample in a representative fashion. For
instance, if one samples say 10000 networks, then one samples on the order of 216
networks out of the possible 21225 on 50 nodes, which is about one out of every 21209
networks. Thus, unless one is very knowledgeable in choosing which networks to sam-
ple and how many to sample of different types, or one is very lucky, the sample is
unlikely to be even remotely representative of the possible configurations that might
occur. Formally, draws generated by the sampling need to be well-mixed in a practical
amount of time.
   Indeed, the time before which an MCMC run has a chance to sample enough networks
to gain a representative sample is generally exponential in the number of links and so
is prohibitively large even with a few nodes.11 In particular, an important recent result
of Bhamidi et al. (2008) shows that MCMC techniques using Glauber dynamics for
estimating many classes of ERGMs mix in less than exponential time only if any finite
group of edges are asymptotically independent. So, the only time those models are
practically estimable is when the links are approximately independent, which precludes
the whole reason for using ERGMs!
   To illustrate the computational challenges, we estimate a version of the simple model
from (2.1) on n = 50 nodes. In particular, we randomly generate networks that have
exactly 20 isolates, 45 links and 10 triangles on 50 nodes (with 15 links not in triangles).
Thus, the statistics of all of the networks are identical, and only the location of the links
and triangles changes. Any two networks with exactly the same statistics should lead
to exactly the same parameter estimates as they have exactly the same likelihood under
all parameter values. There is a unique, well-defined maximum likelihood estimated
ERGM parameters for this set of statistics (as detailed in Section 3.1.1). Thus, the
only variation in estimated parameter values comes from imperfections in the software
and estimation procedure given the computational challenges.
   Using standard ERGM estimation software (statnet via R, Handcock et al. (2003))
we estimate the parameters of an ERGM with isolates, links and triangles for each of
these randomly drawn networks that should all lead to exactly the same parameter
estimates. We present the estimates in Figure 1.
   There are two self-evident issues with the estimation. First, the estimated parameters
for links and triangles cover a wide range of values, in fact with the link parameter
estimates being both positive and negative and ranging from below -3 to above 3
(Figure 1b) and triangles parameter estimates ranging from just above 0 to 5 (Figure

10
  See Snijders (2002), Handcock (2003), and discussions in Snijders et al. (2006) and Jackson (2008,
2011).
11This does not even include difficulties of sampling. For example, as discussed by Snijders et al.
(2006), a technique of randomly changing links based on conditional probabilities of links existing for
given parameters can get stuck at complete, empty, or other extreme networks.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                       9




        (a) Isolate Param-                   (b) Link Parame-                    (c) Triangle Pa-
        eter Estimates                       ter Estimates                       rameter Estimates

        Figure 1. Standard ERGM estimation software (Statnet) output for
        1000 draws of networks on 50 nodes, each having exactly 20 isolated
        nodes, 45 links, and 10 triangles. The red lines (on top of each other)
        are the median left and right 95 percent confidence interval lines (not
        capturing 95 percent of the estimates). Networks with identical statistics
        should lead to identical parameter estimates: all of the variation comes
        from imprecisions in the estimation procedure.


1c). Only the isolates parameter estimates are remotely stable (Figure 1a), but even
those vary in three different regions with substantial variation. Second, despite the
enormous variation in estimated parameter values from very similar networks, the
reported standard errors are quite narrow and almost always report that the parameter
estimates are highly significant. Moreover, the median left and right standard error
bars essentially coincide and do not come close to capturing the actual variation.
   For this example, there is no variation in the SERGM or SUGM estimates, as they
are estimated via an exact calculation, as we discuss in the next section.
   In Appendix D we consider some additional tests - showing that the software has
even more serious problems in simulating networks. Each of the 1000 simulated net-
works generates parameter estimates. Using those parameter estimates we simulate a
network using Statnet’s simulation command. We then check whether the simulated
networks come anywhere close to matching the original networks. The generated net-
works generally have hundreds of links and thousands of triangles (Figure D.2), not at
all matching the original statistics.

2.2.2. A Prélude to Our Approach. In order to overcome this problem, we develop two
new classes of models, both of which are partly built on the following insight.
   Given the model specified in (2.1), any two networks that have the same num-
bers of isolates, links, and triangles have the same probability of forming. That is, if
(SI (g), SL (g), ST (g)) = (SI (g 0 ), SL (g 0 ), ST (g 0 )), then Pβ (g) = Pβ (g 0 ) for any β. This is
simply an observation that (SI (g), SL (g), ST (g)) is a sufficient set of statistics for the
probability of the network g.
   This observation can simplify the calculations dramatically. Given a vector of sta-
tistics S (e.g., S = (SI , SL , ST ) in our example), let

                                 NS (s) := |{g ∈ G n : S(g) = s}|
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                           10

denote the number of graphs that have statistics s. We can rewrite the denominator
of the ERGM in (2.1) as
                            NSI ,SL ,ST (s0 ) exp (βI s0I + βL s0L + βT s0T ) .
                      X

                       s0
Moreover, instead of considering the probability of observing a particular network, we
can instead ask what the probability is of observing a particular realization of network
statistics. For instance, what is the probability of observing a network with a given
number of links and triangles? Generally, this is what a researcher is interested in
rather than which specific network that had a given list of characteristics was realized.
We can then express the model in the following form:
                                          NS (s) exp (βI sI + βL sL + βT sT )
(2.2)        Pβ ((SI , SL , ST ) = s) = P        0           0       0        0
                                                                                 .
                                         s0 NS (s ) exp (βI sI + βL sL + βT sT )
This is an example of what we call a Statistical Exponential Random Graph Model,
or SERGM, which are defined in their more general form below.
   We have thus reduced the complexity of the estimation problem from something that
is exponential in the number of nodes, to something that depends on the size of the
space of statistics, which is generally polynomial in the number of nodes. For example,
while the denominator of the ERGM in (2.1) was a summation over a number of
                                 2
networks which is of order 2n , the summation now is over possible numbers of isolates,
links, and triangles which is of order n6 . As we further discuss in Appendix B, there
are further simplifications that reduce this even more dramatically. The remaining
challenge, therefore, lies in computing NS (·), which still may be impossible to do for
certain models. This motivates our SERGMs.
2.3. Our approach.
2.3.1. Statistical ERGMs. (2.2) defines a model over network statistics and, in princi-
ple, there is nothing special about the weighting function NS (·), and at times it can
be hard to compute or even approximate. Noting that NS (·) should have no privilage
– it neither has statistical advantages nor is it any more natural from the perspective
of microfoundations – we first think of a more general representation of SERGMs. By
replacing the weighting function NS with some other function KS : A → R we obtain
a statistical exponential random graph model (SERGM). The associated probability of
seeing realized number of links and triangles (SI , SL , ST ) = s is:
                                          KS (s) exp (βI sI + βL sL + βT sT )
           P
           b ((S , S , S ) = s) = P
             β  I   L   T                         0           0       0       0
                                                                                  .
                                       s0 ∈A KS (s ) exp (βI sI + βL sL + βT sT )
This is a model that states that the probability that a network exhibits a specific
realization of statistics S = s is given by an exponential function of the statistics s.
Note that SERGMs nests ERGMs as a special case.
2.3.2. Subgraph Generation Models. Our other model is not defined through an expo-
nential form, but instead directly through the random formation of various subgraphs.
For instance, pairs of nodes, or triples of nodes, or some other configurations are di-
rectly randomly formed and a network results. In the context of isolates, pairs and
triangles, the process could be thought of as taking place as follows. First, nodes de-
cide to stay as isolates with some probability pI . Next, pairs of non-isolate nodes meet
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      11

and decide whether to form links with some probability pL . Also, triples of non-isolate
nodes meet and decide whether to form triangles with some probability pT . The result-
ing network is the union of all links formed under the process. All of these probabilities
can be made dependent upon some list of node characteristics, as in Appendix C. Thus,
links and triangles are formed directly at random. The model is then governed by the
probabilities pI that any node is an isolate, pL that any given link is generated (on
non-isolate nodes), and pT that any given triangle is generated (on non-isolate nodes).
We call this a Subgraph Generation Model (SUGM).
   The only challenge in estimating a SUGM is that we observe the resulting network
and not the directly generated isolates, links and triangles. For example, if the three
links 12, 23, 13 are all generated as links, then we would observe the triangle 123 in
the resulting network g and not be sure whether it was generated as three links or as
a triangle. Nonetheless, by examining a large enough network we can accurately back
out the probabilities in many cases.
   We provide two sets of results on estimating SUGMs: one concerning settings in
which the networks are sparse enough so that estimation can be made via direct counts,
and a second concerning an algorithm for more general estimation when networks are
dense enough so that there could be substantial overlap in the various subgraphs formed
which makes counting more challenging.
2.3.3. The Example Revisited. Let us now return to the example presented in Section
2.2.1 that provided headaches for standard techniques for estimating ERGMs. We can
estimate that either as a SERGM or a SUGM.
  The SUGM delivers direct estimates for the parameters:
                        SI              ST                    SU
                 pbI :=    and pbT := n−S  and pbL := n−S        .
                        n                  I                I
                                                               − 3ST
                                                3                     2

These will be accurate estimates of the true parameters pI , pT , pL provided that the
network is sparse enough, which is true in this example, as we show in Theorem 2.12 For
cases of non-sparse networks, we provide an algorithm for estimating the parameters
(after Theorem 2).
  For all of the networks
              SI   20                ST        10                      15
(2.3) pbI =      =    = .4, pbT = n−S  = 30 = .002 and pbL = 30        = .037.
              n    50                   I
                                                                        − 30
                                            3            3                       2

  If we work with a SERGM (on unsupported links) that has weights
                                                     !                       
                                                     30                         30
                            !                                                             !
                       50                            3                          2
                                                                                      − 30
(2.4)       KI (sI ) =    and KT (sT ) =                     and KU (sU ) =                  ,
                       sI                           sT                               sU
then as we show in Theorem 1 and 3, the SERGM parameters can be directly obtained
as from the SUGM binomial calculations, with an adjustment for the exponential:
                pbI                       pbT                          pbU
    βbI = log         = −.17, βbT = log         = −2.7 and βbU = log         = −1.4.
              1 − pbI                   1 − pbT                      1 − pbU
12Theorem   2 does not explicitly include isolates, as we define subgraphs as connected objects for ease
of notation. However, the theorem extends easily to this case. In particular, in the case of isolates,
‘sparse’ actually puts a lower bound on the probability of links - so that links are not so sparse as to
generate extra isolated nodes.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                               12

Thus we directly and easily obtain parameter estimates for the same networks that
gave the ERGM estimation troubles.
2.4. A Return to the Caste Example. We can now use either of these approaches
to test our hypotheses from the caste example.
  Note that the probability that a “same” link forms is
                              PL (same) = pL (same)2 πL (same)
as it requires both agents to agree, and the probability that a “different” link forms is
                              PL (dif f ) = pL (dif f )2 πL (dif f ).
Analogously for triangles we have
        PT (same) = pT (same)3 πT (same) and PT (dif f ) = pT (dif f )3 πT (dif f ),
where the cubic captures the fact that it takes three agreements to form the triangle.
The difference in the exponents reflects that it is more difficult to get a triangle to form
than a link. Hence, to perform a careful test, we have to adjust for the exponents as
otherwise we would just uncover a natural bias due to the exponent that would end up
favoring cross-caste links.
  One challenge in identifying a preference bias is that it could be confounded by the
meeting bias. Thus, we first model the meeting process more explicitly and show that
we still have identification as the meeting bias makes triangles relatively more likely
to be cross-caste than links. Thus, our test is conservative in the sense that if we find
cross-caste links relatively more likely, that is evidence for a (strong) preference bias.
  Consider a meeting process where people spend a fraction f of their time mixing in
the community that is predominantly of their own types and a fraction 1 − f of their
time mixing in the other caste’s community. Then at any given snapshot in time, a
community would have f of its own types present and 1 − f of the other type present,
as depicted in Figure 2. (Variations on this sort of biased meeting process appear in
Currarini et al. (2009, 2010); Bramoullé et al. (2012).)


       Community A              Community B            Community A            Community B




            (a) Individuals all on own-                     (b) Fraction f = 41 mixed
            community side of river                         across communities

       Figure 2. Geographically driven meeting process where agents spend
       3/4 of their time in their own community.
                          TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                   13

                                                                                                                                            PL (dif f ) 3/2
                                                                                                                                                      
                                                                    pT (dif f )           pL (dif f )                 PT (dif f )
Lemma 1. A sufficient condition for                                 pT (same)
                                                                                    <     pL (same)
                                                                                                          is that     PT (same)
                                                                                                                                    <       PL (same)
                                                                                                                                                              .
   The proof appears in the appendix, but follows from straightforward calculations.
   Given Lemma 1, we can test our hypothesis directly from a SUGM that compares
relative link and triangle counts (we can also include isolated nodes, but those do
not impact this hypothesis). In particular, we only need examine whether PPTT(same)
                                                                              (dif f )
                                                                                       <
    PL (dif f ) 3/2
              
    PL (same)
             .
  Figure 3 shows the results. For the bulk of villages, cross-caste relationships rel-
ative to within-caste relationships are more frequent as isolated links as opposed to
being embedded in triangles, even when adjusting for the fact that triangles take more
consent. The difference is significant at the 99 percent level.13




                                                  1.2                                                              Below Median
                                                                                                                   Above Median


                                                   1



                                                  0.8
                      (pT(different)/pT(same))




                                                  0.6



                                                  0.4



                                                  0.2



                                                   0



                                                 −0.2
                                                   −0.2   0   0.2        0.4            0.6         0.8        1            1.2
                                                                      (pL(different)/pL(same))3/2




           Figure 3. Comparison of the relative propensity to form cross-caste
           versus same-caste relationships for triangles (y-axis) compared to links
           (x-axis). The propensity is lower for triangles than links in a significant
           number of villages, even when adjusting link propensities downwards by
           raising them to the 3/2 power to adjust for the number of consents needed
           to form the subgraphs. The color coding distinguishes those villages that
           have above/below the median size minority group.

  In Figure 3 villages are color coded by the relative sizes of the two caste-based
groups. The red villages are such that one of the two caste designations dominates
the village and the other group is relatively small, while the blue villages are ones in
13This is from doing a conservative nonparametric test: under the null that the number of villages for
which the ratio is less should be 1/2 with a binomial distribution on the number above or below.
                         TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                            14

which the two caste designations are more balanced in terms of sizes. In other contexts,
homophily has been found to be strongest when groups are evenly balanced (e.g., see
McPherson et al. (2001); Currarini et al. (2009, 2010)). Here we see that the social
pressures against mixed-caste triangles are stronger when the two caste designations
are more evenly balanced.

   To sum up, we develop two classes of tractable models. One are subgraph generation
models (SUGMs) in which we think of subgraphs as being directly generated by sub-
groups of nodes. The second is a more general statistical exponential random graph
model (SERGM), in which a network is drawn based on its properties (e.g., a vector
of sufficient statistics such as subgraph counts). We now provide formal definitions,
and then theorems on asymptotic estimation of each of these classes of models, and
also describe techniques that provide for tractable estimation even with large numbers
of nodes in many cases. We then further clarify the relationship between SUGMs and
SERGMs, via Theorem 3.

                                                     3. Definitions
  We first present some needed definitions before describing our results.

3.1. SERGMs.
  The general set of SERGMs that we define is as follows. Consider a vector of network
statistics S = (S1 , . . . , Sk ) that takes on values in some set A ⊂ Rk .14 A weighting
function KS : A → R, together with a set of parameters β ∈ B ⊂ Rk , define a SERGM.
The associated probability of seeing realized statistics S = s is:
                                                             KS (s) exp (β · s)
(3.1)                                   Pβ,KS (s) = P                0            0
                                                                                     .
                                                          s0 ∈A KS (s ) exp (β · s )

The model is based directly on the properties of the network rather than the actual
realized network.15 Recall all parameters can depend on n.
  In the language of exponential families of random variables, KS (·) is simply a refer-
ence distribution. Varying the reference distribution, of course, changes the resulting
odds of various values of s being drawn and can affect whether the model is consistently
estimable.16
14Given   the finite number of possible networks, A is taken to be finite. The dimension of A can easily
be generalized to be larger than k, as the dimension plays no role in our results. If one wishes to work
with weighted networks, then obvious extensions to continuous ranges and integrals apply.
15 Which network forms given the realized statistics is secondary and could be uniform at random,
or according to some other conditional distribution, so long as given the realized s a network g such
that S(g) = s is drawn. Unless otherwise stated we take it to be uniform at random.
16Note that any SERGM with weights K and parameters β also generates a distribution over net-
                                            S
works, for example taking networks to be drawn uniformly at random from those with the given
statistics. This can be written as
                                      KS (s)
                                      NS (s) exp (β · s(g))                exp (β · s(g) + fn (s))
              Pβ,K (g) =          P KS (s(g0 ))                     =P                 0           0
                                                                                                        ,
                                                                       g 0 exp (β · s(g ) + fn (s(g )))
                                                              0
                                   g 0 NS(s(g0 )) exp (β · s(g ))
                                 
                         KS (s)
where fn (s) = log       NS (s)       . Therefore the model is modified by a shift with weights log (KS (s)/NS (s)).
The sum is over g for which NS (s(g 0 )) > 0.
                     0
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      15

   Recalling that NS (s) = |{ g ∈ G n : S(g) = s }| is the number of graphs that have
the same statistic value s, KS (·) = NS (·) then corresponds to a standard ERGM.
Thus, SERGMs nest ERGMs as a special case. Note, however, that there is no reason
to maintain that KS (·)’s must approximate NS (·)’s. Nature may choose properties
of networks (S’s) according to some alternative weighting. The instance of studying
NS (·)-weighted SERGMs may be a historical one: on another planet, people may have
first modeled SERGMs with general K’s and would see those as natural with the
ERGMs being a special case where the weights are specialized to the NS ’s. As we shall
see below, there are natural economic based network formation models for which the
reference distributions will not be the NS (·)’s. Moreover, even if one is interested in
a sub-class of these models wherein the KS (·)’s approximate (or are) the NS (·)’s, the
statistical representation greatly reduces the dimensionality of the space over which
relative likelihoods must be estimated to the point at which practical estimation of
SERGMs becomes feasible.
   It is important to note that node characteristics can also be included in statistics.
For example, in terms of the question we raised in the introduction, we can keep
track of nodes’ castes. Then we can keep separate counts of how many links there are
between people both of caste A, between nodes both of caste B, and how many there
are between castes A and B; as well as how many triangles involve only people of caste
A, how many triangles involve only people of caste B, and how many triangles involve
people of different castes, and so forth.

3.1.1. Estimation of SERGMs. The maximum likelihood estimator solves
                                                                                    

                                                               KS (s0 ) exp (β · s0 ) .
                                                         X
                       βb = argmax β · s − log 
                                β                      s0 ∈A

Under regularity conditions such that the SERGM is sufficiently identified (β 6= β 0
implies that Eβ [S] 6= Eβ 0 [S]), the MLE βb of a SERGM of the form (3.1) solves
                                                                 
                                            KS (s0 ) exp βb · s0 s0
                                 P
                                    s0 ∈A
(3.2)                      s= P                                     = E b[S].
                                                                         β
                                     s0 ∈A   KS (s0 ) exp βb · s0

  For extreme values of s this will not be well-defined.17 Here, we implicitly assume that
the model is specified so that the probability of observing extreme statistics for which
this is not satisfied is negligible, which will be true of the asymptotic specifications
that we work with provided that the β’s do not tend to extremes too quickly.18


17For  example, for a simple Erdős-Renyi random network where the count statistic is simply the
number of links
             in   the network, if it turns out that all links are present so that s = n(n − 1)/2, then
                p
the β = log 1−p corresponding to the maximum likelihood estimator of the link probability (p = 1)
is not well-defined. For more on the non-existence of well-defined maximum likelihood estimates for
extreme networks see Rinaldo et al. (2011).
18Parameters can still approach extremes. The requirement here can be fairly weak. For example,
if one were counting links it must be that the probability of having absolutely no links (or all links)
realized vanishes, which is true even if the probability of a link is larger than 1/nx for some x < 2.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                     16

3.2. Subgraph Generation Models: SUGMs.
   The idea behind a SUGM is that subgraphs are directly generated by some pro-
cess. Classic examples of this are Erdos-Renyi random networks in which each link is
randomly generated, and the generalization of that model, stochastic-block models, in
which links are formed with probabilities based on the nodes’ attributes. The more
interesting generalization of those linked-based models to SUGMs is to allow richer
subgraphs to form directly, and hence to allow for dependencies in link formation. It
might be that people of the same caste meet more frequently or are more likely to form
a relationship when they do meet. Similarly, groups of three (or more) randomly meet
and can decide whether to form a triangle, with the meeting probability and decision
potentially driven by their castes and/or other characteristics. The model can then be
described by a list of probabilities, one for each type of subgraph, where subgraphs can
be based on the subgraph shape as well as the nodes’ characteristics.
   As we show in Theorem 3, SUGMs have a representation in a SERGM form, but in
some relevant cases SUGMs are easier and more intuitive to work with directly, and so
we distinguish them from their SERGM representation.
   SUGMs are formally defined as follows. There is a a finite number of different types
of nonempty subgraphs, indexed by ` ∈ {1, . . . , k}, on which the model is based.19 In
particular, a SUGM on n nodes is based on some list of k subgraph types: (Gn` )`∈{1,...,k}
where each Gn` is a set of possible subgraphs on m` nodes, which are identical to each
other (including node covariates) up to the relabeling of nodes.20 The final ingredient
is a list of corresponding parameters pn = (pn1 , . . . , pnk ) ∈ [0, 1]k governing the likelihood
that a particular subgraph appears, with pn` indicating the probability that a subgraph
in Gn` forms.
   A network g is randomly formed as follows. First, each of the possible subnetworks
in Gn1 is independently formed with a probability pn1 . Iteratively in ` ∈ {1, . . . , k} ,
each of the possible subnetworks in Gn` that is not a subset of some subgraph that has
already formed is independently formed with a probability pn` . The resulting g is the
union of all the links that appear in any of the generated subgraphs.
   We consider two variations of the model. The first, as just defined, is one in which
we only keep track of subnetworks in Gn2 that are not already part of a subnetwork in
Gn1 that already formed. The other variation is one in which we allow for redundant
formation, and simply form subgraphs of each type disregarding the formation of any
other subgraphs.
   To see the issue, consider the formation of triangles and links. Let Gn1 be a list of
all possible triangles and Gn2 be a list of all possible links. First form the triangles
with the corresponding probability pn1 . This then leads to the creation of some of
the links in Gn2 . Do we allow those links to also form on their own? Whether we
then allow links that are already formed as part of a triangle to form again as links
is inconsequential in terms of the network that emerges, and really is an accounting
19This  definition does not admit isolates since we define subgraphs to be nonempty, but isolates are
easily be admitted with notational complications, and are already illustrated in the examples.
20Formally, there is a set H = {H , ..., H } of representative subgraphs, possibly depending on covari-
                                   1      k
ates, each having m` nodes. Gn` contains all subgraphs that are homomorphic to H` . As an example,
the set Gn` for some ` could be all triangles such that two nodes have characteristics X and one has
X 0 . These could also be directed subgraphs in the case of a directed network. With assumptions on
smooth covariates and probability functions, one could have pn` (x` ), described in Appendix C.
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                              17

choice and leads to an equivalent distribution over networks. Thus the two conventions
for generating networks are equivalent. It turns out sometimes to be easier to count
subgraphs as if they can form in multiple ways, and at other times it is easier to keep
track of smaller subnetworks that form only on their own and not already as part of
some larger subnetwork. We are explicit in which way we use in what follows.
   When a subgraph g 0 is generated in the `th -phase, we say that it is truly generated.
This results in a network g, which is the union of all the truly generated subgraphs.
The resulting g can also contain some incidentally generated subgraphs that result from
combinations of links of unions of truly generated subgraphs, and we provide further
definitions concerning this below.
   This model differs from a SERGM because the truly generated subnetworks are not
directly observed. The actual counts of statistics under the resulting g can differ from
the number that were formed directly under the process. Backing out how many of each
type of subnetwork was truly generated is important in estimating the true parameters
of the model, the pn` ’s, and is something that we discuss at length below.

                                    4. SERGM Estimation
   Under what conditions does an estimator of a SERGM converge to the correct es-
timate in probability as n grows? The primary challenge is that the data consists of
a single network, the asymptotics are in terms of the number of nodes, but the rela-
tionships are correlated and so the data can be far from independent. We consider
sequences of SERGMs (S n , KSn , An , βn ), with n → ∞.
4.1. Count SERGMs.
  We begin by focusing on a natural subclass of SERGMs that we call “count SERGMs”.
We show that these have parameters that are consistently and easily estimable with
direct counts of subgraphs.
  Let S n = (S1n , . . . , Skn ) be a k-dimensional vector of network statistics whose `-th
                                                                             n
entry takes on non-negative integer values with a maximum value S ` → ∞. We
                                                        n
call such a SERGM specified with K n (s) = ` Ss`` a count SERGM. Let let Dn =
                                                   Q

         n k
     n    o
Diag S `        be the associated normalizing matrix.
           `=1
  In a count SERGM, each statistic can be thought of as counting some aspect of the
network: the number of links between nodes of various types, various types of cliques,
other subgraphs, the number of pairs of nodes at less than some distance from each
other, etc. It includes counts of subgraphs, but also allows for other counts as well (e.g.,
the number of pairs of nodes at certain distances from each other, as just mentioned; or
the number of nodes that have more than a certain degree - so a degree distribution).
  Associated with any vector of count statistics S n on n nodes is a possible range of
values. It could be that there are cross restrictions on these  values.   For example, if we
                                                            n−SIn
                                                                 
               n                n       n
count links SL and isolates SI , then SL cannot exceed        2
                                                                    . In that case the set of
                              n
possible statistics is a set A where
                     (                                      (                       !))
                n                                                          n − sI
               A = (sL , sI ) : sI ∈ {0, 1, . . . , n}, sL ∈ 0, 1, . . . ,                .
                                                                             2
  Given that An might not be a product space, in estimating count SERGMs, it will be
helpful to know whether the realized statistics are likely to be close to having binding
                       TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                               18

restrictions on the cross counts. For example, if a model is expected to generate one
tenth of its nodes as isolates and, say, one in a hundred of all possible links, then in a
wide band around the expected values there would be no conflict in the counts.
  Formally, a sequence of count SERGMs (S n , K n , An , β n ) have statistics that are
non-conflicted if there exists some ε > 0 such that
          Yn                                                                                        o
                  bEβ`n [S`n ](1 − ε)c, bEβ`n [S`n ](1 − ε)c + 1, . . . , dEβ n [S`n ](1 + ε)e ⊂ An
           `

for all large enough n.21
   The “non-conflicted” condition simply asks that at least in some small neighborhood
of the unconstrained expected values of the statistics - as if they were each counted
completely on their own, they are non-conflicted so that they are jointly feasible. Es-
sentially, a local neighborhood of the expected statistics contains a product space. This
condition is quite easy to satisfy.22
   For models where counts are non-conflicted, with high probability the realized sta-
tistics lie in a product subspace, which helps us prove the following consistency result.
Theorem 1 (Consistency and Asymptotic Normality of Count SERGMs). A sequence
                                                                        P
of count SERGMs that are non-conflicted is consistent; |βbn − β n | −→ 0.
   Moreover, if exp β`n /(1 + exp β`n ) · S̄`n → ∞ for every `, the parameter estimates are
asymptotically normally distributed:
                                                                                             

                           1/2
                                                                          1
                        Dn,` βb`n − β`n
                                                                                            
                                               N
                                                0,                                         .
                                                                                            
                                                         exp β`n                 exp β`n
                                                        1+exp β`n
                                                                    · 1−        1+exp β`n

                                      n
   Finally, letting pb` = s` /S ` , an approximation   of the MLE estimator can be found
                                                   n
                                           
directly as β` := log (p` /(1 − p` )) = log s` /(S ` − s` ) .
            b           b        b

   The proof of Theorem 1 works via showing that the model can be locally approxi-
mated by a product of appropriately defined binomial random variables. In fact those
binomial random variables provide a direct estimator for count SERGMs. Our proof
shows that following what would seem to be a naive technique is valid: one can simply
estimate parameters p` as if the subgraphs were generated according to a binomial dis-
                                                             n
tribution with a maximum number of possible realizations S ` and s` as its realization.
   It is important to emphasize that count SERGMs still allow for strong interdepen-
dencies and correlations in link appearances, both within and across statistics. What
our proof takes advantage of is a local approximation of such count SERGM distribu-
tions in non-conflicted regions. Theorem 1 tells us that non-conflicted count SERGMs
21E      n
               refers to the expectation taken with respect to the one dimensional distribution of S`n ignor-
   β`n [S` ]
                                                                n
                                                               KS (s` ) exp(β·s` )
ing other statistics: i.e., with respect to a SERGM P               `
                                                                         n (s0 ) exp β·s0   . This takes expectations
                                                                   n
                                                             s0 ≤S `
                                                                        KS`  `      ( `)
                                                              `
with respect to the unconstrained range of S`n rather than cross restrictions imposed under An .
22
   There are other things embodied here, as certain counts of statistics might not be feasible: e.g., it
is not possible to have a network with only one triangle missing. Once one triangle is removed it also
removes many others. Thus, the range of some statistics is not a connected (containing all adjacent
entries) subset of the integers. Still, for lower values of triangles, this is not an issue. In the relatively
sparse ranges of networks that are often of empirical interest, this condition is easily satisfied.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                19

form a consistently estimable class whose statistical properties we understand very
well.

4.2. Consistency of SERGM Estimation Beyond Count Statistics.
   The above results apply to a fairly general class of SERGMs, count SERGMs, for
which we can derive explicit asymptotic distributions and simple estimators. We also
provide results about consistency for the more full class of SERGMs in Appendix E.
   Briefly, there are two sorts of conditions that we outline as being sufficient for consis-
tency (and as we show, effectively, necessary). One is an identification condition that
requires that different parameters distinguish themselves with different expected sta-
tistics. It is a minimal condition (essentially necessary) since if two different parameter
values generate very similar expected statistics, then observing the realized statistic
will not allow us to distinguish the parameters. The second condition requires that the
(appropriately normalized) statistics concentrate around their means. If the statistics
are not concentrated, then even though different parameters lead to different expected
statistics, observing a statistic would not allow one to back out the parameters. Various
combinations of such conditions (see Appendix E) ensure consistent estimation.

                                  5. SUGM Estimation
   Next, we discuss the estimation of SUGMs. The main challenge here is that sub-
networks can be incidentally generated: forming links can lead some triangles to form
indirectly. Thus, to estimate the actual true generation rates, we need to estimate
incidental formation. We take two approaches. One takes advantage of the fact that
many social and economic applications are in the context of sparse networks. We show
in large and sparse enough networks, incidental generation does not significantly bias
estimation, and direct counts provide asymptotically accurate estimates of generating
probabilities. The second is to provide an explicit algorithm for estimation networks
where incidentals may be nontrivial, which we return to in Section 5.3.

5.1. Incidentally Generated Subgraphs.
   To see the issue of incidental subgraph generation in SUGMs consider the following
example. Suppose that the subgraphs in question are triangles and single links, so
that Gn1 (g) is the set of all triangles possible among the n nodes, and Gn2 (g) is the set
of links on n nodes. The triangle {12, 23, 31} could be incidentally generated by the
subgraphs g 1 , g 2 , g 3 where g 1 = {12, 24, 41}, g 2 = {23, 25, 53} and g 3 = {31}. Figure 4
provides an illustration.
   This presents a challenge for estimating a parameter related to triangle formation
since some of the triangles that we observe were truly generated in the formation
process, and others were “incidentally generated;” and similarly, it presents a challenge
to estimating a parameter for link formation since some truly generated links end up
as parts of triangles.
   The key to our estimation in this section is that in cases where networks are sparse
enough, then the fraction of incidentally generated subgraphs compared to truly gen-
erated subgraphs is negligible. Many applications satisfy the sparsity conditions and
so the estimation techniques are applicable in many cases of interest.
   To state results on the estimation of sparse SUGMs, we first need a few definitions.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                              20



                                         3         1                                 3         1



                                     5        2        4                         5        2        4




                                             (a)                                         (b)


                   3         1                                 3         1                                 3         1



               5        2        4                         5        2        4                         5        2        4




                       (c)                                         (d)                                         (e)

        Figure 4. An incidentally generated triangle. (a) Triangle 124 forms.
        (b) Triangle 124 forms. (c) Triangle 235 forms. (d) Link 13 forms. (e)
        Triangle 123 is incidentally generated.


   Consider a sequence of SUGMs indexed by n, each with some k sets of subgraphs
that are counted, Gn = (Gn1 , . . . Gnk ), where k is fixed for the sequence. We say that
the vector of sets of subgraphs Gn = (Gn1 , . . . Gnk ) is nicely-ordered if the subnetworks
in Gn` cannot be a subnetwork of the subnetworks in Gn`0 for k ≥ `0 > ` ≥ 1:
                             g` ∈ Gn` and g`0 ∈ Gn`0 implies that g` 6⊂ g`0 .
Note that any vector of sets of subgraphs can be nicely ordered: simply order them
so that the number of links in the subgraphs are non-increasing in `: so that `0 > `
implies that the number of links in a subnetwork of type `0 is no more than the number
of links in a subnetwork of type `. For example, triangles precede links.
    We then follow our accounting convention so that statistics count subgraphs in order
and those which are not part of any previous subgraph:
S`n0 (g) = |{g`0 ∈ Gn`0 : g`0 ⊂ g and g`0 6⊂ g` for any g` ∈ Gn` such that g` ⊂ g for some ` < `0 }|.
    We now define incidental generation and sparsity.
    Consider a realization of a SUGM in which the truly generated subgraphs are given
by Γ ⊂ ∪` Gn` , and let g denote the realized network g = ∪g0 ∈Γ g 0 . The researcher
observes g and must make some inferences about Γ. Fix a specific subgraph g 0 ⊂ g.
We say that g 0 is incidentally generated by a subset of the (truly generated) subgraphs
{g j }j∈J ⊂ Γ, indexed by J, if:
     (i) g 0 was not truly generated (g 0 ∈/ Γ),
           0         j
    (ii) g ⊂ ∪j∈J g , and
   (iii) there is no j 0 ∈ J such that g 0 ⊂ ∪j∈J,j6=j 0 g j .
Part (ii) states that the subgraph is incidentally generated, and part (iii) of the condi-
tion ensures that the set of generating subgraphs is minimal.
   Despite minimality, a subgraph could still be generated in multiple ways. For ex-
ample, in Figure 4e, if the researcher only observes the resulting network, there are
various possibilities to be considered: the triangle {12, 23, 31} could have been truly
generated, it could also have been incidentally generated by the subgraphs g 1 , g 2 , g 3
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                          21

where g 1 = {12, 24, 41}, g 2 = {23, 25, 53} and g 3 = {31}, it could have been inciden-
tally generated by the subgraphs g 1 , g 2 , g 3 where g 1 = {12}, g 2 = {23} and g 3 = {31},
and still other possibilities.

5.1.1. Generating Classes.
   In order to define sparsity, we have to keep track of the various ways in which a
subnetwork could have been incidentally generated.
   Out of the many ways in which g` ∈ Gn` could be incidentally generated, some of
them are equivalent up to relabelings. For instance, in a large graph any different com-
binations of triangles and edges could incidentally generate a triangle g` = {12, 23, 31},
however there are only eight ways in which it can be done if we ignore the labelings
of the nodes outside of g` : link 12 could be generated either by a triangle or link, and
same for links 23 and 31, leading to 23 = 8 ways in which this could happen.
   Consider g` ∈ Gn` that is incidentally generated by a set of subnetworks {g j }j∈J
                                                                 0
with associated indices `j and also by another set {g j }j 0 ∈J 0 . We say {g j }j∈J and
    0                                                                       0
{g j }j 0 ∈J 0 are equivalent generators of g` if for each g j there is g j such that `j = `j 0
and gj ∩ g` = gj 0 ∩ g` . So generating sets play the same roles in g` but might involve
different nodes outside of N (g` ). Equivalent sets of generators must have the same
cardinality as they must both be minimal and involve the same intersections with g` .
   Given this equivalence relation, there are equivalence m`     classes of generating sets of
                                              Pk
networks for any g` . There are at most          `0 =1 m`0     equivalence classes of (minimal)
                                           23
generating sets for any subnetwork g` . For each equivalence class J of generating sets
of some `, we have some list (`j , hj )j∈J of the types of subnetworks and the number of
nodes that the each subnetwork has intersecting with g` . We call these the (minimal)
generating classes of a subgraph g` and note that these are the same for all members
of Gn` , and so we refer to them as the generating classes of `.
   So, for a links and triangles example, where Gn = (GT , GL ) are triangles and links
respectively, there are four generating classes of a triangle: a triangle could be inci-
dentally generated by three other triangles, two triangles and one link, two links and
one triangle, or three links.24Here, then we would represent a generating class of two
triangles and a link as (T, 2; T, 2; L, 2).

5.1.2. Relative Sparsity.
  Consider a set of nicely ordered subgraphs Gn = (Gn1 , . . . , Gnk ) and any ` ∈ {1, . . . , k}
and any generating class of some `, denoted J = (`1 , h1 ; . . . ; `|J|,h|J| . Let25
                                                  X
                                         MJ = (         hj ) − m` .
                                                  j∈J

For example, in forming a triangle from any combination of triangles and links, each
hj = 2 and so MJ = 6 − 3 = 3.
23For                                        Pk
      each link in g` there are at most `0 =1 m`0 links that could generate that link out of various
subgraphs, and then the power    is just the product of this across links in g` , producing an upper bound.
                                          m`
24Here, our upper bound Pk                    is 43 , which is conservative.
                              `0 =1 m`
                                        0

25Note that MJ ≥ 1 since |J| ≥ 2 and each set of hj nodes intersects with at least one other set of hj 0
nodes for some j 0 6= j. Recall that under the nice ordering, smaller subgraphs cannot be generated as
a subset of some single larger one .
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      22

  We say that a sequence of models as defined in Section 3.2 with associated nicely-
ordered subgraphs Gn = (Gn1 , . . . , Gnk ) and parameters pn = (pn1 , . . . , pnk ) is relatively
sparse if for each ` and associated generating class J with associated (`j , hj )j∈J :
                                           Epn (S`nj (g))
                                      Q
                                         j∈J
                                                          → 0.
                                       nMJ Epn (S`n (g))
This is a condition that limits the relative frequency with which subgraphs will be
incidentally generated (the numerator) to directly generated (the denominator).
   To make this concrete, consider our example with triangles and links. A triangle can
be generated by other combinations of links and triangles.     The expected number of
triangles that nature generates directly is EpT [STn (g)] = pT n3 and the number of links
                                                                              
                                                                    n             n
not in triangles is (approximately) EpL [SLn (g)] = pL              2
                                                                        − O pT    3
                                                                                         . Thus it must
be that for each generating class,
                                              Epn (S`nj (g))
                                        Q
                                          j
                                                             → 0.
                                               p T n6
For the generating class of all triangles, this implies that p2T n3 → 0, so pT = o(n−3/2 ).
For the generating class of all links, this implies that26 p3L /pT → 0, which is the obvious
condition that triangles formed by independent links are rare compared to triangles
formed directly. This implies that (but is not necessarily implied by) pL = o(n−1/2 ).
The conditions on the remaining generating classes (some links and some triangles) are
implied by these ones.
   For example, letting pT = a(n)/n2 and pL = b/n, where a(n) = o(n1/2 ) satisfies the
sparsity conditions.27

5.2. Estimation of Sparse Models.
   Let Sen denote the vector of the numbers of subnetworks of various types that are
truly generated; this is not observed by the researcher since the resulting g may include
incidental generation. Let S n (g) the observed counts including the incidentally gen-
erated subnetworks. In Figure 5, SeTn = 9 but STn (g) = 10 and from observing g there
is no way to know exactly what the true SeTn is, we just have an upper bound on it.
Meanwhile, SeUn = 23, but as one truly generated link becomes part of an incidentally
generated triangle, it follows that SUn = 22.
   Nonetheless, as we prove, under the sparsity condition we can accurately estimate
the true statistics and thus the true parameters.
                                                                    n
   To state our next result, we need the following notation. Let S ` (g) be the maximum
count of S`n that is possible   on network g. If  we are counting triangles and links not
                     n                 n
                                             
                              n                 n
in triangles, then S T (g) = 3 and S U (g) = 2 − LT (g) where LT (g) is the number of

26Given  that pT = o(n−3/2 ), it follows that EpL [SLn ] = pL n2 − O pT n3
                                                                         
                                                                              is proportional to pL n2 .
27This leads to an expected degree of b + a(n)/3 and an average clustering of roughly
          a(n)
6(b+a(n)/3)(b+a(n)/3+1) . This can be consistent with various clustering rates, and admits rates of
links and triangles found various observed networks. To match very high clustering rates the model
can be altered to include cliques of larger sizes.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      23




                           (a) n nodes                          (b) Triangles form




                          (c) Links form                      (d) Resulting network

        Figure 5. The network that is formed and eventually observed is shown
        in panel D. The process can be thought of as first forming triangles in-
        dependently with probability pnT as in (B), and then forming links inde-
        pendently with probability pnL on the remaining part of the graph as in
        (C). We see that there is one incidence of an extra triangle generated by
        this process. In this network we would count STn (g) = 10 and SUn (g) = 22
        from (D), while the true process generated SeTn (g) = 9 and SeUn (g) = 23.

links that are part of triangles in g.28 Let
                                                        S`n (g)
(5.1)                                      pbn` (g) =     n     .
                                                        S ` (g)
So, pbn` (g) is the fraction of possible subgraphs counted by S`n that are observed in g
out of all of those that could possible exist in g. This is a direct estimate of the param-
eter pn` , as if these subgraphs were each independently generated and not incidentally
generated.
   In order to have pbn` (g) be an accurate estimator of pn` (g) in the limit two things
must be true. First, the network must be relatively sparse, which limits the number
of incidentally generated subgraphs. And, second, it must be that the potential num-
ber of observations of a particular kind of subgraph grows as n grows. This would
happen automatically in a sparse network setting if we were simply counting triangles
and links not in triangles. However, if nodes have different characteristics (say some
28In  sparse networks, LT (g) would be vanishing relative to n2 and so could be ignored. Typically,
                                                               
                      n
in sparse networks, S L (g) will be well approximated by y` mn` , where y` is the number of possible
                                                               

different subgraphs of type ` that can be placed on m` nodes (e.g., y` is 1 for a triangle, m for a star
on m nodes, etc.).
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                     24

demographics), and we are counting triangles and links by node types, then it will also
have to be that the number of nodes that have each demographic grows as n grows. If
there are never more than 20 nodes with some demographic, then we will never have
an accurate estimate of link formation among those nodes.
  We say a SUGM is growing if the probability that Se`n (g) → ∞ for each ` goes to 1.
Theorem 2 (Consistency and Asymptotic Normality). Consider a sequence of growing
and relatively sparse SUGMs with associated nicely-ordered subgraph statistics S n =
(S1n , . . . , Skn ) and parameters pn = (pn1 , . . . , pnk ). The estimator (5.1) is ratio consistent:
bn` (g) P
p
  pn
       −→ 1 for each `. Moreover, for Dn = Diag {pbn` (g)nm` }k`=1
  `
                                                                          
                         Dn1/2 (pbn1 , ..., pbnk )0 − (pn1 , ..., pnk )0       N (0, I) .
   Theorem 2 states that growing and relatively sparse SUGMs are consistently es-
timable via easy estimation techniques: ones that are direct and trivially computable.
   The proof of the theorem involves showing that under the growing and sparsity
conditions the fraction of incidentally generated subnetworks vanishes for each `, and
so the observed counts of subnetworks converge to the true ones. Given that these are
essentially binomial counts, then, as the second part of the theorem states, a variation
on a central limit theorem applies and then normalized errors in parameter estimation
are normally distributed, and we know the rates at which the parameters converge
to their limits. For inference and tests of significance for single parameter values we
note that analytic estimates of the variances are directly computable from the analytic
expression of the diagonal of the variance matrix. Of course, more complex inferential
procedures and tests can be executed through a standard parametric bootstrap as the
model is easily simulated.
   To make the convergence rates concrete, consider the example with links and trian-
gles and let pT = a/n2 and pL = b/n. These are well within the bounds that would
be needed to satisfy sparsity, but provide an example of a realistic level of sparsity
that satisfies our conditions for asymptotic normality. Then one can check the inciden-
tal generations for triangles is op (n1/2 ), which means that the fraction of incidentally
generated triangles is op (n−1/2 ). Here, the normalization D means that the errors on
link estimation will be of order n−1/2 and on triangle estimation of order n−3/2 , and so
parameter estimates converge very quickly.
   Again, we emphasize that although the estimator here is based on binomial approx-
imations, a SUGM still incorporates interdependencies directly through the subgraphs
that are generated. The results make use of the fact that in sparse settings, the picture
of interdependencies is clear and are measured by the statistics one-by-one.
5.3. An Algorithm for Estimating SUGMs without Asymptotic Sparsity.
   We provide an algorithm for estimating SUGMs for cases where sparsity may not be
satisfied, or for small graphs where finite-sample corrections could be useful.
   The idea behind the algorithm is that we create a network by randomly building up
subgraphs in a way that ends up matching the observed network, and we keep track of
how many truly generated subgraphs of each type were needed to get to a network that
matched the observed statistics. In order to estimate the truly generated subnetworks
of each type, Se` (g), we carefully construct a simulated network gsim and keep track of
both its truly generated subgraphs Se` (gsim ) and its observed subgraphs S` (gsim ). We
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                    25

construct gsim to have S` (gsim ) match S` (g) as closely as possible, and then use its true
subgraphs Se` (gsim ) to infer the true subgraphs of g, Se` (g).
   Consider a SUGM with nicely-ordered subgraphs indexed by ` ∈ {1, . . . , k}. We
describe the algorithm for the case where subgraphs of type k (the smallest subgraph
- links in most models) cannot be incidentally generated by other subgraphs.29

Algorithm
                                       0                0                  0
   0. Start with an empty graph gsim       . Set S` (gsim  ) = 0 and Se` (gsim ) = 0 for all `.
   1. Place Sk (g) subgraphs uniformly at random (these will be links in most models).
                                  1
      Call the new network gsim      . This may generate some incidental subgraphs.
                                     1                1
      Update counts of each S` (gsim     ) and Se` (gsim  ) (with the latter only having truly
      generated links so far).
                  t−1                                          t−1
   t. – If Sk (gsim   ) < Sk (g), then place Sk (g) − Sk (gsim     ) subgraphs down uniformly
                                                     t
           at random. Call the new network gsim and proceed to step t + 1.
        – Otherwise, pick subgraph of type ` with the minimal ratio Se` (gsim )/S` (g).
           Add one subgraph of type ` uniformly uniformly at random.30 Call the
                           t
           new network gsim     and proceed to step t + 1.
        – If S` (gsim ) ≥ S` (g) for all `, stop.
              e

     The estimates are pb` = Se` (gsim )/S ` (g).

   To see the intuition behind the algorithm consider a case with just links and triangles.
The algorithm takes advantage of the fact that links can generate triangles, but not
the other way around. First the algorithm generates unsupported links up to the
number observed in g. This might lead to some triangles, and lowering the number
of observed links. The algorithm then tops up the links and keeps doing so until the
correct observed number of links are present. If there are fewer triangles than in g, it
begins adding triangles one at a time (as they might incidentally generate more). At
each step, if the number of links drops below what are in g, then new links are added.
It continues until the correct number of links and triangles are obtained. It can never
overshoot on links, and may slightly overshoot on triangles, only by the incidentals
generated in the last steps.
   There are many variations one could consider on the algorithm.31 For example, if one
is conditioning on various covariates, then there might be more than one type of link,
and since all types of links cannot be incidentally generated one can “top up” several
types of subgraphs and not just k. Thus, in step 1 instead of using just k above, one
29  If the smallest subgraphs can be generated incidentally (for instance if a model only included
triangles and cliques of size 4), then begin the algorithm at step t and treat subgraphs of type k
symmetrically with all other subgraphs (so drop the first part of step t).
30Add it uniformly at random out of candidate subgraphs that are not already a subgraph of some
                         t−1
existing subgraph of gsim    . For instance, if adding a triangle, only consider triangles that are not
already a subset of some clique of size 3 or more of the generated network through this step.
31More generally a Method of Simulated Moments (MSM) approach could also be taken. For that,
one simply searches on a grid of parameters, in each case simulating the SUGM and then picking pb
for                                                    0
                     pb := argmin S(g) − Ep S(g Sim ) C S(g) − Ep S(g Sim ) .
                                                                              
                             p
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      26

might also use k − 1, etc., for however many types of links there are, and similarly for
the first part of step t.32
5.4. The Relation between SUGMs and SERGMs.
   We now show a relationship between SUGMs and SERGMs.
   It is easiest to see the connection by considering the variation of a SUGM where
nature forms various subgraphs with a probability p` of a given subgraph g` ∈ Gn`
forming without worrying about whether they overlap, so it could form a triangle and
also form a link that already belongs to that triangle. For instance, in a nicely ordered
SUGM, if nature first formed triangles and then links outside of triangles, if the triangle
between nodes 1,2, and 3 was formed, then the links 12, 23, and 13 would not be added
later. In this variation of a SUGM, nature forms links and triangles without caring
about overlap, so it might form the triangle 1,2,3 and then also the link 12. The
formation of a given subgraph is independent of other subgraphs. Again, let Se` denote
the count of truly generated subgraphs g` ∈ Gn` .
   Define θ` by
                                                                                       !
                                         exp(θ` )                 p`
(5.2)                             p` =              or θ` = log        .
                                       exp(θ` ) + 1             1 − p`
Theorem 3 (SERGM Representations of SUGMs). Suppose that the probability that
subgraph of type ` forms is given by (5.2). This form of SUGM can be represented in
a SERGM form:
                                                                           
                                                     K n (S)    e·θ
                                                          e exp S
(5.3)                                 Pnθ (S)
                                           e = P                                   ,
                                                     s0   K n (s0 ) exp (s0 · θ)
                        n   
                        S`
where K`n (s` ) =                and K n (s) =       K`n (s` ).
                                                 Q
                        s`                       `

   Theorem 3 provides a relationship between SUGMs and SERGMs. The two are
closely related, although the statistics counted here are the actual subgraphs (including
overlaps) that nature generated, which can be estimated but not precisely known.
   Note that this also provides a reason why in specifying SERGMs it is useful to have
K’s that differ from the N ’s that correspond to some ERGM model. Here specific K’s
are natural and yet differ from an ERGM formulation.
   A direct implication of Theorem 3 is the following, which provides a general result on
dynamic processes of network formation, where subgraphs are repeatedly considered
and added and deleted over time.
Corollary 1. Consider any dynamic process such that with probability one, each sub-
graph is considered infinitely often, and when a subgraph is considered it is added with
probability (5.2) if not already present and deleted with the complementary probability
if it is already present. The resulting dynamic process has a steady state distribution
given by (5.3).
32 To fix ideas, consider a SUGM in which there are two types of triangles and two types of links that
are generated, accounting for covariates (as we will use in Section ??). For instance, links between
pairs of nodes that are ‘close’ in terms of the characteristics and pairs of nodes that are ‘far’, and
triangles involving nodes that are all ‘close’ and triangles that involve some nodes that are ‘far’ from
each other. The statistics that we count for a network g are: ST,C (g), ST,F (g),SU,C (g),SU,F (g), where
U is for unsupported links and T for triangle, and C is for ‘close’ and F is for ‘far’.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      27

         6. Strategic/Preference-Based Random Network Models

  As we have discussed above, SERGMs and SUGMs admit models where both choice
and chance are important, and we describe a couple of examples to illustrate how
preferences of individuals over networks can be incorporated.

6.1. Mutual Consent Formation Models.
   Here we describe a strategic network model that harnesses some of the power of
Theorem 2. The key aspect of the model is that decisions to link are not only bilateral
but instead multilateral: sub-groups of individuals decide whether or not to form
subgraphs. A pair of individuals may meet and decide (mutually) as to whether to add
a single link, but also a group of three (or more) may meet and decide whether to form a
some subgraph such as a clique or some other form (e.g., a ring, star, etc.).33 Moreover,
the probability that they form the subgraph could depend upon the characteristics of
the individuals involved.
   Consider subgraphs g` ∈ Gn` with associated individuals N (g` ).
   The members of N (g` ) meet according to a random process and have the opportunity
to form g` . Both the probability with which the members meet and their preferences
for forming g` can depend on their characteristics X(g` ) = (Xi )i∈N (g` ) .
   There are certain aspects of the members’ characteristics, Hi (X(g` )), that affect i’s
benefits from the subgraph.34
   There is a probability π` that a subgraph g` of individuals with characteristics X(g` )
meets and decides whether to form g` . So it might be more likely that individuals of
similar ages meet than ones with different ages.
   Individual i obtains a utility35
                               Ui,` (X(g` )) = γ`,Xi Hi (X(g` )) − i,`
from the formation of a given subnetwork g` , where γ`,Xi depends on the subnetwork
in question and possibly on the characteristics of i and i,` is a random idiosyncratic
term.
   The subnetwork then forms conditional upon it having met if and only if Ui,` (X(g` )) ≥
0 for all i (say with at least one strictly positive).36 If the error term has an atomless
distribution, then the strictness is inconsequential. Let F` (·) be the distribution of
33For   additional theoretical underpinnings of coalition-based network formation models see Jackson
and van den Nouweland (2005); Caulier et al. (2013).
34 For instance if X(g ) were a list of the individuals’ ages, then it might be that i’s bene-
                          `
fit from the subgraph is a function of i’s distance from the average characteristics: hi (X(g` )) =
        P
  Xi − j6=i Xj /(m` − 1) . It could also be that i benefits from the maximum value of X−i , or suffers
from variation in the characteristics. h can be tailored to the specific application and list character-
istics.
35Here we simplify notation by omitting the dependence of the utility on a given individual’s position
in the subnetwork. Everything stated here extends directly allowing utility to depend on position: for
instance, getting higher utility from being the center of a star rather than on its periphery, but the
notation becomes cumbersome.
36 This then corresponds nests pairwise stability as defined by Jackson and Wolinsky (1996), subject
to the meeting process. One can adjust this to take into account other rules for group formation, and
this also easily handles directed networks.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      28

error terms for the formation of subgraphs in Gn` . So, the probability that a subgraph
g` ∈ Gn` with characteristics X(g` ) = (Xi )i∈N (g` ) is formed is
                                            Y
(6.1)                          p ` = π`               F` (γ`,Xi Hi (X(g` ))) .
                                          i∈N (g` )

  Let S` (g) denote the number of subnetworks in Gn` (consisting of individuals with
characteristics X(g` )) that form in a network g, counted excluding networks already
counted as subset of some `0 < `, as under the well-ordered condition. Under the
conditions of Theorem 2, the SUGM in (6.1) is then easily estimated and consistent.37
  It is important to note that such a formulation allows us to do welfare computations
and changes in welfare due to changes in, say, the distribution of X if they include
parameters that a policymaker may control - or it may be that a policymaker could
change the π function in some well-defined way by say, subsidizing interactions among
groups with certain sorts of characteristics who might tend to meet infrequently.
6.2. Strategic Network Formation and Potential Functions.
   There is a nice connection between strategic network formation models and poten-
tial functions that spans a series of papers: Jackson and Watts (2001), Butts (2009),
Mele (2013), Badev (2013). For example, Butts (2009) and Mele (2013) show that
if links are recognized independently over time, and then added or deleted based on
individual choices according to a logistic function, then the steady-state distribution
can be represented as an ERGM. In those models, only one agent makes a decision at a
time and links must be directed. Here we generalize the set of models that are covered,
and also extend to allow for mutual consent. We also provide a directed version of the
formation model which generalizes the results of Mele (2013).
   Agent i’s payoff from network g can depend on which subgraphs i is a member of,
as well as things such as to whom his or her neighbors are connected.
   Let G denote some set of subgraphs from which agents derive utility.
   Consider some agent i and a subgraph g` ∈ G that i is a member of, i ∈ g` . Let the
members of g` (including i) have a vector of characteristics described by X` . Agent i
gets some marginal payoff,
                                        v(g` , X` ),
from having this subgraph in the network where this function can depend on the type
of subgraph and the characteristics of all the agents involved in the subgraph.
   Agent i’s utility from a network g is then
                                                       X
(6.2)                               ui (g) =                  v(g` , X` ).
                                                 g` ∈G,i∈g`

37 Although the probabilities of various subgraphs are directly estimable Q(and hence identified) under
the conditions of Theorem 2, of course whether the various parts of π` i∈N (g` ) F` (γ` Hi (X(g` ))) are
well identified depends on the specifics of the the functional forms involved. Just as an example,
consider a situation with two types. Set Xi = 1 if i is of type 1 and Xi = 2 if i is of type 2
and Hi (X) = Xi − Xj and consider m = 2. Then γ2 and −γ2 both lead to the same value of
F2 (γ2 (Xi − Xj )) × F2 (γ2 (Xj − Xi )). So here it could not be judged whether the type 2 has a greater
expected utility (net of the random term) from the match than the type 1 or whether it is the
reverse. There are some obvious simplified formulations that allow for identification, for example
setting instead hi (X) = |Xi − Xj |. It might also require specifying a (nonlinear) functional form for
π` as in Currarini et al. (2010).
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                          29

Note that this allows the agent’s utility to depend on the presence of “friends of friends”
by including subgraphs of the form g` = {ij, jk}. Of course, it also allows agents’
payoffs to depend on direct links, cliques, and so forth.
  Next, consider a network formation process where agents can form links in pairs and
they add the link whenever their mutual gain is positive. The idea is that they can
bargain and make side payments (either in cash or by exchange of favors) to add links
whenever those links are mutually beneficial.
  In particular, a network g is to be pairwise stable with transfers if: 38
     • ij ∈ g implies that ui (g) + uj (g) ≥ ui (g − ij) + uj (g − ij), and
     • ij ∈/ g implies that ui (g) + uj (g) ≥ ui (g + ij) + uj (g + ij).
  For this setting, we can then define the following function f , which is a potential
function for network formation under pairwise stability with transfers:
                                                  X
(6.3)                                   f (g) =           2v(g` , X` ).
                                                  g` ⊂g

It follows that f (·) is a potential function for a network formation game that follows
pairwise stable with transfers. In particular, direct calculations show that for any g
and ij ∈ g:
(6.4)          f (g) − f (g − ij) = (ui (g) + uj (g)) − (ui (g − ij) + uj (g − ij)) .
Thus, the difference between the value that f assigns to g and what it assigns to g − ij
is exactly the sum of the differences that i and j assign to the two networks.
   For any such setting, Theorem 1 in Jackson and Watts (2001) implies that there
exists at least one network that is pairwise stable with transfers, and moreover that
there are no cycles in the improving paths.39
   Now let us describe a dynamic process of network formation. Let g 0 be some starting
network, and let g t denote the network in place at the end of time t. Let g−ij
                                                                            t
                                                                                denote the
network of links other than ij. In each period, there exists some positive probability of
each given link being recognized (the two agents in question “meet”). The recognition
probabilities can depend on the pair in question and the network in place at the time
and the probability that link ij is recognized conditional on the network in place g t is
                t
denoted p(ij, g−ij ).40
   We emphasize that the meeting process is quite general as it is allowed to depend
on the attributes of the agents i and j as well as the network in question. Thus, for
example, it allows their meeting probability to depend on whether or not the pair
have friends in common, and can even depend on how many friends in common they
have, and can depend on any other aspect of the network, as well as the agents’
characteristics.
38This   definition is from Bloch and Jackson (2006) and is related to the definition of pairwise stability
allowing for side payments that appears in the conclusion of Jackson and Wolinsky (1996).
39An improving path is a sequence of networks that differ from each other by one link such that if a
link is added or deleted then the pair of agents in the link see an increase in their summed utilities.
40Since each link probability could depend on the network other than the link ij, if each link’s
recognition probability does not exceed 1/ n2 then theP
                                                 
                                                             sum of all link recognition probabilities does
                                                                      t
not exceed 1, and that leave the residual probability 1− ij p(ij, g−ij    ) to be the probability that there
is no link recognized in the current period and the period simply advances. The scaling of probabilities
is irrelevant to the steady state, and so it is fine to allow periods to pass without any recognition.
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                     30

  Once recognized at some time t, i and j decide whether to add or delete the link,
                                                                   t−1
conditional upon the rest of the network in place at that time g−ij    . The probability
that the link is added/kept is a logistic function of the mutual value of the link:41
                                                                                         
                                           t                t
                                  exp ui (g−ij + ij) + uj (g−ij + ij)
(6.5)                                                                                       .
                    t                t                    t                t
           exp ui (g−ij + ij) + uj (g−ij + ij) + exp ui (g−ij − ij) + uj (g−ij − ij)
  This defines an aperiodic and irreducible Markov chain over the space of all networks,
and so it has a unique steady-state distribution. Moreover, it is a reversible Markov
chain and the unique steady-state distribution is given by42
                                                      exp(f (g))
                                      P(g) = P                    0
                                                                      .
                                                      g 0 exp(f (g ))

Thus, this is an ERGM:
                                                    P                           
                                          exp             g` ⊂g 2v(g` , X` )
                              P(g) = P                P                             .
                                          g0   exp            g` ⊂g 0   2v(g` , X` )
                         P
We can then rewrite g` ⊂g 2v(g` , X` ) as a function that simply keeps track of statistics
of how many subgraphs of a network g are of a given form, (`, X` ), denoted S`,X` (g).
This then has a SERGM representation:
                                                      P
                                               exp (   ` s`,X` 2v`,X` )
                                P(s) = P              P                .
                                               s0   exp         `   s0`,X` 2v`,X`
We remark that link recognition probabilities do not enter the final steady-state dis-
tribution, which is only determined by the preferences as captured via the v functions.
6.3. Directed Network Formation.
  Everything stated above has an analog for directed links ij where the decision to add
the link is taken by agent i (with stability defined by Nash equilibrium), and where the
subgraphs, g` ’s, are directed. The only change is to drop the ‘2’ in the above formulas
and require that each agent obtain utility from each subgraph in which they direct
some link.43 The directed version of the above generalizes a result in Mele (2013).
6.4. Search Intensity Models.
   Another interesting class of strategic/random network formation models that we can
extend to the setting here are where agents face overall costs of forming relationships -
not just costs associated with various subgraphs (as in the models above). To account
for such overall tradeoffs in the network formation processes, we can also include search
intensities as have been analyzed in various formation models such as Currarini et al.
41With                                           t
         a slight abuse of notation, we allow g−ij  +ij to denote the network where ij is present and
                                            t                    t
the network of other links is described by g−ij , and similarly g−ij −ij denotes the network where ij is
                                                               t
not present and the network of other links is described by g−ij .
42We omit the standard proof as, for instance, it is a direct extension of the proof of Theorem 1 in
                                                                               t
Mele (2013), noting that the link recognition probability can depend on g−ij       without affecting the
steps of his proof.
43The model can be specified to allow agents to derive utility from subgraphs in which they have some
“in-links” but no “out-links”, but can also allow them not to.
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                      31

(2009, 2010); Borgs et al. (2010); Golub and Livne (2010). Those models are of bilateral
link formation; but are easily extended to more general SUGMs as we briefly describe.
   Each agent i with characteristics Xi puts in a search effort e(Xi , m, X) ∈ [0, 1] to form
cliques of size m with characteristics X. m = 2 indicates links, and so e(Xi , 2, (Xi , Xj ))
is the effort that agent i expends in trying to form links with agents who have char-
acteristics Xj ; and e(Xi , 3, (Xi , Xj , Xh )) is the effort that agent i expends in trying
to form triangles where the other two agents have characteristics Xj and Xh , and so
forth. “Effort” is simply a shorthand for either the time spent socializing, or else it
could simply indicate a relative openness to forming relationships of various types.
   An agent obtains a utility u(Xi , m, X) from being of type Xi in a clique of size m
with characteristics X.
   The probability that a given clique Clm forms depends on the vector of efforts for such
cliques of those in the clique, (ej (, m, X))j∈Clm , according to a function πm,X ((ej (m, X))j∈Clm )
that is nondecreasing in each of its arguments.
   An agent also pays a cost of network formation: c(Xi , (ei (m, X))m,X ) that depends
on his or her characteristics Xi and the search efforts that he or she exerts in forming
various links and cliques, (ei (, m, X))m,X .
   Thus, an agent i’s overall expected payoff as a function of the all of the agents’ efforts
is described by
                                                                
               X
                        πm,X ((ej (m, X))j∈Clm )u(Xi , m, X) − c(Xi , (ei (m, X))m,X )
          m,Clm :i∈Clm

   In a case where the u’s are nonnegative, this defines a supermodular game: agent i’s
change in payoff from increasing any dimension of (ei (m, X))m,X is nondecreasing in
the vector of strategies (ej (m, X))j6=i,m,X . In such games, pure strategy equilibria exist
and form a complete lattice (e.g., see Topkis (2001)). Additional conditions on π, u,
and c can ensure uniqueness of equilibrium, depending on the specific functional forms
that are used to parameterize the model, or one can appeal to equilibrium selection.44
   Models of this structure define SUGMs, where the relative frequencies pm,X of cliques
of size m consisting of agents with characteristics described by the profile X. Specifying
functional forms for π, u and c then allows for estimation of parameters of the model
and of the equilibrium, provided the specification is tight enough to be well-identified.
   Although the above formulation is described for cliques, it is easily adjusted for any
subgraphs (for instance an agent may value being the center of a star with m agents).
In the obvious extension one needs to keep track of the positions of the various types
of agents in the subgraph as there are then asymmetries in positions and, for instance,
agents might care about the characteristics of the agent at the center of a star.

                   7. Network properties generated by SUGMs

  First we compare a simple model that estimates linking probabilities based on node
characteristics (caste and geography) with a SUGM that also includes triangles. The
idea is to compare how well these replicate various features of actual networks, such as
44Here   there are positive spillovers/externalities from strategies, and so generally the maximal equi-
librium will Pareto dominate the others, and so a standard refinement would be to look at the Pareto
efficient equilibrium which is then unique and pure (e.g., see Vives (2007) for some background).
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                        32

clustering, the size of the giant component, average path length, degree distributions,
and various eigenvalue properties of the adjacency matrices.
   For this exercise we use the ? data consisting of networks in 75 Indian villages with
an average of 220 nodes. Here we focus on “advice” networks: an edge represents
whether a household speaks to another household when having to make an important
decision and we use an undirected, unweighted graph. This is a simple representation
of the informational network structure within the sample of villages, and the networks
are reasonably connected (with more than two-thirds of the nodes being in a giant
component) and yet also reasonably sparse for small networks.
   In addition to the average degree and clustering (which are at least partly captured
by links and triangles), we are interested in other quantities motivated by theory. We
look at the first eigenvalue of the adjacency matrix, which is a measure of diffusiveness
of a network under a percolation process (e.g., Bollobás et al., Jackson (2008)). A
related quantity is the spectral gap, which is the difference in the magnitudes of the
first and second eigenvalues of the adjacency matrix. This is intimately related to
the expansiveness of the network – namely, for any subset of nodes the number of
links leaving the subset relative to the number of links within the subset. We are also
interested in the second eigenvalue of the stochasticized adjacency matrix.45 This is
a quantity that is key in local average learning processes and modulates the time to
consensus (DeMarzo et al. (2003), Golub and Jackson (2012)). Additionally, we look at
the fraction of nodes that belong to the giant component of the network, as empirical
networks are often not completely connected. Finally, we consider average path length
(in the largest component).
   Our procedure is as follows. For every village, we estimate each of two network
formation models. The first network formation model is a link-based model where the
probabilities can also depend on geographic and caste covariates. In particular, pairs of
household are categorized as either being “close” or “far” and then separate probabili-
ties of links are estimated for “close” and “far” pairs. “Close” refers to pairs of nodes
that are of the same caste and are below the median geographic distance (the median
GPS distance taken across all pairs of households), and “far” to those that either differ
in caste or are further than the median distance. The second network formation model
is a SUGM with the same structure except for the addition of triangles.46 We esti-
mate parameters for the village network for each model and then generate a random
network from the model based on the estimated parameters. We do 100 such simula-
tions for each of the 36 villages and for each of the two models. We then compare the
aforementioned network characteristics from the simulations with the actual data.47
   Table 1 presents the results. We find that networks simulated from the SUGM better
match the structural properties exhibited by the empirical Indian village networks than
those simulated from a link-based model.
   Both the SUGM and the link-based model do quite well for average degree. As
expected, the SUGM matches the triangle count and the unsupported link count (as

45The                                                        g
        stochastized adjacency matrix T is defined as Tij = P ijg , where either gii = 1, or gik > 0 for
                                                                    ik
                                                                k
some k 6= i, as this captures the set of people to whom i listens.
46
   Similarly, we categorize triangles as being “close” if all nodes are of the same caste and all pairs are
below the median distance, and “far” otherwise.
47
   We have complete GPS and caste data for only 36 villages.
                              TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                               33

                                                      Table 1. Network Properties

                                                                                                Link-based model         SUGM with links       SUGM with isolates,
                                                                                Data
                                                                                                 with covariates           and triangles        links and triangles
                                                                                 [1]                     [2]                     [3]                     [4]
  Models are fit to   Number of Unsupported Links                              160.8                   236.2                   161.2                   161.8
  different           Number of Triangles                                       39.2                     3.1                    39.7                    39.5
  combinations of     Average Degree                                           2.3243                  2.3260                  2.5916                  2.5219
  these statistics.   Number of Isolates                                      54.9722                 25.7222                 31.4444                 65.9167
                      Average Clustering                                       0.0895                  0.0105                  0.1268                  0.0829
  None of the models Fraction in Giant Component                               0.7061                  0.8315                  0.7982                  0.6718
  are directly fit to First Eigenvalue                                         5.5446                  3.8578                  4.6762                  5.3025
  any of these        Spectral Gap                                             0.9550                  0.3354                  0.6684                  1.0617
  statistics.         Second Eigenvalue of Stochastized Matrix                 0.9573                  0.9632                  0.9559                  0.9069
                      Average Path Length                                      4.6921                  5.6565                  5.1215                  4.1180
  Notes: Column [1] presents the average value of various network characteristics across the 36 villages. Columns [2], [3] and [4] present simulation results. In a
  simulation we first estimate parameters of a given model for a given village and then randomly draw a graph from the model with the estimated parameters. We run 100
  simulations for each of the villages for each of the models and average across the simulations, and the entries report these averaged across the villages.




these are the statistics on which the model is based) whereas the link-based model
matches average degree quite closely (as this is the moment on which this model is
based).
   Neither model is based on the remaining statistics. The first and most obvious thing
to note is that the link-based model does extremely poorly when it comes to matching
clustering while the SUGM does much better, which is natural given that the SUGM
explicitly includes triangles. More interestingly, conditioning on the triangles in the
SUGM is enough to deliver better matches on all of the other dimensions. For instance,
the link-based model considerably underestimates the first eigenvalue (3.86 as compared
to 5.54), whereas the SUGM performs better (4.68). Similarly, the link-based model
underestimates the expansiveness of the networks with a spectral gap of 0.34 instead
of 0.96. The SUGM again performs considerably better (0.67). These sorts of results
also hold true for the average path length, fraction of nodes in the giant component,
and the second eigenvalue of the stochasticized matrix.
   Beyond these two models, we also fit a SUGM that includes isolates, in addition to
links and triangles. Not surprisingly, it fits isolates better than either of the previous
models. The more interesting aspects are in the other features to which none of the
models are fit. Here we see that including isolates significantly improves, beyond the
improvement from triangles, the fits on clustering, the size of the giant component, the
first eigenvalue, and spectral gap. Accounting for isolated nodes changes the density
among remaining nodes in ways that better match the overall structure of the network.
The dimension on which it does not perform as well is the second eigenvalue (the
homophily measure). However, that is likely because the model is not sufficiently
geared towards the covariates that affect segregation, and so densifying the remaining
network reduces segregation. Including a richer set of covariates into the model would
help counter-act that, but is beyond our illustrative purposes here.
   We also examine distributional outcomes. In Figure 6, we show CDFs of node degrees
and clustering. The CDFs from the empirical data are computed as follows. For every
village, we compute the degree and clustering coefficient for each 5th percentile from 5
to 95. We then average these values across the villages in our sample. The simulated
CDFs are computed by taking the analogous cross-village average from simulated data
as described in Table 1. For parsimony, we compare only the isolates-links-triangles
SUGM and the links-based model.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                              34

  Figure 6a shows the degree distributions. The SUGM does considerably better than
the links-based model in matching the entire degree distribution. Specifically, the links-
based model undershoots both the lower and upper tails of the degree distribution,
despite hitting the average correctly. The SUGM, though slightly overshooting the
average degree, better matches the distribution overall.
  Figure 6b shows the distribution of clustering coefficients. The link-based model is
unable to generate any non-trivial clustering and essentially has a degenerate distri-
bution (the short red curve in the upper left). The SUGM generates a distribution
similar to the data, significantly outperforming the link-based model.




           (a) Average CDF of Degree               (b) Average CDF of Clustering Coefficient

       Figure 6. Distributions of degree and clustering coefficients - averaged
       across the 75 villages. The figure displays the CDFs from the data (grey),
       the isolates-links-triangles SUGM (blue), and the link-based model (red).

   The results of the analysis in this section are not sensitive to the covariates included.
That is, it is not simply that the SUGM allows for more parameters that enable it to
better match the data. It is that it includes richer network structures. In Appendix F,
we enrich the links-based model to include polynomials of a large set of demographic
covariates including geographic distance, caste composition, quality of access to elec-
tricity, quality of latrines in the household, number of beds, number of rooms, etc. We
show that the links-based model, even aided by a considerable amount of data and
more degrees of freedom, cannot replicate structural features of the network that are
captured by very simple SUGMs that rely on minimal amounts of covariate data.
   It is perhaps not surprising that SUGMs do a much better job at recreating network
structures that standard link-based models, but nonetheless it is important. Moreover,
the fact that the SUGMs do a better job than a link-based model of recreating not only
local clustering and triangle patterns but also many other features of the real networks
that it is not based upon suggests that there is substantial value added of modeling
the formation of triangles and isolates.
   Finally, knowing that our model is better able to capture the realistic correlational
features of links within real world networks should make us more confident in trusting
the results of the empirical application in Section 2.1. When we look at links across
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                 35

social boundaries, we can be comfortable that to first order, thinking about a SUGM
with links and triangles across and within caste groups is a reasonable cut of the data.

                                       8. Conclusion
   We presented two new classes of models of network formation, SERGMs and SUGMs,
based on the idea that network formation is driven by the properties of a network
and/or by the formation of various subgraphs. This turns the focus away from the
network as the unit of analysis, and instead focuses on its properties, subgraphs and
statistics. This perspective allows us to develop direct estimation techniques and to
derive consistency and asymptotic distributions of parameter estimates. Given the
growing literature on estimation of network formation, such results are essential. Our
framework provides a set of sufficient conditions that a user could check to see if their
preferred microfoundation is likely to satisfy and we give a number of such examples.
   Models of network formation, such as those described here, can be useful beyond
simply studying network patterns, such as in situations where network features are
drivers of economic behaviors. For example, farmers may be significantly more likely
to learn to use a new farming technology in one network than another, and so influ-
encing the network of communication among farmers could be useful. SERGMs and
SUGMs, can help us understand the drivers of network formation and thus which sorts
of interventions might lead to improvements in network features of interest. Moreover,
it is apparent that accounting for endogeneity of networks is important in studying
peer influence (e.g., Aral et al. (2009); Goldsmith-Pinkham and Imbens (2013); Jack-
son (2013); Lindquist and Zenou (2013)) and so having practical models of network
formation is useful beyond direct estimation.
   It is important to emphasize that our models can easily simulate networks. This
can be difficult (impossible) for standard ERGMs. Here, our work suggests several
avenues. First, in the case of sparse networks, the SUGMs are perfectly suited for easily
generating networks: the model directly translates into an algorithm for generating
networks by generating various subnetworks. Second, in the case of SERGMs, the
models are well-adapted to generating statistics of networks, even though in some
cases it might be difficult to generate the networks themselves. For example, if some
profile of statistics S is generated, then randomly picking a network g that exhibits
statistics exactly S can be a hard problem. This suggests a third avenue in line with
our interpretation of SUGMs. Instead of viewing S as the realized statistic of the
network, nature forms a network by forming subnetworks, even when they are dense.
So, the S profile of generated subnetworks is picked by nature based on the SERGM.
This will generate some incidental subnetworks, and so a different observed S 0 from S,
but is still a perfectly well-defined model for generative purposes.48
   Also, given our results, a researcher can use variations of standard approaches of
model selection to deduce which statistics to incorporate in a SERGM or SUGM.
Consider the following. Suppose that a researcher is interested in developing a model
that captures the density, homophily, and clustering in an observed network. An
48In fact, by simulating such processes one can estimate the relationship between S 0 and S which
can then be used for estimation purposes when networks are not sparse, similar to the algorithm we
provide for SUGMs. We leave the general treatment of such algorithms and estimations for future
research.
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                          36

objective function can be built where a model’s score is based on the total difference
between its predictions of the relevant statistics (under best-fit parameters) and the
observed statistics; and, as is commonly done, a penalty can be included for the number
of parameters in the model. Then one can examine SUGMs that incorporate various
subsets of characteristic-based links, triangles, larger cliques, isolated nodes, and so
forth, and find which model minimizes the objective function and is thereby selected.
A similar logic could be used to construct goodness-of-fit tests for the model.
   Finally, we note that the approach we have taken can be further extended. In
fact, once one adopts a SERGM formulation, many other sorts of applications beyond
networks, such as matching problems, partitioning problems, club membership and
others can also be incorporated.

                                     References
Aral, S., L. Muchnik, and A. Sundararajan (2009): “Distinguishing Influence
 Based Contagions from Homophily Driven Diffusion in Dynamic Networks,” Pro-
 ceedings of the National Academy of Sciences. 8
Badev, A. (2013): “Discrete Games in Endogenous Networks: Theory and Policy,”
 mimeo: University of Pennsylvania. 6.2
Banerjee, A. V., A. Chandrasekhar, E. Duflo, and M. O. Jackson (2014):
 “Gossip: Identifying Central Individuals in a Social Network,” Available at SSRN
 2425379. 2.1
Barabasi, A. and R. Albert (1999): “Emergence of scaling in random networks,”
 Science, 286, 509. 2
Bhamidi, S., G. Bresler, and A. Sly (2008): “Mixing time of exponential random
 graphs,” Arxiv preprint arXiv:0812.2265. 1, 2.2.1
Bloch, F. and M. Jackson (2006): “Definitions of equilibrium in network formation
 games,” International Journal of Game Theory, 34, 305âĂŞ318. 38
Bollobás, B., S. Janson, and O. Riordan (2011): “Sparse random graphs with
 clustering,” Random Structures & Algorithms, 38, 269–323. 6
Borgs, C., J. Chayes, J. Ding, and B. Lucier (2010): “The Hitchhiker’s Guide
 to Affiliation Networks: A Game-Theoretic Approach,” ArXiv:1008.1516v1. 6.4
Bramoullé, Y., S. Currarini, M. Jackson, P. Pin, and B. Rogers (2012):
 “Homophily and Long-Run Integration in Social Networks,” Journal of Economic
 Theory, 147, 1754–1786. 2, 2.4
Bramoullé, Y. and R. Kranton (2007): “Risk-sharing networks,” Journal of
 Economic Behavior & Organization, 64, 275–294. 1
Butts, C. (2009): “Using Potential Games to Parameterize ERG Models,” working
 paper, UCI. 6.2
Calvo-Armengol, A. (2004): “Job contact networks,” Journal of Economic Theory,
 115, 191–206. 1
Calvo-Armengol, A. and Y. Zenou (2005): “Job matching, social network and
 word-of-mouth communication,” Journal of Urban Economics, 57, 500–522. 1
Caulier, J.-F., A. Mauleon, and V. Vannetelbosch (2013): “Contractually
 stable networks,” International Journal of Game Theory, 1–17. 33
Chatterjee, S., P. Diaconis, and A. Sly (2010): “Random graphs with a given
 degree sequence,” Arxiv preprint arXiv:1005.1136. 1
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                          37

Christakis, N., J. Fowler, G. Imbens, and K. Kalyanaraman (2010): “An
  Empirical Model for Strategic Network Formation,” NBER Working Paper. 1
Currarini, S., M. Jackson, and P. Pin (2009): “An economic model of friendship:
  Homophily, minorities, and segregation,” Econometrica, 77, 1003–1045. 2, 1, 8, 2.4,
  2.4, 6.4
——— (2010): “Identifying the roles of race-based choice and chance in high school
  friendship network formation,” Proceedings of the National Academy of Sciences,
  107, 4857–4861. 1, 8, 2.4, 2.4, 37, 6.4
DeMarzo, P., D. Vayanos, and J. Zwiebel (2003): “Persuasion Bias, Social
  Influence, and Unidimensional Opinions*,” Quarterly journal of economics, 118, 909–
  968. 7
Frank, O. and D. Strauss (1986): “Markov graphs,” Journal of the American
  Statistical Association, 832–842. 1, 2
Furusawa and H. Konishi (2007): “Free trade networks,” Journal of International
  Economics, 7, 310–335. 1
Goldsmith-Pinkham, P. and G. Imbens (2013): “Social Networks and the Identi-
  fication of Peer Effects,” Journal of Business and Economic Statistics, 31:3, 253–264.
  1, 8
Golub, B. and M. Jackson (2012): “How Homophily Affects the Speed of Learning
  and Best-Response Dynamics,” Quarterly Journal of Economics, 127, 1287–1338. 7
Golub, B. and Y. Livne (2010): “Strategic Random Networks: Why Social Net-
  working Technology Matters,” SSRN working paper. 6.4
Hammersley, J. and P. Clifford (1971): “Markov fields on finite graphs and
  lattices,” . 1
Handcock, M. (2003): “Assessing degeneracy in statistical models of social net-
  works,” . 1, 10
Handcock, M. S., D. R. Hunter, C. T. Butts, S. M. Goodreau, and
  M. Morris (2003): statnet: Software tools for the Statistical Modeling of Network
  Data, Seattle, WA. 2.2.1, D
Jackson, M. (2008): Social and economic networks, Princeton: Princeton University
  Press. 3, 1, 10, 7
——— (2011): Handbook of Social Economics, San Diego: North Holland, chap. An
  Overview of Social Networks and Economic Applications. 10
——— (2013): “Unraveling Peers and Peer Effects: Comments on Goldsmith-
  Pinkham and Imbens’ “Social Networks and the Identification of Peer Ef-
  fects”,” Journal of Business and Economic Statistics, 31:3, 270–273, DOI:
  10.1080/07350015.2013.794095. 8
Jackson, M., T. Barraquer, and X. Tan (2012): “Social Capital and Social
  Quilts: Network Patterns of Favor Exchange,” American Economic Review, 102,
  1857–1897. 1
Jackson, M. and B. Rogers (2007): “Meeting strangers and friends of friends:
  How random are social networks?” The American economic review, 97, 890–915. 2
Jackson, M. and A. van den Nouweland (2005): “Strongly Stable Networks,”
  Games and Economic Behavior, 51, 420–444. 33
Jackson, M. and A. Watts (2001): “The Existence of Pairwise Stable Networks,”
  Seoul Journal of Economics, 14(3), 299–321. 6.2, 6.2
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                             38

Jackson, M. and A. Wolinsky (1996): “A Strategic Model of Social and Economic
  Networks,” Journal of Economic Theory, 71, 44–74. 36, 38
Krackhardt, D. (1988): “Predicting with Networks: Nonparameteric Multiple Re-
  gression Analysis of Dyadic Data,” Social Networks, 10, 359–381. 2
Lindquist, M. and Y. Zenou (2013): “Key Players in Co-offending Networks,”
  working paper Stockholm University. 8
McFadden, D. (1973): “Conditional logit analysis of qualitative choice behavior,” .
  2.1
McPherson, M., L. Smith-Lovin, and J. Cook (2001): “Birds of a Feather:
  Homophily in Social Networks,” Annual Review of Sociology, 27, 415–444. 2.4
Mele, A. (2013): “A Structural Model of Segregation in Social Networks,” working
  paper. 1, 1, 1, 6.2, 6.3, 42
Munshi, K. and M. Rosenzweig (2006): “Traditional institutions meet the modern
  world: Caste, gender, and schooling choice in a globalizing economy,” The American
  Economic Review, 1225–1252. 2.1
Rinaldo, A., S. Petrovic, and S. Fienberg (2011): “Maximum likelihood esti-
  mation in network models,” arXiv preprint arXiv:1105.6145. 17
Schutz, B. (2003): Gravity from the ground up, Cambridge Univ Pr. 9
Shalizi, C. and A. Rinaldo (2012): “Consistency under Sampling of Exponential
  Random Graph Models,” ArXiv 1111.3054v3. 1, 7
Snijders, T. (2002): “Markov Chain Monte Carlo Estimation of Exponential Random
  Graph Models,” Journal of Social Structure, 3, 240. 1, 10
Snijders, T., P. Pattison, G. Robins, and M. Handcock (2006): “New specifi-
  cations for exponential random graph models,” Sociological Methodology, 36, 99–153.
  4, 10, 11
Topkis, D. (2001): Supermodularity and Complementarity, Princeton University
  Press. 6.4
Vives, X. (2007): “Supermodularity and Supermodular Games,” IESE Occasional
  Paper 07/18. 44
Wasserman, S. and P. Pattison (1996): “Logit models and logistic regressions
  for social networks: I. An introduction to Markov graphs andp,” Psychometrika, 61,
  401–425. 1, 2




                                Appendix A. Proofs
Proof of Theorem 1.
  Consider a sequence of count statistics S n = (S1n , . . . , Skn ) whose `-th entry takes
                                                                    n
on nonnegative integer values with some  maximum value S ` → ∞, and the count
                                      n 
SERGMs specified with K n (s) = ` Ss`` .
                                Q



                                           Q S n` 
                            n                `     s`
                                                        exp (β n · s)
(A.1)                  Pβ (S = s) = P             Q S n`                      .
                                         s0 ∈An     `   s0`
                                                              exp (β n · s0 )
                         TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                                                                39

     We rewrite (A.1) as
                                                                                 Q hS n`                                                i
                                                                                      `        s`
                                                                                                        exp (β`n s` )
(A.2)                           Pβ (S n = s) = P                                                          n                                     .
                                                                                                        S`
                                                                                                                      exp (β`n s0` )
                                                                                           Q
                                                                             s0 ∈An            `        s0`

     If we consider the distribution conditional on S n lying in
                        Bn =            {bEβ`n [S`n ](1 − ε)c, . . . , dEβ`n [S`n ](1 + ε)e} ⊂ An
                                Y

                                    `

(for large enough n under the non-conflicted condition), then we can write
                                                Q hS n`                                           i                                     Q hS n`                                    i
                                                     `           s`
                                                                           exp (β`n s` )                                                      `           s`
                                                                                                                                                                   exp (β`n s` )
     Pβ (S n = s|s ∈ B n ) = P                                            n                                    =                                                 n                       ,
                                                                           S`                                                                                      S`
                                                                                     exp (β`n s0` )                                                                            exp (β`n s0` )
                                                             Q                                                                Q            P
                                             s0 ∈B`n             `         s0`                                                        `       s0` ∈B`n             s0`

or
                                                                                                           n    
                                                                                                        S`
                                        n                              n
                                                                                     Y                  s`
                                                                                                                      exp (β`n s` )
(A.3)                        Pβ (S = s|s ∈ B ) =                                                                  
                                                                                                                      S`
                                                                                                                          n                                   .
                                                                                                                                  exp (β`n s0` )
                                                                                              P
                                                                                      `         s0` ∈B`n              s0`

  Next, we consider binomial distributions which we will relate back to the above
expressions for the SERGM.
                                                                                                                                                  Eβ n [S`n ]
     For each `, consider a binomial distribution that has pn` =                                                                                      `
                                                                                                                                                      S`
                                                                                                                                                          n          , with range from
        n
0 to   S` .     Taking a product of independent binomial distributions
(A.4)                                                   n                                                                           Q S n` 
                                                     S`
          Bin
                        
                                                     s`
                                                                 exp (β`n s` )                                                            `       s
                                                                                                                                                           exp (β`n s` )
                    Sen = s =
                                Y
      P                                                              n                                    =P                                 `  n                                      .
                                                                     S`
                                                                            exp (β`n s0` )                                                     Q S`
                                        P
                                    `                 n
                                            s0` ∈[0,S ` ]            s0`                                                            n
                                                                                                                          s0` ∈[0,S ` ]               `        s0`
                                                                                                                                                                           exp (β`n s0` )

The corresponding probability that Sen = s given s ∈ B n can be written as
                                                                                                                n    
                                                                                                            S`
                              Bin
                                                                           
                                                                                                            s`
                                                                                                                          exp (β`n s` )
                                        Sen = s|s ∈ B n =
                                                                                      Y
(A.5)                     P                                                                                           
                                                                                                                          S`
                                                                                                                              n                                   .
                                                                                                                                      exp (β`n s0` )
                                                                                              P
                                                                                          `         s0` ∈B`n              s0`

   For a binomial distribution, the probability that Se`n ∈ B`n → 1.49 Thus, under
independent binomial distributions, the probability that Sen ∈ B n → 1, and so it
follows from (A.4) and (A.5) that
                                                                                                                     n   
                                                                                                                 S`
                                                                      
                        PBin Sen = s|s ∈ B n                                                                                  exp (β`n s0` )
                                                                                     P
                                                                                                        n
                                                                                          s0` ∈[0,S ` ]          s0`
(A.6)                                                                     = P                                 n
                                                                                                                S`
                                                                                                                                                           → 1,
                              PBin Sen = s                                                 s0` ∈B`n             s0`
                                                                                                                          exp (β`n s0` )
uniformly for s ∈ B n .
  Collecting from (A.2) and (A.4) it follows that for s ∈ B n
                                                                                                                               
(A.7)                                          Pβ Sen = s ≥ PBin Sen = s .

49This comes from Chernoff’s inequality since the probability that the ratio of the total number of
successes to the expected number of successes is within an  window of 1 as n → ∞.
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                            40

Collecting from (A.3) and (A.5) it follows that for s ∈ B n
                                                                                                          
(A.8)                      PBin Sen = s|s ∈ B n = Pβ Sen = s|s ∈ B n .
                                                                                                                              
Then (A.7) and (A.8) and the fact that Pβ Sen = s|s ∈ B n ≥ Pβ Sen = s , together
with (A.6), imply that
                                                                      
                                              Pβ Sen = s
(A.9)                                                                     → 1,
                                              PBin Sen = s
uniformly for s ∈ B n .
  The remainder of the claimed results then follows easily from standard properties of
the binomial distribution.
  In particular, the variance terms are computed as follows. First consider a bi-
nomial Bin(pn` ; n) with pn` n → ∞. By the Lindeberg-Feller Central Limit Theorem
√                                                                       pn
  n (pbn` − pn` ) N (0, pn` (1 − pn` )) . Letting β`n = g (pn` ) = log 1−p` n , note
                                                                                                              `

                                      1   1            1
                            g 0 (p) = +         =             .
                                      p 1−p        p(1 − p)
Finally, by the delta method,
                      √  cn            
                                                                        2
                                                                          
                       n β` − β`n       N 0, pn` (1 − pn` ) [g 0 (pn` )]
                                                                                                            2
                                                   exp β`n                                           1                        1
and therefore observing that          pn`     =   1+exp β`n
                                                            ,         pn` (1    −   pn` )       pn (1−pn )
                                                                                                                  =      pn (1−pn )
                                                                                                                                      and sub-
                                                                                                 `     `                  `     `
stituting for   β`n ,   we have
                                                                                                                
                         √                                                            1
                           n βc`n − β`n
                                                                                                             
                                                  N
                                                   0,                                                       .
                                                                                                             
                                                                  exp β`n                        exp β`n
                                                                 1+exp β`n
                                                                                    1−          1+exp β`n

This argument replacing n with S̄`n shows the result.

Proof of Theorem 2. We provide the proof without covariates to save on notation,
but it extends directly. We begin the proof by showing the following. For any `, the
fraction of counts of subnetworks ` generated incidentally by some other subnetworks
goes to 0. That is, consider some ` and g` ∈ Gn` on m` nodes. Let
                                                                E(Se`n )
                                                   pen` =             
                                                                          n
                                                                               .
                                                                y`n       m`

This is no more than pn` , as the denominator includes all possible subgraphs of size `
(where y`n is the number of subgraphs of type ` that can be formed on any given m`
nodes).50 Let us consider the probability z`n that g` is incidentally generated by other
subnetworks.
  We show that z`n /pen` → 0, which implies that z`n /pn` → 0.
50Here   we provide the proof that applies without subgraphs being characteristic dependent. The
extension to characteristic dependent subgraphs is straightforward simply by adjusting all numbers
to reflect possible networks with given node characteristics as dependent on n and the sets of nodes
that have particular characteristics as a function of n, but it is notationally much more intensive.
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                    41

   Consider g` ∈ Gn` and an incidentally generating subclass (`j , hj )j∈J .
   We show that the probability z`n (J) that it is generated by this subclass goes to zero
relative to pen` , so that z`n (J)/pen` → 0 for each J, and since there are at most M` ≤ k m`
such generating classes, this implies that z`n /pen` → 0.
   For a subnetwork in Gn`j , the probability of getting at least one such network that
has the hj nodes out of the m` in g` is no more than51
                                                 !
                                         n
                              y`nj             pen`j ≤ y`nj nm`j −hj pen`j .
                                      m`j − hj
Thus,
                                     z`n (J)   Πj∈J nm`j −hj yjn pen`j
                                             ≤                         .
                                       pen`           pen`
Therefore
                                 z`n (J)      Πj∈J yjn nm`j pen`j
                                           ≤      P               .
                                    pen`        n j hj pen`
   Recall that MJ = j∈J hj − m` and that M ≥ 1 (since |J| ≥ 2 and each set of hj
                       P

intersects with at least one other set of hj 0 for some j 0 6= j).
   Therefore
                                z`n (J)      Πj∈J y`nj nm`j pen`j
                                          ≤                       .
                                   pen`        nMJ nm` pen`
The numerator is of the order Πj∈J E(Sjn ) while the denominator is of the order nMJ E(S`n ).
   Under the sparseness condition,
                                        Πj∈J E(S`nj )
                                                      → 0,
                                         nMJ E(S`n )
and so we have verified the claim.
                                                                                  bn (g)
                                                                                  S
   To finish the ratio consistency proof, note that the claim then implies that `S n →
                                                                                              `
                                                       n                          bn` (g)
                                                                                  p
1. Thus, dividing top and bottom by                  S ` (g),
                                                   it follows that           → 1. Givenn
                                                                               S`n /S ` (g)
the growing
        n
                condition and properties of the binomial distribution, it also follows that
S`n /S ` (g)             bn` (g)
                         p
     p n     → 1, and so   pn
                                 → 1.
    `                     `
  Next, note that the above also implies that the distribution Dn1/2 (pbn1 (g), ..., pbnk (g))0
                                                                                            n
converges to the distribution of Dn1/2 (pen1 (g), ..., penk (g))0 , where pen` (g) = S`n /S ` (g).
  The asymptotic normality of the (joint) distribution then follows from the usual
Linderberg-Feller central limit theorem applied to triangular arrays of binomial random
variables. This applies under the growing conditions of the theorem.52
51This is a loose upper bound as it simply adds the probability that each possible one forms - but
becomes more accurate as the probability of any one occurring vanishes.
52 Let X , ..., X
         1T       T T be a triangular array of Ber(pT ) random variables and pT T → ∞ (as under the
growing condition). To apply the Lindeberg-Feller central limit theorem for triangular arrays, we
check the Lindeberg condition: for any  > 0,
                            1        X h       n         p             oi
                                       E Xt2 1 |Xt | ≥  T pT (1 − pT ) = o(1).
                      T pT (1 − pT )
                                     t≤T

The condition is implied by the fact that T pT → ∞, and from the sparsity conditions which imply
that pT is bounded away from 1.
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                      42



Proof of Theorem 3.
  Let G n denote the set of all possible subgraphs in the model:
(A.10)                                                           G n = ∪` Gn` .
     Letting G be the set of subgraphs that are truly formed, we can write
                                              Y      exp(θ` ) Y            1
                                    P(G) =                                         .
                                             g` ∈G exp(θ` ) + 1 g` ∈G
                                                                   /
                                                                      exp(θ` ) + 1
This can be rewritten as
                                                                               P                   
                                                                      exp              g` ∈G θ`
                                          P(G) = Q                                                          .
                                                                     g` ∈G n      (exp(θ` ) + 1)
Note that                                                                                                                    !
                                                                                                                Gn` |θ` )
                               Y                                          X                     X
                                     (exp(θ` ) + 1) =                                 exp(          |A ∩                           .
                          g` ∈G n                                     A⊂G n                     `
                                                                                                                        n
Given that the number of A’s that have counts s0 ∈                                                      ` {0, . . . , S ` }
                                                                                                    Q
                                                                                                                                       is exactly
                                                                                  n!
                                                                  Y S`
                                                                                        ,
                                                                      `       s0`
it follows that
                                                                                                                !
                                                                                                K`n (s0` )                             s0` θ` ),
                  Y                                                  X                      Y                               X
                          (exp(θ` ) + 1) =                                                                          exp(
               g` ∈G n
                                                                 Q                n         `                                 `
                                                          s0 ∈    `
                                                                      {0,...,S ` }
                         n    
                         S`
where K`n (s0` ) =       s0`
                                   . This means that we can write
                                                                 |Gn` ∩ G| · θ` )
                                                                          P
                                                             exp (            `
(A.11)                    P(G) = P                                   n 0      Q   P 0        .
                                                  {0,...,S ` } ( ` K` (s` )) exp ( ` s` θ` )
                                                Q          n
                                           s0 ∈       `


Note that there are            K`n (S)
                            different collections of truly generated subgraphs G that
                                    e
have the same value Se and that each is equally likely. Thus
                                                                                       P                  
                                                            K`n (S)
                                                                 e exp
                                                                                            `   Se` · θ`
(A.12)                     P(S)
                             e = P                                                                                                 ,
                                                                                      K`n (s0` )) exp (                 s0` θ` )
                                                                           Q                                    P
                                           s0 ∈
                                                  Q
                                                    {0,...,S ` }
                                                                     n    (       `                                 `
                                                  `

which is the same as (5.3), which completes the proof.

Proof of Lemma 1. Having two randomly picked nodes bump into each other within
a community, there is a f 2 + (1 − f )2 probability of the nodes being of the same type,
and a 1 − (f 2 + (1 − f )2 ) probability of them being of different types.53 Thus, the
relative meeting frequency of different type links compared same type links is
                                        πL (dif f )   1 − (f 2 + (1 − f )2 )
                                                    =                        .
                                        πL (same)        f 2 + (1 − f )2
53 To keep things simple, we consider equal-sized groups, but the argument extends with some ad-
justments to asymmetric sizes.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                            43

For triangles, picking three individuals out of the community at any point in time
would lead to a f 3 + (1 − f )3 probability that all three are of the same type, and
1 − (f 2 + (1 − f )2 ) of them being of mixed types, and so
                            πT (dif f )   1 − (f 3 + (1 − f )3 )
                                        =                        .
                            πT (same)        f 3 + (1 − f )3
It follows directly that for f ∈ (0, 1):
                                πT (same)     πL (same)
(A.13)                                      <             .
                                πT (dif f )   πL (dif f )
So different type triangles are more likely to have opportunities to form under this
random mixing model than different type links. In particular, note that
                                                                       !1/3                                    !1/2
pT (dif f )   pL (dif f )                     PT (dif f ) πT (same)                    PL (dif f ) πL (same)
            <             if and only if                                         <                                    .
pT (same)     pL (same)                       PT (same) πT (dif f )                    PL (same) πL (dif f )
                                                               pT (dif f )       pL (dif f )
  In summary, given (A.13), a sufficient condition for         pT (same)
                                                                             <   pL (same)
                                                                                               is that
                   (PT (dif f )/PT (same)) < (PL (dif f )/PL (same))3/2
which completes the argument.


         Appendix B. A Useful Lemma on SERGM Statistic Domains
   Although polynomial, the denominators of a SERGM can still involve large numbers
of calculations. There are substantial simplifications that can be made. For example,
we can estimate the denominator of (2.2) by summing across some subset of s0 that has
high probability rather than summing over the full set, as although n6 is polynomial it
still can be a large sum to do exhaustively as n grows. In particular, suppose that for
some parameter β, the probability that the observed statistic ends up taking a value
in some set A is at least 1 − ε: Pβ (s ∈ A) ≥ 1 − ε. Then by setting
                                              NS (s) exp (βI sI + βL sL + βT sT )
            Pβ ((SI , SL , ST ) = s) = P              0           0       0       0
                                                                                      .
                                           s0 ∈A NS (s ) exp (βI sI + βL sL + βT sT )
it follows that for any s ∈ A
                             1    Pβ ((SI , SL , ST ) = s)
                                ≥                          ≥ 1.
                            1−ε   Pβ ((SI , SL , ST ) = s)
Thus, we can work with Pβ ((SI , SL , ST ) = s) which only requires computations over
s0 ∈ A in its denominator.
   While we have to worry about determining A, which depends on β which is presumed
to be unknown to the researcher, if the probability of various statistics concentrates in
a small neighborhood around the observed statistics with high probability, the above
approximation becomes quite useful. By observing s, and then choosing A to be a
large enough neighborhood around the observed s, one can be sure that under the
true (unobserved) β, Pβ (A) ≥ 1 − ε. In particular, it is easy to choose a small set A
based on the observed s over which to sum the denominator without knowing β, and
which with arbitrarily high probability will give an arbitrarily accurate estimate for
large enough n. A general version of such a result is Lemma B.1:
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                    44

Lemma B.1. Consider a SERGM with associated Pβ (s) as described in (3.1) and
consider any ε > 0. Suppose that for each β in some set B there exists Aβ such that
Pβ (Aβ ) ≥ 1 − ε. For each s let As = ∪β∈B:s∈Aβ Aβ . Letting
                                          KS (s) exp (βs)
                            Pβ (s) = P             0        0
                                                               ,
                                      s0 ∈As KS (s ) exp (βs )
it follows that for any β ∈ B and s ∈ Aβ :
                                    1    Pβ (s)
                                       ≥        ≥ 1.
                                   1−ε   Pβ (s)
Proof of Lemma B.1.
  Let
                                              KS (s) exp (βs)
                            P
                            b (s) = P
                             β                         0        0
                                                                   .
                                          s0 ∈Aβ KS (s ) exp (βs )
Since Pβ (Aβ ) ≥ 1 − ε, it follows that
                                     P     0         0
                           1        0 KS (s ) exp (βs )
                              ≥P s            0         0
                                                          ≥ 1.
                          1−ε   s0 ∈Aβ KS (s ) exp (βs )

this implies that for any β and s ∈ Aβ :
                                  1    P
                                       b (s)
                                         β
                                     ≥        ≥ 1.
                                 1−ε   Pβ (s)
Note also that for any β and s ∈ Aβ
                                b (s) ≥ P (s) ≥ P (s) .
                                P β      β       β

The claimed result follows from the last two sets of inequalities.
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                  1

       Appendix C. Online Appendix: Extension to Continuous and
                            Interdependent Covariates
   For simplicity, we have focused on models in which covariates are captured by index-
ing subgraphs by covariates. This encompasses covariates that take on a finite set of
values or are approximated by a finite set of values, and is a flexible approach, although
it may not work as well with fully continuous data that take on a wide range of values.
Such continuous covariates can also easily be handled, as our models and results have
natural extensions.
   We discuss the SUGM extension. Let node i be associated with a covariate vector
Xi that lies in a compact subset of Rd . Let the probability that a given subnetwork
g` ∈ G` forms be a function pn` (X` ; γ) of the vector of node covariates, where γ is some
vector of parameters.
   Estimating the parameters γ depends on the functional form of pn` (x` ; γ). It could
take many forms, such as a linear probability model, a logistic form, etc. Consistency
and asymptotic normality of the estimators depend on the rate at which γ tends to
extremes – thereby affecting the probabilities of various subgraphs and their depen-
dence on covariate values. We provide some sufficient conditions for consistency and
asymptotic normality of the estimators below.
   We consider an environment in which nodes draw covariates that can be continuous
and even interdependent. Then, based on their characteristics, they form a graph
via the SUGM process. We are interested in estimating both probability functions as
well as possible parameters which may correspond to random utility foundations (e.g.,
coefficients in a logistic regression term).

Environment. Every node i ∈ {1, ..., n} draws a d-dimensional covariate vector xni ∈
X . For simplicity we let X = dk=1 [xL,k , xH,k ] be a d-dimensional product of intervals
                               Q

of R.54 Letting x` denote the d × n matrix of data, we assume x` x0` has full rank along
the sequence. For expositional simplicity in our proofs we considering a sequence of
fixed-regressors, x`,n where n indexes the sequence. Clearly stochastic regressors can
be accomodated.
Example C.1. Let xni = (1, uni ), where uni ∈ [0, 1] such that the design matrix carries
full rank. In the simulation exercise corresponding to this example, we will draw them
as independent U [0, 1] random variables.

SUGM Formation. Given characteristics, the n nodes engage in a SUGM graph
formation process. The realized data sequence consists of a triangular array of random
graphs and covariate vectors drawn from a random field {(g n , (xn1 , ..., xnn )) : n ∈ N}.
The researcher observes this for a given n and a given realization.
   Specifically, consider a set of nicely ordered statistics (S`n ) again with each statistic
counting subgraphs H` with m` nodes, where the statistics S` do not condition on
covariates. We are therefore counting, for instance, 4-cliques, triangles (not in 4-
cliques), and unsupported links.
54We  will allow these covariates to be interdependent. The substantive assumption we need to make
is that the sequences of design matrices and have full rank.
                     TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                     2

  A group of size m` forms with a probability pn` (x`,j ; γ` ) which depends on some
function of the m` individuals’ characteristics and a parameter γ` , whose value in
theory may depend on n.55
  To make things concrete, examples of pn` (x` ; γ) include:
                                                                                     0
       (1) a linear probability model with uniform link function pn` (x`,j ; γ` ) = γ`,n xj,` ,
                                                                  0 x )
                                                             exp(γ`,n j,`
       (2) a logistic regression model pn` (x`,j ; γ` ) =   1+exp(γ`,n xj,` )
                                                                              ,
for j ∈ {1, ..., S ` (g)}. It should be clear that there are any number of examples here
that could be used and the choice is up to the modeler’s discretion as to what best
describes the nature of the problem at hand.
   A truly generated object is a subgraph on m` nodes that is generated in the `th
phase independently with probability pn` (x`,j ; γ` ). Incidental generation may occur and
the union is the graph g n .
   The group-level characteristic, x` , is of course a function of individual level charac-
teristics: x`,i1 ,...,im` = f` (xi1 , ...., xi` ). For example, f` (xi , xj ) = |xi − xj |.

Example C.1. [Continued] The sequence of graphs g n are triangles and links-based. A
triangle forms with probability defined by log-odds
                               pnT (xT ; γT )     0
                         log        n
                                               = γ0,n,T xT = (α0,n,T , β0,T )xT
                             1 − pT (xT ; γT )
where xT = (1, uT ) and uT = (|ui − uj | + |uj − uk | + |uk − ui |)/3.
  A link forms with probability
                               pnL (xL ; γL )     0
                         log        n
                                               = γ0,n,L xL = (α0,n,L , β0,L )xL
                             1 − pL (xL ; γL )
where xL = (1, uL ) and uL = |ui − uj |/2.
  Pairs and triples that are further in covariate space are less likely to link.


Estimation. The above defines a well-defined network-generation process. As before,
we need a relative sparsity condition to hold so that when we count a structure, with
probability approaching one it was not incidentally generated. Here we provide a
sufficient condition for relative sparsity hold as the continuous covariates vary. The
condition is that given m` nodes, no matter what the value of each covariate is among
these nodes, the probability of forming the subgraph isomorphic to H` shrinks at the
same as n grows to infinity. This will ensure the relative rate of incidentally generated
objects is unaffected by the particular values of the covariates.56


55It is easy to modify this such that f` = f`,i so that every node makes its own decision to be in the
group or not, and its covariates are not treated symmetrically with the other m` nodes.
56Such an assumption excludes the possibility that individuals who are close in wealth are more
likely to form pairs than triads for wealth levels below some threshold but beyond this threshold it is
when individuals are far from others in wealth that pairs are more likely to form than triads. (More
specifically, in this example a wealth covariate should not be used, but rather, a wealth covariate with
an indicator for whether individuals are below or above the threshold must be used.)
                        TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                          3

Lemma C.1. Given a growing sequence of graphs with associated covariates and co-
variate space X , and probability functions pn` (x` ; γ` ) smooth in both arguments,
                                                                                                       !
                              min            pn`   (x` ; γ` ) = O         max            pn`   (x` ; γ` ) .
                         x1 ,...,xm` ∈X m`                           x1 ,...,xm` ∈X m`

If relative sparsity is satisfied at xi = 1 for all i, then relative sparsity is satisfied for
any sequence of covariates.
Proof. We can always replace incidental generation probabilities with their maximal
values over the covariates, the truly generating probability with its minimal probability.
These are all of the same order as when evaluated with xi = 1 by hypothesis.

Of course this isn’t the only condition to maintain relative sparsity, but it may often
be a natural condition to assume.

  We now show properties of estimators from the two examples of pn` (x` ; γ` ) we have
discussed.
Linear Probability Model. Consider the linear probability model discussed above:
                                       pn` (x` ; γ` ) =         γ`k xk,` , k = 1, ..., d
                                                           X

                                                            k
             k
where       γ0,n,`   → 0 as n → ∞. It is straightforward to check that the following is true.
Theorem C.1. Assume kγ0,n,` k1 = Θ(1/nm` −h` )57 with 0 < h` < m` and the h` are
such that relative sparsity condition is satisfied. Then
                             √
                               nm` +h` (γb − γ0,n,` ) N (0, V )
                                               h
where V = plim nm1 ` (x0` x` )−1 ( nnm`` x0` ` 0` x` ) nm1 ` (x0` x` )−1 .
We omit the proof, which is entirely standard. We get super-consistent rates as the
parameters are going to zero rapidly, but not too rapidly so that a central limit theorem
still applies. Because relative sparsity applies, only a vanishing proportion of `-objects
are incidentally generated.

Logistic Regression. We turn to our main example where pn` (x`,j ; γ` ) is given by a
logistic link function. In all that follows γ0,n consists of elements that are either order
constant or tending to −∞. The rates will be set in the assumptions.
Theorem C.2. Assume that kγ0,n k1 · supx∈X kxk∞ . h` · log nm` for 0 ≤ h` < m` .
Additionally, assume that relative sparsity holds. Then
                                             Jn1/2 (γb` − γ0,`,n )      N (0, Id ) .
Proof. Follows from Lemma C.3. The first hypothesis of the lemma is the same as that
in Lemma C.2 and is assumed here for each `. Additionally, assumption (2) of Lemma
C.3 follows from relative sparsity. Relative sparsity implies that the h` are ordered such
that for every ` share of incidentally generated `-th objects goes to zero, corresponding
to the number of incidentals being on the order of Op (zn,` · nm` ) in Lemma C.3.
57f       ∈ Θ(gn ) means ∃k1 > 0, ∃k2 > 0, ∃n0 > 0, ∀n > n0 such that gn k1 < fn < gn k2 .
      n
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                    4



   This means
           √ that the rate of convergence of the parameters governing the probability
is given by nm` −k` where 0 < h` < m` tunes the sparsity of the model.

                                     n                       n
Example C.1. [Continued] Consider α0,L   = log(1/n0.7 ) and α0,T = log(1/n1.75 ), β0,L =
−2 and β0,T = −3. Then triangles form at order 1/n1.75 and links at order 1/n0.7 . The
theorem shows that all parameters have estimators that√ are consistent√and, in the case
of links, are asymptotically normally distributed at n1.3 -rate and n1.25 -rates (for
links and triangles, respectively).

   For some intuition as to why this works, first consider the case of a triangular array of
n i.i.d. Bernoulli random variables distributed with probability pn ↓ 0 at a rate Θ(1/nh )
                                                    pn
for 0 < h < 1. Then the log odds is given by log 1−p   n
                                                         = αn where αn = −h log(C ·n) for
some constant C > 0. It is easy to show by the Lindeberg-Feller central limit theorem
for triangular arrays that in this case
                               √
                                              !
                                     pbn − pn
                                 n     √            N (0, 1)
                                         pn
                                          √                   √
provided pn n → ∞. This implies that npn (α       b − αn ) = n1−h (α   b − αn )    N (0, 1).
                                                          58
This follows from observing that αn will be consistent and by the delta method
           s                          "     (                   )#2                                             !
            n                               pn                          1
                b − α)
               (α         N 0, ∂p log               = N 0,
           pn                            1 − pn                  (pn (1 − pn ))−2
                √
which implies npn (α   b − α)   N (0, 1) , noting that clearly the (1 − pn ) term is irrel-
evant in the rate normalization under the hypothesized asymptotic sequence.
  Next we offer an intuition for why this works with a finite set of discrete covariates.
         p(x)
Let log 1−p(x) = αn + βx for x in some finite discrete set. It is clear that repeating the
above argument delivers the same rate of convergence at every covariate value.

  We now consider the general case. The data consists of a triangular array {(yi,n , xi,n ) :
n ∈ N} where yi,n is a binomial outcomePgoverned by pn (xi,n ; γ0,n ). To conserve on no-
tation let qin = p (x0in γ0n ) and put Jn = i≤n qin (1 − qin ) xin x0in . Under the maintained
                                          h   P
assumptions it will be the case that nn Jn −→ J.
Lemma C.2. Assume that kγ0,n k1 · supx∈X kxk∞ . h · log n for 0 ≤ h < 1. Then,
                               Jn1/2 (γbn − γ0n ) N (0, Id ).
                                           √
  Equivalently,
    √           the result  implies  that    n1−h (γbn − γ0n ) N (0, J −1 ). This shows the
sub- n rate of convergence.
  Observe that in the example where qin ∝ exp(α0n + β0 win ), then this corresponds to
α0n = log(C · n−h ) where 0 ≤ h < 1 and some constant C > 0. More generally, the
requirement ensures that the parameter (times covariate value) does not diverge too
rapidly so that a central limit theorem can be applied.
                                                                                          |b
                                                                                           pn −pn |
                                       n                          o                                      q         
58   |b            pn
      α − α| = log b          pn
                       − log 1−p   ≤        1−p̄n           1
                                                                          |b
                                                                           pn − pn | .p               = Op         1
                                                                                                                            → 0.
                    pn
                  1−b            n           p̄n         (1−p̄n )2                           p̄n                  npn
                      TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                    5



Proof of Lemma C.2. The result is an extension of/corollary to Theorem 5.2 of
Hjort and Pollard (1993). The convexity-based argument allows consistency and as-
ymptotic normality to be argued in one step. Consider the random convex function
                                                                         
                                       log fi yin , γ0n + Jn−1/2 s − log fi (yin , γ0n ) ,
                                 X
                      An (s) =
                                 i≤n

where fi is the logistic function. This is minimized by s = Jn1/2 (γbn − γ0n ).
  This can be expressed as
                                                          1
                                          An (s) = Un0 s − s0 s − rn (s)
                                                          2
where59
                               Un = Jn−1/2
                                                 X
                                                       (yin − qin ) xin       N (0, I) ,
                                                 i≤n

which applies by a Lindeberg-Feller central limit theorem for triangular arrays, as
minx qi (x) = Θ(maxx qi (x)) = ω(1/n) by hypothesis on γ0,n , x` , and the Bernoulli
probability. Meanwhile
                                X1                                                        3
                  rn (s) =                qi (1 − qin ) · ηi s0 Jn−1/2 xin · s0 Jn−1/2 xin        .
                                i≤n   6

The proof of Theorem 5.2 of Hjort and Pollard (1993) shows rn (s) → 0. This exploits
that λn := maxi≤n Jn−1/2 xin → 0, which holds by the fact that the covariates live in a
compact set (making clear that this isn’t a tight assumption).

   Because of relative sparsity, incidental generation is rare. Therefore, for most of the
data the preceding result directly applies. However, for a vanishing proportion of m` -
tuples, the structures are present due to incidental generation. We only need to show
that this happens for a vanishing proportion of data and is asymptotically negligible.
   To make this argument, out of the n observations, we say that each observation is
“invalid” (i.e., observed with measurement error such as yin = 1 when the true value
is 0) with some probability. Our claim can be written in the notation of the preceding
lemma by saying that some of our n data points are “invalid” and we will show the
probability that an observation is invalid is bounded by zn ↓ 0 at a fast enough rate.
Our relative sparsity assumption directly implies that zn ↓ 0.
Lemma C.3. Assume the hypotheses of Lemma C.2. Assume either
   (1) every observation becomes invalid with probability at most zn ↓ 0, or
   (2) an Op (zn · n) share of observations become invalid, with zn ↓ 0.
Then the conclusion of Lemma C.2 holds.
Proof. Clearly the second condition is implied by the first, so we only prove the former.
Without loss of generality let 1, .., n∗ denote the set of valid observations and n∗ +1, ..., n

                  −1/2
                             √     hP                             −1/2
59Observe   that Jn      =    n1−h nn     q   (1 − q   ) x    x 0
                                                                         .
                                      i≤n  in       in     in   in
                       TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                        6

the valid observations. Note that n∗ is random and is Op (zn n).
                                                                                                                    

  Un = Jn−1/2              (yin − qin ) xin = Jn−1/2 
                     X                                     X                                 X
                                                                (yin − qin ) xin +                  (yin − qin ) xin  .
                     i≤n                                 i≤n∗                             n∗ <i≤n

Observe that
                              nh X                                nh
                                        qin (1 − qin ) xin x0in =    zn n = op (1) .
                              n n∗ <i≤n                           n
This implies
                                                                                                                          −1/2
                                          nh X                             nh X
Jn−1/2                                           qin (1 − qin ) xin x0in +           qin (1 − qin ) xin x0in 
         X
               (yin − qin ) xin       = 
         i≤n                              n i≤n∗                           n n∗ <i≤n
                                              s                                                                
                                            nh  X                      X
                                          ×        (yin − qin ) xin +         (yin − qin ) xin  .
                                            n i≤n∗                    n∗ <i≤n

Thus
                                                                                             −1/2
           nh X                             nh X                                                        P
                 qin (1 − qin ) xin x0in +           qin (1 − qin ) xin x0in                         −→ J −1/2 .
           n i≤n∗                           n n∗ <i≤n
                                                                             
                                         (yin − qin ) xin = Op       √ 1
                              P
Meanwhile, we have                i≤n∗                                n1−h
                                                                                  and to complete the argument
                    1     X                           1                       X
                  √             (yin − qin ) xin = √                                (yin − qin ) xin = Op (1) , where k = h + δ
                   zn n n∗ <i≤n                      n1−k                 n∗ <i≤n
                       !                                                           !
        1                     X                                           1             X
=⇒ O √                                (yin − qin ) xin = O √                                     (yin − qin ) xin
       n1−h                 n∗ <i≤n                                    n1−k+δ          n∗ <i≤n
                                                                                         !
                                                                      1         1             X
                                                        = O                 ·√                         (yin − qin ) xin
                                                                     nδ/2      n1−k          n∗ <i≤n
                                                                             
                                                        = Op n−δ/2 = op (1)
showing the result.


Example C.1. [Continued] Recall we have set αLn = log(1/n0.7 ) and αTn = log(1/n1.75 ),
βL = −2 and βT = −3. Let n = 100. Then the average degree is 3.75, the average
clustering is 0.14, the fraction of nodes in the giant component is 92% and the maximal
eigenvalue of the adjacency matrix is 5.5. Thus, the resulting graph is comparable in
structure to the empirical data.
   We then run 200 simulations of this process where we generate a graph and then esti-
mate the model parameters via sequential logistic regressions. First  we regress whether
a triple exists on a constant and the triad-level covariate over all n3 observations to get
 b Tb , βbTb ), for simulation b = 1, ..., 100. Second, on the unused ij pairs not in triangles
(α
we regress whether      a link exists on a constant and the pair-level covariate which is a
                   n                                                   b bb
logit on all 2 observations less used pairs. From this we get (α      bL , βL ) for b = 1, ..., 100.
The results are displayed in Figure C.1.
               TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                      7




                (a) Links parameter             (b) Triads parameter

      Figure C.1. Displays the distribution of estimated parameter value
      as well as the median 95% confidence interval from a simple logistic
      regression.

We show that the parameters are correctly centered and exhibit good coverage prop-
erties.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                            8

   Appendix D. Online Appendix: Isolates, Links, Triangles Example
   Here we perform some additional diagnostic exercises around the Statnet ERGM
estimation from Section 2.2.1.
   First, we first select 17 nodes (one third) to be isolated. Next, we generate triangles
with a probability of .0014 on each possible triangle on the nodes that are not isolated.
Finally, we generate links with probability .0415 on the nodes that are not isolated.
Overall, this leads to networks that have on average 20 isolated nodes, 45 links, and 10
triangles (so, E[SI (g)] = 20, E[SL (g)] = 45, E[ST (g)] = 10)). We randomly draw 1000
different networks in this manner.
   Again, maximum likelihood estimates are unique for each of the networks, and by
continuity should be in a fairly tight range (given the tight range of the generated
networks as shown below).
   Using standard ERGM estimation software (statnet via R, Handcock et al. (2003))
we estimate the parameters of an ERGM with isolates, links and triangles for each of
these randomly drawn networks. We present the estimates in Figure D.1.




       (a) Isolate Param-             (b) Link Parame-               (c) Triangle Pa-
       eter Estimates                 ter Estimates                  rameter Estimates

       Figure D.1. Standard ERGM estimation software (statnet) output
       for 1000 draws of networks on 50 nodes, with an average of 20 isolated
       nodes, 45 links, and 10 triangles. The red lines (on top of each other)
       are the median left and right 95 percent confidence interval lines (which
       do not have appropriate coverage).


   As in Figure 1, but with even more noise, the estimated parameters for links and
triangles cover a wide range of values, in fact with the link parameter estimates being
both positive and negative and ranging from below -3 to above 3 (Figure D.1b) and
triangles parameter estimates ranging from just above 0 to 5 (Figure D.1c). Only the
isolates parameter estimates are remotely stable (Figure D.1a), but even those vary in
three different regions with substantial variation. Second, despite the enormous varia-
tion in estimated parameter values from very similar networks, the reported standard
errors are quite narrow and almost always report that the parameter estimates are
highly significant. Moreover, the median left and right standard error bars essentially
coincide and do not come close to capturing the actual variation.
   Second, we report the distribution of the statistics from the simulated networks
(Figure D.2) - they are fairly tightly clustered about the mean values.
                 TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                          9




     (a) Number of Isolates         (b) Number of Links          (c) Number of Triangles

       Figure D.2. For the 1000 simulated networks we report the distribu-
       tion of the number of isolates, links and triangles.

  Next, for each of the 1000 simulated networks, using the parameter estimates we
simulate a network using Statnet’s simulation command. We then check whether the
simulated networks come anywhere close to matching the original networks. Although
most of the networks turn out to have nearly 20 isolates, they generally have thousands
of links and triangles. Figure D.3 looks nothing like the counts from the original
networks (Figure D.2).




     (a) Number of Isolates         (b) Number of Links          (c) Number of Triangles

       Figure D.3. For each of the 1000 simulated networks, using the pa-
       rameter estimates from Statnet we simulate a network using Statnet’s
       simulation command. The resulting distribution of the number of iso-
       lates, links and triangles are pictured here. They do not match the
       networks that generated them, which are pictured in Figure D.2.

  Simulating a network from an ERGM is even a more daunting task than estimating
parameters from one, as there is no obvious network from which to seed the simulation
procedure, and again there are far too many from which to calculate likelihoods. This is
another advantage of SUGMs and count SERGMs, which are not only easily estimated
but also easily simulated.
                     TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                           10




         (a) Estimated pI : pbI                (b) Estimated pL : pbL              (c) Estimated pT : pbT

          Figure D.4. For each of the 1000 simulated networks, we solve for
          estimated probabilities of isolates, links and triangles for a SUGM as
          defined in (2.3).




         (a) Estimated θI : θbI                (b) Estimated θL : θbL              (c) Estimated θT : θbT

          Figure D.5. For each of the 1000 simulated networks, we solve for esti-
          mated SERGM parameters for isolates, links and triangles for as defined
          in (2.4).




      Appendix E. Online Appendix: Additional Consistency Results
General Consistency Results. Consider a sequence of SERGMs (S n , KSnn , An , β n )
as defined in (3.1).
  A sequence of SERGMs is expectations-identified with respect to a sequence of di-
agonal matrices Cn > 0 with positive diagonal entries if there exists γ > 0 such that
                                  |Cn Eβ [S n ] − Cn Eβ n [S n ]| > γ |β − β n |
for all n.60
   Expectations identification is an intuitive condition that requires that different pa-
rameters distinguish themselves with different means. It is a sort of minimal condition
since if two different parameter values generate very similar expected statistics, then
observing the realized statistic will not allow us to distinguish the parameters.
60Here  the subscript notation Eβ [S n ] indicates that the expectation takes the probability to be spec-
ified by (3.1) with parameters (S n , KSnn , An , β).
                   TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                       11

   A sequence of SERGMs is concentrated with respect to a sequence of diagonal ma-
trices Cn > 0 with positive diagonal entries if
                                                      P
                              Cn (S n − Eβ n [S n ]) −→ 0 for β n ∈ B,
where B is a set of admissible parameters.
  The concentration condition requires that there is some normalization (Cn ) for which
the statistics will concentrate around their means. As we have not scaled statistics we
have to allow for some renormalizations.61
  Note that the choice of Cn in the following theorem links them across the two con-
ditions. To guarantee concentration there has to exist a sequence of Cn that goes to
0 fast enough, while to guarantee expectations identification they cannot go to 0 too
quickly. So, the Cn ’s identify the rate at which the statistics approach their means.
The key to verifying consistency is then seeing whether there exists such sequences for
which both conditions hold simultaneously.

Proposition E.1. If a sequence of SERGMs (S n , KSnn , An , β n ) is expectations-identified
                                                                     P
and concentrated with respect to some Cn , then |βbn (S n ) − β n | −→ 0.

The proof of Proposition E.1 is relatively routine.
   It is also useful to state a ratio version of Proposition E.1 to address cases where
parameters are, for instance, close to 0. Thus, we wish to have a stronger notion
of consistency, not only requiring that the estimator approaches the true parameter,
but that it does so in terms of a ratio. This requires corresponding definitions of
concentration and identification that are ratio based. We do this in Proposition E.4.
   The result is fairly tight in that a version of a converse holds as well. In particular,
the following result holds.62
   A sequence of SERGMs (S n , KSnn , An , β n ), is rate-expectations-identified with rates
given by a sequence of diagonal matrices Cn > 0 with positive diagonal entries if there
exist γH > γL > 0 such that
                     γH |β − β n | > |Cn Eβ [S n ] − Cn Eβ n [S n ]| > γL |β − β n |
for all n.
   Rate-expectations-identification is a condition that says that the sequence of diagonal
matrices Cn accurately captures the rate at which the expected statistics Eβ [S n ] nears
Eβ n [S n ]| as we let the vector of parameters β approach β n .

Proposition E.2. If a sequence of SERGMs (S n , KSnn , An , β n ) is rate-expectations-
                                                                                        P
identified with rates Cn , then the random vectors are consistent (|βbn (S n ) − β n | −→ 0) if
and only if the sequence is concentrated with respect to β n and the same sequence Cn .

  Below, we also discuss a characterization of consistency in terms of variance of the
statistics in greater detail. The argument is similar to those for standard estimators,
61Notice   that the     exponential term in the associated likelihood can be written exp (S 0 β) =
      0      −1
exp S Cn Cn β and we are interested in the associated parameters β, not Cn−1 β which will typi-
                  

cally trail off to infinity at polynomial rates in n.
62We state a version for Proposition E.1, and the analog for ratio-consistency of the type in Proposition
E.4 in the appendix is left to the reader.
                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                        12

e.g. Amemiya (1973): For consistency, we need enough variation so that the system
accumulates information and concentrates around its mean. This corresponds to need-
ing the norm of the variance matrix tending to infinity, just as we would in typical
regression-like applications.

Proof of Proposition E.1. Recall that the MLE βbn (s) is the β that solves
                                                     s = Eβ [S n ].
Thus, since concentration implies that
                                                                       P
                                        C n (S n − Eβ n [S n ]) −→ 0,
it follows that
                                                                           P
                                  C n (Eβbn (S n ) [S n ] − Eβ n [S n ]) −→ 0.
Given that expectations identification implies that
                                 |C n (Eβ [S n ] − Eβ n [S n ])| > γ|β − β n |
for all n, it follows that
                                                                   P
                                           |βbn (S n ) − β n | −→ 0
as claimed.

  These results can be rephrased in terms of standard properties of extremum estima-
tors and identifiable uniqueness.63
Proposition E.3. If a sequence of SERGMs (S n , KSnn , An , β n ) satisfies concentration,
rate-expectations identification, and the β n all lie in a compact set, then |βbn (S n ) −
       P
β n | −→ 0.
Proof of Proposition E.3. Let
                                     mn (β) := Cn (S n − Eβ [S]) .
The objective function is Qn (β) := mn (β)0 mn (β).
   First, we want to show that the moment function satisfies a uniform law of large
numbers: supβ∈B kmn (β)k = op (1). By concentration, we have pointwise convergence
of mn (β) to zero in probability.
   Therefore, we need to only check stochastic equicontinuity: that for every η > 0
there is a δ > 0 with
                                                                               !
                                                                       0
                             P       sup       |mn (β) − mn (β )| > η < η.
                                  kβ−β 0 k<δ

A sufficient condition (Andrews, 1994) is if a Hölder condition is satisfied:
                                 |mn (β) − mn (β 0 )| ≤ Xn · kβ − β 0 k
where Xn is some Op (1) random variable. This is directly guaranteed by rate-expectations
identification with Xn = γH .
63Following,   e.g., Gallant and White (1988), we say the sequence β n is identifiably unique on B if
                                 lim inf       inf      Q0,n (β n ) − Q0,n (β) > 0.
                                    n→∞ β∈Bβ n ()
                  TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                          13

   Second, one can check that expectations identifiability guarantees identifiable unique-
ness. Together with compactness of B, this implies the above implies that βb is consistent
for β n .
Proof of Proposition E.2. Recall that the MLE βbn (s) is the β that solves
                                           s = Eβ [S n ].
Given Proposition E.1, we need only show that if consistency holds then concentration
must also hold.
  Given that rate-expectations identification implies that
                           an |Eβ [S n ] − Eβ n [S n ]| < γH |β − β0 |
for all n, it follows that if if consistency holds so that
                                                            P
                                    |βbn (S n ) − β n | −→ 0,
then it must be that
                                                                        P
                               an |Eβbn [S n ] − Eβ n [S n ]| −→ 0.
This implies that
                                                                P
                                  an |S n − Eβ n [S n ]| −→ 0,
which implies concentration.
Ratio Convergence Results. A sequence of SERGMs (S n , KSnn , An , β n ) is ratio-
expectations-identified with respect to a sequence of diagonal C n with positive diagonal
entries if there exists γ > 0 such that
                               n
                             Chh Eβ [Shn ]        βh
                              n        n
                                           −1 >γ         −1
                             Chh Eβ [Sh ]
                                   n             (β n )h
for all n and h.
   A sequence of SERGMs (S n , KSnn , An , β n ) is ratio-concentrated with respect to a
sequence of diagonal C n with positive diagonal entries if
                                     n
                                   Chh Shn           P
                                  n
                                                − 1 −→ 0
                                Chh  Eβ0 [Shn ]
for each h.
Proposition E.4. If a sequence of SERGMs (S n , KSnn , An , β n ) is ratio-expectations-
identified and ratio-concentrated with respect to a sequence of diagonal C n with positive
                        bn n         P
diagonal entries, then β (β(Sn )h)h −→ 1 for each h.

Proof of Proposition E.4. Again, recalling that the MLE βbn (s) is the β that solves
                                           s = Eβ [S n ].
Thus, since ratio-concentration implies that
                                     n
                                  Chh   Shn          P
                                            n
                                                − 1 −→ 0
                                 EChh β n [Sh ]
                                   n


it follows that                   n
                                 Chh Eβbn (S n ) [Shn ]             P
                                    n
                                                          − 1 −→ 0.
                                   Chh Eβ n [Shn ]
                TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS      14

Given that ratio expectations identification implies that
                               C n Eβ [Shn ]              βh
                              | nhh        n
                                               − 1| > γ| n − 1|
                               Chh Eβ n [Sh ]            (β )h
for all n, h, it follows that
                                      βbn (S n )h       P
                                                   − 1 −→ 0
                                         (β n )h
or
                                         βbn (S n )h P
                                                    −→ 1,
                                           (β n )h
as claimed.
                                    TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                                                        15

                          Appendix F. Online Appendix: Extension of Table 1
   Here we present an extension of the analysis in Table 1. Instead of simply control-
ling for “close” versus “far” links on the dimensions of caste and GPS, we allow for
a considerably richer specification. The goal here is to show that even when we con-
trol, flexibly, for a rich set of covariates, a link-based model exploiting the observable
homophily is unable to replicate key features of observed networks. To do this, we
estimate a link-based model within each village using the following vector of controls:
      • Geographic distance between households,
      • Square of geographic distance between households,
      • Households are of different caste,
      • Difference in number of rooms household has,
      • Square of difference in number of rooms,
      • Difference in number of beds,
      • Square of difference in number of beds,
      • Difference in quality of electricity,
      • Square of difference in quality of electricity,
      • Difference in latrine quality,
      • Square of difference in latrine quality,
      • Whether or not both households have the same status in terms of owning or
         renting their house.
We use a logistic regression for this estimation.
   The estimated a vector of regression coefficients for each village capture how charac-
teristics of a dyad correspond to linking probabilities. This gives a predicted probability
that each household is linked to each of the other households in the village. We use
these predicted probabilities to generate 100 simulated networks per village and study
the characteristics of the resulting networks. These are presented in column [3] of Table
F.1.
                  Table F.1. Estimation of Additional Models: Extension of Table 1

                                                                                                                             Link-based model
                                                                                                    Link-based model                                  SUGM with links        SUGM with isolates,
                                                                                  Data                                         with extended
                                                                                                     with covariates                                    and triangles         links and triangles
                                                                                                                                covariates
                                                                                    [1]                     [2]                      [3]                      [4]                      [5]
  Models are fit to   Number of Unsupported Links                                 160.8                   236.2                    236.2                    161.2                    161.8
  different           Number of Triangles                                          39.2                     3.1                      3.1                     39.7                     39.5
  combinations of     Average Degree                                              2.3243                  2.3260                   2.3234                   2.5916                   2.5219
  these statistics.   Number of Isolates                                         54.9722                 25.7222                  27.3750                  31.4444                  65.9167
                      Average Clustering                                          0.0895                  0.0105                   0.0134                   0.1268                   0.0829
  None of the models Fraction in Giant Component                                  0.7061                  0.8315                   0.8082                   0.7982                   0.6718
  are directly fit to First Eigenvalue                                            5.5446                  3.8578                   4.0746                   4.6762                   5.3025
  any of these        Spectral Gap                                                0.9550                  0.3354                   0.3728                   0.6684                   1.0617
  statistics.         Second Eigenvalue of Stochastized Matrix                    0.9573                  0.9632                   0.9642                   0.9559                   0.9069
                      Average Path Length                                         4.6921                  5.6565                   5.5407                   5.1215                   4.1180
  Notes: Column [1] presents the average value of various network characteristics across the 36 villages. Columns [2], [3], [4] and [5] present simulation results. In a simulation we first estimate
  parameters of a given model for a given village and then randomly draw a graph from the model with the estimated parameters. We run 100 simulations for each of the villages for each of the
  models and average across the simulations, and the entries report these averaged across the villages.




  Column [3] contains the statistics from the enriched link-based model, while the
remainder of the table is exactly the same as what is presented in the body of the
paper. Adding over 12 parameters to flexibly control for demographic attributes makes
almost no difference in generating network characteristics that match the observed
data, providing very small improvements, and still not coming close to doing as well
                               TRACTABLE AND CONSISTENT RANDOM GRAPH MODELS                                                                                                    16

as the simple SUGMs. Moreover, since the specification developed here makes use
of considerably richer data than those used in the two candidate SUGM models, it
suggests that by decomposing a network into a tapestry of random structures (triangles,
links and even isolates), considerable value is added in modeling higher order features
of networks in a parsimonious way.
   In Table F.2, we show the results of Table 1 adding standard errors, to show that
the SUGM models better replicate patterns in the data.

                                          Table F.2. Network Properties: Extended

                                                                                                    Link-based model         SUGM with links        SUGM with isolates,
                                                                                  Data
                                                                                                     with covariates           and triangles         links and triangles
                                                                                   [1]                      [2]                      [3]                      [4]
                        Number of Unsupported Links                              160.8                    236.2                    161.2                    161.8
                                                                                (9.8536)                (13.7273)                (10.4048)                (10.9867)
  Models are fit to     Number of Triangles                                       39.2                      3.1                     39.7                     39.5
  different                                                                     (3.9425)                 (0.3257)                 (5.8249)                 (3.7884)
  combinations of       Average Degree                                           2.3243                   2.3260                   2.5916                   2.5219
  these statistics.                                                             (0.0555)                 (0.0569)                 (0.1019)                 (0.0880)
                        Number of Isolates                                      54.9722                  25.7222                  31.4444                  65.9167
                                                                                (3.4599)                 (1.6322)                 (4.1232)                 (4.0961)
                        Average Clustering                                       0.0895                   0.0105                   0.1268                   0.0829
                                                                                (0.0042)                 (0.0014)                 (0.0074)                 (0.0072)
                        Fraction in Giant Component                              0.7061                   0.8315                   0.7982                   0.6718
                                                                                (0.0138)                 (0.0148)                 (0.0136)                 (0.0133)
  None of the models First Eigenvalue                                            5.5446                   3.8578                   4.6762                   5.3025
  are directly fit to                                                           (0.1649)                 (0.0737)                 (0.0970)                 (0.1166)
  any of these        Spectral Gap                                               0.9550                   0.3354                   0.6684                   1.0617
  statistics.                                                                   (0.0889)                 (0.0338)                 (0.0502)                 (0.0646)
                        Second Eigenvalue of Stochastized Matrix                 0.9573                   0.9632                   0.9559                   0.9069
                                                                                (0.0035)                 (0.0037)                 (0.0038)                 (0.0034)
                        Average Path Length                                      4.6921                   5.6565                   5.1215                   4.1180
                                                                                (0.0986)                 (0.1887)                 (0.1106)                 (0.1212)
  Notes: Column [1] presents the average value of various network characteristics across the 36 villages. Columns [2], [3] and [4] present simulation results. In a
  simulation we first estimate parameters of a given model for a given village and then randomly draw a graph from the model with the estimated parameters. We run 100
  simulations for each of the villages for each of the models and average across the simulations, and the entries report these averaged across the villages. Standard errors
  computed across the sample of villages in parentheses.
