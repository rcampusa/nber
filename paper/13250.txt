                                NBER WORKING PAPER SERIES




  INVESTMENT, CONSUMPTION, AND HEDGING UNDER INCOMPLETE MARKETS

                                             Jianjun Miao
                                              Neng Wang

                                        Working Paper 13250
                                http://www.nber.org/papers/w13250


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                      July 2007




We thank Andy Abel, Dave Backus, Jonathan Berk, Patrick Bolton, Ricardo Caballero, Darrell Duffie,
Jan Eberly, Lorenzo Garlappi, Robert Geske, Simon Gilchrist, Steve Grenadier, John Heaton, Vicky
Henderson, Bob Hodrick, Hong Liu, Debbie Lucas, Michael Manove, Chris Mayer, Robert McDonald,
Mitchell Petersen (WFA discussant), Tim Riddiough, Tom Sargent, Eduardo Schwartz, Bill Schwert,
Suresh Sundaresan, Sheridan Titman, Fernando Zapatero (FEA discussant), and seminar participants
at Beijing University, Berkeley (Haas), Boston College, Boston University, Columbia, FEA, GSU,
HKU, HKUST, Kellogg School, NYU Stern, UCLA Anderson School, UCSD economics department
and Rady School, UIC, UIUC Business School, University of Rochester, USC (Marshall School),
Vail conference (2006), Washington University in St. Louis, University of Wisconsin at Madison,
and WFA for helpful discussions. We are particularly grateful for the anonymous referee's helpful
comments. The views expressed herein are those of the author(s) and do not necessarily reflect the
views of the National Bureau of Economic Research.

© 2007 by Jianjun Miao and Neng Wang. All rights reserved. Short sections of text, not to exceed
two paragraphs, may be quoted without explicit permission provided that full credit, including © notice,
is given to the source.
Investment, Consumption, and Hedging under Incomplete Markets
Jianjun Miao and Neng Wang
NBER Working Paper No. 13250
July 2007
JEL No. E2,G11,G31

                                             ABSTRACT

Entrepreneurs often face undiversifiable idiosyncratic risks from their business investments. We extend
the standard real options approach to an incomplete markets environment and analyze the joint decisions
of business investments, consumption/savings, and portfolio selection. For a lump-sum investment
payoff and an agent with a sufficiently strong precautionary savings motive, an increase in volatility
can accelerate investment, contrary to the standard real options analysis. When the agent can trade
the market portfolio to partially hedge against investment risk, the systematic volatility is compensated
via the standard CAPM argument, and the idiosyncratic volatility generates a private equity premium.
Finally, when the investment payoff is a series of flows, the agent's idiosyncratic risk exposure alters
both the implied option value and the implied project value, causing a reversal of the results in the
lump-sum payoff case.

Jianjun Miao
Department of Economics,
Boston University,
270 Bay State Road,
Boston MA 02215, USA
miaoj@bu.edu

Neng Wang
Graduate School of Business
Columbia University
3022 Broadway, Uris Hall 812
New York, NY 10027
and NBER
nw2128@columbia.edu
1.       Introduction

Real investment activities play a fundamental role in the economy. A real investment typically
has three important characteristics. First, it is often partially or completely irreversible. Second,
its future rewards are uncertain. Finally, the investment time is to some extent flexible. In the
last three decades, a voluminous literature has developed that aims to study the implications
of these three characteristics for the real investment decision.1 A key insight of this literature is
to view an investment decision as an American-style call option, where “American style” refers
to the flexibility of choosing the time of option exercise. Based on this analogy and the seminal
contributions to option pricing by Black and Scholes (1973) and Merton (1973), we can apply
financial option theory to the irreversible investment decision. This real options approach to
investment has become a workhorse in modern economics and finance.
       The real options approach relies on one of the following assumptions: (i) the real investment
opportunity is tradable; (ii) its payoff can be spanned by existing traded assets; or (iii) the
agent is risk neutral. However, these assumptions are violated in many applications. For exam-
ple, consider entrepreneurial activities. Entrepreneurs combine their skills with their business
investment opportunities and ideas to generate economic profits. While entrepreneurs might
have valuable projects, these projects might not be freely traded or their payoffs might not be
spanned by existing assets because of liquidity restrictions or the lack of liquid markets. These
capital market imperfections could be due to moral hazard, adverse selection, transactions
costs, or contractual restrictions. Thus, investment opportunities can have substantial undiver-
sifiable idiosyncratic risks. Entrepreneurs’ well-being depends heavily on the outcome of their
investments. Moreover, entrepreneurs’ attitudes towards risk should play an important role
in determining their interdependent consumption, savings, portfolio selection, and investment
decisions.2
       While entrepreneurial activities have other important dimensions such as how much to
invest and how to finance the investment project, we focus on the investment timing aspect
of entrepreneurial activities. We extend the standard real options approach to analyze the
implications of uninsurable idiosyncratic risk for this decision, using entrepreneurship as a
motivating example. We use a utility maximization framework in which an agent chooses his
   1
     Arrow (1968) and Bernanke (1983) are among the early contributions on irreversible investment. For early
stochastic continuous-time models, see Brennan and Schwartz (1985), McDonald and Siegel (1986), Pindyck
(1988), and Bertola and Caballero (1994). Abel and Eberly (1994) provide a unified model of (incremental)
investment under uncertainty. Dixit and Pindyck (1994) provide a textbook treatment of important contributions
to this literature.
   2
     There is a fast-growing literature on empirical evidence for entrepreneurship. See Gentry and Hubbard
(2004), Heaton and Lucas (2000), and Moskowitz and Vissing-Jorgensen (2002), among others.


                                                      1
consumption and portfolio allocations, and also undertakes an irreversible investment.
       To facilitate the discussions of our model and results, consider real estate development as
an example. The value of vacant land can be viewed as the option value of developing the real
estate (Titman, 1985, Williams, 1991, and Grenadier, 1996, provide more recent analysis on
the real options approach to real estate development.). Suppose that a land owner also knows
the best use of his land. For example, the owner has superior knowledge about local market
conditions and knows the most profitable property to construct. However, the owner cannot
sell this yet-to-be-developed property without incurring a significant value discount due to
moral hazard, adverse selection, or his inalienable human capital. Therefore, it might be of
interest for the owner to keep the land (option) and to be the developer even though owning
the land exposes himself to uninsurable idiosyncratic risks of the underlying asset. That is,
the option to obtain the highest value of development (via the “best” use of land) are not
tradable due to frictions such as moral hazard or the inalienability of human capital. It is
worth noting that land is primarily held by noninstitutional investors such as individuals and
private partnerships (Williams, 2001). In addition, individuals and private partnerships are
subject to more undiversifiable idiosyncratic risks than are institutional investors like pension
fund firms and life insurance companies.
       While a real estate entrepreneur owns the land and will choose when to build the property,
he can either sell the property or continue to manage the property after developing it. Of
course, choosing to sell or manage the property is another decision. We assume that this
decision is exogenous in order to focus on the effect of idiosyncratic risks on the development
decision.3 When the entrepreneur pays the construction cost and sells the property upon the
completion of development, he receives a lump-sum sale price. We call this situation the lump-
sum payoff case. Alternatively, the real estate entrepreneur can be not only the developer but
also the manager. The entrepreneur might be the most qualified manager if he can locate the
tenants with the highest willingness to pay and maintain the property at the lowest operating
costs. Therefore, it could still make economic sense for the developer to manage the property
after construction is complete, even though he will face additional undiversifiable idiosyncratic
property risks after development. In this setting, the developer receives a perpetual stream
of uninsurable rental payments (in excess of operating expenses) from managing the property
after development. We call this scenario the flow payoff case.
   3
     We can extend our model to endogenize the sale/no sale decision. Essentially, in the sale situation the bidder
with the highest valuation of the property is someone else with a comparative advantage in management. This
fits reasonably well into the description of merchant builders. The no-sale scenario corresponds to the case where
the developer is also the best manager in that he can find the tenants with the highest willingness to pay and
manage the property with the lowest operating expenses.


                                                        2
    Standard real options analysis (under complete markets) assumes that an agent can fully
diversify the idiosyncratic property risks. One can then take the risk-adjusted present value of
future cash flows as the market sale value, and thus there is no distinction between the lump-
sum and flow payoff scenarios. However, when the investment opportunity is not tradable and
not spanned by existing traded assets, the standard replicating and no-arbitrage argument does
not apply. We thus follow the certainty-equivalent approach in the literature on the pricing
of nontraded assets to value cash flows by analyzing the entrepreneur’s utility maximization
problem.4
    We show that the lump-sum and flow payoff cases deliver different economic predictions
due to the effect of uninsurable idiosyncratic shocks. Hence, the equivalence between these two
cases (under complete markets) no longer holds. Moreover, when the entrepreneur can partially
hedge against project risk by trading a risky financial asset such as the market portfolio, the
total volatility can be decomposed into idiosyncratic and systematic volatility. The ability to
hedge reduces the entrepreneur’s precautionary savings demand because idiosyncratic volatility
is lowered, which naturally has implications for the investment timing decision. For the conve-
nience of illustrating the effects of incomplete markets on investment timing in an intuitive way,
we proceed with our analysis and develop insights in a pedagogical way by working out four
models, which are sorted by both the timing of the payoffs and the menus of financial assets as
follows:
                                  Risk-free asset only      Risk-free & risky financial assets
            Lump-sum payoff             Model I                         Model II
              Flow payoff              Model III                       Model IV

    We start with Model I, the lump-sum payoff case. We first analyze the effect of risk attitude.
We show that a stronger precautionary savings motive lowers the certainty-equivalent wealth
associated with the investment opportunity, which is also the implied option value. Thus, risk
aversion speeds up investment.
    We next turn to the effect of risk. An important prediction of our model is that the idiosyn-
cratic project volatility has two opposing effects on the implied option value and hence on the
investment timing decision. On one hand, the standard real options model states that volatility
increases the option value due to its asymmetric convex payoff. On the other hand, idiosyncratic
volatility lowers the certainty-equivalent wealth and consumption because of the entrepreneur’s
precautionary savings motive and the interdependence of consumption and investment under
   4
     See Carpenter (1998), Detemple and Sundaresan (1999), Hall and Murphy (2000), and Kahl, Liu, and
Longstaff (2003), among others, on nontraded asset valuation such as employee stock options; see Section 2 for
further discussions.


                                                      3
incomplete markets. Hence, the net effect of volatility on the option value is ambiguous. When
the entrepreneur has a sufficiently strong precautionary savings motive or the idiosyncratic
volatility is sufficiently large, the precautionary savings effect can dominate the standard op-
tion effect. If volatility does not directly affect the investment payoff as in the lump-sum payoff
case (for example, via sale to diversified buyers such as real estate investment trust investors
in our real estate example), then idiosyncratic volatility under incomplete markets encourages
the entrepreneur to invest earlier, contrary to the standard real options analysis. Going back
to our real estate development example, our model predicts that the entrepreneur will exercise
his development option early when he is exposed to uninsurable idiosyncratic shocks to his
investment opportunity, particularly if he plans to sell his property upon the completion of
construction. The entrepreneur’s urge to avoid the certainty-equivalent wealth discount due to
idiosyncratic shocks encourages him to invest earlier, ceteris paribus.
   We now turn to Model II in order to understand the effect of hedging for the lump-sum
payoff case. When the entrepreneur can partially hedge against project risk by trading a risky
asset such as the market portfolio, total volatility can be decomposed into idiosyncratic and
systematic volatility. As a result, the entrepreneur’s precautionary savings demand (due to
idiosyncratic volatility) is mitigated, which in turn makes the investment option more valuable,
ceteris paribus. With the lump-sum payoff case, the payoff (after investment) can be indepen-
dent of idiosyncratic volatility (for example, via sale to diversified buyers), and the model then
predicts that the entrepreneur invests sooner under incomplete markets than under complete
markets, because the option value is lower in the presence of idiosyncratic shocks. Intuitively,
exercising the investment option allows the agent to exit from incomplete markets.
   We finally turn to Models III and IV to analyze investment payoffs given in flow terms.
In our previous real estate development example, these two cases correspond to developer also
managing the real estate after its completion. Because the developer still faces undiversifiable
idiosyncratic risk from the payoff stream after exercising the investment option, this payoff
stream has a lower certainty equivalent wealth lower than it would if the payoff stream were
marketable. Intuitively, unlike the lump-sum payoff case, exercising the investment option does
not allow the entrepreneur to exit the incomplete markets setting when the payoffs are given in
flow terms. Thus, the previously discussed precautionary savings effect influences not only the
certainty-equivalent option value but also the certainty-equivalent value of the project payoffs
after exercising the investment option. Because of this additional effect on investment payoffs,
many results obtained in the lump-sum payoff case are reversed.
   Building on the insights behind the Black-Merton-Scholes analysis, we show that hedging


                                                4
demand under incomplete markets also increases with the investment option delta (Delta is
defined as the change in the investment option value for a unit increase in the underlying
project payoff value). Since the option delta increases in the underlying project payoff value,
our model predicts that the developer’s hedging demand increases when his development option
gets closer to being “in the money.” With regard to the consumption savings literature, we
extend the standard incomplete markets analysis to allow the agent to endogenously determine
the timing of his income process. We show that volatility not only has a negative effect on
consumption (via the precautionary savings motive under incomplete markets), but also a
positive option-value-induced wealth effect due to the endogeneity of the income timing choice.
Hence, consumption might respond positively to an increase in volatility of the investment
project if the option value induced wealth effect is stronger, ceteris paribus.
     Three recent papers–Henderson (2005) and Hugonnier and Morellec (2005, 2007)–are related
to ours. Henderson (2005) assumes that the agent maximizes expected wealth at the time of
investment. Hugonnier and Morellec (2007) assume that the manager trades off his incentives
to exercise an option under incomplete markets prematurely in order to reduce the idiosyncratic
risk exposure against the cost of increasing the likelihood of a control challenge. Hugonnier and
Morellec (2005) apply a concave utility function to both the payoff and the interest cost of
investment, and show that risk aversion further delays investment compared with the standard
real options prediction. While these papers study real options models under incomplete markets,
they do not study the consumption/savings decision and its interaction with investment and
portfolio decisions. As in our lump-sum payoff case, the first two papers show that market
incompleteness encourages an agent to exercise the investment option sooner. Unlike these two
papers, we show that investment can be delayed due to market incompleteness when investment
payoffs are delivered over time rather than in one lump sum.
     The remainder of the paper proceeds as follows. Section 2 analyzes Model I, which is a
self-insurance model when the payoff from real investment is given in a lump sum. Section
3 presents the solution of Model II, which generalizes Model I to allow for hedging. Section
4 studies Models III and IV, where the real investment payoffs are given in flows. Section 5
analyzes the robustness of the results. Section 6 concludes. Technical details are relegated to
appendices.


2.     A self-insurance model with a lump-sum payoff (Model I)

This section provides a model that allows us to develop intuition for how the agent’s attitude
towards risk affects his investment decisions when he cannot fully insure himself against the

                                                5
idiosyncratic shocks from investment. In order to achieve this objective in the simplest possible
setting, we integrate a canonical consumption/savings model with a standard real-options-based
irreversible investment model.5

2.1.    Model setup

Time is continuous and the horizon is infinite. There is a single perishable consumption good
(the numeraire). The agent derives utility from a consumption process C according to
                                     ·Z ∞               ¸
                                             −βt
                                   E        e U (Ct ) dt ,                                              (1)
                                              0

where U is an increasing and concave function and β > 0 is his discount rate. For expositional
convenience, we assume that β is equal to r, the risk-free interest rate. It is straightforward
to extend our analysis to allow for differences between the agent’s subjective discount rate and
the interest rate, but no additional insight will be gained for the issue that we are after.
    The agent owns the rights to an investment project and can undertake this project irre-
versibly at some endogenously chosen time τ . Note that the investment time τ is stochastic
from today’s perspective. The investment costs I > 0. The agent pays this cost only at the
investment time τ . This cost is financed from the agent’s own wealth. If there is a shortage
of funds, the agent can borrow at the risk-free rate r. In order to focus on the effect of market
incompleteness in the simplest possible setting, we do not consider borrowing constraints or
costly external financing. Instead, we impose the conventional transversality condition for the
agent to rule out Ponzi games. After the agent exercises the investment option at time τ , the
project generates a lump-sum payoff Xτ . We also assume that the payoff process X is governed
by an arithmetic Brownian motion process,

                                   dXt = αx dt + σx dZt , X0 given,                                     (2)

where αx and σx are positive constants and Z is a standard Brownian motion.6 This process
implies that payoffs can take negative values. We interpret negative values as losses. We choose
the arithmetic Brownian motion process purely for analytical convenience and in line with
further analysis in Section 4 when the payoffs are given in flow terms over time. We obtain
essentially the same insights with a geometric Brownian motion payoff process (Section 5).
   5
     See Leland (1968) for early studies on precautionary savings. See Zeldes (1989), Caballero (1991b), and
Deaton (1991) for dynamic incomplete markets consumption models. See Brennan and Schwartz (1985), Mc-
Donald and Siegel (1986), and Dixit and Pindyck (1994) for standard real options models.
   6
     Unlike the often adopted geometric Brownian motion process, the specification in (2) proves more conve-
nient within our setup. Wang (2006) derives a closed-form consumption-saving rule using affine processes and
exponential utility.


                                                     6
   As discussed earlier, investing in the project is analogous to exercising a perpetual American
call option, in the sense that the agent has the right but not the obligation to invest at some
future time of his choosing. Importantly, unlike financial options, the underlying asset for the
real option cannot be traded in the market. For example, the building (the underlying asset
in the real estate development example) before it is erected is not traded in the market. If
we further assume that existing financial assets do not completely span the payoffs for the
underlying asset (the building), then we cannot apply the dynamic replication argument in
standard option pricing theory such as the Black-Merton-Scholes model. In this section, the
only financial asset available for the agent to trade and to smooth his consumption is the
risk-free asset. Hence, the agent inevitably bears project risk, which is undiversifiable.
   Let {Wt : t ≥ 0} denote a wealth process. Then the wealth dynamics are given by

                                dWt = (rWt − Ct ) dt, W0 given.                              (3)

That is, the agent accumulates wealth at the rate of (rWt − Ct ), the difference between the
interest income rWt and consumption rate Ct . At investment time τ , the agent pays the
investment cost I and obtains the lump-sum payoff Xτ , and hence his wealth is raised by the
amount Xτ − I); Wτ = Wτ − + Xτ − I, where Wτ − and Wτ denote the agent’s wealth just before
and immediately after the agent exercises the investment option, respectively. The agent’s
optimization problem is to choose both his investment timing strategy τ and consumption
process C to maximize his utility given in (1) subject to (3) and a transversality condition
specified later.

2.2.   Optimality conditions

We solve the agent’s decision problem by working backwards using dynamic programming. We
consider first the problem after the agent exercises the investment option. In this case, the
agent’s optimization problem is a standard deterministic consumption savings problem without
income. Let V 0 (w) be the corresponding value function. By a standard argument, V 0 (w)
satisfies the following Hamilton-Jacobi-Bellman (HJB) equation:

                            rV 0 (w) = max U (c) + (rw − c) Vw0 (w) ,                        (4)
                                        c∈R
                                                     ¯         ¯
subject to the transversality condition limT →∞ e−rT ¯V 0 (WT )¯ = 0. Under the deterministic
setting, the agent’s consumption is constant over time and is equal to the annuity value rw of
his wealth, and therefore, his wealth remains constant at w at all times. This is the familiar
consumption-smoothing result. This result follows from two steps: (i) the equality between the

                                                7
agent’s discount rate and the interest rate implies that the marginal utility is constant at all
times (U 0 (Ct ) = U 0 (Cs )); and (ii) the strict concavity of the utility function further implies that
Ct = Cs . It is immediate to conclude that the value function is thus given by V 0 (w) = U (rw)/r.
      We next consider the case before the option is exercised. It is worth noting that the agent’s
value function depends on both his wealth w and the current value x of his investment opportu-
nity. Let V (w, x) denote the corresponding value function. The standard dynamic programming
argument implies that V (w, x) satisfies the following HJB equation:
                                                                                σx2
               rV (w, x) = max U (c) + (rw − c) Vw (w, x) + αx Vx (w, x) +          Vxx (w, x) .     (5)
                             c∈R                                                2
The above HJB equation is similar to an asset pricing equation. It states that the agent chooses
his consumption optimally by setting the return rV (w, x) of his value function to equal the sum
of his instantaneous utility U (c) and the total expected changes of his value function (due to
the change in wealth and also in the investment opportunity).
      We now specify boundary conditions. First, the no-bubble condition limx→−∞ V (w, x) =
V 0 (w) must be satisfied. This condition states that when the investment payoff goes to negative
infinity, the agent will never exercise the investment option and his value function is equal to
that without the investment option. Next, as is standard in the optimal stopping problems, at
the instant of investment, the following value-matching condition must hold:

                                        V (w, x) = V 0 (w + x − I).                                  (6)

This equation implicitly defines an investment boundary x = x (w) . In general, this boundary
x (w) depends on the agent’s wealth level w. Finally, because this boundary is chosen optimally,
the following smooth-pasting condition is satisfied:7
                                  ¯                              ¯
                       ∂V (w, x) ¯¯            ∂V 0 (w + x − I) ¯¯
                                  ¯        =                     ¯       ,                           (7)
                          ∂x        x=x(w)            ∂x          x=x(w)
                                  ¯                              ¯
                       ∂V (w, x) ¯¯            ∂V 0 (w + x − I) ¯¯
                                  ¯        =                     ¯       .                           (8)
                          ∂w        x=x(w)            ∂w          x=x(w)

The first smooth-pasting condition (7) states that the marginal change in the investment oppor-
tunity has the same marginal effect on the agent’s value functions just before and immediately
after exercising the option. Similarly, the second smooth-pasting condition (8) states that the
marginal effect of wealth must be the same on the agent’s value functions just before and im-
mediately after exercising the option. Unlike the conventional irreversible investment models
(Dixit and Pindyck, 1994), here the agent’s wealth enters as an additional state variable, which
gives rise to the second smooth-pasting condition (8).
  7
      See, for example, Krylov (1980), Dumas (1991) and Dixit and Pindyck (1994).


                                                      8
2.3.   Model solution for CARA utility

We have now formulated the agent’s optimization problem as a combined control (consumption)
and stopping (investment) problem, which is generally difficult to solve. Our objective is to
understand the economic effects of uninsurable idiosyncratic risk and the attitude towards
risk on the investment and consumption decisions. In order to achieve this objective in the
simplest possible way, we assume that the agent has the utility function U (c) = −e−γc /γ,
where the parameter γ > 0 is the coefficient of absolute risk aversion (CARA). It is also
equal to the coefficient of absolute prudence −U 000 (c) /U 00 (c), which captures the precautionary
savings motive (Kimball, 1990). By adopting the utility specification, we derive intuitive semi-
closed-form solutions that greatly simplify our analysis. While CARA utility does not capture
the wealth effect, we emphasize that the main results and insights of this paper (the effect of
uninsurable idiosyncratic shocks on investment timing) do not rely on the particular choice of
this utility function. As we will see below, the driving force of the paper is the precautionary
savings effect, which can be captured by utility functions with convex marginal utility such as
CARA. While power utility is more commonly used in economics, this utility will complicate
our analysis substantially since it will lead to a much harder two dimensional free-boundary
problem.
   First, we note that complete consumption smoothing after investment and CARA utility
jointly imply that the value function after investment is given by
                                                 1
                                   V 0 (w) = −      exp (−γrw) .                                (9)
                                                 γr
Next, we conjecture that the value function before the option exercise takes the following form:
                                             1
                              V (w, x) = −      exp [−γr (w + G(x))] ,                         (10)
                                             γr
where G (x) is a function to be determined. One can interpret G (x) as the certainty-equivalent
wealth derived from the agent’s investment opportunity. Specifically, we follow the consumption
literature to define certainty-equivalent wealth as the value wce satisfying the equation V 0 (w +
wce ) = V (w, x); that is, the agent is indifferent between receiving stochastic income in the
future and a total current wealth level of (w + wce ). Using the explicit functional forms of
V 0 (w) and V (w, x), we have wce = G (x) .
   The boundary conditions (6)-(8) and the additive separability of wealth w and certainty-
equivalent wealth G(x) in the exponent of the value function V (w, x) indicate that the invest-
ment boundary is flat, in that x (w) is independent of wealth w. This property substantially


                                                  9
simplifies our analysis. The following proposition summarizes the solution to the agent’s com-
bined consumption and investment problem.

Proposition 1 The agent exercises the investment option the first time the process X hits the
threshold x̄ from below. After exercising the option, the agent’s value function and consumption
rule are given by (9) and c (w) = rw, respectively. Before exercising the option, his value
function and consumption rule are, respectively, given by (10) and

                                    c (w, x) = r (w + G (x)) ,                             (11)

where (G (x) , x̄) is the solution to the following free-boundary problem:

                                                σx2 00     γrσx2 0 2
                          rG(x) = αx G0 (x) +      G (x) −      G (x) ,                    (12)
                                                2           2
subject to the no-bubble condition limx→−∞ G (x) = 0, and the boundary conditions

                                        G (x̄) = x̄ − I,                                   (13)
                                       G0 (x̄) = 1 .                                       (14)

Moreover, G is increasing.

   We now analyze the intuition behind this proposition and discuss its implications.

2.4.   Interdependence of investment and consumption

As in the standard real options approach, the agent trades off between holding the investment
option to obtain an implied option value of waiting and exercising this option to obtain in-
vestment payoffs. The key to our analysis is to derive the implied option value. We show
below that, unlike the standard real options approach, risk aversion and consumption play an
important role in the determination of the option value under incomplete markets.


Implied option value. Proposition 1 demonstrates that the certainty-equivalent wealth
G (x) solves a free-boundary problem (12)-(14). These equations are similar to, but differ-
ent from, the valuation equations and boundary conditions in the standard real option models
of McDonald and Siegel (1986) and Dixit and Pindyck (1994). Based on this similarity, we
interpret x as the project value and the certainty-equivalent wealth G (x) as the implied option
value of investing in the underlying project. More formally, we follow the literature on the
pricing of nontraded assets by defining the implied option value Q of the project as the solu-
tion to the equation V (w − Q, x) = V 0 (w); that is, the agent is indifferent between having no

                                                10
investment opportunity and paying the price Q to obtain the investment opportunity. Given
the functional form of V 0 and V in (9) and (10), we see that Q = G (x) .
   The two interpretations of G (x) – the certainty-equivalent wealth and the implied option
value – are the same in our setup. This is due to the absence of the wealth effect under CARA
utility. We will thus use certainty-equivalent wealth (from the consumption literature perspec-
tive) and implied option value (from the investment literature perspective) interchangeably
throughout the remainder of the paper.
   Proposition 1 nests the standard (risk neutral) real options problem as a special case. Setting
γ = 0 in Eq. (12) enables us to derive the following explicit solutions for the option value G(x)
and the investment threshold x̄:
                                1 λ0 (x−x̄)                                 1
                      G (x) =      e        ,   for x ≤ x̄ , and x̄ = I +      ,             (15)
                                λ0                                          λ0
                        q
where λ0 = −σx−2 αx +    σx−4 αx2 + 2rσx−2 for σx > 0, and λ0 = r/α for σx = 0. It is straightfor-
ward to verify that both the option value G (x) and the investment threshold x̄ increase in the
volatility σx of the payoff. These are the main results of the real options literature. The agent
can capture the upside gains by investing and limit the downside losses by simply waiting until
the option is sufficiently “in the money.” This asymmetric convex payoff generates the positive
effect of volatility on the option value and investment threshold.
   The main difference between our model and the standard (risk neutral) real options model
is that option value G(x) depends not only on the parameters describing the risk-free rate r,
drift αx , and volatility σx but also on the agent’s precautionary savings motive. The latter
dependence captures the notion that the agent’s risk attitude matters not only for consumption
decisions but also for investment decisions when markets are incomplete. The last nonlinear
term on the right side of (12) captures the agent’s precautionary savings motive. It confirms
the intuition that the implied option value G(x) is lower when the precautionary motive is
stronger, ceteris paribus. Since the project payoff value x does not depend on the agent’s risk
attitude, the net effect of an increase in γ is to encourage earlier investment. Fg. 1 plots
the implied option value G (x) versus the value of the underlying investment opportunity x
for two values of γ. Note that the payoff line (x − I) is independent of risk aversion γ. The
figure clearly illustrates that the investment threshold decreases with the agent’s precautionary
savings motive or risk aversion γ.

                                      [Insert Figure 1 Here]



                                                 11
Investment threshold. To gain further intuition, we use the asymptotic approximation
method to compute approximate solutions for the implied option value G (x) and the investment
threshold x̄.8 We expand the option value G (x) and the investment threshold x̄ to the first
order of σx2 , in that G (x) ≈ G0 (x) + G1 (x) σx2 and x̄ ≈ x̄0 + δ1 σx2 ≡ x̄1 . Plugging these
expansions in (12)-(14), we show in the Appendix that x̄0 = I + αx /r and
                                              µ       ¶ 2
                                                1      σx
                                  x̄1 = x̄0 +      −γ     .                                                (16)
                                                αx      2

This solution indicates that, to a first-order approximation with respect to σx2 , a stronger
precautionary savings motive (higher γ) lowers the investment threshold, consistent with our
earlier discussions based on the nonlinear ODE (12) and the boundary conditions (13)-(14).
      The above approximate solution also helps us to understand the effect of volatility on the
investment threshold. An increase in volatility σx has two opposing effects. On one hand,
higher volatility increases the option value and hence encourages waiting, as in standard real
options models. On the other hand, an increase in σx also raises the precautionary savings
demand and thus lowers the certainty equivalent wealth G (x), and hence lowers the threshold,
ceteris paribus. Both effects are reflected in the last term on the right side of (16). When
γ is sufficiently small, the option effect dominates the precautionary savings effect. Thus, an
increase in volatility σx raises the implied option value and delays investment, consistent with
the predictions in the standard real options models. By contrast, when γ is sufficiently large,
the precautionary savings effect can dominate the option effect. Therefore, an increase in σx
lowers the certainty-equivalent wealth G(x), and hence encourages the agent to exercise his
option sooner, contrary to the standard real options result.
      Finally, we use numerical solutions to confirm our intuition. We apply the projection method
detailed in the Appendix to solve the free-boundary problem characterized by (12)-(14). We
find that, for a small σx , our preceding approximate solution is very close to the “true” solu-
tion delivered by the projection method. For a large range of parameter values, Fg. 2 plots
the investment threshold as a function of volatility σx and the risk aversion γ. This figure
demonstrates that our preceding results and intuition extend to general parameter values.

                                            [Insert Figure 2 Here]


Consumption. We now turn to the agent’s consumption policies. After exercising the option,
the agent solves a deterministic consumption-smoothing problem. As noted earlier, his wealth
  8
      See Judd (1998). Kogan (2001) applies this method to solve an irreversible (incremental) investment model.



                                                       12
remains constant and consumption is equal to the interest income at all times. Before exercising
the option, the agent’s consumption rule (11) is given by the annuity value of the sum of his
financial wealth w and his certainty-equivalent wealth G(x).
     Even though the agent does not receive payoff x before exercising the option, he rationally
anticipates that he will exercise his investment option sometime in the future. Thus, the
future investment payoff matters not only for his future consumption but also for his current
consumption. Our model captures the forward-looking consumption smoothing intuition in an
incomplete markets setting with endogenous stochastic income.
     The standard intuition in the consumption literature is that volatility lowers consumption
because of the precautionary savings motive. Here, we show that consumption can potentially
increase in volatility because the option effect can dominate the precautionary savings effect
on G(x). This effect is not present in the consumption literature, because almost all models in
that literature take stochastic income as exogenously given and hence rule out the option effect
of income volatility on consumption.
     In summary, the uninsurable idiosyncratic risk alters results in the standard real options and
consumption literature. When idiosyncratic risk is large or the precautionary savings motive
is strong, the option value and the investment threshold can decrease in volatility, contrary
to the standard real option results. Therefore, applying real options analysis and ignoring the
consumption-smoothing motive in settings where idiosyncratic risk is likely to matter, such as
entrepreneurial investments, is potentially misleading and incorrect.


3.     Lump-sum payoff with hedging opportunities (Model II)

In the previous section, the agent can trade only a risk-free asset to partially insure himself
against project risk. We now generalize the setting by allowing the agent to trade a risky asset to
partially hedge against project risk. We can interpret this financial asset as the market portfolio.
Unlike Model I where all risks are idiosyncratic and uninsurable, investing in the risky asset
allows the agent to partially hedge and hence separate systematic volatility from idiosyncratic
volatility. We will show that these two volatilities play different roles in determining the option
value and the exercising decisions. Our analysis nests the standard complete-markets analysis
as a special case.




                                                13
3.1.   Setup

Let {Pt : t ≥ 0} denote the risky asset’s price process and assume that the return is governed
by the following process:
                                     dPt /Pt = µe dt + σe dBt ,                               (17)

where µe and σe are positive constants, and B is a standard Brownian motion correlated with
the Brownian motion Z, which drives the innovations of the project payoff as given in (2). Let
ρ ∈ [−1, 1] be the correlation coefficient between the return on the risky asset and the agent’s
project payoff, and let η = (µe − r)/σe > 0 denote the Sharpe ratio of the market portfolio.
   One can alternatively rewrite the observed payoff process {Xt : t ≥ 0} given in (2) as follows:

                                                              et ,
                                  dXt = αx dt + ρσx dBt + ²x dB                               (18)

            e are two independent standard Brownian motions, and
where B and B
                                                p
                                         ²x =    1 − ρ2 σx .                                  (19)

One can think of B as the Brownian motion describing the systematic (market) risk, and thus
                                                                                             e as
ρσx is the systematic component of volatility for the project payoff. One can then interpret B
the Brownian motion describing idiosyncratic project risk, and thus ²x is idiosyncratic volatility.
A higher absolute value of the correlation coefficient |ρ| implies that systematic volatility has a
larger weight, ceteris paribus.
   Let πt be the amount allocated to the risky asset at time t, measured in units of the
consumption good. The agent’s problem is to choose a consumption process C, a portfolio
allocation rule π, and an investment timing strategy τ to maximize his utility (1) subject to
his wealth dynamics:

                    dWt = (rWt + πt (µe − r) − Ct ) dt + πt σe dBt , W0 given.                (20)

Similar to Section 2, the agent’s wealth jumps immediately after he invests, in that Wτ =
Wτ − + Xτ − I, where Wτ − and Wτ are his wealth immediately before and after his investment
at time τ , respectively. Note that (20) is the same both before and after the option exercise.
   We use the same dynamic programming method as in Section 2 to solve the agent’s problem
and summarize the results below.

Proposition 2 The agent exercises the investment option the first time the process X hits the
threshold x̄ from below. After exercising the option, the optimal consumption and portfolio rules


                                                14
are given by
                                               µ           ¶
                                                       η2
                                     c̄ (w) = r w +          ,                                    (21)
                                                      2γr2
                                               η 1
                                    π̄ (w) =        .                                             (22)
                                              γσe r
Before exercising the option, the optimal consumption and portfolio rules are given by
                                            µ                 ¶
                                                          η2
                              c̄ (w, x) = r w + G (x) +         ,                                 (23)
                                                         2γr2
                                            η 1 ρσx 0
                             π̄ (w, x) =         −    G (x) ,                                     (24)
                                           γσe r   σe
where (G, x̄) is the solution to the following free-boundary problem:

                                                       σx2 00     γr²2x 0 2
                      rG(x) = (αx − ρσx η) G0 (x) +       G (x) −      G (x) ,                    (25)
                                                       2           2
subject to the no-bubble condition limx→−∞ G (x) = 0, and also the boundary conditions

                                          G(x̄) = x̄ − I,                                         (26)
                                         G0 (x̄) = 1 .                                            (27)

Moreover, G is increasing.

   We next discuss the implications of this proposition and analyze the role of hedging.

3.2.   Undiversifiable idiosyncratic risk and implied option value

Similar to the self-insurance model in Section 2, we can interpret G (x) either as the certainty-
equivalent wealth or as the implied option value. Before discussing the option value G(x),
we first sketch out the standard complete-markets model when the idiosyncratic risk is fully
diversifiable. Let Φ (x) denote the option value under complete markets. Given complete
markets, standard finance theory implies that the option value and the investment threshold
are independent of preferences. Indeed, we can apply the martingale method to rewrite the
dynamic budget constraint as a static Arrow-Debreu budget constraint.9 Appendix B shows
that Φ (x) satisfies the following differential equation:

                                                              σx2 00
                              rΦ(x) = (αx − ρσx η) Φ0 (x) +      Φ (x) ,                          (28)
                                                              2
   9
     See Cox and Huang (1989), and Karatzas, Lehoczky, and Shreve (1987) on the martingale method. This
method and the dynamic programming method deliver the same solution. See Duffie (2001) for a textbook
treatment.


                                                  15
and the boundary conditions limx→−∞ Φ (x) = 0, Φ(x∗ ) = x∗ − I, and Φ0 (x∗ ) = 1.
   Eq. (28) resembles a standard valuation equation in dynamic asset pricing models (see, e.g.,
Duffie, 2001). After correcting for risk, traded securities such as the option earn the risk-free
rate of return r, as seen from the left side of (28). The right side of (28) gives the instantaneous
expected changes in the option value with respect to the underlying asset value x. The risk
correction is reflected by the drift change from αx to (αx − ρσx η) in the first term on the right
side of (28). This risk correction can be obtained from a CAPM argument and is consistent
with standard dynamic asset pricing theories, which state that only systematic risk demands a
premium.
   We turn to the differential equation (25) for the option value G(x). Re-writing (25) gives
                             µ                        ¶
                                            γr²2x 0              σ2
                   rG(x) = αx − ρσx η −          G (x) G0 (x) + x G00 (x) .               (29)
                                              2                   2

First, we note that the standard convexity effect of volatility on option value depends on the
total volatility σx , which is reflected by the last term in (29), and is the same as in the complete
markets setting (see (28)). Also similar to the differential equation (28) for Φ(x), the change
of drift from αx to (αx − ρσx η) in the first term on the right side of (29) accounts for the
effect of systematic risk on valuation, the standard CAPM argument. Importantly, unlike the
differential equation (28) for Φ(x), the third component in the bracket of the drift term on the
right side of (29), γr²2x G0 (x)/2, reflects the effect of idiosyncratic risk on the implied option
value G(x). We call this term the idiosyncratic risk premium.
   Intuitively, when idiosyncratic risks cannot be fully diversified, the agent naturally demands
a higher risk premium for a larger idiosyncratic volatility ²x , ceteris paribus. A more prudent
agent (with a larger coefficient of risk aversion γ) also demands a higher risk premium. Finally,
a higher option delta G0 (X) indicates that the option value is more sensitive to changes in the
underlying investment opportunity set and hence requires a higher idiosyncratic risk premium.
Moskowitz and Vissing-Jorgensen (2002) find that the private equity premium is low in the U.S.
given the amount of idiosyncratic risk that entrepreneurs face. While our model is not designed
to address this quantitative private equity premium issue, our model responds to urgent needs to
develop theories that capture the role of idiosyncratic risk in the interdependent consumption,
investment, and portfolio choices for entrepreneurs, as suggested by Gentry and Hubbard (2004),
Heaton and Lucas (2000), and Moskowitz and Vissing-Jorgensen (2002).
   We now turn to the effects of idiosyncratic volatility ²x and the risk aversion coefficient γ
on the investment threshold x̄. First, note that as in the self-insurance model of Section 2, the
payoffs upon option exercise are given by (x − I). Hence, neither idiosyncratic volatility nor

                                                 16
risk aversion matters for the project payoff values. Second, a direct comparison between (28)
and (29) implies that a larger idiosyncratic volatility ²x or a higher risk aversion coefficient γ
lowers the option value G(x), holding systematic risk constant. Taking the two effects together,
we can conclude that a higher idiosyncratic volatility ²x and a larger risk aversion coefficient
γ lower the investment threshold x̄, ceteris paribus. This result also implies that the agent
hastens investment under incomplete markets relative to complete markets since the solution
for the latter is effectively obtained by setting γ = 0.

3.3.   Consumption and portfolio rules

The consumption rule (21) and the portfolio rule (22) after the option exercise are solutions to
the standard Merton-style consumption-portfolio choice problem with CARA utility (Merton,
1969). After exercising the option, the agent has no more hedging demand since the lump-sum
project payoff has been realized at exercise. Eq. (22) gives the standard mean-variance efficient
rule for CARA utility. The agent’s ability to invest in the risky asset to take advantage of the
risk premium makes him better off relative to the self-insurance setting in Section 2. This is
reflected by η 2 /(2γr2 ), the second term in the consumption rule (21).
   Next, consider the agent’s consumption decision before the option exercise. Eq. (23) states
that the agent’s consumption is equal to the annuity value of the sum of three terms: (i)
financial wealth w, (ii) certainty-equivalent wealth G(x), and (iii) the constant η 2 /(2γr2 ). The
forward-looking agent rationally finances a certain fraction of his current consumption via the
certainty equivalent wealth G(x) for his investment opportunity. Moreover, investing in the
risky asset makes him better off and yields a higher current consumption, ceteris paribus. This
is reflected by the third component in the consumption rule (23), similar to the argument for
the after-investment consumption rule (21).
   We now turn to the agent’s portfolio rule (24) before investment. In addition to the standard
Merton mean-variance term, the agent also has a hedging demand, because his investment
project payoff is correlated with the market portfolio. First, hedging demand is greater when
the degree of correlation |ρ| is higher, the standard and well-known result. Second, the portfolio
rule (24) suggests that hedging demand is greater when G0 (x), the option ∆, is higher. This
result is less known, but is intuitive. Before the investment decision is made, the agent holds
a valuable option on a non-tradable underlying asset. Hence, the agent naturally hedges more
against the fluctuations of the option value of his investment, if this option value is more
sensitive to the change of the underlying asset (a higher option delta), ceteris paribus.




                                                17
4.     Models with flow payoffs (Models III and IV)

While some real-world examples fit the lump-sum payoff setting that we have just analyzed,
there are many situations under which the investment payoffs are given as cash flows over
time, rather than as a lump-sum payment. We emphasize that unlike the lump-sum payoff
case where the project payoff is exogenously given, one has to derive the implied value or the
certainty-equivalent value of the cash flows by solving the agent’s consumption decision after
the option exercise. Intuitively, idiosyncratic volatility also lowers the implied project value or
the certainty-equivalent wealth after option exercise. Hence, the overall impact of idiosyncratic
volatility on the investment decision and implied option value is less obvious. Indeed, we show
that the predictions for the flow payoff case can be reversed compared to those for the lump-sum
payoff case.
     In the flow payoff case, after the agent irreversibly exercises his investment option at some
time τ , he obtains a perpetual stream of payoffs {Yt : t ≥ τ }. Assume that the flow payoff
process Y is governed by an arithmetic Brownian motion process:

                                  dYt = αy dt + σy dZt , Y0 given,                              (30)

where αy and σy are positive constants and Z is a standard Brownian motion. As will be
clear below, the arithmetic Brownian motion process allows us to obtain explicit solutions
after investment so that the problem before investment is easier to analyze. Using a geometric
Brownian motion process to model the cash flow process will complicate the analysis without
adding many new insights.
     We present our analysis in three subsections. First, we analyze Model III, the flow payoff self-
insurance case where the agent can trade only a risk-free asset and hence all risk is idiosyncratic.
We then allow the agent to trade a market portfolio to partially hedge against the flow payoff
risk and hence to separate idiosyncratic volatility from systematic volatility, similar to Model II
of Section 3. Finally, we discuss the empirical implications of the models in both the lump-sum
and flow payoff cases.

4.1.    Self-insurance with flow payoffs (Model III)

When the agent can trade only a risk-free asset, the agent’s wealth {Wt : t ≥ 0} after the option
exercise (τ ≤ t) evolves according to

                                     dWt = (rWt + Yt − Ct ) dt.                                 (31)



                                                 18
This equation resembles that in a standard incomplete-markets consumption-savings model
with a stream of labor income {Yt : t ≥ τ }. At investment time τ, the agent pays the cost
I and hence wealth is lowered from Wτ − , the level just prior to investment, to Wτ , the level
immediately after the option exercise, in that Wτ = Wτ − − I. Before exercising the option
(0 ≤ t < τ ), the agent does not receive flow payoffs and thus his wealth evolves according to (3)
as in the lump-sum case. The agent’s decision problem is to choose both an investment timing
strategy τ and a consumption process C so as to maximize his utility (1) subject to wealth
accumulation equations (31) and (3) and a transversality condition specified in the Appendix.
   We solve the agent’s decision problem backward by dynamic programming. Let J (w, y) be
the value function after the option exercise. Unlike the lump-sum payoff case, the payoff value y
is an additional state variable for J. By the standard argument, J (w, y) satisfies the following
HJB equation:
                                                                              σy2
            rJ(w, y) = max U (c) + (rw + y − c) Jw (w, y) + αy Jy (w, y) +        Jyy (w, y) ,   (32)
                        c∈R                                                   2
subject to a usual transversality condition. Let V (w, y) denote the value function before the
option exercise. Note that we use the same notation for the value function before investment
as that for the lump-sum payoff case. Similar to Section 2, V (w, y) satisfies the following HJB
equation:
                                                                            σy2
             rV (w, y) = max U (c) + (rw − c) Vw (w, y) + αy Vy (w, y) +        Vyy (w, y) .     (33)
                          c∈R                                               2
   We now briefly discuss the boundary conditions for the flow payoff case and relate then to
the lump-sum payoff case analyzed earlier. Similar to the lump-sum payoff case, the no-bubble
condition limy→−∞ V (w, y) = V 0 (w) must be satisfied. Similar to, but different from the
lump-sum payoff case, we have the following value-matching condition:

                                     V (w, y) = J (w − I, y) .                                   (34)

This equation determines an investment boundary y (w) . Moreover, the agent’s optimality
further requires the following smooth-pasting conditions to hold:
                                      ¯                         ¯
                           ∂V (w, y) ¯¯          ∂J (w − I, y) ¯¯
                                      ¯        =                ¯       ,                        (35)
                              ∂y        y=y(w)        ∂y         y=y(w)
                                      ¯                         ¯
                           ∂V (w, y) ¯¯          ∂J (w − I, y) ¯¯
                                               =                        .                        (36)
                              ∂w ¯    y=y(w)          ∂w        ¯
                                                                 y=y(w)

These smoothing-pasting conditions are both similar to and different from those for the lump-
sum case, because the cash flow payoff y enters as an additional state variable even after the
agent makes the investment.

                                                19
       We use a procedure similar to that in Section 2 to solve the above problem and then show
that the investment threshold ȳ (w) is independent of wealth w for CARA utility agents.

Proposition 3 The agent exercises the investment option the first time the process Y hits the
threshold ȳ from below. After exercising the option, the optimal consumption rule is given by

                                        c (w, y) = r (w + f (y)) ,                                     (37)

where f (y) is given by
                                                 ³y
                                               αy ´ γσy2
                                       f (y) =      − 2 .
                                                      +                                                (38)
                                            r   r2     2r
Before exercising the option, the optimal consumption rule is given by

                                        c (w, y) = r (w + g (y)) ,                                     (39)

where (g, ȳ) is the solution to the following free-boundary problem:
                                                      σy2 00     γrσy2 0 2
                              rg(y) = αy g 0 (y) +       g (y) −      g (y) ,                          (40)
                                                      2           2
subject to the no-bubble condition limy→−∞ g (y) = 0 and the boundary conditions

                                          g(ȳ) = f (ȳ) − I,                                          (41)
                                                              1
                                         g 0 (ȳ) = f 0 (ȳ) = .                                       (42)
                                                              r
Moreover, g is increasing.

       Comparing Propositions 1 and 3, we see that the valuation equation for the implied option
value is similar. However, the consumption rule after investment and the boundary conditions
are different. We next analyze the implications of these differences.

4.1.1.      Implied project value and consumption

When the payoffs are given in terms of cash flows over time, the agent continues to face undiver-
sifiable idiosyncratic cash flow risk after exercising his investment option. Therefore, idiosyn-
cratic risk lowers both the implied option value and also the certainty-equivalent project payoff
value. After option exercise, the agent’s optimization problem is a standard incomplete-markets
consumption savings problem with stochastic income {Yt : t ≥ τ } . Because of the CARA util-
ity and arithmetic Brownian motion process specifications, we are able to derive the explicit
expression for the consumption rule given in (37)-(38).10
  10
    Caballero (1991b) derives this consumption rule in discrete time. Wang (2004) extends Caballero (1991b)
to more general bivariate income processes with partial observability and hence increases precautionary sav-
ings demand due to estimation risk. Wang (2003) shows that general equilibrium restriction eliminates the
precautionary savings demand in Caballero (1991b).


                                                      20
   To understand the consumption rule (37), we define human wealth h (y) as the present
discounted value of all investment cash flows following Friedman (1957) and Hall (1978). For
the arithmetic Brownian motion income process (30), this gives
                                 µZ ∞             ¯       ¶
                                                  ¯         y αy
                       h (y) ≡ E      e−rt Yt dt ¯¯ Y0 = y = + 2 .                          (43)
                                   0                        r  r

Note that this traditional definition of human wealth does not incorporate the effect of risk.
Using h (y), we can rewrite the consumption rule given in (37) and (38) as follows:
                                          Ã                  !
                                                        γσy2
                               c(w, y) = r w + h (y) − 2 .                                  (44)
                                                        2r

When γ = 0 or σy = 0, consumption is the annuity value of the sum of financial wealth w
and human wealth h(y), in that c(w, y) = r (w + h (y)) . This is Friedman’s permanent-income
hypothesis. In terms of a time series, this implies that consumption is a martingale, in that
Ct = Et (Ct+1 ), or Hall’s random walk consumption model.
   Importantly, when the agent has a precautionary savings motive (γ > 0), a precautionary
savings demand arises in the presence of uninsurable idiosyncratic shocks. This demand after
                                                   ¡ ¢
the option exercise is reflected by the term γσy2 / 2r2 in (38). We can interpret f (y) as
the certainty-equivalent (risk-adjusted) human wealth or the implied project value, following
                                                                        ¡ ¢
essentially the same analysis in Section 2. Since f (y) = h (y) − γσy2 / 2r2 , the certainty-
equivalent human wealth f (y) decreases in the risk aversion coefficient γ and also in income
volatility σy . This differs from the lump-sum payoff case where option exercise gives a complete
exit from incomplete markets and hence the precautionary savings motive and volatility do not
affect the value of payoffs from exercising.
   Now consider consumption before investment. Eq. (39) implies that the rational forward-
looking agent finances his consumption partially out of his future payoffs from his real invest-
ment opportunities. More formally, consumption is given by the annuity value of the sum
of financial wealth w and g(y), before the investment is made. Following our analysis in the
lump-sum payoff case, we can interpret g(y) as the certainty-equivalent wealth for the invest-
ment opportunity before investment is made, or equivalently, the implied option value on the
investment opportunity. We next turn to the analysis of g(y).

4.1.2.   Implied option value and investment threshold

The implied option value g(y) and the investment threshold ȳ are determined jointly by the
the differential equation (40) and the corresponding boundary conditions (41) and (42). The


                                               21
differential equation (40) is similar to its counterpart (12) for the lump-sum payoff case. How-
ever, the boundary conditions for the flow payoff case are different from those for the lump-sum
payoff case in Proposition 1 in that the agent values the stream of payoffs after option exercise
with the certainty-equivalent wealth f (y) given in (38). These boundary conditions jointly
suggest that the investment threshold is determined by trading off between the option value of
waiting g(y) and the certainty-equivalent wealth f (y) for the stochastic income stream (after
netting out the fixed investment cost I).
   Unlike the lump-sum payoff case, the total payoff volatility σy and the precautionary savings
motive also lower the implied project value f (y) , because the agent is exposed to idiosyncratic
shocks after making his investment decision, and hence values the cash flow at a value lower
than h(y), the present discounted value of his future income.
   We can analyze the impact of the risk aversion coefficient γ and income volatility σy on the
investment threshold ȳ via the approximation method. We approximate g (y) and ȳ simultane-
ously to the first order of σy2 . We then obtain the approximate investment threshold:

                                                       1 2
                                        ȳ1 = ȳ0 +      σ ,                                   (45)
                                                      2αy y

where ȳ0 = rI is the exactly solved investment threshold in the deterministic case (σy = 0).
Therefore, to the first-order approximation, the investment threshold ȳ1 increases in volatility
σy , and the agent’s risk attitude does not affect investment timing. This prediction is thus
qualitatively the same as in the standard real options models to the first order.
   The intuition for this result is as follows. In the flow payoff case, the agent receives a stream
of uninsurable income after the option exercise. Therefore, the agent’s precautionary savings
motive lowers both the implied project value f (y) and the implied option value g (y). It turns
out that the precautionary savings motive has offsetting effects on g (y) and f (y) to the first-
order approximation. Thus, there is little impact on investment timing since the investment
threshold ȳ is determined by the relative magnitudes of the implied option value g(y) and the
project payoff f (y). This result differs from the lump-sum payoff case where the precautionary
savings motive only affects the implied option value, not the project payoff value. As a result,
the investment threshold is lowered by the agent’s precautionary savings motive to the first-
order approximation in the lump-sum payoff case. In contrast, exercising the option does not
eliminate the effect of uninsurable idiosyncratic shocks when payoffs are given in flow terms
over time.
   To further understand the impact of the agent’s precautionary motive γ on the investment
decision, we use the second-order approximation with respect to σy2 and obtain the following

                                                22
approximate investment threshold:
                                                      µ       ¶
                                                1          r
                                  ȳ2 = ȳ1 +          γ−       σy4 ,                         (46)
                                                αy2       2αy

where ȳ1 is given in (45). Eq. (46) indicates that, to the second-order approximation, the
investment threshold increases in γ, opposite to the prediction for the lump-sum payoff case.
While the precautionary savings effect is present both before and after the option exercise as
argued earlier, the precautionary savings effect, to the second-order approximation, has a larger
impact on f (y) than on g (y). The intuition is as follows. Before exercising the option, the agent
can decide when to invest in the risky investment. While volatility has offsetting effects on the
implied option value g(y) and the implied project value f (y) to the first order, the additional
flexibility of timing the investment decision at the margin implies that the precautionary savings
effect is stronger after exercising the option than before. This line of argument suggests that an
increase in the precautionary savings motive γ lowers f (y) more than g (y) , thereby delaying
the exercise of the option. We emphasize that the effect of γ on the investment decision is of
the second order.
   Finally, we use numerical solutions to conduct further analysis. Fg. 3 plots the investment
threshold as a function of volatility σy and the parameter γ. This figure confirms our preceding
approximation results. Moreover, it illustrates that the effects of volatility σy on the investment
threshold are stronger when the agent is more precautionary, i.e., when γ is higher.

                                      [Insert Figure 3 Here]

   Fg. 4 illustrates the effect of changes in γ. An increase in γ raises precautionary savings
both after and before the option exercise, thereby lowering both the implied project value f (y)
and the implied option value g (y). This figure confirms our earlier analysis that f (y) is lowered
more than g (y) , so that the agent delays exercising the investment option.

                                      [Insert Figure 4 Here]

4.2.   Flow payoff with hedging opportunities (Model IV)

We now turn to the flow payoff case with hedging. Based on our previous analysis, we anticipate
that the model contains the following two features: (i) the hedging opportunity allows the
separation of idiosyncratic volatility and systematic volatility, and hence captures the different
effects of these two forms of volatility on the investment and consumption decisions; and (ii)
the flow payoff implies that idiosyncratic volatility continues to matter after option exercise

                                                      23
and hence lowers the certainty-equivalent payoff value, similar to the self-insurance model for
the flow payoff case.
   Let πt denote the amount allocated in the risky asset with returns given in (17) at time t.
As in Section 3, we can denote ²y as the idiosyncratic volatility, in that
                                                  p
                                          ²y =      1 − ρ2 σy .                             (47)

We can rewrite the observed flow payoff process {Yt : t ≥ 0} given in (30) as follows:

                                                              et ,
                                  dYt = αy dt + ρσy dBt + ²y dB                             (48)

                                                   e describes the idiosyncratic project risk.
where B describes the systematic (market) risk and B
   Before the agent exercises the investment option at time τ , his wealth accumulation is the
same as (20). After time τ , his wealth evolves as follows:

                        dWt = [rWt + πt (µe − r) + Yt − Ct ] dt + πt σe dBt .               (49)

Note that the flow payoff Y appears in (49), not in (20). As before, the agent’s wealth imme-
diately after his investment Wτ is given by Wτ = Wτ − − I, where Wτ − denotes his wealth level
just prior to his investment at time τ . The following proposition characterizes the solution.

Proposition 4 The agent exercises the investment option the first time the process Y hits the
threshold ȳ from below. After exercising the option, the optimal consumption and portfolio rules
are given by
                                             µ                  ¶
                                                            η2
                                c̄ (w, y) = r w + f (y) +         ,                         (50)
                                                           2γr2
                                             η 1 ρσy
                               π̄ (w, y) =        −      ,                                  (51)
                                            γσe r   σe r
where f (y) is given by
                                          µ                     ¶
                                              1    αy − ρσy η           γ²2y
                                f (y) =         y+                  −        .              (52)
                                              r        r2               2r2
Before exercising the option, the optimal consumption and portfolio rules are given by
                                            µ                 ¶
                                                          η2
                              c̄ (w, y) = r w + g (y) +         ,                           (53)
                                                         2γr2
                                            η 1 ρσy 0
                             π̄ (w, y) =         −    g (y) ,                               (54)
                                           γσe r   σe
where (g, ȳ) is the solution to the following free-boundary problem:

                                                         σy2 00     γr²2y 0 2
                        rg(y) = (αy − ρσy η) g 0 (y) +      g (y) −      g (y) ,            (55)
                                                         2           2

                                                    24
subject to the no-bubble condition limy→−∞ g (y) = 0, and the boundary conditions

                                           g(ȳ) = f (ȳ) − I,                                            (56)
                                                               1
                                          g 0 (ȳ) = f 0 (ȳ) = .                                         (57)
                                                               r
Moreover, g is increasing.

    As in the previous subsection, we interpret f (y) as the implied project value and g (y) as
the implied option value. Unlike the lump-sum payoff model with hedging opportunities in
Section 3, hedging affects not only the implied option value g (y) but also the implied project
value f (y) . In particular, hedging lowers the agent’s exposure to idiosyncratic volatility from
           p
σy to ²y = 1 − ρ2 σy . Thus, the precautionary savings demand after option exercise is reduced
           ¡ ¢            ¡ ¢
from γσy2 / 2r2 to γ²2y / 2r2 . In addition, the portfolio rule (51) after option exercise consists
of the standard mean-variance term and the hedging demand term.11
    To compare with the complete-markets solution, we assume that the agent can trade an
additional risky asset to diversify the idiosyncratic risk as in Section 3.2. Appendix B shows
that the market value of the investment option satisfies the differential equation
                                                                   σy2 00
                                rΨ(y) = (αy − ρησy ) Ψ0 (y) +         Ψ (y)                               (58)
                                                                   2
and the boundary conditions limy→−∞ Ψ (y) = 0, Ψ(y ∗ ) = F (y ∗ ) − I and Ψ0 (y ∗ ) = 1/r , where
                                                1    αy − ρησy
                                         F (y) = y +                                                      (59)
                                                r        r2
is the market value of the cash flow process Y . Eqs.(58) and (59) reveal that both the option
value and the project value under complete markets are independent of preferences and effec-
tively are the solutions in (52) and (55) for γ = 0. In addition, both values are higher than
under incomplete markets. Similar to our analysis in Section 4.1.2, the net effect of incomplete
hedging on investment timing depends on the relative magnitudes of the changes in the implied
option value and the project value. Similar to the insights from the self-insurance model with
flow payoffs, the impact of idiosyncratic shocks on the project value is greater than on the
option value to the second order. Thus, unlike in the lump-sum payoff case analyzed in Section
3.2, incomplete hedging raises the investment threshold and delays investment, compared to the
complete-markets benchmark. This result demonstrates that the timing of payoffs matters for
the investment decision under incomplete markets, which is different from a complete-markets
setting where the timing of payoffs does not matter as shown in Appendix B.
  11
     See Svensson and Werner (1993), Duffie et al. (1997), Koo (1998), Viceira (2001), Heaton and Lucas (2000),
Davis and Willen (2002), and Campbell and Viceira (2002, Ch. 6), among others, on dynamic consumption and
portfolio choice when an investor is endowed with nontraded stochastic income.


                                                      25
4.3.    Empirical implications

Our analysis has empirical implications. For example, Model I (self-insurance with a lump-sum
payoff) suggests that unlike a standard real options analysis, a positive investment-uncertainty
relation may potentially arise for entrepreneurial activities when idiosyncratic risk is sufficiently
large. Thus, we must be cautious in interpreting some conflicting results found in empirical
studies.12 Our analysis also suggests that the investment behavior of undiversified individuals
is different from that of well-diversified individuals or institutions. In particular, risk attitude
plays an important role under incomplete markets. Consider again the real estate development
example. Suppose we have a sample containing both undiversified individual developers and
publicly traded REITs. Suppose that both individual entrepreneurs and REITs specialize in
development of and not management of the properties. That is, we can take the sales value
of the property upon completion of construction as given. Then, Models I and II predict that
the individual entrepreneurs are more likely to develop earlier than the publicly traded REITs,
because idiosyncratic risk lowers the implied option value of waiting for individual developers.
However, if they also manage the properties after completion of development, then Models III
and IV (flow payoff cases) suggest that the preceding prediction could be reversed because the
properties are also less valuable to the undiversified individual developers. Moreover, developing
real estate does not allow the entrepreneur to diversify away the uninsurable idiosyncratic risk.


5.     Robustness

Our main results include the following: (i) risk aversion erodes option value and speeds up
investment in the lump-sum payoff case of Model I; and (ii) risk aversion has no first-order
effect on investment policy and the second-order effect is to delay investment, in the flow payoff
case of Model III. These results are based on the assumptions of CARA utility and arithmetic
Brownian motion payoff processes. We now relax these assumptions.13
     First, we derive the optimal investment thresholds in Models I and III using geometric
Brownian motion (GBM) payoff processes instead of arithmetic Brownian motion process (de-
tails available upon request). Consider Model I in which the lump-sum payoff process is replaced
by
                                       dXt = αx Xt dt + σx Xt dZt ,                                      (60)

where αx , σx > 0. We assume r > αx for convergence. Then we can show a result similar
  12
     See Quigg (1993), Berger et al. (1996), Leahy and Whited (1996), and Moel and Tufano (1998) for empirical
works. See Caballero (1991a) for a theoretical analysis.
  13
     We are grateful to the anonymous referee for suggesting this analysis.


                                                     26
to Proposition 1; that is, the investment threshold x̄ and the implied option value G (x) are
determined by the following free-boundary ODE:
                                                σx2 x2 00     γrσx2 x2 0 2
                      rG(x) = αx xG0 (x) +            G (x) −         G (x) ,              (61)
                                                  2             2
subject to the no-bubble condition limx→0 G (x) = 0, limx→∞ G (x) /x < ∞, and the (value-
matching and smooth-pasting) boundary condition:

                                        G (x̄) = x̄ − I,                                   (62)
                                       G0 (x̄) = 1 .                                       (63)

The functional forms for the consumption rules and the value functions before investment and
after investment remain the same as the ones reported in Proposition 1, but evaluated with the
new option value G(x), the solution to the above free-boundary problem.
   As in Section 2.4, we use the asymptotic expansion method to solve for the approximate
investment threshold. We can show that to the first-order approximation around σx2 the invest-
ment threshold is given by
                                      ·    µ                ¶ ¸
                                              1    γ rx̄0
                             x̄1 = x̄0 1 +       −           σx2 ,                         (64)
                                             2αx   2 r − αx
where x̄0 = rI/ (r − αx ) is the investment threshold in the deterministic case σx = 0. Eq. (64)
resembles (16) and implies that risk aversion speeds up investment. The intuition is that risk
aversion lowers the implied option value G (x) as shown in the last term in Eq. (61), but has
no effect on the lump-sum project payoff X. This intuition is in accord with that in Section
2.4.
   Now turn to Model III in which the flow payoff process is replaced by

                                    dYt = αy Yt dt + σy Yt dZt ,                           (65)

where αy , σy > 0. We assume r > αy for convergence. Then we can show a result similar
to Proposition 3; that is, the investment threshold ȳ and the implied option value g (y) are
determined by the following free-boundary ODE:
                                                σy2 y 2 00     γrσy2 y 2 0 2
                        rg(y) = αy yg 0 (y) +          g (y) −          g (y) ,            (66)
                                                  2              2
subject to the boundary conditions limy→0 g (y) = 0, and

                                      g (ȳ) = f (ȳ) − I,                                 (67)
                                      g 0 (ȳ) = f 0 (ȳ) ,                                (68)

                                                  27
where the implied project value f (y) after investment satisfies the ODE

                                                       σy2 y 2 00     γrσy2 y 2 0 2
                        rf (y) = y + αy yf 0 (y) +            f (y) −          f (y) ,        (69)
                                                         2              2
subject to the no-bubble condition limy→∞ f (y) /y < ∞. As in the robustness check for the
lump-sum payoff case, the functional forms for the consumption rules and the value functions
before investment and after investment are the same as the ones reported in Proposition 3, but
evaluated with the new implied project value f (y) and the new option value g(y), characterized
by (66)–(69). Note that unlike Proposition 3, there is no closed-form solution for f (y) nor for
the consumption rule after investment.
   As in Section 4.1, we can show that to the first-order approximation around σy2 the invest-
ment threshold is given by                         µ          ¶
                                                         1 2
                                          ȳ1 = ȳ0 1 +    σ ,                                (70)
                                                        2αy y
where ȳ0 = rI is the deterministic investment threshold. To ensure convergence for the first-
order approximation, we assume r > 2αy . The preceding equation resembles Eq. (45) and
implies that risk aversion has no first-order effect on the investment threshold in the flow payoff
case. The intuition is the same as that discussed in Section 4.1. Specifically, both the implied
option value g(y) and the implied project value f (y) are lowered by risk aversion as seen in (66)
and (69). The two effects offset each other to the first-order approximation.
   We can also demonstrate that, to the second-order approximation around σy2 , the investment
threshold is given by
                                             ȳ0       h                          i
                                                            2                   2
                         ȳ2 = ȳ1 +                    2Ir   α y γ − (r − α y )    σy4 .     (71)
                                       4 (r − αy ) αy3

This equation resembles Eq. (46) and implies that risk aversion delays investment. This result
is due to the fact that risk aversion has a bigger (negative) impact on the implied project value
f (y) than on the implied option value g(y) to the second order, which is consistent with the
result and the intuition reported for the arithmetic Brownian motion case in Section 4.1.
   Our preceding analysis demonstrates that our main results on the investment timing are
robust to the GBM specification of the payoff process. This finding is not surprising since our
intuition on the interplay between the precautionary savings effect and the option effect does
not hinge upon the specifications of the payoff process.
   We now discuss the specification of the utility function. CARA utility allows us to exploit its
lack of wealth effect feature so that we can reduce the two-dimensional free-boundary problem
to a simpler one with the payoff as the only state variable. Another widely adopted specification


                                                       28
is the constant relative risk aversion (CRRA) utility function. Although this utility function
has the homogeneity property, the budget constraints in our problem are nonlinear due to the
jump of wealth at the time of investment. Thus, our problem does not have a homogeneity
property so that we cannot reduce our two-dimensional problem to one with a single state
variable. In this case, the investment threshold is a function of wealth and differs from that in
our CARA utility models. Therefore, both our asymptotic expansion and numerical methods
are not directly applicable to the CRRA utility specification. Since an agent with CRRA utility
also has precautionary motives, we suspect that our key intuition, primarily building on the
interaction between precautionary savings and option value, is likely to survive. Nonetheless,
we should emphasize that with CRRA utility, the agent’s liquid wealth will have effects on
investment policy that could generate new insights. A thorough analysis is beyond the scope
of the present paper.


6.     Conclusions

Entrepreneurs’ business investment opportunities are often nontradable and their payoffs cannot
be spanned by existing traded assets for reasons such as incentives and informational asymme-
tries. These features invalidate the standard real options approach to investment. Extending
this approach, we develop a utility-based real options model to analyze an agent’s interdepen-
dent real investment, consumption, and portfolio choice decisions. We derive semi-closed-form
solutions and analyze the solutions using both asymptotic expansion and numerical methods.
     We show that project volatility has both a positive and a negative effect on the implied
option value. The negative effect is induced by the precautionary savings motive. For the lump-
sum payoff case, risk aversion accelerates investment. Unlike in standard real options analysis,
an increase in project volatility can accelerate investment if the agent has a sufficiently strong
precautionary motive. We further extend our model to allow for the opportunity to hedge. We
show that hedging reduces the agent’s exposure to idiosyncratic risk, and hence raises the option
value. In addition, hedging allows the decomposition of total project volatility into systematic
volatility and idiosyncratic volatility. Idiosyncratic volatility generates an idiosyncratic risk
premium. Finally, we analyze settings where investment payoffs are given in flow terms over
time. Unlike in standard real options analysis, here the lump-sum and flow payoff cases have
different implications. Because the precautionary savings effect matters both before and after
investment in the flow payoff case, many predictions in this case differ from and can even be
opposite to those in the lump-sum payoff case.
     In order to analyze the effect of uninsurable idiosyncratic risk on investment in the simplest

                                                29
possible setting, we have intentionally ignored the wealth effect by adopting CARA utility.
However, the wealth effect can potentially play an important role for quantitative assessment
in settings such as entrepreneurship. We leave the incorporation of wealth effects to future
research. Finally, when entrepreneurs invest in nontradable projects, they often need to make
financing decisions jointly. For the real estate example, the construction and operating expenses
are often largely financed by mortgages. We analyze the interaction between investment and
financing decisions in Miao and Wang (2005).




                                               30
Appendices

A     Proofs

Proof of Proposition 1: From the first-order condition U 0 (c) = Vw (w, x) , we can derive
the consumption policy before the option exercise given in (11). Substituting it into the HJB
equation (5), we can show that G (x) satisfies the ODE (12). Given the functional forms
of the value functions, we can also show that the no-bubble, value-matching, and smooth-
pasting conditions become the boundary conditions in Proposition 1. By a standard dynamic
programming argument, one can show that V satisfies
                    ·Z τ                                   ¯                    ¸
                                                           ¯
   V (w, x) = max E      e U (Ct ) dt + e V (Wτ + Xτ − I) ¯¯ (W0 , X0 ) = (w, x) .
                          −rt            −rτ 0
                                                                                                            (A.1)
                 (τ,C)        0
                                                                                               0
Consider x < x0 . For X0 = x0 , let τ 0 be the optimal investment time and {Ct : 0 ≤ t ≤ τ 0 } be
the optimal consumption process before investment. Since V 0 is an increasing function and,
given any sample path,

                           Xτ 0 ≡ x + αx τ 0 + σx Wτ 0 < Xτ0 0 ≡ x0 + αx τ 0 + σx Wτ 0 ,

we have
Z τ0                                          Z                  τ0
      −rt
          ¡ 0¢     −rτ 0 0
                                                                            ¡ ¢           0   ¡                ¢
     e U Ct dt + e      V (Wτ 0 + Xτ 0 − I) <                         e−rt U Ct0 dt + e−rτ V 0 Wτ 0 + Xτ0 0 − I .
  0                                                          0

Taking conditional expectations yields
          "Z 0                                              ¯                    #
              τ       ¡   ¢          0                      ¯
        E       e−rt U Ct0 dt + e−rτ V 0 (Wτ 0 + Xτ 0 − I) ¯¯ (W0 , X0 ) = (w, x)
              0
            "Z                                                    ¯                    #
                  τ0         ¡   ¢             ¡                ¢ ¯             ¡     ¢   ¡     ¢
                                           0
      < E              e−rt U Ct0 dt + e−rτ V 0 Wτ 0 + Xτ0 0 − I ¯¯ (W0 , X0 ) = w, x0 = V w, x0 .
              0

Given the wealth dynamics described in Section 2.1, {Ct0 : 0 ≤ t ≤ τ 0 } and τ 0 are also feasible
for X0 = x. Thus, the left side of the above equation is less than or equal to V (w, x) by (A.1).
So, V (w, x) < V (w, x0 ) and V is increasing in x. Q.E.D.


Proof of Proposition 2: Without risk of confusion, we still use V 0 (w) and V (w, x) to
denote the value function after and before the option exercise, respectively, when the agent can
trade a risky asset. By a standard argument, V 0 satisfies the following HJB equation:

                                                                                     (πσe )2 0
            rV 0 (w) = max U (c) + [rw + π (µe − r) − c] Vw0 (w) +                          Vww (w) .       (A.2)
                            (c,π)∈R2                                                   2

                                                        31
                                      £              ¤
The transversality condition limT →∞ E e−rT V 0 (WT ) = 0 must also be satisfied. Given CARA
utility, one can follow Merton (1969) to derive the consumption and portfolio rules in (21)-(22)
and                                               ·   µ         ¶¸
                                            1               η2
                              V 0 (w) = −      exp −γr w +         .                              (A.3)
                                            γr             2γr2
   Before the option exercise, the value function V (w, x) satisfies the following HJB equation:

         rV (w, x) =        max U (c) + [rw + π (µe − r) − c] Vw (w, x) + αx Vx (w, x)            (A.4)
                        (c,π)∈R2

                                     σx2              (πσe )2
                                 +       Vxx (w, x) +         Vww (w, x) + πσe σx ρVwx (w, x) .
                                     2                  2
We conjecture that the value function V takes the form
                                         ·     µ            ¶¸
                                    1                   η2
                      V (w, x) = − exp −γr w + G(x) +          ,                                  (A.5)
                                   γr                  2γr2

where G(x) is a function to be determined. Using the first-order conditions,

                                             −Vw (w, x) µe − r −Vwx (w, x) ρσx
                 U 0 (c) = Vw (w, x) , π =                    +                ,                  (A.6)
                                             Vww (w, x) σe2     Vww (w, x) σe
one can derive the optimal consumption and portfolio policies before exercising the option
given in (23)-(24). Plugging these expressions back into the HJB equation gives (25). As in
Section 2, the boundary conditions are given by the no-bubble, value-matching, and smooth-
pasting conditions similar to (6)-(8). Using these boundary conditions, one can derive the
boundary conditions in Proposition 2. The rest of the proof follows a similar argument to that
in Proposition 1.   Q.E.D.


Proof of Proposition 3: We conjecture that the value function after the option exercise J
takes the following form:
                                              1
                               J(w, y) = −       exp [−γr (w + f (y))] ,                          (A.7)
                                              γr
where f (y) is a function to be determined. To solve for this function, we use the first-order
condition U 0 (c) = Jw (w, y) to derive the optimal consumption rule given in (37). Substitute it
back into the HJB equation (32) to derive the following ODE:

                                                 0
                                                    σy2 £ 00               ¤
                      0 = (y − rf (y)) + αy f (y) +      f (y) − γrf 0 (y)2 .                     (A.8)
                                                    2
It can be verified that its solution is given by (38). Moreover, it is such that the value function
                                                   £                ¤
satisfies the transversality condition limT →∞ E e−rT J (WT , YT ) = 0.

                                                     32
   We conjecture that the value function before the option exercise, V (w, y), takes the form
                                                1
                              V (w, y) = −         exp [−γr (w + g(y))] ,                            (A.9)
                                                γr
where g(y) is a function to be determined. From the first-order condition U 0 (c) = Vw (w, y) ,
we can derive the consumption policy before investment given in (39). Substituting it into the
HJB equation (33), we can show that g (y) satisfies the ODE (40). By a standard dynamic
programming argument, we can show that V satisfies
                      ·Z τ                                  ¯                    ¸
                                                            ¯
     V (w, y) = max E       −rt            −rτ              ¯
                           e U (Ct ) dt + e J (Wτ − I, Yτ ) ¯ (W0 , Y0 ) = (w, y) .                 (A.10)
                 τ,C      0

Since it follows from (A.7) that J is increasing and concave in y, we can show that V is also
increasing and concave in y. The rest of the proof follows from a similar argument to that in
Proposition 1. Q.E.D.


Proof of Proposition 4: Without risk of confusion, we still use J (w, y) and V (w, y) to
denote the value function after and before the option exercise, respectively, when the agent can
also trade a risky asset. By a standard argument, J (w, y) satisfies the HJB equation

         rJ (w, y) =     max U (c) + [rw + π (µe − r) + y − c] Jw (w, y) + αy Jy (w, y)             (A.11)
                        (c,π)∈R2

                                σy2              (πσe )2
                                   +Jyy (w, y) +         Jww (w, y) + πσe σy ρJwy (w, y) .
                                 2                 2
                                         £                 ¤
The transversality condition limT →∞ E e−rT J (WT , YT ) = 0 must also be satisfied. We con-
jecture that J (w, y) takes the following form:
                                            ·   µ            ¶¸
                                      1                  η2
                        J(w, y) = − exp −γr w + f (y) +         ,                                   (A.12)
                                     γr                 2γr2
where the function f is to be determined. By the first-order conditions,
                                               −Jw (w, y) µe − r −Jwy (w, y) ρσy
                 U 0 (c) = Jw (w, y) , π =                      +                ,                  (A.13)
                                               Jww (w, y) σe2     Jww (w, y) σe
we can derive the optimal consumption and portfolio policies after investment given in (53)-
(54). Substituting them back into the HJB equation (A.11), one can derive the solution for
f (y) given in (52). It can be verified that this solution satisfies the transversality condition.
   The value function before the option exercise, V , satisfies the following HJB equation:

         rV (w, y) =      max U (c) + [rw + π (µe − r) − c] Vw (w, y) + αy Vy (w, y)                (A.14)
                         (c,π)∈R2

                                       σy2              (πσe )2
                                   +       Vyy (w, y) +         Vww (w, y) + πσe σy ρVwy (w, y) .
                                       2                  2

                                                     33
We conjecture that the value function V takes the following form:
                                          ·     µ                  ¶¸
                                    1                          η2
                       V (w, y) = − exp −γr w + g(y) +                ,                     (A.15)
                                   γr                         2γr2

where g(y) is a function to be determined. Using the first-order conditions,

                                              −Vw (w, y) µe − r −Vwy (w, y) ρσy
                  U 0 (c) = Vw (w, y) , π =                    +                ,           (A.16)
                                              Vww (w, y) σe2     Vww (w, y) σe

one can derive the optimal consumption and portfolio policies before investment given in (50)-
(51). Plugging these expressions into the HJB equation gives a differential equation for g( · ).
The rest of the proof follows from a similar argument to that in Propositions 1 and 3.     Q.E.D.


B     Complete markets solution

To derive the complete-markets solution, we assume that the agent can trade an additional
                                                                               e Specifically,
risky asset that spans the idiosyncratic risk generated by the Brownian motion B.
                                                                         et , where σS is a
let the return of the second risky asset be given by dSt /St = rdt + σS dB
positive constant. Since idiosyncratic risk is by definition independent of market risk, this risky
asset yields an expected rate of return r and does not demand a risk premium by the CAPM.
Therefore, the implied unique stochastic discount factor ξ is given by −dξt /ξt = rdt + ηdBt
with ξ0 = 1, where η is the Sharpe ratio of the market portfolio.
    The agent’s joint consumption, investment, and asset allocation decision can then be for-
mulated as a two-stage problem with the agent (i) choosing an investment policy to maximize
the option value so that the agent’s total wealth is maximized and (ii) choosing optimal con-
sumption given this total wealth.
    We first derive the solution for the lump-sum payoff case. Using the unique stochastic
discount factor ξ, we can write the option value maximization problem as follows:
                                           ·           ¯       ¸
                                                       ¯
                                                       ¯
                            Φ (x) = max E ξτ (Xτ − I) ¯ X0 = x .                             (B.1)
                                        τ

By a standard argument, we can derive explicit expressions for the option value and the invest-
ment threshold,
                                                  1 λx (x−x∗ )
                                     Φ (x) =        e          ,                             (B.2)
                                                 λx
                                                      1
                                        x∗     = I+      ,                                   (B.3)
                                                      λx
                                   q
where λx = −σx−2 (αx − ρησx ) +     σx−4 (αx − ρησx )2 + 2rσx−2 > 0.

                                                   34
    For the flow-sum payoff case, we can similarly write the market option value as
                                         ·Z ∞                   ¯      ¸
                                                                ¯
                         Ψ(y) = max E          ξt Yt dt − ξτ I ¯¯Y0 = y .                 (B.4)
                                      τ       τ

By a standard argument, we derive the following explicit expressions for the option value and
the investment threshold:
                                             1 λy (y−y∗ )
                               Ψ (y) =          e         ,                               (B.5)
                                            rλy
                                                  αy − ρησy  1
                                  y∗      = rI −            + ,                           (B.6)
                                                      r      λy
                                  q
where λy = −σy−2 (αy − ρησy ) +    σy−4 (αy − ρησy )2 + 2rσy−2 > 0.
    We observe that, under complete markets, the lump-sum and flow payoff formulations are
mathematically equivalent, since we can discount cash flows using the unique stochastic discount
                                                ¡R ∞        ¢
factor ξ. Specifically, by defining Xt = ξt−1 Et t ξs Ys ds = F (Yt ) , we can show that the
problems (B.1) and (B.4) are equivalent. Thus, they deliver the same option value Φ (x) =
Ψ (y) and investment timing strategy. However, this equivalence fails when the investment
opportunity is not tradable and not spanned by existing traded assets.


C     Approximation method

To describe our approximation solution methodology, we sketch out the procedure for the self-
insurance model with a lump-sum payoff. Essentially identical procedures can be applied to
the models in Section 3 and 4. We divide the procedure into four steps.
                                                       ¡       ¢
   Step 1. Solve for the case with deterministic payoff σx2 = 0 . With σx = 0, risk attitude (γ)
does not affect the investment threshold. The implied option value G0 (x) and the investment
threshold x̄0 are both known in closed form and are given by
                                            ·              ¸
                                     αx        r
                        G0 (x) =        exp      (x − x̄0 ) , x ≤ x̄0 ,                   (C.1)
                                      r       αx
                                         αx
                            x̄0 = I +       .                                             (C.2)
                                          r
    Step 2. Consider small σx2 . Conjecture that the approximate option value and the investment
threshold are

                                G (x) ≈ G0 (x) + G1 (x) σx2 ,                             (C.3)
                                   x̄1 = x̄0 + δ1 σ 2 ,                                   (C.4)



                                                  35
where G0 (x) and x̄0 are solved in Step 1, and G1 (x) and δ1 are the coefficient function and the
coefficient to be determined.
     Step 3. Plugging the approximate solution (C.3) into the ODE (12) and boundary conditions
(13)-(14) and keeping the terms up to σx2 , we have the following:
                                            1          γr
                                αx G01 (x) + G000 (x) − G00 (x)2 = rG1 (x) ,                                         (C.5)
                                            2          2
subject to G1 (x̄1 ) = 0 and G01 (x̄1 ) = −rδ1 /αx . Note that unlike the original nonlinear ODE
(12) for G (x), we now have a free-boundary problem defined by a first-order ODE (C.5) for
G1 (x) with certain boundary conditions.
     Step 4. Solving the above differential equation gives our reported solution in (16) and
                           r               − αr (x̄0 −x)   γ h − αr (x̄0 −x)      − α2r (x̄0 −x)
                                                                                                   i
               G1 (x) =        (x̄0 − x) e     x         −    e x            −e      x                 , x ≤ x̄1 .
                          2αx2                             2

D       Computation method

We describe the solution method to the free-boundary problem described in Proposition 3.
The problems described in other propositions can be solved similarly. We use the projection
method implemented with collocation (Judd (1998)). The traditional shooting method or finite
difference method are inefficient for our nonlinear problem and extensive simulations.
     We first rewrite the second-order ODE (40) as a system of first-order ODEs. Let ∆ (y) =
g 0 (y) .   Then (40) can be rewritten as
                                            2
                                 ∆0 (y) =       (rg (y) − αy ∆ (y)) + γr∆(y)2 .                                      (D.1)
                                            σy2

The boundary conditions are

                                            lim g (y) = 0,                                                           (D.2)
                                          y→−∞
                                                  g (y) = f (y) − I,                                                 (D.3)
                                                 ∆ (y) = 1/r.                                                        (D.4)

Note that condition (D.2) states that when y goes to minus infinity, the agent never exercises
the investment option, and hence the implied option value is equal to zero.
     The idea of the algorithm is to first ignore the smooth-pasting condition (D.4) and then
to solve a two-point boundary value problem with a guessed threshold value y 0 . Since the
boundary condition (D.2) is open ended, we pick a very small negative number y and set
 ¡ ¢
g y = 0. The true value of the threshold is found by adjusting y 0 so that the smooth-pasting

                                                         36
condition (D.4) is satisfied. We then adjust y so that the solution is not sensitive to this value.
The algorithm is outlined as follows.
    Step 1. Start with a guess y 0 and a preset order n.
    Step 2. Use a Chebyshev polynomial to approximate g and ∆ :
                                         n
                                         X                              n
                                                                        X
                            g (y; a) =         ai Ti (y) , ∆ (y; b) =         bi Ti (y) ,              (D.5)
                                         i=0                            i=0

where Ti (y) is the Chebyshev polynomial of order i, and a = (a0 , a1 , ..., an ) and b = (b0 , b1 , ..., bn )
are 2n + 2 constants to be determined. Substitute the above expressions into the preceding sys-
tem of ODEs and evaluate it at n roots of Tn (y) . Together with the two boundary conditions,
we then have 2n + 2 equations for 2n + 2 unknowns a = (a0 , a1 , ..., an ) and b = (b0 , b1 , ..., bn ) .
                    a and bb.
Let the solution be b
                                                                       ³     ´
   Step 3. Search for y 0 such that the smooth-pasting condition, ∆ y 0 ; bb = 1/r, is approxi-
mately satisfied.




                                                        37
References

Abel, A., Eberly, J. 1994. A unified model of investment under uncertainty, American Eco-
    nomic Review 84, 1369-1384.

Arrow, K., 1968. Optimal capital policy with irreversible investment, in James N. Wolfe, ed.,
    Value, Capital, and Growth, Essays in Honor of Sir John Hicks, Edinburgh: Edinburgh
    University Press.

Berger, P, Ofek, E., Swary, I., 1996. Investor valuation of the abandonment option. Journal
    of Financial Economics 42, 257-287.

Bernanke, B, 1983. Irreversibility, uncertainty, and cyclical investment. Quarterly Journal of
    Economics 98, 85-106.

Bertola, G., Caballero, R., 1994. Irreversibility and aggregate investment. Review of Economic
    Studies 61, 223-246.

Black, F., Scholes, J., 1973. The pricing of options and corporate liabilities. Journal of
    Political Economy 81, 637-659.

Brennan, M., Schwartz, E., 1985. Evaluating natural resource investments. Journal of Business
    58, 135-57.

Caballero, R., 1991a. On the sign of the investment-uncertainty relationship. American
    Economic Review 81(1), 279-88.

Caballero, R., 1991b. Earnings uncertainty and aggregate wealth accumulation. American
    Economic Review 81(4), 859-71.

Campbell, J., Viceira, L., 2002. Strategic asset allocation: Portfolio choice for long-term
    investors. Oxford University Press, Oxford.

Carpenter, J., 1998. The exercise and valuation of executive stock options. Journal of Financial
    Economics 48, 127-58.

Cox, J., Huang, C., 1989. Optimal consumption and portfolio rules when asset prices follow a
    diffusion process. Journal of Economic Theory 49, 33-83.

Davis, S., Willen, P., 2002. Occupation-level income shocks and asset returns: their covariance
    and implications for portfolio choice. Working paper. University of Chicago.

                                              38
Deaton, A., 1991. Saving and liquidity constraints. Econometrica 59, 1221-48.

Detemple, J., Sundaresan, S., 1999. Nontraded asset valuation with portfolio constraints: A
    binomial approach. Review of Financial Studies 12, 835-72.

Dixit, A.,Pindyck, R., 1994, Investment Under Uncertainty. Princeton University Press Prince-
    ton, NJ.

Duffie, D., 2001. Dynamic Asset Pricing Theory. 3rd Ed., Princeton University Press Prince-
    ton, NJ.

Duffie, D., Fleming, W., Soner, H., Zariphopoulou, T., 1997. Hedging in incomplete markets
    with HARA utility. Journal of Economic Dynamics and Control 21, 753-782.

Dumas, B., 1991. Super contact and related optimality conditions. Journal of Economic
    Dynamics and Control 4, 675-685.

Friedman, M., 1957. A Theory of the Consumption Function. Princeton University Press
    Princeton, NJ.

Gentry, W., Hubbard, R., 2004. Entrepreneurship and household saving. Working paper.
    Columbia Business School, New York.

Grenadier, S., 1996. The strategic exercise of options: development cascades and overbuilding
    in real estate markets. Journal of Finance 51, 1653-1679.

Hall, B., Murphy, R., 2000. Optimal exercise prices for executive stock options. American
    Economic Review 90, 209-214.

Hall, R., 1978. Stochastic implications of the life cycle-permanent income hypothesis: theory
    and evidence. Journal of Political Economy 91, 249-65.

Heaton, J., Lucas, D., 2000. Portfolio choice and asset prices: The importance of entrepre-
    neurial risk. Journal of Finance 55, 1163-1198.

Henderson, V., 2005. Valuing the option to invest in an incomplete market. Working paper.
    Princeton University.

Hugonnier, J., Morellec, E. 2005. Real options and risk aversion. Working paper. University
    of Lausanne.



                                            39
Hugonnier, J., Morellec, E., 2007. Corporate control and real investment in incomplete mar-
    kets. Journal of Economic Dynamics and Control 31, 1781-1800

Judd, K., 1998. Numerical Methods in Economics. MIT Press Cambridge, MA.

Kahl, M., Liu, J., Longstaff, F., 2003. Paper millionaires: How valuable is stock to a stock-
    holder who is restricted from selling it? Journal of Financial Economics 67, 385-410.

Karatzas, I., Lehoczky, J., Shreve, S., 1987. Optimal portfolio and consumption decisions for
    a ‘small investor’ on a finite horizon. SIAM Journal of Control and Optimization 25,
    1157-86.

Kimball, M., 1990. Precautionary saving in the small and in the large. Econometrica 58,
    53-73.

Kogan, L., 2001. An equilibrium model of irreversible investment. Journal of Financial Eco-
    nomics 62, 201-45.

Koo, H., 1998. Consumption and portfolio selection with labor income: A continuous-time
    approach. Mathematical Finance 8, 49-65.

Krylov, N., 1980. Controlled Diffusion Processes Springer, Berlin.

Leahy, J., Whited, T., 1996. The effect of uncertainty on investment: Some stylized facts.
    Journal of Money, Credit and Banking 28, 64-83.

Leland, H., 1968. Saving and uncertainty: the precautionary demand for savings. Quarterly
    Journal of Economics 82, 465-73.

McDonald, R. Siegel, D., 1986. The value of waiting to invest. Quarterly Journal of Economics
    101, 707-728.

Merton, R., 1969. Lifetime portfolio selection under uncertainty: the continuous-time case.
    Review of Economics and Statistics 51, 247-257.

Merton, R, 1973. Theory of rational option pricing, Bell Journal of Economics and Manage-
    ment Science 4, 141-183.

Miao, J.,Wang, N., 2005. Entrepreneurial investment and financing decisions under uninsur-
    able idiosyncratic risk. Working paper. Boston University and Columbia University.



                                            40
Moel, A., Tufano, P., 2002. When are real options exercised? An empirical study of mine
    closings. Review of Financial Studies 15, 35-64.

Moskowitz, T., Vissing-Jorgensen, A., 2002. The returns to entrepreneurial investment: A
    private equity premium puzzle? American Economic Review 92(4), 745-778.

Quigg, L., 1993. Empirical testing of real option-pricing models. Journal of Finance 48,
    621-640.

Pindyck, R., 1988. Irreversible investment, capacity choice, and the value of the firm. Ameri-
    can Economic Review 78(5), 1110-48.

Svensson, L.,Werner, I., 1993. Nontraded assets in incomplete markets: Pricing and portfolio
    choice. European Economic Review 37, 1149-1168.

Titman, S., 1985. Urban land prices under uncertainty. American Economic Review 75,
    505-14.

Viceira, L., 2001. Optimal portfolio choice for long-horizon investors with nontradable labor
    income. Journal of Finance 56, 433-70.

Wang, N., 2003. Caballero meets Bewley: The permanent-income hypothesis in general equi-
    librium. American Economic Review 93(3), 927-936.

Wang, N., 2004. Precautionary saving with partially observed income. Journal of Monetary
    Economics 51(8), 1645-1681.

Wang, N., 2006. Generalizing the permanent-income hypothesis: Revisiting Friedman’s con-
    jecture on consumption. Journal of Monetary Economics 53(4), 737-52.

Williams, J.,1991. Real estate development as an option. Journal of Real Estate Finance and
    Economics 4, 191-208.

Williams, J., 2001. Agency, ownership, and returns on real assets. Working paper. Professors
    Capital, Solana, CA.

Zeldes, S., 1989. Optimal consumption with stochastic income: Deviations from certainty
    equivalence. Quarterly Journal of Economics 104, 275-298.




                                             41
              6




              5




              4
  G(x), x−I




              3




              2
                                                         G(x)→           ←x−I




              1




              0
              −4   −2   0    2       4       6       8      10      12          14   16
                                                 x

Figure 1: Implied option value G (x). This figure plots the functions x − I and G (x) for
the model in Section 2. The parameter values are set as follows: interest rate r = 2%, drift
αx = 0.1, volatility σx = 20%, and investment cost I = 10. The solid curve is for the risk
aversion parameter γ = 1, and the dashed curve is for the risk aversion parameter γ = 25.




                                            42
                            15.3

                           15.25

                            15.2
    Investment Threshold




                           15.15

                            15.1

                           15.05

                             15

                           14.95

                            14.9

                           14.85
                            0.25
                                   0.2                                                  15
                                         0.15
                                                                                   10
                                                     0.1
                                                σx         0.05            5   γ
                                                                  0   0


Figure 2: Investment threshold, risk aversion, and project volatility. This figure plots
the investment threshold at varying levels of the risk aversion parameter γ and volatility σx
for the lump sum payoff case. Other parameter values are set as follows: interest rate r = 2%,
drift αx = 0.1, and investment cost I = 10.




                                                                      43
                            2.5


                             2
     Investment Threshold




                            1.5


                             1


                            0.5


                              0
                            0.3
                                  0.25                                                           2
                                         0.2                                               1.5
                                                    0.15                           1
                                                           0.1               0.5
                                               σy                                      γ
                                                                 0.05   0


Figure 3: Investment threshold, risk aversion, and project volatility. This figure plots
the investment threshold at varying levels of the risk aversion parameter γ and volatility σy
for the flow payoff case. Other parameter values are set as follows: interest rate r = 2%, drift
αy = 0.1, and investment cost I = 10.




                                                                        44
                     350




                     300




                     250




                     200
                                                                 γ=0.1→
      g(y), f(y)−I




                     150                                                   γ=1→



                     100




                      50




                      0
                      −10   −9   −8   −7   −6   −5    −4   −3   −2    −1      0   1   2
                                                       y


Figure 4: Impact of changes in risk aversion γ in the flow payoff case. This figure plots
the impact on g (y) and f (y) when the value of γ is increased from 1 to 2. Other parameter
values are set as follows: interest rate r = 2%, drift αy = 0.1, volatility σy = 30%, and
investment cost I = 10.




                                                     45
