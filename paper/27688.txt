                               NBER WORKING PAPER SERIES




WHAT DETERMINES SCHOOL SEGREGATION? THE CRUCIAL ROLE OF NEIGHBORHOOD
                             FACTORS

                                       Gregorio S. Caetano
                                        Hugh Macartney

                                       Working Paper 27688
                               http://www.nber.org/papers/w27688


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                    August 2020




 We would like to thank Patrick Bayer, Charles Clotfelter, Richard Disalvo, David Slichter, Maisy
 Wong, participants at the Society of Labor Economists annual meeting, NBER Summer Institute,
 Urban Economics Association annual meeting and APPAM Fall Research Conference, and
 anonymous referees for helpful comments and suggestions. Robert Dominy provided excellent
 research assistance. Caetano acknowledges support from the Bonbright Center at the University
 of Georgia. All remaining errors are our own. The views expressed herein are those of the authors
 and do not necessarily reflect the views of the National Bureau of Economic Research.

 NBER working papers are circulated for discussion and comment purposes. They have not been
 peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
 official NBER publications.

  2020 by Gregorio S. Caetano and Hugh Macartney. All rights reserved. Short sections of text,
 not to exceed two paragraphs, may be quoted without explicit permission provided that full
 credit, including  notice, is given to the source.
What Determines School Segregation? The Crucial Role of Neighborhood Factors
Gregorio S. Caetano and Hugh Macartney
NBER Working Paper No. 27688
August 2020
JEL No. I21,J15,R23

                                        ABSTRACT

We develop a novel strategy to identify the relative importance of school and neighborhood
factors in determining school segregation. Using detailed student enrollment and residential
location data, our research design compares differences in student composition between adjacent
Census blocks served by different schools to analogous differences between those schools. Our
findings indicate that neighborhood factors explain around 62% of racial segregation and 44% of
economic segregation across all schools, playing an even more pronounced role in urban areas,
where school segregation has been especially acute. These findings suggest that the involvement
of urban planners is essential when attempting to confront inequality of opportunity through
education.


Gregorio S. Caetano
University of Georgia
618 Holman Ave
Athens, GA 30606
gregorio.caetano@uga.edu

Hugh Macartney
Duke University
Department of Economics
239 Social Sciences Building
Box 90097
Durham, NC 27708
and NBER
hugh.macartney@duke.edu
1     Introduction
Widespread and rising socioeconomic inequality continues to be a pressing concern in the
United States and abroad. School segregation has received particular attention as a way to
address disparities in opportunity, with ample evidence that school segregation widens the
socioeconomic gap in achievement, attainment, college attendance, incarceration, health, and
earnings (Guryan 2004; Hanushek, Kain and Rivkin 2009; Johnson 2011; Billings, Deming
and Rockoff 2014).
    Nearly three decades ago, following one of the most ambitious attempts of the twentieth
century to reduce inequality in the United States, the era of court-ordered desegregation came
to a close. Not surprisingly, school segregation rose substantially as a result (Clotfelter, Ladd
and Vigdor 2008; Lutz 2011). This reversal in policy was based, in no small part, on the belief
that school choice reforms (e.g., allowing for magnet and charter schools) and compensatory
redistribution of school resources could achieve a similar end without curtailing parental
schooling decisions.
    In recent years, school choice reforms have seen increased adoption in the United States,
though students continue to attend their assigned neighborhood school in the vast majority
of cases. At the same time, federal programs (such as Title I), as well as many state and local
initiatives, have helped reduce the gap in spending across schools (Cascio and Reber 2013).
Yet school segregation has remained stubbornly pervasive, even in urban areas (Orfield et al.
2014), where school choice reforms have been disproportionately embraced.
    One seldom explored reason why education policies have been ineffective at reducing
school segregation is its potential first-order dependence on non-school factors, given their
likely importance for residential sorting under the traditional school choice paradigm. In-
tuitively, a household's decision about where to reside depends on both school and neigh-
borhood amenities, the latter of which being less influenced by education policy, or not at
all. Examples of neighborhood amenities include the quality of parks, prevalence of walk-
able streets, age and style of dwellings, and availability of nearby desirable venues (Jacobs
1961; Glaeser, Kolko and Saiz 2001). Such features tend to vary particularly intensely across
neighborhoods within high density cities.


                                               1
    The potential for non-school (neighborhood) factors to affect school segregation is best
understood by way of example. Consider the case in which two otherwise similar schools
differ according to some pre-existing natural neighborhood amenity. For instance, suppose
the attendance area of one school contains a picturesque lake, while the other does not.
Further, let affluent families care more about residing near the lake than non-affluent families.
As a result, the socioeconomic composition of the schools would differ entirely because of
neighborhood factors, as the school near the lake would attract more affluent students.
    The initial difference due to the lake may then beget additional differences. For instance,
the influx of affluent households could lead to further sorting of affluent households if they
prefer to reside near similar households. It could also lead to gentrification, in which more
desirable venues (e.g., restaurants, retail shops), higher quality buildings and walkable streets
arise to cater to demand. Such amenities might spur even more sorting, which could result
in additional desirable amenities, and so on. Many other positive feedback loops like these
could arise, which would result in increased segregation. Some may in turn lead to an
interaction between neighborhood and school factors: for example, the school near the lake
might respond to the influx of affluent households by altering its features to appeal to its
student body, giving rise to school differences that drive further sorting and set yet more
positive feedback loops in motion (in this case, attributable to school factors).
    In this article, we identify the relative importance of school and neighborhood factors in
determining socioeconomic segregation patterns across schools. Our research design builds
on the key insight from Black (1999) that houses located sufficiently close to each other but
served by different schools should share neighborhood features. Thus, with the exception of
differential school factors, households should be indifferent between residing within adjacent
blocks on opposite sides of the boundary separating the schools. We adapt this idea to
address our research question by comparing the socioeconomic composition between two
adjacent Census blocks assigned to different attendance areas. Any systematic difference
in the composition between those blocks must arise as a result of a disparity in the local
provision of school features that are valued heterogeneously along socioeconomic lines. We
draw upon this logic to estimate the degree to which the difference in composition between
two schools sharing a boundary (which depends on both school and neighborhood factors)


                                               2
predicts the difference in composition between the two associated adjacent blocks at the
boundary (which depends only on school factors).
    Our approach sidesteps important endogeneity concerns raised in the literature. For
instance, a major issue noted by Bayer, Ferreira and McMillan (2007) in the context of the
boundary approach is that endogenous residential sorting due to original differences in school
amenities at the boundary may lead to further local differences in house prices. While, in
the standard context, this observation implies that one needs to control for these differences
in local amenities, the issue does not apply to our analysis. Indeed, under our approach,
any discontinuous change in student socioeconomic composition across the boundary is by
definition attributable to school factors.
    Critically, such factors represent not only original differences in school features, but
also any differences that arise from household sorting in response to differences in those
features. These include changes via positive feedback loops that are initiated by school
factors (analogous to the discussion above). Returning to our example, school differences
that cause more affluent neighbors to sort into the attendance area with the lake could
cause a differential investment in housing across the boundary if affluent families take better
care of their houses. In turn, if more affluent families disproportionately value residing
near houses that are well cared for, then additional sorting would ensue, leading to further
segregation. Under our approach, all such effects would contribute to the school (rather than
neighborhood) component of school segregation.
    Another strength of our approach is that it does not require the researcher to observe all
relevant school and neighborhood characteristics. Since it only uses information about the
socioeconomic composition of boundary blocks and schools, the approach is agnostic about
whether features are observed or unobserved, picking up both sources of variation. This is
particularly valuable as school features may be disproportionately observed by researchers,
relative to neighborhood features.
    We implement our research design using rich data on the socioeconomic status of North
Carolina students, the schools that they attend and the blocks in which they reside. We
report results by student race and economic advantage across all school attendance area
boundaries in the state. We also stratify the results according to whether the schools of


                                              3
interest are located in an urban area, and according to the grade level of the schools.
    Our analysis reveals that neighborhood features explain about 62% of school racial seg-
regation and 44% of school economic segregation. These percentages are larger in urban
areas (72% and 65%, respectively) than in non-urban areas (57% and 23%, respectively).
As mentioned, we hypothesize this occurs because the density of neighborhood features to
choose from is greater (relative to school features) in urban areas. Indeed, it is easy to
enumerate many non-school features that may differ from one block to the next in urban
areas, such as restaurants, coffee shops, museums, retail stores, green spaces, public spaces,
street width, through traffic, lot size, parking, public transit and proximity to a zoned area
(Turner, Haughwout and Van Der Klaauw 2014). In contrast, these features are perceived
to be more similar from one block to the next in non-urban areas, as non-urban residents
tend to use cars as their primary mode of transportation.
    We also find that neighborhood features tend to play a larger role in later grades than
in earlier grades. We speculate this is due to the fact that households with students in high
school have a smaller number of options to choose from regarding school features (given
larger attendance areas) but face the same set of options in terms of neighborhood features.
    In addition, the evidence indicates that the way in which school and neighborhood factors
affect school segregation is positively correlated: attendance areas with neighborhood factors
that tend to attract affluent students also include school factors that tend to attract affluent
students. Thus, feedback loops originally arising from neighborhood factors are reinforced
by those arising from school factors, and vice-versa, resulting in greater segregation than
without this interaction. Our results suggest that the positive correlation between school
and neighborhood factors accounts for about half of the school segregation that occurs by
race and income, in both urban and non-urban areas.
    Our findings suggest that, in the absence of top-down reassignment policies that constrain
individual choice, education policymakers are considerably more limited in their ability to
affect school segregation than previously thought. A nontrivial portion of school segregation
is subject to neighborhood factors, particularly in urban settings. Consequently, any attempt
to lower segregation across schools will be more successful with the engagement of urban
planners, irrespective of the existing education policy landscape. This is particularly true


                                               4
in the face of technological and environmental upheaval (Glaeser 2011), which may grant
planners more latitude in their future urban design ambitions.
        The remainder of this article is organized as follows: The next section sets out our
empirical framework, Section 3 describes the data used in our analysis, and Section 4 presents
our results. Section 5 explores and rules out several potential validity concerns associated
with our research design, and Section 6 addresses considerations regarding the sources of
variation we exploit. Section 7 then interprets our results through the lens of a dynamic
model, and Section 8 concludes.


2        Empirical Framework
In this section, we first set out a model of the demand for school and neighborhood amenities.
We then exploit it to identify the relative importance of school and neighborhood factors in
explaining the degree of segregation across schools.


2.1        A Model of School and Neighborhood Choice

Our framework is based upon a model of households jointly choosing their school and neigh-
borhood. The term "neighborhood" refers to a Census block, which we shorten to "block"
for convenience. Each block k is uniquely associated with one attendance area (and thus to
one school) s, where we use Ks to denote the set of blocks associated with s. This implies
that each household chooses the block in which it will reside, with the understanding that
it is selecting both the school and neighborhood amenities to which it will be exposed.
        Specifically, each household h of type   {A, B } (e.g., white and non-white, or advan-
taged and disadvantaged) observes the vector of school-related amenities S = [S1 , . . . , SK ]
and the vector of neighborhood-related amenities N = [N1 , . . . , NK ] , where k indexes the K
neighborhoods in their choice set (each of which is assigned to a school indexed by s).1 Each
    1
    For expositional simplicity, we assume that blocks can be different in the values of only one school
amenity and only one neighborhood amenity. In practice, blocks differ from each other because of many
school and neighborhood amenities, so that S and N should be understood as indices of all corresponding
amenities. Moreover, some amenities inherently conflate school and neighborhood amenities, such as the
block average house price. In that case, the component of the price that capitalizes school amenities is
included in the index S, and the component that capitalizes neighborhood amenities is included in the index
N.


                                                    5
household selects the option that maximizes its utility:

                                     uh,               h,
                                      k = S Sk + N Nk +k ,                                (1)
                                                   k

                                                                                        h,
where k corresponds to the mean utility of households of type  for neighborhood k , and k
is an idiosyncratic error term that captures household-specific deviations from that mean.
The mean utility depends on the preference parameter scalars       
                                                             S and N , each of which

depends on the household's type  .
                                                                h,
   As is standard in discrete choice frameworks, we assume that k  is independently and
identically drawn from the extreme value distribution. This yields the familiar expression
for the proportion of students residing in neighborhood k who are of type A:

                                                     nA
                                                      k
                                            k =            ,
                                                  nA
                                                   k +  nB
                                                         k

                  exp(k)
where n     
       k = n     ~ exp  )
                        (~
                             and n is the total number of type- students across all blocks.
                  k      k
                                                   
   Under the normalization          ~
                                    k       ~ ) = n , we have:
                                        exp(k

                                           A
                                     exp(k   )
                      k =            A         B
                                 exp(k ) + exp(k )
                                           exp(A       A
                                               S Sk + N Nk )
                             =                                         .                  (2)
                                 exp(A       A           B      B
                                     S Sk + N Nk ) + exp(S Sk + N Nk )


Similarly, the proportion of students attending school s who are of type A is:

                            nA
                             s
                  s =
                         nA
                          s +  nB
                                s
                                            A
                                      exp(k
                                    kKs       )
                     =                A         B
                             kKs [exp(k ) + exp(k )]
                                                A       A
                                      kKs [exp(S Sk + N Nk )]
                     =                A       A           B
                                                                             .            (3)
                             kKs [exp(S Sk + N Nk ) + exp(S Sk   + B
                                                                   N Nk )]



2.2    Defining the Estimand

Our goal is to identify the relative importance of school factors in explaining school seg-
regation. Before doing so, it is important to define what we mean by "school factors,"

                                                   6
"neighborhood factors," and "school segregation" in the context of our framework.
       Notice that equation (2) implies

                            k          A   B
                     ln              = k - k = A   B      A   B
                                               S - S Sk + N - N Nk .
                          1 - k
The difference in this measure across any two blocks k and k is then

                     k                   k                  k (1 - k )
              ln              - ln                 = ln                = Sk,k + Nk,k ,                        (4)
                   1 - k               1 - k                k (1 - k )
where Sk,k := Sk - Sk = A   B                                  A   B
                        S - S (Sk - Sk ) and Nk,k := Nk - Nk = N - N (Nk -

Nk ).2 The term Sk,k represents the component of the gap between k and k that is due
to "school factors," which jointly arises from a difference in school amenities (Sk - Sk ) and
an across-group difference in the preferences over those amenities (A   B
                                                                    S - S ). Analogously,

the term Nk,k represents the component of the gap between k and k that is due to
"neighborhood factors," which depends on the difference in neighborhood amenities (Nk -
Nk ) and the across-group difference in preferences over those amenities (A   B
                                                                          N - N ).

       The distinction between S and N is at the heart of our identification strategy, which will
be made explicit in the next subsection. The key difference between them is that school-
related amenities are uniform across blocks served by the same school, while neighborhood-
related amenities need not be. The first part of this statement is made precise by the
following assumption:

Assumption 1. Sk = Ss  k  Ks .

The rationale behind this identifying assumption is that all school-aged children are entitled
to attend the public school to which their residence is assigned, and in the case of North
Carolina the vast majority of them do so.3 Consequently, the school amenity is uniform across
blocks served by the same school, since the benefits of school amenities can be identically
realized irrespective of where within the attendance area a student resides.4 In contrast, the
   2
     These expressions arise from the following definitions: Sk := A          B                  A
                                                                        S - S Sk and Nk := N - N Nk .
                                                                                                        B
   3
     The exceptions to this rule are students who attend private, charter or magnet schools, or those who
receive home schooling. As discussed in Section 3, charter and magnet schools account for a very small
fraction of public school enrollment in our setting; and, in addition, the degree of home schooling is negligible.
In our framework, private schools contribute to neighborhood factors, but only insofar as the distance between
the student's residence and the private school is salient.
   4
     Some other public goods are likely to ensure that students residing in different areas of the attendance


                                                        7
consumption of neighborhood amenities is more optional, often depending on their distance
from a student's residence. For example, on average, those residing near a park will likely
enjoy it more frequently than those residing far from it.
    It is worth noting that Assumption 1 is actually stronger than necessary for identification
to hold.5 A key situation in which Assumption 1, or even its weaker variant, would fail is
if households were heterogeneous in their preferences with respect to the distance between
their residence and the school their child attends. In Section 5.2, we show that this is not a
first-order concern in our context.
    For the school-level comparison analogous to equation (4), we apply Assumption 1 to
equation (3), obtaining

               s
       ln               = A   B
                          S - S Ss + ln                    exp(A
                                                               N Nk )     - ln          exp(B
                                                                                            N Nk )      .
             1 - s                                  kKs                           kKs


Defining Ns := ln         kKs   exp(A
                                    N Nk ) - ln            kKs   exp(B
                                                                     N Nk ) and Ns,s := Ns - Ns , we

can compare the two schools s and s (corresponding to block k and k , respectively):

                      s                  s                 s (1 - s )
              ln               - ln               = ln                = Ss,s + Ns,s .                        (5)
                    1 - s              1 - s               s (1 - s )
                                                                                                s (1-s )
    Using variation across all boundaries contained in our sample, var ln                       s (1-s )
                                                                                                              =
var(Ss,s + Ns,s ) provides a natural measure of school segregation. It is equal to zero if
s = s for any two schools s and s , and it tends to grow as the gap in composition between
school pairs increases. In terms of the model notation, within-pair differences only arise if two
conditions are satisfied along at least one dimension (i.e., S , N ). For the school dimension,
the conditions are: (i) types differ in preferences over school amenities (A   B
                                                                           S = S ); and (ii)

schools differ in the level of school amenities (Ss = Ss ). For the neighborhood dimension, the
conditions are: (i') types differ in preferences over neighborhood amenities (A   B
                                                                              N = N ); and

(ii') schools differ in their neighborhood amenity (               kKs   exp(N Nk ) =        kKs   exp(N Nk )

zone have equitable access to the school. For instance, free school busing is a form of public good that is
enjoyed more by those residing further from the school, partially compensating for their longer commute to
the school.
    5
      Identification still holds if Assumption 1 is weakened to the following: Sk1 = Ss + errork1 , where errork1
is uncorrelated with s (across all schools), and k1 is a boundary block, defined in the next subsection. In
words, the discontinuity we find at the boundary is representative of the overall change in school amenities.
We use the more straightforward Assumption 1 for notational simplicity.



                                                       8
for   {A, B }).
      Our goal is to identify the relative role of Ss,s and Ns,s in explaining total variance

            var(Ss,s + Ns,s ) = var(Ss,s ) + var(Ns,s ) + 2  cov (Ss,s , Ns,s ) .                             (6)

We define the relative role of Ss,s as

                                    var(Ss,s ) + cov (Ss,s , Ns,s )
                      S :=                                                     ,                               (7)
                              var(Ss,s ) + var(Ns,s ) + 2  cov (Ss,s , Ns,s )
and the relative role of Ns,s as N := 1 - S .
      Given the definition above, the covariance term cov (Ss,s , Ns,s ) may play an impor-
tant role in explaining school segregation. It will be positive if school amenities that attract
a disproportionate number of students of a given type are located near neighborhood ameni-
ties that attract a disproportionate number of students of that same type. As discussed
in Remark 1, that is the case in the context of this article, implying that S is bounded
between 0 and 1, and allowing us to interpret it as a proportion.
      Note that the definition of S attributes half of the covariance term to school factors,
and the other half to neighborhood factors. This is an arbitrary attribution. In Section 7, we
offer a theoretically sound method of attributing the covariance term, based on our estimate
of S . Prior to that discussion, however, we must explain our strategy for identifying and
estimating S , which we turn to next.


2.3       Identification Strategy

To identify the role of school and neighborhood factors in explaining school segregation, we
exploit block-level variation at the boundary between two school attendance areas. It is
helpful to visualize our approach using Figure 1. Consider two blocks, k1 and k1 , which are
adjacent to each other but served by different schools, s and s , respectively. Our research
design involves comparing how the proportion of students of a given type varies across the
boundary at the block level (from k1 to k1 ) to how it varies at the attendance area level
(from s to s ).6
  6
      Block k2 depicted in Figure 1 is used later to correct for a potential source of bias in our approach.



                                                        9
                                         Boundary


                                   School s                              School s
                                        s                                     s




                                       Block k2 Block k1 Block k1
                                          k 2        k1          k 1




                                  Figure 1: Visualizing Sources of Variation
     Notes : This Figure illustrates a specific boundary of the many we observe in the data. The key variables of
     interest are the proportions ( ) of students who are white or economically advantaged for blocks k2 , k1 and k1 ,
     along with the analogous proportions for the associated schools s and s . Blocks k1 and k1 are adjacent to each
     other but located in different attendance areas. Blocks k2 and k1 are adjacent to each other and located in the
     same attendance area s.




   A simple cross-boundary comparison of proportions is able to recover the relative im-
portance of each factor. In particular, consider the following regression equation:

                        k 1 1 - k 1                                    s (1 - s )
                   ln                        = log +  log  ln                    + error log .                          (8)
                        k1 (1 - k1 )                                   s (1 - s )

Substituting the expressions from equations (4) and (5), and applying Assumption 1 so that
Sk1 ,k1 = Ss,s , the regression can be equivalently expressed as

                    Ss,s + Nk1 ,k1 =  log +  log  [Ss,s + Ns,s ] + error log .                                          (9)


                                                           10
     The ordinary least squares (OLS) slope parameter in equation (9) is
                                        cov (Ss,s + Ns,s , Ss,s + Nk1 ,k1 )
             log = plim(^ log ) =                                                 .              (10)
                                    var(Ss,s ) + var(Ns,s ) + 2cov (Ss,s , Ns,s )

Thus, ^ log is a consistent estimator of S under the following identifying assumption:

Assumption 2. cov (Ss,s + Ns,s , Nk1 ,k1 ) = 0.

In words, the (highly local) difference in neighborhood factors between two adjacent blocks,
                                                                                      s (1-s )
Nk1 ,k1 , is uncorrelated with the school-level difference in composition, ln         s (1-s )
                                                                                                  :=
Ss,s + Ns,s .
     Applying Assumption 2 to equation (10), we have:

                                     cov (Ss,s + Ns,s , Ss,s )
                    log =
                           var(Ss,s ) + var(Ns,s ) + 2  cov (Ss,s , Ns,s )
                                 var(Ss,s ) + cov (Ss,s , Ns,s )
                         =
                           var(Ss,s ) + var(Ns,s ) + 2  cov (Ss,s , Ns,s )
                         = S .                                                                   (11)

Intuitively, as one moves across the boundary from k1 in attendance area s to k1 in attendance
                                                                                 k1 1-k
area s , only school factors can systematically change the values of both ln               1
                                                                                                 and
                                                                                 k
                                                                                     1
                                                                                       (1-k1 )
     s (1-s )
ln   s (1-s )
                . Thus, under Assumption 2, the slope coefficient from the regression in equation
(10) represents the degree to which segregation across schools is explained by school factors.


Relaxing Assumption 2

While Assumption 2 may seem similar to the one often invoked in the boundary fixed effects
literature (see Black 1999, for instance), that is not the case. To see why, consider two blocks
k1 and k1 with initial differences in school amenities. Because of this initial difference, people
may sort, leading to further differences between the blocks (e.g., different neighbors, different
investments in housing). Under the boundary fixed effects approach, one is concerned with
identifying the effect on house prices of the initial difference in school features separately
from further sorting-based differences. In contrast, under our approach, it is unnecessary to
separately identify these two sources, as they are both attributable to school factors. More
formally, anything that affects the gap between k1 and k1 because of the difference in


                                                11
school amenities is attributed to Ss,s , and not to Nk1 ,k1 . This rules out concerns related
to post-determined differences at the boundary, but one may still be concerned about pre-
determined differences driving our results, such as major roads or rivers coinciding with a
boundary. Below, we relax the assumption to accommodate some of these concerns, and
Section 5.1 rules out remaining issues in detail.
       To better understand Assumption 2, consider the example depicted in Figure 2. For
simplicity, we interpret the figure in terms of race, but the intuition is analogous for income.
Each panel depicts a boundary along with its two associated attendance areas.7 In the middle
of each panel, we depict the boundary, with attendance area s to its left and attendance area
s to its right. In keeping with Assumption 1, school factors (represented by horizontal solid
lines Ss and Ss ) do not vary within attendance area. Neighborhood factors vary by block
(as illustrated by the curve denoted as Nk in each panel), and they can vary in unrestricted
ways depending on the specific amenities distributed across the blocks in the two attendance
areas as well as white and non-white preferences for those amenities.8 We also depict Ns
and Ns as dashed lines in each panel, representing the weighted average of all Nk within
each attendance area.
       For simplicity, assume that our sample consists of only the two boundaries depicted
in Figure 2. From the figure, note that Nk1 ,k1 = Nk1 - Nk1 is negative in Panel (a)
and positive in Panel (b) (this is inferred by inspecting the slope of the Nk curve at the
boundary in each case), which implies that cov (Ss,s + Ns,s , Nk1 ,k1 ) = 0. Departing
from this simple example, it is clear that this assumption might fail to hold in practice:
indeed, the slope at the boundaries must be just so in order for the covariance to equal zero.
In general, cov (Ns,s , Nk1 ,k1 ) is likely to be positive (as is the case for Panel (a)), and
cov (Ss,s + Ns,s , Nk1 ,k1 ) will also be positive if cov (Ss,s , Ns,s ) > 0.9
   7
      Unless stated otherwise, we use "boundary" as shorthand to denote a geographical dividing line between
two schools that is associated with a specific block pair (k1 , k1 ). Indeed, in the data, we observe many
different boundaries for the same pair of attendance school areas (s, s ).
    8
      Distance from the amenity may play an important role for these heterogeneous preferences too. For
instance, the Nk curve in Panel (a) is consistent with a situation in which there exists only one salient
neighborhood amenity (e.g., a park) located in the far right of attendance area s , and whites prefer residing
close to it more than non-whites do, though at slightly varying degrees depending on the distance.
    9
      Note that cov (Ss,s , Ns,s ) > 0 in this example: attendance areas with school amenities that attract
a disproportionate number of white students tend to also feature neighborhood amenities that attract a
disproportionate number of white students, and vice-versa.


                                                     12
                           Boundary                                                          Boundary
                                                           Nk
                                                                                                                              Ss

                                                           Ns                                                                Nk

                                                                                                                             Ns

 Ns                                                                  Ns
                                                           Ss
                                                                     Ss
 Ss

                           k2 k1 k1                                                          k2 k1 k1



                  s                         s                                       s                         s

                       (a) Boundary 1                                                    (b) Boundary 2
                                 Figure 2: Understanding Assumptions 2 and 2
      Notes : This figure shows, for two different boundaries (each depicted in one of the panels), how school and neigh-
      borhood factors vary across blocks. In the middle of each panel, we depict the boundary separating attendance
      areas s and s . The horizontal axis represents the blocks in both attendance areas, and the vertical axis represents
      the school and neighborhood factors, S and N . The dashed lines represent the weighted average of Nk across all
      blocks within the attendance area, denoted as Ns and Ns depending on the attendance area. We highlight three
      blocks closest to the boundary: k2 , k1 and k1 , as also described in Figure 1.



      To relax Assumption 2, we appeal to an alternative block-level comparison, which is also
highlighted in Figure 2. Consider block k2 , which is adjacent to block k1 and is served by
the same school s, and the analogous measure of the difference in proportion between these
                k (1-k )
two blocks: ln  2 1- 1 . This difference does not systematically depend on the school
                 k1 (  k2 )

component, since both blocks are contained within the same attendance area. Thus, the OLS
estimator of the slope coefficient of the analogous regression to equation (10) (by regressing
    k (1-k )            (1-s )
ln  2 1- 1 on ln s (1-           ) is:
     k1 ( k2 )          s     s)




                      log                     cov (Ss,s + Ns,s , Nk2 ,k1 )
                      placebo =                                                     .                                        (12)
                                      var(Ss,s ) + var(Ns,s ) + 2cov (Ss,s , Ns,s )

      We propose the following alternative to Assumption 2:

Assumption 2 . cov (Ss,s + Ns,s , Nk1 ,k1 ) = cov (Ss,s + Ns,s , Nk2 ,k1 )

A sufficient condition for this assumption to hold is for N to vary around the boundary in a
linear fashion from k2 to k1 (i.e., in Figure 2, the portion of the Nk curve from k2 to k1 must
have the same slope as the portion of the Nk curve from k1 to k1 ). Given the close proximity
of blocks k2 and k1 (with only block k1 separating them), we view this local approximation as

                                                                13
plausible. One potential issue, which we consider in detail in Section 5.1, is that attendance
boundaries may separate neighborhoods beyond their school allocation (e.g., due to a major
road or river). In that case, the slope from k2 to k1 may be systematically different than
the slope from k1 to k1 , leading us to attribute to S some of the effect that is due to N . In
practice, we find no evidence that this occurs in enough boundaries for that to be a concern.
       Under Assumption 2 , we form the corrected estimator of S as:

                                          log           log
                                          S   :=  log - placebo ,                                    (13)

                                           log
where  log is defined by equation (10) and placebo is defined by equation (12). Under As-
sumptions 1 and 2 , ^ log is a consistent estimator of S .
                     S




2.4       A Feasible Estimator

It is important to note that estimating   ^ log depends on being able to properly measure
                                           S
     k1 1-k             k  (1 -  k  )
ln  1- 1 and ln  2 1- 1 . In practice, for any block k , rather than observing the
      k1 ( k1 )         k1 (     k2 )

population proportions k , we are only able to obtain sample analogues, which are measured
with error (^
            k = k +            k ).   While exploiting variation across highly local blocks makes
Assumption 2 more plausible, blocks are very small geographic units in which few school-age
children tend to reside, making the effect of measurement error more pronounced and making
                                                                                            ^k1 1-
                                                                                                  ^k
it more likely that ^k = 0 or ^k = 1, even if 0 < k < 1.10 In such cases, ln                         1
                                                                                            ^k
                                                                                              1
                                                                                                (1-^k1 )

           ^k2 (1-
                  ^k1 )
and ln                    would be undefined and thus the estimation of ^ log would be infeasible.
           ^k1 (1-
                  ^k2 )                                                  S

       To address this concern, we draw upon a linear approximation that retains our inter-
pretation of the slope parameter in the presence of measurement error. In Appendix A,
and also in the Monte Carlo simulations in Appendix B, we show that the slope  from the
linear-on-linear regression

                                      k1 ,k1 =  +   ^
                                      ^              s,s + error                                     (14)

(for which the quantities are defined for all observations), provides a very good approximation
of the log-on-log slope  log from equation (8). This is also true for the placebo versions from
  10
    For instance, if the population proportion is 70% and we observe only one student in a block (as is a
frequent occurrence in our data), the block proportion can only take the value 0 or 1, rather than 0.7.


                                                    14
these equations: the slope estimator obtained from the regression

                          k2 ,k1 = placebo + placebo  ^
                          ^                            s,s + errorplacebo .                               (15)
                                                  log
is approximately the same as the log-on-log slope placebo from equation (12).
       Based on the concordance between the linear-on-linear and log-on-log regressions, we
henceforth refer to the specifications in equations (14) and (15) when discussing and esti-
mating the effect of school factors on school segregation.


3       Data
To determine the extent to which school and neighborhood factors drive school segregation,
we draw upon rich administrative data provided by the North Carolina Education Research
Data Center (NCERDC), focusing on the 2011-12 school year.11 The dataset contains de-
tailed longitudinal information covering all third through twelfth grade students who attend
North Carolina public schools, including their grade, race, an indicator for economic advan-
tage,12 the school they attend and, crucially for our research design, their Census block of
residence.13 While students are classified as being white, black, Hispanic, Asian, American
Indian or of mixed race, we choose to concentrate on white versus non-white students for
our analysis of segregation along racial lines. We use the indicator of economic advantage to
investigate segregation along economic lines.
       The data also include important information about each public school, such as its grade
span (i.e., the lowest and highest grade served) and location (both a latitude-longitude com-
bination and urban-suburban-rural classification). As discussed, each student is connected
to both a school and a Census block of residence. This feature of the data allows us to
discern the location of school boundaries by identifying boundary blocks that are adjacent
  11
     We have also carried out the analysis using data from 2009-10 and 2010-11 school years, obtaining similar
results in each case.
  12
     We define a student as economically advantaged if the student's household income is above 185% of the
federal poverty threshold, which is recorded in our data as not qualifying for a reduced-price lunch at school.
  13
     The Census block represents a very fine level of geography, encompassing between one and a few hundred
residents (with very large numbers usually due to apartment buildings in urban centers). For the 2011-12
school year, we know the Census block of residence for 93% of public school students. The match rate is fairly
uniform across grade spans, with coverage ranging from 91% for elementary grades to 94% for secondary
grades. We obtained data at the block level from a previously available version of the standard NCERDC
repository. The data has since been updated to only include block groups, but should be available via custom
request.

                                                      15
to each other but inferred (based on enrollment data) to be served by different schools in
the same district.14 It also allows us to determine the share of students within each school
and block that are of a particular type (e.g., white or economically advantaged).
       With these data in hand, we are able to implement our research design for different
student subsets of interest. Using the information about each student's grade and cross-
checking against school grade spans, we classify schools serving any third through fifth grade
students as elementary schools, those serving any sixth through eighth grade students as
middle schools and those serving any ninth through twelfth grade students as secondary
schools, presenting our results for each category. We also subdivide our results according to
whether schools serve urban or non-urban areas (i.e., suburban or rural). Our final estimation
sample is constructed by removing all magnet and charter schools, which do not strictly
adhere to the attendance area boundary system that we exploit.15 Thus, socioeconomic
proportions at the school and block level are calculated using only traditional public school
students.
       Descriptive statistics for our proportions of interest (i.e., white and economically advan-
taged) are reported in Table 1, along with information about the relevant dimensions (i.e.,
local boundary level, school level, and grade level). For each school-grade level, the average
proportions of white and economically advantaged students are reasonably similar across
boundary blocks and across school attendance areas and there is a large degree of variation
across both boundary blocks and schools (though, as one might expect, the variance is sub-
  14
     Geo-coded boundary information is only available for a small minority of North Carolina districts in the
2009-10 school year (and not at all for other years), via the School Attendance Boundary Information System
(SABINS). Motivated by this and the fact that we do not possess exact student addresses to understand
how actual boundaries divide some Census blocks, we restrict our analysis to boundary blocks that are not
bisected by attendance boundaries (i.e., blocks for which all students residing within are served by a single
school). Depending on the grade level, this covers between 67% and 71% of all boundary blocks. Interior
blocks (not adjacent to a block served by a different school) are unaffected by this restriction and are fully
retained in our sample. Whenever we drop a bisected block, we retain the boundary path containing it by
defining the non-bisected blocks adjacent to it as boundary blocks k1 and k1 , rather than blocks k2 and k2 .
Footnote 22 in Section 5.1 shows that this restriction does not affect our results.
  15
     In our data, magnet and charter schools account for about 5% and 3% of total public school enrollment,
respectively. While charter schools in North Carolina place no geographical restrictions on applicants (other
than requiring state residency), many magnet schools rely on a hybrid admission process that grants students
residing within a priority/walk zone the right to enroll before any lottery applicants are considered. As we do
not possess lottery information, we abstract from magnet and charter schools in our analysis. After dropping
them and recognizing that North Carolina does not feature open enrollment for the period of interest, our
sample contains only boundaries which are binding for schooling allocations.



                                                      16
                                          Table 1: Descriptive Statistics

                                               Elementary                 Middle                 Secondary
                                            Boundary   School        Boundary   School       Boundary   School

          Prop. white                          0.59          0.53      0.57         0.54       0.59         0.55
                                              (0.46)        (0.28)    (0.46)       (0.27)     (0.46)       (0.26)
          Prop. black                          0.23          0.25      0.26         0.26       0.26         0.29
                                              (0.39)        (0.23)    (0.41)       (0.22)     (0.41)       (0.24)
          Prop. economically advantaged        0.42          0.40      0.43         0.41       0.50         0.47
                                              (0.45)        (0.23)    (0.45)       (0.20)     (0.46)       (0.19)

          N - Students                       34,001        266,720    29,426       264,295    33,619       368,974

          All schools
             N - Schools                            1,093                   471                     518
             Avg. Students per school                244                    561                     712
             Avg. Blocks per school                   93                    205                     256
             N - Boundary block pairs              12,661                  9,256                   9,700

          Urban schools
            N - schools                             246                      92                     100
            Avg. Students per school                259                     669                     836
            Avg. Blocks per school                  100                     245                     315
            N - Boundary block pairs               2,105                   1,611                   1,469

          Notes : Standard deviations in parentheses. "Elementary," "Middle" and "Secondary" refer to schools
          serving third through fifth grade students, sixth through eighth grade students and ninth through
          twelfth grade students, respectively. "Urban schools" refers to the sample of school pairs in which
          both schools are located in urban areas.


stantially higher for blocks since they are geographically smaller). Regardless of the level,
the proportion of black students tends to be about half of the non-white proportion, with
the remainder consisting mostly of Hispanic students. The total number of students in our
sample is 266,720, 264,295 and 368,974 at the elementary, middle and high school levels, re-
spectively, and the number of students residing next to an attendance area boundary ranges
from 9 to 13 percent of the total. The number of schools serving elementary, middle and
secondary grades is 1,093, 471 and 518, respectively, approximately twenty percent of which
are located in an urban area.16 On a per-school basis, the average number of students is 244,
561 and 712, while the average number of blocks is 93, 205 and 256 (each corresponding to
elementary, middle and high schools, respectively). In terms of our unit of analysis, there are
between 9,256 and 12,661 boundary block pairs depending on the grade level, approximately
16% of which are located in urban areas.
  16
    The urban schools in our sample are located across about twenty cities in the state, with over 80% of the
schools located in (by descending share) Charlotte, Fayetteville, Greensboro, Raleigh, Durham, Winston-
Salem, Burlington, and Wilmington.




                                                             17
4      Results
In this section, we implement the approach detailed in Section 2.3 to estimate the relative
role of school features in explaining school segregation, both in terms of race (white vs.
non-white students) and income (economically advantaged vs. economically disadvantaged
students). To provide more intuition, we present estimates of both  and placebo , which
allow us to calculate the estimate of primary interest, ^ S := ^-^placebo .


4.1      All Schools

Our main results for race are presented in Panel (a) of Figure 3. The horizontal axis mea-
                                                                                   white
sures the difference in the proportions of white students between schools s and s (s,s   ),
while the vertical axis measures the difference in the proportions of white students between
                           white                                        white
boundary blocks k1 and k1 (k 1 ,k
                                  ). The scatter plot shows averages of k 1 ,k
                                                                               across all
                                                  1                                                                   1
                                                 white
boundaries with similar values of                s,s         (in increments of 2.5 percentage points). The line
represents the ordinary least squares fit of the disaggregated regression at the boundary block




       (a) Blocks in Different Attendance Areas                           (b) Blocks in the Same Attendance Area
             Figure 3: The Relative Role of School Factors on School Segregation by Race
      Notes : In the left panel, we relate each pair of adjacent blocks k1 and k1 in different attendance areas to their
      corresponding assigned school pair s and s . The horizontal axis measures the difference in the proportion of
      students in school s who are white relative to the analogous proportion in school s . The vertical axis measures
      the difference in the proportion of students in block k1 who are white relative to the analogous proportion in block
      k1 . The scatter plot represents averages of the variable in the vertical axis across all block pairs with similar values
      of the variable in the horizontal axis (in increments of 2.5 percentage points). The line represents the ordinary
      least squares fit of the disaggregated regression at the block-pair level. The regression slope estimate along with
      its standard error (in parenthesis) are also shown. The right panel shows an analogous plot, but with a different
      vertical axis: instead of considering blocks k1 and k1 , it considers blocks k2 and k1 . These results were obtained
      from a sample of 31,617 block pairs along with their associated schools.


                                                                 18
      (a) Blocks in Different Attendance Areas                       (b) Blocks in the Same Attendance Area
              Figure 4: The Relative Role of School Factors on School Segregation by
                                              Income
    Notes : See the notes for Figure 3, which presents the analogous results by race.



pair level. The corresponding regression slope estimate and standard error (in parenthesis)
are reported in the top right-hand portion of the panel. Panel (a) of Figure 3 suggests that
45% of racial school segregation is due to school factors. Panel (a) of Figure 4 reports the
analogous results for income, suggesting that 57% of economic school segregation is due to
school factors.
    As discussed, one potential issue with the estimates from Panel (a) is that they may
reflect highly local variation in neighborhood features, in addition to school features. This
concerns Assumption 2, which states that no systematic change in neighborhood features
across adjacent blocks should exist. If it is violated, then the results from Panel (a) would
represent an upper bound of the true value (see discussion pertaining to Figure 2). We use
the "placebo" estimates from Panel (b) of the respective figures to provide a correction for
the estimates in Panel (a). In particular, we construct a plot that is similar to Panel (a)
but uses a different vertical axis: rather than considering the difference between adjacent
blocks k1 and k1 (which are served by different schools), we calculate the difference between
adjacent blocks k2 and k1 (which are served by the same school). The placebo estimates
for race and income are both equal to 3%. Thus, under Assumption 2 , our estimates for
the relative role of school factors in explaining racial and economic school segregation are
respectively 42% (= 45 - 3) and 54% (= 57 - 3). This indicates that neighborhood factors


                                                            19
play a key role in both racial and economic segregation across schools.


4.2    Urban Status

We carry out our analysis separately for school pairs located in urban and non-urban areas,
the estimates for which are reported in Table 2 alongside the overall estimates discussed
above. We find that school factors matter substantially less in urban areas: they account for
35% (= 37 - 2) of racial segregation in urban areas and 45% (= 51 - 6) of racial segregation
in non-urban areas. The analogous estimates for economic segregation are 40% (= 42 - 2) for
urban areas and 69% (= 71 - 2) for non-urban areas. (All pairwise differences are significant
at the 1% level.)

              Table 2: The Relative Role of School Factors on School Segregation

                                     All Schools             Urban Schools            Non-Urban Schools
                                   ^ols
                                            ^placebo
                                                             ^ols
                                                                     ^placebo          ^ols    ^placebo


             Race                0.45        0.03           0.37         0.02         0.51        0.06
                                  (0.01)     (0.01)          (0.03)     (0.03)         (0.02)      (0.02)

             Income              0.57        0.03           0.42         0.02         0.71          0.02
                                  (0.02)     (0.02)          (0.03)     (0.03)         (0.02)      (0.03)

             Observations               31,617                     5,185                     21,002

             Notes : "All Schools" refers to the full sample of school pairs. "Urban Schools" refers to
             the sample of school pairs in which both schools are located in urban areas, and "Non-
             Urban Schools" refers to the sample of school pairs in which both schools are located in
             a non-urban area.     ^ols represents the OLS estimate of  , defined in equation (14), and
             ^placebo represents the OLS estimate of placebo , defined in equation (15). "Observations"
             
             refers to the number of unique block pairs used in the regressions. Standard errors, shown
             in parentheses, are corrected for heteroskedasticity and clustered by attendance area pair,
             (s, s ). *** denotes significance at the 1% level; and * denotes significance at the 10% level.




4.3    Grade Level

We also report our results by grade level, presenting the associated results in Table 3. The
columns "Elementary grades," "Middle grades" and "Secondary grades" restrict attention
to students enrolled in grades 3 through 5, 6 through 8, and 9 through 12, respectively.
The estimates indicate that the importance of school features in explaining racial school
segregation is monotonically decreasing in the grade level, with such features accounting
for 51% (=53-2), 42% (=45-3) and 32% (=35-3) of the variation in the elementary, middle


                                                          20
and high grades, respectively. The analogous income results are 60%, 47% and 55%. (All
pairwise differences are significant at the 1% level.)

         Table 3: The Relative Role of School Factors on School Segregation by Grade

                                  Elementary Grades            Middle Grades          Secondary Grades
                                    ^ols    ^placebo
                                                               ^ols
                                                                       ^placebo
                                                                                       ^ols
                                                                                                ^placebo


              Race                0.53         0.02         0.45         0.03         0.35         0.03
                                   (0.02)     (0.02)         (0.03)     (0.03)         (0.03)     (0.02)

              Income              0.62         0.02         0.50         0.03         0.58         0.03
                                   (0.03)     (0.02)         (0.03)     (0.03)         (0.03)     (0.03)

              Observations              12,661                     9,256                    9,700

              Notes : "All Schools" refers to the full sample of school pairs. "Elementary Grades,"
              "Middle Grades" and "Secondary Grades" refers to the sample of school pairs that serve
              students in grades 3 through 5, 6 through 8, and 9 through 12, respectively. ^ols represents
              the OLS estimate of  , defined in equation (14), and  ^placebo represents the OLS estimate
              of placebo , defined in equation (15). "Observations" refers to the number of unique block
              pairs used in the regressions. Standard errors, shown in parentheses, are corrected for
              heteroskedasticity and clustered by attendance area pair, (s, s ). *** denotes significance
              at the 1% level.




5     Addressing Potential Validity Concerns
In this section, we assess the extent to which our results are robust to potential concerns
about the validity of our estimates.


5.1    Geographical Features (e.g., Major Roads, Lakes) Coinciding
       with Boundaries

As in the boundary fixed effects literature, a key validity concern is that boundaries may
coincide with particular geographical features, such as rivers, lakes or major roads. In this
scenario, differences in the socioeconomic composition of those residing in block k1 and those
residing in block k1 would reflect not only S , but N as well. Assumption 2 would then be
violated, as the difference between k1 and k1 would tend to be larger than the difference
between k2 and k1 . Importantly however, this would bias our estimates of the role of S
upward, making our conclusion that N plays a key role conservative.
    Regardless, Figure 5 shows why local differences at the boundary, if they exist, are



                                                          21
                                                             .65
                             Prop. of Students who are White
                                .45            .55
                                                .35




                                                                   k30   k25   k20   k15   k10   k5    k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30


               Figure 5: Proportion of Elementary Students who are White in Each Block
        Notes : This figure plots the average proportion of students who are white across all boundaries for each block kl
        (kl ). The index l reflects the number of degrees of separation from the boundary in their corresponding attendance
        area. See footnote 19 for details on how l is measured. The attendance area on the right of each pair is the one
        that attracts white students disproportionately.



not first order in our context.17 It plots the average proportion of elementary students
                             white
in each block who are white (k     ) for blocks ranging from k30 to k30 .18 This average
is calculated across all boundaries for each block kl (kl ), where l reflects the number of
degrees of separation from the boundary.19 In the plot, we assign the school with the largest
proportion of students who are white to the right-hand-side attendance area (s ).20
       Note a salient feature of the figure: as one approaches the boundary from the left (block
k1 ), the slope is similar to the slope as one approaches it from the right (block k1 ). This
leads us to conclude that geographical features coinciding with a boundary do not play a
first-order role in our analysis, and that Assumption 2 (N varies linearly at the boundary)
  17
      Appendix Figure C.1 presents analogous plots for each combination of grade range, race and income.
  18
      Note that Figure 5 is the empirical analog of the theoretical Figure 2 aggregated across all boundaries,
given that only k is observed directly (rather than Sk or Nk ).
   19
      Block k2 is indexed as "2" because it is the nearest block (in terms of the Euclidian distance) to block
k1 , among all blocks located within attendance area s that are adjacent to block k1 but not to block k1 . For
l  3, block kl is indexed as "l" because it is the nearest block to block kl-1 , among all blocks located within
attendance area s that are adjacent to block kl-1 but not to block kl-2 . We use an analogous definition for
each block in attendance area s . We truncate the plot at 30 to avoid any potential selection issue, as some
attendance areas have no more than 30 degrees of separation from the boundary. Results are unchanged if
we use different notions of distance.
   20
      We have not done so when implementing our approach in the previous sections, as our research design
is agnostic to which side is more attractive to a given group. Indeed, our approach yields virtually the same
estimates when we choose attendance area s to be the one that attracts whites disproportionately.



                                                                                                      22
is valid. We now explain the logic of this conclusion in greater detail.
       Figure 5 looks very different from what it would look like if major roads, lakes or rivers
tended to coincide with attendance area boundaries. For instance, consider a case in which
all boundaries coincide with a disamenity, which attracts a disproportionately low number
of affluent families (e.g., a major road). Then one would expect affluent families on both
sides of the boundary would disproportionately want to reside farther from the boundary. In
terms of Figure 5, this would imply a negative slope when approaching the boundary from
the left and a positive slope when approaching it from the right (in other words, opposite
signed slopes).21 We discuss this concern in detail in Appendix B.3, in which we implement
a series of Monte Carlo experiments to convey this point, and conclude that Figure 5 rules
out biases of this type that are larger than two percentage points.
       Finally, there is an alternative manifestation of this concern that is not addressed by
Figure 5. Perhaps the disamenity of residing near a major road (or the amenity of residing
near a lake) dissipates over a very short distance, in no more than one block. This cannot
be detected by Figure 5, as it will only affect the discontinuity at the boundary, but not
the slopes around both sides of the boundary. An approach that handles this concern is one
exactly like our primary one, but without considering the existence of the blocks closest to
the boundary, k1 and k1 (analogously to a "donut" regression discontinuity design approach
 for example, see Barreca et al. 2011). Specifically, we estimate ^ donut := ^2 - ^placebo
                                                                    S

where ^2 is the OLS estimate of the regression of k ,k on s,s . We find ^ donut to be
                                                   2 2                   S

very similar to ^ S , suggesting that this potential issue is not of primary importance in our

context.22


Remark 1. The interpretation of S as a proportion hinges on it being bounded between 0
and 1. Upon inspection of equation (7), it should be clear that this is violated only under a
very rare set of circumstances: the covariance cov (S, N ) needs to be negative and larger
  21
      Alternatively, consider the case of a boundary amenity, which attracts a disproportionately high number
of affluent families (e.g., a picturesque lake). Using the same logic, affluent families on both sides of the
boundary would tend to concentrate around the boundaries. This would imply a positive slope when ap-
proaching the boundary from the left and a negative slope when approaching it from the right (i.e., opposite
signed slopes once again).
   22
      The similarity between   ^ S and ^ donut also suggests that restricting our sample to only boundary blocks
                                        S
that were not bisected by the attendance boundary does not generate any bias (as noted in footnote 14).


                                                      23
in magnitude than only one of the variance terms. However, Figure 5 strongly suggests that
cov (S, N ) > 0, which guarantees S  [0, 1]. To see why, note that there is a positive
discontinuity at the boundary and a positive slope on both sides of the boundary. While the
discontinuity speaks to the role of S , the slopes speak to the role of N . Thus, we conclude
that attendance areas tending to attract a disproportionate number of affluent families because
of their school amenities also tend to attract a disproportionate number of affluent families
because of their neighborhood amenities.


5.2       Distance Between Residence and School

Another potential concern is the possibility that households care about how close to the
school they reside within the attendance area. For instance, parents may care about the
commute cost from their home to the school. Alternatively, it may be beneficial to reside
closer to the school, since they would have disproportional access to some of the school's
off-hours amenities (e.g., playground).
       This concern could generate bias in our main estimate only if students of one type have
more intense preferences than students of the other type. For instance, consider the example
in which affluent families care more about residing near the school than non-affluent families.
Then Assumption 1 would be violated, since S would vary within the attendance area.23
       Fortunately, Figure 5 is capable of detecting such an issue. Given that the school's
location tends to be in the interior of the attendance area (as opposed to exactly at the
boundary), we would observe a higher proportion of affluent families clustering near the
school on both sides. In this case, Figure 5 would look very different from what we see: the
slope as one approaches the boundary from the left would be negative, while the slope as one
approaches it from the right would be positive. In particular, these slopes would be different
from each other.
       In Appendix B.4, we discuss this concern in greater detail, implementing a series of
Monte Carlo experiments to convey this point, and concluding that Figure 5 rules out biases
  23
    Even the weaker version of Assumption 1 (defined in footnote 5) would be violated in this case, as the
discontinuity in Sk at the boundary would not be representative of the discontinuity overall. However, the
weaker version would not be violated if preferences over the residence-school distance were homogeneous,
even if the location of the school were farther from the boundary on one side versus the other.


                                                   24
       (a) Blocks in Different Attendance Areas                        (b) Blocks in the Same Attendance Area
                     Figure 6: The Effect of        rich white
                                                    s,s                rich white  All Schools
                                                                    on k 1 ,k    1
      Notes : See the notes for Figure 3, which presents the analogous results by race.



of this type that are larger than one percentage point.


5.3      Multidimensional Sorting

Another potential concern is that the primary dimension along which sorting occurs (e.g.,
race or income) is setting-dependent. For example, sorting in urban areas may happen
predominantly by race, while sorting in non-urban areas may be mainly due to income. If
that were the case, then the race estimate in Table 2 would more accurately reflect the role
of school factors in urban areas, while the income estimate would more accurately reflect the
role of school factors in non-urban areas.
    To assess this concern, we perform a robustness check by estimating versions of equations
(14) and (15) using two dimensions simultaneously. Specifically, in the case of equation (14),
                                 rich white               rich white         rich white
we calculate the extent to which s,s        helps predict k1 ,k
                                                                     , where s          and
                                                                                          1
rich white
k            respectively represent the proportion of students in school s and block k who are
both economically advantaged and white, compared to all other types (non-white of any
income, or economically disadvantaged and white). Equation (15) is estimated analogously.
    The corresponding plots are shown in Figure 6 for all schools and Figure 7 for urban
schools, for comparison purposes with respect to the results in Table 2. Consistent with
the example above, the estimate across all schools (51%=55% - 4%) is closer to the main



                                                              25
        (a) Blocks in Different Attendance Areas                       (b) Blocks in the Same Attendance Area
               Figure 7: The Effect of         rich white
                                               s,s                rich white  Urban Schools Only
                                                               on k 1 ,k    1
      Notes : See the notes for Figure 3, which presents the analogous results by race and for all schools.



unidimensional estimate for income (54%=57%-3%), while the estimate for the urban sub-
sample (33%=37%-4%) is closer to the unidimensional estimate for race (35%=37%-2%).
This suggests that sorting by race (due to both S and N ) is better at explaining school
segregation in urban areas, while sorting by income has more explanatory power outside of
them.


6      Sources of Variation
In this section, we address considerations regarding the sources of variation we exploit,
through several sensitivity analyses summarized in Table 4. For convenience, the first column
reports the baseline estimates of ^ S for all schools in our sample, as implied by the first

column of Table 2.


6.1      Are comparisons too local?

One concern is that the relative role of school features in explaining school segregation may
depend on the locality of between-school comparisons. Indeed, schools within the same dis-
trict are likely to be more similar than schools located in different districts. Thus, focusing
exclusively on school comparisons within the same district may fail to recover the full scope of
school policies affecting segregation (particularly those that vary across districts). However,


                                                              26
                                             Table 4: Robustness Tests

                                Baseline   Within and Across      Control for Intensity of       Control for
                                               Districts              School Choice           School Observables

             Race                 0.42             0.44                     0.43                      0.39
                                 (0.02)           (0.02)                   (0.02)                    (0.03)

             Income               0.54             0.53                     0.54                      0.43
                                 (0.02)           (0.02)                   (0.03)                    (0.03)

             Observations        31,617           41,332                   31,617                    31,617

             Notes : This table shows the estimates of    ^ S := ^-  ^placebo (obtained from equations (14) and
             (15)) for different specifications and samples. The first column refers to the "all schools" results
             from Tables 2, which are our baseline results to which the results in the other columns should
             be compared. In the second column ("Within and Across Districts"), we also include boundaries
             separating schools from different districts. In the third column ("Control for Intensity of School
             Choice"), we add controls for the total number of blocks in attendance areas s and s (a cubic
             B-spline for this quantity) and indicators for whether charter or magnet schools are located near
             either of the two attendance areas s and s . Finally, in the fourth column ("Control for School
             Observables") we add as control variables the difference across schools s and s of a wide list of
             observable characteristics of the schools - see footnote 27 for details. "Observations" refers to the
             number of unique observations used in the regressions. Standard errors, shown in parentheses, are
             corrected for heteroskedasticity and clustered by attendance area pair, (s, s ).



an analogous argument applies to neighborhood amenities: it is likely that neighborhoods
within the same district would be more similar than neighborhoods in different districts,
which implies that we may also not recover the full scope of non-school policies (again, par-
ticularly those that vary across districts). Ultimately, which of these forces prevails is an
empirical question. Accordingly, we assess whether the relative role of school factors changes
substantially if our analysis includes school pairs that are located in different districts. Com-
paring the first (within-district baseline) and second (within and across districts) columns of
Table 4, we do not find a systematic difference for race or income when we include schools
in different districts in our analysis.24
       A related concern is that we do not compare schools that are located in different cities.
Indeed, while |s,s | ranges from 0 to 0.9 in our sample of adjacent school pairs, it ranges
from 0 to 1 in the full sample, containing all school pairs in the state. As with the discussion
above, this raises a potential external validity issue: our findings using adjacent schools (in
order to address internal validity concerns) may not be relevant to across-city comparisons.
To the extent that is the case, our estimates are likely to understate the importance of non-
  24
    These results corroborate our finding in Section 5.1 that pre-existing differences at the boundary (e.g.,
due to a major road or river) do not drive our results. Indeed, it is intuitive that boundaries separating
school districts are more likely to be coincident with such barriers than boundaries within districts.



                                                             27
school factors in explaining school segregation overall. To see this, note that the choice of the
metropolitan or rural area in which to reside should depend predominantly on non-school
factors, such as employment prospects. It is only once families have selected a commuting
zone that school considerations are likely to become first order, with school and neighborhood
amenities determining local sorting patterns. Thus, the inclusion of school comparisons
across commuting zones (for example, Durham versus Charlotte) would make non-school
factors even stronger determinants of school segregation.


6.2       Does the relative role of N depend on the size of the atten-
          dance areas or the presence of charter and magnet schools?

Yet another potential concern is that the relative role of S and N may depend on the degree
of school choice available to parents. For instance, although North Carolina does not allow
open enrollment during our period of interest, one may be concerned that there is increased
scope for N to change within an urban attendance area, given that attendance areas in
urban settings contain a greater number of blocks than in non-urban settings (as Table 1
shows). This could imply a larger role for N in urban settings, relative to their non-urban
counterparts. This mechanical effect contrasts with our explanation for the prominent role of
N in urban areas, which is that the density of neighborhood features change more intensely
from one block to the next in urban relative to non-urban areas.
       Another related possibility is that charter and magnet schools, which are more prevalent
in urban areas, may be indirectly affecting our results. In our calculations, we did not count
students who were attending those schools, potentially leading to a selection issue that affects
urban areas more intensely than non-urban areas.
       To rule out these alternative mechanical explanations, we flexibly control for the total
number of blocks in attendance areas s and s ,25 as well as for whether charter or magnet
schools are located near either of the two attendance areas s and s .26 The results are reported
  25
     To account for non-linearities, we add them as cubic B-splines with five equally spaced knots (so there
are a total of four control variables added).
  26
     In the table, we report results using a strict notion of distance: whether either type of choice school is
located within one of the two attendance areas. Our results are essentially invariant to alternative notions
of distance.



                                                      28
in column three of Table 4. They are statistically indistinguishable from the baseline effects
in column one, supporting our explanation.


6.3       To what extent does S project onto observable school charac-
          teristics?

Finally, we assess the extent to which the component we construe as being related to school
factors (S ) is correlated with a rich set of observable school characteristics. We do so by
comparing our baseline estimate ^ S to the analogous coefficient in a regression that also

conditions on differences between observed school characteristics.27 Intuitively, as the char-
acteristics are likely to be more correlated with S than with N , their inclusion in the re-
gression should disproportionately absorb school factors and lower the value of ^ S . That is

precisely what we find for both race and income (see column four of Table 4). We view this
evidence as an independent confirmation of what S represents. Moreover, the fact that ^S

remains substantial even with school controls suggests that unobserved school amenities are
important determinants of school sorting.


7       The Role of cov (Ss,s , Ns,s )
Note that S attributes half of the covariance term, 2  cov (Ss,s , Ns,s ), to each factor.
Of course, this attribution is arbitrary. Without imposing further restrictions, we only know
from Remark 1 that the covariance is positive. While it is possible that the term is entirely
driven by Ss,s affecting Ns,s , or entirely driven by Ns,s affecting Ss,s , it is more
likely that some combination of the two causal relationships prevails.28
       It is infeasible to estimate how the covariance should be attributed for two reasons.
  27
     The included variables are the differences between schools s and s of the following school characteristics:
standardized mathematics and reading test scores, whether the school met adequate yearly progress under
the federal No Child Left Behind act, average class size, the proportion of fully licensed teachers, the rate
of teacher turnover, the proportion of teachers with 0 to 3, 4 to 10, and 11 or more years of experience, the
proportion of teachers with an advanced college degree, Title I status, the proportion of classrooms connected
to the Internet, the number of library books and their average age, total enrollment, and the proportion of
students who are female, are limited English proficient, are classified as gifted (separately for mathematics
and reading), are classified as disabled, and attend school daily.
  28
     By assumption in our decomposition, there is no room for a third type of amenity originally causing
both Ss,s and Ns,s .



                                                      29
First, we would have to identify two causal relationships without stating ex ante what Ss,s
and Ns,s represent in terms of observables. Second, even if we were able to uncover these
relationships, we would only do so for a specific geographic area and a specific period of time,
which would raise issues of external validity. For instance, it is likely that the direction of
causality from Ss,s to Ns,s would dominate during periods in which educational policies
are more prevalent, while the opposite direction of causality would dominate during periods
in which residential policies are more prevalent. We are only able to observe a cross-sectional
snapshot, reflecting the cumulative impact of both causal relationships over time.
      In what follows, we consider a simple dynamic model of how this covariance came to be.
Through the lens of this model, we are able to enhance the interpretation of our results by
offering a theoretically sound attribution of the covariance term.


7.1       A Dynamic Model Generating cov (Ss,s , Ns,s ) = 0

Suppose that, for some initial period (period 0), two adjacent attendance areas differ by a
small set of amenities. These amenities are considered to be "exogenous" for our purposes;
they are not of direct interest, but rather provide the initial seed that generates differences in
proportions across neighborhoods. A good example of an exogenous amenity is an inherent
topographical feature, including the distance to a river, the degree to which the land is
fertile, and the elevation of the terrain.29 Accordingly, we model the initial difference for
                                                                   N
each pair of attendance areas s and s as arising from a shock 0 := 0 , which is entirely
attributable to neighborhood features.30
      People then sort based on these original differences, which begets additional differences
in amenities  denoted as "endogenous." While some of these endogenous amenities evolve
mechanically with socioeconomic composition (e.g., racial composition of school peers or
neighbors), other endogenous amenities may vary with the socioeconomic composition via
a less well-known and potentially more complex process (e.g., educational and residential
policies, local taxes, and the provision of local goods and services, such as schools and
venue offerings). Households may sort further based on these endogenous changes, leading
 29
      Lee and Lin (2017) studies the dynamic consequences of persistent natural neighborhood amenities.
 30
      For expositional convenience, we omit the subscript referring to the school pair.


                                                    30
to yet more endogenous changes in amenities, potentially creating a positive feedback loop.
Attendance areas are observed by the researcher only after several decades of this endogenous
process taking place.
       The evolution of the difference in socioeconomic composition between two schools can
be expressed as:

                       N      S               N
             t - t-1 = t -1 +  [t-1 - t-2 ] +  [t-1 - t-2 ] ,                                            (16)

where the relationship depends linearly on the prior shock and the endogenous shocks trig-
gered by that prior shock. The last two terms of equation (16) represent endogenous shocks
attributable to schools and neighborhoods, reflected by the parameters  S and  N , respec-
tively. We view these parameters as being representative of the true time-varying parameters
~S and 
       ~N over the long run, averaging across them from period 0 to the period in which
 t      t

we observe the data. Thus,  S and  N subsume endogenous sorting and policies that have
taken place over time, including any potential frictions that limit the degree of sorting.31
       Based on equation (16), we are able to develop a generic expression for t , the difference
in socioeconomic composition between the two schools in period t, which depends only on the
              N
initial shock 0 , and parameters  S and  N . Given initial conditions t = 0 for t  0
(neighborhoods are identical prior to period 0), we have 0 - -1 = 0. Consequently,
the period 1 difference is determined only by the overall period 0 shock: 1 = 0 . The
                                                  t-1
general expression for t > 1 is t =               w=0   w 0 , where  :=  S +  N .32 As long as
                                                     1-t
 = 1, the expression simplifies to t =               1-
                                                             0 . We focus on stable non-oscillatory
solutions by restricting attention to 0   < 1.33 Thus, in the limit as t   (long-run
                                          0
stable equilibrium), we have  =           1-
                                             .
       We now describe S and N in terms of these parameters:
  31
     Note that, in a context of infinite moving costs, we would have  S =  N = 0, as no endogenous sorting
would take place.
  32
     This can be proven by induction. For example, the period 2 expression is 2 = (1 + ) 0 , while the
period 3 expression is 3 = (1 + ) 2 - 1 = 1 +  + 2 0 .
  33
     Our main conclusions are also valid in the context of oscillatory trajectories to the stable equilibrium
(-1 <   0). Many frictions in residential sorting, such as moving costs, lead us to conclude that a
multiplicity of equilibria (|| > 1) is not realistic for most schools in our context (see Caetano and Maheshri
2020).




                                                     31
                     S =          S +  S  +  S 2 + . . . 0
                                                         N

                                       
                                 S
                           =                  N
                                            w 0
                                      w=0
                                  S    N
                                      0
                           =       and
                                1-

                         N
                     N = 0 +  N +  N  +  N 2 + . . . 0
                                                     N


                             N         N 0 N
                           = 0 +
                                       1-
                                     S   N
                                 1 -  0
                           =                .
                                    1-

With these expressions in hand, we can compute var(S ), var(N ) and cov (S, N ), and
                                                                            N
thus var( ) := var(S ) + var(N ) + 2  cov (S, N ). Assuming that the shock 0 is
drawn from a distribution with variance  2 , we obtain:

                                               1
                                     var( ) =       2 ,
                                           (1 - )2
                                             ( S )2 2
                                 var(S ) =           ,
                                           (1 - )2
                                           (1 -  S )2 2
                                 var(N ) =            ,
                                            (1 - )2
                                            S (1 -  S ) 2
                            cov (S, N ) =               .
                                             (1 - )2

Using these expressions, we can then compute the following ratios:

                                    var(S )
                                            = ( S )2 ,                          (17)
                                     var( )
                                    var(N )
                                            = (1 -  S )2 ,                      (18)
                                    var( )
                               cov (S, N )
                                            =  S  (1 -  S ) ,                  (19)
                                 var( )

and relate the estimand S to the model parameters:




                                             32
                                       var(S ) + cov (S, N )
                                S =
                                             var( )
                                     = ( ) +  S (1 -  S )
                                         S 2


                                     = S .                                                        (20)


       Thus, the dynamic model tells us that by identifying S we are also identifying  S ,
which, in turn, allows us to recover the quantities in equations (17), (18) and (19). For any
value  , we define:

                                       var(S ) + 2    cov (S, N )
                           S ( ) :=                                 .                             (21)
                                                var( )
The term S ( ) attributes the proportion  of the covariance term (2  cov (S, N )) to S
and the proportion (1 -  ) of the term to N .
       We are able to identify S ( ) for any arbitrary  . However, the model also imposes
restrictions on the value  can take. Based on equation (19), the covariance ratio is the
product of  S and 1 -  S . This suggests a theoretically sound attribution of the covariance
term: S =  S of the component should be attributed to S , while N = 1 -  S of the
component should be attributed to N .34


7.2       Results Through Lens of Dynamic Model

Table 5 reports our key findings obtained through the lens of the dynamic model. Irrespective
of the dimension of segregation or urban status, we find that the covariance component is
positive and accounts for approximately 50% of the total variance, var( ) (see the first
row of each panel). Our finding of the covariance being positive independently corroborates
Remark 1. In theory, the covariance between S and N could have been negative if school
and neighborhood amenities had opposing effects on segregation, as would be the case if
either  S < 0 (so that  N > 0, from 0   S +  N < 1) or  S > 1 (so that  N < 0). Instead,
  34
    Note also that equation (19) rules out performing a bounding exercise in which S is recalculated
assuming all ( = 1) or none ( = 0) of the covariance term is attributable to S . This is due to the
covariance term itself depending on  . For instance, consider the case in which  =  S . If we had found
that  S = 0 or  S = 1, then equation (19) would imply the covariance term would be zero.


                                                  33
               Table 5: Corrected Estimates  The Relative Role of School and
          Neighborhood Factors on School Segregation (Overall and by Urban Status)

       Panel A: Race

                                                      All schools      Urban Schools        Non-Urban Schools
                       2톍ov (S,N )
                          var ( )
                                                          0.49               0.46                   0.50
                    var (S )+cov (S,N )
             S :=         var ( )
                                                          0.42               0.35                   0.45
                        var (S )+2톁 톍ov (S,N )
       S ( = S ) :=              var ( )
                                                          0.38               0.28                   0.43
                       var (S )
                  var (S )+var (N )
                                                          0.34               0.22                   0.40

       Panel B: Income

                                                      All schools      Urban Schools        Non-Urban Schools
                       2톍ov (S,N )
                          var ( )
                                                          0.50               0.48                   0.43
                    var (S )+cov (S,N )
             S :=         var ( )
                                                          0.54               0.40                   0.69
                        var (S )+2톁 톍ov (S,N )
       S ( = S ) :=              var ( )
                                                          0.56               0.35                   0.77
                       var (S )
                  var (S )+var (N )
                                                          0.58               0.31                   0.83

         Notes : This table reports the results from Table 2 through the lens of the dynamic model. Standard
         errors, calculated via the Delta method, are always below three percentage points and are omitted for
         clarity.



we find 0 < S =  S < 1 in all cases (reproduced from Table 2 and reported in the second
row of each panel). This is an intuitive result: for instance, schools with higher test scores
are likely to attract a disproportionate number of affluent students (all else equal), which
may in turn attract a disproportionate number of affluent households without children.
    The third row of each panel in Table 5 reports S ( = S ), which attributes S of the
covariance term to S and 1 - S to N . The resulting estimates constitute our headline
results. They reveal even stronger gaps between urban and non-urban estimates: the role of
school factors in explaining racial and income segregation is substantially smaller in urban
areas (28% and 35%, respectively) than in non-urban areas (43% and 77%, respectively). As
discussed in the introduction, these results are likely due to the greater complexity of neigh-
borhood features in urban relative to non-urban settings. Features, such as specific venues
or sidewalks, tend to be perceived as being more similar in non-urban areas, particularly
given that residents of those places are more likely to travel by car. It is noteworthy that
school sorting on the basis of income and race are more similar in urban areas but differ
dramatically in non-urban areas. Indeed, in non-urban areas, neighborhood factors matter
much less for school sorting on the basis of income than for sorting on the basis of race,



                                                         34
which would occur if more affluent households use cars to access neighborhood amenities in
non-urban areas more intensely than less affluent households.
    For completeness, the fourth row of each panel reports estimates corresponding to an
alternative measure of the importance of school factors in explaining school segregation. This
                var(S )
quantity,   var(S )+var(N )
                            ,      removes the covariance term entirely, providing a useful measure
that is agnostic about the attribution of the covariance term. Note that S ( = S ) can be
                                                                             var(S )
thought of as an intermediate measure between S and                      var(S )+var(N )
                                                                                         .     Regardless of the
measure, we find that neighborhood factors are key for understanding school segregation,
particularly in urban areas.
    Table 6 reports analogous estimates by grade level. As with the results overall and by
urban status, the covariance component represents approximately 50% of the total variance,
irrespective of the grade level. After re-attributing the covariance term, the third row shows
that school factors explain 52%, 38% and 24% of racial segregation in elementary, middle
and secondary grades, respectively. The analogous estimates for income segregation are 65%,
46% and 57%.
    To provide context for these findings, note that attendance areas tend to be geograph-
ically smaller for earlier grades (as shown in Table 1). Thus, households with students


                   Table 6: Corrected Estimates  The Relative Role of School and
                   Neighborhood Features on School Segregation (By Grade Level)

      Panel A: Race

                                               Elementary Grades        Middle Grades       Secondary Grades
                   2톍ov (S,N )
                      var ( )
                                                      0.50                   0.49                  0.44
                   var (S )+cov (S,N )
            S :=         var ( )
                                                      0.51                   0.42                  0.32
                   var (S )+2톁 톍ov (S,N )
      S (S ) :=             var ( )
                                                      0.52                   0.38                  0.24
                    var (S )
               var (S )+var (N )
                                                      0.52                   0.34                  0.18

      Panel B: Income

                                               Elementary Grades        Middle Grades       Secondary Grades
                   2톍ov (S,N )
                      var ( )
                                                      0.48                   0.50                  0.50
                   var (S )+cov (S,N )
            S :=         var ( )
                                                      0.60                   0.47                  0.55
                   var (S )+2톁 톍ov (S,N )
      S (S ) :=             var ( )
                                                      0.65                   0.46                  0.57
                    var (S )
               var (S )+var (N )
                                                      0.69                   0.44                  0.60

      Notes : This table shows the results from Table 3 through the lens of the dynamic model. Standard errors
      calculated via the Delta method are always below three percentage points and are omitted for clarity.



                                                        35
in elementary grades have a greater number of school options to choose from, relative to
households with students in middle grades (with a similar but less pronounced relationship
between middle and secondary grades). Yet these households have identical housing options
(and thus neighborhood amenities) from which to choose. If household valuations of school
and neighborhood features are grade-invariant, then school factors should explain more of
the variation in school segregation for earlier grades, which is broadly in line with the pat-
terns we uncover. The exception is the income result for secondary grades. We conjecture
that the income gap in valuation of school amenities for secondary grades is higher than the
corresponding gap for middle grades.35


8       Conclusion
This article has attempted to underscore the key role that neighborhood factors play in
explaining school socioeconomic segregation. Given that school and residential decisions are
often made jointly, both school and neighborhood factors should affect school segregation,
but little has been previously established about their relative importance. We found that
62% of school segregation by race and 44% of school segregation by income is attributable to
neighborhood factors. Importantly, they tend to matter even more in urban environments,
settings in which school segregation has received disproportionate attention.
       Our results have implications for the efficiency and efficacy of widely implemented policies
that hold educators accountable for scholastic outcomes. It is inefficient to reward or punish
them for outcomes that are beyond their control. As student outcomes depend on the degree
of school segregation, the first-order importance of neighborhood factors in explaining such
segregation implies that a substantial portion of outcome variation is under the control
of urban policymakers, especially in urban areas. Without urban policymakers playing an
active role in the process, efforts to lower school segregation through well meaning educational
policies are likely to be insufficient.
       In future research, it would be interesting to replicate these results for additional states.
Many areas of North Carolina have been subject to a variety of educational policies over the
  35
    Consistent with this finding, Caetano (2019) reports that households, particularly wealthier ones, tend
to value school quality more at the secondary school level than at the middle grade level.


                                                    36
past few decades, including those providing school choice. At the same time, many school
boards have repeatedly attempted to lower segregation through attendance boundary shifts
in order to counteract gradual household re-sorting (Macartney and Singleton 2018). The
fact that neighborhood factors are central in explaining school segregation given this policy
backdrop suggests that our conclusions about their importance may be conservative when
applied to other regions.
    More broadly, using Census data, our approach can be adapted to study the role of
school and neighborhood factors in explaining neighborhood segregation. Doing so could
uncover important heterogeneity between school and neighborhood sorting beyond what can
be studied using our data. Related, additional demographic information about the parents
of students, such as their marital status, age and education,36 could allow us to investigate
patterns of sorting along many dimensions beyond race and income. We view this article as
enabling a new line of inquiry into confronting segregation, a matter of great importance to
society.




 36
    Parental education and a student's residential location are never simultaneously reported in the
NCERDC data.


                                                37
References
Barreca, Alan I, Melanie Guldi, Jason M Lindo, and Glen R Waddell. 2011.
 "Saving babies? Revisiting the effect of very low birth weight classification." The Quarterly
 Journal of Economics, 126(4): 21172123.
Bayer, P., F. Ferreira, and R. McMillan. 2007. "A Unified Framework for Measuring
 Preferences for Schools and Neighborhoods." Journal of Political Economy, 115(4): 588
 638.
Billings, Stephen B., David J. Deming, and Jonah Rockoff. 2014. "School segrega-
  tion, educational attainment, and crime: Evidence from the end of busing in Charlotte-
  Mecklenburg." Quarterly Journal of Economics, 129(1): 435476.
Black, Sandra. 1999. "Do Better Schools Matter? Parental Valuation of Elementary Edu-
  cation." Quarterly Journal of Economics, 114(2): 577599.
Caetano, Gregorio. 2019. "Neighborhood sorting and the value of public school quality."
 Journal of Urban Economics, 114: 103193.
Caetano, Gregorio, and Vikram Maheshri. 2020. "Explaining Recent Trends in US
 School Segregation." Mimeo.
Cascio, Elizabeth U, and Sarah Reber. 2013. "The poverty gap in school spending
 following the introduction of Title I." American Economic Review, 103(3): 42327.
Clotfelter, Charles T, Helen F Ladd, and Jacob L Vigdor. 2008. "School segregation
  under color-blind jurisprudence: The case of North Carolina." Va. J. Soc. Pol'y & L.,
  16: 46.
Glaeser, Edward. 2011. Triumph of the City. Pan.
Glaeser, Edward L., Jed Kolko, and Albert Saiz. 2001. "Consumer city." Journal of
 economic geography, 1(1): 2750.
Guryan, Jonathan. 2004. "Desegregation and black dropout rates." American Economic
 Review, 94(4): 919943.
Hanushek, Eric A., John F. Kain, and Steven G. Rivkin. 2009. "New evidence
 about Brown v. Board of Education: The complex effects of school racial composition on
 achievement." Journal of Labor Economics, 27(3): 349383.
Jacobs, Jane. 1961. "The death and life of great American cities." New-York, NY: Vintage.
Johnson, Rucker C. 2011. "Long-run impacts of school desegregation & school quality on
  adult attainments." National Bureau of Economic Research 14503.
Lee, Sanghoon, and Jeffrey Lin. 2017. "Natural amenities, neighbourhood dynamics, and
  persistence in the spatial distribution of income." Review of Economic Studies, 85(1): 663
  694.

                                             38
Lutz, Byron. 2011. "The end of court-ordered desegregation." American Economic Journal:
 Economic Policy, 3(2): 13068.

Macartney, Hugh, and John Singleton. 2018. "School Boards and Student Segregation."
 Journal of Public Economics, 164: 165182.

Orfield, Gary, Erica Frankenberg, Jongyeon Ee, and John Kuscera. 2014. Brown at
 60: Great progress, a long retreat and an uncertain future. Civil Rights Project/Proyecto
 Derechos Civiles.

Turner, Matthew A, Andrew Haughwout, and Wilbert Van Der Klaauw. 2014.
 "Land use regulation and welfare." Econometrica, 82(4): 13411403.




                                           39
Appendices
A         Justifying the Linear-on-Linear Approximation
                                                                                 ^k1 1-
                                                                                       ^k
As discussed in Section 2, it is infeasible to estimate ^ log , since ln1
                                                                            is undefined
                                                         S         (1-^k1 )      ^k
                                                                 1
for many blocks. Indeed, ^k is equal to either 0 or 1 even when 0 < k < 1. Here, we
argue that ^ S , obtained from the linear-on-linear regressions (14) and (15), offers a feasible

alternative estimator to ^ log .
                          S

       It is evident that ^ S is always well defined, even when ^k is equal to 0 or 1. So it is
sufficient to show that ^ S and ^ log approximately estimate the same object. In Section
                                 S

B.2, we provide a Monte Carlo simulation showing that this is the case even when there is
only one student per block, so that ^k can only take values 0 or 1 irrespective of k . Here,
we provide more direct evidence demonstrating that, whenever ^ log is feasible, it yields the
                                                              S

same results in our empirical analysis as ^ S.

       We accomplish this by reducing the role of noise in the estimation of  log . We aggregate
across all school pairs with sufficiently similar values of s,s . The proportion difference
s,s , which is a continuous variable bounded between -1 to 1, is discretized in intervals
                                                               ^k1 1-
                                                                     ^k
of width m, and we calculate the average of ln                           1
                                                                             for each of these intervals.
                                                               ^k
                                                                1
                                                                  ( 1-^ k1 )

For comparison, we also discretize ^
                                   s,s             in intervals of width m and calculate the average
   k1 ,k1 for each interval in order to estimate an aggregated version of the linear-on-
of ^
linear regression. The left panels of Figures 3 and 4 in the text provide examples of this
aggregation. The scatter plot in each panel of those figures is obtained by discretizing s,s
on the horizontal axis using intervals of m = 0.025 (2.5 percentage points), and calculating
the average of k1 ,k1 for each discretized value.
       Figure A.1 compares the slope of the aggregated version of the linear-on-linear regression
(solid black line) and the slope of the aggregated version of the log-on-log regression (dashed
black line) for different values of the aggregation interval m.37 The corresponding 95%
confidence intervals are also shown in gray. The larger the value of m, the more aggregated
the data used in the regressions. As Figure A.1 shows, the slope estimates are very similar
  37
       We weight the aggregated regressions by the number of block pairs in each interval.



                                                      40
to each other, and are in turn similar to the disaggregated slopes shown in the left panel
of Figures 3 and 4 (0.45 for race and 0.57 for income). Importantly, as m becomes smaller,
the confidence interval of the log-on-log slope estimator increases while the corresponding
confidence interval of the linear-on-linear slope estimator continues to be well behaved. A
similar pattern is found in all stratified regressions we attempted (e.g., by urban status, by
grade level).
     1




                                                                                 1
     .4 .45 .5 .55 .6 .65 .7




                                                                                 .4 .45 .5 .55 .6 .65 .7




                               .01       .05        .1       .15       .2                                  .01   .05       .1             .15     .2
                                                         m                                                                      m



                                                (a) Race                                                               (b) Income

                                       Figure A.1: Relationship Between Slopes in the Aggregated Log-on-Log
                                     Regression (Dashed) and the Aggregated Linear-on-Linear Regression (Solid)


     Notes : This figure plots the slope parameter of the aggregated log-on-log regression (dashed line) and the ag-
     gregated linear-on-linear regression (solid line), along with their respective 95% confidence intervals. Block pairs
     and their corresponding school pairs are aggregated across all boundaries on intervals of width m of the value
     s,s , where m changes in the horizontal axis of the figure. The corresponding disaggregated linear-on-linear
     slope estimates are 0.45 (race) and 0.57 (income), as shown in the left panels of Figures 3 and 4.



     We conclude that the linear-on-linear version of the regression yields the same interpre-
tation of the slope as the log-on-log version of the regression, but with the advantage of
being robust to noise. Thus, as discussed in Section 2.3, we can safely interpret Ss,s
as (A   B
    S - S )(Ss - Ss ) and Ns,s as Ns - Ns , where Ns := ln                                                                          kKs   exp(A
                                                                                                                                              N Nk ) -

ln                             kKs   exp(B
                                         N Nk ) .




                                                                            41
B      Monte Carlo
In this appendix, we use a series of Monte Carlo experiments to verify that our method
works as expected, and to consider the implications of key violations of our assumptions.
We first describe the Monte Carlo setup, and then discuss the results from our simulation.


B.1        Monte Carlo Setup

Our simulation includes nS = 3, 000 pairs of attendance areas, with each pair corresponding
to two schools, denoted s and s , and each attendance area containing K = 30 blocks. The
number of students residing in block k is given by nk . We begin by specifying the d.g.p.
primitives of equation (2) in the main text, repeated here for convenience:

                                          exp(A       A
                                              S Sk + N Nk )
                          k =                                         .                              (B.1)
                                exp(A       A           B      B
                                    S Sk + N Nk ) + exp(S Sk + N Nk )


Let k represent the distance from the middle of the block to the boundary (located at 0), so
that k = -1.5 refers to block k2 , k = -0.5 refers to block k1 , k = 0.5 refers to block k1 , and
so on.38
                                                                               N
   The school and neighborhood
                           amenities
                                         are set as Sk = S  1{k>0} and Nk = 2  텸
                                                                                    k,
                            1 1
where (S , N )  N (0, 0),        .39 We set the preference parameters to A     S = 3,
                            1 10
A          B          B
 N = 2.5, S = 2, and N = 2. Note that preferences for S are assumed to be more intense

than preferences for N. Moreover, type A tends to have more intense preferences than type
B for both amenities, which implies that the majority of students in the population are of
type A.40 Finally, Sk := (A   B                   A   B
                          S - S )  Sk and Nk := (N - N )  Nk are positively correlated to

each other: blocks with school amenities that disproportionately attract students of type A
tend to also have neighborhood amenities that disproportionately attract students of type
A.
  38
     This way we make sure the distance (in terms of k ) between any two adjacent blocks is the same: for
instance, the distance between k1 and k1 is the same as the distance between k2 and k1 .
  39
     We assume that the variance of N is much larger than the variance of S to account for the division
by 2  K = 60 in the definition of Nk .
  40                                                                
     This implication follows from the normalization k~ exp(k~ ) = n . See the discussion preceding equation
(2) in the main text.


                                                    42
    Given these primitives, one can calculate k , Nk , Ss,s and Ns,s , and thus S in
equation (7) from the main text, reproduced here for convenience:

                               var(Ss,s ) + cov (Ss,s , Ns,s )
                  S :=                                                                   (B.2)
                         var(Ss,s ) + var(Ns,s ) + 2  cov (Ss,s , Ns,s )

    The parameterizations above describe the population, with key quantities k , s , s and
S . Although S is calculated directly using equation (B.2), it can also be estimated via
log
S = 
     log   log
         - placebo under Assumption 2 , using the population quantities k , s and s .
We find that S agrees with log
                           S to six decimal places. This is not surprising, given that

Assumption 2 is valid in this baseline case.
    As researchers do not observe the population, we designed the Monte Carlo to take that
into account. We exploit the exact source of randomness we discuss in the main text; namely
that only one or two students typically reside within a given block. This implies that we do
not actually observe k , but only an estimate of it. For each Monte Carlo iteration i, instead
of observing the population quantity k for each block, we observe nk independent draws of
                                                                                           i
a Bernoulli distribution with probability k , which allows us to estimate the realization ^k .
                                                             i
For instance, if k = 0.5 but nk = 1 for some block k , then ^k can only be equal to 0 or 1,
and it will take either value in a given iteration with 50% probability.
    Thus, for each iteration of the Monte Carlo, we draw a random sample from the pop-
ulation for all blocks k across all attendance area pairs (s, s ), under the assumption that
each block k contains only nk students. Each student within block k is assigned to type
A (as opposed to type B ) based on nk independent draws from the Bernoulli distribution
                                                        i
with probability k . For each Monte Carlo iteration i, ^k is calculated as the number of
type A students drawn in block k divided by the number of draws nk . Next, we estimate
^ i := 
       ^i - ^i               ^i   ^i
  S          placebo , where  and placebo are obtained for each iteration i from equations (14)

and (15), respectively. We repeat this process a total of I = 10, 000 iterations.


B.2     Baseline Results

In Figure B.1 we compare ^I =     1       ^ i with S for different values of nk . Given that S
                                          
                          S       I   i     S

is a population parameter, it is by definition invariant to the value of nk . However, while ^I
                                                                                              S



                                                43
can change with nk , it is in practice remarkably similar for different values of nk . We also
show that the 95% confidence interval narrows as nk increases; though even for nk = 100,
S lies well within the confidence interval.
       This suggests that our method allows us to circumvent the issue of small samples that
makes it infeasible to estimate the log-on-log regression (equation (8)).41 Indeed, our method
performs very well irrespective of the value of nk . While ^ I = 0.6010 for nk = 1 and
                                                             S
^ I = 0.6014 for nk = 100, the true value of the parameter is S = 0.5972.
  S                                      1
                                         .8
                                         .6
                                         .4
                                         .2
                                         0




                                              0      20        40              60         80   100
                                                           Number of Students Per Block



                                       Figure B.1: ^ I (solid) and S (dashed)
                                                     S

        Notes : This figure plots ^ I (solid curve) and S (dashed curve) for each value of nk . There is a total of I = 10, 000
                                    S
        iterations for each value of nk .




       To provide some context, Figure B.2 shows a plot analogous to Figure 5 from a typical
iteration of the Monte Carlo with nk = 1  k . It shows the proportion of students of type
A for each block kl . This figure looks very similar to Figure 5. In particular, the slope
as we approach the boundary from the left is very similar to the slope as we approach the
boundary from the right. We will show below how Figure B.2 would look very different from
Figure 5 under violations of Assumption 2 .
                                                                                                                                    
                                                                                                                    i      i
                                                                                                                   ^k 1
                                                                                                                        1-^k
  41                                                                                                                            1
       To see why the regression is infeasible, note that the left-hand-side of equation (8), ln                    i       i
                                                                                                                                    , is
                                                                                                                   ^k    1-^k
                                                                                                                     1          1

undefined for nk = 1. In practice the regression is not feasible for nk  100, as one can always find at least
                         i          i
one block k with either ^k = 0 or ^k  = 1, especially for blocks with low or high values of k .




                                                                    44
                                                1
                                                .8
                                     Probability of Type A
                                         .4     .2
                                                0    .6
                                                             -30   -25   -20   -15   -10   -5     0     5   10   15   20   25   30
                                                                                                Block



             Figure B.2: Analogous Plot to Figure 5 for a typical iteration of the Monte
                                              Carlo

      Notes : This figure is analogous to Figure 5, for a typical iteration of the Monte Carlo with nk = 1. It shows the
      proportion of students of type A for each block indexed based on their distance to the boundary, calculated across
      all attendance area pairs. For each pair, the school on the right is the one with the higher school proportion of
      type A students.




B.3       Geographic Features Coinciding with Boundaries

In this section we consider one specific type of violation from our identifying assumptions.
We assume that boundaries coincide with geographic features for all 3,000 boundary pairs.
We report the case in which people do not want to reside near that geographic feature (e.g.,
a major road), although we also find similar conclusions for the case in which people prefer
to reside near it (e.g., a lake). Specifically, we use the parameter values from the baseline
case, with the following exception: instead of the neighborhood component being represented
simply by  .Nk , as in the baseline case, we define it to be   Nk +   |dk |, where |dk |
represents the absolute value of the distance from block k to the boundary. Higher values
of  imply that people of type  prefer residing farther from the boundary with a greater
intensity. We report the case in which A  B , although a similar conclusion can be drawn
from the opposite case. We carry out several different Monte Carlo experiments, considering
different preference gaps between A and B .




                                                                                            45
                                   1
                                   .8
                                   .6
                                   .4
                                   .2
                                   0
                                        1        2          3           4          5
                                                            



                  Figure B.3: ^ I (solid) and S (dashed) for Different Values of :
                                S
                                        Distance-to-Boundary

     Notes : This figure plots ^ I (solid curve) and S (dashed curve) for each value of . We hold constant B = 0.01
                                 S
     and set A = B . There is a total of I=10,000 iterations for each value of .




    The results are shown in Figure B.3. In the horizontal axis,  represents the gap between
                                   ^ I and S as we change  :=                          A
A and B . Specifically, we compare   S                                                 B
                                                                                           with B = 0.01. There
is no bias for  = 1, but the bias increases as  increases.
    We now show how Figure B.2 (or its empirical version, Figure 5) serves as a good
diagnostic tool for detecting this potential bias. Figure B.4 shows what Figure B.2 would
look like for selected hypothetical values of . When  = 1, we see that the figure looks very
similar to Figure B.2 (the baseline case). When  = 2, we already see evidence that Figure
B.4 looks different from Figure B.2. In particular, the two sides of the boundary have very
different slopes. This pattern becomes even clearer when  grows further, with a pronounced
difference in the slopes across the boundary.
    Figure B.4 is obtained from a typical Monte Carlo iteration, and it is shown here simply
for concreteness in the discussion. In reality, there are I such figures, one for each iteration.
More formally, for each value of , we test the equality of the slopes on the left-hand-side
and right-hand-side of the boundary for all iterations. We use the sample of observations
for the half of each attendance area closer to the boundary. In all I = 10, 000 iterations,
we are able to reject the null hypothesis that the slopes are the same for   2 at the 95%
level of confidence. For  = 2, we calculate S = 0.5328 and ^ S = 0.5461. We believe a

conservative conclusion from this exercise is that Figure 5 has the power to detect biases due
to this concern on the order of two percentage points or larger.

                                                          46
                   1




                                                                                                                              1
                   .8




                                                                                                                              .8
        Probability of Type A




                                                                                                                   Probability of Type A
                        .6




                                                                                                                                   .6
            .4




                                                                                                                       .4
                   .2




                                                                                                                              .2
                   0




                                                                                                                              0
                                    -30   -25    -20   -15   -10   -5      0     5   10   15   20   25   30                                    -30   -25   -20   -15   -10   -5     0     5   10   15   20   25   30
                                                                         Block                                                                                                    Block



                                                              (a)  = 1                                                                                                 (b)  = 2
                       1




                                                                                                                                  1
                       .8




                                                                                                                                  .8
            Probability of Type A




                                                                                                                       Probability of Type A
                            .6




                                                                                                                                       .6
                .4




                                                                                                                           .4
                       .2




                                                                                                                                  .2
                       0




                                                                                                                                  0




                                    -30   -25    -20   -15   -10    -5     0     5   10   15   20   25   30                                    -30   -25   -20   -15   -10   -5     0     5   10   15   20   25   30
                                                                         Block                                                                                                    Block



                                                                   (c)  = 3                                                                                              (d)  = 5

                                                Figure B.4: Simulated Versions of Figure 5 for Different Values of :
                                                                      Distance-to-Boundary
      Notes : These panels show simulated figures analogous to Figure 5 for the distance-to-boundary analysis. We hold
      constant B = 0.01 and set A = B , and change the values of .




B.4               Distance to School

In the following Monte Carlo experiment, we study the implications of another violation from
our identifying assumptions. We consider the scenario in which parents also care about the
distance between their residence and assigned school. They may care about it, for instance,
because of commuting to school, or rather because the school serves as a coordinated location
for students to interact outside school hours (e.g., using the playground).
    We keep the same parameter values as in the baseline case, except for the following
change: instead of the school component of the utility function being represented simply by
  Sk , as before, we define it to be   Sk -   |dk |, where |dk | represents the absolute value


                                                                                                              47
of the distance from block k to the school assigned to block k . We assume that the school
location is in the middle of the attendance area, and we report the results for the case in
which A  B .42
      Figure B.5 shows what happens with ^ S and S as the preference gap (represented on
                                                         ^ S and S as we change  :=                                     A
the horizontal axis) increases. Specifically, we compare                                                                B

with B = 0.01. As before, there is no bias when  = 1, and the bias increases as  grows.
      Once again, we find that Figure B.2 is a good diagnostic tool for detecting whether our
estimates will be biased due to this reason. To see why, Figure B.6 shows what Figure B.2
would look like for selected hypothetical values of . For  = 1, the plot looks very similar
to Figure B.2 in the baseline case, as expected. For  = 2, it already looks very different,
and this difference only grows as  grows. In particular, the two sides of the boundary have
very different slopes.
      As in the previous Monte Carlo experiment, we test the equality of the slopes on the
left-hand-side and right-hand-side of the boundary for all iterations and for all values of .
In all I = 10, 000 iterations, we are able to reject the null hypothesis that the slopes are the
same for   2 at the 95% level of confidence. For  = 2, we calculate S = 0.5843 and
^ S = 0.5778. We believe a conservative conclusion from this exercise is that Figure 5 has

the power to detect biases due to this concern on the order of one percentage point or larger.
                                     1
                                     .8
                                     .6
                                     .4
                                     .2
                                     0




                                          1        2          3           4          5
                                                              



                    Figure B.5: ^ S (solid) and S (dashed) for Different Values of :
                                            Distance-to-School

       Notes : This figure plots ^ S (solid curve) and S (dashed curve) for each value of . We hold constant B = 0.01
       and set A = B . The school's location is assumed to be in the middle of the attendance area.


 42
      The conclusions from the opposite case (A  B ) are very similar.



                                                            48
                  1




                                                                                                                             1
                  .8




                                                                                                                             .8
       Probability of Type A




                                                                                                                  Probability of Type A
                       .6




                                                                                                                                  .6
           .4




                                                                                                                      .4
                  .2




                                                                                                                             .2
                  0




                                                                                                                             0
                                   -30   -25    -20   -15   -10   -5      0     5   10   15   20   25   30                                    -30   -25   -20   -15   -10   -5     0     5   10   15   20   25   30
                                                                        Block                                                                                                    Block



                                                             (a)  = 1                                                                                                 (b)  = 2
                      1




                                                                                                                                 1
                      .8




                                                                                                                                 .8
           Probability of Type A




                                                                                                                      Probability of Type A
                           .6




                                                                                                                                      .6
               .4




                                                                                                                          .4
                      .2




                                                                                                                                 .2
                      0




                                                                                                                                 0




                                   -30   -25    -20   -15   -10    -5     0     5   10   15   20   25   30                                    -30   -25   -20   -15   -10   -5     0     5   10   15   20   25   30
                                                                        Block                                                                                                    Block



                                                                  (c)  = 3                                                                                              (d)  = 5

                                               Figure B.6: Simulated Versions of Figure 5 for Different Values of :
                                                                      Distance-to-School

     Notes : These panels show simulated figures analogous to Figure 5 for the distance-to-school analysis. We hold
     constant B = 0.01 and set A = B , and change the values of .



Remark 2. The approach of using Figure 5 as a diagnostic check may also be relevant to the
boundary fixed effects literature. For instance, a common approach to allay the concern raised
in Section B.3 is to drop from the analysis boundaries that are close to observable features,
such as roads or rivers. Our approach complements this approach for three reasons: (i) not
all observed features anticipated to be barriers necessarily render the identifying assumptions
invalid (false negative); (ii) it is possible that other boundaries should be dropped because of
unobserved or unanticipated barriers (false positive); and (iii) Figure 5 allows us to indirectly
gauge whether the identifying assumption is a good approximation, in the sense that there
are not enough boundaries coinciding with geographic features for this issue to be of practical
concern.

                                                                                                             49
C     Supporting Figures




                                                                                                                                          Prop. of Students who are Economically Advantaged
                                        .65




                                                                                                                                                                                   .65
        Prop. of Students who are White
                          .55




                                                                                                                                                                     .55
           .45




                                                                                                                                                       .45
                           .35




                                                                                                                                        .35
                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30                                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30



                                                           (a) White, Elementary                                                        (b) Economically Advantaged, Elementary



                                                                                                                                          Prop. of Students who are Economically Advantaged
                                        .65




                                                                                                                                                                                   .65
        Prop. of Students who are White
                          .55




                                                                                                                                                                     .55
           .45




                                                                                                                                                       .45
                           .35




                                                                                                                                        .35




                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30                                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30



                                                                (c) White, Middle                                                                                                        (d) Economically Advantaged, Middle
                                                                                                                                          Prop. of Students who are Economically Advantaged
                                        .65




                                                                                                                                                                                   .65
        Prop. of Students who are White
                          .55




                                                                                                                                                                     .55
           .45




                                                                                                                                                       .45
                           .35




                                                                                                                                        .35




                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30                                                              k30   k25   k20   k15   k10   k5   k1 k'1   k'5   k'10   k'15   k'20   k'25   k'30



                                                            (e) White, Secondary                                                                         (f) Economically Advantaged, Secondary

                                                          Figure C.1: Proportion of Students of a Given Type in Each Block

    Notes : This figure plots the average proportion of students who are white (left panel) or economically advantaged
    (right panel) across all blocks of type kl (kl ) (each block representing a different boundary). The upper, middle
    and lower panel corresponds to elementary, middle and secondary grade ranges, respectively. The index l reflects
    the number of degrees of separation from the boundary. See footnote 19 for details on how l is measured.




                                                                                                                                   50
