                             NBER WORKING PAPER SERIES




                                  REAL CREDIT CYCLES

                                       Pedro Bordalo
                                      Nicola Gennaioli
                                      Andrei Shleifer
                                      Stephen J. Terry

                                     Working Paper 28416
                             http://www.nber.org/papers/w28416


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                   January 2021




We thank audiences at FRB Minneapolis, Yale Finance, Harvard Business School Finance,
NBER Behavioral Macro, Northwestern Kellogg Finance, Stanford SITE Uncertainty, NHH, the
European Central Bank, Boston University, Harvard Economics, NBER Impulse and Propagation
Mechanisms, the AEAs, Queen Mary University of London, the Econometric Society, and CREi-
UPF, our discussants Alp Simsek and Cosmin Ilut, as well as Spencer Kwon, for valuable
comments and suggestions. The views expressed herein are those of the authors and do not
necessarily reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2021 by Pedro Bordalo, Nicola Gennaioli, Andrei Shleifer, and Stephen J. Terry. All rights
reserved. Short sections of text, not to exceed two paragraphs, may be quoted without explicit
permission provided that full credit, including © notice, is given to the source.
Real Credit Cycles
Pedro Bordalo, Nicola Gennaioli, Andrei Shleifer, and Stephen J. Terry
NBER Working Paper No. 28416
January 2021
JEL No. E03,E32,E44

                                          ABSTRACT

We incorporate diagnostic expectations, a psychologically founded model of overreaction to
news, into a workhorse business cycle model with heterogeneous firms and risky debt. A realistic
degree of diagnosticity, estimated from the forecast errors of managers of US listed firms, creates
financial fragility during good times. This mechanism produces countercyclical credit spreads
and yields two key features of observed credit cycles. First, it generates boom-bust dynamics at
the firm and aggregate levels: cheap credit predicts future increases in spreads, low bond returns,
and investment drops. Second, it produces the spike in spreads observed in 2008-9 from modest
negative TFP shocks. Diagnostic expectations offer a parsimonious mechanism generating
realistic financial reversals in conventional business cycle models.


Pedro Bordalo                                    Andrei Shleifer
Saïd Business School                             Department of Economics
University of Oxford                             Harvard University
Park End Street                                  Littauer Center M-9
Oxford, OX1 1HP                                  Cambridge, MA 02138
United Kingdom                                   and NBER
pedro.bordalo@sbs.ox.ac.uk                       ashleifer@harvard.edu

Nicola Gennaioli                                 Stephen J. Terry
Department of Finance                            Department of Economics
Università Bocconi                               Boston University
Via Roentgen 1                                   Boston, MA 02215
20136 Milan, Italy                               stephenjamesterry@gmail.com
nicola.gennaioli@unibocconi.it
1     Introduction
Developed economies experience recurrent boom-bust cycles in financial and economic activity.
In the US, buoyant credit markets - measured by low credit spreads - tend to be followed by
a financial tightening in which credit spreads rise, investment growth drops, and GDP growth
declines (L´
           opez-Salido et al., 2017). In panels of developed countries, rapid credit expansions
(Schularick and Taylor, 2012) and growth of private debt (Mian et al., 2017; Greenwood et al.,
2020) forecast declines in real economic activity.
    According to a longstanding hypothesis (Minsky, 1977; Kindleberger, 1978), these boom-bust
cycles are driven by non-rational beliefs. During good times, the argument goes, investors are
too optimistic, so credit and investment overexpand. Subsequently, beliefs cool off, credit markets
tighten, real activity declines, and default rates increase. In this mechanism, inflated expectations
and their disappointment play a key role. Two sets of facts are consistent with this view. First,
credit booms predict low and even negative returns on corporate bonds and bank stocks (Baron
and Xiong, 2017; Greenwood and Hanson, 2013). This finding is consistent with overoptimistic
pricing of credit risk in the boom. Second, there is direct evidence from expectations data. When
credit spreads are low, credit analysts forecast spreads to be too low in the future (Bordalo et al.,
2018), and stock analysts are systematically too optimistic about the future profitability of risky
firms (Gulen et al., 2019). This evidence suggests that beliefs overreact to current conditions,
becoming too optimistic in good times and too pessimistic in bad times. Can such overreaction
produce the boom-bust fluctuations of financial and real activity observed in reality?
    We address this question by presenting a workhorse real business cycle (RBC) model in which
investors overreact to total factor productivity (TFP) news. We modify a standard heterogeneous
firm model by a single parameter that regulates the overreaction of beliefs. We estimate the
model using firm-level data, which crucially includes data on managers' expectations about their
firms' profitability. We show that a realistic degree of overreaction generates dynamics that match
qualitatively, and to a good extent quantitatively, the cycles in spreads, bond returns, and invest-
ment at both the firm and aggregate levels. The rational expectations model estimated on the
same data can neither match the expectations data nor produce credit cycles. A single parameter
controlling belief overreaction offers a parsimonious way to obtain realistic boom-bust cycles in
standard business cycle models.
    The paper proceeds as follows. In Section 2 we present novel evidence based on microdata that
directly connects expectations to credit spreads, bond returns, and investment at the firm level.
We first show that managers' expectations of their firms' profits overreact to current conditions:
they are too optimistic in good times and too pessimistic in bad times. In turn, excess optimism
about a firm's future profits measured from expectations data predicts a one year-ahead increase


                                                 2
in the firm's credit spread, low realized returns on the firm's bonds, and a decline in its investment
growth. Overreacting beliefs appear to be directly linked to firms' financial and real cycles. In
the rest of the paper we investigate whether this mechanism can produce aggregate credit cycles
as well.
   In Section 3 we present our formalization of non-rational beliefs, based on diagnostic expecta-
tions (DE) (Bordalo et al., 2018). This model is founded in the psychology of selective recall. The
idea is that good news does not only increase the objective likelihood of good future outcomes.
Good news also causes such outcomes to be top of mind and thus overweighted in beliefs. In our
setting diagnostic beliefs give rise to the expectations formula:


                        Et (At+1 ) = Et (At+1 ) +  [Et (At+1 ) - Et-1 (At+1 )] ,                  (1)

   where At+1 is future TFP, Et (·) is the rational expectation at time t, and   0 is a diagnosticity
parameter. When  = 0 expectations are rational. When  > 0 agents overreact to news, becoming
too optimistic after good news and too pessimistic after bad news.
   DE have several advantages relative to other formulations such as mechanical extrapolation or
adaptive expectations. First, they are forward-looking and are therefore not directly vulnerable to
the Lucas (1976) critique. Second, DE can better account for survey evidence on the expectations
of financial analysts (Bordalo et al., 2019) and macroeconomic forecasters (Bordalo et al., 2020).
Third, the diagnosticity parameter  has already been estimated using such data, and this set of
external estimates offers an important out of sample check for our results.
   To assess whether DE yield realistic aggregate cycles, in Sections 4 and 5 we build and estimate
an RBC model in which firms are subject to idiosyncratic and common TFP shocks, both of which
follow AR(1) processes. Each firm optimally decides whether to default, how much labor to hire,
how much to invest subject to adjustment costs, as well as how much equity and how much debt to
issue. Deep-pocket risk-neutral lenders provide credit. Both managers and lenders hold identical
diagnostic expectations. We mostly focus on a partial equilibrium setting: labor is infinitely elastic
at an exogenous fixed wage. We later endogenize wages. We structurally estimate the model by
matching moments on firm-level profitability, spreads, debt, investment, and, crucially, forecast
errors. The estimated degree of diagnosticity   1 is in the ballpark of previous estimates
(Bordalo et al., 2019, 2020; Pflueger et al., 2020; d'Arienzo, 2020). Despite its nonlinearity and
the overidentified estimation with more target moments than parameters, our DE model captures
both the volatilities of, and to a large degree the correlations between, real variables, beliefs, and
financial outcomes in the firm data. To assess the role of overreacting expectations on macro
outcomes, we also estimate and simulate a rational expectations (RE) model with  fixed at 0,
which does not match predictable forecast errors at the firm level.
   Two key properties emerge from the analysis. First, the DE model matches untargeted macro

                                                   3
moments significantly better than the RE model, including the observed countercyclicality of credit
spreads. This is a robust implication: overreaction magnifies the volatility of beliefs of investors
and firms, but such excess volatility disproportionately affects the supply of credit. Fluctuations
in credit demand are dampened by diminishing returns and bankruptcy costs. Thus, in good times
overoptimistic investors are willing to supply all the extra capital demanded at a lower spread. In
bad times the reverse is true. In the RE model, beliefs are less volatile and shifts in credit demand
are relatively more important, generating procyclical spreads.
   Second, under DE, but not under RE, the reaction of aggregate investment to a given TFP
shock is highly nonlinear. In good times, even a small negative TFP shock causes a large drop in
aggregate investment, which is not the case when the same shock hits in normal times. Fragility
during good times occurs because overoptimism and hence excess debt issuance are followed by a
strong downward revision of beliefs when the adverse shock hits. Debt is then sharply repriced and
investment is cut. In this sense, DE offer a belief-based theory of the financial shocks evident in
macro-financial data (Jermann and Quadrini, 2012; Gilchrist and Zakrajsek, 2012) by generating
non-fundamental increases in the cost of credit caused by the waning of optimism.
   In Section 6 we assess the ability of this mechanism to account for observed credit cycle facts.
Using simulated data, we first show that the DE model yields predictable boom-bust dynamics in
investment and credit spreads and also predictable bond returns at both the aggregate (L´
                                                                                        opez-
Salido et al., 2017; Greenwood and Hanson, 2013) and the firm levels. The RE model can generate
some reversals in spreads from mean reversion in productivity but cannot account for any of the
other facts.
   We next ask how large a TFP shock is required in our model to produce the massive increase
in credit spreads observed during 2007-09 and investigate the macroeconomic implications of such
a shock. We find that the empirically observed TFP decline of 1.5% is exactly sufficient to justify
the observed increase in credit spreads in 2007-09. Moreover, it generates drops in aggregate
investment, credit, and in earnings expectations that are quantitatively consistent with the data.
This result is surprising given that our model abstracts from important elements of large scale
crises such as asset price bubbles and bank runs. The RE model is entirely incapable of producing
the increase in spreads from the same TFP shock.
   In Section 7 we report two robustness exercises. First, we simulate a version of the model
in which only firms have diagnostic expectations while lenders hold rational expectations. Now
credit cycles are dampened, consistent with the centrality of an overreacting supply of capital for
our findings. Second, we endogenize the real wage by adding to the model a labor choice with
convex effort cost. As expected, this modification dampens financial volatility: in good times real
wages increase, reducing the incentives of firms to lever up and invest. This effect, however, does
not eliminate sizable fragility after good times, even with fully flexible wages.


                                                  4
   Overall, our DE model offers a theory of endogenous financial fragility. It accounts well for
boom-bust dynamics in credit market conditions. It also amplifies overall macroeconomic volatility
relative to RE, even though in our model investment and output move less than in observed
credit cycles. Enriching our purely supply-driven setup with realistic ingredients such as shifts in
aggregate demand (Farhi and Werning, 2020), time-varying capacity utilization (King and Rebelo,
1999), or sharp cuts to firm-level employment in bad times (Ilut et al., 2018) may produce realistic
macroeconomic volatility in a way consistent with the observed excess volatility in financial markets
and with beliefs data.
   Our paper is related to two strands of work in macroeconomics. A large literature studies
financial frictions as amplifiers of shocks under rational expectations (Bernanke and Gertler, 1989;
Bernanke et al., 1999; Kiyotaki and Moore, 1997). This work views prolonged recessions after
financial booms as the result of fire sales (Shleifer and Vishny, 1992; Lorenzoni, 2008; Stein, 2012;
D´
 avila and Korinek, 2017), intermediary leverage/bank runs (Brunnermeier et al., 2012; He and
Krishnamurthy, 2019; Eggertsson and Krugman, 2012; Guerrieri and Lorenzoni, 2017), demand
externalities (Farhi and Werning, 2016; Korinek and Simsek, 2016), and slow reallocation of excess-
capital toward more productive sectors (Rognlie et al., 2018). To capture non-fundamentals driven
crises, this work often relies on financial shocks to required returns or collateral constraints, or
multiple equilibria (Gu et al., 2013). Arellano et al. (2019) analyze the 2008 crisis by adding
uncertainty shocks to a standard business cycle model. This helps account for the decline in debt
purchases, output, and labor during the Great Recession, despite the relative stability of TFP.
   Relative to this work, we depart from rational expectations. We show that realistic belief
overreaction disciplined by microdata generates substantial financial shocks and credit cycles from
small TFP shocks in an RBC framework. Some recent work combines DE with the amplification
mechanisms above. Maxted (2020) introduces diagnostic expectations into He and Krishnamurthy
(2019)'s model. Krishnamurthy and Li (2020) also jointly consider beliefs and intermediation
within this type of framework. Relatedly, Farhi and Werning (2020) and Caballero and Simsek
(2020) analyze demand externalities in models with extrapolative expectations.
   A second strand of work studies departures from rationality, often in the form of partial in-
formation and inattention. These papers do not typically consider belief overreaction and credit
cycles. Coibion and Gorodnichenko (2015) link macroeconomic forecast errors to information
rigidities as in Woodford (2003). Kohlhas and Walther (2020) model asymmetric attention paid
to distinct macroeconomic variables. Kozlowski et al. (2017) links belief dynamics to the per-
sistence of the Great Recession. Angeletos et al. (Forthcoming) relies on dispersed information
and overextrapolation of macroeconomic outcomes. Falato and Xiao (2020) models imperfect in-
formation and learning about corporate profits. Adam et al. (2017) models asset price booms
relying on subjective price beliefs by investors. Schaal and Taschereau-Dumouchel (2020) models


                                                 5
herding and dispersed information in a setting that generates boom-bust dynamics. Bianchi et al.
(2020) measures macro belief distortions using professional forecaster data. Jaimovich and Rebelo
(2007) study the impact of other belief distortions in quantitative macro models without financial
frictions. Bianchi et al. (2018) and Ilut and Saijo (2020) study ambiguity aversion and fluctuations
in real aggregates and the stock market, concluding that ambiguity aversion can deliver business
cycle comovement and amplification. Ambiguity aversion can generate excess volatility in beliefs,
but it has a hard time explaining overoptimism, unless a preference for ambiguity is added, as in
Bhandari et al. (2019).1 Our approach incorporates waves of extensive optimism and pessimism.
    Finally, behavioral finance has studied the role of beliefs in credit cycles, but without assessing
quantitatively the promise of this approach. Bordalo et al. (2018) offers a stylized model of credit
cycles with diagnostic expectations. Greenwood et al. (2019) builds a model in which credit
markets extrapolate from recent default history, so that crises are slow moving. Richter and
Zimmermann (2020) studies bank profits and the occurrence of banking crises with behavioral
beliefs. Fostel and Geanakoplos (2014) and Simsek (2013) emphasize belief heterogeneity.


2     Evidence on Firm-Level Credit Cycles
If aggregate credit cycles are produced by overreacting beliefs, the same mechanism should produce
credit cycles at the firm level. When a firm goes through good times, overreaction should cause
excess optimism about its future prospects. When such optimism is systematically disappointed,
there should be: i) a predictable increase in the firm's credit spread, ii) predictably low returns
on the firm's bonds, and iii) a predictable drop in the firm's investment. This section shows that
such predictable firm-level cycles indeed occur, even after controlling for macro shocks. In Section
5 we use this firm-level variation to estimate our model and see whether it accounts for boom-bust
cycles in the macroeconomy.
    We use micro data on firm-level forecasts from the IBES manager guidance database. This
panel records, for an individual firm-fiscal year, the prediction offered by the firm's management
for their own company's profits or earnings over the next year. We exploit bundled forecasts,
i.e., predictions made concurrently with the release of the current year's financials, in a sample
spanning the 1999-2018 period. The data from US public firms links to the Compustat database
providing the standard firm financial information. To study firm-level credit spreads, we use
the Mergent Fixed Income Securities Database (FISD), which contains issuance information on
individual securities. We obtain data on bond returns using the FINRA's Trade Reporting and
Compliance Engine (TRACE) dataset, which contains detailed information on secondary market
   1
     More broadly, a literature links business cycles to beliefs with ambiguity or robust control mechanisms (Hansen
and Sargent, 2001a,b; Ilut and Schneider, 2014). Relative to this work, our model of beliefs contributes an expla-
nation for credit cycles and for predictable forecast errors.


                                                         6
                                Table 1: Predictable Forecast Errors


                                 (1)                (2)                 (3)                (4)
                           Fcst. Errort+1      Fcst. Errort+1     Fcst. Errort+1      Fcst. Errort+1

         Forecastt             -0.242***
                               (0.030)
         Profitst                               -0.043***
                                                  (0.021)
       Investmentt                                                  -0.455***
                                                                     (0.065)
      Debt Issuancet                                                                    -0.040***
                                                                                          (0.007)
     Firm Effect                  X                 X                   X                  X
     Time Effects                 X                 X                   X                  X
     Years                     1999-18           1999-18             1999-18            1999-18
     Firm-Years                 9664              9664                9664               9664

     Notes: The table reports estimates of specifications on the merged Compustat - IBES Guidance
     sample at the firm-fiscal year level. Forecasts are earnings guidance, profits are earnings,
     investment is tangible capital expenditures, debt issuance is end-of-period net debt, and forecast
     errors are actual earnings minus manager guidance at a 1-year horizon. All series are relative to
     firm tangible capital stocks at the beginning of the year. Standard errors are clustered at the firm
     level. * = 10% level, ** = 5% level, and ***=1% level. The standard deviation of future forecast
     errors is 0.784, the standard deviation of forecasts is 0.925, the standard deviation of profits is
     1.031, the standard deviation of investment is 0.233, and the standard deviation of debt issuance
     is 3.803. For all series, 0.01=1% relative to a firm's tangible capital stock.




transactions from bond dealers. The combined FISD-TRACE bond return sample covers the years
                                                  -0.106015
2003-2018. Appendix B provides more information on the data sources, our sample construction,
descriptive statistics, etc.
   To begin, we assess whether expectations of firm profitability overreact to current conditions.
We regress next year's firm-level forecast errors, defined as realized minus predicted profits, on
current-year firm-level financial outcomes. Under rational expectations, the manager's forecast
errors should be unpredictable based on any information available to the firm when the forecast is
made. In contrast, if beliefs about the firm's earnings overreact, displaying overoptimism during
good times and undue pessimism during bad times, then future forecast errors should be negatively
correlated with current firm-level fundamentals.
   Table 1 reports the results. Each specification includes firm and time effects, identifying solely


                                                          7
off of within-firm variation not driven by common shifts across firms. In column (1), we see that
firms making high forecasts of earnings for next year experience more negative earnings surprises
on average. In column (2), firms with higher profits today are systematically disappointed next
year. In column (3), firms investing more today issue overly optimistic forecasts. Column (4)
reports that firms issuing more debt today are also disappointed next year. The magnitudes are
meaningful. For example, a one-standard deviation higher firm investment rate, about 23% higher,
is on average associated with 23% × 0.455  11% stronger disappointment in earnings next year.
The evidence on managers' beliefs is consistent with belief overreaction, confirming the findings
obtained by Gennaioli et al. (2016) and Barrero (2020) using different data.2 '3
       A series of checks in the empirical Appendix B establishes robustness in the conclusions from
Table 1 to a range of different sample and specification choices. We exclude the Great Recession
in Table B2, to check whether these patterns are driven by a single episode. Motivated by the
arguments in Bertomeu et al. (2020) that forecast manipulation is more common in firms that
report fewer forecasts, in Table B3 we drop firms with fewer than five years of earnings guidance.
We exclude firms with high-yield debt in Table B4 to verify that our findings are not driven only
by the riskiest firms. We also control flexibly for firm-level trends, running regressions in first
differences in Table B5. In all cases, we continue to find statistically precise evidence consistent
with belief overreaction with small differences in magnitudes.
       Building on this analysis, we next assess whether the overreaction of beliefs is associated with
firm-level credit cycles. Table 2 estimates a range of specifications on our sample combining data
on firm financials, earnings forecast errors, and bond returns. Columns (1), (3), and (5) report OLS
regressions. Firms with lower forecast errors ­ lower profits relative to expectations ­ experience
lower bond returns, higher spread growth, and lower investment growth, with varying degrees of
precision in our OLS estimates across outcomes. This pattern of results is, however, consistent
with rational expectations because future news can drive all of these outcomes.
       To check whether periods of overoptimism predict low bond returns, rising spreads, and de-
clining investment, we run an IV regression. In the first stage, which is analogous to the results
from Table 1 for this sample, we regress future forecast errors on current investment. This allows
us to identify times of excess optimism (pessimism) as those in which investment is so high (low)
that it ex-ante predicts future negative (positive) forecast errors. Investment is a good first-stage
predictor because, as shown in Gennaioli et al. (2016), it reflects the manager's beliefs without
being affected by the measurement error that may contaminate survey expectations and generate
   2
     The recent literature on overreaction stresses the predictability of forecast errors from forecast revisions (Bordalo
et al., 2020, 2019; Coibion and Gorodnichenko, 2015). Since manager profit forecasts are released less frequently,
and for fewer horizons, we do not have enough data to perform this type of revision-based analysis.
   3
     Bouchaud et al. (2019) study equity analysts' short-term earnings forecasts which, while correlated with man-
ager forecasts, display a form of underreaction. Both the variable forecasted and the incentives involved are distinct
in their sample.


                                                            8
                  Table 2: Linking Forecast Errors and Firm Credit Cycles

                            (1)             (2)             (3)             (4)            (5)             (6)
  Dependent Variable:     Returnt         Returnt        Spreadt         Spreadt        Investmentt  Investmentt
  Estimation               OLS              IV           OLS              IV              OLS           IV

   Fcst. Errort            0.001          0.007*        -0.004***       -0.011***         0.009         0.485***
                          (0.001)         (0.004)         (0.001)         (0.004)        (0.007)         (0.061)

    First Stage                         Fcst. Errort                    Fcst. Errort                   Fcst. Errort

  Investmentt-1                         -0.562***                       -0.562***                       -0.562***
                                          (0.105)                         (0.105)                         (0.105)
  Years                  2003-18         2003-18         2003-18         2003-18         2003-18         2003-18
  Firm-Years              2852            2852            2852            2852            2852            2852
  Time Effects              X               X               X               X               X               X
  First Stage F                           28.94                           28.94                           28.94
  Notes: The table reports estimates of specifications on the merged Compustat - IBES - FISD/TRACE sample at the
  firm-fiscal year level. The top panel plots OLS and IV second-stage estimates. The bottom panel, where relevant,
  reports IV first-stage estimates. Columns (3)-(4) control for lagged spreads, and columns (5)-(6) control for current
  profits in the second stage. Standard errors are clustered at the firm level. * = 10% level, ** = 5% level, and ***=1%
  level. The standard deviation of the bond return is 0.014, the standard deviation of spread growth is 0.024, the
  standard deviation of investment growth is 0.090, the standard deviation of the forecast error is 0.438, and the
  standard deviation of lagged investment is 0.133. For all series, 0.01=1% relative to a firm's tangible capital stock.




spurious predictability of forecast errors.
       In the second stage, we regress bond returns, the change in credit spreads, and investment
growth on the forecast errors predicted in the first stage. This IV strategy reveals whether the
predictable reversal of expectations itself predicts reversals of firm-level conditions, a result that
is not consistent with rationality. Columns (2), (4), and (6) present the second-stage estimation
results. In all these specifications, we control for time effects.4 We find that periods for which be-
liefs about a firm are predictably overoptimistic and hence subsequently disappointed, controlling
for macro shocks, also display disappointing returns on the firm's bonds, an increase in its credit
spread, and a decline in investment.5 The magnitudes are meaningful. For example, in column (2)
a firm predictably disappointed with a one standard deviation lower forecast error sees its bond
returns fall by 0.007 × 0.438  0.3 percentage points on average, a sizable decline relative to the
standard deviation of around 1.4 percentage points for bond returns in our sample.
   4
     If we add firm effects the results are confirmed directionally but we lose power in our first-stage regressions due
to a smaller cross-sectional dimension due to the requirement that we also need firm-level credit spreads.
   5
     In Appendix B we also check that these firm-level cycles are not driven by highly risky firms, which may display
a stronger reaction to macro shocks. We thus repeat the exercise in Table B7 for the subset of investment grade
firms, excluding all firms with high-yield debt. Our results are confirmed.


                                                            9
        Can mean reversion in fundamentals account for the spread and investment reversals we ob-
serve? In the spread regressions in columns (3)-(4) we control for the lagged spread and in the
investment regressions in columns (5)-(6) for current profits, so the results suggest otherwise.6
Also, such concerns are not relevant for realized bond returns, which should be unpredictable.7
        To summarize, overreacting expectations are directly linked to reversals in bond returns, in
spreads, and in investment at the firm level. Can this mechanism, once aggregated up, account
for aggregate credit cycles? To address this question, Section 3 presents our formulation of ex-
pectations and shows in a stylized setting how it yields the firm-level cycles documented here. In
Section 4 we incorporate these expectations into a standard heterogeneous firm RBC setting.


3         Diagnostic Expectations and Neglected Risk
3.1        Diagnostic Expectations
Diagnostic expectations are a model of belief formation that describes how probabilistic assess-
ments depart from the Bayesian benchmark, accounting for a large body of evidence that started
with Kahneman and Tversky in the 1970s. Gennaioli and Shleifer (2010) argue that the assessed
probability of an event reflects its accessibility in memory:8 an agent who receives new information
selectively recalls outcomes that are historically most associated with the news and fails to recall
outcomes that are less associated with it. Because judgments overweight what is top of mind,
they overreact to news.
        Bordalo et al. (2018) apply this principle to a dynamic setting in which an agent forecasts a
variable Xt , say TFP, on the basis of its history. The true distribution is Markovian, denoted by
f (Xt+1 |Xt ), and stored in the agent's memory. Under DE, the agent's beliefs follow the distorted
distribution:

                                                                                       
                                                                  f (Xt+1 |Xt )
                           f  (Xt+1 |Xt )  f (Xt+1 |Xt )                                                        (2)
                                                               f (Xt+1 |Et-1 (Xt ))
        where   0 and Et-1 (Xt ) is the expectation of Xt conditional on information at t - 1 computed
using the memory database. The likelihood ratio measures the diagnosticity of outcome Xt+1 on
the basis of news at t, namely the increase in its probability relative to the case of neutral news
Xt = Et-1 (Xt ).  captures the extent to which memory focuses on such diagnostic outcomes.
When  = 0 there are no memory distortions, so expectations are rational.
    6
     The lagged spread and current profit controls, while reassuring, are not necessary for our results. Table B6 in
the empirical Appendix B reproduces Table 2 without such controls, with little resulting change in our estimates.
   7
     Here we implicitly rule out time variation in required returns. Models of time varying risk aversion are unable
to account for the predictable negative excess returns on high yield bonds (Greenwood and Hanson, 2013) and are
also not consistent with data on expectations of returns (Greenwood and Shleifer, 2014). Finally, data on earnings
expectations outperform these models in accounting for stock price volatility (Bordalo et al., 2019).
   8
     Bordalo et al. (2021) present experimental evidence for the link between memory and probability assessments.

                                                        10
   Equation (2) simplifies the general DE formulation in two ways. First, it assumes that Xt
is perfectly observable. Bordalo et al. (2019, 2020) allow for information frictions such as dis-
persed information about Xt . Second, Equation (2) captures overreaction to current news only.
Other applications of DE allow for overreaction to a longer streak of news (Bordalo et al., 2019;
d'Arienzo, 2020; Maxted, 2020). These features are psychologically plausible and can match per-
sistent belief distortions, such as slowly brewing asset price bubbles (Bordalo et al., Forthcoming).
The specification of Equation (2) focuses our analysis on the basic overreaction mechanism.
   DE offer two advantages relative to other models of non-rational expectations used in macroe-
conomics and finance. First, they are forward-looking: updating in (2) depends on the true data
generating process f (Xt+1 |Xt ). This is important not only methodologically from a traditional
macro perspective (Lucas, 1976) but also in accounting for survey data. Belief revisions by profes-
sional forecasters are larger for more persistent macroeconomic and firm-level variables (Bordalo
et al., 2020, 2019; Afrouzi et al., 2020; Azeredo da Silveira et al., 2020). Forward-looking beliefs
also reconcile, in a setting with dispersed information, the well-known sluggishness of consensus
forecasts with overreacting individual-level forecasts (Bordalo et al., 2020; Coibion and Gorod-
nichenko, 2015). The forward-looking nature of DE also accounts for the fact that overreaction is
stronger for longer-term outcomes, which are truly more uncertain (d'Arienzo, 2020). The sensi-
tivity of beliefs to the underlying data generating process is not achieved in mechanical models of
belief formation such as adaptive or extrapolative expectations.
   A second advantage of DE is that departures from rationality are disciplined by a single
parameter . This parameter has now been estimated in different settings, ranging from financial
analysts forecasting firm-level earnings (Bordalo et al., 2019), to professional forecasters predicting
macroeconomic variables (Bordalo et al., 2020), to beliefs inferred from prices about interest rates
(d'Arienzo, 2020), to stock price volatility (Pflueger et al., 2020). These estimates point to a value
of  between 0.5 and 1.5, providing a valuable external benchmark to discipline our quantitative
exercise and assess its reliability.

3.2    Diagnostic Expectations and Supply-Driven Bond Pricing: A Toy
       Model
A stylized example illustrates how diagnosticity generates predictability of forecast errors and the
boom-bust cycles documented in Section 2. Suppose that a firm seeks to roll over a fixed amount
b of one period bonds by selling them to deep-pocket risk-neutral lenders. Lenders demand a
constant expected return R, which we normalize to one.
   Debt is defaultable. If at t lenders believe that default in the next period occurs with probability
                                                  1
t , they charge the firm an interest rate Rt =   1-t.   The spread paid by the firm is then given by:



                                                  11
                                                         
                                                        t
                                       Rt - 1  st =       
                                                            ,                                      (3)
                                                      1 - t
                                              
which increases in the probability of default t perceived by investors. Suppose now that the firm
defaults at time t if and only if its productivity is sufficiently low, At < A , where A is a given
threshold. TFP follows an AR(1) process, ln At = ln At-1 + t , where   (0, 1) and t is Gaussian
with mean zero and variance  2 . From Equation (2), at time t the diagnostic lenders perceive next
period productivity to be Gaussian with mean:


                                    Et (ln At+1 ) =  ln At + t ,                                   (4)

   and variance  2 . DE are too optimistic after good news t > 0 and too pessimistic after bad
news t < 0. The perceived probability of default is then:

                                           ln A - Et (ln At+1 )
                                   t =                          ,                                  (5)
                                                   
   where  (·) is the standardized Gaussian CDF, which is naturally too low after good news and
too high after bad news.
   In this stylized model, predictability of forecast errors follows directly from Equation (4):


                           Cov ln At+1 - E                        2
                                          t (ln At+1 ) , ln At = - < 0.

   High current productivity is associated with good news and thus with excessive optimism. This
mechanism can account for the predictability of forecast errors in Table 1, which cannot occur
under RE with  = 0.
                                                                                
   The model also has implications for the path of credit spreads. Substituting t (Equation 5)
in (3) and linearizing with respect to expectations about productivity around their long run zero
mean yields:


                                      st  s - sEt (ln At+1 ) ,                                     (6)

   where s > 0 is the long run spread and s > 0. The spread drops when creditors are more
optimistic about future productivity. Inserting (4) above we obtain:


                        st  s (1 - ) + st-1 - s (1 + ) t + s2 t-1 .                                (7)

   Under RE, with  = 0, spreads mirror TFP and follow an AR(1) process with persistence
. Under DE, with  > 0, there are two differences. First, TFP shocks are amplified: after a
positive TFP shock, beliefs become too optimistic and the spread drops too much. Second, part
of the effect of current news reverts next period, as optimism wanes and the spread increases, as

                                                12
shown by the term s2 t-1 . According to Equation (7) the reversals in spreads documented in
Table 2 conflate fundamental mean reversion in TFP (the term st-1 in (7)), and waning of past
optimism (the term s2 t-1 ). Controlling for past spreads st-1 in Table 2 should then help single
out reversals in spreads due to reversals in beliefs.
    Finally, the model generates predictability in bond returns. Excess returns are predictable
whenever the current spread st differs from its RE counterpart st , obtained when  = 0 in Equation

(7). The distortion in spreads is given by:

                                                st - st  -st .                                                   (8)

    When current expectations are overly optimistic, t > 0, bonds are overpriced. As a result,
their future return tends to be low. The converse holds when expectations are pessimistic.
    In sum, DE for lenders can generate the firm-level boom-bust cycles in expectations, spreads,
and returns documented in Section 2. Can they also account for macro credit cycles when the
demand for credit and investment fluctuates, when there are idiosyncratic and aggregate TFP
shocks, and when wages flexibly adjust? The rest of the paper addresses this question.


4     RBC Model with Diagnostic Firms and Lenders
Firms with different and persistent productivities decide whether to default, hire labor, invest,
issue equity, and borrow subject to capital adjustment costs. Credit is supplied by a continuum
of risk-neutral lenders. The only difference relative to a workhorse neoclassical model with firm
heterogeneity and risky debt (Khan and Thomas, 2008; Arellano et al., 2019; Gilchrist et al., 2014),
is that firms and lenders form expectations diagnostically.
    We start from a partial equilibrium analysis. The risk-free rate R and the wage rate W
are taken as given. In Section 7 we endogenize the wage. This is useful because overoptimistic
beliefs may boost labor demand and hence the real wage, which could dampen the cycle. We
instead maintain the risk-free rate R fixed, for two reasons. First, consumption-based models of
required returns make predictions on expectations of returns that are inconsistent with measured
expectations (Greenwood and Shleifer, 2014). Second, and related, the cyclical changes in the risk-
free rate generated by consumption-based models are counterfactual relative to those observed in
the data (Winberry, 2017; Cooper and Willis, 2015).9
   9
     Recent work in quantitative macroeconomics studying firm heterogeneity (Khan and Thomas, 2008; Bachmann
et al., 2013; Winberry, 2017) emphasizes that general equilibrium stochastic discount factor movements do not
necessarily lead to a dampening of business cycle nonlinearities or investment dynamics if they are structured to
produce realistic countercyclicality of real interest rates, while the traditional stochastic discount factor does in
fact dramatically dampen investment dynamics through procyclical real interest rates. Our fixed real interest rate
assumption here strikes a middle ground between these alternatives and is consistent with the evidence that the
real interest rate is not particularly cyclical (Winberry, 2017; Cooper and Willis, 2015).



                                                         13
   Time is discrete. We use to denote future values and      -1   to indicate lagged values. Uppercase
letters refer to macro or common values, lowercase letters refer to idiosyncratic objects.

4.1     Firms
The generic firm has micro-level TFP z and is subject to macro level TFP A. It uses capital k
and labor n as inputs to produce output according to a decreasing returns technology

                                     y = Azk  n ,         +  < 1.

The log of micro TFP follows the AR(1) process

                                                       2
                        log z = z log z + z , z  N (0, z ),         0 < z < 1 ,                    (9)

while the log of macro TFP follows a similar process with

                                                      2
                       log A = A log A + A , A  N (0, A ),           0 < A < 1 .                 (10)

Firms invest i in capital k with one-period time to build

                                  k = i + (1 -  )k,       0 <  < 1.

                                                              k    i 2
Investment entails quadratic adjustment costs AC (i, k ) =    2    k
                                                                         k indexed by k > 0.
      Firms act competitively. In each period, the timing of events is as follows. First, each firm
decides whether to default on its debt. If a firm defaults, its assets net of deadweight default costs
are recovered by lenders, and the firm restarts with zero capital and debt after one period. If a
firm repays, it hires labor at wage W and chooses how much to invest, how much equity to issue,
and how much one-period debt to issue. Firms maximize the expected discounted sum of current
and future payouts, where the discount rate (1 + R)-1 < 1 reflects the exogenous risk-free rate R.
   The firm's current dividend d is given by:

              d = (1 -  ) [y - W n - AC (i, k ) - ] + q  (s, k , b )b - i - b +  (R + k ).       (11)



   If d < 0 the firm issues equity which following Gomes (2001) is associated with the issuance
cost IC (d) = I (d < 0) (f + d |d|), where f > 0 is the fixed and d > 0 is the variable cost of
issuance. The firm's profits are given by its output minus the wage bill, the adjustment cost, and
a fixed production cost  > 0, net of the corporate income tax rate   (0, 1). The firm then raises
additional resources by issuing new debt b priced by the schedule q  , incurs the investment cost
i, and repays its current debt b. Finally, the firm receives tax rebates for capital depreciation and



                                                    14
interest expenses on debt.10 This formulation of dividends and specification of firm fundamentals
is standard (Strebulaev and Whited, 2012).
       To decide whether to default and how much to borrow and invest, the firm forms beliefs
about its future productivity. To assess default risk and interest rates, lenders must do the same.
Firms and lenders form identical expectations diagnostically. Given the AR(1) processes (9) and
(10), and given Equation (2), diagnostic beliefs over micro and macro TFP are described by the
lognormal processes:
                                                                       2
                                 log z |(log z, z )  N z (log z + z ), z                                      (12)
                                                                     2
                               log A |(log A, A )  N A (log A + A ), A .                                      (13)

When  > 0 the agent forecasts future productivity by overweighting current news, as if the true
productivity process follows an ARMA (1,1).11  > 0 is the only difference between our model
and a workhorse business cycle model.
       When forming beliefs about a firm, diagnostic agents consider four state variables: its current
micro TFP z , macro TFP A, the micro shock z and the macro shock A . We collect these
exogenous states in the vector s = (z, z , A, A ). A firm is also identified by two endogenous states,
its inherited capital stock k and debt b. Given an overall state (s, k, b), the firm defaults if its
diagnostically expected value from doing so is greater than its perceived value without defaulting,
and it repays otherwise. If the firm repays, it hires labor, invests, and borrows so as to maximize
the sum of the current and diagnostically expected discounted future payouts, taking into account
the possibility of default in the future.
       This problem can be written recursively. Upon entering the current period, the value of the
firm is given by:


                                  V  (s, k, b) = max VD
                                                              
                                                        (s), VN D (s, k, b) ,                                 (14)
                                                                               
       where VN D (s, k, b) is the continuation value from not defaulting and VD (s) is the continuation
                                             
from defaulting. Condition VN D (s, k, b) < VD (s) identifies states in which the firm optimally
defaults. The continuation value from not defaulting is recursively determined as:

                                                              1
                      VN D (s, k, b) = max d - IC (d) +          E V  (s , k , b )|s        .                 (15)
                                      k ,b ,n                1+R
        If the firm does not default, it optimally hires labor n, sets future capital k and debt b
so as to maximize its current dividend plus its diagnostically expected discounted future value
  10
    For computational simplicity, we assume the rebate is on average equal to the cost of debt R.
  11
    Another approach to capture extrapolation is Fuster et al. (2010)'s Natural Expectations, in which long lags in
the data generating process are neglected by agents who end up overestimating short-term persistence in processes
with long-term mean reversion. In the current AR(1) setting, such beliefs would be indistinguishable from RE.



                                                        15
V  (s , k , b ).12 The labor choice n is statically optimized, leaving only the intertemporal choices
of k and b .
       If the firm defaults, its assets k net of deadweight costs are claimed by lenders during a period
of reorganization in which no production occurs. The firm then restarts with zero debt and assets:

                                                   1
                                    VD (s) =     0+   E [V (s , 0, 0)|s] .                                         (16)
                                                1+R
       In particular, after defaulting a firm must borrow in order to invest.
       Equations (14), (15), and (16) determine both the optimal firm default policy by df  (s, k, b)
and, for those firms which choose not to default with df  (s, k, b) = 0, the policies for endogenous
states k  (s, k, b) and b  (s, k, b).

4.2       Lenders
Firms borrow from risk-neutral deep-pocket lenders who require an expected return equal to the
risk-free rate R. If a firm (s, k, b) defaults on its debt b, the lender receives the recovery rate
                                                      (1 -  )k
                                           R(k, b) = (1 -  ) 
                                                          b
which reflects, net of tax, an exogenous fraction  of the liquidation value (1 -  ) k of the firm's
capital stock. The remaining fraction 1 -  is a deadweight loss.
       The price of debt q  (s, k , b ) adjusts endogenously so that the diagnostically expected bond
return is equal to the risk free rate R :

                                      1
                        q  (s, k , b ) = E 1 + df  (s , k , b ) (R(k , b ) - 1) |s .             (17)
                                   1+R
       To equalize expected bond returns across firms, riskier firms promise a higher interest rate.13
Thus, the firm's interest rate spread relative to the risk-free rate is given by:
                                                              1
                                      S  (s, k , b ) =                     - (1 + R).
                                                         q  (s, k   ,b )
These equations illustrate how diagnosticity affects spreads. On the demand side, diagnosticity
affects the firm's default df  (s, k, b), debt b  (s, k, b), and investment k  (s, k, b) policies. On the
supply side, diagnosticity affects the probability of default perceived by lenders, as captured by the
operator E (·) in (17). We later analyze how these demand and supply forces separately contribute
to macroeconomic fluctuations.
  12
     We apply DE to the recursive formulation of the problem, Equation (15). The diagnostic agent believes that
productivity follows an ARMA(1,1) and correctly thinks that he will continue to believe the same in the future.
The recursive problem is equivalent to an optimal control problem in which the probability distribution of At+s at
time t is the product s        
                         j =1 f (At+j |At+j -1 , t+j -1 ) of the conditional distributions between times t and t + s - 1.
This distribution has the same mean as the time t diagnostic distribution f  (At+s |At , t ) but has larger variance.
This is due to overreaction to news (which are zero on average) in the intermediate periods.
  13                                                                                    1+df  (s ,k ,b )(R(k ,b )-1)
     For reference, the realized firm bond return is given by Rf irm (s, s , k , b ) =           q  (s,k ,b )
                                                                                                                     .

                                                            16
4.3     Solving the Model
A solution to the model reflects a set of firm-level policies and values b  , k  , df  , VN
                                                                                                 
                                                                                            D , VD , and V
                                                                                                           

together with a debt price schedule q  . These objects must jointly satisfy optimization by firms,
Equations (14), (15), and (16), as well as the lenders' zero-profit condition in Equation (17).

                                                  Figure 1: Firm Value and Diagnosticity


                                         20
                                                   DE, Good News
                                                   DE, Medium News
                                         18        DE, Bad News
                                                   RE, Any News
                  Perceived Firm Value




                                         16


                                         14


                                         12


                                         10


                                          8

                                              3    3.5     4         4.5        5      5.5   6   6.5   7
                                                                           Capital k


Notes: The figure plots the perceived value function as a function of firm capital k for the estimated DE model
and in a comparably parameterized RE model. All lines hold fixed the value of micro TFP z , macro TFP A, macro
news A , and the firm's debt b. The first three lines, in the DE model, reflect different realizations of micro TFP
news z , with positive news (green line), medium news (blue line), and bad news (red line). The final line, from
the RE model with  = 0, does not depend upon the value of micro TFP news z because micro TFP z is fixed.


    We solve the model numerically. In addition to the set of Bellman equations characterizing
V  , VN
                                                                                              
        D , and VD , the model features a crucial fixed point between firm default policies df and
credit prices q  in Equation (17). We employ an iterative approach detailed in Appendix A.
First, we guess a firm default rule df  , computing the implied debt price schedule q  according
to the lenders' zero-profit condition. Then, we solve the Bellman equations for V  , VD
                                                                                               
                                                                                        , and VN D
                                                                                                   
using discretization and policy iteration. If the implied default states, i.e., those with VN D < VD ,
match the set of initial guesses, then the iteration is complete. Otherwise, we compute the newly
implied default states and repeat the process. The algorithm we employ is standard within the
literature solving quantitative dynamic corporate finance models and follows the implementation in

                                                                           17
Strebulaev and Whited (2012). Our numerical approach here is highly computationally intensive,
given the presence of four exogenous states, two endogenous states, an endogenous default rule,
and a debt-pricing fixed point. However, judicious application of parallelization and an economical
approach to storage of micro-level outcomes following Young (2010) and Terry (2017a) allow for
solution of the model in several minutes on a desktop computer.
       To illustrate how diagnosticity affects firm-level outcomes, Figure 1 plots cross-sections of the
value function in our baseline parameterization with DE ( > 0) versus RE ( = 0) as a function of
capital k . The green, blue, and red lines in the figure plot the perceived value V  for a firm under
DE with different realizations of micro TFP news z but otherwise identical states (z, A, A , k, b).
In the comparable curve in black for the RE case, firm value does not depend upon micro TFP
news z because the level of the Markov chain z is taken as given.14 Intuitively, after good news,
diagnostic firms are too optimistic, so they value capital more than an otherwise identical firm
which recently experienced adverse news. These overoptimistic firms invest and borrow more, an
effect that is absent in the RE case. Combined with diagnostic shifts in the supply of capital by
lenders, this mechanism proves crucial for generating aggregate effects.


5        Model Estimation
Our model includes seventeen parameters, listed below in Tables 3 and 5. The seven parameters in
Table 3 are set to values that are conventional for a model like ours solved at an annual frequency
and featuring tangible capital and labor inputs. Given the similarity of the production structure
and macro TFP fluctuations, we draw on Bloom et al. (2018) for a range of firm-level and macro
TFP parameters. Information on corporate income taxes is obtained from the Congressional
Budget Office (CBO, 2017).
       We structurally estimate the remaining ten parameters by matching a set of both micro and
macro moments. These parameters govern the micro-level TFP process z and z , adjustment and
operating costs k and , lender recovery rates  , macro volatility A , the equity issuance costs
f and d , and crucially the diagnosticity parameter . We also estimate the volatility  of iid
measurement noise in profits. Allowing for such measurement noise is useful to capture accounting
conventions that may create spurious variability in measured profits regardless of fundamentals.
       We structurally estimate these ten parameters through a simulated method of moments (SMM)
procedure targeting eighteen moments. Of these, fifteen are firm-level moments: the covariance
matrix of investment rates, profits, debt, credit spreads, and, crucially, errors in firm forecasts
  14
    The RE curve for perceived firm value lies uniformly below the DE curves in Figure 1. This level shift occurs
because diagnostic firms have more volatile expectations of future TFP. Since decreasing returns in production
imply convex firm payoffs as a function of TFP, the DE perceived value function lies above that in the RE case
due to Jensen's inequality.



                                                       18
                               Table 3: Externally Fixed Parameters

         Parameter     Value    Explanation                    Source
     1                  0.1     Depreciation rate              Annual solution
     2       R         0.04     Risk-free rate                 Annual solution
     3                 0.25     Capital revenue elasticity     Bloom et al. (2018)
     4                 0.50     Labor revenue elasticity       Bloom et al. (2018)
     5      A          0.95     Macro TFP persistence          Bloom et al. (2018)
     6                 0.20     Corporate income tax           Effective corporate tax rates, CBO (2017)
     7      W           0.5     Wage                           Normalization

Notes: The table reports the parameter symbol, numerical value, a description, and source information for each of
the externally fixed parameters. Outside of the unit-free persistence or normalized parameters, all reported values
are in proportional units, e.g. 0.01 = 1%.


of their own profits. We obtain the moments using our combined datasets with firm financials,
earnings forecasts, and credit spreads described in Section 2. Just as in Section 2 we focus on
idiosyncratic variation, residualizing the underlying series with respect to firm and time effects. We
also target three macro moments in the SMM procedure to ensure appropriate scaling of the macro-
financial structure of the model: the average credit spread, the average frequency of default, and
GDP growth volatility. Table 4 reports the moments we target, including raw covariance values,
standard errors clustered at the firm level, and more easily interpretable scaled values in standard
deviation or correlation form. Given our use of ten parameters to target eighteen moments, we
note at the outset that this is a highly overidentified structural estimation of a nonlinear model.
We can exploit a great deal of information but are not in general able to deliver an exact fit.
    The key innovation in our estimation exercise is to add moments involving forecast errors and
their link to the belief parameter . In the RE model with  = 0, future forecast errors should be
unpredictable using any currently available information. In contrast, the DE model with  > 0 can
capture the overreaction whereby expectations are too optimistic in good times and pessimistic in
bad times. This yields predictions on the sign and magnitude of forecast errors, offering a direct
way to pin down .
    The other moments are conventional, and their choice is natural given the parameters we seek
to estimate. Firm profits and their correlations encode information about the productivity process
at firms, helping to identify z , z , and  . Firm investment also reflects the various frictions such
as adjustment costs operating at firms, helping to identify k . Debt issuance choices, together
with credit spreads, aid in the identification of equity issuance costs f and d . Finally, mean
default and spread values encode information about the fixed cost  and recovery rate  , while
GDP growth volatility provides information about macro shocks A .
    To estimate the model parameters, we minimize the deviation of the empirical moments in



                                                        19
                         Table 4: Target Moments for SMM Estimation


                                                      Micro Moments

   Number                    Moment                            Value                    SE             Scaled (SD/Corr)

       1                 Var(Fcst Error' )                    0.1359                  0.0174                 0.3687
       2             Cov(Fcst Error' ,Profit)                 -0.0057                 0.0050                -0.0512
       3          Cov(Fcst Error' ,Investment)                -0.0026                 0.0010                -0.0974
       4             Cov(Fcst Error',Debt')                   -0.0425                 0.0162                -0.1343
       5            Cov(Fcst Error',Spread)                   0.0000                  0.0001                -0.0088
       6                    Var(Profit)                       0.0922                  0.0132                 0.3036
       7             Cov(Profit,Investment)                   0.0053                  0.0009                 0.2395
       8                Cov(Profit,Debt')                     0.0245                  0.0120                 0.0939
       9               Cov(Profit,Spread)                     -0.0006                 0.0001                -0.1626
       10                Var(Investment)                      0.0053                  0.0006                 0.0731
       11            Cov(Investment,Debt')                    0.0111                  0.0023                 0.1764
       12           Cov(Investment,Spread)                    -0.0001                 0.0000                -0.0729
       13                   Var(Debt')                        0.7363                  0.0842                 0.8581
       14              Cov(Debt',Spread)                      -0.0003                 0.0002                -0.0317
       15                  Var(Spread)                        0.0001                  0.0000                 0.0116
                                                      Macro Moments

                             Moment                            Value                    SE             Scaled (SD/Corr)
       16                   E (Spread)                        0.0287                  0.0048                 0.0287
       17                   E(Default)                        0.0035                  0.0008                 0.0035
       18               Var(GDP Growth)                       0.0002                  0.0001                 0.0141
 Notes: The moments were computed on a sample combining information from the Compustat, IBES Manager Guidance,
 and FISD/Trace Bond databases from 2003-2018, with 2,921 firm-years spanning 387 firms. The reported standard errors for
 the micro moments are computed using firm-level clustering, and the reported standard errors for the macro moments are
 computed using a stationary block bootstrap. Scaled values are the associated standard deviation for variances, correlations
 for covariances, and preserve the mean for expectations. An apostrophe indicates future values. For the micro moments, the
 forecast error, profit, investment, and debt issuance series are expressed relative to firm tangible capital stocks, while the
 spread is in proportional units. For the macro moments, the mean spread is the average across years of the mean spread
 across firms in the FISD/Trace Bond-Compustat merged database, the mean spread is the average across years of the mean
 default rate across firms in the FISD/Trace-Compustat merged database. The GDP series in annual GDP in chained 2012
 dollars.




Table 4 from those computed in a comparable unconditional simulation of the model. We weight
the moments optimally using the inverse of our estimate of the moment covariance matrix, implying
an asymptotically efficient SMM estimator. See Appendix B for a more detailed description of
the variable definitions, sample construction, and our approach to computing the SMM point


                                                             20
estimates and standard errors.
   As seen in Section 2, one key feature of the micro data is forecast error predictability, which
is in particular reflected in the negative correlation between current firm outcomes and future
forecast errors in rows (2)-(4) of Table 4.

                                     Table 5: Estimated Parameters


                                                   Parameter Estimates
      Number         Parameter           Role                                    Value                    SE

          1                              Diagnosticity                           1.069                  0.116
          2               z              Micro persistence                       0.722                  0.006
          3               z              Micro volatility                        0.127                  0.011
          4              k               Capital adjustment cost                 3.732                  0.196
          5                              Fixed operating cost                    0.108                  0.021
          6                              Recovery rate                           0.087                  0.048
          7              A               Macro volatility                        0.007                  0.002
          8                              Profit noise                            0.714                  0.068
          9               f              Equity issuance fixed cost              0.013                  0.011
         10              d               Equity issuance linear cost             0.021                  0.005

    Notes: The table reports point estimates and standard errors for each of the parameters in our SMM estimation. The
    moment covariance matrix is based on firm-level clustering in the micro block and a stationary block bootstrap in the
    macro block. The moment Jacobian is computed numerically. In the SMM estimation, the weighting matrix is
    optimal, i.e., the inverse of the moment covariance matrix.




   Table 5 reports the SMM point estimates and standard errors for our DE model. We later
discuss how these values fit the data moments. The diagnosticity parameter   1 is in the same
ballpark as the values found by Bordalo et al. (2018) using data on professional forecasts of credit
spreads ( = 0.9), by Bordalo et al. (2019) using analyst expectations of US listed firms' long term
earnings growth ( = 0.9), by Pflueger et al. (2020) using stock price-derived measures of risk
perception ( = 1), by d'Arienzo (2020) using bond prices ( = 1), and by Bordalo et al. (2020)
using professional forecasts of several macro series ( = 0.5). A value of  close to 1 means that
forecast errors are roughly equal to the size of incoming news.
   The estimated values governing physical factors such as micro TFP volatility z and capital
adjustment costs k are close to those from other work calibrating or structurally estimating
firm-level shock processes with similar data (Gourio and Rudanko, 2014; Terry, 2017b; Khan and
Thomas, 2008; Saporta-Eksten and Terry, 2018). The parameters governing financial frictions
indicate equity issuance costs f , d and recovery rates  comparable to those in Hennessy and
Whited (2007). The fixed operating costs  in model units is mainly linked to average default

                                                            21
rates and spreads. Finally, the estimated measurement error volatility for profits  suggests that
a high degree of noise in accounting conventions is needed to match the covariance of profits and
other firm-level outcomes.

              Table 6: Estimated Parameters: Constrained Rational Model


                                               Parameter Estimates
      Number         Parameter          Role                                  Value                  SE

          1               z             Micro persistence                     0.794                0.011
          2               z             Micro volatility                      0.185                0.010
          3               k             Capital adjustment cost               3.815                0.491
          4                             Fixed operating cost                  0.070                0.011
          5                             Recovery rate                         0.159                0.058
          6              A              Macro volatility                      0.007                0.002
          7                             Profit noise                          0.847                0.052
          8               f             Equity issuance fixed cost            0.013                0.004
          9               d             Equity issuance linear cost           0.041                0.031
    Notes: The table reports point estimates and standard errors for each of the parameters in our SMM estimation
    which imposes rational beliefs with  =0. The moment covariance matrix is based on firm-level clustering in
    the micro block and a stationary block bootstrap in the macro block. The moment Jacobian is computed
    numerically. In the SMM estimation, the weighting matrix is optimal, i.e., the inverse of the moment
    covariance matrix.




   Using the same micro and macro moments, we also conduct a constrained SMM structural
estimation exercise to estimate the nine parameters of a RE model in which we constrain  = 0
and eliminate diagnosticity in beliefs. By comparing the performance of this estimated RE model
and the estimated DE model, we can assess the consequences of overreacting beliefs. The SMM
point estimates and standard errors for the parameters of the RE model are in Table 6. Comparing
the DE vs RE parameter estimates, we see that we estimate a lower persistence z and volatility
z of micro TFP shocks in the DE model, because diagnosticity itself amplifies perceived volatility
and persistence. We estimate a slightly lower volatility A of aggregate TFP in the RE model than
in the DE case, although in both models the standard deviation of the shock is around 0.7% per
year. Also, because diagnostic beliefs -- by inflating a firm's perceived volatility of TFP shocks in
a context where production function-based payoffs are convex -- reduce a firm's average incentive
to default, we estimate a higher fixed operating cost  in the DE model to match the observed
default frequency.
   Table 7 reports the fit of the micro moments relative to the data for both the estimated DE

                                                         22
and RE models. The DE model offers an excellent match of the micro moments, especially taking
into account its strong nonlinearity and the overidentified nature of the SMM estimation. The DE
model matches both the predictable disappointment of firms after high profits, investment, and
debt issuance. Because firms in the DE model respond to both the level and the news in TFP,
the correlation of profits with firm investment is realistically moderate.
       There are two main discrepancies with the data. First the DE model predicts a stronger
correlation between firm-level debt and profitability than seen in the data. Second, while the
DE model is good at capturing the negative correlation between investment and spreads, it does
not capture the negative correlation between profitability and spreads at the micro level. In our
model, highly profitable firms, which generally have high micro TFP, choose to issue a lot of debt,
endogenously increasing their riskiness. This results in a low positive correlation between spreads
and profits in equilibrium and high correlation between debt and profits. We speculate that an
extended version of our model allowing for empirically important costs of debt financing, such
as restrictive contractual covenants, would moderate debt movements and improve the already
strong fit of our DE model to the data.
       As evident from Table 7, the RE model is even less capable of accounting for debt's correlation
with profits. Most importantly, the RE model cannot match the predictability of forecast errors nor
generate a meaningful default frequency. These results are important: in the DE model, overopti-
mistic expectations create overindebtedness and hence realistically higher default frequencies than
in the RE model in which there is no overexpansion of leverage after good shocks.15
       In Section 6 we show that these differences between the DE and RE models prove critical
to account for recurrent credit cycles, both at the aggregate and the firm levels. But first, in
Section 5.1 we examine the real side of the macroeconomy and consider nonlinearities in the
macro investment response to a TFP shock. In Section 5.2 we simulate the model and analyze
its ability to match untargeted but traditional macro correlations, placing particular emphasis on
the correlation between credit spreads and economic activity.

5.1       Diagnosticity and the Nonlinear Response of Investment to Shocks


To study the real implications of DE, we simulate the contemporaneous response of macro invest-
ment, a real variable that reflects firms' beliefs, to a negative macro TFP shock. We compute
this response for different initial conditions, captured by TFP shocks of varying magnitudes in the
previous period. This exercise highlights one important consequence of DE: fragility after good
times. This state dependence is critical to account for boom-bust credit cycles.
  15
    The RE model also features too high a correlation between profitability and investment. In the DE model, this
correlation is muted because investment depends, via beliefs, on the TFP shock rather than just on its level.



                                                       23
                                    Table 7: Model vs Data Moments


                                                     Micro Moments
       Number                 Moment                              Data             DE Model               RE Model

          1            Std Dev(Fcst Error')                    0.3687                0.2687                0.3387
          2          Corr(Fcst Error' ,Profit)                -0.0512                -0.0319               -0.0031
          3       Corr(Fcst Error' ,Investment)                -0.097                -0.119                 -0.002
          4          Corr(Fcst Error',Debt')                   -0.134                -0.111                 -0.002
          5         Corr(Fcst Error',Spread)                   -0.009                 0.008                 -0.001
          6               Std Dev(Profit)                       0.304                 0.271                 0.361
          7          Corr(Profit,Investment)                    0.239                 0.264                 0.343
          8             Corr(Profit,Debt')                      0.094                 0.295                 0.369
          9            Corr(Profit,Spread)                     -0.163                 0.006                 0.007
         10            Std Dev(Investment)                      0.073                 0.076                 0.071
         11          Corr(Investment,Debt')                     0.176                 0.474                 0.357
         12         Corr(Investment,Spread)                    -0.073                -0.064                 -0.043
         13               Std Dev(Debt')                        0.858                 0.810                 1.197
         14             Corr(Debt',Spread)                     -0.032                -0.025                 -0.027
         15              Std Dev(Spread)                        0.012                 0.009                 0.015
                                                     Macro Moments

                              Moment                              Data             DE Model               RE Model
         16                 E (Spread)                          0.029                 0.018                 0.019
         17                  E(Default)                         0.004                 0.003                 0.001
         18              Std Dev( GDP)                          0.014                 0.014                 0.013
 Notes: The data column reports the empirical values of the target moments for our SMM exercise. The DE model
 column reports the target moments at our estimated parameters from the diagnostic expectations model. The RE model
 reports the target moments at our estimated parameters from the constrained rational expectations model. The empirical
 moments were computed on a sample combining information from the Compustat, IBES Manager Guidance, and
 FISD/Trace Bond databases from 2003-2018, with 2,921 firm-years spanning 387 firms. The model moments are based
 on a simulation of 1,000 firms for 250 years. An apostrophe indicates future values. For the micro moments, the
 forecast error, profit, investment, and debt issuance series are expressed relative to firm tangible capital stocks. For the
 macro moments, the mean spread is the average across years of the mean spread across firms, the mean spread is the
 average across years of the mean default rate across firms.



       Figure 2 plots the average impulse response of investment to a negative macro TFP shock in
both the DE model (red line) and RE model (blue line).16 These responses reflect "typical times,"
based on simulated reactions to negative TFP shocks across 10,000 experiments following the
  16
   The shock is identically sized in the two experiments, as a one standard deviation negative shock to macro
TFP using the parameter estimate   ^A from the DE model.

                                                             24
                                Figure 2: Investment Response to a Negative TFP Shock


                                         TFP                                  Investment
                         2
     Percent Deviation


                                    DE Model
                                    RE Model
                                                                5
                         1

                         0                                      0

                         -1
                                                              -5
                         -2
                           -5        0         5    10           -5           0           5          10
                                 Periods Since Shock                   Periods Since Shock

Notes: The figure plots the simulated generalized impulse responses of investment (right panel) to a one-standard
deviation negative shock to macro TFP (left panel) occurring at period 0. The DE model (red) and RE model
(blue) paths are based on identical shocks to TFP over 10,000 simulated experiments following the Koop et al.
(1996) methodology.


methodology of Koop et al. (1996). In normal times, the investment responses to TFP shocks
differ only slightly across the DE and RE models. As usual in RBC models, a negative shock to
TFP causes a large decline in investment. There is some amplification of the DE model relative
to the RE model, but the paths are otherwise fairly similar.
   With these baseline responses in hand, we simulate the impact of the same negative shock to
macro TFP, varying the initial conditions in a flexible manner. Figure 3 reports the investment
response in the DE model (vertical axis, red line) as a function of the magnitude of the previous
period's macro TFP shock (horizontal axis), which we control in our experiment. There is a large
nonlinearity: the adverse TFP shock is much more damaging for aggregate investment when it
occurs in good times, after positive shocks. Intuitively, because during good times expectations
are too optimistic, leverage and investment overexpand. When a bad shock hits, the original
optimism wanes and reverts to pessimism. The firms are overleveraged, their debt is perceived to
be excessively risky, and so they are forced to cut investment. Due to overreacting beliefs, during
good times the economy is fragile and prone to crash in response to a negative shock.
   Figure 3 also adds to the same diagram the response of investment in the RE model (blue line).
This response is almost the same across different initial conditions, with little excess fragility in
good times. Because, under RE, debt and investment are chosen and priced optimally during both




                                                         25
                                  Figure 3: Investment Nonlinearity


                                              Investment Response
                      4
                              DE Model
                              RE Model
                      2



                      0
            Percent




                      -2



                      -4



                      -6



                      -8
                       -1.5     -1           -0.5            0          0.5           1            1.5
                                         Initial Conditions: Multiples of      A

Notes: The vertical axis in the figure reports the simulated impulse response of macro investment to a one-standard
deviation negative shock to macro TFP, and the horizontal axis reports the initial conditions, i.e., the magnitude
of the shock to macro TFP in the previous period. Both the DE model (red line) and RE model (blue line) are
reported on the figure.


good and bad times, a negative shock does not create financial distress in either state.17
    Recent work on investment dynamics over the business cycle (Bachmann et al., 2013; Winberry,
2017; Bloom et al., 2018) suggests that investment exhibits more sensitivity to shocks during booms
than during normal times. Our results show how DE play a key role in generating this feature by
generating fragility in good times. We next examine the implications of the DE model for business
cycle volatility and comovement.
  17
     Interestingly, state dependence in Figure 3 also generates a positive response during bad times under DE, when
even a moderate negative shock to TFP can be considered "good news" relative to overpessimistic beliefs. Under
RE, the response curve is uniformly negative.




                                                        26
5.2    Diagnosticity and Business Cycle Comovement
Macro business cycle correlations are entirely untargeted in our calibration procedure. We set
macro TFP shock persistence to a conventional value in Table 3 and only target the volatility of
GDP growth, which simply ensures that the standard deviation of output is comparable to the
data. In this sense, the ability of our model to reproduce macro moments is a stringent metric of
its explanatory power for business cycles.
   Table 8 reports the annual business cycle correlations and volatilities of output, debt, invest-
ment, and average credit spreads in the empirical data (top panel), simulated data from the DE
model (middle panel), and simulated data from the RE model (bottom panel). The DE and RE
model moments are computed based on an identical set of exogenous shocks.

                                 Table 8: Business Cycle Moments


                                                        Data
       Correlation        Output           Debt         Investment         Spread       Standard Deviation
       Output             1.000            0.891           0.803           -0.105             0.017
       Debt                                1.000           0.755           -0.169             0.048
       Investment                                          1.000           -0.107             0.053
       Spread                                                               1.000              0.01
                                         Diagnostic Expectations Model
       Correlation        Output           Debt         Investment         Spread       Standard Deviation
       Output             1.000            0.897           0.484           -0.084             0.014
       Debt                                1.000           0.690           -0.131             0.012
       Investment                                          1.000           -0.037             0.041
       Spread                                                               1.000             0.012
                                          Rational Expectations Model
       Correlation        Output           Debt         Investment         Spread       Standard Deviation
       Output             1.000            0.837           0.821           0.368              0.014
       Debt                                1.000           0.535           0.322              0.006
       Investment                                          1.000           0.300              0.032
       Spread                                                              1.000              0.007
       Notes: The table reports business cycle correlations (left) and standard deviations (right) from the data
       (top panel), the diagnostic expectations model (middle panel), and the rational expectations model
       (bottom panel). The empirical sample is 2003-18 at annual frequency. Real GDP and private
       nonresidential fixed investment from the US NIPA accounts. Total credit to US non-financial
       corporations from the BIS. BAA-Treasury spread based on Moody's ratings. The model moments are
       computed from an unconditional simulation of 250 years. Model quantities refer to total values (output,
       debt, and investment) or average values (spread) computed from the distribution of firms. Output, debt,
       and investment are HP-filtered with smoothing parameter 100.




                                                          27
       The DE model offers a good account of business cycle moments. It captures well the positive
covariance between macro output and debt, the positive covariance between investment and debt,
and crucially the negative covariance of spreads with output, debt and investment. It also offers a
good account of the standard deviation of macro output and investment. The main difficulty for
the DE model lies in capturing the high correlation between investment and output in the data, as
well as the high standard deviation of debt. We speculate that a version of DE allowing for slower
dynamics in overreaction, as in Bordalo et al. (2019), might generate more variation in debt by
allowing for credit to shift over multiple years of overreaction.
       The RE model makes the counterfactual prediction of procyclical credit spreads and also fails
to produce meaningful volatility in debt, investment and spreads compared either to the data or
to the DE model.18 The failure of the RE model to capture countercyclical spreads is due to the
fact that it features a strong demand effect. During good economic times, the demand for credit
increases relative to its supply, raising the credit spread. In the DE model, countercyclicality arises
because the excess volatility in beliefs caused by  > 0 mainly influences the supply of credit. On
the demand side, diminishing returns and bankruptcy costs limit the extent to which the demand
for capital accommodates excess volatility in beliefs. Under DE, procyclical shifts in the supply
of credit become more important and generate countercyclical spreads.
       The RE model does, however, generate a higher correlation between current output and invest-
ment than the DE model, more in line with the data. In the DE model, investment responds both
to the level of TFP but also to recent news, increasing the volatility of investment in the direction
of the data but bringing down somewhat the contemporaneous correlations between output and
investment from its empirical value.
       Overall, diagnosticity helps in accounting for cyclical variation in debt, investment, and the
countercyclicality of spreads. We next assess the explanatory power of the model for observed
financial and real instability.


6        Boom-Bust Cycles in Financial and Real Activity
We show that our model can shed light on two phenomena: recurrent boom-bust credit cycles, as
documented in L´
               opez-Salido et al. (2017) (Section 6.1) and large increases in spreads and financial
crises occurring after good times, as described in Krishnamurthy and Muir (2016) (Section 6.2).
Our model significantly improves the explanatory power for these cycles due to its ability to
generate fragility and belief reversals, even though we targeted neither pattern in our estimation.
  18
    These statements compare the estimated DE model to an estimated RE counterpart, a comparison which allows
the RE model the best chance of fitting our target moments while varying all of the model's parameters. The failure
of RE to generate meaningful aggregate volatility is even further exaggerated when comparing the estimated DE
model to a counterfactual rational expectations model in which we set  = 0 but otherwise keep the parameters
fixed at their DE estimates. See Table A2 in the Model Appendix for business cycle moments in that case.


                                                        28
6.1     Recurrent Credit Cycles
We consider credit cycles both at the macro level, so that we can compare our results to L´
                                                                                          opez-
Salido et al. (2017), and at the firm level, so we can compare them to our analysis in Section
2.
     To do so, we simulate the model for a large number of periods and then use the simulated
aggregate data to perform a two-step exercise. First, following L´
                                                                 opez-Salido et al. (2017) we
regress spread growth on the lagged spread level.


                                Spreadt =  +  Spreadt-1 + t .

which detects predictable reversals in credit market conditions. Second, we regress macro outcomes
of interest at t, Xt , on the predicted spread change Spreadt from the first stage:

                               Xt =  +  Spreadt + Yt-1 + t ,

where following L´
                 opez-Salido et al. (2017) we include lagged output growth Yt-1 as a control.
Table 9 reports ^ from the first step in column (1) and  ^ from the second step in columns (2)-
(4). The top panel reports the coefficients in the simulated DE model, the middle panel reports
empirical coefficients directly reproduced from L´
                                                 opez-Salido et al. (2017), and the bottom panel
reports the coefficient obtained from the simulated data of the RE model in which  = 0.
     Consider the top and middle panels. The DE model reproduces salient qualitative features
in the data. First, it yields a sizable reversal of spreads in column (1). Second, it yields, in the
same direction as the data, that predictable increases in spreads are associated with declines in
GDP growth (column (2)), in aggregate investment growth (column (3)), and with lower realized
bond returns (column (4)). The predictable declines in output growth and, to a lesser degree, in
investment growth are quantitatively much smaller in the DE model than in the data. In this RBC
model output is entirely supply-driven with predetermined capital, so there are few mechanisms
for belief revisions to affect output on impact other than the direct effect of TFP. Mechanisms
such as aggregate demand (Farhi and Werning, 2020), time-varying capacity utilization (King and
Rebelo, 1999), sharp labor adjustment in the face of bad news (Ilut et al., 2018), or intermediary
financial disruptions (Maxted, 2020; Krishnamurthy and Li, 2020) might all be at work in the
data.
     In the bottom panel we see that the RE model cannot reproduce the observed credit cycles
even directionally. In fact, while the RE model obtains meaningful mean reversion in spreads via
mean reversion in TFP, it cannot produce any predictability in bond returns (column (4)). The
RE model also produces a counterfactual positive response of output and investment to predictable
increases in credit spreads.


                                                29
                                  Table 9: Recurrent Credit Cycles


                                   (1)                   (2)                   (3)                    (4)
                                           Diagnostic Expectations Model
                                 Spread               Output              Investment            Bond Return
      Pred.  Spread                                  -0.512***              -3.64***              -0.010**
                                                       (0.042)               (0.198)               (0.001)
     Lagged Spread             -0.304***
                                 (0.012)
     Years                        7500                  7500                  7500                   7500
                                         Data (from Lopez-Salido, et al. 2017)
      Pred.  Spread                                  -4.800***             -9.202***
                                                       (1.134)               (1.346)
     Lagged Spread             -0.248***
                                 (0.042)
     Years                     1929-2015            1929-2015              1929-2015
                                             Rational Expectations Model
      Pred.  Spread                                  0.623***               4.975***                0.000
                                                      (0.107)                (0.239)             (0.000007)
     Lagged Spread             -0.218***
                                 (0.007)
     Years                        7500                  7500                  7500                   7500
     Notes: The table reports regressions based on macro data from the simulated diagnostic expectations model (top
     panel), from empirical regressions directly drawn from Lopez-Salido, et al. (2017) for comparison (middle
     panel), and from the simulated rational expectations model (bottom panel). Predicted spread growth in columns
     2-4 is the predicted value from the regression in column 1. Columns 2-4 control for lagged output growth. In the
     estimates drawn from Lopez-Salido, et al. (2017), columns 1-2 are from Table II, and column 3 is from Table
     IV. All standard errors are Newey-West. * = 10% level, ** = 5% level, and ***=1% level.




   The ability of the DE model to generate credit cycles comes from the fact that in good times
capital suppliers are too optimistic, which lowers the spread. A significant chunk of the spread
reversal is due to waning of such optimism, and comes with disappointing bond returns, output,
and investment. In the RE model, by contrast, spreads are procyclical, so they are low in bad
times and predictably increase with TFP mean reversion, which is in turn associated with higher
output and investment.
   Finally, consider the ability of our model to account for firm-level credit cycles. Table 10 re-
produces our IV regression exercise of Table 2 in Section 2, in which predictable future forecast
errors are used as an index of overoptimism. The top panel reports the results in the simulated



                                                           30
data obtained from the DE model. In line with the estimates of Table 1, in the DE model high
investment predicts future negative forecast errors (column (1)), indicating that when investment
is high expectations are overly optimistic. In line with the results of Table 2, predictable overopti-
mism is then associated with lower future realized bond returns (column (2)), higher future spreads
(column (3)), and lower future investment (column (4)). The regressions for spreads and invest-
ment also control for lagged spread and current profits, respectively, to account for fundamental
mean reversion, as in Table 2. The magnitudes here are large. Firms that are optimistic, with
a predicted forecast error one-standard deviation lower, experience 27 × 0.121  3 percentage
points lower bond returns. The RE model cannot reproduce these findings in the bottom panel:
because it fails to generate predictability of forecast errors, it does not reproduce the first stage
of Table 2.
       Overall, DE help account for the evidence on credit cycles thanks to the overreaction of ex-
pectations, which creates booms in which the supply of credit overexpands. These expansions are
followed by reversals in which optimism wanes, debt is repriced, and real activity contracts.

6.2       The Financial Crisis of 2007-09
We next assess the ability of the DE model to generate the large and sudden increases in credit
spreads associated with the Lehman crisis in September 2008. Our model misses some important
elements of large crises such as the gradual and persistent inflation of asset prices and the ampli-
fication of crashes through financial intermediaries. An asset price bubble can be obtained under
DE by introducing information frictions as in Bordalo et al. (Forthcoming), but here we abstract
from this aspect to isolate in the sharpest way the role of overreaction. For the same reason, we
abstract from financial intermediaries considered in Maxted (2020) and Krishnamurthy and Li
(2020).
       How large a TFP shock is needed in our model to produce the actual crisis movement in credit
spreads? Standard business cycle models have a hard time generating large crises without massive
TFP shocks, so they are often enriched with shocks to collateral constraints and uncertainty. By
creating fragility after good times, the DE model can produce a crisis-like event with modest TFP
shocks alone.19 We can then look at the macroeconomic consequences of such a shock in our
model.
       To answer these questions, we perform a "crisis decomposition" exercise. We separate the
2004-2009 period into a "pre-crisis" period, 2004 - 2007, and a "crisis" period, 2008 - 2009 (our
model yields neither a gradual path of asset price inflation nor the gradual reduction in spreads
  19
    Note that work by Maxted (2020) shows that DE can also generate higher fragility during good times through
a distinct intermediary channel, so we conclude that the dynamics generated by our model are likely only a part
of the full impact of DE on financial fragility.



                                                      31
                      Table 10: Forecast Errors and Firm Credit Cycles


                                                (1)                 (2)                (3)                (4)
     Dependent Variable:                    Fcst. Errort        Returnt             Spreadt         Investmentt
     Estimation                              1st Stage         2nd Stage           2nd Stage        2nd Stage
                                            Diagnostic Expectations Model
     Fcst. Errort                                               0.121***          -1.891***           1.436***
                                                                 (0.004)            (0.205)            (0.005)
     Investmentt-1                          -0.703***
                                              (0.007)
     Years                                      500            500                    500                500
     Firm-Years                              500000          500000                 500000             500000
     Time Effects                                X              X                      X                  X
     First Stage F                             9635
                                             Rational Expectations Model
     Fcst. Errort                                                  0.209         108.362***         -137.182***
                                                                  (0.407)         (10.778)             (0.502)
     Investmentt-1                             0.004
                                              (0.007)
     Years                                      500                 500               500                500
     Firm-Years                               500000              500000            500000             500000
     Time Effects                                X                   X                 X                  X
     First Stage F                             0.268
     Notes: The table reports first and second stage IV estimates based on simulated firm-level data from the
     diagnostic expectations model (top panel) and the constrained rational expectations model (bottom panel).
     Column 1 reports the first stage, and columns 2-4 report second stage regressions. Standard errors are clustered
     at the firm level. * = 10% level, ** = 5% level, and ***=1% level. Forecast error is realized minus expected
     profits normalized by the firm's capital stock. Investment is the investment rate, i.e., capital expenditures
     normalized by the firm's capital stock. Return is the realized bond return, and spread is the realized bond spread
     relative to the risk-free rate. Column 3 controls for the lagged spread, and column 4 controls for current profits.
      For all series, 0.01=1%.




during 2004-2007). Credit spreads in the US during the pre-crisis period were low with an average
of 1.6% and jumped to an average level of 4.5% during the crisis period. We then ask: what TFP
pattern is needed in our model to go from an initial 1.6% spread to 4.5%?
   Figure 4 plots the required TFP shocks, along with their implications for the growth of credit,
output, investment, and corporate profit forecasts. The red lines connect the pre-crisis and crisis
outcomes generated by the DE model, while the green lines present the data. In the top left panel,
the DE model by construction perfectly matches the pre-crisis and crisis spreads. Remarkably,
though, the bottom left panel shows that the pattern of TFP growth needed to account for the
increase in spreads is virtually identical to the TFP growth observed during the period. This

                                                             32
overlap is an untargeted feature and shows that in the DE model a moderate 1.5% reduction in
TFP growth is able to produce the large observed increase in the average spread.

         Figure 4: The Financial Crisis of 2007-09: DE Model vs RE Model


                                      Spread                             Credit Growth                           Output Growth
                                                                 10                                         6
                                        DE Model
                             6          RE Model                                                            4
                                        Data                       5
                                                                                                            2
                   Percent




                                                       Percent




                                                                                                 Percent
                             4                                     0                                        0
                                                                                                           -2
                             2                                    -5
                                                                                                           -4
                             0                                   -10                                       -6
                                 Pre-Crisis   Crisis                   Pre-Crisis   Crisis                      Pre-Crisis   Crisis

                                    TFP Growth                         Investment Growth                        Profit Fcst Growth
                             3                                   20                                        20
                             2
                                                                 10                                        10
                             1
                 Percent




                                                       Percent




                             0                                     0                         Percent        0
                           -1
                                                                 -10                                   -10
                           -2
                           -3                                    -20                                   -20
                                 Pre-Crisis   Crisis                   Pre-Crisis   Crisis                      Pre-Crisis   Crisis


Notes: Each panel plots a macro series from our crisis decomposition exercise, with the data (green), DE model
(red), and RE model (blue) included. "Pre-Crisis" is the 2004-07 period, and "Crisis" is the 2008-09 period. In
the data, all empirical values are averages drawn from the pre-crisis or crisis periods. Spread is the average spread
across firms in our Mergent FISD-TRACE-Compustat sample, credit growth is the growth in total credit to non-
financial corporations, real GDP and private nonresidential fixed investment are from NIPA, and profit forecasts
are the sum of predicted earnings across all firms in our Compustat-IBES guidance data. In the DE model, we
choose the TFP growth series in the bottom left panel in order to exactly match the empirical spread values in the
top left panel. We feed the resulting TFP growth series into the RE model to produce the RE line in each panel.


    The reversal is due to the fragility built during the good times of the pre-crisis period which is
in turn capable of producing realistic macro consequences: a large reduction in credit, investment,
and output, together with a strong reduction in forecasts of profit growth. These macroeconomic
changes in the DE model are not identical to those in the data, but the quantitative fit is note-
worthy in light of the simplicity of our model.
    We then input the same TFP pattern in the RE model, as also reported in Figure 4. The
RE model (blue lines) does not produce any movement in credit spreads, it does not produce
deleveraging, nor does it produce the sharp observed downward revision in profit forecasts. Both
the DE and RE models feature output growth that declines by similar magnitudes as the data,

                                                                             33
although the larger drop in investment in the DE model naturally implies a lower path for output
growth during the later stages of the recovery. The fact that output differences between DE and
RE are small is expected, since in both neoclassical models the business cycle is driven by the
same TFP series. But the RE model is incapable, by itself, of generating a crisis episode because
it cannot match the observed movements in the price and quantity of credit with realistic TFP
shocks.
    This exercise shows the potential of DE for accounting for the salient features of the boom-
bust cycles in macro-financial aggregates. The realism of the analysis and its fit can be improved
by adding ingredients that have likely played a role, such as the housing bubble, intermediary
leverage, and the link between household debt and consumption. Boom-bust belief dynamics,
however, seem a promising ingredient to generate overexpansion in good times and sharp financial
tightening and real contractions after modest TFP shocks.


7     Robustness
We conclude by reporting the results of two important robustness exercises. First, we evaluate the
role of lenders' beliefs in generating fragility in good times. Second, we endogenize wages in general
equilibrium, which can dampen volatility. As before, the analysis focuses on the contemporaneous
response of macro investment to TFP shocks, and in particular its fragility after good times.

7.1       Demand vs Supply of Capital
In our model, overreacting beliefs affect both the demand and the supply of credit. Large shifts
in the supply of credit are crucial to account for the observed countercyclicality of spreads and
for the predictability of bond returns. Here we ask a broader question: what is the role of credit
supply in creating real fragility and large drops in investment after good times?
    To address this question, we analyze the DE model by assuming that only borrowers are diag-
nostic. This exercise allows us to assess the extent to which fragility can be reduced if diagnostic
firms are disciplined through rational debt pricing.
    We thus run a simulation of the model in which we set  = 0 for lenders while keeping  at
the estimated value for firms. Figure 5 then reports the response of investment to a negative TFP
shock obtained in this exercise (green line), superimposing it on top of Figure 3 reporting the full
RE case (blue line) and the full DE case (red line).
    Qualitatively, the response of investment displays the nonlinearity typical of the DE model:
after good times the economy is fragile, so a given negative TFP shock causes a larger drop in
investment than after bad times. Quantitatively, though, shutting down the overreaction of credit
supply sharply reduces the magnitude of the effect. The green curve lies about halfway between


                                                 34
                      Figure 5: Investment Nonlinearity with Rational Lenders


                                             Investment Response
                      4
                              DE Model
                              RE Model
                              DE Firms, RE Lenders
                      2



                      0
            Percent




                      -2



                      -4



                      -6



                      -8
                       -1.5      -1         -0.5             0          0.5           1            1.5
                                       Initial Conditions: Multiples of        A


Notes: The vertical axis in the figure reports the simulated impulse response of macro investment to a one-standard
deviation negative shock to macro TFP, and the horizontal axis reports the initial conditions, i.e., the magnitude
of the shock to macro TFP in the previous period. The DE model (red line), the RE model (blue line), and a
model with DE for firms but RE for lenders (green line) are reported on the figure.


the full DE and the full RE investment responses. In this respect, diagnostic shifts in the supply
of credit appear to play an important role in creating significant fragility.

7.2     General Equilibrium
Anticipated procyclical wage shifts may dampen movements in the anticipated marginal product
of capital and hence push against volatility or nonlinearity in investment. To assess the impor-
tance of this mechanism, we now endogenize the wage W , moving towards general equilibrium.
We keep the required rate of return R exogenous because, as argued above, empirically realistic
countercyclical shifts in real interest rates in this class of heterogeneous firms models are likely
to amplify rather than dampen investment dynamics. Moreover, consumption-based models of
expected (and required) returns are inconsistent with expectations data.


                                                        35
   We allow for disutility from effort by modelling period utility as:
                                                            1+ 1
                                   U (C, N ) = C -       1N      ,
                                                      1+ 

where the disutility of labor is governed by  > 0 and the elasticity of labor supply is given
by  > 0. The real interest rates are pinned down by the inverse of the household's subjective
discount rate 0 <  < 1, i.e., R = 1/ - 1.
   Let µ(s, k, b) be the cross-sectional distribution of exogenous states s, capital k , and debt
b. The macro state is (µ, A, A ). Market clearing in the labor market implicitly defines wages
W (µ, A, A ) through
                                      
                                  W
                                         =   n(s, k, b|W )dµ(s, k, b),
                                  
where the left hand side is the household's closed-form labor supply and the right hand side reflects
labor demand generated by the current cross-sectional distribution of firm states µ.
   As usual in this class of heterogeneous firms models with anticipated macro shocks, general
equilibrium creates two computational challenges (Krusell and Smith, 1998). First, the macro
state (µ, A, A ) is intractable because µ is a distribution. Second, the mapping W (µ, A, A ) is a
complicated implicit object which must be consistent with the firm-level decisions embedded in
market clearing.
   We follow a novel computational approach tailored to our problem and detailed in Appendix
A. To briefly summarize, our approach is to replace the macro state (µt , At , At ) with a history
of macro shocks (At , At-1 , ..., At-K ) up to some truncated lag length, nonparametrically storing
predictions of the wage W given each shock history. We then follow an outer loop/inner loop
approach, guessing a wage mapping, solving and simulating the model, and updating the wage
predictions until convergence. Our solution technique proves tractable and quite accurate in
practice, as is also detailed in Appendix A. We parameterize the model based on the estimated
values from Table 5. We further assume a conservative Frisch elasticity of labor supply of  = 0.5
and choose  to deliver the same fixed 4% annual real interest rate as considered above.
   Wages in this equilibrium structure reflect an intratemporal mapping from the macro states to
prices, so it might not be immediately clear how our explicitly intertemporal notation of diagnostic
expectations interacts with general equilibrium. We make the link explicit in Figure 6, which plots
expected future wage growth as a function of current productivity growth in both the DE model
(red line) and the RE model (blue line). In the DE model, a positive productivity shock that
renders agents overly optimistic increases their perceptions of the future demand for capital and
labor and hence future wage growth relative to the RE model. Because perceived future wages
affect the future payoff from capital, these anticipated factor price movements dampen investment
fluctuations today, a dampening force that is in fact a bit stronger in the DE model than the


                                                 36
                                                                Figure 6: Expected Wage Growth


                                                         2
                                                                DE Model
                                                                RE Model
                Expected Future Wage Growth, Percent   1.5


                                                         1


                                                       0.5


                                                         0


                                                       -0.5


                                                        -1


                                                       -1.5


                                                        -2
                                                         -1.5     -1        -0.5         0         0.5    1   1.5
                                                                           Productivity Growth, Percent


Notes: The figure plots the expected path of wage growth in the next period (vertical axis) given productivity
growth today (horizontal axis) in the DE model (red) and RE model (blue).


RE model. Since shifts in the intratemporal price of labor can have a meaningful impact in
equilibrium on a firm's perceived intertemporal incentives to invest, we next investigate whether
the investment nonlinearities we highlighted above in the DE model survive general equilibrium.
   Figure 7, the general equilibrium analogue of Figure 3, reports the response of investment to a
negative TFP shock for different initial conditions. The investment response continues to display
nonlinearity and in particular the high fragility induced by DE (red line): the negative shock
exerts a much larger negative impact in good times. As expected, endogenous wages moderate
the quantitative magnitude of the investment response and nonlinearity relative to the partial
equilibrium model. However, the nonlinearity remains substantial. The response to a negative
TFP shock increases in size by about 40% when arriving after a one standard deviation positive
shock rather than in normal times. This increase matches the trough-to-peak growth in empirical
investment sensitivity estimated in Bachmann et al. (2013). In the RE model (blue line), by
contrast, the general equilibrium feedback working through wages eliminates the (already very
insignificant) state dependence of investment almost entirely.
   In sum, even after allowing for fully flexible wages, the DE economy proves more fragile than


                                                                                    37
              Figure 7: Investment Nonlinearity with General Equilibrium


                                                   Investment Response
                           4
                                   DE Model
                                   RE Model
                           3


                           2


                           1
                 Percent




                           0


                           -1


                           -2


                           -3


                           -4
                            -1.5     -1           -0.5           0        0.5        1         1.5
                                              Initial Conditions: Multiples of   A


Notes: The vertical axis in the figure reports the simulated impulse response of macro investment to a one-standard
deviation negative shock to macro TFP, and the horizontal axis reports the initial conditions, i.e., the magnitude
of the shock to macro TFP in the previous period. Both the DE model (red line) and RE model (blue line) are
reported on the figure. These results are computed in the general equilibrium model with labor market clearing.


the RE economy in good times, and hence more responsive to negative shocks due to the boom-bust
mechanism created by overreacting beliefs.


8     Conclusion
The financial crisis of 2008 has renewed economists' interest in financial instability. One key
challenge is to understand where such instability comes from. We showed that non-rational beliefs,
and in particular overreaction to news, can generate realistic credit cycles without relying on
exogenous financial shocks. These boom-bust dynamics display elements of predictability, in line
with the evidence on cyclical movements in credit spreads (L´
                                                            opez-Salido et al., 2017) and on
large financial crises (Greenwood et al., 2020). Critically, our results are obtained in a standard
RBC model in which a single new parameter, the degree of belief overreaction, is estimated
using microdata on managers' errors in forecasts of the earnings growth of their firms. Realistic
micro-level belief distortions can, once aggregated, generate realistic credit cycles with financial

                                                            38
overexpansion in good times, fragility, and sharp reversals as small negative news arrives.
   Future work can enrich our approach. A key factor is the role of financial intermediaries,
which recent work has already begun to investigate (Maxted, 2020; Krishnamurthy and Li, 2020).
Another important aspect is household debt, which has been shown to be a key determinant
of drops in aggregate demand during financial tightenings (Mian et al., 2017; Mian and Sufi,
2009). Prolonged asset price bubbles are another important element, especially to account for
large crises. These factors open up exciting avenues for studying the transmission of beliefs to
the real economy. As an initial step, our work shows that realistic departures from rationality
disciplined by expectations data can be introduced into standard macroeconomic models and
significantly improve their explanatory power.




                                                 39
References
Adam, Klaus, Albert Marcet, and Johannes Beutel (2017), "Stock price booms and expected
 capital gains." American Economic Review, 107, 2352­2408.
Afrouzi, Hassan, Spencer Kwon, Augustin Landier, Yueran Ma, and David Thesmar (2020), "Over-
  reaction and working memory." Working paper.
Angeletos, George-Marios, Zhen Huo, and Karthik A. Sastry (Forthcoming), "Imperfect macroe-
 conomic expectations: Evidence and theory." NBER Macroeconomics Annual.
Arellano, Cristina, Yan Bai, and Patrick J. Kehoe (2019), "Financial frictions and fluctuations in
  volatility." Journal of Political Economy, 127, 2049­2103.
Azeredo da Silveira, Rava, Yeji Sung, and Michael Woodford (2020), "Optimally imprecise memory
  and biased forecasts." Working paper.
Bachmann, R¨  udiger, Ricardo J Caballero, and Eduardo MRA Engel (2013), "Aggregate impli-
  cations of lumpy investment: new evidence and a dsge model." American Economic Journal:
  Macroeconomics, 5, 29­67.
Baron, Matthew and Wei Xiong (2017), "Credit expansion and neglected crash risk." The Quar-
  terly Journal of Economics, 132, 713­764.
Barrero, Jose M. (2020), "The micro and macro of manager beliefs." Working Paper.
Bernanke, Ben and Mark Gertler (1989), "Agency costs, net worth, and business fluctuations."
  The American Economic Review, 79, 14­31.
Bernanke, Ben S, Mark Gertler, and Simon Gilchrist (1999), "The financial accelerator in a quan-
  titative business cycle framework." Handbook of macroeconomics, 1, 1341­1393.
Bertomeu, Jeremy, Iv´
                    an Marinovic, Stephen J. Terry, and Felipe Varas (2020), "The dynamics of
  concealment." Working paper.
Bhandari, Anmol, Jaroslav Borovicka, and Paul Ho (2019), "Survey data and subjective beliefs in
  business cycle models." Working paper.
Bianchi, Francesco, Cosmin L. Ilut, and Martin Schneider (2018), "Uncertainty shocks, asset
  supply and pricing over the business cycle." Review of Economic Studies, 85, 810­54.
Bianchi, Francesco, Sydney C. Ludvigson, and Sai Ma (2020), "Belief distortions and macroeco-
  nomic fluctuations." NBER working paper 27406.
Bloom, Nicholas, Max Floetotto, Nir Jaimovich, Itay Saporta-Eksten, and Stephen J Terry (2018),
  "Really uncertain business cycles." Econometrica, 86, 1031­1065.
Bordalo, Pedro, Katherine Coffman, Nicola Gennaioli, Frederik Schwerter, and Andrei Shleifer
  (2021), "Memory and representativeness." Psychological Review, 128, 71­85.
Bordalo, Pedro, Nicola Gennaioli, Spencer Yongwook Kwon, and Andrei Shleifer (Forthcoming),
  "Diagnostic bubbles." Journal of Financial Economics.
Bordalo, Pedro, Nicola Gennaioli, Rafael LaPorta, and Andrei Shleifer (2019), "Diagnostic expec-
  tations and stock returns." Journal of Finance, 74, 2839­2874.
Bordalo, Pedro, Nicola Gennaioli, Yueran Ma, and Andrei Shleifer (2020), "Overreaction in
  macroeconomic expectations." American Economic Review, 110, 2748­82.


                                               40
Bordalo, Pedro, Nicola Gennaioli, and Andrei Shleifer (2018), "Diagnostic expectations and credit
  cycles." The Journal of Finance, 73, 199­227.
Bouchaud, Jean-philippe, Philipp Krueger, Augustin Landier, and David Thesmar (2019), "Sticky
  expectations and the profitability anomaly." The Journal of Finance, 74, 639­674.
Brunnermeier, Markus K, Gary Gorton, and Arvind Krishnamurthy (2012), "Risk topography."
  NBER Macroeconomics Annual, 26, 149­176.
Caballero, Ricardo J. and Alp Simsek (2020), "A risk-centric model of demand recessions and
  speculation." Quarterly Journal of Economics, 135, 1493­1566.
CBO (2017), "International comparisons of corporate income tax rates." Exhibit 7.
Coibion, Olivier and Yuriy Gorodnichenko (2015), "Information rigidity and the expectations
  formation process: A simply framework and new facts." American Economic Review, 105, 2644­
  78.
Cooper, Russell and Jonathan Willis (2015), "Discounting: Investment sensitivity and aggregate
  implications." Working paper.
d'Arienzo, Daniele (2020), "Maturity increasing overreaction and bond market puzzles." Working
  paper.
D´
 avila, Eduardo and Anton Korinek (2017), "Pecuniary externalities in economies with financial
 frictions." The Review of Economic Studies, 85, 352­395.
Den Haan, Wouter J (2010), "Comparison of solutions to the incomplete markets model with
  aggregate uncertainty." Journal of Economic Dynamics and Control, 34, 4­27.
Eggertsson, Gauti B and Paul Krugman (2012), "Debt, deleveraging, and the liquidity trap: A
  fisher-minsky-koo approach." The Quarterly Journal of Economics, 127, 1469­1513.
Falato, Antonio and Jasmine Xiao (2020), "The information driven financial accelerator." Working
  paper.
Farhi, Emmanuel and Iv´  an Werning (2016), "A theory of macroprudential policies in the presence
  of nominal rigidities." Econometrica, 84, 1645­1704.
Farhi, Emmanuel and Ivan Werning (2020), "Taming a minsky cycle." Working paper.
Fostel, Ana and John Geanakoplos (2014), "Endogenous collateral constraints and the leverage
  cycle." Annual Review of Economics, 6, 771­799.
Fuster, Andreas, David Laibson, and Brock Mendel (2010), "Natural expectations and macroeco-
  nomic fluctuations." Journal of Economic Perspectives, 24, 67­84.
Gennaioli, Nicola, Yueran Ma, and Andrei Shleifer (2016), "Expectations and investment." NBER
 Macroeconomics Annual, 30, 379­431.
Gennaioli, Nicola and Andrei Shleifer (2010), "What comes to mind." The Quarterly journal of
 economics, 125, 1399­1433.
Gilchrist, Simon and Egon Zakrajsek (2012), "Credit spreads and business cycle fluctuations."
  American Economic Review, 102, 1692­1720.
Gilchrist, Simon, Egon Zakrajsek, and Jae Sim (2014), "Uncertainty, financial frictions, and in-
  vestment dynamics." Working paper.
Gomes, Joao F. (2001), "Financing investment." American Economic Review, 91, 1263­85.

                                               41
Gourio, Francois and Leena Rudanko (2014), "Customer Capital." Review of Economic Studies,
 81, 1102­36.
Greenwood, Robin and Samuel G Hanson (2013), "Issuer quality and corporate bond returns."
  The Review of Financial Studies, 26, 1483­1525.
Greenwood, Robin, Samuel G. Hanson, and Lawrence J. Jin (2019), "Reflexivity in credit markets."
  Working paper.
Greenwood, Robin, Samuel G. Hanson, Andrei Shleifer, and Jakob Ahm Sørensen (2020), "Pre-
  dictable financial crises." NBER working paper 27396.
Greenwood, Robin and Andrei Shleifer (2014), "Expectations of returns and expected returns."
  The Review of Financial Studies, 27, 714­746.
Gu, Chao, Fabrizio Mattesini, Cyril Monnet, and Randall Wright (2013), "Endogenous credit
 cycles." Journal of Political Economy, 121, 940­965.
Guerrieri, Veronica and Guido Lorenzoni (2017), "Credit crises, precautionary savings, and the
 liquidity trap." The Quarterly Journal of Economics, 132, 1427­1467.
Gulen, Huseyin, Mihai Ion, and Stefano Rossi (2019), "Credit cycles and corporate investment."
 Working paper.
Hansen, Lars Peter and Thomas J Sargent (2001a), "Acknowledging misspecification in macroe-
  conomic theory." Review of Economic Dynamics, 4, 519­535.
Hansen, Lars Peter and Thomas J. Sargent (2001b), "Robust control and model uncertainty."
  American Economic Review, 91, 60­66.
He, Zhiguo and Arvind Krishnamurthy (2019), "A macroeconomic framework for quantifying
  systemic risk." American Economic Journal: Macroeconomics, 11, 1­37.
Hennessy, Christopher A and Toni M Whited (2007), "How Costly is External Financing? Evi-
  dence from a Structural Estimation." Journal of Finance, 62, 1705­1745.
Ilut, Cosmin, Matthias Kehrig, and Martin Schneider (2018), "Slow to hire, quick to fire: Em-
   ployment dynamics with asymmetric responses to news." Journal of Political Economy, 126,
   2011­71.
Ilut, Cosmin L. and Hikaru Saijo (2020), "Learning, confidence, and business cycles." Journal of
   Monetary Economics. Forthcoming.
Ilut, Cosmin L and Martin Schneider (2014), "Ambiguous business cycles." American Economic
   Review, 104, 2368­99.
Jaimovich, Nir and Sergio Rebelo (2007), "Behavioral theories of the business cycle." Journal of
  the European Economic Association, 5, 361­68.
Jermann, Urban and Vincenzo Quadrini (2012), "Macroeconomic effects of financial shocks."
  American Economic Review, 102, 238­71.
Khan, Aubhik and Julia K Thomas (2008), "Idiosyncratic Shocks and the Role of Nonconvexities
 in Plant and Aggregate Investment Dynamics." Econometrica, 76, 395­436.
Kindleberger, Charles P. (1978), Manias, Panics, and Crashes: A History of Financial Crises.
  John Wiley & Sons.
King, Robert G and Sergio T Rebelo (1999), "Resuscitating real business cycles." Handbook of
  macroeconomics, 1, 927­1007.

                                              42
Kiyotaki, Nobuhiro and John Moore (1997), "Credit cycles." Journal of Political Economy, 105,
  211­248.
Kohlhas, Alexandre N. and Ansgar Walther (2020), "Asymmetric attention." Working paper.
Koop, Gary, M Hashem Pesaran, and Simon M Potter (1996), "Impulse response analysis in
 nonlinear multivariate models." Journal of Econometrics, 74, 119­147.
Korinek, Anton and Alp Simsek (2016), "Liquidity trap and excessive leverage." American Eco-
 nomic Review, 106, 699­738.
Kozlowski, Julian, Laura Veldkamp, and Venky Venkateswaran (2017), "The tail that wags the
 economy: Beliefs and persistent stagnation." Working paper.
Krishnamurthy, Arvind and Wenhao Li (2020), "Dissecting Mechanisms of Financial Crises: In-
  termediation and Sentiment." NBER working paper 27088.
Krishnamurthy, Arvind and Tyler Muir (2016), "How credit cycles across a financial crisis." Work-
  ing paper.
Krusell, Per and Anthony A Smith, Jr (1998), "Income and wealth heterogeneity in the macroe-
  conomy." Journal of Political Economy, 106, 867­896.
L´
 opez-Salido, David, Jeremy C Stein, and Egon Zakraj sek (2017), "Credit-market sentiment and
  the business cycle." The Quarterly Journal of Economics, 132, 1373­1426.
Lorenzoni, Guido (2008), "Inefficient credit booms." The Review of Economic Studies, 75, 809­
  833.
Lucas, Robert E (1976), "Econometric policy evaluation: A critique." In Carnegie-Rochester con-
  ference series on public policy, volume 1, 19­46.
Maxted, Peter (2020), "A macro-finance model with sentiment." Working paper.
Mian, Atif and Amir Sufi (2009), "The consequences of mortgage credit expansion: Evidence from
 the u.s. mortgage default crisis." Quarterly Journal of Economics, 124, 1449­96.
Mian, Atif, Amir Sufi, and Emil Verner (2017), "Household debt and business cycles worldwide."
 The Quarterly Journal of Economics, 132, 1755­1817.
Minsky, Hyman P (1977), "The financial instability hypothesis: An interpretation of keynes and
 an alternative to standard theory." Challenge, 20, 20­27.
Pflueger, Carolin, Emil Siriwardane, and Adi Sunderam (2020), "Financial market risk perceptions
   and the macroeconomy." The Quarterly Journal of Economics, 135, 1443­1491.
Richter, Bj¨
           orn and Kaspar Zimmermann (2020), "The profit-credit cycle." Working paper.
Rognlie, Matthew, Andrei Shleifer, and Alp Simsek (2018), "Investment hangover and the great
  recession." American Economic Journal: Macroeconomics, 10, 113­53.
Saporta-Eksten, Itay and Stephen J. Terry (2018), "Short-term shocks and long-term investment."
  Working paper.
Schaal, Edouard and Mathieu Taschereau-Dumouchel (2020), "Herding cycles." Working paper.
Schularick, Moritz and Alan M Taylor (2012), "Credit booms gone bust: Monetary policy, leverage
  cycles, and financial crises, 1870-2008." American Economic Review, 102, 1029­61.



                                               43
Shleifer, Andrei and Robert W Vishny (1992), "Liquidation values and debt capacity: A market
  equilibrium approach." The Journal of Finance, 47, 1343­1366.
Simsek, Alp (2013), "Belief disagreements and collateral constraints." Econometrica, 81, 1­53.
Stein, Jeremy C (2012), "Monetary policy as financial stability regulation." The Quarterly Journal
  of Economics, 127, 57­95.
Strebulaev, Ilya A and Toni M Whited (2012), "Dynamic Models and Structural Estimation in
  Corporate Finance." Foundations and Trends in Finance, 6, 1­163.
Tauchen, George (1986), "Finite state markov-chain approximations to univariate and vector
  autoregressions." Economics letters, 20, 177­181.
Terry, Stephen J (2017a), "Alternative methods for solving heterogeneous firm models." Journal
  of Money, Credit and Banking, 49, 1081­1111.
Terry, Stephen J. (2017b), "The macro impact of short-termism." Working paper.
Winberry, Thomas (2017), "Lumpy investment, business cycles, and stimulus policy."
Woodford, Michael (2003), "Imperfect common knowledge and the effects of monetary policy."
 In Knowledge, Information, and Expectations in Modern Macroeconomics (Philippe Aghion,
 Roman Frydman, Joseph Stiglitz, and Michael Woodford, eds.), Princeton University Press.
Young, Eric R (2010), "Solving the Incomplete Markets Model with Aggregate Uncertainty Using
  the Krusell­Smith Algorithm and Non-Stochastic Simulations." Journal of Economic Dynamics
  and Control, 34, 36­41.




                                               44
    Appendices for Online Publication Only

A     Model
A.1     Solving the Model
The computational algorithm involves iteration on an outer loop (related to debt pricing) and
an inner loop (related to firm policies). Before solving the model, we discretize the state space
(s, k, b) = (z, z , A, A , k, b) into nz × nz × nA × nA × nk × nb grid points. We then discretize the
rational and perceived diagnostic transitions of the exogenous states according to Tauchen (1986).
The computational algorithm - following Strebulaev and Whited (2012) - proceeds as follows:

Start outer loop.



  1. Guess a default policy df  (s, k, b), and compute the implied debt prices q  (s, k, b) according
     to the lenders diagnostic zero-profit condition Equation (17).

      Start inner loop.

      (a) Given the debt prices q  (s, k, b) and default policy df  (s, k, b), solve the diagnostic firm's
          Bellman Equations (14), (15), and (16) for V  (s, k, b), VN                        
                                                                           D (s, k, b), and VD (s) as well
          as the implied optimal policies for investment and debt issuance k  (s, k, b), b  (s, k, b).
          Use standard discrete-state, discrete-policy dynamic programming policy iteration to
          do so.

  2. Compute updated default policies df  (s, k, b) according to the default choice defining V  in
                                            
     Equation (14), i.e., VN D (s, k, b) < VD (s).


  3. Compute the ergodic distribution µ(s, k, b) implied by the firm policies for default, capital,
     and debt df  (s, k, b), k  (s, k, b), and b  (s, k, b).

  4. Compute the mass of states in which the guessed default policy differs from the updated
     default policy. If this set of states has mass lower than some tolerance, exit. If not, then go
     to top and restart with the updated set of default states as your new guess.

   We implement this computationally intensive algorithm in heavily parallelized Fortran on a
2017 iMac Pro, with runtimes around 250 seconds. Table A1 reports the value of several dimensions
used for the baseline solution of the model.



                                                   1
                                Table A1: Computational Choices

                        Quantity                  Description           Value
                         T sim                Simulated periods           250
                          T erg          Initially discarded periods      25
                         N f irm               Number of firms           1250
                         N IRF           Number of IRF economies        10000
                         T IRF            Length of IRF economies         75
                        T decomp     Length of historical decomposition    2
                           nz           Micro productivity grid size       5
                           nA           Macro productivity grid size       5
                           nk                  Capital grid size          30
                           nb                   Debt grid size            30

Notes: The table reports various computational values used in discretizing and solving the model.


A.2      Simulating the Model
After the model is solved, we unconditionally simulate the model by drawing exogenous uniform
random shocks and combining this information with the transition matrix for macro TFP to
simulate the macro process for At for some periods t = 1, ..., T sim + T erg . At the micro level, we
simulate the model "non-stochastically" according to the method of Young (2010), i.e., we store
the dynamics of the weight of the cross-sectional distribution at each discretized point in the state
space (s, k, b) rather than simulating a large number of firms. Note that when simulating the
model, all macro shocks and distributional dynamics are determined according to the rational or
true representations of the driving process, even though debt pricing and firm polices may involve
diagnostic expectations.
    With the simulated distribution in hand for each period, macro series of interest are simply
weighted sums of micro-level outcomes across this distribution, discarding the first T erg periods to
remove the influence of initial conditions. Note that we do in fact simulate a number of individual
firms N f irm for the purpose of computing moments within our SMM estimation algorithm, but
this is not a step required for the purpose of solving the model or simulating within-period business
cycle aggregates.




                                                       2
A.3     Computing Impulse Responses
Our approach to impulse response calculation in this nonlinear context follows Koop et al. (1996),
i.e., we compute nonlinear generalized impulse responses. To understand the impact of a given
sequence of shocks, we perform the following:

  1. For a large number N irf of economies of length T irf , simulate two different versions of the
     simulation, the "shock" and "no shock" versions. For each economy and each version, we
     simulate the macro TFP process by first drawing T irf uniform shocks for comparison with the
     macro TFP transition matrix. Then, simulate both versions unconditionally using identical
     macro TFP shocks until period T shock < T irf .

  2. From period T shock and continuing as long as the desired sequence of exogenous innovations
     you wish to impose lasts, impose a number of periods of certain pre-determined innovations
     in productivity for the "shock" case, while continuing to simulate the "no shock" economy
     unconditionally.

  3. After the imposed shocks sequence is complete, simulate macro TFP in both economies as
     normal.

  4. After the macro TFP process is determined for each pair of economies, compute the business
     cycle aggregates of interest in each economy, period, and version by using the simulation
     approach outlined above.
                                    shock
  5. If business cycle aggregate Xi,t     is series X in economy i in period t in the shock case, and
        noshock
     Xi,t       is series X in economy i in period t in the no shock case, then define the impulse
     response to the predetermined sequence of innovations as

                                                 N irf    shock      noshock
                                           1             Xi,t   - Xi,t
                                 IRFtX   = irf                  noshock
                                                                             .
                                          N      i=1
                                                              Xi,t


    The main text's set of impulse response figures reports the series IRF X for the indicated
macro-financial aggregates. Note, however, that the impulse responses presented in the text are
scaled to equal an exact shock size, while the productivity grid in the model varies discretely. We
achieve this by imposing movements up or down by a single grid point, imposing Step 2 above
only with a certain probability chosen in each period to deliver the desired average shock size.


A.4     Performing the Spread Matching Exercise
In a classic linear setting, performing historical decompositions such as the one used in Section
6 is typically a trivial matter of inverting a data path using simple linear algebra. However, our


                                                 3
nonlinear model with heterogeneity and a discretized productivity process poses some additional
computational challenges. Given the empirical path across two period t = 1, 2 for macro credit
                                    decomp
spreads to match (S1 , S2 , ..., ST        ), we proceed as follows.
    First, we pick an initial period drawn from a representative location in the unconditional
simulation of the model, fixing the associated simulated cross-sectional distribution of firm-level
states µ0 drawn from the simulation of the model. Call this period t = 0, and note that at
the end of period 0 a cross-sectional distribution µ1 is pre-determined. Then for each period
t = 1, ..., T decomp , do the following:

  1. Guess a value for macro TFP At , and find the bracketing interval [Ai-1 , Ai ] together with
                                                t -Ai-1
     linear interpolation weights  (At , i) = A
                                              Ai -Ai-1
                                                        for the guessed value of productivity.

  2. Compute the implied policies of all firms in the cross-sectional distribution µt given a macro
     TFP level equal to Ai , together with the implied macro spread level S (Ai ). Repeat the
     process for macro TFP equal to Ai-1 to obtain S (Ai-1 ).

  3. Assume that firms play a "mixed strategy" over the two macro TFP grid points, in which
     case the resulting macro spread level is (1 -  (At , i))S (Ai-1 ) +  (At , i)S (Ai ).

  4. If the implied macro spread level is not equal to the desired spread value St to within some
     tolerance, then update your guess for macro TFP At and return to Step 1. Otherwise
     proceed.

  5. Given a productivity guess which delivers exactly the correct interpolated value of macro pro-
     ductivity in period t, compute the beginning-of-period distribution µt+1 of firm-level states
     by pushing forward a fraction  (At , i) of the distribution µt using firm policies associated
     with Ai and a fraction 1 -  (At , i) of the distribution µt using firm policies associated with
     Ai-1 .

     At the end of this process, you have determined a smooth value of productivity At which
gives you an implied macro spread series exactly consistent with the target value in period t,
and you have updated the cross-sectional distribution in an internally consistent fashion given
the smooth value of productivity between grid points. Repeating this process for each period
t = 1, ..., T decomp yields a productivity path At , as well as a set of cross-sectional distributions
µt , which exactly match the target data path for spread. All other macro aggregates of interest
can then be computed from the distributional and macro TFP path. Note that for the spread
matching exercise for the Great Recession and financial crisis in Section 6, we set T decomp = 2,
with t = 1 being the "Pre-Crisis" period and t = 2 being the "Crisis" period.


A.5     General Equilibrium Solution Algorithm
We follow an outer loop/inner loop approach to solving the model with endogenous wages.

                                                  4
  1. Guess a mapping from a truncated history of macro states

                                   (At-K , At-K +1 , ..., At-1 , At )  Wt .




  2. Solve the model conditional upon this tractable truncated history, where (At , At-1 , ...., At-K )
     enters the firm's state vector and hence the Bellman equations determining investment,
     default, and debt issuance policies.

  3. Simulate the model for a large number of periods t = 1, ..., T , clearing markets with Wt in
     each period t by numerically solving the nonlinear equation
                                         
                                    Wt
                                            =    n(s, k, b|Wt )dµt (s, k, b)
                                    

     for each period t in the simulation. Note that this is a well behaved nonlinear equation in
     one variable. The static labor policies n(s, k, b|Wt ) are strictly declining in Wt on the RHS
     and the function on the LHS is strictly increasing in Wt . In practice, markets can be cleared
     robustly using bisection or another similar algorithm.

  4. Based on the simulated wage data, update your wage prediction mapping from Step 1. If
     the mapping has converged to within some tolerance, exit. If not update the mapping and
     return to Step 1.

    A few practical comments are in order. First, given the discretized macro TFP state space,
we store the wage mapping nonparametrically as a matrix of mean wages conditional upon each
combination of truncated macro TFP histories. After simulation, the wage mapping update step
simply involves repeated calculations of mean wages within the appropriate subsamples of the
simulated data. Second, because the macro state is replaced with macro TFP shock histories rather
than with an augmented endogenous macro moment, there is no need to create an approximate
anticipated default rule used to price debt. Lenders simply price debt according to the usual
no-arbitrage condition in Equation (17), conditional upon firm default policies which now have
as explicit inputs the macro TFP shock histories. Third, because no endogenous moments are
forecasted in our solution method, there is no Den Haan (2010)-style distinction between static
and dynamic forecasts of the wage. In other words, there is no room for forecast errors about
endogenous macro moments to accumulate over time, since only exogenous shock histories are
used for forecasts. So, unlike in typical adaptations of the Krusell and Smith (1998) method, the
R2 of the implicit wage forecast rule is in this case an appropriate metric of accuracy. With this
in mind, Figure A1 plots the estimated R2 of regressions of the log wage on fully populated sets
of dummies for macro TFP histories of up to a given lag length. Once a single lag is taken into


                                                   5
account, incorporating information from yesterdays' TFP level about the current distribution of
capital and hence labor demand in the cross section, the R2 measures stabilize. Our baseline case,
which uses a single lag with K = 1 in the wage prediction rule, is therefore a parsimonious but
apparently accurate choice.

                                      Figure A1: Wage Predictions and TFP Lags
                                                       Forecast Accuracy
                                 1

                               0.99

                               0.98

                               0.97
                Wage Rule R2




                               0.96

                               0.95

                               0.94

                               0.93

                               0.92

                               0.91

                                0.9
                                          0            1                 2         3
                                                   Number of Productivity Lags
Notes: The figure plots the R2 of nonparametric regressions of log wages on discrete histories of macro TFP of
increasing length.




                                                            6
Table A2: Business Cycle Moments: Rational Counterfactual with  = 0


                                  Rational Counterfactual Model
  Correlation       Output           Debt        Investment        Spread      Standard Deviation
  Output            1.000            0.728          0.701          0.390             0.012
  Debt                               1.000          0.512          0.196             0.007
  Investment                                        1.000          0.319             0.032
  Spread                                                           1.000             0.000
  Notes: The table reports business cycle correlations (left) and standard deviations (right) from the
  rational counterfactual model, i.e., a model with rational expectations but parameterized otherwise
  identically to the estimated model with diagnosticity. The model moments are computed from an
  unconditional simulation of 1000 years. Model quantities refer to total values (output, debt, and
  investment) or average values (spread) computed from the distribution of firms. Output, debt, and
  investment are HP-filtered with smoothing parameter 100.




                                                   7
B       Data
B.1      Microdata on Firm Beliefs from Compustat and IBES-Guidance
In our analysis of firm financial and profit forecasts we use a combination of the Compustat
Fundamentals Annual and IBES manager guidance databases. The combined sample for the
Compustat-IBES data spans 1999-2017 for 8620 firm-fiscal years spanning 1320 firms. To construct
our sample, we discard utilities and financials as well as any firm-years with negative values for
assets, capital, employment or sales. Descriptive statistics for each variable from this sample used
in our analysis, as well as firm revenues and capital, are reported in Table B1. Robustness checks
for the forecast error reversion regressions in Section 2 in the main text also follow below.

                              Table B1: Sample Descriptive Statistics

                                  Quantity          Mean       Standard Deviation
                                    Sales           6732.4          23268.8
                                   Capital          1499.4           6286.3
                                    Profit          0.448             1.062
                                 Investment         0.321             0.238
                                Debt Issuance       -0.404            3.883
                                Forecast Error      -0.267            0.804
                                   Forecast         0.823             0.933

Notes: The table reports descriptive statistics for the sample of 1320 firms from 1999-2017 in the combined
Compustat-IBES database. The first two rows represent revenues and the book value of the capital stock, in $
millions. The remaining rows reflect the ratio of realized earnings to the book value of the capital stock, the
capital expenditures investment rate, the ratio of end of period total liabilities to the capital stock, the next-period
forecast error defined as realized future profits minus manager guidance scaled by firm capital, and the next period
forecast defined as manager profit guidance scaled by firm capital. The sample was winsorized before computing
the descriptive statistics above.


   The variable definitions are given as follows, with both empirical and model information at-
tached:

    · Earnings or profits are equal to GAAP net income, Compustat ib. The model equivalent
      is  = (1 -  )(y - W n - AC (i, k ) - ) +  (Rb + k ) - k .

    · Capital k is equal to the book value of plants, property, and equipment, Compustat ppent.
      The model equivalent is the state variable k .

    · Investment i is equal to the total value of capital expenditures, Compustat capxv. The
      model equivalent is the policy variable i = k - (1 -  )k .

    · Debt b is equal to the total net value of liabilities, Compustat dltt + dlc - che. The model
      equivalent is the state variable b.

                                                           8
   · Forecast error f e is equal to the realized value of earnings  minus the forecast level
     of earnings  f made from the previous fiscal year, where realized earnings are Compustat
     ib and forecast earnings are equal to manager guidance from the IBES database. The
     model equivalent is the earnings value  above, minus the forecast level implied by firm-level
     diagnostic expectations, the definition of  , and firm policies predetermined in the previous
     period.

    We also use the merged Compustat-IBES guidance sample to run various robustness checks to
the firm forecast error predictability regressions reported in the main text. Table B2 shows similar
forecast error predictability maintains after the Great Recession. Table B3 shows that forecast
error predictability is robust in a sample of firms present for five or more years in the data. Table
B4 shows that forecast error predictability remains present after discarding all firms with high-
yield debt as classified by Moody's ratings. Table B5 shows that forecast error predictability is
robust in a specification with all variables in first differences.


B.2     Microdata on Bonds from FISD-TRACE
We use the WRDS US Corporate Bond Return database, which merges the Mergent FISD and
FINRA TRACE datasets with issuance and secondary market information on corporate bond is-
sues, respectively. We consider only unsecured, unconvertible debentures and convert secondary
market yields to spreads based on comparable Treasury rates, with a resulting dataset of around
80,000 issues from mid-2002 to late 2019. We link the bond return database to Compustat firm
financials through the WRDS CRSP link, and we aggregate from the issue to firm level by com-
puting average yields and bond returns for a firm in Q4 of a given year. The resulting dataset
spans around 1,500 large US public firms. Linking this panel to the IBES-manager guidance data
yields the sample used in Table 2 in the main text. Table B6 replicates Table 2 but does not
include current profit controls for the investment regressions nor lagged spread controls for the
spread regressions. Table B7 replicates Table 2 conditioning only on investment grade bonds.


B.3     Macro Data
At the macro level, we use a combination of information from the NIPA accounts, the BIS,
Moody's. The following variables are relevant, all at annual frequency or converted to annual
frequency by averaging.

   · Output Y is real GDP from the NIPA accounts.

   · Debt B is real total nonfinancial corporate credit in the US from the BIS.

   · Investment I is real nonresidential private investment from the NIPA accounts in the data.


                                                 9
   · Spreads are the Moody's BAA spread relative to 10-year Treasury bonds, at an annualized
     rate.

   · TFP is the annualized value of the series dtfp from John Fernald's website.

   · Profit Fcst is the sum of earnings guidance across firms in a given year from our Compustat-
     IBES merged database.

   In the empirical business cycle moments in Table 8, we reports moments from the HP-filtered
values of output, investment, and debt, together with unadjusted spread levels. In the spread
matching/Great Recession exercise in Figure 4, we report the average spread and the average
growth of credit, output, investment, and profit forecasts in each subperiod.


B.4     SMM Estimation
Our SMM estimation exercise in Section 5 involves three steps: 1) moment and covariance matrix
calculations, 2) model estimation, and 3) standard error calculation. We detail each of these steps
in turn.

B.4.1   Moment and Covariance Matrix Calculation

Table 4 reports a set of 18 target moments at the micro and macro levels for our SMM estimation
exercise. The micro moments are a covariance matrix of the vector

                Xit = (Forecast Errorit+1 , Profitit , Investmentit , Debtit , Spreadit )

for firm i in fiscal year t from our merged Compustat-IBES-FISD-TRACE sample. The merged
sample with each of those variables available for all firms spans 387 firms and 2919 total observa-
tions. To compute the micro moments, we use the following procedure:

                                           ^ it
   · Demean Xit by firm and year to obtain X

                                                  ^ it X
   · Compute the covariance matrix as the mean of X    ^ it .

   · Apply the standard formula for the clustered covariance of a mean vector to obtain the
     moment covariance matrix M icro , clustering across firms.

   With the estimated micro moments and the estimated moment covariance matrix for the micro
moments in hand, we then turn to the calculation of the macro moments and their covariance
matrix. Note that the macro moments are the mean default rate, the mean spread, and the
standard deviation of real GDP growth. We compute the mean default and spread series from our
merged FISD-TRACE data on corporate debt, and we compute real GDP growth from the NIPA


                                                   10
data. The point estimates of these macro moments are trivial to compute. We then compute
an estimate of the covariance matrix of these macro moments M acro using a stationary block
bootstrap.
   Note that for our later inference based on clustering at the firm level, we will rely upon
asymptotics in the number of firms, together with an assumption that the macro sample length T
and the number of firms N behave proportionally with T /N   for some constant  as N  .
This allows us to rely on asymptotics of the basic form
                                  
                                        µ - µ) d,N  N (0, ),
                                     N (^                                                     (18)

where µ
      ^ is the estimated moment vector (with micro and macro moments) and  is the joint
moment covariance adjusted for  .

                                           M icro      0
                                     =               1
                                                               .
                                            0          
                                                      M acro



   Table 4 reports µ
                   ^ and standard errors based on the approximating variance from (18).

B.4.2   Point Estimate Calculation

We compute the point estimates   ^ for the vector of estimated parameters  in Tables 5 and 6 by
solving the following standard SMM optimization problem

                                 min(µS ( ) - µ
                                              ^) ^ -1 (µS ( ) - µ
                                                                ^)
                                  



    where µS ( ) is the model value of the moments given  computed from simulated data,        ^ -1
is the asymptotically efficient weighting matrix given by the inverse of the estimated moment
covariance matrix, and µ ^ is the empirical moment vector. We employ particle swarm optimization
to solve this optimization problem, a stochastic global optimization routine that bears substantial
similarity to simulated annealing and genetic algorithms.

B.4.3   Standard Error Calculation

Given the ratio between the number of firms N sim in the model simulation used to compute
µS ( ) and the empirical number of firms N , the SMM estimator's asymptotic covariance matrix
 follows

                                  
                                  N (^ -  ) d,N  N (0, )                                      (19)



                                                11
where
                                                                   -1
                                       N       µS ( ) -1 µS ( )
                          =      1+                                     .                    (20)
                                      N sim               
Equation (20) yields a feasible formula for  after substitution of the estimated covariance matrix
^ and numerical calculation of the moment Jacobian matrix µS ( ) within the model using forward
                                                               
                                          ^
differentiation from the point estimates  . With these elements in hand, Tables 5 and 6 report
standard errors based on the approximating variance from (19).




                                               12
B.5   Robustness Tables

        Table B2: Predictable Forecast Errors: Post-Great Recession


                                   (1)                (2)                 (3)                (4)
                              Fcst. Errort+1     Fcst. Errort+1      Fcst. Errort+1     Fcst. Errort+1

           Forecastt           -0.320***
                                (0.052)
            Profitst                               -0.133***
                                                     (0.030)
          Investmentt                                                 -0.398***
                                                                       (0.107)
        Debt Issuancet                                                                    -0.051***
                                                                                            (0.013)
        Firm Effect                X                   X                  X                   X
        Time Effects               X                   X                  X                   X
        Years                   2010-18             2010-18            2010-18             2010-18
        Firm-Years               3880                3880               3880                3880
        Notes: The table reports estimates of specifications on the merged Compustat - IBES Guidance
        sample at the firm-fiscal year level, restricting to the post-Great Recession period. Forecasts are
        earnings guidance, profits are earnings, investment is tangible capital expenditures, debt issuance
        is end-of-period net debt, and forecast errors are actual earnings minus manager guidance at a 1-
        year horizon. All series are relative to firm tangible capital stocks at the beginning of the year.
        Standard errors are clustered at the firm level. * = 10% level, ** = 5% level, and ***=1% level.
        The standard deviation of future forecast errors is 0.781, the standard deviation of forecasts is
        0.914, the standard deviation of profits is 1.008, the standard deviation of investment is 0.216,
        and the standard deviation of debt issuance is 3.719. For all series, 0.01=1% relative to a firm's
        tangible capital stock.




                                                        13
Table B3: Predictable Forecast Errors: Forecasts for 5 or More Years

                              (1)                (2)                 (3)                (4)
                         Fcst. Errort+1     Fcst. Errort+1      Fcst. Errort+1     Fcst. Errort+1

      Forecastt           -0.243***
                           (0.030)
       Profitst                                -0.036*
                                               (0.021)
     Investmentt                                                 -0.451***
                                                                   (0.066)
    Debt Issuancet                                                                   -0.040***
                                                                                       (0.007)
   Firm Effect                X                   X                  X                   X
   Time Effects               X                   X                  X                   X
   Years                   1999-18             1999-18            1999-18             1999-18
   Firm-Years               9564                9564               9564                9564
   Notes: The table reports estimates of specifications on the merged Compustat - IBES Guidance
   sample at the firm-fiscal year level, restricting to firms with at least 5 years of forecasts.
   Forecasts are earnings guidance, profits are earnings, investment is tangible capital expenditures,
   debt issuance is end-of-period net debt, and forecast errors are actual earnings minus manager
   guidance at a 1-year horizon. All series are relative to firm tangible capital stocks at the
   beginning of the year. Standard errors are clustered at the firm level. * = 10% level, ** = 5%
   level, and ***=1% level. The standard deviation of future forecast errors is 0.777, the standard
   deviation of forecasts is 0.921, the standard deviation of profits is 1.012, the standard deviation
   of investment is 0.232, and the standard deviation of debt issuance is 3.760. For all series,
   0.01=1% relative to a firm's tangible capital stock.




                                                   14
Table B4: Predictable Forecast Errors: Investment Grade Debt

                            (1)                (2)                 (3)                (4)
                       Fcst. Errort+1     Fcst. Errort+1      Fcst. Errort+1     Fcst. Errort+1

    Forecastt           -0.229***
                         (0.031)
     Profitst                                -0.050**
                                              (0.022)
   Investmentt                                                 -0.445***
                                                                 (0.068)
 Debt Issuancet                                                                    -0.036***
                                                                                     (0.007)
 Firm Effect                X                   X                  X                   X
 Time Effects               X                   X                  X                   X
 Years                   1999-18             1999-18            1999-18             1999-18
 Firm-Years               8620                8620               8620                8620

 Notes: The table reports estimates of specifications on the merged Compustat - IBES Guidance
 sample at the firm-fiscal year level, restricting to firms with Moody's rated investment grade
 debt. Forecasts are earnings guidance, profits are earnings, investment is tangible capital
 expenditures, debt issuance is end-of-period net debt, and forecast errors are actual earnings
 minus manager guidance at a 1-year horizon. All series are relative to firm tangible capital stocks
 at the beginning of the year. Standard errors are clustered at the firm level. * = 10% level, ** =
 5% level, and ***=1% level. The standard deviation of future forecast errors is 0.804, the
 standard deviation of forecasts is 0.933, the standard deviation of profits is 1.062, the standard
 deviation of investment is 0.238, and the standard deviation of debt issuance is 3.883. For all
 series, 0.01=1% relative to a firm's tangible capital stock.




                                                 15
    Table B5: Predictable Forecast Errors: First Differences

                            (1)                 (2)                 (3)                 (4)
                      Fcst. Errort+1      Fcst. Errort+1       Fcst. Errort+1      Fcst. Errort+1

   Forecastt            -0.385***
                         (0.047)
    Profitst                                -0.304***
                                             (0.021)
  Investmentt                                                   -0.286***
                                                                  (0.073)
Debt Issuancet                                                                      -0.035***
                                                                                      (0.012)
Firm Effect                 X                   X                   X                   X
Time Effects                X                   X                   X                   X
Years                    2000-18             2000-18             2000-18             2000-18
Firm-Years                7125                7125                7125                7125
Notes: The table reports estimates of specifications on the merged Compustat - IBES Guidance
sample at the firm-fiscal year level. Forecasts are earnings guidance, profits are earnings,
investment is tangible capital expenditures, debt issuance is end-of-period net debt, and forecast
errors are actual earnings minus manager guidance at a 1-year horizon. All series are relative to
firm tangible capital stocks at the beginning of the year. Standard errors are clustered at the firm
level. * = 10% level, ** = 5% level, and ***=1% level. The standard deviation of future forecast
errors is 0.652, the standard deviation of forecasts is 0.383, the standard deviation of profits is
0.780, the standard deviation of investment is 0.178, and the standard deviation of debt issuance
is 1.713. For all series, 0.01=1% relative to a firm's tangible capital stock. All series are in first
differences.




                                                 16
   Table B6: Linking Forecast Errors and Credit Spreads: No Controls


                          (1)             (2)             (3)             (4)            (5)             (6)
Dependent Variable:     Returnt         Returnt        Spreadt         Spreadt        Investmentt  Investmentt
Estimation               OLS              IV           OLS              IV              OLS           IV

Fcst. Errort            0.001           0.007*        -0.003***        -0.007**         0.008         0.453***
                       (0.001)          (0.004)         (0.001)         (0.004)        (0.007)         (0.096)

 First Stage                          Fcst. Errort                    Fcst. Errort                   Fcst. Errort
Investmentt-1                         -0.562***                       -0.562***                       -0.562***
                                        (0.105)                         (0.105)                         (0.105)
Years                  2003-18         2003-18         2003-18         2003-18         2003-18         2003-18
Firm-Years              2852            2852            2852            2852            2852            2852
Time Effects              X               X               X               X               X               X
First Stage F                           28.94                           28.94                           28.94
Notes: The table reports estimates of specifications on the merged Compustat - IBES - FISD/TRACE sample at the
firm-fiscal year level. The top panel plots OLS and IV second-stage estimates. The bottom panel, where relevant,
reports IV first-stage estimates. Standard errors are clustered at the firm level. * = 10% level, ** = 5% level, and
***=1% level. The standard deviation of the bond return is 0.014, the standard deviation of spread growth is 0.024,
the standard deviation of investment growth is 0.090, the standard deviation of the forecast error is 0.438, and the
standard deviation of lagged investment is 0.133. For all series, 0.01=1% relative to a firm's tangible capital stock.




                                                         17
Table B7: Linking Forecast Errors and Credit Spreads: Investment Grade Debt

                            (1)             (2)             (3)             (4)            (5)             (6)
  Dependent Variable:     Returnt         Returnt        Spreadt         Spreadt        Investmentt  Investmentt
  Estimation               OLS              IV           OLS              IV              OLS           IV

   Fcst. Errort          0.00004          0.007*         -0.001**       -0.007***        0.020**        0.409***
                         (0.0005)         (0.003)        (0.0004)         (0.003)        (0.009)         (0.074)

   First Stage                          Fcst. Errort                    Fcst. Errort                   Fcst. Errort

  Investmentt-1                         -0.568***                       -0.568***                       -0.568***
                                          (0.118)                         (0.118)                         (0.118)
  Years                  2003-18         2003-18         2003-18         2003-18         2003-18         2003-18
  Firm-Years              1984            1984            1984            1984            1984            1984
  Time Effects              X               X               X               X               X               X
  First Stage F                           23.27                           23.27                           23.27
  Notes: The table reports estimates of specifications on the merged Compustat - IBES - FISD/TRACE sample at the
  firm-fiscal year level, restricting to firms with Moody's rated investment grade debt. The top panel plots OLS and IV
  second-stage estimates. The bottom panel, where relevant, reports IV first-stage estimates. Columns (3)-(4) control
  for lagged spreads, and columns (5)-(6) control for current profits in the second stage. Standard errors are clustered
  at the firm level. * = 10% level, ** = 5% level, and ***=1% level. The standard deviation of the bond return is 0.014,
  the standard deviation of spread growth is 0.024, the standard deviation of investment growth is 0.090, the standard
  deviation of the forecast error is 0.438, and the standard deviation of lagged investment is 0.133. For all series,
  0.01=1% relative to a firm's tangible capital stock.




                                                            18
