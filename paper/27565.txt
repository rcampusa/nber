                              NBER WORKING PAPER SERIES




                     FIRMS, FAILURES, AND FLUCTUATIONS:
              THE MACROECONOMICS OF SUPPLY CHAIN DISRUPTIONS

                                       Daron Acemoglu
                                     Alireza Tahbaz-Salehi

                                      Working Paper 27565
                              http://www.nber.org/papers/w27565


                    NATIONAL BUREAU OF ECONOMIC RESEARCH
                             1050 Massachusetts Avenue
                               Cambridge, MA 02138
                                    July 2020




We thank Carlos Molina for excellent research assistance. We are grateful to David Baqaee,
Vasco Carvalho, Martin Jensen, Roland Kpodar, Glenn Magerman, Pooya Molavi, Ezra
Oberfield, Ali Shourideh, Claudio Tebaldi, Andrea Vedolin, and seminar participants at Boston
University, Columbia, FDIC, National Bank of Belgium, Northwestern, Penn, Queen Mary,
University of Tokyo, UT-Austin Macro/International Conference, Deutsche Bundesbank­ECB
Joint Spring Conference on Systemic Risk and the Macroeconomy, and ERC/LBS/CEPR
Conference on Granularity for various comments and suggestions. This research has benefited
from financial support from the International Monetary Fund (IMF)-Department for International
Development (DFID) project on Macroeconomic Research in Low-Income Countries (Project id:
60925). The views expressed herein are those of the authors and do not necessarily reflect the
views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2020 by Daron Acemoglu and Alireza Tahbaz-Salehi. All rights reserved. Short sections of
text, not to exceed two paragraphs, may be quoted without explicit permission provided that full
credit, including © notice, is given to the source.
Firms, Failures, and Fluctuations: The Macroeconomics of Supply Chain Disruptions
Daron Acemoglu and Alireza Tahbaz-Salehi
NBER Working Paper No. 27565
July 2020
JEL No. D57,E23,E32

                                          ABSTRACT

This paper studies how firm failures and the resulting disruptions to supply chains can amplify
negative shocks. We develop a non-competitive model where customized supplier-customer
relations increase productivity, and the relationship-specific surplus generated between firms and
their suppliers is divided via bargaining. Changes in productivity alter the distribution of surplus
throughout the economy and determine which firms are at the margin of failure. A firm's failure
may spread to its suppliers and customers and to firms in other parts of the production network.
We provide existence, uniqueness, and a series of comparative statics results, and show how the
response of the equilibrium production network may propagate recessionary shocks.


Daron Acemoglu
Department of Economics
MIT
50 Memorial Drive
Cambridge, MA 02142-1347
and NBER
daron@mit.edu

Alireza Tahbaz-Salehi
Kellogg School of Management
Northwestern University
2211 Campus Drive, Evanston, IL 60208
alirezat@kellogg.northwestern.edu
1    Introduction

Businesses are more likely to fail during economic downturns. Figure 1 depicts the annual evolution
of firm failures in the United States between 1978 and 2014, with raw and HP-filtered data presented
in panels (a) and (b), respectively. The spikes in business failures during the NBER recession dates,
shown in gray, are visible in both panels. For example, the failure rate of all U.S. firms increased from
an average of 8.3% in the 2003­2007 period to more than 9% during the Great Recession.1
    One consequence of widespread firm failures is the potential disruption to the efficient operation
of supply chains. Supply chains generate productivity gains by enabling input customization, but also
add to an economy's fragility: bankruptcies destroy the relationship-specific surplus between firms
and their suppliers and may spread in the economy as a firm's failure spills over to its customers,
suppliers, and beyond. Such concerns were the motivation for the 2012 U.S. National Strategy for
Global Supply Chain Security, which was based on the premise that "[i]ntegrated supply chains are
fast and cost-efficient but also susceptible to shocks that can rapidly escalate from localized events
into broader disruptions" (The White House, 2012).
    The current paper is a first attempt to develop a systematic framework for studying how
firm failures and the resulting supply chain disruptions impact the macroeconomy and amplify
recessionary shocks. Modeling the relationship-specific surplus that is at the heart of supply chains
requires a departure from competitive analysis. We achieve this by developing a tractable framework
in which firms and their suppliers bargain over their relationship-specific surplus. In this framework,
changes in productivity alter the distribution of this surplus throughout the economy, determine
which firms are at the margin of failure, and may trigger cascading failures impacting the entire
production network of the economy.2
    We consider a static economy consisting of n intermediate sectors that produce with labor and
inputs from other sectors and whose products are then combined into a unique consumption good
by a final good sector. Each industry comprises two types of producers. The first is a competitive fringe
of firms that produce a "generic" variant of the good using a constant returns technology with inputs
sourced from other generic producers. This part of the economy thus defines a sectoral production
network and is similar to a standard input-output economy (e.g., Long and Plosser, 1983; Acemoglu
et al., 2012). The second group of firms, which we refer to as "customized" producers, have access to a
more productive technology, provided that they pay a fixed cost of operation and use inputs from
their designated customized suppliers.3 The relationship-specific productivity gains generated by
customized firms and their potential loss due to shocks or firm failures are our points of departure
from the previous literature.
    While generic producers are price-takers and generic prices are determined competitively, the
   1
     Appendix E provides information on data sources and additional results confirming the patterns shown here, including a
very similar cyclical behavior for exit rate of establishments (as opposed to firms) in the United States. Also see Chen (2010),
who documents similar patterns for movements in default rates and credit spreads over the business cycle.
   2
     Unless otherwise noted, we use the term "production network" to refer to the network of firm-level input-output linkages
and "supply chain" to refer to a firm's collection of direct and indirect suppliers and customers. We also use "failure" and "exit"
interchangeably.
   3
     We simplify our model by taking the matches between firms and their suppliers as given and abstracting from the
formation of firm-specific relationships. See the discussion in Subsection 5.2.


                                                                1
 11

                                                                       1

 10


                                                                       0
  9



                                                                      -1
  8




  7                                                                   -2
         1980 1985 1990 1995 2000 2005 2010 2015                             1980 1985 1990 1995 2000 2005 2010 2015

                      (a) raw data                                                     (b) HP-filtered data

                 Figure 1. Annual Firm Exit Rate in the United States over the Business Cycle

Data source: Business Dynamics Statistic, United States Census Bureau.
Notes: The figure depicts the annual exit rate of firms in the U.S. between 1978 and 2014. Exit rate in year t is defined as the
number of firm failures in year t divided by the average number of surviving firms in years t - 1 and t. Panel (a) plots the raw
data, whereas panel (b) plots the detrended series using a Hodrick-Prescott filter with smoothing parameter 6.25. Year t is
shaded if there is an NBER recession at some point between the second quarter of year t - 1 and the first quarter of year t.




same is not true for customized producers. Instead, we assume that the relationship-specific surplus
                                                                                               ` la
generated by customization is shared between suppliers and customers via a bargaining protocol a
Rubinstein (1982). These bargains determine customized firms' equilibrium prices and markups. A
full equilibrium consists of profit-maximizing input and output decisions by all firms, market-clearing
generic prices, equilibrium bargained prices for customized products, and profit-maximizing exit
decisions for customized producers.
      Negative shocks to this economy--in the form of lower productivity or higher fixed costs of
operation for some firms, sectors, or in the aggregate--alter the distribution of surplus throughout
the production network and can push customized firms into failure (because they cannot cover
their fixed costs).4 A customized firm can fail as a direct consequence of a negative shock to its
production technology. Or it can fail indirectly because either (i) some of its suppliers go out of
business, forcing it to switch to less productive generic suppliers; (ii) its customer suffers a negative
shock, fails, or simply reduces its demand, depriving the firm of the revenue necessary for covering
its fixed cost; or (iii) losses in other parts of the network forces the firm to reduce its markup and
profits. Any additional failure can reduce surviving firms' profits and lead to a new round of failures,
generating a potentially powerful amplification mechanism. Figure 2 provides a stylized example of
these propagation mechanisms.
      We analyze this economy first under the assumption that production technologies are Leontief
and then under more general production functions exhibiting complementarities between inputs.
After establishing equilibrium existence, we turn to comparative static results on how negative shocks
   4
     Although we use the language of negative shocks, our analysis is in terms of (full information) comparative statics. We
clarify how these changes can be viewed as shocks from the viewpoint of earlier decisions in Subsection 5.2.


                                                               2
                                                               k



                                                        i


                                                               j


                                 Figure 2. Propagation of Shocks in a Stylized Economy

Notes: This figure illustrates the potential consequences of negative shocks in a stylized economy. Firm i may fail as a result
of negative productivity shocks to any of the other firms in the economy. A negative shock to its customer firm j may result
in i's failure by reducing its revenue, while a negative shock to its supplier firm k may result in i's failure by increasing its
marginal cost. Firm i may also fail following a negative shock to firm that reduces the total surplus in the economy and
hence i's profits. Analogously, a negative shock to firm i may lead to the failures of firms j , k, and .


impact firm-level prices, quantities, markups, firm failures, and aggregate variables such as GDP.
Before describing these results, it is useful to clarify the two main channels via which shocks affect
economic activity in our framework. More specifically, we note that the aggregate impact of, say,
                                                                    ¯ to A can be decomposed as
a productivity shock that changes the vector of productivities from A
follows:

                                    GDP = GDP|G   ¯A + GDP|G
                                              ¯  ,A        ¯  G ,A ,                                                         (1)
            
      ¯ and G denote, respectively, the equilibrium (firm-level) production networks before and
where G
after the shock. The first term on the right-hand side of (1) represents the response of GDP to a
change in productivity holding the network fixed. This response includes any effects arising from the
propagation of the shock over input-output linkages working through changes in prices and quantities
(e.g., as in Long and Plosser (1983) and Acemoglu et al. (2012) in a competitive framework without
markups or in Jones (2013) and Baqaee and Farhi (2020b) in the presence of markups).5 Our main
focus, however, is on the second term on the right-hand side of (1). This term represents the impact
of changes in the economy's production network and hence incorporates any effects working through
firm failures.
       Our comparative static results come in two flavors. In our first set of results, we focus on the first
term on the right-hand side of equation (1) and characterize how shocks impact GDP via changes
in markups and prices when the firm-level production network is assumed to be exogenous. While
not the main focus of our analysis, these results are, to the best of our knowledge, novel, as they
characterize the impact of various shocks when markups throughout the production network adjust.
   5
    This term already includes some of the new economic forces introduced in our model. While Baqaee and Farhi (2020b)
provide a decomposition of aggregate impact of shocks with changing markups, such a decomposition, by its nature, does
not endogenize the response of markups to productivity (or other) shocks and can only be computed with sufficiently
detailed data on markups both before and after the relevant shocks are realized. In contrast, our model incorporates
markups' endogenous response to shocks.


                                                               3
We establish that an increase in the productivity of a subset of customized firms increases GDP, but at
the same time raises markups. The increase in markups in response to positive productivity shocks is
a consequence of the non-competitive nature of the economy: pairwise bargaining between suppliers
and customers transforms some of the gains from higher productivity into higher markups throughout
the economy. The effect of productivity shocks on firm profits is more complex. We show that while
the firm experiencing the productivity increase and all its downstream customers enjoy greater profits,
the profits of its upstream suppliers may decrease. This is because of a "perverse quantity effect"--the
greater productivity of the focal firm implies that it demands less inputs from its suppliers, which
may reduce supplier profits. This non-monotone impact of productivity shocks on profits undergirds
richer responses once we endogenize the equilibrium production network.
    In our second set of comparative static results, we turn to the endogenous response of the
production network to shocks.              We first show that an increase in fixed costs always results in
more failures, reduces GDP, and pushes down the profits and markups of all surviving firms. The
equilibrium response of the production network, corresponding to the second term in equation
(1), amplifies the shock's impact as initial failures translate into more widespread supply chain
disruptions. In particular, firm i's failure reduces the profits of its (direct and indirect) suppliers and
customers as well as possibly other firms in the economy.
    The implications of higher productivity in the presence of endogenous production networks are
more nuanced. While an increase in the productivity of firms with no active suppliers increases
profits and GDP and reduces failures, the same may not be true when firms experiencing the
productivity increase have customized suppliers. Because of the above-described perverse quantity
effect, productivity improvements may reduce demand for and profits of upstream firms and thus
trigger a series of failures, which may then undo the positive direct effects of the productivity increase.
In such a scenario, positive shocks may be recessionary.
    Taken together, our paper provides a tractable model of the distribution of surplus (or "quasi-
rents") in supply chains and shows how this distribution plays a central role in propagating shocks
over the production network, determines the extent and nature of firm failures, and mediates the
macroeconomic impact of shocks.6 Our analysis clarifies how supply chains generate a novel type of
fragility and why their equilibrium response amplifies economic downturns.


Related Literature:        Our paper is most closely related to the growing literature that studies the role
of input-output networks as a mechanism for propagation and amplification of shocks.7 It is useful to
separate this literature into three branches. The first branch investigates propagation through sectoral
input-output networks. The main economic effects in this body of work are mediated by changes in
   6
     The reference to "quasi-rents" is to emphasize that what matters for propagation in our model is the changes in gross
profits out of which firms have to cover their fixed costs of operation.
   7
     This literature may in turn be placed in the larger body of works studying the microeconomic origins of macroeconomic
fluctuations, such as Gabaix (2011) and Carvalho and Gabaix (2013), who emphasize the role of firm size distribution
in translating micro shocks into macro fluctuations. There is also a growing empirical literature that documents the
propagation of shocks over production networks, including Acemoglu, Akcigit, and Kerr (2016) at the industry level and
Barrot and Sauvagnat (2016), Carvalho, Nirei, Saito, and Tahbaz-Salehi (2017), and Boehm, Flaaen, and Pandalai-Nayar
(2019) at the firm level. See Carvalho and Tahbaz-Salehi (2019) for a recent survey of the theoretical and empirical literature
on production networks.



                                                              4
prices and quantities. For example, in the context of the competitive equilibrium studied in Long
and Plosser (1983) and Acemoglu et al. (2012), productivity shocks propagate due to changes in firms'
marginal costs and relative input prices.8 We depart from this literature in two significant ways. First,
our focus is explicitly on disruptions to supply chains and how destruction of valuable productive
relationships due to failures may have non-trivial aggregate implications. Second, our departure
from the "competitive framework"--and its variants with exogenously-specified wedges/markups--
implies that the nature of propagations in our model is different from the above-mentioned literature:
instead of changes in prices and quantities, shocks in our non-competitive (bargaining) framework
are propagated via changes in the distribution of firms' surplus (or quasi-rents) that force some firms
into the failure region. An important consequence of these differences is that our model generates
rich propagation patterns resulting in upstream, downstream, and horizontal propagation of failures.
       A second branch of this literature studies the endogenous formation of production networks,
either at the industry level (e.g., Carvalho and Voigtl¨
                                                       ander (2015) and Acemoglu and Azar (2020)) or
at the firm level (e.g., Oberfield (2018), Lim (2018), and Huneeus (2019)). These papers only focus on
adjustments on the intensive margin and abstract from firm failures and the macroeconomic effects
of supply chain disruptions--mechanisms that are the main focus of our study.
       Our paper is most closely related to a third (and smaller) branch of this literature that studies
how extensive margin adjustments in production networks propagate shocks in the macroeconomy.
For example, Baqaee (2018) and Baqaee and Farhi (2020a) endogenize the number of firms in each
industry via a free-entry condition in a model of industry-level production networks and exogenous
markups. Taschereau-Dumouchel (2020) studies a model of firm failures in which operating decisions
of nearby firms are strategic complements. Finally, the recent independent work by Elliott, Golub, and
Leduc (2020) studies macroeconomic fragility in a reduced-form model of failure cascades. We depart
from these studies in two significant ways. First, we develop a framework with endogenous markups
and division of relationship-specific surplus. Second, we focus on how changes in the distribution
of quasi-rents and dissolution of firm-specific relationships in supply chains shape macroeconomic
outcomes.9
       Last but not least, our paper is also related to the vast literature on firm entry and exit. On
the empirical side, papers such as Dunne, Roberts, and Samuelson (1988), Foster, Haltiwanger, and
Syverson (2008), and Tian (2018) study firm entry and exit over the business cycle. Most of the
theoretical papers in this area (such as Campbell (1998), Bilbiie, Ghironi, and Melitz (2012), Clementi
and Palazzo (2016), and Carvalho and Grassi (2019)) build on the seminal papers by Jovanovic (1982)
and Hopenhayn (1992). For the most part, these works do not consider the role of firm failures in
   8
      The same mechanism is at work in papers such as Jones (2013), Liu (2019), Baqaee and Farhi (2020b), and Bigio and
La'O (2020), who study the propagation of shocks in the presence of exogenously-specified markups/wedges that do not
adjust in response to shocks. An exception is the recent work by Kikkawa, Magerman, and Dhyne (2020), where firms charge
customer-specific markups that depend on bilateral input shares.
    9
      Also see Carvalho, Elliott, and Spray (2020), who study "bottleneck firms," whose removal from the supply chain results
in a substantial decline in aggregate productivity. A related body of works studies how the propagation of shocks over
financial networks and the resulting failures of financial institutions can generate systemic risk (e.g., Allen and Gale (2000),
Elliott, Golub, and Jackson (2014), and Acemoglu, Ozdaglar, and Tahbaz-Salehi (2015)). While this literature shares our focus
on the aggregate implications of firm failures, the nature of bankruptcies in these models is different: they are driven by
counterparty risk and are tightly linked to the specifics of inter-bank lending contracts. The implications of such failures for
GDP and macroeconomic efficiency have not been the focus of this literature either.


                                                               5
destroying valuable inter-firm relationships and disrupting supply chains. One feature highlighted by
the empirical and theoretical works in this area is that exiting firms are generally less productive (as
they are being pushed out in response to small shocks). This is not necessarily the case in our model
(nor is it always the case in recessions, as documented by Foster, Grim, and Haltiwanger (2016)),
as highly productive firms can be forced out due to shifts in the distribution of surplus across the
economy or, in the extreme, because of a collapse in their supply chains. This difference is part of the
reason why firm failures in our framework can serve as a major driver of economic downturns.


Outline:        The rest of the paper is organized as follows. We present the model in Section 2 and define
our solution concept in Section 3. Section 4 characterizes the equilibrium and presents our main
comparative static results under the assumption that all firms use Leontief production technologies.
We extend these results to a general class of production functions with complementarities across
inputs in Section 5. Section 6 concludes the paper. Appendix A presents a new fixed point theorem,
which we use for establishing the existence of equilibrium, and Appendix B contains the proofs of the
main results in the text. The remaining proofs, further results, and data sources and details for Figure
1 are provided in a series of online appendices.


2         Model

Consider an economy consisting of n + 1 industries and lasting for three periods t = 0, 1, 2. Industries
labeled {1, 2, . . . , n} produce intermediate goods, while the industry labeled 0 produces a final product
that is sold to households.
         Each intermediate industry I comprises two types of firms: (i) a competitive fringe that produces
a generic variant of industry I 's good and (ii) a finite collection of firms, each of which produces a
variant that is customized to the production technology of a specific firm. Thus, I = {ib }{ia            a
                                                                                             1 , . . . , ikI },
where ib stands for the representative firm that produces the generic variant ("generic producer" for
                                                                                                10
short) and {ia            a
             1 , . . . , ikI } denote producers of customized variants ("customized producers").   While
customized producers have to pay a fixed cost at t = 0 to be able to operate, generic producers face
no such costs. All firms in an industry use the same constant returns production technology but may
have different productivities.
         The industry labeled 0 consists of a collection of identical firms that face no fixed costs and can
transform the intermediate inputs from the generic and customized producers into a single final
product, which is then sold to the households. Throughout, we take this final good as the numeraire.
The representative household has utility function u(·) over the final good and inelastically supplies L
units of labor, which is the only factor of production.
         The timing of the model is as follows. At t = 0, each customized producer decides whether to pay
a fixed cost of operation. At t = 1, customized producers that pay this fixed cost, alongside generic
producers and the final good producers in industry 0, enter into pairwise contracts that determine
    10
   Throughout, we use uppercase letters to denote industries and lowercase letters to denote individual firms, with the
convention that firms indexed i, ia , and ib belong to industries indexed with the corresponding uppercase letter, I .




                                                          6
prices. Production and consumption take place at t = 2. In what follows, we describe each of the
model ingredients in further detail.

2.1      Generic Producers

A representative firm ib in each industry I produces the generic variant of industry I 's output using a
constant returns technology with labor and other generic goods as inputs. This technology, which we
refer to as the B -technology, is described by the cost function

                                                             pb        pb
                                             cb
                                              i = CI    w,    1
                                                                 ,..., n     ,                                         (2)
                                                             Bi1      Bin

where pb
       j is the price of the generic variety of the product of industry J (produced by representative
firm j b ), Bij denotes the input-augmenting productivity level, w denotes the wage, and the cost
function CI is homogenous of degree 1.

2.2      Customized Producers

Industry I additionally includes a finite collection of customized producers, {ia            a
                                                                                1 , . . . , ikI }, each of which
can produce a distinct variant of the good by combining labor and the output of other customized
producers and/or generic producers. In what follows, we drop the superscript a for customized
producers whenever there is no risk of confusion.
       Unlike the output of generic producers, which can be used as an input by any firm in the
economy, the variants produced by customized producers can only be used by specific firms as
intermediate inputs for production. We capture these firm-specific relationships by means of a
firm-level network of technological compatibilities, G , whose vertices correspond to the set of all
customized intermediate and final good producers in the economy, while a directed edge (j, i) is
present from vertex j to vertex i if the output of customized producer j can be used as an intermediate
input by firm i.11 G may represent pairwise relationship-specific investments made in earlier stages,
reputation, or trust between firms that enable customized relationships (see Subsection 5.2).

Assumption 1. The network of technological compatibilities, G , satisfies the following conditions:

  (i) each firm in G has at most one customer;

 (ii) each firm in G has at most one customized supplier in any given industry.

       This assumption restricts each customized firm in G to have at most one customer, but a firm
may have multiple customized suppliers as long as they belong to different industries. We discuss the
role of Assumption 1 in our analysis below, but here note that it allows for significant levels of firm-
level heterogeneity in G : customized producers in one industry may be designated suppliers of firms
in different industries or belong to supply chains with very different structures. As we show in the
following sections, this heterogeneity translates into heterogenous prices, markups, and differential
  11
    We do not include the generic producers as part of G . However, as we describe shortly, generic variants can be used as
an input by all customized, generic, and final good producers in the economy.



                                                             7
responses to shocks. Finally, while (j, i)  G means that the variant produced by j can be used as an
input by i, such a trade need not take place in equilibrium, as the customer firm i may opt for using
the generic variant j b instead, or either firm may exit.
      Customized producers operate constant returns production technologies that transform labor and
generic and customized variants to output. In particular, the technology employed by a customized
producer i  I , which we refer to as the A-technology, is described by the cost function

                                                    pa
                                                     ij   pb
                                                           j                   pb
                                                                                j
                           ca
                            i = CI w,      min          ,                  ,                  ,        (3)
                                                    Aij Bij       (j,i)G       Bij   (j,i)G


where CI coincides with the production function of generic producers in (2), w is the market wage, pa
                                                                                                    ij
is the input price of the variant produced by a customized producer j , pb
                                                                         j is the price of the generic
variant produced by (generic) producer j b , and Aij and Bij are input-augmenting productivities of
the customized and generic inputs, respectively. According to (3), a customized producer i always
has the ability to use generic variants as intermediate inputs. In addition, if there exists a customized
producer j  J such that (j, i)  G , then i can also produce using j 's customized variant instead of the
generic input from j b . We assume:

Assumption 2. Aij  Bij for all pairs (j, i)  G .

      The wedge between Aij and Bij captures the extent of input-specificity between customized firm
i and its customized supplier j .
      In order to operate its technology, each customized firm i  I has to pay a fixed cost zi  0 in units
of labor at t = 0, which is sunk before the start of the contracting stage at t = 1. Customized firms that
pay this cost can produce using the technology in (3) at t = 2, whereas firms that do not pay this fixed
cost exit or "fail". We use G  G to denote the subnetwork induced by the set of active firms. Thus,
unlike the exogenously-specified network of technological compatibilities, G , the firm-level network
G, which we refer to as the economy's production network, is determined in equilibrium. Finally, we
say that production network G is feasible if the aggregate fixed cost--measured in units of labor--for
the set of active firms in G does not exceed the aggregate supply of labor L.

2.3     Final Good Producers

Firms in industry 0 transform inputs from industries {1, . . . , n} into a final product using a constant
returns production technology. Firms in this industry are of two types as well: a competitive fringe of
generic producers and a collection of customized producers, with respective production technologies:

                                 cb        b            b
                                  0 = C0 (p1 , . . . , pn )

                                 ca             a     b              b
                                  0 = C0 ({min{p0i , pi }}(i,0)G , {pi }(i,0)G ).


As with other industries, the generic final good producer can only produce using generic inputs,
whereas the customized producers can also use the variant produced by their designated customized
suppliers. We assume that customized producers in industry 0 face no fixed cost of operation and have
no bargaining power vis-`
                        a-vis any of their customized suppliers.

                                                              8
2.4        Contracts and Terms of Trade

At t = 1, all active firms--namely, generic producers, final good producers, and customized producers
that have paid the fixed costs--can enter into pairwise contracts specifying the prices at which trades
take place at t = 2.
         Since generic producers are competitive, they price at marginal cost regardless of whether
the (representative) generic producer ib supplies to customized, generic, or final good producers.
Therefore, pb    b                            b
            i = ci , where the marginal cost ci is given by (2).
         In contrast, the unit price at which a potential supplier-customer pair (j, i)  G of customized
                                                                                ` la Rubinstein (1982).
producers trade with one another is determined at t = 1 via pairwise bargaining a
Specifically, we assume that period t = 1 consists of infinitely many sub-periods and that at any given
sub-period, the supplier firm j is selected with an exogenously-specified probability ij to make a price
offer pa
       ij to its customer i, while the customer makes an offer to the supplier with the complementary
probability of 1 - ij . If one party accepts the other's offer, the agreement pa
                                                                               ij is implemented and the
supplier commits to delivering as many units of its product as demanded by the customer at t = 2 at
the fixed unit price of pa
                         ij . If an offer is rejected, a new proposer is selected at the next sub-period to
make a new offer according to the same protocol. The two parties discount future sub-periods at a
common rate  < 1, and we take   1. After rejecting an offer, each party also has the outside option
of walking away with no agreement, in which case the two parties cannot trade at t = 2.
         A few remarks are in order. First, the recognition probability ij captures the relative bargaining
power of the customized supplier vis-`
                                     a-vis its customer, and thus ij = 1 corresponds to the extreme
case in which firm j has all the bargaining power and makes take-it-or-leave-it offers to customer i.
This observation illustrates that the collection of {ij }'s plays a central role in determining firm-level
markups, the markups' response to shocks, and hence the shocks' pass-through. Second, due to the
nature of the production technology in (3), customer i always has access to an outside option of using
the generic variant j b as an input for production. As a result, any price offer pa                b
                                                                                  ij that exceeds pij Aij /Bij
is rejected by customer i.12 In addition, the fact that both parties have the outside option of walking
away means that (i) they reach an agreement in equilibrium only if there are gains from trade; (ii) the
agreement price pa
                 ij cannot fall below j 's marginal cost; and (iii) i's marginal cost at the agreement
price pa
       ij does not exceed its output price (so that it does not make negative profits).



3         Equilibrium

In this section, we define our solution concept. Recall that customized firms pay the fixed costs of
operation at t = 0, pairwise prices are determined via a bargaining process at t = 1, and production
and consumption decisions take place at t = 2. We therefore proceed by defining and characterizing
the equilibrium recursively using backward induction.
         We first focus on the economy at t = 2, when the set of active firms, the production network G,
and all (generic and customized) prices are already determined. We use pb = (pb            b            a
                                                                              1 , . . . , pn , w ) and p =
    12
    We assume that for firm i to take this outside option, it must first reject j 's offer. This timing assumption is necessary
to guarantee uniqueness of the bargaining outcome. See Shaked (1987) and Osborne and Rubinstein (1990, p.55) for more
details.


                                                              9
(pa
  ij )(j,i)G to denote the vectors of generic and customized prices in the economy, with the convention
that pa
      ij =  if the pair (j, i)  G has not reached an agreement.

Definition 1. Given a feasible production network of active firms G and the vector of prices (pa , pb ), a
production equilibrium is a collection of input and output quantities and consumption such that

  (i) all firms minimize production costs while meeting their output obligations to their customers;

 (ii) the representative household maximizes her utility;

(iii) all markets clear.

       The notion of production equilibrium takes the set of active firms and all prices as given: at
t = 2, all (generic and customized) producers are committed to delivering as many units of output
as demanded by their customers at prices agreed upon at t = 1. Thus, the only requirement the
production equilibrium imposes is that firms minimize costs while meeting their output obligations.
Market clearing then guarantees that firms' and the representative household's quantity decisions are
mutually consistent. We now proceed to the contracting stage at t = 1 when prices are determined.

Definition 2. Given a feasible production network G, a bargaining equilibrium is a collection of prices
(pa , pb ) and quantities such that

  (i) the quantities in any ensuing subgame correspond to a production equilibrium;

 (ii) given (pa , pb ), no generic producer ib can earn higher profits by offering a different price;

(iii) for each supplier-customer pair of firms (j, i)  G, the bilaterally-agreed price pa
                                                                                        ij is (part of ) a
        Subgame Perfect Nash Equilibrium of the pairwise bargaining game between i and j , taking all
        other prices and household's income as given.

       The first condition in Definition 2 imposes that all firms minimize costs at t = 2 and all markets
clear. The other two conditions ensure that neither the generic nor the customized producers can earn
higher profits in the subsequent subgames by deviating from the prices prescribed by the equilibrium.
Condition (ii) is equivalent to generic prices being determined in the competitive equilibrium (but we
state it in the form of a "no deviation" requirement in analogy with the rest of the definition). Condition
(iii), on the other hand, requires, that each pair of customized firms plays subgame perfect strategies
in the bargaining game (and with a slight abuse of terminology, we refer to the agreed price as "part
of" SPNE). More specifically, this condition imposes that any unilateral deviation, either by making a
different offer, taking the outside option, or walking away, should not be profitable.13
       Our final definition of this section endogenizes the production network at t = 0.14
  13
     By taking the income level of the representative household as given, each firm ignores the potential impact of its
bargained price on aggregate demand working through changes in profits and household wealth. Since there is a finite
number of customized firms, this effect is in general nonzero, but to the extent that the number of firms is large, it would
be small. All our results continue to apply without any modification when firms recognize this effect, but the analysis in the
case of general production technologies in Subsection 5.1 becomes more cumbersome. Whether this effect is recognized or
not is immaterial for the definition of a full equilibrium, presented in Definition 3.
  14
     With some abuse of notation, we use G to denote both the production network and its vertex set.



                                                             10
Definition 3. A full equilibrium consists of a production network G  G and collections of prices
and quantities such that

    (i) the quantities correspond to a production equilibrium in the corresponding subgames at t = 2;

 (ii) the prices correspond to a bargaining equilibrium in the corresponding subgames at t = 1;

(iii) no customized firm has an incentive to change its exit decision at t = 0, i.e.,

                                       i (G ) - zi w  0             i  G
                                       i (G  {i}) - zi w < 0        i  G ,

       where i (G) is the profit of firm i (gross of fixed costs) when the network of active firms is G.

      The full equilibrium endogenizes the (firm-level) production network by requiring that exit
decisions at time t = 0 be profit maximizing while anticipating the equilibrium play at t = 1 and t = 2.
In particular, each firm recognizes how its decision to remain active impacts prices and quantities in
the subsequent bargaining and production stages.


4      Equilibrium Analysis

In this section, we provide a detailed equilibrium characterization and provide comparative statics for
the micro and macroeconomic impacts of various shocks. In addition, we present a decomposition
of the response of GDP into a component due to changes in prices and quantities along a given
production network and a component capturing the endogenous adjustment of the production
network.
      Throughout this section, we impose:
                                                                                               n
Assumption 3. All production technologies are Leontief, i.e., CI (w, p1 , . . . , pn ) = w +   j =1 pj .

      This assumption, which implies that firms use inputs in fixed proportions, enables us
to characterize the equilibrium in closed-form and present the model's underlying economic
mechanisms in the most transparent manner. We extend our results to a general class of production
functions in Section 5.

4.1     Production and Bargaining Equilibria

As our first result, we establish the existence and uniqueness of the production and bargaining
equilibria and characterize these equilibria in terms of model primitives and the production network
G. As already anticipated, a key object in our analysis is the collection of markups charged by
customized firms. It turns out to be more convenient to work with the customized firms' "absolute
markups", defined as the difference between their prices and marginal costs. We use µi to denote firm
i's absolute markup, which for simplicity (and with a slight abuse of terminology), we refer to as its
markup.

Theorem 1. Suppose Assumptions 1­3 are satisfied. Then,

                                                     11
(a) for any feasible production network G and collection of prices (pa , pb ), the production equilibrium
    exists and is unique;

(b) for any feasible production network G, the bargaining equilibrium exists and is unique (up to a
    scaling) and all pairs of firms (j, i)  G reach an agreement in equilibrium;

(c) for any feasible production network G, the equilibrium vector of generic prices pb = (pb            b
                                                                                           1 , . . . , pn , w )
    is the unique solution to the system of equations
                                                                  n
                                                    pb
                                                     i   =w+            pb
                                                                         j /Bij                                         (4)
                                                                 j =1

    and the vector of customized prices pa = (pa
                                               ij )(j,i)G is the unique solution to the system of equations

                                  min{ij Aij µi - (1 - ij )µj , pb                a
                                                                 j (Aij /Bij ) - pij } = 0                              (5)

    for all supplier-customer pairs (j, i)  G.

    Statements (a) and (b) of Theorem 1 establish the existence and uniqueness of production and
bargaining equilibria for arbitrary production networks (and for any distribution of bargaining powers
and productivity levels). Statement (b) additionally shows that any pair of active firms with the
opportunity to trade reach an agreement in equilibrium. This is a natural consequence of Assumption
2, which ensures that customized technologies are superior to generic technologies.15
    The last part of Theorem 1 provides a system of equations that characterizes generic and
customized prices in terms of the production network of active firms G, productivity shocks, and the
customized firms' bargaining powers. Equation (4) reiterates that generic prices pb are determined by
marginal costs and are independent of the set of active customized firms in G, their bargaining power,
and the customized productivities Aij . In contrast, customized prices, given as a solution to equation
(5), depend on the details of the bargaining process as well as generic and customized productivities.
    Equation (5) has a simple interpretation. First, it guarantees that the agreement price pa
                                                                                             ij between
a pair of active customized firms (j, i)  G can never exceed pb
                                                              j Aij /Bij , since otherwise the customer
would prefer to exercise her outside option and use the generic variant of this input. Second, it implies
that when this outside option does not bind (i.e., when pa     b
                                                         ij < pj Aij /Bij ), the firms split the gross
surplus from their relationship-specific productivity, Aij , in proportion to their bargaining powers:
                                                  µj         ij
                                                     =                   Aij ,                                          (6)
                                                  µi       1 - ij
where recall that ij captures the bargaining power of the supplier j . Therefore, all else equal, a higher
ij increases j 's share of the pairwise productivity gross surplus--by raising the price of j 's price pa
                                                                                                        ij for
firm i.16 Finally, whether the outside option in (5) binds depends on not just the pairwise productivity
Aij , but also productivities in other parts of the economy.
  15
     There may be instances of no agreement off the equilibrium path. This is because, under non-equilibrium price vectors,
productivity gains from customized production may be insufficient to make agreement worthwhile for both parties.
  16
     The reason the ratio of markups in (6) only depends on the bargaining powers and the pairwise productivity Aij (but not
the gap between the customized and generic productivities) is because of our bargaining protocol, which ensures that, in
contrast to the Nash solution to bargaining, outside options only matter when they are binding. See, for example, Osborne
and Rubinstein (1990, Section 3.12).


                                                            12
       Overall, equations (4) and (5) provide a relatively simple system of equations pinning down prices
and markups in terms of the production network and all productivities in the economy. Importantly,
they also extend Samuelson's (1951) "non-substitution theorem" to our non-competitive environment
with firm-level bargaining: equilibrium prices (pa , pb ) are independent of household preferences,
the production technology for the final good, and equilibrium quantities.17 This non-substitution
theorem, like its classical variant for competitive economies, enables us to investigate the impact of
shocks on equilibrium prices and markups without solving for quantities.

4.2      Full Equilibrium

We now turn to the economy's full equilibrium, which endogenizes the production network. Recall
from Definition 3 that, in a full equilibrium, a customized firm i chooses to remain active if and only
if its profits exceed its fixed cost of operation. This requirement can be restated as a fixed point of the
mapping:
                                       (G) = {i  G : i (G  {i})  wzi },                                              (7)
which maps a collection of active firms G  G to the set of firms that would make non-negative net
profits if they paid the fixed cost. Thus, G  G is part of a full equilibrium if and only if G = (G ).
We can therefore characterize the economy's full equilibria by determining the set of fixed points of .
Theorem 2. Suppose Assumptions 1­3 are satisfied. Then,
(a) a full equilibrium exists;

(b) the set of full equilibria has a greatest element with respect to the set inclusion order;

(c) aggregate output in the greatest full equilibrium is higher than that of all other full equilibria.
       While the full equilibrium is not necessarily unique, part (b) of the theorem shows that a greatest
full equilibrium always exists--meaning that the set of active firms in such an equilibrium is a superset
of the set of active firms in all other full equilibria. Put differently, there always exists a fixed point
G                                                                             
 max = (Gmax ) of the mapping  in (7) such that Gmax  G for all fixed points G of . In the
remainder of the paper, we focus on the economy's greatest full equilibrium, as all failures in this
equilibrium are "fundamental," in the sense that they are not driven by any type of miscoordination
(for example in exit decisions). Furthermore, part (c) of Theorem 2 shows that the greatest full
equilibrium also generates the greatest aggregate output (GDP) among all equilibria.
       Note that the economy has a greatest full equilibrium even though firms' exit decisions are not
necessarily strategic complements: the exit of an active customized firm may weaken the incentives
of some or all other customized firms to exit. The absence of strategic complementarities in exit
decisions is due to a type of aggregate demand externality that arises in general equilibrium with
exits. The exit of a firm that makes negative profits increases household wealth and hence the
demand for other goods, which in turn can weaken the incentive of the remaining firms to exit by
increasing their profits.18 This means that Theorem 2 cannot be obtained from a direct application
  17
      However, due to the presence of fixed costs, the equilibrium network of active firms G itself depends on the demand
side of the economy. We discuss this relationship in the next subsection.
   18
      Equivalently, this implies that mapping  in equation (7) is not monotone, in the sense that G1  G2  (G1 )  (G2 ).


                                                           13
of Tasrki's fixed point theorem (Topkis, 1998). Rather, we establish Theorem 2 using a new fixed
point theorem in Appendix A that only requires strategic complementarities in exit decisions among
profitable firms. This theorem may be of use in other settings with entry and exit and/or aggregate
demand externalities.19
       We conclude this discussion by a simple but important observation on the structure of the
equilibrium production network. We say a customized or final good producer i is downstream to firm
j (and j is upstream to i) in the network of technological compatibilities G if j is a direct or indirect
supplier of i in G . We also say i and j have a horizontal relationship if they share a common (direct or
indirect) downstream customer but are neither upstream or downstream to one another.20 With this
terminology, an immediate consequence of Assumption 1 is that there will be upstream propagation
of failures: a negative shock that leads to i's failure results in the failure of all of i's direct and indirect
customized suppliers. Intuitively, a customized producer's only source of revenue is payments from
its unique customer in G . As a result, the customer's failure implies that i cannot meet its fixed cost of
operation either. With the same reasoning, all firms that are upstream to i fail as well.

4.3      Comparative Statics with Exogenous Production Networks

In this subsection, we present comparative statics holding the set of active firms (and hence, the
economy's production network) fixed at some G  G . Since the bargaining equilibrium is unique,
the comparative statics in this subsection refer to changes in this unique equilibrium. We consider
comparative statics with an endogenous G in the next subsection.
       Our first result characterizes how markups, prices, and profits depend on bargaining powers.

Theorem 3. Consider a feasible production network of active firms G. For (j, i)  G, an increase in ij

(a) increases the markups of j and all firms upstream to j and decreases the markups of all other firms;

(b) increases the profits of j and all firms upstream to j and decreases the profits of all other firms;

(c) increases the prices of j and all firms upstream and downstream to j and decreases the price of all
       other firms.

       This theorem gives a first glimpse of the complex interactions between supply chains and
equilibrium prices. Intuitively, an increase in the bargaining power of a firm vis-`
                                                                                   a-vis its customer
translates into (weakly) higher prices, profits, and markups not only for that firm, but for all its direct
and indirect customized suppliers as well. This result is a consequence of how gains from trade are
shared between parties in pairwise bargaining. As we discussed in the context of equations (5) and (6),
an increase in j 's bargaining power vis-`
                                         a-vis its customer i allows j to charge a higher price, increasing
the share of the surplus that it captures. But since j 's input price is itself determined via pairwise
  19
      A second potential source of strategic substitutability in firms' exit decisions is competition for customers or suppliers.
For example, the exit of firm i can increase j 's profits if they compete for the same set of customers or suppliers. These
strategic substitutabilities are ruled out by Assumption 1, which ensures that customized firms only compete with the
competitive fringe of generic producers and enables us to apply our fixed point theorem in Appendix A.
   20
      Since G contains no cycles (Assumption 1), the sets of firms that are upstream, downstream, and horizontal to any given
firm j are mutually exclusive.



                                                               14
bargaining with its own (customized) suppliers, j 's higher surplus is partially shared with its suppliers
(via higher input prices for j ). This increases the markups and profits of j 's suppliers. A similar logic
implies that a higher ij results in weakly higher markups, profits, and prices for all firms that are
upstream to j . However, the same increase in ij reduces the equilibrium markup and profit of firm i
and hence the markups and profits of all other firms that are either horizontal or downstream to j .
    Finally, part (c) of Theorem 3 shows that downstream and horizontal prices move in opposite
directions in response to an increase in ij . This is because for the markups of all firms that are either
downstream or horizontal to j to decrease simultaneously, the former group needs to charge a higher
price while those in the latter group charge a lower price.
    Our next result provides comparative statics with respect to the production network structure. To
express this result, let GDP(G) denote aggregate output under production network G. Similarly, let
µi (G) and i (G) denote, respectively, firm i's markup and profit (gross of fixed costs) under G.
                     ¯ denote two feasible production networks such that G  G
Theorem 4. Let G and G                                                      ¯ . Then,

                ¯ ) for all i  G;
(a) µi (G)  µi (G

(b) if

                                                             ¯ ) - wzj )  0,
                                                         (j (G                                                           (8)
                                                   ¯ \G
                                                 j G

                     ¯ );
    then GDP(G)  GDP(G

                                                  ¯ ) for all i  G.
(c) if condition (8) is satisfied, then i (G)  i (G

    Statement (a) establishes that more exits lead to weakly lower markups throughout the economy.
This result is intuitive:        since customized producers are more productive than their generic
counterparts (Assumption 2), the presence of an additional customized producer increases the
surplus it can split with its customer, which is then shared with other firms via pairwise bargaining.
    The last two parts of the theorem establish that exit of profitable firms reduces aggregate output
and the profits of all remaining firms. Intuitively, with fewer customized firms, production relies more
on generic inputs and as a result, the (aggregate) production possibility frontier shifts in. The reason
we need to focus on exit of profitable firms--imposing inequality (8)--is that removing loss-making
firms would increase the income of the representative household and aggregate demand, creating
countervailing effects.21 This result will play an important role when we turn to the comparative statics
of the economy's full equilibrium, as it ensures that exit decisions reinforce the effects of changes in
productivity and/or fixed costs that decrease firm profitability.
    Our final result of this subsection establishes comparative static results with respect to productivity
shocks.

Theorem 5. Consider a feasible production network of active firms G. For (j, i)  G, an increase in Aij

(a) increases all markups in the economy;
 21
    Recall from footnote 19 that firms' exit decisions may be strategic substitutes due to this aggregate demand externality.
However, statement (c) of the theorem establishes that exit decisions of profitable firms are always strategic complements.


                                                             15
(b) increases aggregate output;

(c) increases the profits of i and j , and those of all firms that are either downstream or horizontal to j ;

(d) furthermore, if jr = 1 for all suppliers r of j , an increase in Aij decreases the profits of all firms that
      are upstream to j .

      An increase in the relationship-specific productivity of a pair of customized firms translates into
higher aggregate output, with the corresponding surplus shared with other firms in the economy
in the form of higher markups. The intuition for this result, which is a consequence of the non-
competitive nature of the economy, is familiar from our discussion of Theorem 4. More novel is the
non-monotonic impact on profits. While firms that are downstream to j increase their profits as a
result of the higher productivity, j 's suppliers may lose out because of a "perverse quantity effect":
the increase in productivity means that i's demand for j 's input declines, and though this can never
reduce j 's profitability, it can push down the profits of j 's direct and indirect suppliers. We will see in
the next subsection that this negative impact of higher productivity on supplier profits can translate
into non-monotonic effects on aggregate output when the production network is endogenous.

4.4     Comparative Statics with Endogenous Production Networks

We now turn to our main theoretical results, which characterize the macroeconomic impact of shocks
when production networks are endogenous. The next theorem characterizes the implications of
changes in fixed costs.

Theorem 6. In the greatest full equilibrium, an increase in fixed costs of operation

(a) shrinks the set of active firms;

(b) lowers aggregate output;

(c) reduces markups and profits of all surviving firms.

      A higher fixed cost of operation for a firm, say firm i, makes it more likely to fail. More interestingly,
it makes all other firms in the economy more likely to exit as well. This is because of both partial
and general equilibrium effects. The partial equilibrium effect, which is the central mechanism of
our model, is due to the propagation of the shock over the production network: firm i's exit makes its
(direct and indirect) customers and suppliers and firms that are horizontal to it less profitable, and
hence more likely to exit. In addition, as previously profitable firms fail, household wealth and thus
demand for all products is reduced. This aggregate demand externality further amplifies the impact
of the initial negative shock and may contribute to additional failures.
      Changes in productivity have more complex implications than changes in fixed costs because of
the perverse quantity effect we saw in Theorem 5. To abstract from this effect, we first focus on a
network in which the customized firm experiencing higher productivity has no active suppliers.

Theorem 7. Let G denote the economy's greatest full equilibrium and let (j, i)  G be a supplier-
customer pair of active firms. If j does not have any active suppliers in G , then an increase in Aij

                                                       16
(a) expands the set of active firms;

(b) increases all active firms' profits;

(c) increases aggregate output.

   This theorem shows that when a customized firm with no active suppliers enjoys a higher
productivity, profits of all firms increase, exit of other firms becomes less likely, and aggregate output
increases. Intuitively, we know from Theorem 5 that an increase in productivity of a customized firm,
say j , raises the profits of all firms except those that are upstream to it. When firm j has no suppliers,
all firms in the economy benefit from its higher productivity. Then the partial and general equilibrium
effects discussed above both contribute to raising the profits of all other firms, making their exit less
likely and increasing aggregate output. However, when firm j has suppliers, the perverse quantity
effect from part (d) of Theorem 5 reemerges and these results may no longer hold. This is illustrated
in the next example and analyzed more systematically in our final theorem in this subsection.

Example 1. Consider an economy consisting of five customized firms in five separate industries,
labeled {1, 2, 3, 4, 5}, and a single firm producing the consumption good.             Figure 3 depicts the
underlying network of technological compatibilities, G . For simplicity, we assume that the supplier
firm has all the bargaining power in all pairwise relationships, firm 4 is the only firm with a non-zero
fixed cost (i.e., zi = 0 for all i = 4), and firms 2 and 5 are the only firms that use labor as an input.
Furthermore, we assume that productivities (B12 , B13 , B34 , B45 ) and (A12 , A13 , A34 , A45 ) are such that
G = G , that is, all firms are active in the economy's greatest equilibrium.
   In such an economy, the aggregate output and the profit of firm 4, gross of fixed costs, are given by
                                                                     -1
                                  GDP = A- 1   -1 -1 -1
                                         12 + A13 A34 A45                 (L - z4 )                        (9)
                                                -1
                                       4 = w   B34   -   A-
                                                          34
                                                            1
                                                                GDP /(A13 B45 ),

where L denotes the aggregate supply of labor.
   A few observations are immediate. First, as shown in Theorem 5, when the production network is
held fixed, aggregate output is increasing in all customized productivities. Second, 4 is decreasing in
A13 , as predicted by Theorem 5(d): the aforementioned perverse quantity effect implies that higher
downstream productivity decreases firm 4's profits because of the reduction in demand from firm 3.
Nonetheless, as long as the economy's production network is held fixed, a higher A13 raises aggregate
output.
   Next, consider the case in which we allow the equilibrium production network to respond to an
                                     ¯13 . Since firm 4's profit is decreasing in A13 , this increase in
increase in productivity from A13 to A
productivity may result in 4's failure, which in turn makes firm 5 unable to produce as well. As a
consequence, aggregate output after the productivity increase is given by

                                       ¯13 ) = A-1 + A
                                                     ¯-1 B -1 B -1           -1
                                   GDP(A        12     13 34 45                   L.                     (10)

Comparing equations (9) and (10) shows that, for small enough values of z4 , and as long as
¯13 B34 B45 < A13 A34 A45 , the increase in productivity reduces aggregate output.
A

                                                         17
                                                                      5


                                                         4


                                               2                      3

                                                         1



                                                         0


Figure 3. An economy consisting of five customized producers in five different industries and one final good
producer. The figure depicts the firm-level network G of technological compatibilities. For simplicity, the figure
does not include generic producers.


               ¯  denote the greatest full equilibrium under productivity A
Theorem 8. Let G                                                          ¯ij for supplier-customer
pair of firms (j, i) and suppose there is a supplier-customer sequence of firms (k0 , k1 , . . . , ks , j ) upstream
to j that only use a single input, with k1  G     ¯  and k k = 1. Then, for any A < A                 ¯ij such that
                                                                2 1                       ij
   ¯  , A )  wzk for all k  G
k (G                                                                ¯   {k1 }, A
                            ¯  , there exists  < 1, such that if k (G          ¯ij ) > wzk , then
         ij                                                       1                       1



    ¯
(a) G      G , where G is the full equilibrium under Aij .

                             ~k k and z
(b) Furthermore, there exist A                                 ~k k and zk < z
                                      ~k such that if Ak1 k0 > A                            ¯ , A
                                                                             ~k0 , then GDP(G   ¯ij ) <
                               1 0                               1 0      0

    GDP(G , Aij ).

   The intuition for why productivity improvements may be recessionary comes from part (d) of
Theorem 5 and Example 1: higher productivity of firm j reduces the profitability of its suppliers via the
perverse quantity effect. In Theorem 5, this non-monotonic effect did not reverse the initial positive
impact of the initial productivity increase on aggregate output. In contrast, Theorem 8 establishes
that, because of the endogenous response of the production network, a higher Aij may push j 's
suppliers into failure, resulting in a supply chain disruption. This partial equilibrium propagation
is further magnified with the general equilibrium effects working through reduced household wealth
and aggregate demand for other products.
   To be sure, we do not view the situation identified in Theorem 8 to be a major source of downturns
in practice.    Nevertheless, together with Theorem 7, this result illustrates how the propagation
of (potentially small) shocks over an endogenous production network can lead to rich economic
dynamics. The former result explains how a negative shock can be amplified due to extensive
margin adjustments, whereas the latter illustrates how a positive shock can be recessionary under
some circumstances--in particular, when it leads to the failure of sufficiently productive upstream
suppliers. We next turn to a more systematic decomposition of the effects of shocks on aggregate
output between exogenous and endogenous supply chain components.




                                                        18
4.5      Aggregate Implications

We end this section with a formal decomposition of the aggregate impact of shocks into two
components--one that holds the production network fixed and one that traces the consequence of
the endogenous response of the production network. For brevity, we present this decomposition for
a change in fixed costs of operation and provide the analogous result for changes in productivities in
Appendix D.

               ¯i  z i for all i. The change in aggregate output in the economy's greatest full
Theorem 9. Let z
equilibrium in response to the decrease in fixed costs from z
                                                            ¯ to z is

                                   GDP = GDP                       + GDP                  ,                       (11)
                                                        ¯  fixed
                                                        G                       z fixed
            
      ¯ and G are the production networks in the greatest full equilibria under z
where G                                                                         ¯ and z and
                                                            
                                                   ¯ , z ) - GDP(G
                                                                 ¯ ,z            
                                GDP|G
                                    ¯  fixed = GDP(G                ¯)  0
                                                                                 
                                 GDP|z fixed = GDP(G , z ) - GDP(G
                                                                 ¯ , z )  0.

       This theorem establishes that the direct impact of the shock (the first term on the right-hand side
of (11)) is amplified by the endogenous adjustment of the production network due to firm failures (the
second term in (11), which has the same sign as the first term).22
       The next example shows that long supply chains can be a source of fragility and illustrates how
this fragility can render the indirect effects working via the response of the equilibrium production
network much larger than a shock's direct impact.

Example 2. Consider an economy consisting of n customized firms indexed {1, . . . , n} in n separate
industries and a single final good producer 0, with the network of technological compatibilities G
depicted in Figure 4. All firms use a single input for production. For simplicity, we assume that all
pairwise relationships are identical in terms of productivities and bargaining power, i.e., Ai,i+1 = A,
Bi,i+1 = B , and i,i+1 =  for all i, where A > B  1 and  > 1/2. This latter assumption means that,
in any pairwise relationship, the supplier has a greater bargaining power than the customer. Finally,
suppose that firm 1 is the only customized firm with a non-zero fixed cost (i.e., zi = 0 for all i = 1).
This means that, in any equilibrium, either all n customized firms operate or they all fail.
       Let z
           ~1 denote the threshold on firm 1's fixed cost above which the firm fails. Since 1's failure results
in the failure of all other customized producers, aggregate output in this economy is given by
                                                 An-1 (L - z1 )          if z1  z
                                                                                ~1
                                     GDP =                                                                        (12)
                                                 B n-1 L                 if z1 > z
                                                                                 ~1 .
Moreover, as long as outside options in pairwise bargains do not bind, the failure threshold on firm 1's
fixed cost can be characterized as
                                                                     n        -1
                                                                 
                                            1-                  1-       -1
                                     z
                                     ~1 =         1+                                L.                            (13)
                                            2 - 1    (A/B )n-1 - 1
  22
   Because we are considering arbitrary (rather than infinitesimal) shocks, the order of the decomposition in Theorem 9
matters. The one we choose looks at the adjustment of GDP that would have happened holding the production network
constant at its value in the larger network and then considers the additional impact of having fewer active firms.


                                                           19
                                                     n




                                                     1



                                                     0


                                         Figure 4. Production Chain


      Equations (12) and (13) have two important implications. On the one hand, equation (12) implies
that, when z1  z
               ~1 , aggregate output is increasing in the number of firms, n, in the production
chain. This is because a longer chain shifts out the production possibility frontier. On the other hand,
equation (13) illustrates that, if (1 -  )A < B , the threshold z
                                                                ~1 decreases in n, making it more likely for
all firms to fail in a longer the chain. In other words, despite the increase in the economy's productive
capacity, a longer production chain is more fragile in response to shocks. This disparity is driven by
the non-competitive nature of how surplus from this increased productivity is shared between various
firms: the greater surplus from the longer chain is shared among more firms, leading to a smaller
surplus for firm 1.
      We can also use equations (12) and (13) to obtain a decomposition of the direct and indirect impact
of a shock on aggregate output similar to Theorem 9. For example, consider an increase in firm 1's fixed
                ~1 - /An-1 to z
cost from z 1 = z                  ~1 + /An-1 for some small  > 0. Then, holding the production
                              ¯1 = z
network of the economy fixed, the shock has a direct impact on GDP of -2. However, this shock also
pushes firm 1, and hence the rest of the customized firms, into the failure region. From equation (12),
the indirect effect of the shock due to firm failures thus reduces aggregate output by An-1 (L - z
                                                                                                 ~) -
B n-1 L - . This latter effect can be arbitrarily large relative to the direct effect when the supply chain
is long (n large) or when the shock that triggers the cascades of failures is small ( small).


5      Extensions

In this section, we discuss two extensions. First, we relax the assumption of Leontief production
technologies and show that our results in Section 4 extend to a broad class of economies where inputs
are gross complements. Second, we briefly discuss how the framework can be extended to incorporate
entry and matching decisions.

5.1     General Production Technologies

We start by defining a few important concepts. We say that industry J 's input is essential for the
production technology of industry I if (i) the marginal cost CI is strictly positive whenever the price of


                                                    20
input J is strictly positive and (ii) CI is strictly increasing in input J 's price whenever all input prices
are non-zero. Similarly, we say J is an indirect essential input for the production technology of I , if
there exits a sequence of industries starting with J and terminating at I such that each input in the
sequence is essential for the production technology of the next. We can use parallel notions to define
labor as a direct or indirect essential input.
           kj
       Let i  denote the Morishima elasticity of substitution between distinct pair of inputs (including
labor) k and j in the production technology of any given firm i.23 We replace Assumption 3 with the
following restriction on firms' production technologies.

Assumption 3 . The collection of cost functions (C1 , . . . , Cn ) satisfy the following:

  (i) labor is a direct or indirect essential input for the technology of all industries;
      kj
 (ii) i   1 for all firms i and all pairs of inputs k = j ;

(iii) for all pairs of inputs k = j ,
                                                         kj
                                                      di             kj 2
                                                               -(1 - i ) .                                                (14)
                                                    d log pij

       The first condition imposed by Assumption 3 rules out scenarios in which labor is an inessential
input for production of any given industry, thus ensuring that aggregate output is always finite. The
second condition significantly relaxes Assumption 3 by simply requiring that inputs from different
industries are gross complements in all production functions.24 Finally, the third condition imposes
a bound on how quickly these elasticities change in response to changes in input prices. Any CES
production technology, for which these elasticities remain constant, trivially satisfies inequality (14).
       The next theorem establishes the existence and uniqueness of production equilibria as well as
existence of bargaining equilibria under Assumption 3 .

Theorem 10. Suppose Assumptions 1, 2, and 3 are satisfied. For any feasible network of active firms G,

(a) a production equilibrium always exists and is unique;

(b) a bargaining equilibrium (pa , pb ) always exists. Furthermore, in any bargaining equilibrium, all
       pairs of firms (j, i)  G reach an agreement;

(c) the vector of generic prices pb = (pb            b
                                        1 , . . . , pn , w ) is unique (up to a scaling) and is the solution to the
       system of equations

                                              pb           b                 b
                                               i = CI (w, p1 /Bi1 , . . . , pn /Bin );                                    (15)

(d) the vector of customized prices pa = (pa
                                           ij )(j,i)G is the solution to the system of equations

                                                  pa        ^ij , pb
                                                   ij = min{p      j Aij /Bij },                                          (16)
                                                                                   kj
  23
     The Morishima elasticity of substitution between inputs k and j is defined as i  = kj    jj        kj
                                                                                          i - i , where i is firm i's constant-
output elasticity of demand for input k with respect to changes in the price of input j .
  24
     However, recall that (3) implies that the generic and customized variants produced by any given industry are always
perfect substitutes.


                                                              21
      where p
            ^ij is the unique solution to equation

                                                             j               i
                                         fij (^
                                              pij ) = ij i    a  + (1 - ij )j a = 0                                         (17)
                                                             pij             pij

      where i and j denote the profits of firms i and j gross of fixed operating costs.

      This theorem is a direct generalization of Theorem 1, with the only significant difference being
in the way markups and prices are determined: generic and customized prices are now given by the
system of equations (15)­(17). This disparity is a consequence of the fact that the nature of input
complementarities alters the strategic interactions in pairwise bargaining games. To see the intuition
for equation (17), recall that in their pairwise bargaining game, supplier j and customer i can make
offers with probabilities ij and 1 - ij , respectively. As a result, when the outside options do not bind
(and taking all other prices as given), a pair of prices pij and pij corresponds to a SPNE of the pairwise
bargaining game if and if they satisfy the following indifference conditions for j and i,

                                        j (pij ) = ij j (pij ) +  (1 - ij )j (pij )
                                        i (pij ) = ij i (pij ) +  (1 - ij )i (pij ),

respectively, where  is the firms' common discount factor.25 This system of equations reduces to
(17) as   1 and the equilibrium offers satisfy lim1 pij = lim1 pij = p
                                                                     ^ij , where p
                                                                                 ^ij is the unique
solution to equation (17). This observation further illustrates that the non-linearity in equation (17) is
because the pairwise bargaining game between the two firms is a game of non-transferable utility: the
two parties bargain over fixed-price contracts, even though their pairwise surplus and their payoffs
are non-linear in the agreed price.26 In the special case where the customer's production function is
Leontief, equation (17) reduces to equation (5) in Theorem 1.
      We next show that all of our comparative static results from Theorems 2­8 generalize to economies
with complementarities between inputs provided that Assumption 3 is satisfied. For tractability, we
also restrict attention to the special case in which ij = 1 for all (j, i)  G--that is, all bargaining
power is vested in suppliers. The economics of these comparative statics is identical to those in the
economy with Leontief technologies, though the quantitative effects differ depending on the degree
of complementarity between various inputs.

Theorem 11. Suppose Assumptions 1, 2, and 3 hold. Furthermore, suppose that ij = 1 for all (j, i)  G .
Then, Theorems 2 and 4­8 apply.

5.2     Entry and Matching

Our analysis thus far focused on the implications of negative shocks--modeled via comparative
statics--on exits and aggregate output, taking network of technological compatibilities G between
  25
     Note that we do not restrict the firms' strategies to be stationary, as each firm's offers and reactions to offers may depend
on the entire history of actions. Nonetheless, as in Rubinstein (1982), the unique SPNE of the pairwise bargaining game turns
out to be stationary.
  26
     This non-linearity may also lead to a non-convex payoff set in the bargaining game, which may then result in multiple
SPNEs. However, even when the set of payoffs is non-convex, the curvature restrictions imposed in part (iii) of Assumption
3 guarantee that the game between i and j has a unique SPNE and is given by the unique solution to equation (17).


                                                               22
various customized firms as given. This raises two related questions: (i) where does G comes from and
how does it adjust in the face of shocks? And (ii) in what sense can increases in fixed costs or reductions
in productivity be viewed as "negative shocks" that hit the economy at business cycle frequencies?
   While a systematic analysis of these questions is beyond the scope of this paper, in this subsection
we provide a brief outline of how the model can be generalized to speak to these issues.
   Consider an extension of the model with two more time periods, t  {-2, -1}. At t = -2, a large
set of potential entrants decide to enter as customized producers into any one of the sectors of the
economy by paying a fixed cost of J for sector J (there is no costly entry stage for generic producers,
since they always make zero profits in equilibrium). Upon entry at t = -1, customized producer
j in industry J decides whether to pay another fixed cost, denoted by j , to match randomly with
potential suppliers and customers. This is meant to capture the costs involved in developing trust,
reputation, and the requisite knowledge for long-term customized relationships. The outcome of this
random matching process is the network of technological compatibilities G . When making their entry
and matching decisions at t = -2 and t = -1, respectively, firms face incomplete information about
the outcome of the matching process, productivities, and fixed costs of operation zj , all of which are
revealed at t = 0. Free entry thus requires that, for each industry J , the entry of one more firm would
lead to
                                            ¯  ) - wzj , 0} - j , 0 ] - J < 0,
                        E-2 [max E-1 max{j (G

while this expression is nonnegative for the firms that enter in equilibrium. The inner max operator
captures the fact that after the matching pattern, productivities, and fixed costs of operation are
revealed at t = 0, the firm would exit if it is more profitable to do so, in which case it has a zero
continuation profit (though it has already incurred the entry and matching fixed costs). The outer
max operator recognizes that after entry at t = -2, firms can still decide not to pay the fixed cost of
matching. Finally, the expectation operator Et incorporates the information available to firms at time
t about the outcome of the matching process, productivities, and fixed costs of operation. In general,
E-1 may be different from E-2 , allowing for additional information to be revealed to firms between
the entry and matching stages.
   This formalization is useful for clarifying a few points. First, recall that our comparative statics are
carried out under complete information at time t = 0, but they can be thought of as being due to
"realizations of negative shocks" from the viewpoint of t = -2 or -1. Second, firm exit at time t = 0
is qualitatively different from firm entry, which occurs at earlier points on the basis of expectations of
productivities, fixed costs, and matching patterns.
   Third, this formalism enables us to discuss different types of shocks and responses thereto. The
first type of shock is the one we have discussed so far, taking place at t = 0. These should be thought
of as shocks that happen after medium-term entry and customization/matching decisions have been
made. At this point, there is no further adjustment in the economy's production network except for
the exit decisions. In contrast, there can be other margins of adjustments in response to a time t = -1
negative shock, which may reveal that some firms will end up with a higher fixed costs than expected,
some suppliers have low productivity, or certain matches may not form. For example, if the fixed costs
of operation for a set of firms in an industry turn out to be high, so that they will not take part in

                                                    23
matching or drop out with a high likelihood after matching, then other firms may make up this slack
by paying the cost for matching and forming new relationships. Conversely, new information that
arrives at this point may discourage the formation of customized relationships. This highlights that
negative shocks at t = -1 may generate dampening or amplifying responses through the matching
process. Finally, shocks that arrive at time t = -2 may increase or reduce entry. We think of these last
two types of responses as taking place in the medium run (say, within horizon of a few years), while
what we focused on in the rest of the paper corresponds to shorter-run responses (say, a horizon of
a few quarters). The full analysis of comparative statics in this extended model is an area for future
research.


6    Conclusions

Most modern economies rely on complex supply chains, where multiple layers of suppliers enter
into specific, customized relationships with one other. This type of customization often enables
greater efficiency in production, but may also create fragilities as relatively small shocks can result
in significant supply chain disruptions.
    A key contribution of our paper is to develop a novel and tractable (non-competitive) model
of the distribution of relationship-specific surplus over supply chains. Our paper studies how this
distribution is shaped by the structure of the production network and differences in productivities,
and how it regulates and amplifies the response of the macroeconomy to recessionary shocks.
    Our analysis shows that changes in productivity alter the distribution of surplus throughout the
production network and determine which firms are at the margin of failure. Via a number of general
comparative statics theorems, we demonstrate that a negative shock propagates in the production
network as a firm's failure reduces the profits of its suppliers, customers, and possibly other firms
in the economy, bringing them to the brink of failure as well. At the root of these results is a new
fixed point theorem, which enables us to show that, although our economy does not feature strategic
complementarities, exit of a previously profitable firm tends to cascade into additional exits.
    Lack of general strategic complementarities can also be seen from the fact that even positive
shocks may be recessionary. This is because of the non-monotonic impact of productivity increases,
which may reduce demand for upstream firms and force their exit. These exits, and the costs
associated with the disruption of productive supply chains, can outweigh the direct positive impact of
the initial shock.
    Our general comparative statics are established under some key simplifying assumptions,
however. Most importantly, we assume that each customized firm can source each input from a
single customized supplier (though may have multiple suppliers if it uses multiple inputs) and each
customized firm can only have a single customized customer. We also abstract from relationship-
specific investments that increase the efficiency of customized relationships, the formation of
supplier-customer matches, and the substitution of new suppliers for those that fail. These constitute
important and challenging areas for future theoretical analysis.
    An even more important direction for future research would be a systematic analysis of the
empirics of supply chains in economic fluctuations. A first step would be a detailed quantitative

                                                  24
evaluation of the amplification generated by supply chain disruptions. While recent work, including
Jacobson and von Schedvin (2015) and Carvalho et al. (2017), documents the propagation of shocks
over firm-level supply chains, there is still much that we do not know about the role of supply chains
in the macroeconomy. These include: how prices and quantities in supply chains vary over the
business cycle, how supply chains become disrupted and repaired following negative shocks, and
where the most major systemic supply chain fragilities lie. Such analyses could be relevant for policy
as well, since, as the recent global economic crisis triggered by the COVID-19 pandemic illustrates, the
collapse of national and global supply chains can be a critical threat to the economy.


Appendix

A    A Set-Valued Fixed Point Theorem

This appendix states and proves a new fixed point theorem for set-valued mappings. We apply this
result in the subsequent proofs to establish the existence of the economy's full equilibrium, show
that the set of full equilibria has a greatest element, and obtain comparative static results when the
economy's production network is endogenous. This fixed point theorem may be of more general use
in economies with entry and exit and/or aggregate demand externalities.
    Let S denote a finite set and  : 2S  2S denote a mapping from the subsets of S to itself.

Assumption A.1 (weak monotonicity). For any S1 , S2  S , if S1  (S2 ), then S1  (S1  S2 ).

Assumption A.2 (weak superadditivity). If S1  (S1 ) and S2  (S2 ), then S1  S2  (S1  S2 ).

    It is easy to verify that Assumptions A.1 and A.2 are weaker than monotonicity with respect to the
set inclusion order, which requires that (S1 )  (S2 ) whenever S1  S2 . We have the following result:

Theorem A.1. Suppose mapping  : 2S  2S satisfies Assumptions A.1 and A.2. Then,

(a)  has a fixed point, i.e., there exists S   S such that S  = (S  );

                                                    ¯ such that S
(b)  has a greatest fixed point, i.e., there exists S           ¯ = (S
                                                                     ¯ ) and S
                                                                             ¯  S  for all S  = (S  );

                                             ¯ =
(c) the greatest fixed point of  is given by S     S X S ,   where X = {S  S : S  (S )}.

    Statements (a) and (b) of Theorem A.1 extend Tarski's fixed point theorem (which only applies
to monotone mappings over a complete lattice) to non-monotone maps that satisfy the weaker
requirements of Assumptions A.1 and A.2. Statement (c) then provides a characterization of 's
greatest fixed point in terms of set X = {S  S : S  (S )}, which will prove useful in our subsequent
results. In particular, it leads to the following corollary, which generalizes Theorem 3 of Milgrom and
Roberts (1994):

Corollary A.1. Suppose 1 , 2 : 2S  2S satisfy Assumptions A.1 and A.2. If 1 (S )  2 (S ) for all S  S ,
     ¯  S
then S    ¯ , where S
                    ¯ and S¯ are the greatest fixed points of 1 and 2 , respectively.
      1     2         1       2




                                                   25
Proof of Theorem A.1

Proof of part (a)         Consider the sequence of sets Sk+1 = (Sk ) with the initial condition S0 = . If
Sk  Sk+1 for all k , then it is immediate that S = limk (k) (S0 ) = k0 Sk exists and is a fixed point
of . It is therefore sufficient to show that Sk  Sk+1 for all k . We prove this claim by induction. The
base of the induction holds trivially as S0 = . As the induction hypothesis, suppose that Sk-1  Sk =
(Sk-1 ). Given that Sk  (Sk-1 ), Assumption A.1 implies that Sk  (Sk  Sk-1 ). But note that, by
the induction hypothesis, Sk  Sk-1 = Sk , thus implying that Sk  (Sk ) = Sk+1 .


Proof of part (b)         Define X = {S  S : S  (S )}. The fact that   X implies that X is non-empty.
We can therefore define S0 =          S X   S and consider the sequence Sk = (Sk-1 ). We claim that

                                                     Sk-1  Sk                                             (A.1)

                                                               ¯ defined as S
for all k  1. If this claim is true, then it is immediate that S              ¯ = limk (k) (S0 ) =
                                                     ¯  S0 , where recall that S0 =
      Sk exists, is a fixed point of , and satisfies S                                S . But note
 k0                                                                                                S X
that X contains all fixed points of . As a result, any fixed point    =    S       (S  )         ¯ .
                                                                                           satisfies S 
                                                                                             S0  S
              ¯ is the greatest fixed point of , containing all other fixed points as subsets.
Consequently, S
    The proof is therefore complete once we establish (A.1) for all k  1. We do so by induction. Since
set X is finite, Assumption A.2 guarantees that

                                      S0 =         S          S   = (S0 ) = S1 ,
                                             S X        S X

thus establishing the base of the induction. Now, as the induction hypothesis, suppose Sk-1  Sk . On
the other hand, since Sk  (Sk-1 ), Assumption A.1 implies that Sk  (Sk  Sk-1 ). Hence, by the
induction hypothesis, Sk  (Sk ) = Sk+1 . This establishes (A.1) and completes the proof.


Proof of part (c)                                                                                  ¯ =
                   Recall from the proof of part (b) that the greatest fixed point of  is given by S
                                                                                        ¯
  k0 Sk , where Sk = (Sk-1 ) and S0 =      S X S . This immediately implies that S0  S . At the same
            ¯ is a fixed point, it also must be the case that S
time, since S                                                 ¯  X , and hence, S   ¯  S0 . Therefore,
¯ = S0 =
S                    S.
               S X


Proof of Corollary A.1

Let X1 = {S  S : S  1 (S )} and X2 = {S  S : S  2 (S )}. The assumption that 1 (S )  2 (S ) for
all S  S implies that X1  X2 . By part (c) of Theorem A.1, the greatest fixed points of 1 and 2 are
         ¯ =
given by S               ¯ =
                   S and S                                       ¯  S
                                    S , respectively. Therefore, S   ¯ .
           1         S X1         2     S X2                                1      2



B    Proofs

This appendix provides the proofs of the main results stated in the text. We start with a straightforward
proposition, which shows that, regardless of the structure of the underlying network of technological
compatibilities G , any full equilibrium network G consists of a collection of trees terminating at a root

                                                         26
vertex in the final good industry. In the remainder of the proofs, we rely on this result and restrict our
attention to such simple structures. Note that we provide the proof of Theorem 2 after that of Theorem
4, since the former relies on a result established in the proof of the latter theorem.

Proof of Theorem 1

Proof of part (a)     Since Assumption 3 implies Assumption 3 , this statement follows from Theorem
10(a).


Proof of part (c)     Equation (4) follows from marginal cost pricing. More specifically, since generic
producers are competitive, it must be the case that pb    b                            b
                                                     i = ci for all generic producers i . On the other
                                                                                                            n
hand, Assumption 3 implies that the marginal cost of generic producer ib is cb
                                                                             i = w +
                                                                                                                  b
                                                                                                            j =1 pj /Bij .
Putting the two together establishes (4).
    Next, we show that customized prices in any bargaining equilibrium satisfy the system of equation
(5). By Theorem 10(c), the vector of customized prices satisfies (16) and (17). Rewriting the function
fij (pij ) in equation (17), we have

                                                       (µj yj )                   (µi yi )
                              fij (pij ) = ij µi yi             + (1 - ij )µj yj           = 0,
                                                       pij                        pij

where we are using the fact that i = µi yi , in which µi and yi denote the markup and output of firm i.
Since i's production function is Leontief (Assumption 3), yj = yi /Aij . As a result,
                                                      2                     2
                                  fij (pij ) = ij µi yi /Aij - (1 - ij )µj yi /A2
                                                                                ij = 0,

where we are using the fact µj /pij = 1 and µi /pij = -1/Aij . This implies that, as long as the
outside option does not bind, ij µi Aij = (1 - ij )µj . However, the agreement price between i and j
cannot exceed i's outside option of using the generic input j b , i.e., pa    b
                                                                         ij  pj Aij /Bij . Hence, pairwise
customized prices in any bargaining equilibrium satisfy (5) for all (j, i)  G.


Proof of part (b)     The existence of the bargaining equilibrium is a special case of Theorem 10(b). The
statement that all pairs (j, i)  G reach an agreement in any bargaining equilibrium also follows from
Theorem 10(b). Furthermore, statement (c) of Theorem 10 establishes that the vector of generic prices
pb is unique (up to a scaling). Therefore, to establish the uniqueness of the bargaining equilibrium,
it is sufficient to prove that there exists a unique vector of customized prices pa that solves system of
equations (5).
    We start by defining a few objects. Let  denote a diagonal matrix indexed by the set of active
customized firms in G, with the corresponding diagonal entries given by the ij .27 Let A and A denote
square matrices with rows and columns indexed by the set of active customized firms, with the (i, j )
elements given by Aij and 1/Aij , respectively, if (j, i)  G and 0 otherwise. Finally, we define the
square matrix S with zero diagonal as Sjk = 1{(0,j )G} 1{(0,k)G} , that is, Sjk = 1 if j and k have a
common customer in the final good industry.
  27
     Recall that, by Assumption 1, each firm j faces a single customer. As a result, there is a one-to-one correspondence
between the set of customized firms in G and the directed edges.


                                                               27
   Having defined the above objects, now consider a pair of supplier-customer firms (j, i)  G. By
equation (5), the agreement price, pa
                                    ij , between this pair of firms in any bargaining equilibrium satisfies

                                                                  ¯ij - pa
                                    min{ij Aij µi - (1 - ij )µj , p      ij } = 0,

      ¯ij = pb
where p      j Aij /Bij and µi and µj are the markups of i and j , respectively. Let k denote i's customer
in G. We have, min{ij Aij (pa                      a          ¯ij - pa
                            ki - ci ) - (1 - ij )(pij - cj ), p      ij } = 0, in which ci and cj denote marginal
costs of i and j , respectively. Consequently,

                            pa            a            a
                             ij = min ij pij + ij Aij pki + (1 - ij )cj - ij ci Aij , p
                                                                                      ¯ij ,

for all (j, i)  G. Hence, pa = (pa
                                 ij )(j,i)G is a vector of customized prices in a bargaining equilibrium if
and only if it satisfies

                                                pa = min{(pa ), p
                                                                ¯ },                                       (B.1)

where

                           (pa ) = pa + A pa + (I - )Apa - (A A + S)pa + e,                                (B.2)

e is some vector that is independent of pa , and we are using the fact that ci = (A pa )i + w. Therefore,
to establish that the bargaining equilibrium is unique, it is sufficient to prove that equation (B.1) has
a unique solution pa . We establish this claim using a series of lemmas stated and proved below.

Lemma B.1. Equation (B.1) has a unique solution pa if and only if the complementarity problem

                      qij  0        ,      ~ij (q )  0
                                                         ,        qij ~ij (q ) = 0    (j, i)  G            (B.3)

has a unique solution q , where ~(q ) = q - p    p - q ).
                                            ¯ + (¯

Proof. We prove this result by establishing a one-to-one correspondence between the solutions of
                                      ¯ - pa = max{p
(B.1) and (B.3). Note that, by (B.1), p            ¯ - (pa ), 0}. Let q = p
                                                                          ¯ - pa . This implies that
q = max{p    p - q ), 0}. Hence, pa is a fixed point of (B.1) if and only if
        ¯ - (¯

                                               q = max{q - ~(q ), 0}.                                      (B.4)

Therefore, it is sufficient to show that q satisfies (B.4) if and only if it is a solution to the
complementarity problem (B.3).
   First, suppose q solves (B.4). It is trivial that q  0. Furthermore, the fact that q  q - ~(q ) implies
that ~(q )  0. Finally, note that if qij > 0 for some (j, i)  G, then (B.4) implies that qij = qij - ~ij (q ),
which guarantees that qij ~ij (q ) = 0. Therefore, q is a solution to (B.3).
   To prove the converse implication, suppose q is a solution to (B.3). If qij = 0 for some (j, i)  G,
then it is immediate that qij = max{qij - ~ij (q ), 0}, where we are using the fact that any solution to
(B.3) satisfies ~ij (q )  0. On the other hand, if qij > 0, then (B.3) implies that ~ij (q ) = 0, hence once
again guaranteeing that qij = max{qij - ~ij (q ), 0}. Thus, q is also a solution to (B.4).

   Lemma B.1 implies that the bargaining equilibrium is unique if there is a unique q that satisfies
(B.3). Our next lemma provides a sufficient condition for (B.3) to have a unique solution.

                                                             28
Lemma B.2. Complementarity problem (B.3) has a unique solution q if

                                          = (I - )(I - A ) - A + (A A + S),                                          (B.5)

is a P-matrix.28

Proof. Recall that mapping (pa ) is given by (B.2). Therefore, the mapping ~(q ) = q - p    p - q ) in
                                                                                       ¯ + (¯
Lemma B.1 is given by

                                                            ~(q ) =  q +~
                                                                        e

where  is given by (B.5) and e
                             ~ is some vector that is independent of q . The linearity of ~(q ) in q implies
that (B.3) is a linear complementarity problem (Berman, 1981). Thus, by Berman (1981, p. 251), it has
a unique solution if  is a P-matrix.

       The juxtaposition of Lemmas B.1 and B.2 establishes that the economy has a unique bargaining
equilibrium as long as  in (B.5) is a P-matrix. The following lemma establishes this claim and hence
completes the proof.

Lemma B.3. Matrix  in (B.5) is a P-matrix.

Proof. Recall that the rows and columns of  are indexed by the pairs of active customized firms (j, i) 
G. For the purpose of this proof, we find it more convenient to index the rows and columns of  by
the index of the corresponding supplier firm j . Similarly, we use j to denote ij . Note that we can do
so unambiguously, as each customized producer j has exactly one customer i in G.
       To prove  is a P-matrix, suppose to the contrary that it is not. By Berman (1981, p. 251), there
exists a non-zero vector  such that j ( )j  0 for all j . In particular, for any (j, i)  G,
                                                                                      
                                                                     r                                   Aij 
                    j ( )j = j j - (1 - j )                          Ajr
                                                                         - j Aij i + j                      k   0.
                                                                                                         Aik 
                                                                                                                     (B.6)
                                                        r: (r,j )G                             (k,i)G
                                                                                            k:
                                                                                               k=j

Given firm j , consider the sequence of downstream customized firms (j, k1 , k2 , . . . , ks , 0) in G that
connect j to the corresponding firm in the final good producing industry and consider the following
change of variables:

                                           ^j = j      1/j 1/k1 - 1 . . . 1/ks - 1
                                                                                      ,
                                                          Ak1 j Ak2 k1 . . . Aks ks-1

where note that k1 = i as j has a single customer. Rewriting (B.6) in terms of ^ then implies that
                                                                                   

                      ^j  ^                   ^r                ^i                                  ^k
                                                                                                              
                          j-                       r (1 - j ) -        j (1 - i ) +                       j k 0
                                  r:(r,j )G                                                (k,i)G
                                                                                      k:
                                                                                           k=j

  28
       A square matrix is a P-matrix if all its principal minors are strictly positive.



                                                                     29
for all j . Summing both sides of the above inequality therefore leads to

                              ^2 - 2
                                                ^j 
                                                   ^i    j (1 - i ) +                             ^k 
                                                                                                     ^j   j k  0,
                               j
                  j :(j,i)G         j :(j,i)G                           j :(j,i)G        (k,i)G
                                                                                    k:
                                                                                         k=j

which in turn implies that
                                                                                                    2

                                    i ^2 +                ^j      1 - j -                 ^r   r   0,
                                       i
                         i:(i,0)G            j :(j,i)G                        r:(r,j )G

where the first sum is over all firms i that sell to the firm in the final good producing industry 0. It
is immediate that both terms on the left-hand side of the above inequality are non-negative, which
implies that they both must be equal to zero. As a result, ^i = 0 for all firms i that sell to the firm in the
final good producing industry and

                                                ^j
                                                        1 - j =               ^r
                                                                                    r                               (B.7)
                                                                           
                                                                  r:(r,j )G


for all firms j . In particular, (B.7) implies that ^j = 0 for all firms j with no customized suppliers in G.
Now using (B.7) iteratively over the production network G implies that the only solution to the above
system of equations is that  ^j = 0 for all j  G, thus contradicting the assumption that  is non-zero.
This establishes that  is a P-matrix.

Proof of Theorem 3

We start with a preliminary lemma, which establishes that all firm-level prices (and hence markups)
are continuous in bargaining powers and productivity shocks.

Lemma B.4. For any given production network of active firms G, the bargaining equilibrium (pa , pb ) is
continuous in bargaining powers and productivity shocks.

Proof. Let  = (ij )(j,i)G denote the vector of bargaining powers in the production network G and
define the correspondence  that maps the vector of bargaining powers  to the set of all bargaining
equilibria consistent with  , i.e.,

                      ( ) = {(pa , pb ) : (pa , pb ) is a bargaining equilibrium given  }.

Since the graph of this correspondence is closed,  is upper hemi-continuous. Furthermore, recall
from Theorem 1(b) that the bargaining equilibrium is always unique, implying that  is a single-valued
function. This coupled with upper hemi-continuity of  guarantees that the mapping from the vector
of bargaining powers to the bargaining equilibrium is continuous.
   The proof of the continuity of the bargaining equilibrium in productivities is analogous.

   With the above lemma in hand, we are now ready to present the proof of Theorem 3. For brevity,
we only present the proof for firms that are upstream to j . The result for downstream and horizontal
firms follows from a similar argument.

                                                                  30
Proof of part (a)       Let  = (ij )(j,i)G denote the vector of bargaining powers in the production
network G. Recall from equation (B.1) that, for any  , the vector of equilibrium customized prices
pa is the unique solution to the system of equations pa = min{(pa ,  ), p
                                                                        ¯ }. For any given  , define the
partition S ( ) of the set of active firms in G such that the parties in a supplier-customer pair (j, i)  G
belong to the same partition element if and only if the outside option in their pairwise bargaining
game is strictly loose in equilibrium, that is, pa                ¯ij . Thus, the two firms belong to two
                                                 ij = ij (p,  ) < p
different partition elements if pa    ¯ij .
                                 ij = p
   Fix a supplier-customer pair of firms (j, i)  G and all bargaining powers -ij other than ij . Define
                       (1)      (2)              (m)
the sequence 0 = ij < ij < · · · < ij                  = 1 and the resulting collection of non-overlapping intervals
        (k) (k+1)
Ik =   (ij , ij   )   such that

                             S (ij , -ij ) = S (ij , -ij )      if ij , ij  Ik
                             S (ij , -ij ) = S (ij , -ij )      if ij  Ik , ij  Ik and k = k .

Thus, the partition S (ij , -ij )--and hence, the collection of pairwise bargaining problems in G for
which the outside option constraint binds--remains unchanged for all ij within the same interval Ik .
Since there are only finitely many such intervals, if all markups upstream to j are weakly increasing in
ij in the interval Ik for all 1  k < m, then Lemma B.4 guarantees that they are weakly increasing in
ij over the entire [0, 1] interval.
   To establish that all markups upstream to j are weakly increasing within interval Ik for all 1  k <
                                (k)   (k+1)
m, fix an interval Ik = (ij , ij              ) and let S (k) = S (ij , -ij ) denote the corresponding partition of G
for all ij  Ik . We consider two separate cases. First, suppose i and j belong to two separate partition
elements. By definition, pa    ¯ij . Therefore, it is immediate that changes in ij within the interval Ik
                          ij = p
has no impact on any of the prices and markups in the economy, thus establishing the desired result
that all markups are weakly increasing in that interval. As the second case, suppose that i and j belong
to the same element S within the partition S (k) . Once again, all prices outside of S remain unchanged.
On the other hand, for any pair of firms (l, r)  G such that r, l  S --including the pair (j, i)--equation
(6) implies that
                                                    rl Arl µr = (1 - rl )µl ,

i.e., the markup charged by each firm is proportional to that charged by its customer. Therefore,
an increase in ij strictly increases the markup charged by j and all its upstream suppliers within
the partition element S . Taken together, the two cases establish that all markups upstream to j are
increasing in ij for all ij  Ik , which in turn guarantees that all upstream markups are weakly
increasing in ij over the entire interval [0, 1].


Proof of part (b)      As a first observation, note that, when all production technologies are Leontief, all
quantities are invariant to prices and hence bargaining powers. Therefore, monotonicity of markups
established in part (a) of the theorem guarantees that the profits of all firms upstream to j also increase
in ij over the entire interval [0, 1].




                                                               31
Proof of part (c)          By continuity of bargaining equilibrium established in Lemma B.4, it is sufficient
                                                                                                        (k)   (k+1) 29
to show that all upstream prices are increasing in ij within a given interval Ik = (ij , ij                        ).    Let
S (k)   = S (ij , -ij ) denote the corresponding partition of the set of active firms G for any ij  Ik . We
consider two separate cases. First, if i and j belong to two distinct partition elements, then all prices
are invariant to the value of ij  Ik , thus establishing the desired claim. Second, suppose i and j
belong to the same partition element S  S (k) . Once again, all prices upstream to j that are outside of
S remain invariant to the value of ij  Ik . Therefore, the proof is complete once we show that the price
of all firms in S that are also upstream to j are increasing in ij for all ij  Ik . We prove this claim by
induction. Consider the set of firms S0  S that are upstream to j and have no customized supplier in
S . The marginal cost of any firm in S0 is invariant to ij , while at the same time, its markup is increasing
in ij as established in part (a). Therefore, it must be the case that its output price is increasing in ij .
Next define the set of upstream firms S1  S such that they have at least one customized supplier in
S0 and no customized suppliers in S \ S0 . The fact that the output price of firms in S0 are increasing
in ij implies that the marginal cost of firms in S1 are also increasing in ij . But recall that the markup
of any firm that are upstream to j (including those in S1 ) are increasing in ij . Therefore, it must be
the case that the output price of firms in S1 are increasing in ij . Iterating this argument over set S
establishes the desired claim and completes the proof.

Proof of Theorem 4

Proof of part (a)                                                       ¯  G such that G  G
                           Consider two feasible production networks G, G                 ¯ . Denote
the vectors of customized prices in the two economies as functions of pairwise bargaining powers by
                  ¯,
pa (G,  ) and pa (G ¯) , respectively, where  = (ij )(j,i)G and ¯ = (ij )   ¯ are the corresponding
                                                                                               (j,i)G
                                       ¯ , we can define the boundary of G as
vectors of bargaining powers. Since G  G

                                                           ¯ : i  G and j  G},
                                              G = {(j, i)  G

                                               ¯ such that the customer belongs to G but the supplier
that is, the set of supplier-customer pairs in G
does not. Accordingly, we can express the vector of bargaining powers in G  ¯ as ¯ = (,   ,  e ), where
  = (ij )(j,i) G is the vector of bargaining powers between pairs of firms on the boundary of G and
                                                                                          ¯ but not G.
 e is the vector of bargaining powers between pairs of firms where both parties belong to G
       The key observation is that

                                                    a ¯
                                      pa                         e
                                       ij (G,  ) = pij (G, (, 1,  ))         for all (j, i)  G,                      (B.8)

                                                                           ¯ if all bargaining powers
that is, pairwise equilibrium prices in G coincide with pairwise prices in G
between the pairs of firms on the boundary of G are set to 1. This is a consequence of the fact that, in
any pairwise bargaining, the customer firm is indifferent between the customized and generic variant
of a good if the corresponding customized supplier has all the bargaining power. Equation (B.8) thus
implies that

                                                         ¯ , (, 1,  e ))
                                         µi (G,  ) = µi (G                     for all i  G.
  29
       See the proof of part (a) of the theorem for the definition of these intervals.


                                                                  32
The above equality, in juxtaposition with the monotonicity of markups with respect to the bargaining
powers established in Theorem 3(a), then leads to

                                          ¯ , (, 1,  e ))  µi (G
                          µi (G,  ) = µi (G                    ¯,¯)         for all i  G,

where we are using the fact that all firms in G are either downstream or horizontal to  G.


Proof of part (b)    The representative household's budget constraints under the two production
networks are given by

                                           ¯ ) = wL +
                                       y0 (G                       ¯ ) - wzj )
                                                               (j (G                                   (B.9)
                                                           ¯
                                                         j G

                                        y0 (G) = wL +          (j (G) - wzj ),
                                                         j G

where y0 denotes the household's demand for the final good and we are choosing the final good as the
numeraire. Therefore,
                                      ¯ )  y0 (G) +
                                  y0 (G                            ¯ ) - j (G) ,
                                                                j (G
                                                        j G

where the inequality follows from condition (8). Since all production functions are Leontief, firm-level
outputs are proportional to the household's demand for the final good, i.e., yj = j y0 , where j is a
constant that is independent of prices and quantities (though it may depend on the productivities).
Consequently,
                             ¯ )  y0 (G) +
                         y0 (G                            ¯ )y0 (G
                                                    j µj (G      ¯ ) - j µj (G)y0 (G) .
                                              j G

                              ¯ )  µj (G) for all j  G. Therefore,
By part (a) of Theorem 4, µj (G
                                                                   
                                      ¯ ) - y0 (G) 1 -
                                  y0 (G                                      ¯ )  0.
                                                                      j µj ( G
                                                               j G

      ¯ is feasible by assumption, (B.9) guarantees that
Since G

                         ¯) >
                     y0 (G               ¯ ) = y0 (G
                                                   ¯)
                                      j (G                     j µj ( G        ¯)
                                                                      ¯ )  y0 (G                ¯ ).
                                                                                          j µj (G
                                  ¯
                                j G                       ¯
                                                        j G                         j G

                                                                          ¯ )  y0 (G).
The juxtaposition of the last two inequalities therefore implies that y0 (G


Proof of part (c)   Since all production functions are Leontief, the gross profit of firm i is given by i =
i µi y0 , where i is a constant that is independent of prices and quantities. In part (a), we established
that µi (G)  µi (G¯ ) for all i  G, whereas in part (b), we established that y0 (G)  y0 (G
                                                                                         ¯ ). Therefore, it
                            ¯ ) for all i  G.
is immediate that i (G)  i (G




                                                         33
Proof of Theorem 2

Proof of parts (a) and (b)          By Definition 3, G  G corresponds to a full equilibrium if and only if it is
the fixed point of the mapping  : 2G  2G , defined as

                                          (G) = {i  G : i ({i}  G)  wzi }.                                      (B.10)

If this mapping satisfies Assumptions A.1 and A.2, then Theorem A.1 guarantees that  has a greatest
fixed point, thus establishing parts (a) and (b) of Theorem 2. Therefore, we first verify that  satisfies
Assumptions A.1 and A.2 and then prove part (c) of Theorem 2.


Assumption A.1:          To establish that  satisfies Assumption A.1, take two production networks of active
firms G1 , G2  G and suppose that G1  (G2 ). Hence,

                                          i ({i}  G2 )  wzi           for all i  G1 .

As in the proof of Theorem 4(b), the fact that all production technologies are Leontief implies that the
above inequality can be rewritten as

                                 i µi (G2  {i})y0 (G2  {i})  wzi               for all i  G1 ,                  (B.11)

where µi is the markup of firm i and i is a constant independent of prices and quantities that relates
i's output to household's demand for consumption good via yi = i y0 . Furthermore, when the set of
active firms is G2 {i}, the household's budget constraint implies that

                    y0 (G2  {i}) = wL + y0 (G2  {i})                    j µj (G2  {i}) -                wzj ,
                                                             j G2 {i}                        j G2 {i}

where the first term on the right-hand side above is the household's labor income and the other two
terms are the customized firms' profits net of their fixed costs. Solving for y0 (G2  {i}) from the above
equation and plugging it into (B.11) implies that whenever G1  (G2 ), then30
                                                               
                              i µi (G2 {i})
                 zi                                L -      zj   for all i  G1 .                                (B.12)
                       1 - j G2 j µj (G2 {i})
                                                                      j G2

Furthermore, Theorem 4(a) guarantees that µj (G1  G2 )  µj (G2 {i}) for any pair i and j such that
j  G2 {i} and all i  G1 . Consequently,
                                                                               
                                      i µi (G1  G2 )
                         zi                               L -                zj         for all i  G1 .         (B.13)
                               1-     j G2 j µj (G1  G2 )             j G2

      Next, consider the economy in which the set of active firms is instead G1  G2 . In this case, firm
i's gross profit is given by i (G1  G2 ) = i µi (G1  G2 )y0 (G1  G2 ). Therefore, solving for y0 from the
household's budget constraint and plugging it back into the expression for i (G1  G2 ) leads to
                                                                                 
                                       wi µi (G1  G2 )
            i (G1  G2 ) - wzi =                                L -            zj  - wzi
                                 1 - j G1 G2 j µj (G1  G2 )
                                                                                         j G1 G2

 30
      Note that (B.12) holds for all i  G1 irrespective of whether i  G2 or not.


                                                               34
for all i  G1 . Consequently, the upper bound on zi in (B.13) implies that

                                                  L-        j G1 G2 zj                        L-      j G2 zj
i (G1  G2 ) - wzi  wi µi (G1  G2 )                                                -                                    .
                                             1-   j G1 G2      j µj (G1  G2 )         1-      j G2   j µj (G1  G2 )

Simplifying the right-hand side of the above inequality, we obtain,

                                                            wi µi (G1  G2 )
                          i (G1  G2 ) - wzi                                        Q
                                                  1-        j G1 G2 j µj (G1  G2 )

for all i  G1 , where
                                                                           
                              j G1 \G2   j µj (G1  G2 )
                        Q=                                  L -          zj  -               zj .
                             1-    j G2 j µj (G1  G2 )            j G2            j G1 \G2

On the other hand, summing both sides of inequality (B.13) over all i  G1 \ G2 guarantees that Q  0.
Therefore, it is immediate that i (G1  G2 )  wzi for all i  G1 , and hence, G1  (G1  G2 ). This
establishes that mapping  in (B.10) satisfies Assumption A.1.


Assumption A.2:     We now establish that mapping  in (B.10) also satisfies Assumption A.2. Let
G1 , G2  G denote a pair of feasible production networks such that Gk  (Gk ) for k  {1, 2}. The
assumption that Gk  (Gk ) implies that i (Gk ) = i µi (Gk )y0 (Gk )  wzi for all i  Gk . Solving
for y0 (Gk ) from the household's budget constraint, y0 (Gk ) = wL +                  j Gk (j µj (Gk )y0 (Gk )   - wzj ),
therefore implies that
                                                                                 
                                             i µi (Gk )
                                  zi                         L -                zj 
                                        1-   j Gk j µj (Gk )             j Gk

for all i  Gk . Furthermore, recall from Theorem 4(a) that µi (Gk )  µi (G1  G2 ) for all i  Gk . Hence,
                                                                          
                                        i µi (G1  G2 )
                             zi                             L -        zj                          (B.14)
                                  1 - j Gk j µj (G1  G2 )
                                                                           j Gk

for all i  Gk . Setting k = 1 and summing over all i  G1 \ G2 implies that
                                                                                                            
              zj  1 -         j µj (G1  G2 )  L -                        zj                 j µj (G1  G2 ). (B.15)
   j G1 \G2             j G1 G2                                j G1 G2           j G1 \G2

Similarly, setting k = 2 in (B.14) and summing over all i  G2 \ G1 implies that
                                                                                                            
              zj  1 -         j µj (G1  G2 )  L -                        zj                 j µj (G1  G2 ). (B.16)
   j G2 \G1             j G1 G2                                j G1 G2           j G2 \G1

Therefore, as long as G1  (G1 ) and G2  (G2 ), inequalities (B.15) and (B.16) are satisfied.




                                                       35
   Next, consider the profit i (G1  G2 ) of an arbitrary firm i  G1 when the production network of
active firms is G1  G2 . Once again, solving for household demand from her budget constraint and
plugging it back to firm i's profit function implies that
                                                                                   
                               wi µi (G1  G2 )
 i (G1  G2 ) - wzi =                                   L -                     zj  - wzi
                        1 - j G1 G2 j µj (G1  G2 )
                                                                     j G1 G2

                                                     L-         j G1 G2 zj                    L-       j G1 zj
                        wi µi (G1  G2 )                                             -
                                               1-    j G1 G2      j µj (G1  G2 )        1-    j G1   j µj (G1  G2 )

for all i  G1 , where the inequality is a consequence of (B.14). Simplifying the right-hand side of the
above inequality therefore implies that i (G1  G2 ) - wzi  0 for all i  G1 as long as Q > 0, where
                                                                                             

     Q = L -               zj              j µj (G1  G2 ) - 1 -               j µj (G1  G2 )                    zj  .
                    j G1       j G2 \G1                                j G1                          j G2 \G1

By inequality (B.16), we have
                                                                                                                    
                        L - j G1 zj
Q               zj                    1 -                    j µj (G1  G2 ) - 1 -                   j µj (G1  G2 ) ,
                       L - j G1 G2 zj
       j G2 \G1                                     j G1 G2                                  j G1

and as a result
                                                                                                    
                             j G2 \G1 zj
             Q                                L -                 zj               j µj (G1  G2 )
                       L-      j G1 G2 zj            j G1 G2            j G1 \G2
                                                                                                     

                                                - 1 -              j µj (G1  G2 )                   zj  .
                                                        j G1 G2                          j G1 \G2

Now (B.15) guarantees that the right-hand side of the above inequality is non-negative. Therefore, we
just established that i (G1  G2 ) - wzi  0 for all i  G1 . An identical argument establishes that
i (G1  G2 ) - wzi  0 for all i  G2 .
   Taken together, we have, i (G1  G2 ) - wzi  0 for all i  G1  G2 . Therefore G1  G2  (G1  G2 )
for any arbitrary pair of feasible production networks G1 and G2 such that G1  (G1 ) and G2 
(G2 ), thus implying that Assumption A.2 is satisfied.

   Having proven mapping  in (B.10) satisfies Assumptions A.1 and A.2, Theorem A.1 establishes
parts (a) and (b) of Theorem 2.


Proof of part (c)    Let G denote the production network of active firms corresponding to an arbitrary
full equilibrium. The household's budget constraint under G is given by

                                      y0 (G ) = wL +            (i (G ) - wzi ).                                   (B.17)
                                                             
                                                       iG




                                                        36
Similarly, if G                                                                                     
               max denotes the greatest full equilibrium (so that G  Gmax for any full equilibrium G ),
we have

                                   y0 (Gmax ) = wL +                 (i (Gmax ) - wzi )                                  (B.18)
                                                               
                                                          iG   max


                                                wL +            (i (Gmax ) - wzi )
                                                          iG

where the inequality is a consequence of the fact that i (G                       
                                                           max )  wzi for all i  Gmax . Subtracting
equation (B.17) from both sides of the above inequality leads to

                            y0 (G             
                                 max ) - y0 (G )                i (Gmax ) -              i (G ).
                                                         iG                        iG

Recall that, when all production technologies are Leontief, the output of any customized firm i satisfies
yi = i y0 , where y0 is the aggregate output and i is a constant that depends neither on prices nor
quantities. Therefore,

                y0 (G                      
                     max ) - y0 (G )  y0 (Gmax )             i µi (G             
                                                                    max ) - y0 (G )                i µi (G )
                                                        iG                                   iG

                                         (y0 (G             
                                               max ) - y0 (G ))                   i µi (Gmax ),
                                                                               
                                                                          iG

where µi denotes firm i's markup and the second inequality is a consequence of Theorem 4(a) and the
fact that G  Gmax . Consequently,


                             y0 (G             
                                  max ) - y0 (G )          1-             i µi (Gmax )        0.                         (B.19)
                                                                       
                                                                 iG

To establish that y0 (G            
                       max )  y0 (G ), it is sufficient to show that the second term on the left-hand side
of the above inequality is strictly positive. To this end, note that (B.18) can be rewritten as

    y0 (Gmax ) = wL +            i µi (G          
                                        max )y0 (Gmax ) -               wzi > y0 (Gmax )              i µi (Gmax ),      (B.20)
                         iGmax                               iGmax                            iGmax



where the inequality follows from the fact that any full equilibrium is feasible and thus L >                         iGmax
                                                                                                                            zi .
Dividing both sides of (B.20) by    y0 (Gmax )     and using the fact that G          
                                                                                          Gmax     establishes that

                                   1>              i µi (Gmax )              i µi (Gmax ).
                                                                          
                                        iG   max                     iG

This in juxtaposition with (B.19) guarantees that y0 (G            
                                                       max )  y0 (G ).


Proof of Theorem 5

Proof of part (a)   The proof follows steps similar to those in the proof of Theorem 3(a). Let A =
(Aij )(j,i)G denote the vector of all pairwise customized productivities. Define the partition S (A) of
the set of active firms G such that the parties in a supplier-customer pair (j, i)  G belong to the same
partition element if and only if the outside option in their pairwise bargaining game is strictly loose

                                                           37
in equilibrium, that is, pa    ¯ij . Thus, the two firms belong to two different partition elements if
                          ij < p
pa    ¯ij .
 ij = p
    Fix a supplier-customer pair of firms (j, i)  G and all productivities A-ij other than Aij . Define
                       (1)        (2)                 (m)
the sequence 0 = Aij < Aij < · · · < Aij                    =  and the resulting collection of non-overlapping
                   (k)   (k+1)
intervals Ik =   (Aij , Aij )    such that

                      S (Aij , A-ij ) = S (Aij , A-ij )        if Aij , Aij  Ik
                      S (Aij , A-ij ) = S (Aij , A-ij )        if Aij  Ik , Aij  Ik and k = k .

Thus, the partition S (Aij , A-ij )--and hence, the collection of pairwise bargaining problems in G for
which the outside option constraint binds--remains unchanged for all Aij within the same interval
Ik . Since there are only finitely many such intervals, if all markups in S are weakly increasing in Aij
in each interval Ik for 1  k < m, then Lemma B.4 guarantees that they are weakly increasing in Aij
over the entire [0, 1] interval as well. The fact that markups are monotonically increasing in Aij over
interval Ik then follows from equation (6) and steps similar to the proof of Theorem 3(a).


Proof of part (b)     For a supplier-customer pair of active firms (j, i)  G, let cagg (Aij ) denote the
equilibrium cost of transforming labor into one unit of the consumption good as a function of
the productivity level Aij , holding the set of active firms G, the bargaining powers, and all other
productivities constant. Similarly, let y0 (Aij ) denote the equilibrium aggregate output as a function
of Aij . It is immediate that
                                                          w
                                        y0 (Aij ) =                 L-        zk   ,
                                                      cagg (Aij )
                                                                         kG

where note that the wage w does not depend on the productivity Aij . Since all production functions
are Leontief, the marginal cost cagg (Aij ) of producing one unit of consumption good is decreasing in
Aij . Therefore, aggregate output y0 (Aij ) is increasing in Aij .


Proof of part (c)    For a supplier-customer pair of active firms (j, i)  G, let k (Aij ) denote the gross
profit of firm k  G as a function of the productivity level Aij , holding the production network, the
bargaining powers, and all other productivities constant. Since all production functions are Leontief,

                                         k (Aij ) = k (Aij )µk (Aij )y0 (Aij ),

where k is a constant that only depends on productivities, µk is the markup of firm k , and y0 is the
aggregate output in the economy. The key observation is that, due to the assumption of Leontief
technologies, k is independent of Aij as long as firm k is not upstream to j , that is,

                                           k (Aij ) = k µk (Aij )y0 (Aij ).

In parts (a) and (b), we established that µk (Aij ) and y0 (Aij ) are both increasing in Aij . Therefore, as
long as k = j or k is either downstream or horizontal to j , then an increase in Aij increases the profits
of firm k .


                                                              38
Proof of part (d)   Consider a firm k  G that is upstream to firm j . Since rj = 1 for all firms r such
that (r, j )  G, k 's markup µk is independent of the productivity Aij between the supplier-customer
pair (j, i)  G. Therefore, k 's profit as a function of Aij is given by

                                        k (Aij ) = µk k (Aij )y0 (Aij ),

where y0 denotes the economy's aggregate output and k is independent of prices and quantities and
is equal to the reciprocal of the product of customized productivities along the production chain from
k to the final good industry. As a result, k (Aij ) = ~ k /Aij , where ~ k is a constant that is independent
of Aij . Consequently,
                                        k (Aij ) = µk ~ k A- 1
                                                           ij y0 (Aij ).

Since all production technologies are Leontief and all firms use labor as an input for production,
                                                               1
                                             y0 (Aij ) =
                                                           A-
                                                            ij
                                                               1
                                                               + 2

for some 1 , 2 > 0 that are independent of Aij . The juxtaposition of the above two equations then
guarantees that k (Aij ) is decreasing in Aij .

Proof of Theorem 6

Proof of part (a)       ¯ and z denote two vectors of fixed costs such that z i  z
                    Let z                                                        ¯i for all firms i  G .
Define the mappings ,  : 2G  2G as

                                    (G) = {i  G : i ({i}  G)  wz
                                                               ¯i }
                                    (G) = {i  G : i ({i}  G)  wz i }.

It is immediate that the fixed points of  and  correspond to full equilibria of the economies with
fixed costs given by z
                     ¯ and z , respectively. Furthermore, recall from the proof of Theorem 2 that 
and  satisfy Assumptions A.1 and A.2. Therefore, by Theorem A.1, both mappings have a greatest
                                ¯  and G , respectively. Thus, G
fixed point, which we denote by G                              ¯  and G are also the greatest full
equilibria of the economies with fixed costs z
                                             ¯ and z , respectively.
   On the other hand, the fact that z i  z ¯i for all i  G implies that (G)  (G) for all G  G .
                                         ¯ 
Therefore, Corollary A.1 guarantees that G  G . This establishes that increasing the vector of fixed
costs shrinks the set of active firms in the economy's greatest full equilibrium.

                                                                                                       ¯   
Proof of part (b)       ¯ and z denote two vectors of fixed costs such that z i  z
                    Let z                                                        ¯i for all i  G . Let G
and G denote the corresponding greatest full equilibria in the economies with fixed costs z
                                                                                          ¯ and z ,
                                                       ¯   
respectively. In part (a), we already established that G  G . Furthermore, the household's budget
constraint in the two economies is given by

                                    y0 (¯
                                        z ) = wL +               ¯  ) - wz
                                                              k (G       ¯k
                                                      ¯
                                                     kG

                                    y0 (z ) = wL +            k (G ) - wz k .                        (B.21)
                                                     kG    




                                                      39
Therefore,
                         y0 (z ) - y0 (¯
                                       z) =          k (G ) - wz k -                ¯  ) - wz
                                                                                 k (G       ¯k .
                                                                          ¯   
                                              kG                         kG

Since G is a full equilibrium, all active firms in the economy make positive net profits, i.e., k (G ) 
wzk for all k  G . Therefore,

         y0 (z ) - y0 (¯
                       z)             k (G ) - wz k -                ¯  ) - wz
                                                                  k (G       ¯k                            ¯ ) ,
                                                                                               k (G ) - k (G
                              ¯                            ¯                           ¯   
                             kG                          k G                         k G

                                                             ¯   G and the second inequality follows
where the first inequality is a consequence of the fact that G
from the assumption that z k  z
                              ¯k . Since all production functions are Leontief, k = k µk y0 , where
k > 0 is a constant that is independent of quantities and prices and µk is the markup of firm k .
Hence:

         y0 (z ) - y0 (¯
                       z)                                    ¯  )y0 (¯
                                      k µk (G )y0 (z ) - µk (G       z )  (y0 (z ) - y0 (¯
                                                                                         z ))          k µk (G ).
                              ¯                                                                    ¯
                             kG                                                                  k G

                                                     ¯  )  µk (G ) for all k  G
The second inequality follows from the fact that µk (G                        ¯  whenever G
                                                                                          ¯   G
(as established in Theorem 4(a)). Consequently,
                                                                                 

                                                      z ) 1 -
                                        y0 (z ) - y0 (¯                k µk (G )  0.                                (B.22)
                                                                   ¯
                                                                 k G

Therefore, as long as the second term on the left-hand side above is strictly positive, it is immediate
that y0 (z )  y0 (¯
                  z ), which completes the proof. To establish this last claim, note that the household's
budget constraint in (B.21) can be rewritten as
                                                                           

                  y0 (z ) = y0 (z )        k µk (G ) + w L -             z k  > y0 (z )        k µk (G ),
                                      kG                           kG                      ¯
                                                                                          kG

where the inequality follows from the fact that the production network corresponding to any full
                                 ¯   G . Consequently, 1 -
equilibrium is feasible and that G                                            
                                                                    ¯  k µk (G ) > 0, which in
                                                                                      k G
juxtaposition with (B.22) guarantees that y0 (z )  y0 (¯
                                                       z ).

                                             
                                    ¯ and G denote the greatest full equilibria corresponding to fixed
Proof of part (c)  Once again, let G
                                                                   ¯   G . By Theorem 4(a), µk (G
             ¯  z , respectively. In part (a), we established that G
cost vectors z                                                                                  ¯ ) 
µk (G ) for all k  G ¯  . Thus, all firm-level markups decrease in fixed costs. This observation also
immediately implies that the same relationship also holds for firm-level profits. More specifically,
recall that k = k µk y0 for any firm k , where k only depends on productivities. Therefore, as fixed
                         ¯, each firm k  G
costs increase from z to z                ¯  produces a smaller quantity (as established in part (b)), at
a lower markup, while paying a weakly higher fixed cost. Thus, its net profit is decreasing in the vector
of fixed costs.




                                                             40
Proof of Theorem 7

Proof of part (a) Fix a supplier-customer pair of customized firms (j, i)  G and consider two
                                                                                      ¯ij and Aij ,
economies that are identical across all dimensions except for the productivity levels A
      ¯ij  Aij . Denote the greatest full equilibria corresponding to the two economies by G
where A                                                                                        ¯
                                    ¯  and G are, respectively, the greatest fixed points of mappings
and G , respectively. Equivalently, G
,  : 2G  2G defined as

                                                         ¯ij )  wzi }
                                (G) = {i  G : i ({i}  G; A
                                (G) = {i  G : i ({i}  G; Aij )  wzi }.

Finally, suppose that both i and j are active in G (i.e., i, j  G ) but j has no active suppliers in G .
   We first show that the set of active firms in the economy's greatest full equilibrium grows as we
                                                        ¯  . To establish this, let k denote an arbitrary
                                      ¯ij , that is, G  G
increase the productivity from Aij to A
firm in G . By assumption, k is either downstream, horizontal, or equal to j . Therefore, by Theorem
5(c), as long as the production network is held constant, k 's profit is increasing in Aij . In particular,
k (G ; A ¯ij )  k (G ; Aij ). At the same time, the assumption that k  G implies that k makes non-
                                                                           ¯ij )  wzk , and as a result,
negative net profits in G , i.e., k (G ; Aij )  wzk . Consequently, k (G ; A
k  (G ) for all k  G . We therefore just established that

                                               G  (G ).                                             (B.23)

On the other hand, by part (c) of Theorem A.1, the greatest fixed point of  is given by

                                             ¯ =
                                             G             G,                                       (B.24)
                                                      GX

where X = {G  G : G                                                             ¯ .
                     ¯(G)}. By (B.23), G  X . Therefore, (B.24) implies that G  G


Proof of part (b)                                                             ¯ij increases the profits
                    We next show that an increase in productivity from Aij to A
of all already active firms under Aij . More specifically, we show that

                                 ¯ ; A
                              k (G   ¯ij )  k (G ; Aij )        for all k  G .                      (B.25)

To this end, recall that G  G ¯  . Furthermore, the fact that G
                                                              ¯  is a full equilibrium implies that all
         ¯  make positive net profits. Thus,
firms in G                                                ¯  ¯ij ) - wzk )  0. Therefore, by Theorem
                                                ¯   (k (G ; A
                                                kG \G
         ¯ ; A
4(c), k (G   ¯ij )  k (G ; A
                           ¯ij ) for all k  G . On the other hand, by assumption, k  G is either
                                                                           ¯ij )  k (G ; Aij ) for all
downstream, horizontal, or equal to j . Therefore, by Theorem 5(c), k (G ; A
k  G . Hence,
                                   ¯ ; A
                                k (G   ¯ij )  k (G ; A
                                                     ¯ij )  k (G ; Aij ),

for all k  G , thus establishing (B.25).




                                                    41
Proof of part (c)                           ¯ij ) denote aggregate output under the two productivity levels.
                      Let y0 (Aij ) and y0 (A
From the household's budget constraint, we have

                                         ¯ij ) = wL +
                                     y0 (A                          ¯ ; A
                                                                 k (G   ¯ij ) - wzk
                                                          ¯   
                                                         kG

                                     y0 (Aij ) = wL +            k (G ; Aij ) - wzk .
                                                         kG

Therefore,
                                                        
                       ¯ij ) - y0 (Aij ) =
                  y0 ( A                              ¯ ;A
                                                   k (G  ¯ij ) - wzk -            k (G ; Aij ) - wzk
                                               ¯
                                             k G                           kG
                                                        
                                                      ¯ ;A
                                                   k (G  ¯ij ) - wzk -            k (G ; Aij ) - wzk
                                             kG                            kG
                                                         ¯ij ) - k (G ; Aij ) ,
                                                      ¯ ;A
                                       =           k (G
                                             kG


where the inequality follows from the fact that G¯  is a full equilibrium, and as a result, all firms k 
¯  \ G make non-negative net profits, i.e., k (G
G                                              ¯ ; A                     ¯  \ G . Now (B.25) guarantees
                                                   ¯ij )  wzk for all k  G
that the right-hand side of the above inequality is non-negative.

Proof of Theorem 9

The decomposition in (11) follows immediately from the definitions of  GDP|z fixed and
 GDP|G
     ¯  fixed . It is therefore sufficient to show that both of these terms are non-negative. The fact that
 GDP|G
     ¯  fixed  0 is an immediate consequence of the observation that, holding all else (including the
set of active firms) constant, a decrease in fixed costs can only increase aggregate output. To show that
 GDP|            0, first note that Theorem 6(a) guarantees that the G ¯   G . Furthermore, since G is
        z fixed
part of an equilibrium, all active firms j  G make non-negative net profits under z . Hence,

                                                        (j (G ) - wz j )  0.
                                                    ¯
                                              j :G \G

                                                                       ¯  , z ).
Consequently, statement (b) of Theorem 4 implies that GDP(G , z )  GDP(G




                                                            42
References

Acemoglu, Daron, Ufuk Akcigit, and William Kerr (2016), "Networks and the macroeconomy: An
  empirical exploration." In National Bureau of Economic Research Macroeconomics Annual (Martin
  Eichenbaum and Jonathan Parker, eds.), volume 30, 276­335, University of Chicago Press.

Acemoglu, Daron and Pablo D. Azar (2020), "Endogenous production networks." Econometrica, 88(1),
  33­82.

Acemoglu, Daron, Vasco M. Carvalho, Asuman Ozdaglar, and Alireza Tahbaz-Salehi (2012), "The
  network origins of aggregate fluctuations." Econometrica, 80(5), 1977­2016.

Acemoglu, Daron, Asuman Ozdaglar, and Alireza Tahbaz-Salehi (2015), "Systemic risk and stability in
  financial networks." American Economic Review, 105(2), 564­608.

Allen, Franklin and Douglas Gale (2000), "Financial contagion." Journal of Political Economy, 108(1),
  1­33.

Baqaee, David R. (2018), "Cascading failures in production networks." Econometrica, 86(5), 1819­
  1838.

Baqaee, David R. and Emmanuel Farhi (2020a), "Entry vs. rents." NBER Working Paper No. 27140.

Baqaee, David R. and Emmanuel Farhi (2020b), "Productivity and misallocation in general
  equilibrium." Quarterly Journal of Economics, 135(1), 105­163.

Barrot, Jean-No¨
               el and Julien Sauvagnat (2016), "Input specificity and the propagation of idiosyncratic
  shocks in production networks." Quarterly Journal of Economics, 131(3), 1543­1592.

Berman, Abraham (1981), "Matrices and the linear complementarity problem." Linear Algebra and its
  Applications, 40, 249­256.

Bigio, Saki and Jennifer La'O (2020), "Distortions in production networks." Quarterly Journal of
  Economics (forthcoming).

Bilbiie, Florin O., Fabio Ghironi, and Marc J. Melitz (2012), "Endogenous entry, product variety, and
  business cycles." Journal of Political Economy, 120(2), 304­345.

Boehm, Christoph E., Aaron Flaaen, and Nitya Pandalai-Nayar (2019), "Input linkages and the
  transmission of shocks: Firm-level evidence from the 2011 Tohoku Earthquake." Review of
  Economics and Statistics, 101(1), 60­75.

Campbell, Jeffrey R. (1998), "Entry, exit, embodied technology, and business cycles." Review of
  Economic Dynamics, 1(2), 371­408.

Carvalho, Vasco M., Matthew Elliott, and John Spray (2020), "Network bottlenecks and market power."
  Unpublished manuscript.


                                                  43
Carvalho, Vasco M. and Xavier Gabaix (2013), "The Great Diversification and its undoing." American
  Economic Review, 103(5), 1697­1727.

Carvalho, Vasco M. and Basile Grassi (2019), "Large firm dynamics and the business cycle." American
  Economic Review, 109(4), 1375­1425.

Carvalho, Vasco M., Makoto Nirei, Yukiko Saito, and Alireza Tahbaz-Salehi (2017), "Supply chain
  disruptions: Evidence from the Great East Japan Earthquake." Becker-Friedman Institute working
  paper 2017-01.

Carvalho, Vasco M. and Alireza Tahbaz-Salehi (2019), "Production networks: A primer." Annual Review
  of Economics, 11(1), 635­663.

Carvalho, Vasco M. and Nico Voigtl¨
                                  ander (2015), "Input diffusion and the evolution of production
  networks." NBER Working Paper No. 20025.

Chen, Hui (2010), "Macroeconomic conditions and the puzzles of credit spreads and capital
  structure." Journal of Finance, 65(6), 2171­2212.

Clementi, Gian Luca and Berardino Palazzo (2016), "Entry, exit, firm dynamics, and aggregate
  fluctuations." American Economic Journal: Macroeconomics, 8(3), 1­41.

Dunne, Timothy, Mark J. Roberts, and Larry Samuelson (1988), "Patterns of firm entry and exit in U.S.
  manufacturing industries." The RAND Journal of Economics, 19(4), 495­515.

Elliott, Matthew, Benjamin Golub, and Matthew O. Jackson (2014), "Financial networks and
  contagion." American Economic Review, 104(10), 3115­3153.

Elliott, Matthew, Benjamin Golub, and Matthew V. Leduc (2020), "Supply network formation and
  fragility." Working paper.

Foster, Lucia, Cheryl Grim, and John Haltiwanger (2016), "Reallocation in the Great Recession:
  Cleansing or not?" Journal of Labor Economics, 34(S1), S293­S331.

Foster, Lucia, John Haltiwanger, and Chad Syverson (2008), "Reallocation, firm turnover, and
  efficiency: Selection on productivity or profitability?" American Economic Review, 98(1), 394­425.

Gabaix, Xavier (2011), "The granular origins of aggregate fluctuations." Econometrica, 79(3), 733­772.

Hopenhayn, Hugo A. (1992), "Entry, exit, and firm dynamics in long run equilibrium." Econometrica,
  60, 1127­1150.

Huneeus, Federico (2019), "Production network dynamics and the propagation of shocks." Working
  paper.

Jacobson, Tor and Erik von Schedvin (2015), "Trade credit and the propagation of corporate failure:
  An empirical analysis." Econometrica, 83(4), 1315­1371.



                                                  44
Jones, Charles I. (2013), "Misallocation, economic growth, and input-output economics." In
  Proceedings of Econometric Society World Congress (Daron Acemoglu, Manuel Arellano, and Eddie
  Dekel, eds.), 419­455, Cambridge University Press.

Jovanovic, Boyan (1982), "Selection and the evolution of industry." Econometrica, 50(3), 649­670.

Kikkawa, Ayumu Ken, Glenn Magerman, and Emmanuel Dhyne (2020), "Imperfect competition in
  firm-to-firm trade." National Bank of Belgium Working paper No. 363.

Lim, Kevin (2018), "Endogenous production networks and the business cycle." Working paper.

Liu, Ernest (2019), "Industrial policies in production networks." Quarterly Journal of Economics,
  134(4), 1883­1948.

Long, John B. and Charles I. Plosser (1983), "Real business cycles." Journal of Political Economy, 91(1),
  39­69.

Milgrom, Paul and John Roberts (1994), "Comparing equilibria." The American Economic Review,
  84(3), 441­459.

Oberfield, Ezra (2018), "A theory of input-output architecture." Econometrica, 86(2), 559­589.

Osborne, Martin J. and Ariel Rubinstein (1990), Bargaining and Markets. Academic Press Inc.

Ravn, Morten O. and Harald Uhlig (2002), "On adjusting the Hodrick-Prescott filter for the frequency
  of observations." The Review of Economics and Statistics, 84(2), 371­380.

Rubinstein, Ariel (1982), "Perfect equilibrium in a bargaining model." Econometrica, 50(1), 97­109.

Samuelson, Paul A. (1951), "Abstract of a theorem concerning substitutability in open Leontief
  models." In Activity Analysis of Production and Allocation (Tjalling C. Koopmans, ed.), volume 13,
  142­146, Wiley, New York.

Shaked, Avner (1987), "Opting out: Bazaars versus "Hi Tech" markets." Theoretical Economics Paper
  Series 159, Suntory and Toyota International Centres for Economics and Related Disciplines, LSE.

Taschereau-Dumouchel, Mathieu (2020), "Cascades and fluctuations in an economy with an
  endogenous production network." Working paper.

The White House (2012),         "National strategy for global supply chain security." https:
  //obamawhitehouse.archives.gov/sites/default/files/national_strategy_for_global_
  supply_chain_security.pdf.

Tian, Can (2018), "Firm-level entry and exit dynamics over the business cycles." European Economic
  Review, 102, 298­326.

Topkis, Donald M. (1998), Supermodularity and Complementarity. Princeton University Press.



                                                   45
C       Online Appendix: Pairwise Bargaining

In this appendix, we characterize the outcome of bargaining between a supplier-customer pair of
active firms (j, i)  G, taking all other prices and the representative household's income as given. This
characterization serves as the basis of the proofs of Theorems 1 and 10. Throughout, we suppress
the dependence of variables on all other (customized and generic) prices (pa      b
                                                                           -ij , p ) for notational
simplicity.
     Let i (pa            a
             ij ) and j (pij ) denote, respectively, the customer's and supplier's profits (gross of fixed costs
of operation) as functions of pa                               a      b
                               ij , holding all other prices (p-ij , p ) fixed. We also use cj to denote the
supplier's marginal cost. Note that cj does not depend on pa
                                                           ij . It is immediate that there are positive
gains from trade between i and j if and only if

                                                       i (cj )  0.                                             (C.1)

If inequality (C.1) is violated, the bargaining game results in no agreement. In the proof of Theorem
10, we show that the above inequality holds for any pair of active firms in any bargaining equilibrium.
For the purposes of this appendix, however, we simply impose inequality (C.1) for the pair (j, i)  G,
thus ensuring agreement in equilibrium.
     To characterize the agreement price, we start with the following simple lemma:
Lemma C.1. i (pa                               a          a                               a
               ij ) is strictly decreasing in pij and j (pij ) is strictly increasing in pij .

Proof. The monotonicity of i is an immediate consequence of the fact that i's marginal cost is
strictly increasing in any input price. The monotonicity of j 's profit in its output price follows from
Assumption 3 , which guarantees that all inputs in i's production function are gross complements.

Lemma C.2. If inequality (C.1) is satisfied, then equation fij (pij ) = 0 has at least one solution in the
interval [cj , p                                                                                   
                ij ], where fij is given by equation (17) and pij is the unique price at which i (pij ) = 0.

Proof. As a first observation, note that monotonicity of i established in Lemma C.1 guarantees that
there exists a unique p                 
                       ij such that i (pij ) = 0. The same lemma also implies that, whenever inequality
(C.1) is satisfied, then p                           
                          ij  cj . Therefore, [cj , pij ] is a non-empty interval.
                                            dj
     Next, note that fij (cj ) = ij i (cj ) d pij (cj )  0, where the inequality follows from inequality (C.1) and
monotonicity of j established in Lemma C.1. Similarly, fij (p                   di         
                                                             ij ) = (1 -  )j (pij ) dpij (pij )  0, where
the inequality follows from the monotonicity of i established in Lemma C.1. The two inequalities
together imply that fij (cj )  0  fij (pij ). Therefore, equation fij (pij ) = 0 has at least one solution in
[cj , pij ].

Lemma C.3. If inequality (C.1) is satisfied, then equation fij (pij ) = 0 has a unique solution in [cj , pij ],
where fij is given by equation (17).
Proof. The result is immediate if cj = pij . Therefore, in the rest of the proof we assume that the interval
[cj , p                                                                                                
       ij ] is not a singleton. We start with the observation that fij (pij ) = 0 for some pij  (cj , pij ] if and
only if gij (pij ) = 1 - 1/ij , where
                                                           dj            di
                                        gij (pij ) =   i             j          .
                                                           dpij          dpij


                                                            46
Since gij (cj ) = - and gij (pij ) = 0, it is sufficient to show that gij (pij ) is strictly increasing over the
interval (cj , pij ]. Differentiating gij with respect to pij implies that

                                 -2                                                                                 2                          2
                       di                 d2 j di       d2 i dj      di                                  dj                 dj         di
      gij (pij ) =   j                 i j 2       - i j 2       - i                                                    + j
                       dpij                    d
                                          dpij ijp           d
                                                        dpij ijp     d pij                               dpij               dpij       dpij
                                  -2                                                                       2
                         di                    d2 j di       d2 i dj     di                       dj
                i j                       j       2      - j    2      -                                        ,
                         dpij                  dpij dpij     dpij dpij   dpij                     dpij

where the inequality follows from the fact that j is non-negative and increasing in pij for all pij  cj .
Note that i = (pri - ci )yi and j = (pij - cj )xij , where pri is the output price of firm i, yi is the quantity
demanded from firm i by its customer, and xij is the quantity demanded by i from j . Therefore, by
Shephard's lemma,
                                                                                           -2
                                                       3           dci             di
                                        gij (pij )  i yi                       j                hij (pij ),
                                                                   dpij            dpij

where
                                                                            
                                               2                                                                                               2
                                      d2 ci                dci        d3 ci                             dci             d2 ci          dci
   hij (pij ) = (pij - cj )2 2                     -                         + (pij - cj )                                      +                  (C.2)
                                      dp2ij                dpij       dp3ij                             dpij            dp2ij          dpij

Note that i  0 for all pij  [cj , p                                                      
                                   ij ]. Therefore, if hij (pij )  0 for all pij  [cj , pij ], it is then immediate
that gij (pij ) is increasing in pij and hence fij (pij ) = 0 has a unique solution in [cj , pij ]. It is therefore
sufficient to show that hij (pij )  0. We consider two separate cases.
   First, suppose the first term on the right-hand side of (C.2) is non-negative. In such a case,
hij (pij )  0 because the sum of the other two terms on the right-hand side of (C.2) is also non-negative:
                                                                                       2
                                                dci           d2 ci            dci             1 dci dj
                              (pij - cj )                              +                   =                 0,
                                                dpij          dp2ij            dpij            yi dpij dpij

where the inequality follows from the monotonicity of j established in Lemma C.1.
   Next, suppose the first term on the right-hand side of (C.2) is strictly negative. Note that, in such
a case, the right-hand side of (C.2) is concave in cj and is strictly positive when cj = pij . Therefore,
hij (pij ) is guaranteed to be non-negative for all pij  cj if the right-hand side of (C.2) is non-negative
when cj = 0. Hence, the proof is complete if h ^ ij (pij )  0, where
                                                                             
                                                   2                                                                                   2
             ^ ij (pij ) = p2 2        d2 ci                dci        d3 ci                    d2 ci         dci               dci
             h              ij                         -                      + pij                                       +                .       (C.3)
                                       dp2ij                dpij       dp3ij                    dp2ij         dpij              dpij

    kj
Let i  denote the Morishima elasticity of substitution between inputs j and k in firm i's production
technology, defined in footnote 23. Since firm i's cost function is homogenous of degree 1, one can
show that
                                               d2 ci       dci       1                kj       dci
                                                                =-                    i  pik        ,                                              (C.4)
                                               dp2ij       dpij    pij ci                      dpik
                                                                               k=j



                                                                          47
where the sum is over all inputs k = j (including labor input) of firm i and we are using the fact that

                                        kj              d2 ci         dci   d2 ci         dci
                                        i  = pij                           - 2                    .
                                                      dpij dpik       dpik  dpij          dpij

Differentiating equation (C.4) with respect to pij and rearranging terms implies that
                                                           2                               kj
                     d2 ci dci d3 ci                dci           pij               dci di      1            kj 2      dci
             p2
              ij    2 2 -                                       =               pik           +             (i ) pik
                     dpij  dpij dp3
                                  ij                dpij          ci                dpik dpij   ci                     dpik
                                                                          k=j                         k=j
                                                                                                                              (C.5)
                                                                          1   pij dci             kj        dci
                                                                  -          + 2                  i  pik         .
                                                                          ci   ci dpij                      dpik
                                                                                            k=j

                                                 ^ ij (pij ) in equation (C.3) implies that
Plugging (C.4) and (C.5) into the expression for h
                                         2
                   ^ (pij ) =    dci                    kj 2    d log ci    d log ci                  kj     d log ci
                   h                               (1 - i )               +                      (1 - i  )
                                 dpij                           d log pik   d log pij                        d log pik
                                             k=j                                           k=j
                                                                                                                              (C.6)
                                                                 2                             kj
                                                    d log ci                    d log ci di
                                             +                       +                              .
                                                    d log pij                   d log pik d log pij
                                                                          k=j

The fact that i's marginal cost is increasing in all input prices, alongside the assumption that jk  1,
guarantees that the second and third terms on the right-hand side of (C.6) are non-negative, while
inequality (14) guarantees that the sum of the first and the last term is also non-negative. Together,
                              ^ ij (pij )  0 for all pij , which completes the proof.
these observations imply that h

    Using the previous lemmas, our next result characterizes the outcome of pairwise bargaining
between i and j as   1, taking all other prices and the household's income as given.

Proposition C.1. Suppose inequality (C.1) is satisfied. Then, i and j reach an agreement in the pairwise
bargaining game. Furthermore, as   1, the agreement price converges to

                                                      pa
                                                       ij = min{p     ¯ij },
                                                                ^ij , p                                                       (C.7)

where p                                  pij ) = 0 in the interval [cj , p
      ^ij is the unique solution to fij (^                                         ¯ij = pb
                                                                          ij ] and p      j Aij /Bij .

Proof. The assumption that inequality (C.1) is satisfied guarantees that there are positive gains from
trade. Therefore, the two firms reach an agreement in the SPNE of the pairwise bargaining game.
    Next, we characterize the agreement price. Following standard arguments (say, as in Osborne and
Rubinstein (1990)), any SPNE of the pairwise bargaining game has a stationary structure, with firms
i and j respectively offering pij and pij in any subgame that they have the opportunity to propose a
price. Furthermore, the equilibrium price pair (pij , pij ) satisfies the following indifference conditions:

                                j (pij ) = ij j (pij ) +  (1 - ij )j (pij )
                                                                                                                              (C.8)
                                i (pij ) = max{ij i (pij ) +  (1 - ij )i (pij ), i (¯
                                                                                    pij )},

where recall that firm i always has the outside option of using the generic variant of the input produced
by firm j and obtain a profit of i (¯
                                    pij ).

                                                                     48
    To determine the agreement price as   1, note that the first indifference condition in (C.8)
guarantees that lim1 pij - pij = 0. Therefore, it is sufficient to determine pij as   1. Furthermore,
since i is monotone (Lemma C.1), the second indifference condition in (C.8) guarantees that the
agreement price can never exceed p
                                 ¯ij . Therefore, in what follows, we determine the agreement price
while ignoring the customer's outside option and then impose the condition that the agreement price
cannot exceed p
              ¯ij . Solving for pij from the two indifference conditions in (C.8) and equating the
solutions implies that

                         -1        ij                       -1   1 - ij
                         j                    j (pij )    = i               i (pij ) ,
                               1 -  (1 - ij )                     (1 - ij )

where recall from Lemma C.1 that i and j are strictly monotone in pij and are hence invertible. It is
then easy to verify that dividing both sides of the above equation by 1 -  and taking the limit as   1
reduces the above equation to equation (17). Therefore, as long as the customer's outside option does
not bind, the price in the subgame perfect Nash equilibrium of the bargaining game between i and j
is given by the solution to the equation fij (pij ) = 0, where fij is defined in (17). Crucially, Lemma C.3
                                                    ^ij in the interval [cj , p
guarantees that this equation has a unique solution p                          ij ]. Imposing the condition
that the agreement price cannot exceed the p
                                           ¯ij then establishes (C.7).


D    Online Appendix: Omitted Proofs
Proof of Theorem 8

Denote the greatest full equilibria corresponding to productivity levels A                ¯  and G ,
                                                                           ¯ij and Aij by G
                             ¯  and G are the greatest fixed points of mappings
respectively. By definition, G

                                                          ¯ij )  wzi }
                                 (G) = {i  G : i ({i}  G; A
                                 (G) = {i  G : i ({i}  G; Aij )  wzi },

respectively. Also define         ¯   {k1 }, A
                          ~ =  k (G          ¯ij )/wzk and = Aij /A
                                                                  ¯ij . By assumption, ~ < 1 and < 1.
                                1                     1

We start by stating and proving a series of lemmas.

Lemma D.1. For all s  1,

                                                 ¯  )  (s) (G
                                          (s-1) (G          ¯  ).                                     (D.1)

Proof. We prove the lemma using an inductive argument. To establish the induction base, note
that, by assumption, k (G¯  , A )  wzk for all k  G    ¯  . Therefore, G
                                                                       ¯   (G     ¯  ). Next, as the
                               ij
                                                                 ¯  )  (s) (G
induction hypothesis, suppose (D.1) holds for some s. Since (s) (G          ¯  ) and the mapping 
                                                                                         
                                                                                   ¯ )  ((s) (G
                                                                                              ¯ )      
satisfies Assumption A.1 (established as part of proof of Theorem 2), we have (s) (G
 (s-1) ¯       s+1 ¯ 
       (G )) =  (G ), thus completing the inductive argument.

Lemma D.2. For any < 1, there exists ( ) < 1 such that if                ¯ ) = G
                                                          ~ > ( ), then (G     ¯   {k1 }.

Proof. By Theorem 5(c), k (G  ¯   {k }, A )  k (G  ¯   {k }, A¯ij ) for any firm k that is either downstream
                                         ij
or horizontal to i. Therefore, if k  (G¯ )\G¯  , then k has to be upstream to j . But since the sequence of

                                                         49
firms (k1 , . . . , ks , j ) each have a single supplier, the only firm upstream to j that can make non-negative
profits is k1 , therefore establishing that (G      ¯ )  G  ¯   {k1 }.
                                                                             ¯   {k1 }, Aij ) is strictly
   Next, note that since k1 is upstream to j , Theorem 5(d) implies that k1 (G
                             ¯   {k1 }, A
decreasing in Aij . Since k (G                  ~ k , for any < 1, there exists a ( ) close enough to
                                        ¯ij ) = wz
                                 1                                       1

1 such that k1 (G¯   {k1 }, A )  wzk if                             ¯  ). Therefore, by equation
                                        ~ > ( ). Consequently, k1  (G
                             ij     1

       ¯   {k1 }  (G ).
(D.1), G

Lemma D.3. Suppose    ~ > ( ), where ( ) is defined in Lemma D.2. Then, there exist z
                                                                                    ~k0 such that if
                   ¯                         (2) ¯ 
     ~k , then y0 (G  {k0 , k1 }, Aij )  y0 ( (G ), Aij ).
zk < z
  0      0



Proof. The lemma immediately follows if G   ¯   {k0 , k1 } = (2) (G
                                                                  ¯  ). We therefore assume that G¯ 
                  ¯  ). In the previous lemma, we already established that, if 
{k0 , k1 } = (2) (G                                                            ~ > ( ), then (G ¯ ) =
¯   {k1 }. Since k0 is the only potential customized supplier of k1 , for small enough value of zk ,
G                                                                                                  0

         ¯  ). This, coupled with (D.1) implies that G
k0  (2) (G                                           ¯   {k0 , k1 } (2) (G¯  ).
   Consider an arbitrary k  (2) (G   ¯ ) \ G
                                           ¯   {k0 , k1 }. Since (2) (G
                                                                      ¯  )  (3) (G
                                                                                 ¯  )--guaranteed by
                            
                   ¯ ), A )  wzk . Hence,
Lemma D.2--k ((2) (G     ij

                                                                             ¯  ), A ) - wzk  0.
                                                                     k ((2) (G      ij
                                       ¯  )\G
                                 k(2) (G    ¯  {k0 ,k1 }

                                                                         ¯ ), A ).
                                            ¯  {k0 , k1 }, A )  y0 ((2) (G                          
Therefore, Theorem 4(b) guarantees that y0 (G               ij                 ij

Lemma D.4. There exist constants 2 < 1, A      ~k k , and z
                                                          ~k0 such that if ~  (2 , 1), Ak k > A
                                                                                              ~k k , and
                                                  1 0                                    1 0    1 0

                   ¯   ¯          ¯ 
     ~k , then y0 (G , Aij )  y0 (G  {k0 , k1 }, Aij ).
zk < z
  0      0



Proof. We start with the observation that since all production functions are Leontief and k2 k1 = 1,
                                                                       ¯          ¯
                              ¯         ¯             -1       -1 y0 (G  {k1 }, Aij )
                          k1 (G  {k1 }, Aij ) = ck1 (Bk2 k1 - Ak2 k1 )     ¯ij Au     ,
                                                                        Ad A
where ck1 is the marginal cost of firm k1 and Au and Ad are positive constants that only depend on the
productivities of active customized firms that are upstream and downstream to the pair (j, i) in G ¯ ,
respectively, as well as generic productivities. Next, note that aggregate output is given by
                                       
                                    ¯  {k1 }, A
                                              ¯ij ) =                 L - zk1 - kG    ¯  zk
                               y0 ( G                                                           ,                         (D.2)
                                                                 ~-1 + (Ad A
                                                                 A         ¯ij Au Ak k w/ck )-1
                                                                                    2 1     1


      ~ is a positive constant that only depends on productivities of active customized firms that are
where A
either downstream or horizontal to j and the generic productivities. Solving for zk1 from the above
equations and using the definition of ~ imply that
                                                                               -1
                                 zk1                                    ck1 (Bk 2 k1
                                                                                     - A- 1
                                                                                        k2 k1 )
                                                  =         -1
                                                                                                           .              (D.3)
                         L-        ¯
                                  kG
                                             zk       ck1 (Bk        - (1 -  ~)A-1 ) + wA ~ dA  ¯ij Au A
                                                                                                       ~-1
                                                              2 k1               k1 k2

                                                                             ¯ , A
      On the other hand, using expressions similar to equation (D.2) for y0 (G                 ¯ 
                                                                                 ¯ij ) and y0 (G
{k0 , k1 }, Aij ) implies that
          ¯   {k0 , k1 }, A )
      y0 (G                            L - zk1 - zk0 - kG   ¯  zk                    ~-1 + (Ad A
                                                                                     A           ¯ij Au Bk k w/ck )-1
                           ij                                                                               2 1     1
                   ¯          =                                                                                           .
                ¯
            y0 (G , Aij )                   L - k G   ¯  zk                        ~-1 + (Ad Aij Au Ak k Ak k w/ck )-1
                                                                                   A                    2 1     1 0   0




                                                                       50
As a result,
                            ¯   {k0 , k1 }, A )
                        y0 (G                                                  zk1                      ck1 Bk-1
                                             ij                                                                2 k1
               lim       lim                    =                1-                           1+                         .
          Ak1 k0  zk0 0           ¯ , A
                              y0 (G   ¯ij )                           L-          ¯  zk
                                                                                k G
                                                                                                          ¯ij Au A
                                                                                                      wAd A        ~-1

The proof is complete once we show that there exists 2 < 1 such that if        ~  (2 , 1), the right-hand
side of the above equation is greater than or equal to 1. Equivalently, it is sufficient to show that for ~
sufficiently close to 1,
                                                                                -1
                                              zk 1                         ck1 Bk 2 k1
                                                                   -1
                                                                                              .
                                        L-      ¯  zk
                                               kG             ck1 Bk       + wA ~-1 Ad A
                                                                                       ¯ij Au
                                                                    2 k1


Replacing for the right-hand side of the above inequality from equation (D.3) immediately implies that
the inequality is satisfied for ~ close enough to 1.


Proof of part (a) By Lemma D.2, there exists ( ) < 1 such that if     ~ > ( ), then G¯      (G¯  ). Thus,
for any Aij < A                  ¯  , A )  wzk for all k  G
                ¯ij such that k (G                         ¯  , there exists  < 1, such that if k (G ¯ 
                                        ij                                                        1

                          ¯  (G
       ¯ij ) > wzk , then G
{k1 }, A                          ¯  ). Furthermore, by equation (D.1), (G¯  )  (2) (G
                                                                                     ¯  ), which implies
                     1

      ¯  )  X , where X = {G  G : G  (G)}. Therefore, (G
that (G                                                ¯ )                                                          G , where the
                                                                                                       GX G =
equality follows from part (c) of Theorem A.1. Thus, it must be the case that G                        ¯    
                                                                                                              G .


Proof of part (b)  Let 3 = max{1 ( ), 2 } < 1, where 1 ( ) and 2 are defined in Lemmas D.3 and D.4,
                                                                               ~k k and z
respectively. The juxtaposition of Lemmas D.3 and D.4 implies that there exist A        ~k0 such that
                                                                                 1 0

        ~                   ~
as long   (3 , 1), Ak k > Ak k , and zk < z
                                          ~k , then
                           1 0          1 0          0    0



                                      ¯ , A
                                  y0 (G                                            ¯  ), A ).
                                                     ¯   {k0 , k1 }, A )  y0 ((2) (G
                                          ¯ij )  y0 (G                                                                       (D.4)
                                                                      ij                  ij

                                              
                                  ¯ )  X = {G  G : G  (G)}. Thus, by part (c) of Theorem A.1,
On the other hand, by (D.1), (2) (G
 (2) ¯ 
 (G )  G . Furthermore, since G is a fixed point of , all firms k  G make non-negative profits
             

                                                                            
under productivity Aij , and in particular,                       ¯  ) (k (G , Aij ) - wzk )
                                                         kG \(2) (G                                     0. Therefore, part (b) of
Theorem 4 implies that
                                                          
                                                       ¯ ), A )  y0 (G , A ).
                                              y0 ((2) (G     ij           ij

                                                                      ¯ , A
The juxtaposition of the above inequality with (D.4) implies that y0 (G   ¯ij )  y0 (G , Aij ).


Aggregate Impact of Productivity Shocks

Our next result is a counterpart to Theorem 9 and provides a decomposition of the aggregate impact
of a productivity shock.

Theorem D.1. Consider a reduction in increase from Aij to A   ¯ij for a supplier-customer pair of firms
               ¯  and G denote the production networks in the greatest full equilibria under A
(j, i) and let G                                                                             ¯ij and Aij ,
                               
                    ¯ , then the change in aggregate output is given by
respectively. If G  G

                                         GDP =  GDP                        +  GDP                 ,                          (D.5)
                                                               G fixed                ¯ij fixed
                                                                                      A


                                                                 51
where
                                             ¯ij , G ) - GDP(Aij , G )  0
                           GDP|G fixed = GDP(A
                                                               ¯ij , G )  0.
                                                     ¯ ) - GDP(A
                                               ¯ij , G
                           GDP|A
                               ¯ij fixed = GDP(A

Proof. The decomposition in (D.5) follows immediately from the definitions of  GDP|A
                                                                                   ¯ij fixed and
 GDP |G fixed . It is therefore sufficient to show that both of these terms are non-negative. The fact that
 GDP|G fixed  0 follows from Theorem 5(b): holding the set of active firms constant, an increase in
                         ¯ij increases aggregate output. To show that  GDP| ¯
productivity from Aij to A                                                        0, note that, by
                                                                                   Aij fixed
assumption, G  G   ¯  . Furthermore, since G
                                           ¯  is part of an equilibrium, all active firms j  G
                                                                                             ¯  make
                                                  ¯ij . Therefore,
non-negative net profits when the productivity is A
                                                       ¯  ) - wz )  0.
                                                 ¯ij , G
                                             (j (A              j
                                        
                                      ¯ \G
                                    j G

                                   ¯ij , G )  GDP(A
Consequently, by Theorem 4(b), GDP(A                    ¯  ), thus implying that  GDP| ¯
                                                  ¯ij , G
                                                                                      Aij fixed is
non-negative.

                                                ¯  guarantees that a positive productivity shock
   In the above theorem, the assumption that G  G
results in fewer failures. However, recall from Theorem 8 that, depending on the production network,
positive productivity shocks may also increase failures. In such a case, the second term on the right-
hand side of (D.5) may no longer be unambiguously positive.

Proof of Theorem 10(a)

We first show that, given a non-negative level of aggregate demand y0 , there always exists a unique set
of generic and customized quantities that clear all commodity markets.
   First, we show that all customized quantities are proportional to y0 . This follows immediately from
Assumption 1 (which guarantees that any feasible production network G  G has no cycles) and
the assumption that all production technologies have constant returns. Therefore, the output of any
customized firm ia is given by yi
                                a =  y , for some constant  that depends on G, the vector of prices
                                    i 0                    i
(pa , pb ), and customized productivities, but is independent of all quantities.
   Next, consider generic quantities.      Since customized quantities are proportional to y0 , each
customized producer's demand from a generic producer j b is also proportional to y0 . Therefore,
market clearing for generic good j b is given by
                                                              n
                                            b
                                           yj   =  j y0 +           xb
                                                                     ij ,
                                                             i=1

where xb                                                b      b
       ij is the quantity demanded by generic producer i from j , j y0 is equal to the total demand for
j b 's output from all customized firms in the economy, and j is a constant that only depends on prices
and productivities. Multiplying both sides of the above equation by pb
                                                                     j /y0 and using the Shephard's
lemma implies that
                                                             n
                                           j =   j pb
                                                    j   +          ij i ,                            (D.6)
                                                             i=1


                                                        52
where j = pb  b              b b       b    b         b                                                b
           j yj /y0 , ij = (pj /pi )(dci /dpj ), and ci denotes the marginal cost of generic producer i . It is
immediate that matrix  = [ij ] is element-wise non-negative. Furthermore, Euler's Theorem implies
that the row sums of  satisfy
                                         n                       n
                                                    1                     dcb  cb
                                             ij =                    pb
                                                                      j
                                                                            i
                                                                                i
                                                                                   = 1,
                                      j =1
                                                    pb
                                                     i       j =1
                                                                          dpb
                                                                            j  p b
                                                                                 i


where the last equality follows from marginal cost pricing of generic producers.               Crucially, the
assumption that labor is a direct or indirect essential input for production of all goods guarantees
that, for any given i, either (i) the inequality above holds strictly or (ii) there is a directed path from
some j to i such that the inequality holds strictly for j . This therefore guarantees that the spectral
radius of  is strictly less than 1, and hence I -  is an M-matrix. Consequently, there exists a unique
non-negative vector  that satisfies system of equations (D.6). Therefore, all generic quantities are also
                                         b =  y /pb .
proportional to y0 , and in particular, yj   j 0 j
   So far, we showed that given aggregate demand y0 , there always exists a unique collection of
quantities that satisfy market clearing for all (generic and customized) goods in the economy. The
proof is therefore complete once we show that there exists a unique y0 that satisfies labor market
clearing. An argument similar to the one in the previous two paragraphs implies that the labor
demand by all (generic and customized) firms in the economy is necessarily proportional to y0 . In
particular, there exist constants ^ i and                                             a =
                                          ^i independent of all quantities such that li              b =
                                                                                         ^ i y0 and li  ^i y0 .
Therefore, labor market clearing implies that

                                             ^ i y0 +            ^i y0 = L -
                                                                                      zia .
                                     i G
                                     a
                                                         i   b                  i G
                                                                                 a



Since production network G is feasible by assumption, there exists a unique and non-negative y0 that
satisfies labor market clearing.

Proof of Theorem 10(b)­(d)

We prove the remaining parts of Theorem 10 by showing that, in any bargaining equilibrium, the
vector of equilibrium prices (pa , pb ) has to satisfy the system of equations described by equations (15)­
(17), that such a system of equations always has a solution, and that there exists a unique vector pb that
solves equation (15). Since the vector of generic prices pb is determined independently of customized
prices, we first focus on characterizing these prices and establish their existence and uniqueness. We
then turn to the vector of customized prices pa .


Generic prices:    Since generic producers are competitive, the price charged by any generic producer
always coincides with its marginal cost, irrespective of whether it supplies to customized, generic, or
final good producers. Thus, the vector of generic prices pb = (pb            b
                                                                1 , . . . , pn , w ) is part of a bargaining
equilibrium if and only if it satisfies the system of equations

                                                        pb        b
                                                         i = ci (p ),                                    (D.7)



                                                                     53
where the function ci (pb ) is the marginal cost of generic producer ib as a function of the all generic
prices.31 This establishes equation (15).
       We next show that this system of equations always has a strictly positive solution. Since all
production functions are homogenous of degree 1, we can renormalize the vector of generic prices
                                                                             n
such that it falls within the unit simplex n , i.e., w +                          b
                                                                             i=1 pi   = 1. Let  : n  n denote the
mapping

                                                               ci (pb )
                                                 i (pb ) =                    .
                                                             w+ n          b
                                                                 j =1 cj (p )

Brouwer's fixed point theorem guarantees that  has at least one fixed point inside the unit simplex
n . Thus, there exists a vector of generic prices pb that solves the system of equations (15).
       To show that any solution pb to the system of equations (D.7) is strictly positive, suppose to the
contrary that there exists pb = c(pb ) such that pb                                b
                                                  i = 0 for some generic producer i . This implies that
(i) labor is not an essential input for the production technology of ib and (ii) pb
                                                                                  j = 0 for all generic
producers j b that are essential for the production technology of ib . This in turn implies that labor
cannot be an essential input for the production technology of all producers j b that are essential for
the production technology of ib . Iterating this argument over the network thus implies that labor is
neither directly nor indirectly an essential input for production technology of ib , which contradicts
Assumption 3 . Thus, any solution pb to the system of equations (D.7) must be element-wise strictly
positive.
       Finally, we establish that, in any bargaining equilibrium, the vector of generic prices is unique
(up to a scaling). Suppose to the contrary that there are two distinct vectors of generic prices pb =
(pb            b           ~ b = (~
  1 , . . . , pn , w ) and p      pb          ~b
                                   1, . . . , p n , w ) that satisfy system of equations (D.7), where note that we are
normalizing the price vectors such that the wage w is the same. As we already established, pb  ~b
                                                                                            i, pi > 0
for all ib . Let  = mini pb  ~b
                          i /p i . We consider two separate cases depending on whether   1 or  > 1.
                                                            ~b
First, suppose   1. By definition, it must be the case that p    b          b
                                                             j  pj for all j and that that there exists
ib such that p
             ~b    b
              i = pi . Hence,


               0 = ci (pb            b          b
                                                       ~b
                        1 , . . . , pn , w ) - pi  ci (p             ~b
                                                         1 , . . . , p
                                                                                  b
                                                                                          ~b
                                                                       n , w ) - pi = ci (p             ~b
                                                                                            1 , . . . , p           ~b
                                                                                                          n , w ) - pi,       (D.8)

                                                                                  ~b
where the inequality is a consequence of the monotonicity of ci and the fact that p     b          b
                                                                                    j  pj for all j .
Since   (0, 1] and ci is concave, the above inequality implies that

                       ~b
                0  ci (p            ~b
                        1 , . . . , p          ~b
                                     n , w ) - p        pb
                                                 i  ci (~           ~b
                                                         1, . . . , p                                         ~b
                                                                      n , w ) + (1 - )ci (0, . . . , 0, w ) - p i
                                                                                                                              (D.9)
                  = (1 - )ci (0, . . . , 0, w)  0,

                                                             ~ b satisfies (D.7). This implies that
where the equality is the consequence of the assumption that p
all inequalities in (D.8) and (D.9) have to hold as equalities. In particular, ci (0, . . . , 0, w) = 0 and
ci (pb            b             ~b
     1 , . . . , pn , w ) = ci (p             ~b
                                  1 , . . . , p n , w ). The first equality implies that labor is not an essential input
for generic producer ib , whereas the second equality implies that p
                                                                   ~b    b          b
                                                                    j = pj for all j that are essential
  31
   In particular, ci (pb ) = CI (w, pb                 b
                                     1 /Bi1 , . . . , pn /Bin ), where for notational simplicity, we have suppressed the productivity
shocks.



                                                                 54
inputs for ib .32 But now we can iterate the above argument for all j b that are essential for ib , which in
turn implies that labor is not an essential input for any industry, thus contradicting Assumption 3 .
       Next, we consider the case that  > 1, which implies that pb  ~b
                                                                 i  p
                                                                                b              ~b
                                                                     i for all i . Let  = mini p
                                                                                                     b
                                                                                                 i /pi . It
                                                                                    ~ b and pb and
is immediate that  < 1. Now, repeating the same exact steps as above while swapping p
replacing  by  results in a contradiction with Assumption 3 .
       Taken together, the above paragraphs establish that the vector of generic prices in any bargaining
equilibrium exists, is unique, and is characterized by the unique solution to the system of equations
(15).


Customized prices:             We now turn to customized prices. In what follows, we rely on a series of lemmas
stated and proved in Online Appendix C, which characterizes the solution of pairwise bargaining
between customized firms.
       Let G denote a feasible production network of active firms. For any supplier-customer pair of
                                       ¯ij = pb
active customized firms (j, i)  G, let p      j Aij /Bij denote the price that makes the customer firm
i indifferent between the generic and customized variants of the good produced by industry J . Also,
define the collection of prices (pij )(j,i)G recursively over the network G such that all customized firms
make zero profits (gross of fixed costs of operation).33 Finally, let P =                               (j,i)G [pij , pij ]   and define the
mapping  : P  P as
                                     
                                     cj
                                                                   if i (cj ) < 0
                                     
                           ij (pa ) = p
                                      ^ij                                                   ¯ij , p
                                                                   if i (cj )  0 , fij (min{p      ij }) < 0 ,                          (D.10)
                                     
                                          ¯ij , p                                              ¯ij , p
                                     min{p
                                                 ij }              if i (cj )  0 ,    fij (min{p      ij })    0

where cj is the marginal production cost of firm j , fij is the function defined in (17), pij is the price at
which firm i makes zero profits (i.e., i (pij ) = 0), and p
                                                          ^ij is the solution of equation fij (pij ) = 0 in the
interval [cj , p     34                                                                          
                ij ]. In Lemma C.2, we establish that there is indeed a unique pij such that i (pij ) = 0 and
that the interval [cj , p                                                                   ^ij  [cj , p
                         ij ] is non-empty, whereas Lemma C.3 establishes the uniqueness of p           ij ]
that solves fij (^
                 pij ) = 0.
       We make two observations about the mapping defined in (D.10). First we establish that

                                                           ij (pa )  cj (pa
                                                                          -ij )                                                         (D.11)

for any price vector pa  P and any (j, i)  G. To establish this claim, we consider three separate
cases. First, supposes that i (cj ) < 0, in which case (D.10) implies (D.11). As the second case,
                                     ¯ij , p
suppose that i (cj )  0 and fij (min{p                             a
                                            ij }) < 0. Hence, ij (p ) = p
                                                                        ^ij , which, by Lemma
               ^ij  [cj , p
C.2, satisfies p           ij ], thus once again guaranteeing (D.11). Finally, suppose i (cj )  0 and
         ¯ij , p
fij (min{p      ij })  0. The monotonicity of i (established in Lemma C.1) coupled with the fact that
  32
     In particular, note that pb and p    ~ b are strictly positive. Therefore, if the inequality p     ~b     b
                                                                                                         j  pj holds strictly for some essential
        b                                                             b     b               b              b
input j , then, by definition, it must be the case that ci (p1 , . . . , pn , w) > ci (p   ~1 , . . . , p~n , w), which contradicts the fact that
(D.8) has to hold as an equality.
  33
     In other words, vectors (¯      pij )(j,i)G and (pij )(j,i)G are the prices that would have prevailed had the suppliers and
customers had all the bargaining power in all pairwise relationships, respectively.
  34
     Note that p      ^ij , and cj all depend on the vector p = (pa , pb ). We suppress this dependence for notational simplicity.
                 ij , p




                                                                      55
i (cj )  0 = i (p                          
                 ij ) guarantees that cj  pij . On the other hand, note that j 's marginal cost can never
exceed pb   b
        j  pj Aij /Bij = p
                         ¯ij , thus ensuring that cj  p                    ¯ij , p
                                                      ¯ij . Hence, cj  min{p                  a
                                                                                  ij } = ij (p ).
   As our second observation, we note that the mapping  in (D.10) is continuous in pa and maps
the convex and compact set P to itself. Therefore, by the Brouwer's fixed point theorem, there exists a
vector pa  P such that pa =  (pa ). In the remainder of the proof, we show that given any fixed point
pa of  , the tuple (pa , pb ) corresponds to a bargaining equilibrium of production network G, where pb
is the unique vector of generic prices that solves the system of equations (15). In particular, we show
that, under (pa , pb ), no customized producer has an incentive to unilaterally deviate, either by making
a different offer, taking the outside option, or terminating an agreement.
   Consider a fixed point pa =  (pa ). By inequality (D.11), pa         a
                                                              ij = ij (p )  cj . Thus, under the
candidate price vector pa , all customized firms make non-negative profits. This implies that no active
firm j has an incentive to terminate its relationship with its downstream customer i. Similarly, the fact
that pa is a fixed point of (D.10) guarantees that no customer firm i has an incentive to replace any
of its customized suppliers with the corresponding generic variant. Therefore, it is sufficient to show
that, given the price vector pa , neither the customer nor the supplier has an incentive to enter into a
bargaining process. But this is an immediate consequence of Proposition C.1. In particular, recall that
inequality (D.11) implies that any fixed point of  satisfies pa         a        a
                                                              ij = ij (p )  cj (p-ij ) for any pair of firms
(j, i), which in turn guarantees that inequality (C.1) is satisfied. This implies that the price in any fixed
point of  satisfies
                                      p
                                      ^ij                            ¯ij , p
                                                         if fij (min{p      ij }) < 0
                             pa
                              ij =                                                      .              (D.12)
                                          ¯ij , p
                                      min{p      ij }                ¯ij , p
                                                         if fij (min{p      ij })  0

Note that the above equation can be further simplified. In particular, the juxtaposition fij (pij ) < 0
(established in the proof of Lemma C.2) with the fact that fij crosses zero only once in the interval
[cj , p                                                                         a
       ij ] (established in Lemma C.3) guarantees that (D.12) is equivalent to pij = min{p     ¯ij }. But this
                                                                                         ^ij , p
is identical to equation (C.7), which characterizes the outcome of pairwise bargaining between i and j .
Therefore, under any fixed point of  , the price pa
                                                  ij coincides with the outcome of pairwise bargaining,
implying that any fixed point of  is a vector of customized prices in a bargaining equilibrium.

Proof of Theorem 11

We first state two simple lemmas, which are invoked repeatedly throughout. We then present a
sequence of results, which together establish Theorem 11. Since the statements of the results and
their proofs are very similar to our main results for Leontief production technologies, we only present
the counterparts to Theorems 2, 4, and 6. Throughout, we assume that Assumptions 1, 2, and 3 are
satisfied and that, in all pairwise interactions, the supplier has all the bargaining power, i.e., ij = 1 for
all supplier-customer pairs (j, i).

Lemma D.5. For any feasible production network G, there is a unique pricing equilibrium (pa , pb ).
Furthermore, ca    b                a     b
              i = pi for all i and pij = pj Aij /Bij for any supplier-customer pair (j, i)  G.

                  ¯ denote two feasible production networks and let i = i /y0 denote the (gross)
Lemma D.6. Let G  G
profit share of firm i as a fraction of real value added. Then,

                                                        56
(a) ca        a ¯
     i (G) = ci (G) for all i  G.

(b) pa         a ¯
     ij (G) = pij (G) for all (j, i)  G;

               ¯ ) for all i  G.
(c) i (G) = i (G

Proof. Statements (a) and (b) of the lemma are immediate consequences of Lemma D.5 and the fact
that generic prices pb are determined independently of the set of active customized firms. Statement
(c) then follows from the previous parts and the assumption that all production technologies exhibit
constant returns.

                                               ¯  G denote two feasible production networks such
Theorem D.2 (Counterpart to Theorem 4). Let G, G
        ¯ . Then,
that G  G

                 ¯ ) for all i  G;
(a) µi (G) = µi (G

                                                     ¯ );
(b) if condition (8) is satisfied, then y0 (G))  y0 (G

                                                  ¯ ) for all i  G.
(c) if condition (8) is satisfied, then i (G)  i (G

Proof. Statement (a) is an immediate consequence of Lemma D.5. To prove statement (b), note that
the representative household's budget constraint implies that

                                          ¯ ) = wL +
                                      y0 (G                         ¯ ) - wzj )
                                                                (j (G
                                                            ¯
                                                          j G

                                      y0 (G) = wL +            (j (G) - wzj ).
                                                          j G

Therefore,

         ¯ ) - y0 (G) =
    y0 ( G                      ¯ ) - j (G)) +
                            (j (G                          ¯ ) - wzj ) 
                                                       (j (G                            ¯ )y0 (G
                                                                                     j (G      ¯ ) - j (G)y0 (G) ,
                          j G                      ¯ \G
                                                 j G                          j G


where the inequality follows from condition (8). On the other hand, Lemma D.6 guarantees that
   ¯ ) = i (G) for all i  G. As a result,
i (G
                                                                           
                                         ¯ ) - y0 (G) 1 -
                                     y0 (G                             j (G)  0.
                                                                 j G

Since customized firms' profit shares always add up to a number strictly less than 1, the above
                               ¯ )  y0 (G). Finally, to establish statement (c), note that
inequality guarantees that y0 (G

                                                         ¯ )y0 (G
                                 i (G) = i (G)y0 (G)  i (G      ¯ ) =  i (G
                                                                          ¯)

                                                       ¯ ) as established in Lemma D.6.
for all i  G, where once again we are using i (G) = i (G

Theorem D.3 (Counterpart to Theorem 2). For any network G of technological compatibilities,

(a) a full equilibrium exists;

                                                          57
(b) the set of full equilibria has a greatest element with respect to the set inclusion order;

(c) aggregate output in the greatest full equilibrium is higher than that of all other full equilibria.

Proof. As in the proof of Theorem 2, it is sufficient to establish that mapping  : 2G  2G , defined as

                                    (G) = {i  G : i ({i}  G)  wzi }                                           (D.13)

satisfies Assumptions A.1 and A.2. Theorem A.1 then implies all three statements of Theorem D.3.
   To establish that  satisfies Assumption A.1, take two production networks G1 and G2 and suppose
that G1  (G2 ). Hence, i (G2  {i})  wzi for all i  G1 . Therefore,

                            i (G2  {i})y0 (G2  {i})  wzi            for all i  G1 .

Furthermore, the household's budget constraint implies that

                 y0 (G2  {i}) = wL + y0 (G2  {i})                j (G2  {i}) -              wzj .
                                                      j G2 {i}                   j G2 {i}

The juxtaposition of the last two equations leads to
                                                                    
                                i (G2  {i})
                    zi                           L -              zj       for all i  G1 .
                          1 - j G2 j (G2  {i})
                                                           j G2

On the other hand, Lemma D.6 guarantees that j (G2  {i}) = j (G1 G2 ) for any pair i and j such
that j  G2 {i} and all i  G1 . Therefore,
                                                                    
                                 i (G1  G2 )
                     zi                           L -             zj       for all i  G1 .                    (D.14)
                           1-    j G2 j (G1  G2 )          j G2

Next, consider the economy in which the set of active firms is instead G1  G2 . In this case, firm
i's gross profit is given by i (G1  G2 ) = i (G1  G2 )y0 (G1  G2 ). Therefore, solving for y0 from the
household's budget constraint in this economy and plugging it back into the expression for i (G1  G2 )
leads to
                                                                                       
                                             wi (G1  G2 )
               i (G1  G2 ) - wzi =                                  L -               zj  - wzi
                                      1-     j G1 G2  j ( G1  G 2 )
                                                                            j G1 G2

for all i  G1 . Consequently, the upper bound on zi in (D.14) implies that

                                                  L-      j G1 G2 zj                  L-     j G2 zj
    i (G1  G2 ) - wzi  wi (G1  G2 )                                         -                                  .
                                            1-     j G1 G2   j (G1  G2 )        1-    j G2   j (G1  G2 )

Simplifying the right-hand side of the above inequality, we obtain,
                                                                                                                      
                            wi (G1  G2 )                       j ( G1  G 2 )
i (G1  G2 ) - wzi                                j G1 \G2                    L -                  zj  -              zj 
                      1 - j G1 G2 j (G1  G2 ) 1 - j G2 j (G1  G2 )
                                                                                           j G2           j G1 \G2


                                                     58
for all i  G1 . On the other hand, summing both sides of inequality (D.14) over all i  G1 \ G2
guarantees that the right-hand side of the above inequality is non-negative. Therefore, i (G1  G2 ) 
wzi for all i  G1 , and hence, G1  (G1  G2 ). Thus, mapping  in (D.13) satisfies Assumption A.1.
   Next, we establish that mapping  also satisfies Assumption A.2. To this end, let G1 , G2  G denote
a pair of feasible production networks such that Gk  (Gk ) for k  {1, 2}. By definition, Gk  (Gk )
implies that i (Gk ) = i (Gk )y0 (Gk )  wzi for all i  Gk . Solving for y0 (Gk ) from the household's
budget constraint

                               y0 (Gk ) = wL +             j (Gk )y0 (Gk ) - wzj
                                                   j Gk

therefore implies that
                                                                               
                                                i (Gk )
                                    zi                       L -              zj 
                                          1-    j Gk j (Gk )          j Gk

for all i  Gk . Furthermore, recall from Lemma D.6 that i (Gk ) = i (G1  G2 ) for all i  Gk . Hence,
                                                                        
                                         i (G1  G2 )
                              zi                         L -         zj                          (D.15)
                                    1 - j Gk j (G1  G2 )
                                                                            j Gk

for all i  Gk . Setting k = 1 and summing over all i  G1 \ G2 implies that
                                                                                                            
                 zj  1 -           j (G1  G2 )  L -                      zj                   j (G1  G2 ).            (D.16)
      j G1 \G2             j G1 G2                             j G1 G2             j G1 \G2

Similarly, setting k = 2 in (D.15) and summing over all i  G2 \ G1 implies that
                                                                                                            
                 zj  1 -           j (G1  G2 )  L -                      zj                   j (G1  G2 ).            (D.17)
      j G2 \G1             j G1 G2                             j G1 G2             j G2 \G1

Next, consider the profit i (G1  G2 ) of an arbitrary firm i  G1 when the production network of active
firms is G1  G2 . Once again, solving for household demand from her budget constraint and plugging
it back to firm i's profit function implies that
                                                                                    
                                     wi (G1  G2 )
     i (G1  G2 ) - wzi =                                 L -                   zj  - wzi
                             1-      j G1 G2 j (G1  G2 )             j G1 G2

                                                     L-        j G1 G2 zj                     L-      j G1 zj
                            wi (G1  G2 )                                           -
                                                1-    j G1 G2     j (G1  G2 )          1-      j G1   j (G1  G2 )

for all i  G1 , where the inequality is a consequence of (D.15). Simplifying the right-hand side of the
above inequality therefore implies that i (G1  G2 ) - wzi  0 for all i  G1 as long as Q > 0, where
                                                                                          

        Q = L -            zj                j (G1  G2 ) - 1 -               j (G1  G2 )                      zj  .
                    j G1          j G2 \G1                           j G1                          j G2 \G1



                                                          59
By inequality (D.17), we have
                                                                                                         
                          L-       j G1 zj
  Q               zj                               1 -            j (G1  G2 ) - 1 -             j (G1  G2 ) ,
                         L-      j G1 G2 zj
           j G2 \G1                                      j G1 G2                         j G1

and as a result
                                                                                                                    
             j G2 \G1 zj
Q                             L-              zj               j (G1  G2 ) - 1 -          j (G1  G2 )           zj  .
        L-     j G1 G2 zj         j G1 G2             j G1 \G2                      j G1 G2              j G1 \G2

Now (D.16) guarantees that the right-hand side of the above inequality is non-negative. Therefore,
we just established that i (G1  G2 ) - wzi  0 for all i  G1 . An identical argument establishes that
i (G1  G2 ) - wzi  0 for all i  G2 .
   Consequently, we just established that i (G1  G2 ) - wzi  0 for all i  G1  G2 , or equivalently,
G1  G2  (G1  G2 ) for any arbitrary pair of feasible production networks G1 and G2 such that
G1  (G1 ) and G2  (G2 ). This implies that Assumption A.2 is satisfied.

Theorem D.4 (Counterpart to Theorem 6). In the economy's greatest full equilibrium, an increase in
firm-level fixed costs

(a) shrinks the set of active firms;

(b) lowers aggregate output;

(c) reduces profits of all surviving firms.

Proof. To establish part (a), let z
                                  ¯ and z denote two vectors of fixed costs such that z i  z
                                                                                           ¯i for all firms
i  G . Define the mappings ,  : 2G  2G as

                                       (G) = {i  G : i ({i}  G)  wz
                                                                  ¯i }
                                       (G) = {i  G : i ({i}  G)  wz i }.

It is immediate that the fixed points of  and  correspond to full equilibria of the economies with
fixed costs given by z
                     ¯ and z , respectively. Furthermore, recall from the proof of Theorem D.3 that 
and  satisfy Assumptions A.1 and A.2. Therefore, by Theorem A.1, both mappings have a greatest
                                                               ¯  and G are also the greatest full
                                ¯  and G , respectively. Thus, G
fixed point, which we denote by G
equilibria of the economies with fixed costs z
                                             ¯ and z , respectively. On the other hand, the fact that
zi  z
    ¯i for all i  G implies that (G)  (G) for all G  G . Therefore, Corollary A.1 guarantees that
¯ 
G  G . This establishes that increasing the vector of fixed costs shrinks the set of active firms in the
economy's greatest full equilibrium.
                                         ¯  and G denote the corresponding greatest full equilibria
   To establish part (b), once again let G
in the economies with fixed costs z
                                  ¯ and z , respectively. The household's budget constraint in the two
economies is given by

                                       y0 (¯
                                           z ) = wL +               ¯  ) - wz
                                                                 k (G       ¯k
                                                          ¯
                                                         kG

                                       y0 (z ) = wL +            k (G ) - wz k .
                                                         kG



                                                          60
Since G is a full equilibrium, all active firms in the economy make positive net profits, i.e., k (G ) 
wzk for all k  G . Therefore,
                                                                                                                       
              y0 (z ) - y0 (¯
                            z)            k (G ) - wz k -                ¯ ) - wz
                                                                      k (G      ¯k              k (G ) - k (G
                                                                                                            ¯ ) ,
                                   ¯                            ¯                         ¯  
                                  kG                          k G                       k G

                                                             ¯   G and the second inequality follows
where the first inequality is a consequence of the fact that G
from the assumption that z k  z
                              ¯k . Denoting firm k 's profit share by k , we have

                   y0 (z ) - y0 (¯
                                 z)                               ¯  )y0 (¯
                                               k (G )y0 (z ) - k (G       z )  (y0 (z ) - y0 (¯
                                                                                              z ))           k (G ),
                                        ¯                                                             ¯   
                                       kG                                                            kG

                                                                     ¯
where the second inequality follows from Lemma D.6 and the fact that G                                             G .    Since
      ¯
    k G
              k   (G )                                                                  z ).
                         < 1, the above inequality therefore implies that y0 (z ) > y0 (¯
                                                                                              ¯ under the two  
         Finally, to establish part (c) of the theorem, note that the gross profit of firm k  G
fixed costs is given by

                                                k (z ) - wz k = k (G )y0 (z ) - wz k
                                                                       
                                                                  ¯ )y0 (¯
                                                   z ) - wz
                                                k (¯      ¯k = k (G      z ) - wz
                                                                                ¯k .

Therefore,

                           (k (z ) - wz k ) - (k (¯
                                                  z ) - wz         ¯  )(y0 (z ) - y0 (¯
                                                         ¯k ) = k (G                           zk - z k ),
                                                                                      z )) + w(¯

                                                          ¯   G . Part (b) of the theorem
where we are once again using Lemma D.6 and the fact that G
guarantees that y0 (z ) > y0 (¯                      ¯k  z k . Therefore, the right-hand side of the above
                              z ) and by assumption, z
equation is always positive.


E         Online Appendix: Data Appendix

In this appendix, we provide details on the data used in constructing Figure 1 as well as additional
empirical exercises that confirm the pattern documented by that figure. Our data are drawn from the
Business Dynamics Statistics (BDS) dataset from the Census Bureau (2016 release). This database is
based on administrative records of U.S. firms covering the period from 1977 to 2014. BDS reports data
both for firms and establishments. We use BDS reports on aggregate data by year as well as more
detailed data by year, sector, and age.35
         When working with aggregate data, we measure the exit rate in year t as the count of firms or
establishments that have ceased operations between years t - 1 and t divided by the average of the
total number of firms or establishments in years t - 1 and t.
         When working with the detailed data, we compute firm exit rate as follows, with the establishment
exit rate defined analogously. For firms aged 0­5 years, the exit rate in sector s at age a in year t is the
ratio of the number of firms that exit within sector s and age group a between years t - 1 and t divided
    35
    Firms and establishments are classified into nine sectors: agricultural services, forestry, and fishing; manufacturing;
construction; mining; transportation and public utility; wholesale trade; retail trade; finance, insurance, and real state; and
services.


                                                                 61
                                                                      2

 14

                                                                      1


 12
                                                                      0



 10
                                                                    -1




  8                                                                 -2
          1980 1985 1990 1995 2000 2005 2010 2015                          1980 1985 1990 1995 2000 2005 2010 2015

                      (a) raw data                                                   (b) HP-filtered data

           Figure E.1. Annual Establishment Exit Rate in the United States over the Business Cycle

Source: Business Dynamics Statistic, United States Census Bureau.
Notes: The figure depicts the annual exit rate of establishments in the U.S. between 1978 and 2014. Exit rate in year t is
defined as the number of establishment failures in year t divided by the average number of surviving establishments in years
t - 1 and t. Panel (a) plots the raw data, whereas panel (b) plots the detrended series using a Hodrick-Prescott filter with
smoothing parameter 6.25. Year t is shaded if there is an NBER recession at some point between the second quarter of year
t - 1 and the first quarter of year t.




by the average of the total number of firms within sector s and age group a in period t and the total
number of firms within sector s and age group a - 1 in period t - 1. The BDS database groups firms
aged 6 or more into five age categories: 6­10, 11­15, 16­20, 21­25, and 26 or more. We compute exit
rates for these groups as total number of exits divided by the number of firms in this age range.36
       Figure 1 plots both the raw firm exit rate and its cyclical component after removing a trend using
the Hodrick-Prescott (HP) filter with a smoothing parameter of 6.25, as is standard in the literature
for annual data (Ravn and Uhlig, 2002). Recession dates are from the NBER monthly business cycle
indicator.37 In particular, year t is coded as a recession year if any month between April of year t - 1
and March of year t has a recession according to the NBER. Figure E.1 depicts the corresponding plot
for establishments.
       Table E.1 confirms the patterns documented in Figures 1 and E.1 using the following simple
regression on sector-age group data:

                                 Exit Ratesat =  +  Recessiont + s × a + sat ,                                         (E.1)

where Exit Ratesat is the exit rate among firms or establishments in sector s of age a at time t (either
in the raw data or after removing the HP trend), s designates a full set of sector fixed effects, and a
stands for a full set of age fixed effects. The standard errors are clustered at the sector × age level.
  36
      The BDS also reports an age category defined as "left censored", consisting of firms or establishments with unknown age
because they were founded before 1977. We compute the exit rate for this group using an analogous strategy.
   37
      The NBER defines a recession as a significant decline in economic activity spread across the economy, lasting more than
a few months, normally visible in real GDP  , real income, employment, industrial production, and wholesale-retail sales. See
https://www.nber.org/cycles.html.


                                                             62
                         Table E.1. Firm and Establishment Exit Rate During Recessions


Dependent variable:                         firm exit rate          firm exit rate         est. exit rate        est. exit rate
                                                 (1)                     (2)                     (3)                   (4)

                                                      Panel A: Raw Data

Recessiont                                     0.478                                         1.085
                                                (0.094)                                       (0.139)
Recessiont-1                                                          0.211                                         0.783
                                                                       (0.066)                                       (0.111)
Observations                                     2,619                  2,619                 2,619                   2,619
Mean of dep. var.                               10.533                 10.533                 13.895                 13.895
Sector × Age fixed effects
Lin. and quad. common trends

                                                 Panel B: HP-Filtered Data

Recessiont                                     0.263                                         0.633
                                                (0.048)                                       (0.065)
Recessiont-1                                                          0.214                                         0.544
                                                                       (0.040)                                       (0.059)
Observations                                     2,619                  2,619                  2,619                  2,619
Sector × Age fixed effects

Notes: Unit of analysis is sector × age × year. Exit rate in year t is defined as the number of failures in year t divided by the
average number of surviving producers (firms or establishments) in years t - 1 and t. Recessiont is a dummy variable that
is equal to one if there is a recession in year t. Standard errors are clustered at the sector × age level.  ,  , and  denote
significance at the 10%, 5%, and 1% levels, respectively.




    Panel A of Table E.1 reports results using the raw exit rate, while Panel B uses the HP-filtered exit
rates. Regressions in Panel A additionally include quadratic time trends. The first two columns in both
panels are for firms and the next two panels are for establishments, while even-numbered columns
look at the lag of the recession indicator. The results confirm the patterns shown in Figures 1 and
E.1: there is a strong statistical association between recessions and exits. The implied quantitative
magnitudes are large as well. For example, in column 1, our estimate implies that firm exits increased
by 0.48 percentage points, starting from the base of 10.53%.                         The quantitative magnitudes are
somewhat larger for establishments, corresponding to a 1.09 percentage point increase on the base
of 13.90%.
    Table E.2 confirms these findings when observations are weighted by the average number of
establishments in the relevant sector and age group. The results are very similar.
    Table E.3 reports very similar results when we use a measure of recession defined as the number
of months in the recession in a given year. The coefficient estimates are not directly comparable to
the previous two tables, since now we are focusing on the "intensive margin" of the recession within a
given year. Nonetheless, the correlation between recession and exit rates continues to be positive and
statistically significant. The implied quantitative results are also comparable: there are, on average, 6.1


                                                               63
           Table E.2. Firm and Establishment Exit Rate During Recessions: Weighted Regressions


Dependent variable:                          firm exit rate         firm exit rate         est. exit rate         est. exit rate
                                                  (1)                    (2)                     (3)                    (4)

                                                      Panel A: Raw Data

Recessiont                                      0.343                                         0.728
                                                 (0.103)                                       (0.153)
Recessiont-1                                                             0.076                                       0.394
                                                                        (0.089)                                       (0.146)
Observations                                      2,619                  2,619                 2,619                   2,619
Mean of dep. var.                                10.533                 10.533                 13.895                 13.895
Weighted mean of dep. var.                       10.112                 10.112                 12.934                 12.934
Sector × Age fixed effects
Lin. and quad. common trends

                                                  Panel B: HP-Filtered Data

Recessiont                                      0.164                                         0.430
                                                 (0.050)                                       (0.074)
Recessiont-1                                                           0.142                                         0.352
                                                                        (0.037)                                       (0.061)
Observations                                     2,619                   2,619                  2,619                  2,619
Sector × Age fixed effects

Notes: Unit of analysis is sector × age × year. Exit rate in year t is defined as the number of failures in year t divided by the
average number of surviving producers (firms or establishments) in years t - 1 and t. Recessiont is a dummy variable that is
equal to one if there is a recession in year t. The table report results of a weighted regression, where the weight is the average
number of establishments or firms by sector and age group. Standard errors are clustered at the sector × age level.  ,  , and

   denote significance at the 10%, 5%, and 1% levels, respectively.




recession months among years with recession periods and the coefficient estimates are about 1/6th
of those in Table E.1.
       We finally note that the cyclicality of exit and entry rates is also studied by Tian (2018), who
concludes that "the (counter-) cyclicality in firm death is ambiguous and sensitive to the choice of
cyclical indicator." This claim is based on the finding that exit rates are uncorrelated with (the cyclical
component of ) GDP and negatively correlated with GDP growth (see Table 1 in her paper). In the
appendix (Table B-10), Tian (2018) also reports the correlation between the exit rates and several
other measures to capture economic activity. Consistent with our findings, she shows that there
is a positive and significant correlation between exit rates and recessions defined as the number of
recession months reported by the NBER in the sample year (thus, the definition we use in Table E.3).38
  38
     There are some minor differences between our results and Tian's (2018). First, we use a newer release of the data (version
2016) and a slightly longer period of analysis (1977 to 2014 compared to 1979 to 2013). Second, we define a recession at year t
based on the number of months with a recession between April of year t - 1 and March of year t, whereas Tian (2018) defines
a recession based on the number of months with a recession between March of year t - 1 and February of year t. Third,
the denominators in the definition of the exit rate in the two studies are slightly different: in our case, the denominator
is the average number of firms or establishments in years t and t - 1, whereas Tian (2018) uses the number of firms or


                                                               64
     Table E.3. Firm and Establishment Exit Rate During Recessions: Intensive Margin of Recession


Dependent variable:                            firm exit rate         firm exit rate        est. exit rate       est. exit rate
                                                    (1)                    (2)                    (3)                  (4)

                                                      Panel A: Raw Data

Number of months in recessiont                    0.054                                       0.134
                                                   (0.012)                                     (0.017)
Number of months in recessiont-1                                          0.016                                     0.031
                                                                         (0.010)                                    (0.014)
Observations                                        2,619                 2,619                2,619                 2,619
Mean of dep. var.                                  10.533                10.533                13.895               13.895
Sector × Age fixed effects
Lin. and quad. common trends

                                                 Panel B: HP-Filtered Data

Number of months in recessiont                    0.032                                       0.094
                                                   (0.007)                                     (0.009)
Number of months in recessiont-1                                        0.021                                       0.026
                                                                         (0.008)                                     (0.009)
Observations                                        2,619                 2,619                 2,619                 2,619
Sector × Age fixed effects

Notes: Unit of analysis is sector × age × year. Exit rate in year t is defined as the number of failures in year t divided by the
average number of surviving producers (firms or establishments) in years t - 1 and t. Recessiont is a dummy variable that
is equal to one if there is a recession in year t. The independent variable is the the number of months in recessions in the
sample year (or its lag). Standard errors are clustered at the sector × age level.  ,  , and  denote significance at the 10%,
5%, and 1% levels, respectively.




    In Table E.4, we show that, if instead of GDP, the focus is on significant declines in GDP, there is
again a strong countercyclical relationship between GDP and exits. In Panel A, we define a significant
decline in GDP as a year in which any quarter of the year experienced a more than two standard
deviation decline in detrended log real GDP. Panel B provides analogous results, with the recession
variable now defined on GDP growth being two standard deviations below its mean. Finally, Panel C
shows a strong negative association between exit rates and GDP growth. Taken together, our findings
indicate that a robustly positive relationship between recessionary periods and exit rates, i.e., exits are
robustly countercyclical.




establishments in year t - 1 as the denominator. These differences, however, have minimal effects on the results.


                                                                65
     Table E.4. Firm and Establishment Exit Rate During Recessions: Intensive Margin of Recession


Dependent variable:                                    firm exit rate                       establishment exit rate

                                               raw data           HP-filtered           raw data             HP-filtered
                                                  (1)                (2)                   (3)                  (4)

                Panel A: Recession dummy is equal to one if GDP is below two standard deviations

Recession (based on GDP)                        0.531               0.474                0.438                 0.296
                                                 (0.114)             (0.084)              (0.158)               (0.105)
Observations                                      2,619               2,619                2,619                 2,619
Sector × Age fixed effects
Lin. & quad. common trends

            Panel B: Recession dummy is equal to one if GDP growth is below two standard deviations

Recession (based on GDP growth)                 1.156               0.554                1.270                 0.736
                                                 (0.158)             (0.078)              (0.213)               (0.113)
Observations                                      2,619               2,619                2,619                 2,619
Sector × Age fixed effects
Lin. & quad. common trends

                                                   Panel C: GDP growth

GDP growth                                    -14.523              -9.217              -22.021               -16.481
                                               (2.704)              (1.654)             (3.449)               (1.849)
Observations                                    2,619                2,619               2,619                 2,619
Sector × Age FE
Lin. & quad. common trends

Notes: Unit of analysis is sector × age × year. The independent variable is defined in the header of each panel. GDP is the
cyclical component of GDP    . Standard errors are clustered at the sector × age level.  ,  , and  denote significance at the
10%, 5%, and 1% levels, respectively.




                                                             66
