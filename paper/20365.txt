                                 NBER WORKING PAPER SERIES




            INEFFICIENTLY LOW SCREENING WITH WALRASIAN MARKETS

                                            Kinda Hachem

                                         Working Paper 20365
                                 http://www.nber.org/papers/w20365


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     August 2014




Part of this paper is based on the second chapter of my dissertation at the University of Toronto. I
am extremely grateful to Huberto Ennis, Ricardo Reis, and an anonymous referee for many insightful
suggestions. Financial support from UVA Darden and from Chicago Booth in prior stages of this work
is also gratefully acknowledged. The views expressed herein are those of the author and do not necessarily
reflect the views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2014 by Kinda Hachem. All rights reserved. Short sections of text, not to exceed two paragraphs,
may be quoted without explicit permission provided that full credit, including © notice, is given to
the source.
Inefficiently Low Screening with Walrasian Markets
Kinda Hachem
NBER Working Paper No. 20365
August 2014, Revised May 2020
JEL No. D62,D83,E44

                                              ABSTRACT

Financial intermediaries devote resources to finding and screening borrowers before lending capital.
By retaining only sufficiently good matches, informed lenders exacerbate adverse selection problems
for others lending in the same market. Failure to internalize this implies that informed lenders are too
selective in the matches they retain. The resulting under-use of capital pushes the cost of capital down,
decreasing the benefit of being informed rather than uninformed and prompting a reallocation of resources
from screening to matching. Compared to the constrained efficient allocation, the decentralized equilibrium
has too little screening, too little informed credit, and too much uninformed credit.


Kinda Hachem
University of Virginia
Darden School of Business
100 Darden Boulevard
Charlottesville, VA 22906
and NBER
hachemk@darden.virginia.edu
1     Introduction

In many models with asymmetric information about asset values, screening by a potential
buyer lowers the average quality of assets available to others. It could be a consumer buying
a used car, a …rm hiring a new worker, or a bank …nancing a new …rm. Potential buyers
do not internalize the negative externality that their screening imparts, so the standard
intuition is that decentralized screening will be ine¢ ciently high.
    I revisit the e¢ ciency properties of screening in decentralized markets, motivated by a
simple yet fundamentally important distinction: adverse selection is imparted not by the
act of screening but by the retention decision of a buyer who has successfully screened. I
demonstrate that screening and retention can behave quite di¤erently, and should thus be
decoupled, when the worst asset that would be pro…table to retain upon successful screening
is endogenous. Failure to internalize the adverse selection problem makes informed buyers too
selective in the asset qualities they retain. This implies an under-utilization of capital that
lowers funding costs and leads buyers to choose to become informed less often. Decentralized
screening may therefore be ine¢ ciently low, not ine¢ ciently high.
    The setting for my analysis is a model of …nancial intermediation. There is a continuum of
heterogeneous borrowers who need capital to produce. Borrowers di¤er in production ability
and have private information about their types. An equal mass of ex ante identical lenders has
access to capital and intermediates it by hiring workers to perform two activities: matching
and screening. Matching activities include the creation and marketing of products to attract
new business, while screening activities target the information gap between borrowers and
lenders. The probability that each activity succeeds is increasing in the amount of labor
devoted to it, but labor is costly because workers must be paid a wage to forgo leisure. The
wage and the cost of capital for lenders are each determined in Walrasian markets.
    The intermediation process involves several decisions by the lender, namely how many
workers to hire, how to allocate these workers between matching and screening, and whether
to provide capital when the matching activity succeeds. If only matching succeeds, then the


                                               2
lender chooses the probability of providing capital knowing only the distribution from which
the borrower was drawn (uninformed retention strategy). If both matching and screening
succeed, then the lender decides whether to provide capital based on the borrower’s type
(informed retention strategy).
   The optimal strategy of an informed lender is to retain all types above a chosen thresh-
old. Informed lenders do not internalize that a higher threshold worsens the distribution of
available borrowers, hence the informed retention strategy is too selective (i.e., the lowest
type retained is too high) relative to a social planner who faces the same technologies and
constraints. Uninformed retention, on the other hand, improves the available distribution
by forgoing a future informed match where only borrowers above the threshold would be
retained. Failure to internalize this improvement implies that the retention probability of an
uninformed lender is also too low relative to the constrained e¢ cient planner.
   The under-retention of borrowers by all lenders implies an under-use of capital. In a
Walrasian market, the price of capital would fall to encourage more retention. For the
market mechanism to implement the constrained e¢ cient retention strategies, however, the
distributional externalities from informed and uninformed retention would have to be of equal
strength. I show that they are not. Informed lenders are the direct source of adverse selection
in the distribution of available borrowers, so the negative distributional externality imparted
by the informed retention threshold is stronger than the positive distributional externality
imparted by uninformed retention. As a result, the under-use of capital by informed lenders
pushes the price of capital below what would be needed to correct the under-use of capital by
uninformed lenders. The Walrasian mechanism then implements a decentralized equilibrium
with over-retention by uninformed lenders and under-retention by informed ones.
   The probability of uninformed retention is naturally bounded from above by one. I
show that both the planner and the decentralized lenders are constrained by this upper
bound when the expected duration of borrower projects is su¢ ciently short. In other words,
both would like to retain more uninformed matches than they form, making the margin of
adjustment the allocation of labor across intermediation activities. Moving the marginal

                                              3
unit of labor from screening to matching increases uninformed matches relative to informed
ones in this region of the parameter space. The distributional externality from the matching
activity is then positive and, all else constant, the fraction of labor devoted to matching
will be ine¢ ciently high for the same reason that uninformed retention was ine¢ ciently high
in the earlier discussion: the negative distributional externality imparted by the informed
retention threshold is stronger than the positive distributional externality imparted by the
matching activity, pushing the price of capital below the price that would correct the latter.
       Next, I show that the total amount of labor hired by an individual unmatched lender is
approximately e¢ cient when (i) labor is inelastically supplied by workers and (ii) borrower
projects are expected to be of su¢ ciently short duration. It then follows from the explana-
tions above that too much labor will be devoted to matching while too little labor will be
devoted to screening in the decentralized equilibrium. An extension to elastic labor supply
can deliver under-investment in both matching and screening, but, on aggregate, there is still
too much uninformed credit relative to the planner’s solution and too little credit overall.


Related Literature The prediction of ine¢ ciently low screening contrasts with a large
body of literature. Broecker (1990) provides an early study of screening externalities in a
model where banks attract borrowers via Bertrand competition and operate a noisy screening
technology at zero cost. Several papers have since allowed for costly screening (e.g., Cao
and Shi (2001), Hauswald and Marquez (2006), Direr (2008), Gehrig and Stenbacka (2011),
Fishman and Parker (2015)) and, whenever screening is found to be ine¢ cient in these
papers, the conclusion is that screening is ine¢ ciently high.1 In models with separating
contracts à la Rothschild and Stiglitz (1976) rather than screening technologies, the analog
to ine¢ ciently high screening would be a separating equilibrium when the planner wants
pooling. Dell’Ariccia and Marquez (2006) model screening via separating contracts and …nd
that any ine¢ ciency involves the decentralized economy settling on a separating equilibrium.
   1
     The dynamic model of Fishman et al (2020) also features ine¢ ciently high screening. Under certain
parameters, Gehrig and Stenbacka (2011) …nd cycles with delayed screening but even this does not culminate
in insu¢ cient information production unless …rms are assumed to die in the interim.



                                                    4
In a very di¤erent environment, Guerrieri et al (2010) also …nd that ine¢ ciencies tend to be
in the direction of too much separation (i.e., partial pooling would pareto dominate).2
       The run-up to the 2007-09 …nancial crisis seems at odds with ine¢ ciently high screening
by banks. If anything, information acquisition was too low and originate-to-distribute models
with securitization have become a popular destination for answers. My results, derived in
an originate-to-hold environment, suggest that securitization is not a necessary condition for
too little screening, even if one can make the case that it was su¢ cient in this particular
crisis.3 In principle, environments like Grossman and Stiglitz (1980) and Verrecchia (1982)
could also be used to study whether too much or too little information is acquired without
appealing to securitization. Agents learn about a common fundamental and prices are at
least partly revealing of total knowledge. In my model, each bank is learning about a di¤erent
idiosyncratic borrower, not about an aggregate state. Therefore, ine¢ ciency is not driven
by a failure to internalize that others bene…t from information acquisition through partial
revelation of this information by prices. The price of capital does not play this role here.4
       Instead, the role of prices in my model relates more to a growing literature on pecuniary
externalities. Dávila and Korinek (2018) distinguish between two types of pecuniary exter-
nalities: collateral externalities that arise because of price-dependent …nancial constraints
and distributive externalities that arise because of incomplete insurance markets. In my
model, the feedback between lender decisions through the price of capital is more similar to
a distributive pecuniary externality, not to be confused with the distributional externalities
discussed earlier which were non-pecuniary and involved changing the composition of the
   2
      There is also a ‡avor of too much separation in Fuchs and Skrzypacz (2015), as policies that disincentivize
the use of trading delays to signal quality achieve e¢ ciency gains.
    3
      The negative e¤ect of securitization on screening is shown empirically in Keys et al (2010) and Pur-
nanandam (2011) but loan sales must be incentive compatible (e.g., Gorton and Pennacchi (1995)) so it
is a separate theoretical question whether access to a securitization technology implies too little screening
relative to the second-best. To this point, Vanasco (2017) allows cash ‡ows from potentially screened assets
to be securitized and …nds that the direction of ine¢ ciency can go either way.
    4
      Recently, Colombo et al (2014), Llosa and Venkateswaran (2017), and Mackowiak and Wiederholt (2018)
have considered learning about a common fundamental in coordination environments rather than environ-
ments with partially revealing prices. They …nd cases where information acquisition is ine¢ ciently low,
but, once again, the mechanisms and applications are very di¤erent from mine because of the nature of the
information being acquired.



                                                       5
borrower pool. My results involve a pecuniary externality because two markets for capital
(one for lenders that are informed and one for lenders that are uninformed) would allow the
Walrasian economy to achieve constrained e¢ ciency. Speci…cally, the distributional exter-
nality from each decision would be priced in a separate market, eliminating the feedback
that exists when there is only one market for capital.
    A classic result in the literature on pecuniary externalities is that excessive borrowing
can arise in equilibrium because …rms do not internalize that more leverage will require more
…re sales should a negative shock hit (e.g., Lorenzoni (2008)). There are no …re sales in my
model and the aggregate e¤ects are such that uninformed credit is excessive but total credit
can be ine¢ ciently low because of under-retention of borrowers by informed lenders.
    The rest of the paper proceeds as follows. Sections 2 and 3 study an environment without
any Walrasian markets. Section 4 then introduces the market for capital while Section 5
introduces the market for labor. Section 6 concludes. All proofs are in Appendix A.



2     Baseline Model

Time is discrete. There are two groups of agents of equal mass, …rms and lenders. All agents
are in…nitely-lived, risk neutral, and have discount factor   2 (0; 1).
    There is a continuum of …rm types, denoted by ! and distributed uniformly over the
unit interval. Each …rm has private information about its type. Each …rm also has a
production project that requires one unit of capital input. Time to project completion is an
i.i.d geometric random variable with parameter        2 (0; 1]. A completed (mature) project
generates y (!) units of output, where y 0 ( ) > 0.
    Capital is endowed to a unit mass of ex ante identical lenders. Firms do not have their own
capital and cannot store project output. Lenders do not have access to the same production
projects as …rms. Instead, lenders can intermediate capital to …rms, as will be described
in Section 2.1, or invest in a simple technology that yields g 0 units of output per unit of
capital invested. Section 4 will replace the simple technology with an interbank market


                                               6
where lenders can trade capital with each other at a Walrasian price. Until then, each lender
has one unit of capital, there is no trade between lenders, and g 0 is a constant satisfying:

                                 g0
       Assumption 1 y (0) <           < y (1)


Under Assumption 1, the simple technology is more productive than the project of the
worst …rm but less productive than the project of the best …rm and thus not always socially
preferable to intermediation.


2.1       Intermediation Technologies: Matching and Screening

Intermediation of capital by lenders to …rms (borrowers) involves two technologies. The …rst
is matching: lenders can create and/or advertise standardized …nancial products to match
…rms with capital. Formally, I model a one-to-one matching technology that is only available
to unmatched lenders. The mass of unmatched lenders equals the mass of unmatched …rms
each period and a lender’s matching probability depends only on his own matching e¤ort.
       The second intermediation technology is screening: a matched lender can investigate
the quality of his match to determine whether he wants to retain the match and extend
capital. Lenders cannot (costlessly) commit to actions that will dissuade certain …rms from
making themselves available to match. For now, I will also assume that retained matches are
exogenously dissolved once the underlying project matures. Combined with the fact that all
loans involve exactly one unit of capital, there are not enough instruments to o¤er separating
contracts in lieu of screening.5 Relationship lending, discussed in Appendix B, will provide
an alternative means of learning but only after some time has elapsed.
       Although lenders may want to undertake both matching and screening, it is either too
costly or too time-consuming to make each activity succeed with certainty. I introduce a
resource constraint to capture this. In particular, each lender is endowed with z 2 (0; 1)
   5
    Abstracting from separating contracts is less stark than may initially seem. Separation is not free. The
lender has to forgo some rents to ensure incentive compatibility for all borrower types. See also the …xed
costs incurred per contract in Livshits et al (2016). In a di¤erent environment with non-exclusive contracts,
Attar et al (2011) show that separation may not even be feasible.


                                                     7
units of non-transferable e¤ort in every period that he is unmatched. For the moment, z is
a parameter. In Section 5, I will model z as labor and endogenize the unmatched lender’s
decision of how much labor to hire when the wage is determined in a Walrasian market.6
       A lender who allocates                2 [0; z] units of his e¤ort to matching gets a borrower with
probability p ( ) and discovers that borrower’s type with probability p (z                                  ) immediately
thereafter. The function p ( ) satis…es p (0) = 0, p (1) = 1, p0 ( ) > 0, and p00 ( ) < 0. Also:

                             p0 (z   )           p0 ( )    p00 ( )        p00 (z   )
       Assumption 2         1 p(z        )
                                             <   p( )      p0 ( )         p0 (z    )
                                                                                       for any   2 (0; z)

                                                                                                                  p0 ( )2
With p0 ( ) > 0 and p00 ( ) < 0, a stricter version of Assumption 2 is p00 ( )                                    1 p( )
                                                                                                                          ,   in-
terpretable as follows: if p ( ) increases rapidly and/or approaches one, it picks up enough
curvature to slow down. This ensures that lenders face economically meaningful tradeo¤s
when allocating …nite resources and will be su¢ cient for uniqueness of equilibrium later on.


2.2       Retention Decisions and Project Completion

Consider a lender who is unmatched at the beginning of date t. He …rst chooses his matching
e¤ort     t.   With probability 1 p ( t ), he does not attract a borrower, in which case he operates
the simple technology for one period and is unmatched at the beginning of date t + 1. With
probability p ( t ), he does attract a borrower and exerts screening e¤ort z                                 t.   Successful
screening occurs with probability p (z                               t)   and means that the lender’s information set
contains the borrower’s true type (i.e., the lender is “informed”). Unsuccessful screening
occurs with probability 1                    p (z         t)   and means that the lender’s information set only
contains the distribution from which the match was drawn (i.e., the lender is “uninformed”).
Denote by         t   ( ) the distribution from which matches are drawn at date t.
   6
     Costly screening can be motivated as in the literature that followed Broecker (1990). Costly matching
can be motivated by non-price competition for borrowers (e.g., Heider and Inderst (2012)) or search frictions
(e.g., Becsi et al (2013)). I have in mind the former. My matching technology is set up so that no externalities
are imparted through the ratio of borrowers to lenders in the market, which would be the key variable in a
model of random search (e.g., Hosios (1990), Yashiv (2007)). While some search models with heterogeneous
agents have also been used to study market composition (e.g., Shimer and Smith (2001)), they abstract from
asymmetric information and are hence silent on whether screening is too high or too low.



                                                                          8
   Conditional on his information set, a newly matched lender must decide whether to retain
the borrower he just attracted or whether to let him go, operate the simple technology, and
try for another borrower in t + 1. Let It (!) 2 [0; 1] denote the probability that a newly
matched lender retains a borrower whose type he knows to be !. This is the informed
retention strategy. The uninformed retention strategy, de…ned as the probability that a newly
matched lender retains a borrower whose type he does not know, is denoted by                                t   2 [0; 1].
   Once retention decisions have been made, newly matched and retained borrowers under-
take production. At the end of date t, each matched borrower (new or continuing) discovers
if his project has matured. The output from a mature project is also observed by the lender
who …nanced it (but not by other lenders) and split with the borrower according to a con-
stant fraction, which, to reduce notation, is just set to one in favor of the lender. In the
baseline model, each lender eats the output he receives, whether from a mature project or
the simple technology, and starts the next period with a new one-unit endowment of capital.
This assumption will be relaxed in Section 4 (i.e., aggregate capital will be endogenous and
allocated among lenders via the interbank market).


2.3    Quantity and Quality of Available Borrowers

I will focus on symmetric equilibria where all lenders choose the same e¤ort allocation                                     t,

the same informed retention strategy It (!), and the same uninformed retention strategy                                     t.

   Fraction p ( t ) [1       p (z     t )]   of unmatched type ! …rms are drawn into uninformed
matches at the beginning of date t and retained with probability                  t   while fraction p ( t ) p (z                t)

are drawn into informed matches and retained with probability It (!). Let nt                            1   (!) denote
the fraction of type ! …rms that are in matches after retention decisions at date t                             1. Frac-
tion   of these matches mature at the end of t                    1, leaving fraction 1           (1    ) nt     1   (!) of
type ! …rms unmatched at the beginning of date t. The law of motion for nt (!) is then:


nt (!) = (1     ) nt   1   (!) + p ( t ) [[1    p (z       t )]   t   + p (z   t ) It   (!)] [1    (1       ) nt     1   (!)]
                                                                                                                          (1)

                                                       9
In steady state, nt (!) = nt   1   (!) for each ! and thus the steady state fraction of type !
…rms that receive …nancing is:

                                p ( ) [[1 p (z          )]        + p (z  ) I (!)]
                n (!) =                                                                               (2)
                            + (1     ) p ( ) [[1      p (z         )] + p (z     ) I (!)]

Unless otherwise indicated, I focus on steady states and drop time subscripts.
   The relative likelihood that an unmatched …rm is of type ! is:


                                                 1   (1           ) n (!)
                                       (!) =                                                          (3)
                                                          A

where:
                                                          Z   1
                                   A=1      (1        )           n (!) d!                            (4)
                                                          0

is the mass of open matches at the beginning of each period. The quality distribution of
available matches is summarized by        ( ).


2.4      Lender Value Functions

Let J (!) denote the value of a match with type !, conditional on retention. With probability
 , the match matures, giving the lender a one-period return of y (!) and a continuation value
of U , where U denotes the value of an unmatched lender. With probability 1                   , the match
does not mature and is carried over to the next period, giving the lender a one-period return
of zero and a continuation value of J (!). Therefore:


                            J (!) =     [y (!) + U ] + (1                   ) J (!)                   (5)

   Consider now U . An unmatched lender can achieve a one-period return of g 0 and a
continuation value of     U by investing his capital in the simple technology. If he were to
instead provide the capital to a type ! …rm, his net return would be J (!) g 0              U . Of course,
the lender only …nds a …rm with probability p ( ), the …rm is only type ! with probability



                                                     10
density       (!), and type ! is only retained with probability [1                                         p (z        )] + p (z              ) I (!).
Integrating over …rm types, the value of an unmatched lender is thus:

                              Z     1
          0
  U = g + U + p( )                      [[1      p (z       )]    + p (z              ) I (!)] [J (!)             g0          U]       (!) d! (6)
                                0



   A decentralized lender chooses his e¤ort allocation                                           2 [0; z] and informed and unin-
formed retention strategies I ( ) 2 [0; 1] and                          2 [0; 1] to maximize U taking as given the
distribution      ( ). The dimensionality of the problem is simpli…ed by the following lemma,
which reduces informed retention to a reservation strategy around a scalar                                                        2 [0; 1]:

Lemma 1 There is a unique                            2 [0; 1] such that successfully screened matches are retained
if and only if !         . That is, I (!) = 0 for ! <                        and I (!) = 1 for !                         .

   Using the recursive structure of the value functions, the problem can be written as:

Lemma 2 De…ne the expected one-period net return from intermediating an open match:

                                                                                            Z    1
                                         0
                 ( ; ; ;      ( );g )                  p ( ) [1    p (z              )]              [ y (!)      g0]     (!) d!
                                                                                             0
                                                                                 Z   1
                                                       +p ( ) p (z           )            [ y (!)           g0]   (!) d!


and the recursive discount rate:

                                                                                                                              Z    1
                                                 (1   )
  D( ; ; ;         ( )j )       1+                        p ( ) [1                   p (z            )]     + p (z        )            (!) d!
                                             1     (1   )

Lenders in the decentralized economy solve:

                                                 n                                    1
                                                                                                                              o
                          max                         D   ; ; ;       ( )j                                ; ; ;   ( ) ; g0
                   2[0;z]; 2[0;1]; 2[0;1]



where the notation          ( ) means                 ( ) is being taken as given.

A decentralized equilibrium is a triple ( ;                       ;     ) that solves the …xed point problem implicit
in Lemma 2. Speci…cally, for any triple ( 0 ;                      0;     0 ),   equation (3) de…nes a distribution                             0   ( ).

                                                                   11
Taking as given this distribution, the …rst order conditions for the maximization problem
in Lemma 2 deliver a triple ( 1 ;         1;    1)       T ( 0;    0;   0 ).   A decentralized equilibrium then
solves ( ;   ;   )=T ( ;     ;       ).


2.5    Constrained E¢ ciency Benchmark

Consider a social planner who holds the economy’s unit endowment of capital and must
allocate it to achieve production. The planner puts equal weight on all types and everyone
is risk neutral. Hence, welfare is measured by the total present discounted value of output:

                                                     Z    1
                                     1          0
                        W=                     g +            [ y (!)    g 0 ] n (!) d!                     (7)
                                 1                    0

With one unit of capital, the planner can operate the simple technology and generate g 0 units
of output at the end of the period. If he were to instead give the capital to a type ! …rm,
y (!) units of output would be generated at the end of the period with probability . The
planner is subject to the same constraints as lenders in the decentralized economy, meaning
he can only allocate capital to …rms by dividing e¤ort z between the two intermediation
technologies described in Section 2.1. The fraction of type ! …rms that receive capital is
therefore n (!), with n (!) in the welfare function given by equation (2).
   The following lemma writes the planner’s problem in a form more easily comparable to
the problem solved by decentralized lenders in Lemma 2:


Lemma 3 With g 0 constant, the planner solves:


                                 max                 fA          ( ; ; ;       ( ) ; g 0 )g
                          2[0;z]; 2[0;1]; 2[0;1]



where A, as de…ned in equation (4), is equivalent to the limit:


                                                                                1
                                 A = lim (D ( ; ; ;                 ( ) j ))                                (8)
                                               !1




                                                          12
A constrained e¢ cient allocation is a triple b; b; b that solves the maximization problem
in Lemma 3, taking into account that            ( ) is endogenously determined as per equation (3).
        The …rst di¤erence between the problem of a decentralized lender in Lemma 2 and the
planner’s problem in Lemma 3 is that the planner takes into account how his decisions a¤ect
the distribution of available borrowers           ( ). Decentralized lenders take this distribution
as given and hence fail to internalize the distributional externality that they impart on
each other. The quality of available borrowers a¤ects the attractiveness of intermediation
relative to the simple technology so distributional externalities can change how other lenders
intermediate. Failure to internalize this can have real e¤ects.
        The second di¤erence is that the planner internalizes how his decisions a¤ect the to-
                                                                       1
tal mass of open matches available to …rms, i.e., (D ( j1))                in Lemma 3 rather than just
              1
(D ( j ))         in Lemma 2. By the recursive nature of his problem, a decentralized lender in-
ternalizes how his decisions a¤ect his future availability, but, unless              = 1, this is not the
same as internalizing how the current availability of other lenders is a¤ected.7 I will call the
di¤erence between the decentralized and planning problems arising from                   < 1 an extensive
externality. This externality would be moot if there was free entry of unmatched lenders
because the expected net return           ( ) would be driven to zero in both Lemmas 2 and 3,
making it irrelevant what exactly multiplies           ( ). The extensive externality thus appears in
my model because barriers to free entry allow lenders to make positive pro…t.



3         Ine¢ ciencies in the Baseline Model

This section explores how the extensive and distributional externalities a¤ect the decen-
tralized equilibrium relative to the constrained e¢ cient allocation. The focus will be on
    2 (0; 1), as intertemporal preservation of matches is necessary for ine¢ ciency:


Proposition 1 If           = 1, then the decentralized equilibrium is constrained e¢ cient.
    7
    See the decentralized bargaining model of Elliott and Nava (2019) for other examples where an ine¢ ciency
disappears as the discount factor converges to 1.


                                                     13
The proof of Proposition 1 is straightforward. With         = 1, any matches formed at the
beginning of the period break by the end of the period. Every …rm is therefore available
at the beginning of every period, regardless of the choices of , , and          , so there are no
extensive or distributional externalities stemming from these choices.
   The results that follow are organized around the uninformed retention strategy . Section
3.1 considers the case where both the planner and the decentralized lenders choose          = 1.
Section 3.2 then shows what happens when the constraint           1 is slack.


3.1     Full Retention of Uninformed Matches

Suppose both the planner and the decentralized lenders choose        = 1. The goal here is to
build intuition for the rest of the paper so existence and uniqueness of solutions are taken as
given. These properties will be formally established for the Walrasian model of Section 4.


3.1.1   Extensive Externalities

To isolate only the extensive externalities, we can consider a version of the model where the
distribution   ( ) is exogenous because available borrowers draw new types from the uniform
(population) distribution at the beginning of every period:


Proposition 2 Fix       ( ) = 1. For any     < 1, the decentralized solution has (i)       ine¢ -
ciently high and (ii)   ine¢ ciently low.


Proposition 2 indicates that the extensive externality from       is negative. An increase in
  implies a substitution of e¤ort from screening to matching, generating more uninformed
matches. The total mass of open matches then falls because uninformed matches are always
retained ( = 1). The extensive externality from      is, in contrast, positive. An increase in
implies that informed lending is more selective, leading to more open matches. The planner
therefore chooses a lower value of    and a higher value of    than the decentralized lenders
when the distribution of available borrowers is exogenous.


                                              14
3.1.2     Distributional Externalities

Return now to the full model which also has                  ( ) endogenous. Since informed retention
always follows a reservation strategy, the distribution of available borrowers involves only
two values:    L   which will denote the density for any ! <             and   H   which denotes the density
for any !      , where     L    +   H   (1     ) = 1.
   As shown next, the distributional externality from                  is negative and reverses the predic-
tion of    ine¢ ciently low in Proposition 2:


Proposition 3 With             ( ) endogenous,      = b for     = 0 and         > b for any    > 0.


The extensive externalities discussed in Section 2.5 are strongest at                     = 0. Proposition
3 indicates that the positive extensive externality from                   is exactly o¤set by a negative
distributional externality when              = 0. As     increases, the extensive externality becomes
muted while the distributional one is unchanged, leading to                    ine¢ ciently high.
   The negative distributional externality from               is driven by the e¤ect of        on   H.   As
increases, informed lenders hold out for a smaller set of borrower types, making any one of
those types less available in the steady state (i.e.,          H   is lower). On the ‡ip side, the range
of types fully available to uninformed lenders expands, which means that the probability of
drawing any one type from this range also falls (i.e.,             L   is lower). For an unmatched lender,
both the very best and the very worst types are now less likely to be drawn. The fact that
intermediation is most valuable with high types drives the direction of the distributional
externality in Proposition 3. Speci…cally, informed lenders are too selective because they do
not internalize that the returns to intermediation for other lenders fall when the probability
of drawing high types falls.
   Consider next the distributional externality from . Only informed lenders can change
the distribution of available borrowers, and they do so by returning borrowers below type
  to the available pool. Unmatched lenders have no borrowers to return and uninformed
lenders do not know enough about their borrowers to condition retention decisions on type.


                                                        15
Thus, the allocation of e¤ort between matching and screening a¤ects the distribution                        ()
by a¤ecting the probability that an unmatched lender becomes an informed lender.


Proposition 4 Consider            ( ) endogenous. If     = 0 so that             = b, then       > b and, by
continuity, there is a       2 (0; 1] such that    > b for any          .


To understand Proposition 4, it is important to recognize that the distributional externality
from    is non-monotone. In more detail, the probability that an unmatched lender forms an
                                                                        z
informed match is p ( ) p (z          ), which is maximized at      =   2
                                                                                given the concavity of p ( ).
Increasing     within the range         2 0; z2 increases the formation of informed matches and
                                                                                               z
worsens the available distribution, while increasing          within the range            2    2
                                                                                                 ;z   decreases
the formation of informed matches and improves the available distribution. I will later
                      z
establish that    2   2
                        ;z    when     = 1 is optimal.8 Thus, the distributional externality from
is positive and the baseline model will only have          > b if the negative extensive externality
from    is su¢ ciently strong, which, according to Proposition 4, it proves to be at low .


3.2     Partial Retention of Uninformed Matches

Consider now the case where uninformed retention is unconstrained by                           1. The follow-
ing proposition shows that           is constrained e¢ cient. Any ine¢ ciencies only appear in the
retention decisions      and :


Proposition 5 For parameters where both the planner and the decentralized lenders choose
  < 1, the decentralized         is constrained e¢ cient. In contrast, the e¢ ciency properties of
the decentralized     are still as in Proposition 3. If       = 0 so that            = b, then         < b for
parameters where both the planner and the decentralized lenders choose                        2 (0; 1) and, by
continuity, there is a       2 (0; 1] such that    < b for any              .
   8
     See speci…cally the proof of Proposition 10. Although Proposition 10 applies to the Walrasian model,
the part of the proof that shows > z2 in any decentralized equilibrium where = 1 is optimal does not
rely on the market clearing condition and is easy to rederive for the baseline model.




                                                   16
The extensive externality from        is negative. Intuitively, the total mass of open matches
falls when uninformed lenders retain a higher fraction of the matches they form. The distri-
butional externality from       is instead positive. Retaining an uninformed match rather than
holding out for an informed one frees up some type !               borrowers in the steady state.
Higher    thus increases    H   and decreases   L,   improving the available distribution. Holding
the informed retention threshold      at its constrained e¢ cient value, Proposition 5 says that
the distributional externality from       dominates the extensive one, leading the planner to
choose a higher value of    than the decentralized lenders.
    Comparing the results in Section 3.1 to Proposition 5 reveals that        becomes the margin
of adjustment when both the planner and the decentralized lenders are constrained by              1.
With this constraint binding, both want to retain more uninformed matches than they form,
so they increase    to form more such matches. However, with            at its constrained e¢ cient
value, Proposition 4 says that the extensive externality from        dominates the distributional
one, hence the planner will increase      less aggressively than the decentralized lenders.
    Notice that the externalities associated with       here and   in Section 3.1 have similar signs
(negative extensive, positive distributional) but the relative strengths di¤er. In particular,
the amount of matching e¤ort         has a stronger e¤ect on the quantity of open matches A
than on the quality distribution     ( ), whereas the probability of uninformed retention       has
a stronger e¤ect on the quality distribution         ( ) than on the quantity A.



4     Ine¢ ciencies with a Walrasian Interbank Market

The analysis so far has assumed that the cost of intermediating capital is forgone investment
in an alternative technology. I now analyze what happens when lenders instead face a cost
of capital that is determined in a Walrasian market.


4.1      Capital Market Clearing

Set g 0 = 0 to eliminate the simple technology and replace Assumption 1 with:

                                                17
                                                     R1
       Assumption 3 y (0) < 1 < y (1) and             0
                                                          y (!) d! < 1


This ensures that not all projects are worth their capital input and that the accumulation
of capital will be bounded.
       Next, introduce into the baseline environment a Walrasian interbank market for capital
with market clearing price R. The price is quoted so that R is the present discounted value
of a lender’s gross cost of funds. Lenders who do not have enough capital to …nance their
matches borrow from the interbank market. For all other lenders, interbank trade is the
opportunity cost of proceeding with a match. The interbank market allows us to abstract
from the distribution of capital across lenders and focus instead on the aggregate capital
stock, which is now endogenously determined.
       The price R adjusts until the equilibrium values of , , and            clear the capital market.
In steady state, the capital market clears when the demand for capital from newly formed
matches equals the supply of capital generated by newly maturing matches. In any given
period, fraction n (!) of type ! …rms are in matches and fractionof these matches mature.
                                                                        R1
The supply of capital generated by newly maturing matches is therefore    0
                                                                            y (!) n (!) d!.9
On the demand side, the fraction of type ! …rms in newly formed matches is given by the
second term on the right-hand side of equation (1). We can see from equation (1) that this
term is simply n (!) in steady state. Since …rm projects each require one unit of capital,
                                                       R1
the demand for capital from newly formed matches is      0
                                                           n (!) d!. The market clearing
condition is therefore:
                                       Z    1
                                                [1   y (!)] n (!) d! = 0                               (9)
                                        0

with n ( ) as de…ned in (2). Equation (9) implicitly assumes that lenders return all the
proceeds from maturing matches back to the interbank market. This is not necessary for the
results. One could instead let lenders eat a small fraction " > 0 so that only (1               ") y ( ) is
   9
    I will keep the assumption of the baseline model that the output from a matured project is paid in full
to the lender. Assuming instead that the lender only gets an exogenous fraction 2 (0; 1) of the output
while the borrower consumes the rest delivers exactly the same results, so setting = 1 eliminates the extra
parameter without changing the insights. In a previous version of the paper, I showed that the main results
are also robust to allowing to be endogenously chosen by the lender.


                                                          18
returned. Larger " would mean a smaller capital stock and thus require a higher R to clear
the interbank market.


4.2    Decentralized Lenders

The price R is taken as given by each individual lender, as is the distribution                                            ( ). The
value of an unmatched lender is now:

                        Z     1
    U = U + p( )                  [[1   p (z         )]   + p (z           ) I (!)] [J (!)           R           U]   (!) d!       (10)
                          0



where J (!) is still as per equation (5). It is straightforward to show that informed retention
still follows a reservation strategy and that, by the recursive structure of the value functions,
lenders in the decentralized economy solve:
                                           n                                  1
                                                                                                                      o
                        max                    D      ; ; ;        ( )j                  ; ; ;               e
                                                                                                         ( );R
                 2[0;z]; 2[0;1]; 2[0;1]

      e
where R     [1       (1                                                                      e in place
                                   )] R. This is the objective function in Lemma 2, but with R
of g 0 . The decentralized problem is thus as before, conditional on the determination of R.
Parallel to Section 3, I will focus …rst on                    = 1. Then, in Section 4.5, I consider                        < 1 and
characterize the optimal choice of .


Proposition 6 De…ne:

                                                          Z    1                                             Z
                                   p( )
   S( ; ;   ( )j )                                                 y (!)    (!) d!       p (z            )        y (!)   (!) d!
                            D ( ; ; 1; ( ) j )             0                                                 0



and:
                                                                                                 Z
                                                     p( )
                 V( ; ;           ( )j )                          1               p (z       )               (!) d!
                                               D ( ; ; 1; ( ) j )                                0

With    = 1, the …rst order conditions for the decentralized problem are:


                                               Si0       e = 0 for i 2 f ; g
                                                     Vi0 R                                                                         (11)


                                                                   19
where Si0 and Vi0 denote the partial derivatives of S ( j ) and V ( j ) with respect to i. A
decentralized equilibrium is then a triple f ;                    ; R g satisfying (11) and market clearing as
per (9). Under Assumption 3 and p (z) su¢ ciently high, there exists an equilibrium with
   2 (0; z) and     2 (0; 1) and, under Assumption 2, this equilibrium is unique.


The condition on p (z) in Proposition 6 is just a lower bound on the endowment of inter-
mediation resources z. It prevents the resource constraint from being so tight that lenders
cannot pursue enough intermediation to clear the interbank market.


4.3      Planner’s Problem

Return to the welfare function in equation (7), setting g 0 = 0. The planner now faces an
aggregate feasibility constraint equivalent to (9). The Lagrange multiplier on this constraint,
 , is the shadow price of capital in the planner’s problem while R is the market price of capital
in the decentralized equilibrium. The planner’s Lagrangian is then:

                                           Z    1
                          L=                        [y (!)         [1    y (!)]] n (!) d!
                               1            0


Proposition 7 With        = 1, the planner’s …rst order conditions are:


                                   Si0     Vi0 r + Xi = 0 for i 2 f ; g                                  (12)


where:
                                                             (1         ) (1   A)
                                   r                    +
                                          1+                  1          (1    )

and:
                               h                      i@           h                    i@
                                                             L                               H
                        Xi         S0 L     V 0Lr                 + S0 H       V 0H r
                                                         @i                              @i

The constrained e¢ cient allocation is then a triple b; b; b satisfying (12) and the aggregate
feasibility constraint in (9). If         is not too small, then b; b; b is unique.



                                                             20
The condition on     in Proposition 7 is su¢ cient, not necessary. We will see in Section 4.5
that the optimality of    = 1 for both the planner and the decentralized lenders requires
above some threshold, so the condition in Proposition 7 is not restrictive.


4.4     Full Retention of Uninformed Matches

We can now compare the decentralized solution to the constrained e¢ cient allocation to see
whether the predictions of the Walrasian model under the restriction of        = 1 di¤er from
those of the baseline model in Section 3.1.


4.4.1   Results with Exogenous Distribution

It follows immediately from equations (11) and (12) that the decentralized equilibrium of
the Walrasian model is constrained e¢ cient in the absence of distributional externalities.
Mathematically, if   ( ) is exogenously reset every period as in Proposition 2, then Xi = 0
                                           e = r implements the planner’s solution.
for i 2 f ; g and a decentralized price of R
   Proposition 2 delivered a decentralized equilibrium with too much matching relative to
screening ( ine¢ ciently high) and too much informed retention ( ine¢ ciently low). Thus,
too much capital was tied up in existing matches because of the extensive externalities from
  and . With a Walrasian market for capital, any over-use of capital will cause the price
of capital to rise, which will then prompt lenders to screen more (lower       ) and be more
selective in who they …nance upon successful screening (higher ). A Walrasian market
therefore prices in the extensive e¤ects seen earlier, guiding the decentralized equilibrium to
the constrained e¢ cient allocation when there are no distributional externalities.
   The key here is that the extensive externalities from     and   have similar e¤ects on the
price of capital, enabling one market clearing price to correct them both. The relationship
lending extension in Appendix B provides an example where this is not the case –in fact, the
extensive externalities from   and    have opposite e¤ects on the price of capital once rela-
tionship lending is introduced –so, even without distributional externalities, the Walrasian



                                              21
market does not correct the extensive e¤ects.


4.4.2      Results with Endogenous Distribution

Return to     ( ) endogenously determined as per equation (3). Then Xi 6= 0 and it is clear
                                                                     e=r
from equations (11) and (12) that a decentralized price, speci…cally R
                                                                                 X
                                                                                      , implements
                                                                                 V0
                                              V0
the planner’s solution if and only if X =     V0
                                                 X   . In other words, there would have to be a
speci…c proportionality between the distributional externalities from        and , as measured
by X and X , otherwise the decentralized equilibrium with market clearing will not be
constrained e¢ cient. This proportionality does not hold in general:


Proposition 8 Fix        = 1. For    2 (0; 1), the decentralized equilibrium with market clearing
involves     > b and      > b. If   were …xed at b, there would be an equilibrium price R that
implements b. If       were …xed at b, an equilibrium price R < R would implement b.


Note that Proposition 8 holds for any discount factor . This includes          = 1, which, from
Section 2.5, eliminates the extensive externalities. Two implications from Proposition 8 are
then immediate. First, the Walrasian market fails to price in the distributional externalities,
even absent any extensive e¤ects. Second, because the Walrasian market did not fail to
price in the extensive e¤ects absent any distributional externalities (Subsection 4.4.1), the
intuition for Proposition 8 must lie in the distributional externalities.
   Recall the negative distributional externality from , which also delivered too little in-
formed retention (      > b) in Proposition 3. Too little capital is thus used in matches with
…rms, so, with a Walrasian interbank market for capital, the price of capital will fall. In-
formed lenders will then become less selective in who they retain (lower ), helping to correct
the ine¢ ciency in . Simultaneously though, a fall in the price of capital will prompt un-
matched lenders to reallocate e¤ort from screening to matching (higher ) and, unless the
distributional externality from      discussed after Proposition 4 is su¢ ciently positive, the
interbank price that corrects the ine¢ ciency in       will “over-correct” the ine¢ ciency in .
Proposition 8 says that the distributional externality from      is never su¢ ciently positive, so

                                               22
the decentralized equilibrium in the Walrasian model with                   = 1 settles on both          and
ine¢ ciently high.10 In a very di¤erent setting, Colombo et al (2014) discuss the acquisition
of information separately from its use. Employing that classi…cation here, the use of infor-
mation (as captured by ) imparts a stronger e¤ect on the distribution of available borrowers
than the acquisition of information (as captured by z                 ).
       A corollary of Proposition 8 is that two prices are necessary to absorb the disproportion-
ality between the distributional externalities from              and : one price that deals with the
e¤ect from       and another that deals with the e¤ect from . Alternatively, the policy-maker
would need an instrument that changes the strength with which R a¤ects                          relative to .
Appendix C explores this further using a matching tax.
       The aggregate implications of Proposition 8 are summarized next:


Proposition 9 In the environment of Proposition 8: (i) uninformed lending is too high; (ii)
informed lending is too low; (iii) total lending is too low.


The …rst two parts of Proposition 9 are intuitive given that unmatched lenders over-do
matching relative to screening while informed lenders are too selective in the types they
retain. The third part then reveals that the composition of informed versus uninformed
lending results in an ine¢ ciently small credit market overall.11


4.5       Optimality of Uninformed Retention

The previous section assumed that uninformed matches are always retained by the planner
and the decentralized lenders. I now remove this assumption and allow the probability of
accepting an uninformed match,             2 [0; 1], to be endogenously chosen:
  10
     As    rises above b, too many uninformed matches are formed and, with = 1, retained. This leads to
an over-use of capital which prevents the price of capital from falling by enough to fully correct the under-use
stemming from . For this reason, there is still      > b.
  11
     Both screening and total credit being ine¢ ciently low contrasts with Dell’Ariccia and Marquez (2006).
In Ruckes (2004), screening and total credit can both fall as economic prospects worsen, but that is a
comparative static result with respect to the aggregate state, not a comparison between the decentralized
equilibrium and the constrained e¢ cient allocation for any given state.



                                                      23
                                    z
Proposition 10 Suppose p            2
                                            is not too low, which is e¤ectively a lower bound on z and
qualitatively similar to the condition in Proposition 6. There exists a                  2 (0; 1) such that
     = b = 1 if and only if             .


The results of Section 4.4 therefore apply whenever the exogenous match separation rate
is su¢ ciently high.
     Figure 1 illustrates what happens for the entire range of separation rates. Details on the
construction of Figure 1 are presented in Appendix D. To simplify the exposition, I assume
that project output is linear in …rm type, speci…cally y (!) = !. The lowest value of
for which lenders in the decentralized economy optimally choose                      = j is denoted by    j,

where j 2 f0; 1g. The analogous thresholds for the planner are denoted by bj . Appendix D
establishes   0   < b0 < b1 and         0    <     1   < b1 but the position of b0 relative to   1   depends
on parameters. For completeness, Figure 1 illustrates both possibilities, with the left panel
drawn for parameters where b0 <               1   and the right panel drawn for parameters where b0 >     1.

Both panels deliver the same messages about the directions of any ine¢ ciencies.
     For low values of , the top row of Figure 1 shows that both the planner and the lenders
in the decentralized economy optimally reject uninformed matches (                       = b = 0). The
quality of an uninformed match is not discovered until it breaks so the opportunity cost of
unknowingly being in a bad match is high when the separation rate is low.
     Notice from the second and third rows of Figure 1 that                    and    are also constrained
e¢ cient for values of      yielding              = b = 0. When uninformed matches are always re-
jected ( = 0), the model is isomorphic to one where …rm types are public information and
there exists a single intermediation technology that delivers a randomly drawn match with
probability pe ( )     p ( ) p (z           ). In this environment, it would be optimal for both the
planner and the decentralized lenders to maximize the contact rate with …rms, pe ( ), given
an endowment of intermediation resources z which need not be fully exhausted. It would also
be the case that the quantity of open matches A and the quality distribution                     ( ) depend
on     only through pe ( ), hence the marginal e¤ect of                 on A and     ( ) is zero when pe ( )


                                                           24
is maximized. The decentralized choice of               is therefore constrained e¢ cient under             = 0.
With both        and     constrained e¢ cient, the Walrasian interbank market can just price in
the net externality from , guiding            to its constrained e¢ cient value.12
       For intermediate values of , the decentralized             in Figure 1 becomes ine¢ ciently high.
This is as in Proposition 8. However, instead of            also being ine¢ ciently high, it is now         that
is ine¢ ciently high. Unmatched lenders get the allocation of resources between matching and
screening correct but are too willing to accept uninformed matches relative to the planner.
Although the ine¢ ciency shows up in              (the probability of accepting an uninformed match)
rather than      (the e¤ort allocation that determines the probability of forming an uninformed
match), the ‡avor of the problem is similar to before: decentralized lenders fund too many
uninformed matches. It is then straightforward to show that Proposition 9 still holds.13
       The result on     here contrasts with the baseline model, where the decentralized                     was
too low (Proposition 5) because of a positive distributional externality. Now, the decen-
tralized      is too high, re‡ecting the combination of the distributional externalities and the
Walrasian market. All else constant,             ine¢ ciently high causes the price of capital to fall.
This prompts both informed and uninformed lenders to be less selective, decreasing                           and
increasing . The negative distributional externality from                 is stronger than the positive dis-
tributional externality from         and hence the decentralized           is pushed above its constrained
e¢ cient value. Based on this intuition, we should see a similar reversal in the direction of
ine¢ ciency of      in the baseline model if the simple technology that served as an alternative
to intermediation is changed from a linear technology to one that exhibits su¢ ciently strong
decreasing returns to scale.14 Appendix E con…rms this.
  12
     In the baseline model, where there is no market to price in this net externality, would still be ine¢ ciently
high because the negative distributional externality from dominates the positive extensive one (Section 3).
  13
     To sketch the proof, total capital K is proportional to welfare (thus the decentralized K is too low) and
uninformed lending KN is proportional to A when = z2 , where A is decreasing in K. With too high
and K too low, it follows that KN is too high and informed lending KI is too low.
  14
     All else constant, ine¢ ciently high means that too much capital is invested in the simple technology,
depressing its marginal return when there are decreasing returns to scale. This is similar to a decrease in
the price of capital in the Walrasian model.




                                                       25
    As   continues to increase, Figure 1 shows that              also becomes ine¢ ciently high. Even-
tually, both the planner and the decentralized lenders settle on accepting all uninformed
matches (    = b = 1 as in Proposition 10) with              > b and      > b as per Proposition 8.



5     Endogenous Resource Constraint

The analysis so far has assumed that intermediation resources z are exogenous. I now extend
the Walrasian model of Section 4 to consider what happens when z is endogenously chosen by
unmatched lenders. In particular, instead of being endowed with z units of e¤ort, unmatched
lenders now choose an amount of labor z to hire, along with choosing how to allocate this
labor between matching and screening.
    Denote by L the total amount of labor available in the economy. For the moment, labor
is inelastically supplied at wage W each period, where W is an equilibrium object. There
are two changes to the analysis. First, the value of an unmatched lender becomes:
                           Z     1
 U=      Wz + U + p( )               [[1   p (z   )]    + p (z     ) I (!)] [J (!)   R   U]   (!) d!
                             0
                                                                                                 (13)
Second, the newly introduced labor market has to clear:


                                                  Az = L                                         (14)

The left-hand side of (14) is the aggregate demand for labor by unmatched lenders while the
right-hand side is aggregate labor supply. To avoid unnecessarily complicating the analysis,
workers deposit all of their labor income back into the banking system so that capital market
clearing is still given by equation (9).
    The rest of the details are collected in the proof of the following proposition:


Proposition 11 Suppose L is not too low. Then there is a                     < 1 above which the de-
centralized equilibrium has more matching and less screening than the constrained e¢ cient
allocation, even when the amount of intermediation resources z is endogenized.

                                                       26
Allowing z to be endogenously chosen introduces the possibility of an individual lender
devoting more resources         to the matching technology without also devoting fewer resources
z         to screening. The key insight from Proposition 11 is that under-investment in screening,
as found in Proposition 8, is robust to this possibility.
         Figure 2 presents a concrete example. As in Figure 1, project output is given by y (!) =
    !. The intermediation technologies are characterized by p (x) = 1                    exp (      x), which
satis…es the curvature assumptions imposed earlier. Labor supply is normalized to L = 1
and the …gure is drawn for        = 1:75 and      = 2:5. Figure 2 plots the decentralized equilibrium
and the constrained e¢ cient allocation for all values of            where       = b = 1 is optimal. The
exception is the top right panel, which zooms into the top left panel for a subset of .
         Notice from Figure 2 that the decentralized acquisition of intermediation resources is
approximately e¢ cient (i.e., z           zb). Appendix F presents some derivations that support
this result. Speci…cally, I use a second-order Taylor approximation around the constrained
e¢ cient allocation to show that any deviations in             and     in the neighborhood of the plan-
ner’s b and b will have only a second-order e¤ect on z. In other words,                       and     can be
ine¢ cient without a large ine¢ ciency in z. Appendix F also shows that all of the following
are approximately e¢ cient when z is approximately e¢ cient: the total mass of open matches
A, the total amount of credit K, and total welfare W. It is still the case that uninformed
credit is ine¢ ciently high and informed credit is ine¢ ciently low, but the overall welfare loss
is small when labor is inelastically supplied in a Walrasian market.
         Appendix G outlines what happens if labor supply is instead endogenous and elastic to
the wage. With more intermediation resources, capital can be better allocated to borrowers.
This generates more output and allows more loans to be made, relaxing the market clearing
constraint on capital. Workers do not internalize this when choosing how much labor to
supply to the intermediaries. The decentralized labor supply is then too low relative to the
constrained e¢ cient allocation, as is the decentralized z.15 There is still under-investment
    15
    The decentralized z would also be too low if z were e¤ort exerted directly by the banker at some increasing
disutility. The reason would again be failure to internalize that intermediation resources relax the capital
market constraint. See Appendix G for further discussion.


                                                      27
in screening and now there can also be under-investment in matching (i.e., both       and z
are too low). Informed lenders are still too selective in who they retain. Uninformed credit
is again too high but the approximate e¢ ciency result on total credit disappears. Instead,
there is too little credit overall and the welfare losses are more substantial.



6    Conclusion

A standard intuition from models with asymmetric information about asset values is that
screening imparts adverse selection on others buying in the same market. Buyers fail to
internalize this, so screening is ine¢ ciently high. However, adverse selection is technically
imparted by the retention decision of a buyer who has successfully screened, not by the act
of screening itself. I show that this distinction is critical when the cuto¤ between pro…table
and unpro…table assets is endogenously determined. In the context of banking, failure to
internalize the adverse selection problem means that informed lenders (i.e., those who have
successfully screened borrowers) are too selective in the types they retain relative to a social
planner who faces the same technologies and constraints. This implies an under-use of
capital. The price of capital then falls to encourage the retention of more borrower types.
As this happens, the bene…t of being informed rather than uninformed also falls, prompting
a reallocation of intermediation e¤ort from screening to matching. Screening is ine¢ ciently
low in the decentralized equilibrium, not ine¢ ciently high. While I have illustrated these
forces using lenders who …nd and screen borrowers, a similar insight could also apply to …rms
who engage in R&D by …nding and screening ideas.




                                               28
References
Attar, A., T. Mariotti, and F. Salanié. 2011. “Nonexclusive Competition in the Market for
  Lemons.”Econometrica, 79(6): 1869-1918.

Becsi, Z., V. Li, and P. Wang. 2013. “Credit Mismatch and Breakdown.”European Economic
  Review, 59(1): 109-125.

Broecker, T. 1990. “Credit-Worthiness Tests and Interbank Competition.” Econometrica,
  58(2): 429-452.

Cao, M. and S. Shi. 2001. “Screening, Bidding, and the Loan Market Tightness.” European
  Finance Review, 5(1-2): 21-61.

Colombo, L., G. Femminis, and A. Pavan. 2014. “Information Acquisition and Welfare.”
  Review of Economic Studies, 81(4): 1438-1483.

Dávila, E. and A. Korinek. 2018. “Pecuniary Externalities in Economies with Financial
 Frictions.”Review of Economic Studies, 85(1): 352-395.

Dell’Ariccia, G. and R. Marquez. 2006. “Lending Booms and Lending Standards.” Journal
  of Finance, 61(5): 2511-2546.

Direr, A. 2008. “Multiple Equilibria in Markets with Screening.” Journal of Money, Credit
  and Banking, 40(4): 791-798.

Elliott, M. and F. Nava. 2019. “Decentralized Bargaining in Matching Markets: E¢ cient
  Stationary Equilibria and the Core.”Theoretical Economics, 14(1): 211-251.

Fishman, M. and J. Parker. 2015. “Valuation, Adverse Selection, and Market Collapses.”
  Review of Financial Studies, 28(9): 2575-2607.

Fishman, M., J. Parker, and L. Straub. 2020. “A Dynamic Theory of Lending Standards.”
  Mimeo.

Fuchs, W. and A. Skrzypacz. 2015. “Government Interventions in a Dynamic Market with
  Adverse Selection.”Journal of Economic Theory, 158(A): 371-406.

Gehrig, T. and R. Stenbacka. 2011. “Decentralized Screening: Coordination Failure, Multiple
 Equilibria, and Cycles.”Journal of Financial Stability, 7(2): 60-69.

Gorton, G. and G. Pennacchi. 1995. “Banks and Loan Sales: Marketing Non-marketable
 Assets.”Journal of Monetary Economics, 35(3): 389-411.

Grossman, S. and J. Stiglitz. 1980. “On the Impossibility of Informationally E¢ cient Mar-
  kets.”American Economic Review, 70(3): 393-408.

Guerrieri, V., R. Shimer, and R. Wright. 2010. “Adverse Selection in Competitive Search
 Equilibrium.”Econometrica, 78(6): 1823-1862.



                                            29
Hauswald, R. and R. Marquez. 2006. “Competition and Strategic Information Acquisition
  in Credit Markets.”Review of Financial Studies, 19(3): 967-1000.

Heider, F. and R. Inderst. 2012. “Loan Prospecting.” Review of Financial Studies, 25(8):
  2381-2415.

Hosios, A. 1990. “On the E¢ ciency of Matching and Related Models of Search and Unem-
  ployment.”Review of Economic Studies, 57(2): 279-298.

Keys, B., T. Mukherjee, A. Seru, and V. Vig. 2010. “Did Securitization Lead to Lax Screen-
  ing? Evidence from Subprime Loans.”Quarterly Journal of Economics, 125(1): 307-362.

Livshits, I., J. MacGee, and M. Tertilt. 2016. “The Democratization of Credit and the Rise
  in Consumer Bankruptcies.”Review of Economic Studies, 83(4): 1673–1710.

Llosa, L. and V. Venkateswaran. 2017. “E¢ ciency with Endogenous Information Choice.”
  Mimeo.

Lorenzoni, G. 2008. “Ine¢ cient Credit Booms.”Review of Economic Studies, 75(3): 809-833.

Mackowiak, B. and M. Wiederholt. 2018. “Lack of Preparation for Rare Events.”Journal of
 Monetary Economics, 100(1): 35-47.

Purnanandam, A. 2011. “Originate-to-Distribute Model and the Subprime Mortgage Crisis.”
  Review of Financial Studies, 24(6): 1881-1915.

Rothschild, M. and J. Stiglitz. 1976. “Equilibrium in Competitive Insurance Markets: An
  Essay on the Economics of Imperfect Information.”Quarterly Journal of Economics, 90(4):
  629-649.

Ruckes, M. 2004. “Bank Competition and Credit Standards.” Review of Financial Studies,
 17(4): 1073-1102.

Shimer, R. and L. Smith. 2001. “Matching, Search, and Heterogeneity.”Advances in Macro-
  economics, 1(1): Article 5.

Vanasco, V. 2017. “The Downside of Asset Screening for Market Liquidity.” Journal of
  Finance, 72(5): 1937-1982.

Verrecchia, R. 1982. “Information Acquisition in a Noisy Rational Expectations Economy.”
  Econometrica, 50(6): 1415-1430

Yashiv, E. 2007. “Labor Search and Matching in Macroeconomics.” European Economic
  Review, 51(8): 1859-1895.




                                           30
                                      Figure 1:
          Walrasian Model with Endogenous Uninformed Retention Strategy ( )




Notes: This …gure is drawn for y (!) = !, where 2 (1; 2) to satisfy Assumption 3.
Consider z > 2p 1 4(2   4
                           )
                                  za ( ) with > 34 so that b1 < 1. If 2 34 ; 0 where
 0    1:6274, the right panel applies for all z > za ( ). Otherwise, if 2 ( 0 ; 2), there exists
a zb ( ) > za ( ) such that the left panel applies for z 2 (za ( ) ; zb ( )) while the right panel
applies for z > zb ( ).




                                               31
                                      Figure 2:
             Walrasian Model with Endogenous Intermediation Resources (z)




Notes: This …gure is drawn for y (!) = 1:75! and p (x) = 1 exp ( 2:5x) with L = 1.
The results are plotted for values of where both the planner and the decentralized lenders
optimally choose = 1. The top right panel zooms into the top left panel for a subset of .




                                           32
               Online Appendix for
“Ine¢ ciently Low Screening with Walrasian Markets”

                     Kinda Hachem

                  UVA Darden and NBER



                       April 2020




                           1
Appendix A –Proofs
Proof of Lemma 1
The lender chooses 2 [0; z], 2 [0; 1], and I (!) 2 [0; 1] for each ! 2 [0; 1] to maximize U .
By standard contraction mapping arguments, there is a unique U satisfying the recursion in
equation (6) with J (!) as per (5). The …rst order condition for I (!) is just:
                                                                                  sign
                                                       1    (!)         0   (!) = J (!)        g0          U
where 0 (!)     0 and 1 (!)     0 are Lagrange multipliers on I (!)                                                             0 and I (!)             1
respectively. Complementary slackness holds as usual. De…ning:

                                                                   arg min jJ (!)         g0         Uj
                                                                        !2[0;1]

and using J 0 ( ) > 0, which follows from the assumption of y 0 ( ) > 0, completes the proof.

Proof of Lemma 2
Rearrange (5) to isolate J (!). Substitute into (6) then rearrange (6) to isolate U . This
gives:

                                              R1                                                           h                            i
                         0                                                                                          y(!)            0
                 1    g + p( )                    0
                                                      [[1     p (z  )] + p (z                  ) I (!)]        1     (1 )
                                                                                                                                g    (!) d!
     U=                                                          h                                                 R1                  i
             1                   1+           (1       )
                                                           p ( ) [1 p (z    )]             + p (z              )        I (!)   (!) d!
                                          1    (1        )                                                         0


Multiply both sides by 1                               (1          ) then rewrite as:

                 2                                          R1                                                                                         3
                                     1                                                                                                       0
         1                   1       (1       )
                                                  p( )       0
                                                                 [[1  p (z  )]           + p (z      ) I (!)] [ y (!)                       g]   (!) d!
U=               4g 0 +                                              h                                       R1                                    i    5
     1                               1+               (1    )
                                                                p ( ) [1 p (z             )]    + p (z     ) 0 I (!)                        (!) d!
                                                  1    (1     )
                                                                                                                                                     (A.1)
Invoking Lemma 1 completes the proof.

Proof of Lemma 3
The …rst step is to show that the planner’s informed retention strategy, I ( ), can also be
reduced to a scalar . Use equation (2) to substitute n (!) out of the welfare function (7):

                             Z       1
             1       0                                                     p ( ) [[1 p (z             )]       + p (z  ) I (!)]
 W=                  g +                 [ y (!)             g0]                                                                       d!
         1                       0                                     + (1     ) p ( ) [[1         p (z        )] + p (z     ) I (!)]
                                                                                                                                       (A.2)
Taking derivatives with respect to I (!) gives:



                                                                                   2
                                                      @W sign
                                                            = y (!)                  g0
                                                     @I (!)
                                                                  g0                                        g0
In words, the planner sets I (!) = 1 if y (!) >                         and I (!) = 0 if y (!) <                 . He is indi¤erent
                                                        g0                   0
between any I (!) 2 [0; 1] for y (!) =                       . Given y ( ) > 0, this is a reservation strategy of
                                                                                           0
the form de…ned in Lemma 1, but with such that y ( ) = g .
   The second step is to show that the planner’s objective function can be rewritten as
A      ( ; ; ; ( ) ; g 0 ). In steady state, equations (1) and (3) imply:

                     n (!) = p ( ) [[1                 p (z      )]         + p (z        ) I (!)]      (!) A                  (A.3)
Using (A.3) to substitute n (!) out of the welfare function (7):

                              Z       1
            1    0    1
  W=            g +       A               p ( ) [[1    p (z       )]        + p (z        ) I (!)] [ y (!)           g0]   (!) d!
        1                      0

The reservation strategy result above then implies:

                                           W _ g0 + A                ( ; ; ;          ( ) ; g0)
so the planner does indeed maximize A      ( ; ; ; ( ) ; g 0 ).
    The last step is to show that A as de…ned in equation (4) satis…es (8). Using (A.3) to
substitute n (!) out of (4) gives:
                                                                Z 1
                     1
           A=1             Ap ( ) [1 p (z    )] + p (z        )     I (!) (!) d!
                                                                                                   0

Rearrange to isolate A and use the reservation strategy result above to get:
                                                                       1
                A=                               h                                                 R1            i
                                  1
                       1+                  p ( ) [1      p (z          )]        + p (z        )        (!) d!

This is just D ( ; ; ;        ( ) j1) 1 , completing the proof.

Proof of Proposition 1
Notice that = 1 in equation (3) implies ( ) = 1. Also note from the de…nition of D ( j )
in Lemma 2 that = 1 implies D ( j ) = 1 for any 2 [0; 1]. Therefore, both the planner
and the decentralized lenders are choosing 2 [0; z], 2 [0; 1], and 2 [0; 1] to maximize
  ( ; ; ; 1; g 0 ). This will give them the same …rst order conditions, completing the proof.

Proof of Proposition 2
Since lenders in the decentralized economy take as given the distribution of available …rms,
we can solve the problem of an unmatched lender for a general distribution ( ) then impose
  ( ) = 1 to see what happens under the assumptions of Proposition 2.


                                                                 3
                                                                              @U
   The decentralized choice of                          satis…es              @
                                                                                     = 0, where U is as de…ned in equation (6) with
  = 1. This yields:

 Z       1
                                                        p ( ) p0 (z                        )
              1        p (z         ) (1   I (!)) +                                            (1        I (!)) [J (!)            g0           U]     (!) d! = 0
     0                                                       p0 ( )

which, using Lemma 1, can be rewritten as:

                                                        Z                                                          Z          1
                                p ( ) p0 (z        )                                       0
 1           p (z            )+                                     [J (!)             g             U]     (!) d!+               [J (!)         g0       U]     (!) d! = 0
                                     p0 ( )                 0
                                                                                                                                                               (A.4)
We also know from the proof of Lemma 1 that the decentralized choice of                                                                          satis…es:

                                                                J( )              g0               U =0                                                        (A.5)
Using (5) to substitute out J ( ), we can rewrite (A.4) as:

                                                        Z                                                           Z   1
                                p ( ) p0 (z        )
 1           p (z            )+                                     [y (!)             y ( )]            (!) d! +            [y (!)        y ( )]       (!) d! = 0
                                     p0 ( )                 0
                                                                                                                                                               (A.6)
and (A.5) as:

                                                            g0               (1                )
                                              y( ) =                +                              [(1      )U         g0]                                     (A.7)

Next, use (A.1) to write:

                         2                   h                               R                     R1                                                                   i3
                                      p( )
                 1                  1 (1 )
                                              [1       p (z             )] 0
                                                                             [ y (!) g 0 ] (!) d! + [ y (!)                                             g0]    (!) d!
U=                       4g 0 +                                                    h             R         i                                                            5
             1                                          1+              (1 )
                                                                              p ( ) 1 p (z      ) 0 (!) d!
                                                                    1    (1 )
                                                                                                                                                               (A.8)
when              = 1. Substituting (A.8) into (A.7) and rearranging, we can simplify (A.7) to:

                                                                              Z                                                        Z   1
                  g0           (1     )p( )
y( ) =                 +                    [1         p (z              )]            [y (!)             y ( )]    (!) d! +                   [y (!)     y ( )]   (!) d!
                           1        (1    )                                      0
                                                                                     (A.9)
The decentralized equilibrium solves equations (A.6) and (A.9), conditional on the speci…-
cation of the distribution ( ). Proposition 2 sets ( ) = 1 so equation (A.6) becomes:

                                                                Z                                              Z   1
                                   p ( ) p0 (z          )
         1        p (z          )+                                      [y (!)                 y ( )] d! +             [y (!)       y ( )] d! = 0 (A.10)
                                        p0 ( )                   0

and equation (A.9) becomes:

                                                                                       4
                                                                  Z                                  Z   1
           g0            (1         )p( )
  y( ) =        +                         [1        p (z     )]           [y (!)    y ( )] d! +              [y (!)    y ( )] d!
                    1             (1    )                             0
                                                                                           (A.11)
                                                            0
    Consider now the planner. We cannot use y ( ) = g as derived in the proof of Lemma 3
because that derivation used n ( ) based on ( ) endogenous. With ( ) = 1, we know from
the statements of Lemmas 2 and 3 that the planner’s problem is the same as the problem
of the decentralized lenders evaluated at = 1. We can thus characterize the planner’s
solution as an intersection between equations (A.10) and (A.11) when the latter is evaluated
at = 1. The decentralized equilibrium is instead an intersection between (A.10) and (A.11)
when the latter is evaluated at the actual .
    It will help to visualize these equations in a two-dimensional space with on the hor-
izontal axis and on the vertical axis. Since p ( ) is concave, (A.10) de…nes a negative
relationship between and . Di¤erentiating (A.11):
                h                             i
                                  p( )p0 (z  ) R                       R1
         d        1  p (z    ) +     p 0 ( )     0
                                                   [y (!) y ( )] d! +     [y (!) y ( )] d!
             =                  h                                    i
         d                        1 (1 )
                                             + p ( ) [1 p (z
                                                                        0
                                                                  ) ] y( )
                                               (1    )                                      p0 ( )


Equation (A.11) thus achieves a critical point at any intersection with (A.10). Taking second
derivatives reveals that any critical point of (A.11) is a maximum. Now, for any given ,
                               sign         0
di¤erentiate (A.11) to get @@ = y ( ) g . This is zero at = 0 and positive otherwise,
meaning that (A.11) evaluated at = 1 lies above (A.11) evaluated at < 1 when plotted
in - space. It must then be the case that the planner’s solution involves higher and lower
  than the decentralized equilibrium.

Proof of Proposition 3
The proof of Lemma 3 established that the planner’s choice of                                solves:

                                                             b   g0
                                                           y   =                                                            (A.12)

when ( ) is endogenous. For the decentralized solution, return to the proof of Lemma 2,
speci…cally the derivations conditional on a general distribution ( ). Substitute (A.6) into
(A.9) to write:

                                                                              Z
                    g0             (1   ) p2 ( ) p0 (z                    )
      y( ) =             +                                                         [y ( )   y (!)]            (!) d!        (A.13)
                              1      (1  )     p0 ( )                         0

at the decentralized equilibrium. With some abuse of notation,     ( ) is used here to denote
the distribution ( ) evaluated at the equilibrium values of and when              = 1. This
distribution will be formally derived in the proof of Proposition 4. For now, it su¢ ces to
note that > 0 implies some availability for each type so (!) > 0 for all !. Therefore,
   > 0 in (A.13) implies y ( ) > g and, with y 0 ( ) > 0, we can conclude > b.
                                   0




                                                                  5
Proof of Proposition 4
Using the notation de…ned at the beginning of Subsection 3.1.2, (!) = L for any ! <
and (!) = H for any !        . With = 1, evaluating equations (2) and (3) at I (!) = 0
yields:

                                                                     =A
                                      L   =
                                                  + (1          ) p ( ) [1     p (z      )]
while evaluation at I (!) = 1 yields:

                                                                      =A
                                                  H   =
                                                              + (1          )p( )
where, from equation (4), we can get:

                                                                   (1         ) p ( ) p (z   )
               A=                                      1+                                                                   (A.14)
                             + (1         )p( )                  + (1         ) p ( ) [1 p (z                )]
   The decentralized equilibrium satis…es equations (A.6) and (A.13) with                                             (!) as just
derived. For ease of reference, de…ne:

                                                                          p ( ) p0 (z         )
                                 f1 ( )           1    p (z          )+
                                                                               p0 ( )
and:

                                              H           + (1        ) p ( ) [1 p (z             )]
                             f2 ( )               =
                                              L                      + (1      )p( )
so that (A.6) can be expressed as:
                                                  R1
                                          f1 ( )     [y (!) y ( )] d!
                                                 =R                                                                         (A.15)
                                          f2 ( )     [y ( ) y (!)] d!
                                                   0

at the equilibrium ( ; ).
    We know from the proofs of Lemma 3 and Proposition 3 that the constrained e¢ cient
choice of satis…es equation (A.12) so it just remains to get the planner’s …rst order condition
for . Return to the welfare function as written in (A.2) and take the derivative with respect
to to get:

                     Z                                                                   p( )p0 (z       )
       @W                1
                                           g0 1          p (z        ) (1     I (!)) +      p0 ( )
                                                                                                             (1   I (!))
          _ p0 ( )            y (!)                                                                                        d!
       @             0                                [ + (1          ) p ( ) [1      p (z        ) (1        I (!))]]2

when = 1. Setting to zero and using the reservation strategy result for I ( ) in Lemma 3
yields:




                                                                 6
                                                     R1h                                  i
                                           f1 (b)     b y (!)                    y b    d!
                                           f22 (b)
                                                   = Rbh                              i                                               (A.16)
                                                      0
                                                        y b                      y (!) d!
                                                                        g0
where I have also used (A.12) to substitute out                              .
                                             f1 ( )                                                                 d f1 ( )
   Assumption 2 is su¢ cient for             f2 ( )
                                                       to be increasing in . Speci…cally,                          d f2 ( )
                                                                                                                               > 0 requires:

                                                                                                     h                                     i
                                                                                                         p( )p0 (z   )            p0 ( )
       p( )          p00 (z        ) p00 ( )           p0 (z        )   (1                ) f1 ( )         p(z     )           +(1 )p( )
   2                                 + 0                              >
       p0 ( )        p0 (z         )  p ( )            p (z         )                     + (1         ) p ( ) [1        p (z        )]

The right-hand side of the above inequality is maximized at = 0 so a su¢ cient condition
can be found by imposing = 0 and rearranging to get Assumption 2.
    Therefore, under Assumption 2, equation (A.15) de…nes a negative relationship between
   and . For a given value of , it also yields a higher value of than equation (A.16). As in
the proof of Proposition 2, it will help to visualize this in a two-dimensional space. Imagine
now a plot with on the horizontal axis and on the vertical axis. Equation (A.15) maps
a downward-sloping curve that lies above the curve mapped out by (A.16).
    Next compare equations (A.12) and (A.13). The planner’s is independent of so (A.12)
is just a vertical line on the plot. If = 0, then equation (A.13) overlaps this vertical line
so we have      = b and      > b. If > 0, then equation (A.13) intersects the vertical line
de…ned by (A.12) at = 0 but lies to the right for any > 0. By continuity,          > b extends
to any below some positive threshold.

Proof of Proposition 5
Start with the planner. Taking derivatives of the welfare function in (A.2) with respect to
  and , we get:
                    Z
            @W sign 1                         y (!) g 0
                 =                                                              d!
            @        0 [ + (1     ) p ( ) [[1 p (z    )] + p (z      ) I (!)]]2
and:

                                   h                                                                                                     i
          Z   1   [ y (!)      0
                              g]       1    p (z        )+       p( )p0 (z       )
                                                                                          + p (z            )      p( )p0 (z    )
                                                                                                                                    I (!)
@W sign                                                             p0 ( )                                            p0 ( )
    =                                                                                                                                        d!
@         0                        [ + (1          ) p ( ) [[1         p (z          )]       + p (z            ) I (!)]]2

The proposition considers parameters where b < 1, implying either b = 0 or b solving
@W
@
   = 0. In both cases, this delivers:

                                                        Z    1
@W sign                       p ( ) p0 (z          )                                          [ y (!) g 0 ] I (!)
    =         p (z      )                                                                                                                              d!
@                                  p0 ( )                0       [ + (1              ) p ( ) [[1 p (z       )] + p (z                     ) I (!)]]2



                                                                   7
                                                                                                                                                             @W
Invoking the reservation strategy result from the proof of Lemma 3, the solution to                                                                          @
                                                                                                                                                                  =0
is just b = z2 . The solution to @W
                                 @
                                    = 0 is then:

                                                                        !2 Z         bh                                      Z
                      (1        ) p2           z                                                                  i              1   h                   i
  1+                            z
                                               2
                                                               z
                                                                                             y (!)         y b        d! +               y (!)    y b        d! = 0
        + (1               )p   2
                                           1           p       2
                                                                    b            0                                           b

                                                                                                                                                             (A.17)
with y b = g .
              0



   Consider now the decentralized lenders. Notice:

                  @        L             (1   )2 p2 ( ) p (z                                       ) [1        p (z   )] (1           )
                               =                                                                                                           <0
                   @                   [ + (1    ) p ( ) [[1                                     p (z          )] + p (z             ) ]]2
and:
                                                                   @    H                             @    L
                                                                            =                                  >0
                                                                    @                    1             @
when 2 (0; 1). As with the other choice variables, this distributional externality (in addition
to the extensive externality) is not internalized by the decentralized lenders when choosing
 . Taking derivatives of the unmatched value U in (A.1) with respect to and , we get:
                               Z
                      @U sign 1        [y (!) + U ]
                           =                          g0    U    (!) d!
                      @         0    1      (1   )
and:

                      2                                                                                3
             Z    1                 p (z                   )       p( )p0 (z         )
                                                                                             I (!)
   @U sign            4 +                                             p0 ( )
                                                                                                       5         [y (!) + U ]
       =                                                                    p(   )p0 (z           )
                                                                                                                                          g0     U      (!) d!
   @          0                        1           p (z            )+                                          1      (1   )
                                                                                 p0 (    )


The proposition considers parameters where                                                            < 1, implying either                     = 0 or        solving
@U
@
   = 0. In both cases, this delivers:

                                                                                     Z       1
    @U sign                                p ( ) p0 (z                      )                                [y (!) + U ]
        =         p (z             )                                                             I (!)                                   g0      U      (!) d!
    @                                           p0 ( )                                   0                 1      (1   )

Invoking the reservation strategy result from the proof of Lemma 1, the solution to @U  @
                                                                                           =0
              z                                           z
is just     = 2 , which is constrained e¢ cient given b = 2 as derived earlier. The solution to
@U
 @
    =  0 is then:

                                                                         !Z                                                  Z
                                                   z
                       (1     ) p2                 2
                                                                                                                                 1
  1+                                                                                         [y (!)        y ( )] d! +               [y (!)       y ( )] d! = 0
         + (1            ) p z2 1                      p       z
                                                               2                 0
                                                                                                                                                             (A.18)
with:


                                                                                             8
                                                                                          Z
              g0      (1     ) p2 z2                             1                            1
    y( ) =         +                                                                              [y (!)       y ( )] d!        (A.19)
                     1      (1     )                       (1       )p2 ( z2 )
                                            1+       +(1        )p( z2 )[1 p( z2 )]


If = 0, then y ( ) = g and hence = b. If > 0, then y ( ) > g and hence > b. To
                         0                                            0


compare      and b , imagine a plot with on the horizontal axis and on the vertical axis.
Equation (A.17) maps an upward-sloping curve that lies above the upward-sloping curve
mapped out by (A.18). The planner’s is independent of so y b = g is just a vertical
                                                                            0



line on the plot. If = 0, then equation (A.19) overlaps this vertical line so we have < b.
If > 0, then equation (A.19) intersects this vertical line at = 0 but lies to the right for
any > 0. By continuity,       < b extends to any below some positive threshold.

Proof of Proposition 6
Start by deriving the …rst order conditions in (11). The lender chooses and to maximize
 ( ; ;1; ( );Re)                                                                        e
D( ; ;1; ( )j )
                 , where ( ) and D ( j ) are as de…ned in Lemma 2. Expand  ; ; 1; ( ) ; R
to write:

                                                 Z   1                                                Z
          ; ; 1;        e
                    ( );R       =     p( )               y (!)         (!) d! p (z   )                         y (!)   (!) d!
                                                 0                                                         0
                                                                          Z
                                       p( ) 1            p (z           )            e
                                                                              (!) d! R
                                                                                 0

The lender’s objective function can then be expressed as:

                       ; ; 1;           e
                                    ( );R
                                             =S            ; ;        ( )j            V       ; ;     ( )j       e
                                                                                                                 R
                   D   ; ; 1;       ( )j
where S ( j ) and V ( j ) are as de…ned in Proposition 6. Since lenders in the decentralized
                                                                                         e=0
economy take as given a distribution ( ), their …rst order conditions are simply Si0 Vi0 R
for i 2 f ; g.
    Now move to existence and uniqueness. Use n ( ) as per equation (2), with = 1 as well
as I (!) = 1 if !      and I (!) = 0 otherwise, to rewrite the market clearing condition in
equation (9) as:                              R1
                              1 p (z     )       [y (!) 1] d!
                                           =R                                          (A.20)
                                  f2 ( )         [1   y (!)] d!
                                               0

where f2 ( ) is as de…ned in the proof of Proposition 4.
   Next, simplify the decentralized …rst order conditions. Going through the algebra, we
…nd that S 0 V 0 Re = 0 reduces to:




                                                                9
                                                  "                          R                                  #
                  e
                  R               (1      )p( )       [1 p (z  )] 0 [y (!) y ( )]                      (!) d!
         y( ) =       +                                 R1                                                           (A.21)
                              1         (1    )       + [y (!) y ( )] (!) d!

                                e the condition S 0 V 0 R
Using (A.21) to substitute out R,                         e = 0 simpli…es to (A.15) from the
baseline model. Therefore, with a Walrasian interbank market and = 1, the decentralized
                                                                                       Re
equilibrium is a pair ( ; ) that solves equations (A.15) and (A.20). The price R     1 (1 )
can then be recovered from (A.21).
   Let l ( ) and k ( ) denote the functions implicitly de…ned by (A.15) and (A.20) re-
spectively. Proving existence of equilibrium thus amounts to proving the existence of a pair
( ; ) such that        = l ( ) = k ( ).
   Begin with equation (A.20). De…ne such that y             1. Assumption 3 and y 0 ( ) > 0
imply that exists uniquely and is interior. Di¤erentiating (A.20) reveals 0k        = 0 and
 0
 k( ) y( )     y       < 0 for 6= . A necessary condition for        > 0 is k       > 0. To
                                                        R1
                                                                [y(!) 1]d!
ensure    k       > 0, we need p (z) > 1                R                    or, equivalently, p (z) su¢ ciently high.
                                                            0   [1 y(!)]d!
    The properties of k ( ) just established also imply existence of unique points k;1 2 0;
and k;2 2 ; 1 de…ned by k k;1             0 and k k;2         0. The restriction to k;1 > 0 and
 k;2 < 1 re‡ects the fact that k ( ) is not de…ned at    = 0 or = 1 under Assumption 3 and
p (z) < 1.
    Turn to equation (A.15). When evaluated at = , the right-hand sides of (A.15) and
(A.20) are the same so p (z) su¢ ciently high also ensures l        > 0.
    We can show l       < k       in two steps. First, the left-hand side of (A.20) is increasing
in . Second, the left-hand side of (A.15) equals the left-hand side of (A.20) plus a function
of . This function is zero if = 0 and positive otherwise. Therefore, l           < k       .
    The following lemma completes the existence proof by …nding a point 2 k;1 ; such
that l ( ) > k ( ):

Lemma A.1 If              l       k;1   exists, then    l           > k
                                                                  k;1            k;1  . If   l   k;1    does not exist, then
there is a point      z   2        k;1 ;    such that       l ( z) = z >         k ( z ).


Proof. Equation (A.20) and the de…nition of k;1 yield:
                         R1                    R1
                                [y (!) 1] d!          y (!) y k;1 d!
             1 p (z) = R k;1                 < R k;1
                            k;1                   k;1
                          0
                                [1 y (!)] d!    0
                                                      y k;1   y (!) d!
where the inequality follows from y k;1 < y        1. Return to equation (A.15). If l k;1
exists, then the above inequality implies l k;1 > 0      k   k;1 . If l k;1 does not exist,
then it must be the case that:
                          R1
                                 y (!) y k;1 d!         p (z) p0 (0)
                             k;1
                          R k;1                   > 1 +
                                 y k;1   y (!) d!          p0 (z)
                           0




                                                                    10
            R1
        d        [y(!) y(x)]d!
With   dx
            R xx         < 0, we can thus look for a point z > k;1 satisfying l ( z ) = z.
             0 [y(x) y(!)]d!
                                                   R1
Substituting = z into equation (A.20) returns 0 y (!) d! = 1. This violates Assumption
3 so we can conclude k ( ) < z and thus l          < z. Therefore, if l k;1 does not exist,
there is a point z 2 k;1 ; such that l ( z ) = z > k ( z ).
    We have now shown existence of an equilibrium ( ; ) with           2 k;1 ;       (0; 1) and
   = k ( ) 2 (0; z). Consider next uniqueness. Under Assumption 2, the left-hand side of
(A.15) is increasing in . It is also straightforward to see that the right-hand side of (A.15)
is decreasing in . Therefore, 0l ( ) < 0. We already know 0k ( ) > 0 for any 2 k;1 ;
so, to conclude uniqueness, we just need to show that all equilibria satisfy 2 k;1 ; . We
                                                                      R1
can do this by rearranging equations (A.15) and (A.20) to isolate        y (!) d! in each then
equating to get:
                                 p(    )p0 (z     )                           R
                                       p0 ( )
                                                      [ + (1      ) p ( )]        0
                                                                                       [y ( )     y (!)] d!
             1     y( ) =                                                                                       >0
                                      [1       p (z      )     ] + (1     ) p ( ) [1            p (z       )]
Invoking y            1 and y 0 ( ) > 0 establishes the desired result.

Proof of Proposition 7
Start by deriving the …rst order conditions in (12). Use equation (A.3) with = 1 to rewrite
the planner’s Lagrangian as:
                       Z 1
               1+
          L=         A      y (!)           p ( ) [1 p (z    ) (1 I (!))] (!) d!
               1        0           1+
Following the proof of Lemma 3, it can be shown that the planner still follows a reservation
strategy for informed retention. We can then simplify the planner’s Lagrangian to:

                                 1+        1
                        L=                       S( ; ;      ( ) j1)              V( ; ;         ( ) j1)
                                 1                                      1+
where S ( j ) and V ( j ) are as de…ned in Proposition 6. Notice from these de…nitions:

                                                                        D( j )
                                                  S ( j1) = S ( j )
                                                                        D ( j1)
and:

                                                                        D( j )
                                                  V ( j1) = V ( j )
                                                                        D ( j1)
with D ( j ) and D ( j1) evaluated at                    = 1. The planner’s Lagrangian is therefore:

                 1+       1                                                                     D ( ; ; 1; ( ) j )
            L=                   S( ; ;         ( )j )               V( ; ;           ( )j )
                 1                                           1+                                 D ( ; ; 1; ( ) j1)
and his …rst order condition with respect to i 2 f ; g is:




                                                                11
                                         @                                                 @
       0 = Si0 ( j ) + S 0 ( j )                                Vi0 ( j ) + V 0 ( j )
                                         @i         1+                                     @i
                                                      "                                                                     #
                                                            Di0 ( j ) + D0 ( j ) @@i            Di0 ( j1) + D0 ( j1) @@i
                  + S(j )                 V (j )
                                   1+                                D( j )                              D ( j1)

where S 0 ( j ) @@i is short-hand for S 0 L ( j ) @@iL + S 0 H ( j ) @ @iH . Similarly for V 0 ( j ) @@i
and D0 ( j ) @@i .
   From the de…nition of D ( j ) in Lemma 2:

                                   1          (1        )D( j )                1           1
                                                                          1=
                                                         D ( j1)                         D ( j1)
and:

                                                            1        (1        )
                                          Di0 ( j1) =                              Di0 ( j )

and:

                                                            (1   )
                                      Di0 ( j ) =                    D2 ( j ) Vi0 ( j )
                                                        1     (1   )
for i 2 f ; ; g. Also note that the de…nitions of V ( j ) and D ( j ) together with (8)
imply:

                                                   V ( j1) =              (1        A)
                                                                 1
We can then simplify the planner’s …rst order conditions for i 2 f ; g to:

                                            @
                    Si0 ( j ) + S 0 ( j )
                                             @i
                                 (1       ) (1 A)            S(j )                                                   @
              =              +                                                             Vi0 ( j ) + V 0 ( j )
                      1+          1        (1   )            V (j )        1+                                        @i

Now use (A.3) with = 1 and the reservation strategy result for informed retention to write
the aggregate feasibility constraint in equation (9) as:

         Z    1                                         Z                                                        Z
 p( )             y (!)   (!) d!       p (z         )       y (!)      (!) d! = p ( ) 1             p (z     )            (!) d!
          0                                             0                                                        0

or, equivalently:

                                                        S(j )= V (j )
This allows us to further simplify the planner’s …rst order conditions for i 2 f ; g to:


                                                                  12
                                                                                                        @
                           Si0 ( j )      rVi0 ( j ) + S 0 ( j )                        rV 0 ( j )         =0
                                                                                                        @i
where r is as de…ned in the statement of Proposition 7.
   Now move to uniqueness. Setting g 0 = 0, the welfare function in equation (7) is:
                                          Z 1
                               W=             y (!) n (!) d!                         (A.22)
                                    1       0

Use n ( ) as per equation (2), with                           = 1 as well as I (!) = 1 if !                                    and I (!) = 0
otherwise, to rewrite:

                                                                                  Z                        Z    1
                               p( )      1                     p (z           )
       W=                                                                                y (!) d! +                 y (!) d!          (A.23)
                  1        + (1    )p( )                       f2 ( )               0

Any constrained e¢ cient allocation must satisfy the aggregate feasibility constraint (9)
which, as shown in the proof of Proposition 6, can also be expressed as (A.20). Recall
from the same proof that k ( ) denotes the function implicitly de…ned by (A.20).
   Equation (A.23) with evaluated at k ( ) de…nes a function:
                                                    R1           R
                                  p ( k ( ))         0
                                                       y (!) d!    0
                                                                     y (!) d!
             Wk ( )                                     R
                       1      + (1     ) p ( k ( ))        [1 y (!)] d!                        0

By de…nition, Wk0 b = 0 for any b that is part of a constrained e¢ cient allocation when
 = 1.
   The …rst step in the uniqueness proof is to establish Wk00 b < 0 for any b such that
Wk0 b = 0. Taking derivatives:

                               "              p0 (   k(   ))                                                          #
                                              p(     k(   ))                                       1   y( )
            Wk0 ( ) =                                                     0
                                                                          k   ( )         R                               Wk ( )
                                       + (1          )p(       k   ( ))                        [1      y (!)] d!
                                                                                           0
                                                                    R1
                                                  p ( k ( ))             y (!) d! y ( )
                               +                                     R0
                                   1          + (1     ) p ( k ( ))       [1 y (!)] d!
                                                                        0


It is straightforward to show that Wk0 b = 0 rearranges to:

           p0 ( (b))
                  k                                                  R1                                Rbh                     i
           p( k (b))                                           1       y (!) d!                        0
                                                                                                             y b          y (!) d!
                                   0    b =                           0
                                                                                                                                      (A.24)
                           b
                                   k                  R1                  Rb                               Rb
    + (1      )p       k
                                                 b            y (!) d!       y (!) d!                           [1    y (!)] d!
                                                          0                0                               0


where di¤erentiation of (A.20) implies:




                                                                     13
                            0                                    1                              1    y( )
                            k   ( )=                p0 (z  )                 (1 )p0 ( )
                                                                                          R1                                                 (A.25)
                                              p(z    )[1 p(z   )]
                                                                     +       +(1 )p( )
                                                                                               [y (!)    1] d!

At b such that Wk0 b = 0, the second derivative of Wk ( ) satis…es:


  Wk00 b                         p0 ( )

                =
                                 p( )                 00   b
                                                      k
   Wk     b               + (1           )p( )
                                     p0 ( )
                                     p( )             p00 ( )             p0 ( )
                                                                         (1    ) p0 ( )      0 b
                                                                                                   2
                      +                                                                      k
                            + (1              ) p ( ) p0 ( )              p( )
                                                                         + (1      )p( )
                                                     2                               h         i 3
                                  p0 ( )                  p0 ( )
                                                                                   2   1 y  b
                                   p( )
                                               4          p( )         0 b                        5 0k b
                            + (1        )p( )      + (1         )p( )  k         R b
                                                                                   0
                                                                                     [1 y (!)] d!
                                               h    R                i
                                        y0 b 1
                                                       1
                                                      0
                                                         y (!) d!
                          hR                  R              iRb
                             1              1 b
                            0
                               y (!)  d!    b 0  y (!)  d!       0
                                                                   [1 y (!)] d!

where     is evaluated at            k
                                              b and di¤erentiation of (A.25) implies:


                                 p0 (z   )
  00                       p(z    )[1 p(z    )]                  p00 (z          )      p0 (z        )    p0 (z          )               0          2
  k    ( ) =          p0 (z    )           (1 )p0 ( )
                                                                                                       +                             (   k   ( ))
                                        + +(1 )p( )              p0 (z           )      p (z         )   1 p (z                  )
                p(z    )[1 p(z       )]
                                 (1 )p0 ( )
                                  +(1 )p( )                              (1   ) p0 ( )               p00 ( )      0          2
               +          p0 (z  )             )p0 ( )
                                                                                                             (    k   ( ))
                    p(z    )[1 p(z   )]
                                        + (1+(1 )p( )
                                                                         + (1    )p( )               p0 ( )
                                                                 2                                                                   !2 3
                                                                                 0
                                         1                       4R             y ( )                         1   y( )                   5
                          p0 (z  )                  (1 )p0 ( )           1                       +      R1
                    p(z    )[1 p(z       )]
                                              +     +(1 )p( )
                                                                             [y (!)     1] d!                [y (!)    1] d!

Going through the algebra, we …nd:

                      sign
          Wk00 b =
          2 p00 ( ) p00 (z )            0 (z            p0 ( )                              3
             p0 ( )
                     + p0 (z ) + 1p p(z         )
                                                   )    p( )                                      0             0 b
                                                                                                                      2
          6              2 (1 )               0
                                             p ( )p(z      )           0                    7   p   (z      )   k
          6                                                     1 + p (p()[1)p0 (z
                                                                                p(z    )]
                                                                                            7
          4       +(1 )p( )[1 p(z        )] +(1 )p( )                                )      5 p (z       ) [1 p (z      )]
                    (1 )p( )[1 p(z       )] p ( )0            0
                                                             p (z  )
                  +(1 )p( )[1 p(z        )]     p( )
                                                       +   1 p(z     )
                  h                                          ih        R1               i
                               p0 (z
            p( )
                    1                  )[ +(1 )p( )]
                             + p0 ( )p(z )[1 p(z )] 1                    0
                                                                           y (!)    d!    y0 b               y0 b
                     hR                       R                 iRb                                   R1
                         1                 1 b
                           y (!) d!                 y (!)   d!        [1     y  (!)]   d!              b [y (!)   1] d!
                        0                  b 0                    0




                                                                         14
where     is evaluated at     k
                                  b .

   With y 0 ( ) > 0 and Assumptions 2 and 3, a su¢ cient condition for Wk00 b                                    < 0 is
     p(z)
    1+p(z)
             or, qualitatively,       not too small.
   The second step in the uniqueness proof is to establish                          0   b > 0. This follows imme-
                                                                                    k
diately from (A.24) under Assumption 3 and y 0 ( ) > 0.

Proof of Proposition 8
Recall from the proof of Proposition 6 that the equilibrium pair ( ; ) solves equations
(A.15) and (A.20). The constrained e¢ cient pair b; b must also satisfy (A.20), in addition
to (A.24) from the proof of Proposition 7. Combine (A.24) with the expression for 0k ( ) in
(A.25) to get:

                          2                           h            i                                                      3
                                                                           R1                 Rb                Rb
f1 (b)   1      p (z b) 4             1    1 p(z b)
                                             f2 (b)
                                                       1     y b       b      y (!) d!            y (!) d! 0 [1 y (!)] d!
       =                 1+                    R1                           0
                                                                            Rbh
                                                                                               0
                                                                                                    i     R1              5
 2
f2 (b)          f2 (b)                     1        y (!) d!                    y b           y (!) d!     b [y (!) 1] d!
                                                0                               0


where b        k
                   b . Now use (A.20) to rewrite as:

                       R1                                                  R1                 Rb
             f1 (b)     b [y (!)   1] d!       1           y b         b      y (!) d!           y (!) d!
                                                                           0                   0
             f22 (b)
                     = Rb                + Rb                              Rbh                     i
                        0
                          [1   y (!)] d!    0
                                              [1           y (!)] d!        0
                                                                                y b          y (!) d!

which simpli…es to (A.16) from the baseline model. Therefore, the constrained e¢ cient
allocation is now a pair b; b that solves (A.16) and (A.20).
    As in the proof of Proposition 6, use l ( ) and k ( ) to denote the functions implicitly
de…ned by (A.15) and (A.20) respectively. The decentralized market achieves ( ; ) such
that     = l ( ) = k ( ). Letting e ( ) denote the function implicitly de…ned by (A.16),
the planner achieves b; b such that b = e b = k b . The proof of Proposition 6
established    0
                   ( ) > 0 and    0
                                      ( ) < 0. The proof of Proposition 7 also established                  0    b > 0.
               k                  l                                                                         k

Therefore, to show b < and b < , it will be enough to show e b < l b .
   With f1 ( ) and f2 ( ) as de…ned in the proof of Proposition 4, (A.15) and (A.16) yield:
                          R1h               i
            f1 l b         b  y (!)   y   b   d!    f1 e b          f1 e b
                       = Rbh                i    =             2 >
            f2 l b         0
                              y  b     y (!) d!    f2 e   b         f2 e b

where the inequality follows from f2 ( ) 2 (0; 1). The proof of Proposition 4 established the
su¢ ciency of Assumption 2 for dd ff12 (( )) > 0 so we can now conclude l b > e b .
    It remains to characterize R and R as de…ned in the statement of Proposition 8. If
  is …xed at b, then (A.20) implies           = b. The interbank price that implements b as

                                                       15
an equilibrium can be obtained by evaluating the decentralized …rst order condition for ,
namely S 0 V 0 Re = 0, at = b and = b. Calling this price R  e , we get:

                                                     2            Rb                        R1                                                       3
                                                         f1 (b)
           e
           R                           D( j ) 4          f2 (b)   0
                                                                       y (!) d! +               b   y (!) d!             (1        )     S(j )
R                        =                                                                                                                           5
      1    (1        )       1          (1   )                         1       b+        f1 (b) b                                      1  (1     )
                                                                                         f2 (b)


Similarly, if is …xed at b, then (A.20) implies = b. The interbank price that implements
b as an equilibrium can be obtained by evaluating the decentralized …rst order condition for
 , namely S 0 V 0 Re = 0, at = b and = b. Calling this price R  e , we get:

                             e
                             R                       D( j )                                         (1       )     S(j )
           R                                 =                y b
                 1           (1          )       1    (1    )                                                    1  (1             )
For R < R , we need:
                                 Z bh                        i             Z    1   h                            i
                 f1 (b)
                                     y (!)           y b          d! +                  y (!)            y b         d! > 0
                 f2 (b)           0                                         b

which is true by (A.16) and f2 ( ) 2 (0; 1).

Proof of Proposition 9
                                     R1
Total lending is de…ned as K          0
                                        n (!) d!. It is immediate from (A.22) that welfare is
proportional to K at any pair ( ; ) satisfying equation (9). Speci…cally, W = 1 K or,
equivalently, K = 1 W. By market clearing, the decentralized equilibrium satis…es (9)
which, in the planner’s problem, is the aggregate feasibility constraint. The decentralized
equilibrium is therefore a feasible allocation. The planner does not choose it (see Proposition
8) and the planner’s solution is unique (see Proposition 7), implying W < W       c and hence
K < K. b
                                                 R1
   Consider next uninformed lending, KN           0
                                                     (!) d!, where (!) is the fraction of type
! …rms that receive uninformed …nancing when = 1. In steady state:

                                      (!) = p ( ) [1         p (z           )] [1          (1             ) n (!)]
                          R1
which, using (3) and         0
                                      (!) d! = 1, implies:
                                                                                                A
                                             KN = p ( ) [1                 p (z            )]

Substituting in A as per (A.14), we can write:

                         p ( ) [1 p (z    )]                                 (1            ) p ( ) p (z   )
               KN =                                          1+
                             + (1    )p( )                                 + (1            ) p ( ) [1 p (z                    )]
Taking derivatives, we …nd @K N
                                > 0 and @K N                      b N is implied by
                                             > 0. Therefore, KN > K
                            @            @
  > b and > b, which were shown in Proposition 8.


                                                                   16
                                                                     b I follows
  Informed lending, denoted by KI , must satisfy KI + KN = K so KI < K
immediately from KN > Kb N and K < K.
                                    b


Proof of Proposition 10
It will be veri…ed below that both the planner and the decentralized lenders still follow
reservation strategies for informed retention when is endogenous. Evaluating (2) and (3)
at I (!) = 0 yields:

                                                                 =A
                                        L   =
                                                 + (1      ) p ( ) [1     p (z            )]
while evaluation at I (!) = 1 yields:

                                                                  =A
                                 H   =
                                              + (1      ) p ( ) [ + (1           ) p (z           )]
so we can de…ne the following replacement for f2 ( ) in the proof of Proposition 4:

                                                   + (1     ) p ( ) [1 p (z      )]
                         fe2 ( ; )
                                                + (1    ) p ( ) [ + (1      ) p (z                     )]
Notice @@ fe2 ( ; ) > 0 and fe2 ( ; 1) = f2 ( ).
   Now use n ( ) as per equation (2), with I (!) = 1 if !        and I (!) = 0 otherwise, to
rewrite (9) as:
                                                         R1
                                           1 p (z     )     [y (!) 1] d!
                                                        =R                           (A.26)
                      + (1      ) p (z    ) fe2 ( ; )       [1 y (!)] d!         0

Setting    = 1 in (A.26) would return (A.20).

Decentralized Equilibrium An unmatched lender in the decentralized economy chooses
 , I ( ), and to maximize U as de…ned in equation (10). It is straightforward to show that
the …rst order condition for I (!) again yields a reservation strategy with a threshold such
that J ( ) = R + U . The …rst order conditions for and then simplify to:

                   Z                                                            Z    1
         f1 ( )
                       [y (!)        y ( )] d! + [1       (1        ) f1 ( )]            [y (!)        y ( )] d! = 0   (A.27)
       fe2 ( ; )   0

and:
                                    Z                                           Z    1
                             sign
                   1     0   =              [y (!)   y ( )] d! + fe2 ( ; )               [y (!)        y ( )] d!       (A.28)
                                     0

where 0      0 and 1     0 are Lagrange multipliers on   0 and       1 respectively. The
decentralized equilibrium involves , , and solving (A.26), (A.27), and (A.28).
   Equation (A.28) holds with complementary slackness. Therefore, to support an equilib-
rium with = 1, we need:

                                                               17
                    Z                                                                    Z   1
                                [y (!)                y ( )] d! + f2 ( )                         [y (!)                  y ( )] d!                   0           (A.29)
                     0

where      and     solve (A.15) and (A.20). Notice that (A.15) is just (A.27) evaluated at
  = 1 while (A.20) is just (A.26) evaluated at = 1. Substituting (A.15) into (A.29), the
                                    0       p0 (z
desired inequality simpli…es to pp(( ))     p(z
                                                   )
                                                   )
                                                     . Given that p ( ) is increasing and concave,
                                      z
this just means that we need          2
                                        .
    I will now show existence of a threshold separation rate, 1 2 (0; 1), such that (A.15)
and (A.20) yield      > z2 if and only if > 1 .
    The …rst step is to show dd > 0. Let h ( ) and k ( ) denote the right-hand sides of (A.15)
and (A.20) respectively. Also write f2 ( ; ) to make explicit that f2 ( ) in (A.15) and (A.20)
depends on . Di¤erentiate equations (A.15) and (A.20) then combine to get:
                                          h 0               i 0
                                           h( )      k 0 ( ) f2 ( ; )
                d                          h( )      k( )     f2 ( ; )
                      = 0      h 0              0
                                                         i         h                 i
                 d        h( )   p (z   )     f2 ( ; )       k ( ) f10 ( )
                                                              0            f20 ( ; )
                                        h(       )    1 p(z        )      f2 (    ; )             k(         )     f1 (      )       f2 (        ; )

                                                                   @
where f20 ( ; ) is short-hand for                                 @
                                                                       f2 ( ; ). It is straightforward to show h0 ( ) < 0,
                            p0 (z        )            f20 (    ; )
f20 ( ; ) > 0, and      1 p(z                )
                                                 >     f2 (   ; )
                                                                   .   We also know y ( ) < 1 from the proof of Proposition
                                                                                 f0( )           f0 ( ; )
6 so it is easy to show k 0 ( ) > 0. Finally, f11 ( ) > f22 ( ; ) follows from Assumption 2. We
can now conclude dd > 0.
    The second step is to ensure       > z2 at = 1. Equations (A.15) and (A.20) reduce to
f1 ( ) = h ( ) and 1 p (z         ) = k ( ) respectively at = 1. We already know from the
proof of Proposition 6 that, on a two-dimensional graph with on the horizontal axis and
on the vertical, (A.15) is downward-sloping while (A.20) is upward-sloping for any < . We
also know that any equilibrium involves < . De…ne x such that h ( x ) f1 z2 = 1 or,
                       R1
equivalently, y ( x )    0
                           y (!) d!. With y 0 ( ) > 0 and Assumption 3, x < . For        > z2 , we
                                                                                                       R1
                                        z                                          z          1              y(!)d!                                      z
just need k ( x ) > 1 p                 2
                                                 or, equivalently, p               2
                                                                                         >   R x         0
                                                                                                                             . Therefore, p              2
                                                                                                                                                             su¢ ciently
                                                                                                 0     [1 y(!)]d!
                        z
high ensures  > at = 1. 2
   We can now conclude that there is a 1 < 1 at which            = z2 . Using (A.15) and (A.20):
                  "             R 1                     R1                       # 1
                         1          [1     y (!)] d!        y (!)  d!    y ( 1 )
              1     1+       R 10                        0
                                                                R1
                        p z2     [y (  1 )    y (!)] d!    1     0
                                                                    y (!) d!
                              0
with   1   implicitly de…ned by:
                    R                                                     R1
                            1
                                [y ( 1 )               y (!)] d!                  [y (!)             1] d!                                       z
                        0                                                     1
                            R                                           R1                                                   1       p
                                    1
                                        [1           y (!)] d!                [y (!)         y ( 1 )] d!                                         2
                                0                                         1

                                                                                                       f1 ( z2 )                   1
To con…rm 1 > 0, note that (A.15) tells us h ( 1 ) =                                                 f2 ( z2 ;
                                                                                                                         =   f2 ( z2 ;
                                                                                                                                                 > 1 or, equivalently,
         R1                                                                                                      1   )                   1   )
y ( 1 ) < 0 y (!) d!.




                                                                                  18
Constrained E¢ cient Allocation The planner chooses , I ( ), and                   to maximize
welfare as de…ned in (A.22) subject to the aggregate feasibility constraint (9). His Lagrangian
can be expressed as:
                Z 1                     Z 1
            L=       y (!) n (!) d! +       [y (!) 1] n (!) d! + 0 + 1 (1          )
                                 0                                               0

where       0 is the Lagrange multiplier on (9), 0 0 and 1 0 are Lagrange multipliers
on      0 and       1 respectively, and n ( ) is as de…ned in (2). It is straightforward to show
that the …rst order condition for I (!) yields a reservation strategy with a threshold such
that y ( ) = 1+ . The …rst order conditions for and then simplify to:

                           Z                                                                                     Z    1
          f1 ( )
                                    [y (!)              y ( )] d! + [1                (1          ) f1 ( )]               [y (!)       y ( )] d! = 0             (A.30)
        fe2 ( ; )
          2                  0

and:
                                                       Z                                                          Z   1
                                            sign
                           1            0     =                  [y (!)        y ( )] d! + fe22 ( ; )                     [y (!)        y ( )] d!                (A.31)
                                                         0

The constrained e¢ cient allocation involves , , and solving (A.26), (A.30), and (A.31).
    Equation (A.31) holds with complementary slackness. Therefore, to support a con-
strained e¢ cient allocation with = 1, we need:
                                 Z bh                                     i                       Z   1   h                        i
                                     y (!)                       y b          d! +    f22   (b)               y (!)       y b          d!    0                   (A.32)
                                    0                                                             b

where b and b solve (A.16) and (A.20). Notice that (A.16) is just (A.30) evaluated at = 1
and, as above, (A.20) is just (A.26) evaluated at = 1. Substituting (A.16) into (A.32), the
desired inequality reduces to b z2 .
   I will now show existence of a threshold separation rate, b1 2 (0; 1), such that (A.16)
and (A.20) yield b > z2 if and only if > b1 . The proof goes through the same steps as the
one for the decentralized equilibrium.
   The …rst step is to show dbd
                                > 0. Di¤erentiate (A.16) and (A.20) then combine to get:

                                                                                h0 (b)         k0 (b) f20 (b; )
                                                                                h(b)
                                                                                             2k b
                                 db                                                              ( ) f2 (b; )
                                    =                         h                                i k0 b h 0                                   i                    (A.33)
                                 d                   h0 (b)        p0 (z b)          f20 (b; )        ( ) f1 (b)               f 0 (b; )
                                                     h(b)         1 p(z b)            f2 (b; )       k(b) f1 (b)
                                                                                                                              2 f22 (b; )

We know b <                      from Proposition 8 so y b < 1 and k 0 b > 0. A su¢ cient condition for
db                         f10 ( )                   f0 ( ; )
d
     > 0 is then           f1 ( )
                                             2 f22 (      ; )
                                                                  or, equivalently:

                      h                                      i                                       "                                                            #
      p0 ( )      1       p00 ( )           p00 (z      )                                                                                       p0 ( ) p(z   )
      p( )        2       p0 ( )
                                     +      p0 (z       )              (1   ) p ( ) [1 p (z    )]                                               p( ) p0 (z   )
               p0 ( )           p0 (z        )
                                                                                                       1
                        +                                              + (1    ) p ( ) [1 p (z    )]                                        + (1         )p( )
               p( )            1 p(z             )



                                                                                            19
Assumption 2 will guarantee this if the right-hand side is less than 12 . Note that the right-
                                                  p(z)
hand side is indeed less than 12 for any        1+p(z)
                                                       . Therefore, db
                                                                    d
                                                                        > 0 for su¢ ciently
high. Since the numerator in (A.33) is strictly negative, db
                                                          d
                                                             < 0 for lower would require a
discontinuity which is ruled out with well-behaved functional forms.
    The second step is to ensure b > z2 at = 1. Equations (A.16) and (A.20) reduce to
f1 ( ) = h ( ) and 1 p (z       ) = k ( ) respectively at = 1. These are exactly the same
equations as the decentralized equilibrium when = 1 so       > z2 at = 1 also implies b > z2
at = 1.
    We can now conclude that there is a b1 < 1 at which b = z2 . Using (A.16) and (A.20):
                 2                                 0v
                                                    uR1 h                                       i              13        1
                                  R b1
                 6            1      [1 y (!)] d! Buu b1 y (!)                       y b1           d!         C7
                                   0
            b1   41 +         z        R1          @t R b h                                  i                1A5
                          p   2    1    0
                                          y (!) d!       1
                                                            y b1                        y (!) d!
                                                                0


with b1 implicitly de…ned by:
                                       v
                     R1                u R b1 h                       i
                                 1] d! u        b
                      b [y (!)         u 0 y 1                   y (!) d!                               z
                        1
                     R b1              tR h                           i                  1        p
                                           1
                                                                y b1 d!                                 2
                      0
                          [1 y (!)] d!    b y (!)
                                                  1

                                                                         f1 ( z2 )
To con…rm b1 > 0, note that (A.16) tells us h b1 =                     f22 ( z2 ;b1 )
                                                                                        =          1
                                                                                            f22 ( z2 ;b1 )
                                                                                                             > 1.
       De…ning       max f 1 ; b1 g completes the proof.

Proof of Proposition 11
The planner chooses , I ( ), , and z to maximize welfare as de…ned in (A.22) subject to
the aggregate feasibility constraints for capital (9) and labor (14). Informed retention will
still be characterized by a reservation strategy around a threshold . Using A as per (8) with
  ( ) as per the proof of Proposition 10, we can rewrite (14) as:


                           z                                           (1        ) p ( ) p (z   )
                                                           1+                                                                =L
         + (1    ) p ( ) [ + (1          ) p (z       )]            + (1        ) p ( ) [1 p (z                     )]
                                                                                    (A.34)
The constrained e¢ cient allocation boils down to a quadruple f ; ; ; zg solving (A.26),
(A.30), (A.31), and (A.34), where (A.31) holds with complementary slackness.16 The La-
grange multipliers on (9) and (14) can then be recovered from the …rst order conditions for
  and z.
   Consider now the decentralized problem. An unmatched lender in the decentralized
economy maximizes U as de…ned in (13) with J (!) as per (5), taking as given the distri-
bution ( ). Informed retention will again be characterized by a reservation strategy. The
  16
    Both f1 ( ) as de…ned in the proof of Proposition 4 and fe2 ( ) as de…ned in the proof of Proposition 10
depend on z so, for the purposes of the current proof, any equations that depend on f1 ( ) and/or fe2 ( )
should be understood to depend on f1 ( ; z) and/or fe2 ( ; ; z).



                                                           20
decentralized …rst order conditions for          and z are:

                                       [y ( ) + U ]
                                                             R       U =0                                                (A.35)
                                     1      (1   )
and:

                               Z                                                      Z    1
     p ( ) p0 (z           )
 W =                                [y ( )     y (!)]    (!) d! + (1              )            [y (!)     y ( )]       (!) d!
     1      (1         )        0
                                                                                          (A.36)
respectively. The conditions for and then reduce to (A.27) and (A.28), where (A.28)
holds with complementary slackness. Capital market clearing is still given by (A.26). Labor
market clearing is given by (A.34). The decentralized equilibrium is therefore a quadruple
f ; ; ; zg solving (A.26), (A.27), (A.28), and (A.34). The prices R and W can then be
recovered from (A.35) and (A.36).
   Assume = 1 then validate by verifying > z2 for both the decentralized lenders and
the planner. Equations (A.26) and (A.34) are common to the lenders and the planner. With
  = 1, we can express (A.26) as 1f2 (p(z;z; )) = k ( ), where f2 ( ) is as de…ned in the proof of
Proposition 4, except writing f2 ( ; z; ) instead of f2 ( ) to make explicit the dependence
on z and , and k ( ) is as de…ned in the proof of Proposition 10. We can also express (A.34)
as z = Q ( ; z; ; ) when = 1, where:

                                                    [ + (1            ) p ( )] L
                               Q ( ; z; ; )                   (1   )p( )p(z   )
                                                   1+        +(1   )p( )[1 p(z        )]

The third equation for the decentralized lenders is (A.27) which can be expressed as ff21( ( ;z;;z) ) =
h ( ) when = 1, where f1 ( ) is as de…ned in the proof of Proposition 4, except writing
f1 ( ; z) instead of f1 ( ) to make explicit the dependence on z, and h ( ) is as de…ned in
the proof of Proposition 10. The planner’s third equation is (A.30) which can be expressed
as ff21(( ;z;;z) ) = h ( ) when = 1. Notice that (A.27) and (A.30) are equivalent at = 1.
     2
Therefore, the decentralized z, , and are all constrained e¢ cient at = 1.
    Start by di¤erentiating (A.26) and (A.34) under the assumption of = 1 to get:


   p0 (z     ) dz   p0 (z     )d             1 p (z       ) 0 d     0 dz                                           d
                  +                            2
                                                            f2   + f2z   + f20                          = k0 ( )         (A.37)
   f2 ( ; z; ) d    f2 ( ; z; ) d             f2 ( ; z; )      d       d                                           d

and:
                                     dz      d       dz      d
                               z+       = Q0   + Q0z    + Q0   + Q0                                                      (A.38)
                                     d       d       d       d
Also di¤erentiate (A.27) and (A.30) under the same assumption to get:


       f10     d        0
                       f1z     dz             f1 ( ; z)      d    0 dz                                         d
                 +                            2
                                                         f20   + f2z   + f20                       = h0 ( )              (A.39)
   f2 ( ; z; ) d   f2 ( ; z; ) d             f2 ( ; z; )     d       d                                         d


                                                        21
and:


        f10     d        0
                        f1z     dz                    f1 ( ; z)      d    0 dz                               d
     2
                  +  2
                                                 2    3
                                                                 f20   + f2z   + f20              = h0 ( )          (A.40)
    f2 ( ; z; ) d   f2 ( ; z; ) d                    f2 ( ; z; )     d       d                               d

Evaluate (A.37), (A.38), and (A.39) at                     = 1 then combine to isolate:

                                                     dz
                                                                = Q0          z
                                                     d     =1

and:


 d                   h0 ( ) [1 p (z         )]   k 0 ( ) f1 ( ; z) 0    h0 ( ) p0 (z          ) + k 0 ( ) f1z
                                                                                                           0
                =                                                 f 2 +                                       Q0      z
 d      =1                 h0 ( ) p0 (z      )   k 0 ( ) f10            h0 ( ) p0 (z          ) k 0 ( ) f10

and:


d               [1       p (z     )] f10     f1 ( ; z) p0 (z         )               p0 (z             0
                                                                                             ) [f10 + f1z ]
            =                                                            f20 +                                   Q0    z
d      =1                 h0 ( ) p0 (z      ) k 0 ( ) f10                          0     0
                                                                                  h ( ) p (z    ) k ( ) f10
                                                                                                     0


These derivatives tell us how the decentralized equilibrium changes if we move slightly below
 = 1.
   Now evaluate (A.40) at = 1 then combine with (A.37) and (A.38), also evaluated at
 = 1, to isolate:

                                                     dbz
                                                                = Q0          z
                                                     d     =1

and:


 db              h0 ( ) [1 p (z            )] 2k 0 ( ) f1 ( ; z) 0    h0 ( ) p0 (z             ) + k 0 ( ) f1z
                                                                                                            0
            =                                                   f 2 +                                          Q0      z
 d     =1              h0 ( ) p0 (z          ) k 0 ( ) f10            h0 ( ) p0 (z             ) k 0 ( ) f10

and:


db              [1      p (z      )] f10    2f1 ( ; z) p0 (z         )               p0 (z   ) [f10 + f1z
                                                                                                       0
                                                                                                          ]
            =                                                            f20 +                                   Q0    z
d                         h0 ( ) p0 (z      ) k 0 ( ) f10                          0     0
                                                                                  h ( ) p (z    ) k ( ) f10
                                                                                                     0
       =1

These derivatives tell us how the constrained e¢ cient allocation changes if we move slightly
below = 1.
                                                b
   The two sets of derivatives ( did
                                          and ddi     for i 2 fz; ; g) are evaluated at the
                                                      =1                 =1
same values of z, , and since the decentralized equilibrium is constrained e¢ cient at                                = 1.
It is easy to see:


                                                                22
                                         dz             dbz
                                                   =
                                         d    =1        d     =1

We can also show:
                    d          db                k 0 ( ) f1 ( ; z)
                                         = 0     0               0  0
                                                                      f20 < 0
                    d    =1    d    =1    h ( ) p (z       ) k ( ) f1

where the sign follows from h0 ( ) < 0, f20 > 0, the curvature of p ( ), and the result from the
                                                                                                  db
proof of Proposition 6 that any equilibrium has y ( ) < 1 and hence k 0 ( ) > 0. If               d
                                                                                                            0,
                                                                                                       =1
then the decentralized increases more than the planner’s as we move below = 1. If
 db
 d
       > 0, then the planner’s decreases as we move below = 1 while the decentralized
    =1
                                                                   dz            dbz
  either decreases by less or increases. Combined with             d
                                                                             =   d
                                                                                            , this means that
                                                                        =1             =1
the decentralized equilibrium has ine¢ ciently high and z     ine¢ ciently low as we move
below = 1.
   To complete the proof, we just need to con…rm = 1 (or, equivalently, > z2 ) at = 1.
A continuity argument can then be invoked to conclude > z2 (and thus = 1) slightly
below = 1. Note that = 1 reduces (A.34) to z = L, pinning down z independently of
and . With L not too low, p z2 is not too low and we can follow the proof of Proposition
10 to conclude that both the planner and the decentralized lenders choose > z2 at = 1.




                                                   23
Appendix B –Relationship Lending Extension
In models of relationship lending, lenders acquire information about their borrowers over
repeated interactions and use that information in subsequent …nancing.17 The analysis in
the main text abstracts from relationship lending by dissolving matches after one interaction
of average duration 1 . This appendix explores how, if at all, the allocation of resources
between matching and screening is a¤ected by an ability to resolve information frictions
over time through relationship lending. For brevity, I will focus on the case of = 1. The
relevant comparison is therefore to Sections 3.1 and 4.4, depending on whether or not there
is a Walrasian market.
    To proceed, I …x the time to project completion at one period and re-interpret as an
exogenous rate of match separation. Relationship lending is introduced by assuming that
uninformed matches last at most one period. Speci…cally, an uninformed lender whose match
does not exogenously separate after one period learns his borrower’s type, and hence becomes
an informed lender, by virtue of having interacted with the borrower over the course of the
…rst period.
    Start by rede…ning n (!), the fraction of type ! …rms …nanced each period. The only dif-
ference relative to the law of motion in (1) is that lenders whose matches are not exogenously
separated can make the retention decision again. Mathematically:


nt (!) = It (!) (1       ) nt   1   (!)+p ( t ) [1   p (z   t)   + p (z       t ) It   (!)] [1   (1     ) nt   1(!)]
                                                                                                               (B.1)
which, in steady state, becomes:


                                    p ( ) [1 p (z     ) + p (z            ) I (!)]
         n (!) =                                                                                               (B.2)
                   1   (1       ) I (!) + (1    ) p ( ) [1 p (z              ) + p (z        ) I (!)]

The mass of available matches, A, and the distribution of available borrowers, ( ), are still
given by equations (4) and (3) respectively but using n ( ) as per (B.2).
    The rest of this appendix establishes two main results. Section B.1 shows that relationship
lending changes the direction of the extensive externality from . Section B.2 then shows
that the distributional externalities together with the Walrasian market for capital recover
the main insight from Proposition 8 (i.e., both and ine¢ ciently high in the decentralized
equilibrium) for parameters where the extensive externality is not too strong.
  17
     Some empirical evidence for the idea that relationship lending involves information acquisition comes
from Lummer and McConnell (1989). They …nd that stock prices (i) react positively when a …rm announces
the renewal of an existing lending agreement with its bank and (ii) do not react in a statistically signi…cant
way to announcements of new lending agreements. They interpret this as evidence that banks accumulate
inside information about their customers over time. A common view in the banking literature is that a
relationship lender acquires new information by observing the same borrower over time or across products
in interactions a¤orded by the relationship, not by actively re-screening the borrower in every period of the
relationship. See Boot (2000) as well as Hachem (2011), Cohen et al (2019), and the references therein.




                                                       24
B.1      Baseline Model
The value to a lender of accepting a match with a type ! …rm is now given by:

             J (!) = y (!) +        U + (1              ) [I (!) J (!) + (1            I (!)) (g 0 + U )]               (B.3)
The …rm delivers y (!) at the end of the period. With probability , the match is exogenously
broken and the lender enters next period unmatched. With probability 1                 , the match is
not exogenously broken and the lender can decide whether to accept the borrower again or
endogenously separate and enter the next period unmatched. The value of an unmatched
lender, U , is still given by equation (6) but with J ( ) as per (B.3).
   Use equations (6) and (B.3) to isolate:
                             "           R1                                          #
                         1      0
                                    p ( ) 0 1 1p(z (1 )(1)I(!)
                                                           I(!))
                                                                 [y (!) g 0 ] (!) d!
                U=             g +                        R1                                   (B.4)
                       1           1 + (1       ) p ( ) 1 p(z )(1 I(!)) (!) d!
                                                                     0    1     (1   )I(!)

Decentralized lenders choose 2 [0; z] and I ( ) 2 [0; 1] to maximize U as de…ned in (B.4),
taking as given ( ). As in Lemma 1, informed retention will be characterized by a reserva-
tion strategy around some cuto¤ . To facilitate comparison to Lemmas 2 and 3, de…ne:

                             "                      Z                                        R1                             #
                                                                                                  [y (!)   g0]   (!) d!
e( ; ;    ( ) ; g0j )    p ( ) [1    p (z      )]           [y (!)       g0]    (!) d! +
                                                        0                                          1       (1       )

and:

                                                    "                           Z                   R1                  #
                                                                                                           (!) d!
       e( ; ;
       D        ( )j )     1 + (1        ) p ( ) [1              p (z      )]         (!) d! +
                                                                                 0                 1       (1       )

Maximization of U as per (B.4) by the decentralized lenders amounts to choosing                                     2 [0; z]
                          e ( ; ; ( );g 0 j )
and 2 [0; 1] to maximize D( e ; ; ( )j ) , taking as given        ( ).
   Consider now the constrained e¢ ciency benchmark. The welfare function is:
                                                 Z 1
                                  1           0
                       W=                    g +     [y (!) g 0 ] n (!) d!
                                1                 0

with n ( ) as per (B.2). In steady state, equations (B.1) and (3) imply:

                                    p ( ) [1    p (z  ) (1 I (!))]                     (!) A
                          n (!) =                                                                                       (B.5)
                                                 1 (1     ) I (!)

Substituting (B.5) into (4) and rearranging to isolate A yields:
                                                                 1
                          A=                            R1    1 p(z )(1 I(!))
                                                                                                                        (B.6)
                               1 + (1       )p( )           0   1 (1 )I(!)
                                                                                      (!) d!
We can now substitute (B.5) with A as per (B.6) into the welfare function to write:

                                                            25
                                  "                 R1    1 p(z   )(1 I(!))                                         #
                         1                   p( )     0     1 (1 )I(!)
                                                                            [y (!) g 0 ]                   (!) d!
               W=                     g0 +                          R1                                                        (B.7)
                     1                       1 + (1         ) p ( ) 0 1 p(z     )(1 I(!))
                                                                          1 (1 )I(!)
                                                                                                           (!) d!
The planner chooses 2 [0; z] and I ( ) 2 [0; 1] to maximize W as de…ned in (B.7). This
amounts to choosing 2 [0; z] and 2 [0; 1] to maximize A e ( ; ; ( ) ; g 0 j1), where
                  1
A = lim !1 D( e ; ; ( )j ) .
     Compare the decentralized and planning problems. There are still distributional exter-
nalities because, unlike the planner, decentralized lenders take ( ) as given. There are also
still extensive externalities, as the decentralized objective function only coincides with the
planner’s objective if there is no intertemporal discounting. However, the fact that now
appears in e ( ), not just D e ( ), means that ! 1 does more than make decentralized lenders
internalize their full e¤ect on A. In other words, with relationship lending, the extensive
externality is about more than just the mass of available matches.
     Proposition B.1 below shows that this di¤erence changes the direction of the extensive
externality from relative to the baseline model without relationship lending. Speci…cally,
comparing Proposition B.1 to Propositions 2, 3, and 4 in the main text, we see that the de-
centralized is now ine¢ ciently low as a result of the extensive e¤ect. Higher still decreases
the mass of available matches A so the reversal in Proposition B.1 must be explained by the
presence of in e ( ). The intuition lies in the fact that relationship lending generates in-
formed matches from previously uninformed ones, mitigating the tradeo¤ between matching
and screening in the initial allocation of intermediation resources. By the recursive nature of
his problem, a decentralized lender takes into account that choosing higher increases the
probability he forms an uninformed match today and becomes informed tomorrow. But this
is discounted at rate and is therefore not the same as internalizing how his decisions a¤ect
the stock of previously uninformed matches available to become informed in a symmetric
steady state. The latter is what the planner internalizes, leading the planner to choose a
higher value of than the decentralized lenders.

Proposition B.1 If ( ) is exogenously reset every period, then the decentralized and in
the baseline model with relationship lending are both ine¢ ciently low. If ( ) is endogenous,
then the decentralized is too high but, for low, the decentralized is still too low.

Proof. Start with        ( ) endogenous. The planner’s …rst order conditions reduce to:

                                                          y ( ) = g0
and:                                                                       R1
                                                    p( )p0 (z          )
                         1    p (z            )+       p0 ( )                      [y (!)     y ( )] d!
                             h                                        i2 = R                                                  (B.8)
                              1+      (1     )[1 p( )p(z         )]
                                                                               0
                                                                                   [y ( )     y (!)] d!
                                             +(1 )p( )

In contrast, the decentralized …rst order conditions reduce to:
                                                    p0 (z                                         R
                             (1         ) p ( )2      p0 ( )
                                                             )
                                                                  [ + (1               ) p ( )]    0
                                                                                                       [y ( )     y (!)] d!
          y ( ) = g0 +
                                  + (1           ) p ( ) [ + (1                    )          (1         ) p (z      )]


                                                                      26
and:                                                                                                    R1
                                                    p( )p0 (z          )
                    1       p (z            )+         p0 ( )                            1                      [y (!)        y ( )] d!
                        h                                              i =                              R                                                     (B.9)
                            1+    (1        )[1 p( )p(z           )]         1           (1         )           [y ( )        y (!)] d!
                                            +(1 )p( )                                                       0


If > 0, then > b, where stars denote the solution to the decentralized system and hats
denote the solution to the planner’s system. If = 0, then = b so        < b. By continuity,
   < b for low.
    The rest of the proof considers what happens when ( ) is exogenously reset every period.
In this case, ( ) = 1 and the decentralized …rst order conditions simplify to:

                                                              Z                                                 R1
                       p ( ) p0 (z                    )                                                              [y (!)        y ( )] d!
   1    p (z        )+                                                 [y (!)          y ( )] d! +                                               =0          (B.10)
                            p0 ( )                              0                                                    1        (1        )

and:

                                               "                                  Z                                           R1                                #
                                                                                                                                   [y (!)        y ( )] d!
  y ( ) = g 0 + (1                 ) p ( ) [1                 p (z           )]        [y (!)           y ( )] d! +
                                                                                   0                                                1       (1           )
                                                                                    (B.11)
Going through the algebra, we then …nd that the planner’s …rst order conditions amount to
(B.10) and (B.11) evaluated at = 1. The discount factor directly a¤ects the decentralized
choice of in equation (B.11) because the lender compares the value of keeping the borrower
today to the value he could get tomorrow if unmatched. We saw the same thing in the
model without relationship lending (e.g., equation (A.11)). Now, however, also directly
a¤ects the decentralized choice of in equation (B.10) because relationship lending gives
the lender an alternative way to learn tomorrow. We did not have this in the model without
relationship lending (e.g., equation (A.10)).
    Fully di¤erentiate (B.11) to get:

                              h                                                                             i
               (1    )p( )
                                       (1     ) [1             p (z           )] +      p( )p0 (z       )                Z
       d       1    (1 )                                                                   p0 ( )               1
         =                                     h                                                            i 0                [y ( )       y (!)] d!
       d   1 + (1                      ) p ( ) [1              p (z           )] +          1                y ( )        0
                                                                                          1 (1          )


where I have used (B.10) to simplify terms. Clearly,                                          d
                                                                                              d
                                                                                                    > 0 so we can conclude                               < b.
   Now use (B.10) to rewrite (B.11) as:

                                                    "Z                                                      R1                                       #
          0  p ( )2 p0 (z                       )                                                                    [y (!)     y ( )] d!
  y( ) = g +                                                   [y ( )         y (!)] d!                                             p( )p0 (z    )
                                                                                                                                                             (B.12)
                  p0 ( )                                  0                                         1           p (z          )+       p0 ( )

Equation (B.12) implicitly de…nes a function x ( ) which is independent of . In other words,
  x ( ) is the same for the planner and the decentralized lenders. Letting a ( j ) denote the
function implicitly de…ned by (B.10), the decentralized equilibrium is an intersection between


                                                                                  27
 x( ) and a ( j ) while the constrained e¢ cient allocation is an intersection between                                                              x   ( )
and a ( j1). Di¤erentiating (B.12) yields:


                                                            p( )2 p0 (z   )                          1
                                                1               p0 ( )
                                                                                   +                      p( )p0 (z   )     y0 ( )
                                                                                       1 p(z         )+      p0 ( )
 0
     ( )=                                                   "                                                                                                 #
 x          h 0                                         i                                               p( )p0 (z   )           2
                                                                                                                                    R1
                          p00 (        p00 (z
             2 pp((   )
                      )
                               )
                          p0 ( )       p0 (z
                                                    )
                                                    )
                                                                y( )      g0 + p ( )                       p0 ( )
                                                                                                                p( )p0 (z   )            [y (!)   y ( )] d!
                                                                                               1    p(z    )+      p0 ( )



where all instances of on the right-hand side are evaluated at x ( ). Combining (B.12)
with 0x ( ) = 0, we …nd that any critical point of x ( ) is a solution to (B.12) and:
                                                       R1
                                    p ( ) p0 (z   )       [y (!) g 0 ] d!
                    1 p (z     )+                   =R                                (B.13)
                                         p0 ( )           [g 0  y (!)] d!
                                                        0

Notice that (B.13) is equivalent to (B.10) when = 0 and y ( ) = g 0 . In other words, the
function implicitly de…ned by (B.13) uniquely intersects a ( j0) at = a y 1 (g 0 ). Also
notice that = a is the unique solution to x ( ) = a ( j0). Therefore, x ( ) has a critical
                                       sign 0        0
point at = a . Moreover, 00x ( a ) = pp(( )) pp(z(z )) which is positive if and only if < z2 .
Since the relevant is x ( a ) and we know x ( a ) = a ( a j0), it follows that x ( ) achieves
a minimum at = a if and only if a ( a j0) < z2 . Returning to (B.10), we can show that
              z                   0
                                      R1
  a ( a j0) < 2 is equivalent to g > 0 y (!) d!.
     The next step is to show that = a is the unique critical point of x ( ). To do this, note
that
hR the derivative    i of the right-hand side of (B.13) with respect to has the same sign as
    1
   0
      y (!) d! g [y ( ) g 0 ]. In other words, the function implicitly de…ned by (B.13) has a
                   0
                                                   R1
unique critical point at = a and, with g 0 > 0 y (!) d!, this critical point is a maximum.
Therefore, (B.12) achieves a minimum at = a while (B.13) achieves a maximum so the
only intersection between (B.12) and   R 1(B.13) is indeed = a .
                                    0
     We have now shown that g > 0 y (!) d! implies x ( ) convex with a unique critical
point that lies on a ( j0). This is also the only intersection between x ( ) and a ( j0). It is
straightforward to show that higher shifts a ( j ) away from the origin (in two-dimensional
space with on the horizontal axis and on the vertical) while leaving x ( ) unchanged.
Since a ( j ) is downward sloping, we can now conclude that         < b.

B.2      Walrasian Model
The capital market clearing condition, which is also the aggregate feasibility condition in the
planner’s problem, is still given by (9) but with n ( ) as per (B.5).18 Formally:
                                   Z                                                   Z   1
                                                                                   1
            [1    p (z        )]       [1           y (!)]         (!) d! +                    [1         y (!)]      (!) d! = 0                  (B.14)
                                   0

  18
    Technically, the left-hand side of (9) is no longer multiplied by                                       but this is moot since the right-hand
side is zero.



                                                                              28
Proposition B.2 below summarizes the results of the Walrasian model with relationship
lending. The …rst part says that the decentralized equilibrium is not constrained e¢ cient in
the absence of distributional externalities. We know from Proposition B.1 that the extensive
externalities result in both and ine¢ ciently low when there is relationship lending. With
   too low, there is an over-use of capital so the price of capital will rise in a Walrasian
market. However, with too low, there is an under-use of capital so the price of capital
will fall in a Walrasian market. These two forces counteract each other, making it possible
to have a market clearing equilibrium with both and too low. This is in contrast to the
model without relationship lending (see speci…cally Subsection 4.4.1) where the Walrasian
market priced in the extensive e¤ects and delivered constrained e¢ ciency in the absence of
distributional externalities. The di¤erence is that the extensive externalities resulted in
too high and too low without relationship lending. Accordingly, there was an unambiguous
over-use of capital which made capital more expensive, pushing down and up until the
constrained e¢ cient allocation was reached. When is high, the extensive externalities are
muted so the direction of ine¢ ciency is driven by the distributional externalities. The second
part of Proposition B.2 shows that the results of the Walrasian model without relationship
lending still hold in this case. In particular, relationship lending does not change the …nding
that distributional externalities lead to both         and ine¢ ciently high when there is a
Walrasian market for capital. The reasons are similar to those in the discussion of Proposition
8.

Proposition B.2 Set g 0 = 0 and introduce a Walrasian market for capital. If ( ) is
exogenously reset every period, then the decentralized and in the Walrasian model with
relationship lending are both ine¢ ciently low. If ( ) is endogenous, then there exists a
unique B 2 (0; 1) such that the decentralized and are both: (i) ine¢ ciently low if < B;
(ii) constrained e¢ cient if = B; (iii) ine¢ ciently high if > B.

Proof. Consider …rst the exogenously reset distribution (i.e., ( ) = 1). The decentralized
…rst order conditions still combine to deliver (B.10), while the planner’s …rst order conditions
still combine to deliver (B.10) evaluated at = 1. Drawn in two dimensions, with on the
horizontal axis and on the vertical axis, (B.10) is a downward-sloping curve which shifts
away from the origin as increases.
     With ( ) = 1, equation (B.14) simpli…es to:
                                                 R1
                                                1 [1 y (!)] d!
                               1 p (z      )= R                                          (B.15)
                                                  0
                                                    [y (!)   1] d!
This de…nes an upward-sloping curve until =        y 1 (1). Therefore, to show that the
planner chooses both and higher than the decentralized equilibrium, it will be enough
to show that the planner’s satis…es y ( ) < 1. The …rst order condition for the planner’s
informed retention strategy delivers:
                       h                 h                             ii
                   =    1 + (1      )p( ) 1     p (z      ) + (1 )(1 ) y ( )             (B.16)
          1+
                                                          Z              Z 1
                                                                       1
                         (1      ) p ( ) [1   p (z     )]   y (!) d! +       y (!) d!
                                                          0


                                               29
where denotes the Lagrange multiplier on (B.15) in the planning problem. Combining
(B.15) and (B.16):
                            h                     h                                           ii         1
                                                                                     1
                [1    y ( )] 1 + (1        ) p ( ) [1         p (z        )] +                     =
                                                                                                       1+
The planner’s solution thus satis…es y ( ) < 1, completing the proof for the case of ( ) = 1.
    Now consider ( ) endogenous. The decentralized …rst order conditions still combine to
deliver (B.9) while the planner’s …rst order conditions still combine to deliver (B.8). Using
  ( ) as per (3) with n ( ) as per (B.2), equation (B.14) becomes:
                                                    R1
                                1 p (z       )          [1 y (!)] d!
                                                  = R                                  (B.17)
                            1 + (1 )[1 p( )p(z
                                    +(1 )p( )
                                               )]
                                                      0
                                                        [y (!) 1] d!

Let ee ( ), el ( ), and ek ( ) denote the functions implicitly de…ned by equations (B.8), (B.9),
and (B.17) respectively. The decentralized equilibrium ( ; ) satis…es = ek ( ) = el ( )
while the constrained e¢ cient allocation b; b satis…es b = ek b = ee b .
   De…ne:

                                           1      p (b) p (z b)
                            B                                                       2 (0; 1)
                                  1 + (1          ) p (b) [1 p (z             b)]
Notice that equations (B.8) and (B.17) are independent of so b is also independent of
and B is explicitly de…ned. With = B in equation (B.9), the planner’s allocation solves
the system of equations that de…nes the decentralized equilibrium for any 2 (0; 1) so we
can conclude ( ; ) = b; b .19 Turning now to 6= B, the following lemma will be useful:

Lemma B.1 e0l ( ) < 0, e0k ( ) > 0, and e0k b > 0

                                                                                     R1
                                     (1   )[1 p( )p(z    )]                                  [y(!) y( )]d!
Proof. De…ne f3 ( )             1+        +(1 )p( )
                                                              and h ( )              R
                                                                                             [y( ) y(!)]d!
                                                                                                             . With f1 ( ) as
                                                                                         0
                                                        f1 (el ( ))            h( )
per the proof of Proposition 4, el ( ) solves           f3 (el ( ))
                                                                      =   1    (1 )
                                                                                    .          Some algebra reveals that
                                       d f1 ( )
Assumption 2 is su¢ cient for           > 0 so h ( ) < 0 implies e0l ( ) < 0. To establish
                                      d f3 ( )
                                                               0
                                                           R1
e0k ( ) > 0, rewrite equations (B.9) and (B.17) to isolate y (!) d! then equate. Rearrange
the equated expression to isolate 1 y ( ). The result implies 1 y ( ) > 0 which, by
di¤erentiation of equation (B.17) and Assumption 3, means e0k ( ) > 0. Finally, the …rst
order condition for the planner’s informed retention strategy can be used to conclude y b <
1 so e0k b > 0 is also true.

Given Lemma B.1, showing ( ;               )        b; b amounts to showing el b < ee b . Simi-
larly, showing ( ;      )       b; b amounts to showing el b > ee b . With f1 ( ), f3 ( ),
  19
    Existence of equilibrium and the su¢ ciency of Assumption 2 for uniqueness of this equilibrium is proven
similarly to Proposition 6. Also, with = 1, equations (B.8) and (B.9) are identical so the decentralized
equilibrium is constrained e¢ cient for any .

                                                        30
                                                                          f1 (el ( ))           h( )
and h ( ) as de…ned in the proof of Lemma B.1, el ( ) and ee ( ) solve    f3 (el ( ))
                                                                                        =   1   (1 )

and   f1 (ee ( ))
            = f3 (ee ( )) h ( ) respectively. If < B, then 1 (1
      f3 (ee ( ))
                                                                   1
                                                                     )
                                                                       < f3 (b) = f3 ee b
                 f1 (el (b))                           f1 (ee (b))
and, therefore, f e b < f3 ee b h b = f e b . We know dd ff31 (( )) > 0 from
                  3 ( l ( ))                            3 ( e ( ))
                             f1 (el (b))   f1 (ee (b))
the proof of Lemma B.1 so f e b < f e b implies el b < ee b . In other words,
                              3 ( l ( ))    3 ( e ( ))
                                                                       f1 (el (b)) f1 (ee (b))
( ; )        b; b if < B. In an analogous manner, > B yields f e b > f e b so
                                                                        3 ( l ( ))  3 ( e ( ))

el b > ee b and thus ( ; )               b; b .




References
Boot, A. 2000. “Relationship Banking: What Do We Know?”Journal of Financial Interme-
  diation, 9(1): 7-25.

Cohen, J., K. Hachem, and G. Richardson. 2019. “Relationship Lending and the Great
  Depression.”Review of Economics and Statistics, forthcoming.

Hachem, K. 2011. “Relationship Lending and the Transmission of Monetary Policy.”Journal
  of Monetary Economics, 58(6-8): 590-600.

Lummer, S. and J. McConnell. 1989. “Further Evidence on the Bank Lending Process and
  the Capital Market Response to Bank Loan Agreements.”Journal of Financial Economics,
  25(1): 99-122.




                                             31
Appendix C –Corrective Taxation
Proposition 8 suggests that constrained e¢ ciency cannot be achieved by simply changing the
level of the interbank rate R. The problem is that the interbank rate in the decentralized
equilibrium was simultaneously too high and too low: it was too high from the perspective
of achieving the constrained e¢ cient but too low from the perspective of achieving the
constrained e¢ cient .
    One way to address this involves changing the strength with which R a¤ects relative
to . Imagine a government that can costlessly observe the resource allocation decision of
lenders and tax any resources devoted to matching. Starting from the decentralized pair
( ; ), the direct e¤ect of introducing such a tax is to decrease , freeing up capital and
pushing R down. As the price of capital falls, decreases and increases. However, does
not increase by as much as it would have absent the tax since taxation of matching activities
makes such activities less attractive. Since unmatched lenders rely on matching activities
to …nd potential borrowers, the tax also decreases the attractiveness of being unmatched,
putting additional downward pressure on .
    The following proposition formalizes the above discussion:

Proposition C.1 Consider a policy which taxes at a per-unit rate then transfers all
the tax revenues lump-sum to the interbank market. There is a > 0 that implements the
constrained e¢ cient allocation b; b as a decentralized equilibrium when = 1.

Proof. The proposed tax changes the value of an unmatched lender from (10) to:

                                Z   1
         U = U + p( )                   [1    p (z        ) (1      I (!))] [J (!)       R                 U]       (!) d!
                                0

where J (!) is still as per equation (5). Informed retention still follows a reservation strategy
with:

                                                      e
                                                      R            (1       )
                                             y( ) =           +                 (1    )U

and the lender’s …rst order condition for                         simpli…es to:

                  Z                                   Z   1
         f1 ( )                                                                        1            (1              )
                       [y (!)       y ( )] d! +               [y (!)      y ( )] d!                                     =0             (C.1)
         f2 ( )   0                                                                           p0   ( )          H

The equilibrium now involves a pair ( ; ) satisfying equations (C.1) and (A.20). The
constrained e¢ cient allocation b; b still solves equations (A.16) and (A.20). De…ne:

                                                                                              Z        1   h                  i
                              (1   ) p0 (b)      p (b) p (z b)
     b                                                                                                      y (!)       y b       d!
           1          (1    ) + (1    ) p (b) 1 + (1 )p(b)p(z b)b                                  b
                                                                    +(1     )p(b)[1 p(z b)]




                                                                   32
If = b, then b; b satis…es equation (C.1), completing the proof. Note b > 0, meaning
that the resources allocated to matching are taxed.

    The lump-sum transfer of tax revenues ensures that capital market clearing is still given
by equation (9), which is the equation on which (A.20) is based. Speci…cally, the government
takes the tax out of the average pro…ts of lenders. All else constant, this would reduce the
amount of capital remitted to the interbank market by the lenders. The lump-sum transfer
o¤sets this exactly to preserve (9).
    The tax in Proposition C.1 was predicated on costless observation of by the government.
This may not be possible if is literal e¤ort, in which case the value of Proposition C.1 is
simply pedagogical in that it reinforces the nature of the externalities. If, in contrast, the
resources that lenders allocate between matching and screening take the form of physical
labor rather than e¤ort, then a tax on may be possible.




                                             33
Appendix D –Construction of Figure 1
Decentralized Equilibrium From the proof of Proposition 10, there is a decentralized
equilibrium with    = 1 if and only if      1 . Using y (!) = ! and the expression for 1
in the aforementioned proof, we can write:
                                  "                           # 1
                                       (2      1 ) (1   2 1 )
                              1 = 1+                  z
                                                                                    (D.1)
                                         (2     )p 2 1
where   1   solves:

                                               2 (1             1)                      z
                                                                             =p                                       (D.2)
                                       (2             1 ) (1         1)                 2
Equation (D.2) is a quadratic in           1   with one positive root:
                      q
                                           z            2            2        z                          2        z
                        4 1 p              2
                                                +               1        p2   2
                                                                                            2+ 1+             p   2
                  1 =                                                    z
                                                                                                                      (D.3)
                                                                2p       2

We can then get       1   2 (0; 1) with:
                                                                                   z
                                                                 4 2 p              2
                                          2>      >                               z
                                                                                                                      (D.4)
                                                                  4 p             2
                                                                                                R1
                                                                                            1        y(!)d!
Recall that the proof of Proposition 10 assumed p z2 > R x 0            , where x was de…ned
                                                           0 [1 y(!)]d!
             R1
by y ( x )    0
                y (!) d!. Under y (!) = !, this assumption simpli…es to p z2 > 4(2    4
                                                                                         )
                                                                                            or,
equivalently, > . The condition > is necessary and su¢ cient forR (D.3) to deliver
      1                                                                       1
 1 < 2 which, together with   < 2, implies 1 2 (0; 1) in (D.1). Note that 0 y (!) d! < 1 in
Assumption 3 is equivalent to < 2 when y (!) = !.
    From the proof of Proposition 10, we know dd > 0 when          = 1. It is straightforward
              d
to also show d > 0 when       = 1.
    Consider now an equilibrium with     = 0. Equations (A.26) and (A.27) reduce to        = z2
and = 2 1. Using (A.28), we then need to con…rm 1 1 + (2 (3)2 p24)z . Let 0 be the
                                                                          (2)
at which this holds with equality:
                                     "                    # 1
                                              (3      4)
                                 0     1+
                                          (2     )2 p2 z2
                                                                                                                         4
There is a decentralized equilibrium with                        = 0 if and only if  0 . Notice that >                   3
                                                            4
ensures 0 2 (0; 1). Also notice that >                      3
                                                                is ensured by > . We can now compare                      0
and 1 . The condition for 0 < 1 is:
                                           3     4                   1
                                                       z
                                                                              >1            2   1                     (D.5)
                                     (2        )p      2
                                                            2            1

To simplify, rewrite (D.2) as:


                                                                34
                                                    1                                    z
                                                            =1           (1    1) p      2
                                          2             1

Substitute this into the left-hand side of (D.5), rearrange to isolate                                           1,   then substitute       1    as
per (D.3). After some algebra, we get that 0 < 1 just requires:
                                          h               z i             2
                                                                                    2
                                        2 2             p                      1        <1
                                                          2
This is true for any 2 ( ; 2) so 0 < 1 follows.
   Finally, consider an equilibrium with   2 (0; 1). This requires 0 =                                                    1    = 0 in (A.28).
Combining equations (A.26), (A.27), and (A.28) then yields     = z2 and:
                                    "                               #
                                                2
                                1        z
                         =            p                                                                                                   (D.6)
                           1 p z2        2 1 2        (1    ) p z2
where    solves:

                                   (2             ) (1          )                   2
                                                                    =                            z
                                                                                                                                          (D.7)
                                   (1               ) (1        2 )   (1             ) p2        2

The decentralized equilibrium with                      2 (0; 1) prevails if and only if                              2 ( 0;    1 ).   Notice:

                   d                        2 (1                     )2 (1 2 )2
                        =                2 2 z                                                               2
                                                                                                                  >0
                   d         (1         ) p 2 (2                     ) 1 2 + (2                      )
Going through the algebra, we can also get:

               d                          2
                                              (1        2 )2         1
                                                                          1    2
                                                                                    +    2               2
                    =
               d        (1         )2 p       z
                                              2
                                                    1       p    z
                                                                 2
                                                                          (2       ) 1       2       + (2             )   2


                                   d
Therefore, the condition for        d
                                          > 0 is:

                                              2         2        1        2
                                                             +                 1        <0                                                (D.8)

                               2
Expand (D.7) to isolate         then substitute into (D.8) to rewrite (D.8) as:
                                            !
                                   2                3    4       2          2
                   2         +         2 z
                                                  <                     2
                               (1    )p 2            2     (1     )p  z
                                                                                                         2
The left-hand side is negative while the right-hand side is increasing in . Therefore, the
right-hand side being positive at = 0 will be su¢ cient for dd > 0. It is straightforward
to show that this su¢ cient condition is true.

Constrained E¢ cient Allocation From the proof of Proposition 10, the planner chooses
b = 1 if and only if b1 . Using y (!) = ! and the expression for b1 in the aforementioned
proof, we can write:


                                                                     35
                                 2                                                       3       1
                                                                4          2
                                6         2 p( z2 )
                                                           1        +   2 p( z2 )        7
                           b1 = 6
                                41 +                                    z
                                                                                         7
                                                                                         5
                                                      (2        )p      2


Three comments are in order. First, the bounds on that ensure 1 2 (0; 1) also ensure
                                                       b
b1 2 (0; 1). Second, it is straightforward to show dd > 0 when b = 1 (recall that db        d
                                                                                               >0
when b = 1 was already shown in the proof of Proposition 10). Third, b1 > 1 .
    The proof of b1 > 1 proceeds by contradiction. Suppose b1               1 . From the proof of
Proposition 10, we know b = z2 with b = 1 at = b1 and              = z2 with        = 1 at = 1 .
               db                                                               z
We also know d > 0 whenever b = 1. Therefore, b1              1 implies b       2
                                                                                  =      at = 1 .
However, Proposition 8 established b <       for any 2 (0; 1) where both the decentralized
equilibrium and the planner’s solution have = 1. With b1           1 , both have      = 1 at = 1
so b      cannot be true. In other words, b1      1  leads to  a contradiction    so it must be the
case that b1 > 1 .
    Consider now a constrained e¢ cient allocation with b = 0. Equations (A.26) and (A.30)
reduce to b = z2 and b = 2 1. Using (A.31), we must then con…rm 1 1 + (2 3 )p24 z . Let
                                                                                           (2)
b0 be the at which this holds with equality:
                                      "                    # 1
                                               3      4
                                 b0     1+
                                           (2     ) p2 z2
Notice that 43 < < 2 ensures b0 2 (0; 1). It is then easy to see b0 >                                       0.   Also notice that
b0 < b1 reduces to:

                                                                z           3        4
                                 4    6 + (2               )p   2
                                                                     <           z
                                                                             p   2

The left-hand side is increasing in p z2 . Evaluating it as p z2 ! 1 yields 3       4 so the
                              z
inequality is true for any p 2 2 (0; 1). We can thus conclude b0 < b1 , where the planner
chooses b = 0 if and only if      b0 .
    Finally, consider a constrained e¢ cient allocation with b 2 (0; 1). This requires 0 =
                                                                                    z
  1 = 0 in (A.31). Combining equations (A.26), (A.30), and (A.31) then yields b = 2 and:
                                       "                             #
                                1          z     b
                        b=               p                                             (D.9)
                            1 p 2  z
                                           2 1 2b (1          ) p z2

where b solves:
                                      2
                                                                =                            z
                                                                                                                          (D.10)
                             1   2b       4            2 b           (1          ) p2        2


There are two possible solutions for b. However, we need b <                                         1
                                                                                                     2
                                                                                                         otherwise b cannot be
positive. The only valid solution is therefore:



                                                       36
                                                     s
                                b=       1                2               2                    1                      z
                                                                                      +                 1 p2
                                                              4                                                       2
                    db
It is easy to see   d
                         > 0. We can also use (D.9) and (D.10) to show:
                                                                                                                               2
                         db                                       1                                 2        1        2b
                            =                                                                                                      >0
                         d    8 (1                       2
                                                         ) p      z
                                                                          1       p       z    2             1         b
                                                                  2                       2

Note that the planner chooses b 2 (0; 1) if and only if                                                 2 (b0 ; b1 ).

Lemma D.1 If b0 <               1,   then b <                      and b <                    for       2 (b0 ;       1 ).

                                                                                                                                   2           b
Proof. Using (D.6) and (D.9), we see that b <        amounts to 1 2 > 1 2b . A necessary
condition is > b so establishing b <     will also establish > b.
   Recall b0 > 0 and b1 > 1 . Also recall dd > 0 for 2 ( 0 ; 1 ). Therefore,      >0=b
at = b0 and       = 1 > b at = 1 .
   The rest proceeds by contradiction. In particular, suppose there is a e 2 (b0 ; 1 ) such
that b > . Then there is a ex 2 (b0 ; e) such that b =       and db
                                                                 d
                                                                    > dd . There must also
be a ey 2 (e; 1 ) such that b =   and db
                                      d
                                         < dd . Rewrite db d
                                                              < dd as:
                                                     2
                               1 1       2b                   (1          2 )2 1 1 2 + 2                                           2
                                                         <                                                                                         (D.11)
                               8 1           b                             1 2 + (2   )                           2

             2           b
Now use   1 2
                 =      1 2b
                               (which comes from b =                                      ) to rewrite (D.11) in terms of only                      :

                                                                      2       1                2         2                 2
                 T( )           8 1              2        +2                          1             +                                      1>0     (D.12)

We can prove a contradiction here. The …rst step is to show T 12 < 0. The second step
is to show T 0 ( ) > 0 for any   2 0; 12 . We can restrict attention to < 21 since this is
necessary for    > 0. Taking …rst derivatives:
                                             2
                    0                4                                            2                                        2               2   3
                 T ( )=                          2            4+2 +                            + 3 (2 + )                              4

Now take second and third derivatives to get:
                                                          2
                                                 4                                    2                                                2   2
                        T 00 ( ) =                             4+2 +                          6 (2 + )                + 12

and:
                                                          96
                                T 000 ( ) =                       [2 (1                   ) + (1          2 )] > 0
respectively. We can then evaluate:


                                                                              37
                                                                                           2
                                        1                     4
                                T 00            =                 (2               )           <0
                                        2
and:

                                                1           4
                                       T0               =         (2               )>0
                                                2
and:
                                                                                       2
                                        1                         2
                                  T                 =    2                     1           <0
                                        2
With T 000 ( ) > 0 and T 00 21 < 0, we can conclude that T 0 ( ) is decreasing in . With
T 0 12 > 0, we can then conclude that T ( ) is increasing in . Together with T 21 < 0,
this rules out the existence of a 2 0; 12 satisfying T ( ) > 0 so (D.12) cannot hold and,
hence, there cannot exist a e 2 (b0 ; 1 ) such that b > .
    The left panel of Figure 1 is drawn for b0 < 1 . If instead b0 > 1 , then the decentralized
equilibrium reaches      = 1 while the planner is still at b = 0. This is illustrated in the right
panel of Figure 1.
    The last step is to reduce b0 < 1 to a condition on parameters. Using the expressions
for b0 and 1 derived above, b0 < 1 is equivalent to:
                               z 2 h                    z i
                            p            5    4 + 2p         1+2 < 0                       (D.13)
                               2 1                      2
where 1 solves (D.2). Note that we can expand (D.2) to get:
                      z 2 h         z         z        i        h       z i
                  p            2p      +   p        2     1   2   1 p         =0
                      2 1           2         2                         2
which helps simplify (D.13) to:
                                                                               z
                                                        2 2            p       2
                                            1   >                          z
                                                                                                                      (D.14)
                                                    7             p        2
                                                                                       4
Now use equation (D.3) to substitute out                 1.       After some algebra, (D.14) can be expressed
as Te p z2 j > 0, where:

                                                              3
      z                  7        z                                    31 2                               z   21 2
 Te p   j            2
                           + 2 p2                                 +                            17 + 8 p     +        10 + 4
      2                  2        2                         4           4                                 2    4

It is easy to show Te (0j ) > 0, Te (1j ) < 0, and Te00 ( j ) < 0 for any 2 43 ; 2 . This implies
existence of a unique ( ) 2 (0; 1) such that Te ( ( ) j ) = 0 and Te p z2 j > 0 if and only
if p z2 < ( ). Accordingly, b0 < 1 if p z2 < ( ) while b0 > 1 if p z2 > ( ).
                                                                   4
    Recall from (D.4) that the analysis imposes 2 ( ; 2)           3
                                                                     ; 2 , where > is equivalent
to p 2 > 4 . Therefore, for the left panel of Figure 1 to be relevant, we need 4(2
       z     4(2 )
                                                                                          4
                                                                                             )
                                                                                               <
  ( ). Going through the algebra, ( ) is given by:


                                                            38
                                            r
          3                                                                     2
                  31 2                          3
                                                        31 2                             2   7        21 2
         4
              +    4
                             17 + 8             4
                                                    +    4
                                                                    17 + 8           4       2
                                                                                                 +2    4
                                                                                                             10 + 4
  ( )=                                                             2
                                                               2            7 +4
                  4(2    )
and showing        4
                             < ( ) amounts to showing:
                    7         6         5               4               3            2
              8         +2        681       + 3732          8320            + 9088       4864 + 1024 > 0
This inequality is satis…ed by any 2 ( 0 ; 2), where 0 1:6274.
    De…ne za ( ) and zb ( ) such that p za2( )    4(2 )
                                                   4
                                                         and p zb2( )       ( ). If 2 ( 0 ; 2),
then za ( ) < zb ( ). The left panel in Figure 1 applies for any z 2 (za ( ) ; zb ( )) while the
right panel applies for any z > zb ( ). If instead 2 34 ; 0 , then za ( ) > zb ( ). The left
panel in Figure 1 does not apply while the right panel applies for any z > za ( ).




                                                                   39
Appendix E –Baseline with Non-Linear Alternative
Return to the baseline model of Sections 2 and 3. Normalizing the aggregate stock of capital
in the economy to one, the total amount of capital invested in the simple technology is:
                                                 R1
                                     Ka     1     0
                                                      n (!) d!
      R1
where 0 n (!) d! with n ( ) as per (2) represents the total amount of capital in intermediated
projects. Total output from the simple technology is then g (Ka ), where g (0) = 0 and
g 0 ( ) > 0. The analysis in Sections 2 and 3 assumed g ( ) linear, that is, g (Ka ) = g 0 Ka for
some constant g 0 > 0. This appendix considers what happens when g ( ) is non-linear.
      The welfare function that the planner maximizes is now:
                                                  Z 1
                                   1
                           W=           g (Ka ) +     y (!) n (!) d!
                                 1                  0

Notice that this delivers the welfare function in (7) if g (Ka ) = g 0 Ka . The planner’s …rst
order condition for I ( ) still delivers a reservation strategy. Speci…cally, he sets I (!) = 0
for ! < and I (!) = 1 for !         , where is implicitly de…ned by:

                                          y ( ) = g 0 (Ka )                                (E.1)
This is similar to equation (A.12) in the proof of Proposition 3, except that g 0 (Ka ) is no
longer a constant. The planner’s …rst order conditions for and then simplify to (A.30)
and (A.31) respectively.
    Lenders in the decentralized economy take as given the marginal return g 0 (Ka ). There-
fore, the problem of a decentralized lender is still as in Lemma 2.

E.1     Full Retention of Uninformed Matches
First consider      = 1 for both the planner and the decentralized lenders. The relevant
comparison is to Section 3.1.
    With = 1, the planner’s …rst order condition for reduces to equation (A.16). The
decentralized solution is characterized by equations (A.13) and (A.15), where g 0 in (A.13)
is evaluated at g 0 (Ka ). On a plot with on the horizontal axis and on the vertical axis,
we know from the proof of Proposition 4 that (A.15) maps a downward-sloping curve that
lies above the curve mapped out by (A.16). Accordingly, it only remains to determine the
relative positions of the curves mapped out by (A.13) and (E.1).
    Using n ( ) as per (2) with = 1, we can write:

                              p( )                                p (z     )
              Ka = 1                    1
                          + (1    )p( )               + (1       ) p ( ) [1 p (z   )]
It is easy to see that Ka is decreasing in and increasing in . Intuitively, more capital is
available for the simple technology when unmatched lenders are less keen on matching with
…rms and/or informed lenders are more selective in the …rms they retain.
    Suppose the simple technology exhibits diminishing marginal returns, g 00 ( ) < 0. This
           0             0
implies @g
         @
             < 0 and @g@
                           > 0. It then follows immediately from y 0 ( ) > 0 that (E.1) maps


                                                40
an upward-sloping curve when graphed with on the horizontal axis and on the vertical.
Notice that (A.13) collapses to (E.1) if = 0, in which case (A.15) above (A.16) on this
graph implies that both and are too high in the decentralized equilibrium relative to
the constrained e¢ cient allocation. If instead > 0, then g 0 (Ka ) must be lower in (A.13)
than in (E.1) for the same value of . Accordingly,       must be lower in (A.13) than in
(E.1) for the same value of , implying that (E.1) lies above the curve mapped out by
(A.13). This means that the decentralized is ine¢ ciently high for any > 0, while a
continuity argument establishes that the decentralized is ine¢ ciently high for any below
some positive threshold. The only di¤erence relative to Propositions 3 and 4 is that the
decentralized is now ine¢ ciently high even at = 0; all other results are qualitatively the
same.

E.2    Partial Retention of Uninformed Matches
Now consider parameters where both the planner and the decentralized lenders choose < 1.
The relevant comparison is to Section 3.2.
   With < 1, the planner’s …rst order conditions reduce to = z2 and (A.17) as in the
proof of Proposition 5, along with (E.1) evaluated at:

                         z                     z
                     p   2
                              1        p       2
                                                                           p z2   + (1         ) p z2      (1    )
   Ka = 1                          z                       z
                                                                                                                      (E.2)
                  + (1       )p    2
                                           1       p       2
                                                                           + (1   ) p z2        + (1         ) p z2

The decentralized solution is characterized by = z2 , (A.18), and (A.19) as in the proof of
Proposition 5, where g 0 in (A.19) is evaluated at g 0 (Ka ).
   If = 0, then (A.19) simpli…es to (E.1). This implied       = b in Proposition 5 since g 0
was a constant. Comparison of (A.17) and (A.18) then implied          < b . Now that we are
considering a simple technology with decreasing returns to scale, g 0 depends on and so
we can no longer follow the same reasoning. To this point, let c ( ) denote the function
implicitly de…ned by (E.1) with Ka as per (E.2). Di¤erentiating yields:
                                                               p2 ( z2 )                            y0 ( )
                         [   +(1   )p(     z           z
                                      )[1 p( )] ][ +(1 )p( )[ +(1 )p( )]]    z             z      g 00 (Ka )
              0                            2           2                     2             2
              c   ( )=                                                                                         >0
                                  p( )[1 p( z2 )]
                                       z
                                       2
                                                                  p( z2 )[1 p( z2 )](1 )
                                                         2 +                                2
                             [ +(1 )p( z2 )[1 p( z2 )] ]     [ +(1 )p( z2 )[ +(1 )p( z2 )]]
so, at = 0, we have       < b if and only if < b.
    Equations (A.17) and (A.18) implicitly de…ne functions that I will denote by p ( ) and
 d ( ) respectively. The constrained e¢ cient allocation solves b =   p
                                                                         b = c b while
the decentralized equilibrium solves     = d ( ) = c ( ) when = 0. On a plot with on
the horizontal axis and on the vertical axis, we know from the proof of Proposition 5 that
(A.17) maps an upward-sloping curve that lies above the upward-sloping curve mapped out
by (A.18). Therefore, showing that c ( ) is less steep than d ( ) at any point where these
two functions intersect will be su¢ cient to show   > b and > b when = 0. Note that
this would constitute a reversal of the result on in Proposition 5.
    For 0c ( ) < 0d ( ) when c ( ) = d ( ), we need:

                                                                     41
                               "                                                                       R                                           #
                                                                       z
                           z                                  p2                                   y ( )       [y ( )     y (!)] d!            0
      (1         )2 p2                                                 2
                                                                                                   2   R01
                           2            + (1          )p        1 pz
                                                                   2
                                                                              [y (!) y ( )] d! g 00 (Ka )
                                                                                        z
                                                                                        2
                                                       R1                    !2      R                    !2                                               3
                      0
                  y ( )                                    [y (!) y ( )] d!              [y ( ) y (!)] d!
  < R                                    1            +R                      4 + R0                         (1                                            )5
                                                                                       1
        0
            [y ( )        y (!)] d!                      0
                                                           [y (  ) y (!)] d!             [y (!) y ( )] d!

To …x ideas, consider y (!) = ! as in the construction of Figure 1. The condition for
 0       0
 c ( ) < d ( ) when c ( ) = d ( ) simpli…es to:


                                                                               !
            00                            1 2                                                              2     2   z         2
                                                                                                                                   (1   )2
        g                                                                            > (1                  ) p                                     (E.3)
                 (1        )2 p 2   z
                                    2
                                          (1  )                    1                                                 2 1           2 (1    )

where       solves:
                                                                                                                         !
                                                  0                                         1 2
                                         =g
                                                      (1               )2 p 2       z
                                                                                    2
                                                                                            (1  )                1
and     is then given by:
                                                                                                       2
                                                          1                         2   z
                                    =         z                        z
                                                                                p                                                                  (E.4)
                                         p    2
                                                      1       p        2
                                                                                        2 1            2             1
Notice from (E.4) that           2 0; 12 is necessary for to be well-de…ned. We can also show:
                                        !
                            2       2
                 @            (1  )         2 (1    ) (1 2 )           (1   )
                                          =                   1+                 >0
                 @        1 2 (1      )       1 2 (1      )       1 2 (1      )

for 2 0; 12 . Therefore, a su¢ cient condition for (E.3) can be found by evaluating the
right-hand side of (E.3) at = 12 . De…ning:
                                                                           1 2
                                    x                     2            z
                                                                                                                         ( )
                                         (1           ) p2             2
                                                                           (1  )                  1
we can rewrite this su¢ cient condition more compactly as:
                                                                                                           z
                                                  g 00 (x ) <                   (1          )2 p 2
                                                                           8                               2
where x solves:

                                                          g 0 (x ) =                        1
                                                                                                (x )
This is just a statement about g ( ) being su¢ ciently concave. In other words, for parameters
where both the planner and the decentralized lenders choose          < 1, the baseline model
delivers     > b at = 0 if the simple technology is assumed to exhibit su¢ ciently strong
decreasing returns to scale.

                                                                               42
Appendix F –Analytical Supplement to Figure 2
Impose = 1 for both the planner and the decentralized lenders (recall that Figure 2 is
plotted for values of where this is indeed optimal). Use the functional forms in the main
text to write the aggregate capital condition (A.26) as:

                      exp ( z) exp (                   )                  2
                                                           =                                                              (F.1)
                       exp ( ) 1 +                                  [ (1 + )               2] (1         )
Also use (F.1) along with L = 1 and the functional forms to write the aggregate labor
condition (A.34) in terms of only z and :

                                         exp ( z)               1+
               z=                                                h                                   i           (z; )    (F.2)
                                                                                           exp( z)
                     exp ( z) + (1               ) (2           ) (1+1 )           2
                                                                                       +    2

Next, use (F.1) and the functional forms to write the planner’s remaining equation, (A.30),
as:
                                          0               12
                                               2     b
                              exp ( zb) = @               A                           (F.3)
                                               1+b      2

Similarly, use (F.1) and the functional forms to write the decentralized lenders’remaining
equation, (A.27), as:
                                                            2
                                      2                                   2 (1  ) (2 ) (1                             )
               exp ( z ) =                                      +                    2                                    (F.4)
                                    (1 +     )         2                  [ (1 + ) 2] (1                          )
Return now to (F.2). Equation (F.2) de…nes an implicit function z ( ) which is common
to both the decentralized and planner solutions. Taking a second order Taylor expansion
around the planner’s solution, we can write:

                                                                    b + 1 z 00 b
                                                                                                             2
                    z( )          z b + z0 b                                                             b
                                                                        2
where:
                                                                          0
                                             z0 ( ) =                         0
                                                                1             z
and:
                                             00                  00               00 0
                             00
                                                            2    z    +           zz z   ( )
                           z ( )=                  0
                                                        +                           0
                                                                                               z0 ( )
                                         1         z                  1             z

Restrict   < 2 as in Appendix D. With                   ( ) as de…ned in (F.2), we can show:
                                                                              2
                                   0 sign          2
                                     =                                             exp ( z)
                                                 (1 + )               2



                                                            43
                                      0
Equation (F.3) then implies               = 0 at the planner’s solution, reducing the Taylor approxi-
mation to:
                                                        1 00 b                     b
                                                                                           2
                                          z      zb       z                                                                (F.5)
                                                        2
where z    z ( ) and zb z b .
   Going through the relevant derivatives, we get:
                                                                                       4
                   00   b                 2 (1   )(2    )
                                                                 1 + exp     2
                                                                              zb
                                                                                           exp         2
                                                                                                        zb
                                                                                                             zb2
               z                                                                   2                            zb
                                exp ( zb)        (1          ) 1 + zb +                        1 + exp         2
                                                                                                                     zb2
where zb solves:

                                                       exp ( zb)         1+
                               zb =                         (1     )(2   )                             2                   (F.6)
                                                                                                  zb
                                      exp ( zb) +                            1 + exp             2

The characterization of zb in (F.6) comes from rearranging (F.3) to isolate b then substituting
into (F.2) and simplifying. It is straightforward to show that (F.6) implies a strictly positive
denominator in the expression for z 00 b ; a su¢ cient condition is just:

                                                   zb                                                           zb
                        exp ( zb) 1 + exp                         zb > 1 + (1 + zb) exp
                                                  2                                                            2

which is true by properties of the exponential function for any zb > 0. With z 00 b well
behaved, the di¤erence between z and zb in (F.5) is small.
    A corollary of z approximately e¢ cient is that all of the following are also approximately
e¢ cient: the total mass of available matches A, the total amount Rof credit K, and total
                                                                          1
welfare W. The result on A comes from (14). The result on K              0
                                                                            n (!) d! then comes
from the de…nition of A in (4). The result on W comes from (9) and the result on K.
However, it is still the case that uninformed credit is too high and informed credit is too
low. From the proof of Proposition 9, uninformed credit is KN = p ( ) [1 p (z               )] A .
We know from Proposition 8 that the decentralized is ine¢ ciently high when the planner
and the decentralized economy are assumed to have the same z. The same ideas apply here
with z approximately e¢ cient so, with A also approximately e¢ cient, KN is ine¢ ciently
high. Informed credit is just KI = K KN so, with K approximately e¢ cient and KN
ine¢ ciently high, KI is ine¢ ciently low.




                                                                 44
Appendix G –Elastic Labor Supply
Suppose there are workers who solve a simple utility maximization problem to determine
labor supply. By supplying L units of labor, a worker earns W L at disutility 2`1 L2 . This
implies the labor supply function L = `W . Labor market clearing then changes from (14)
to:

                                                          Az = `W                                                        (G.1)
The rest of the equations for the decentralized equilibrium follow the proof of Proposition
11. Speci…cally, capital market clearing is still given by (A.26) and the decentralized …rst
order conditions still deliver (A.27), (A.28), (A.35), and (A.36), where (A.28) holds with
complementary slackness.20

G.1        Constrained Ine¢ ciency
The planner’s problem is summarized by the following Lagrangian:

       Z     1                          Z   1
                                                                                                       1 2
L=               y (!) n (!) d! +   1           [y (!)    1] n (!) d! +          0    +   1   (1   )      L +   2   [L    Az]
         0                              0                                                              2`

with n ( ) as de…ned in (2) and A as de…ned in (4). This is similar to the Lagrangian in the
proof of Proposition 10, but also taking into account the disutility of labor, 2`1 L2 , and the
aggregate feasibility constraint for labor, Az = L, which has Lagrange multiplier 2 0.21
   The planner’s …rst order condition for L delivers L  b = ` 2 so the aggregate feasibility
constraint for labor changes from (14) to:

                                                          Az = `     2                                                   (G.2)
The planner’s …rst order condition for I (!) yields a reservation strategy with threshold
de…ned by:

                                                            1    (1          )   2z
                                                 y( ) =                                                                  (G.3)
                                                                   +     1

The aggregate feasibility constraint for capital is still given by (A.26) and the planner’s
…rst order conditions for and still deliver (A.30) and (A.31), where (A.31) holds with
complementary slackness. Finally, the planner’s …rst order condition for z is:
  20
     Any equations referenced in this appendix that depend on f1 ( ) and/or fe2 ( ) as de…ned in the proofs of
Propositions 4 and 10 respectively should be understood to depend on f1 ( ; z) and/or fe2 ( ; ; z).
  21
     The …rst term in the Lagrangian here is scaled by since output is produced at the end of a match
while disutility of labor is incurred every period. In the Lagrangian in the proof of Proposition 10, all terms
other than the …rst term were multiplied by Lagrange multipliers so it did not matter whether the …rst term
was also scaled by .




                                                                45
                                       h R                                                           R1                            i
                         0
                   p ( ) p (z      )         0
                                                 [y ( )   y (!)] d! + (1           ) fe22 ( ; ; z)        [y (!)       y ( )] d!
       2
               =                                                               h                                   i
   +       1                     [ + (1           ) p ( ) [1   p (z   )] ]           + fe2 ( ; ; z) (1         )
                                                                                                                            (G.4)
which completes the characterization.
    Consider y (!) = 1:75! and p (x) = 1 exp ( 2:5x) as in Figure 2. For the remaining
parameters, I set = 0:95 and consider di¤erent values of `. For each `, Figure G.1 compares
the decentralized equilibrium with the constrained e¢ cient allocation for all values of
where      = b = 1 is optimal and the decentralized equilibrium has R > 0 with = 0:95.22
A red marker at the coordinates ( ; `) means that the equilibrium value of the indicated
variable is ine¢ ciently high at this combination of and `. A blue marker means that
the equilibrium value is ine¢ ciently low. The decentralized choice of z tends to be too low
relative to the constrained e¢ cient allocation, with z    too low and also typically too
low. The decentralized choice of is too high, total credit K is too low, and uninformed
credit KN tends to be too high. The corollary that allowed us to conclude approximately
similar welfare for the decentralized and planning solutions in the case of inelastic labor
supply (see the discussion of Figure 2 in Section 5) no longer applies. When ` is very low,
the decentralized K is so low relative to the planner’s K that there is a small region of the
parameter space with KN also too low. However, even in that region, I verify that the ratio
of KN to K is too high.

G.2            Intuition and Discussion
Notice from Figure G.1 that the decentralized equilibrium di¤ers from the planner’s solution
even at = 1. This was not the case with …xed labor supply in the proof of Proposition
11. Labor supply in the decentralized equilibrium is now L = `W , with W still given by
equation (A.36). Substituting = 1 into (A.36) delivers:

                                  Z                                        Z     1
                    0
W = p ( ) p (z               )          [y ( )       y (!)] d! + (1    )             [y (!)   y ( )] d!            F (z; ; ; )
                                   0                                         0

The decentralized labor supply is therefore:

                                                      L = `F (z; ; ; )                                                      (G.5)
Labor supply in the planner’s solution is L = ` 2 . Substituting                              = 1 into (G.4) delivers:
  22
     With labor supply …xed at L, the decentralized equilibrium in the proof of Proposition 11 was char-
acterized by four equations that pinned down , , , and z independently of and two equations that
pinned down R and W as functions of . It is easy to see from (A.35) that = 0 always supports R > 0.
Figure 2 could thus be generated without specifying then …nding the highest consistent with R > 0 for
all the plotted values of . Given the other parameters, any       0:58 would support R > 0 for all plotted
   (i.e.,     0:17) in Figure 2. As increases, the lowest consistent with R > 0 increases so = 0:95
would support R > 0 for        0:39 in Figure 2. Now, however, W enters the labor market clearing condition
because the supply of labor is elastic to the wage. Therefore, the decentralized , , , and z cannot be
determined without …rst specifying and R > 0 must then be veri…ed without as a “free” parameter.

                                                               46
                                                                        2
                                          = F (z; ; ; )
                                    1+ 1
where we recall that 1 is the Lagrange multiplier on the aggregate feasibility constraint for
capital. The constrained e¢ cient labor supply is therefore:

                                                          b = (1 +
                                                          L                        1 ) `F   (z; ; ; )                                                         (G.6)
The expressions for L and L  b in equations (G.5) and (G.6) are the same if and only if 1 = 0.
With 1 > 0, the aggregate feasibility constraint on capital is binding and, at the wage that
prevails in the decentralized equilibrium, the planner would make workers supply more labor
than they actually do because intermediation resources relax the capital market constraint.
Decentralized workers fail to internalize this e¤ect when choosing how much labor to supply,
regardless of the value of .
   This intuition for the ine¢ ciency in z does not depend on workers being separate agents
from the intermediaries. To see this explicitly, eliminate the labor market and suppose z is
e¤ort exerted by each unmatched lender at some disutility c (z). The value of an unmatched
lender changes from (13) to:

                                           Z    1
 U=       c (z) + U + p ( )                         [[1        p (z            )]        + p (z        ) I (!)] [J (!)                   R           U]     (!) d!
                                            0

and the planner’s Lagrangian is:

                Z     1                                        Z    1
         L=               y (!) n (!) d! +                 1            [y (!)           1] n (!) d! +          0       +       1   (1       )       Ac (z)
                  0                                             0

The decentralized equilibrium still involves (A.26), (A.27), (A.28), and (A.35) but now the
combination of (G.1) and (A.36) is replaced by:

                                               Z                                                                        Z   1
 0      p ( ) p0 (z                )
c (z) =                                                 [y ( )              y (!)]        (!) d! + (1               )           [y (!)       y ( )]        (!) d!
        1      (1              )                0
                                                                                       (G.7)
Similarly, the constrained e¢ cient allocation still involves (A.26), (A.30), and (A.31) but
now the combination of (G.2) and (G.4) is replaced by:

                                           h R                                                                                      R1                               i
     0
     c (z)     p ( ) p0 (z             )            0
                                                        [y ( )              y (!)] d! + (1                 ) fe22 ( ; ; z)               [y (!)          y ( )] d!
           =                                                                                           h                                             i
      + 1                      [ + (1                     ) p ( ) [1               p (z         )] ]        + fe2 ( ; ; z) (1                    )
                                                                                                                                                              (G.8)
with:

                                                                               1      (1        ) c (z)
                                                          y( ) =                                                                                              (G.9)
                                                                                            +   1


                                                                                    47
instead of (G.3). Consider c (z) = 2`1 z 2 . At = 1, equation (G.7) replicates the combination
of (G.1) and (A.36) while equations (G.8) and (G.9) replicate the combination of (G.2),
(G.3), and (G.4). Intuitively, it does not matter whether the lender incurs a disutility to
create z or whether he pays a worker who incurs it. In both cases, individual agents fail to
internalize that more intermediation resources relax the capital market constraint.

G.3     Additional Comparative Statics
Consider y (!) = ! and the intermediation technologies:

                                      pm ( ) = 1        exp (        )
for matching and:

                              ps (z      )=1        exp (       (z       ))
for screening. The analysis so far has restricted = . Here, I allow to di¤er from to
get some additional comparative statics for the decentralized equilibrium of the model with
endogenous labor supply.
    The left column of Figure G.2 shows that an increase in (or equivalently a decrease in
the average match duration 1 ) leads to a decrease in total credit K, an increase in uninformed
credit KN , and thus an unambiguous increase in the ratio KKN . The middle column of Figure
G.2 shows that a decrease in leads to the same e¤ects: lower K, higher KN , and higher
KN
 K
    . Lower means that more matching resources are needed to achieve a given matching
probability. In other words, matching becomes harder as decreases so lower values of
could capture an increase in competitive pressure (e.g., because of exogenous reductions in
barriers to entry in banking). The right column of Figure G.2 shows that an increase in
the aggregate productivity parameter increases both K and KN , with the ratio KKN again
rising.
    Loutskina and Strahan (2011) show that the share of mortgages originated by lenders
with little to no private information about their borrowers increased over the period 1992 to
2006. Increases in KKN are thus an empirically relevant phenomenon and taking the model
to data could be a fruitful extension for future work.



References
Loutskina, E. and P. Strahan. 2011. “Informed and Uninformed Investment in Housing: The
  Downside of Diversi…cation.”Review of Financial Studies, 24(5): 1447-1480.




                                                   48
                                     Figure G.1:
              Walrasian Model with Endogenous z and Elastic Labor Supply




Notes: This …gure is drawn for y (!) = 1:75! and p (x) = 1 exp ( 2:5x) with = 0:95. A
red (blue) marker at the coordinates ( ; `) means that the variable indicated above the plot
is higher (lower) in the decentralized equilibrium than in the constrained e¢ cient allocation
at this combination of and `. Markers are only plotted for combinations of and ` where
both the planner and the decentralized lenders optimally choose = 1 and the decentralized
equilibrium has R > 0. A separate plot for the ratio of KN to K is omitted for brevity; for all
plotted markers, this ratio is higher in the decentralized equilibrium than in the constrained
e¢ cient allocation.




                                              49
                                       Figure G.2:
       Additional Results for Decentralized Equilibrium with Elastic Labor Supply




Notes: This …gure is drawn for = 2:5, = 0:95, and ` = 25. The left column uses = 1:75
and = 2:5 and varies . The middle column uses = 1:75 and = 0:5 and varies . The
right column uses = 2:5 and = 0:5 and varies .




                                          50
