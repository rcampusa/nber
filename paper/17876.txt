                                 NBER WORKING PAPER SERIES




                        DYNAMIC ADVERSE SELECTION:
          A THEORY OF ILLIQUIDITY, FIRE SALES, AND FLIGHT TO QUALITY

                                          Veronica Guerrieri
                                           Robert Shimer

                                         Working Paper 17876
                                 http://www.nber.org/papers/w17876


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     March 2012




This paper is an outgrowth of research with Randall Wright; we are grateful to him for many discussions
and insights on this project. A previous version of this paper was entitled, "Competitive Equilibrium
in Asset Markets with Adverse Selection.'' We also thank numerous seminar audiences for comments
on previous versions of this paper. For research support, Guerrieri is grateful to the Alfred P. Sloan
Foundation, Shimer is grateful to the National Science Foundation. The views expressed herein are
those of the authors and do not necessarily reflect the views of the National Bureau of Economic Research.

At least one co-author has disclosed a financial relationship of potential relevance for this research.
Further information is available online at http://www.nber.org/papers/w17876.ack

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2012 by Veronica Guerrieri and Robert Shimer. All rights reserved. Short sections of text, not to
exceed two paragraphs, may be quoted without explicit permission provided that full credit, including
© notice, is given to the source.
Dynamic Adverse Selection: A Theory of Illiquidity, Fire Sales, and Flight to Quality
Veronica Guerrieri and Robert Shimer
NBER Working Paper No. 17876
March 2012
JEL No. D82,E44,G14

                                              ABSTRACT

We develop a dynamic equilibrium model of asset markets affected by adverse selection. There exists
a unique equilibrium where better assets trade at higher prices but in less liquid markets. Sellers of
high-quality assets can separate because they are more willing to accept a lower trading probability.
As a result, the emergence of adverse selection generates a drop in liquidity. It may also lead to a decline
in the price-dividend ratio—a fire sale—and a flight to quality. Subsidies to purchasing assets may
be Pareto improving and can reverse the fire sale and flight to quality.


Veronica Guerrieri
University of Chicago
Booth School of Business
5807 South Woodlawn Avenue
Chicago, IL 60637
and NBER
vguerrie@chicagobooth.edu

Robert Shimer
Department of Economics
University of Chicago
1126 East 59th Street
Chicago, IL 60637
and NBER
shimer@uchicago.edu
1     Introduction
This paper develops a dynamic equilibrium model of asset markets with adverse selection.
Individuals choose prices at which to trade heterogeneous durable assets for homogeneous
perishable consumption goods. Their choice depends on their expectations about the diffi-
culty of trading and the type of asset that is available at each price. In equilibrium, asset
sellers are rationed by a shortage of buyers at all prices above some threshold, and it is
increasingly time-consuming to sell an asset at higher prices. This keeps the owners of low
quality assets from trying to sell them at high prices. The owners of high quality assets are
willing to set a high price despite the low sale probability because holding a better asset
gives a higher continuation value in the event that they fail to sell it. The owners of low
quality assets opt for a low price and a high sale probability.
    We work in a deliberately stylized dynamic general equilibrium framework in which the
distribution of asset holdings evolves endogenously over time as individuals trade. Assets
are perfectly durable and pay a constant dividend, some amount of a perfectly perishable
consumption good. Better quality assets pay a higher dividend but only the asset’s current
owner observes the dividend. This is the source of private information and the root of
the adverse selection problem, as in Akerlof (1970). Individuals are risk-neutral and have
a discount factor that changes over time, independently across individuals, creating gains
from trade. The only permissible trades are between the consumption good and the asset.
Finally, discount factors are observable, which ensures that patient individuals never sell
assets since there are no gains from trade. We believe this framework is useful for capturing
our main idea that illiquidity may serve to separate high and low quality assets in markets
with private information.
   We define a competitive equilibrium in this environment and prove that it is unique. Key
to our equilibrium concept is that buyers’ beliefs about the quality of asset purchased at a
particular price must respect sellers’ incentive to sell at that price. More precisely, if buyers
anticipate getting a particular type of asset with positive probability for a given price, it
must be weakly optimal for some seller to offer that type asset at that price.
   In equilibrium, higher quality assets trade at a higher price but the expected revenue from
selling an asset, the product of its price and per-period trading probability, is decreasing in
the quality of the asset. In the case where the support of the distribution of asset qualities
is convex, we derive simple closed-form expressions for the relationship between prices, div-
idends, and sale probabilities. We also find that the existence of illiquidity does not hinge
on assumptions about the frequency of trading opportunities. More precisely, we prove that
even in the limit with continuous trading opportunities, there are not enough buyers in the


                                               1
market for high quality assets and so it takes a real amount of calendar time to sell at a high
price. From the perspective of a seller, selling opportunities arrive at a Poisson arrival rate.
While this may seem similar to the predictions of search theoretic models of illiquidity in
asset markets (e.g. Duffie, Gârleanu and Pedersen, 2005; Weill, 2008; Lagos and Rocheteau,
2009), there are important differences. For example, the difficulty of finding a buyer depends
primarily on the extent of private information rather than on the availability of trading op-
portunities. This is because real trading delays are essential for separating the good assets
from the bad ones. Of course, in reality adverse selection and search frictions may coexist in
a market, and it is indeed straightforward to introduce search into our framework (Guerrieri,
Shimer and Wright, 2010; Chang, 2011).
    Although our model is abstract, we believe it may be useful for understanding and quan-
tifying the importance of adverse selection for market liquidity. To be concrete, consider the
market for AAA-rated asset-backed securities during the 2007–2008 financial crisis. Prior
to the crisis, market participants viewed these securities as a safe investment, nearly indis-
tinguishable from a Treasury bond. In the early stages of the crisis, investors started to
recognize that some of these securities were likely to pay less than face value. Moreover, it
was difficult to determine the exact assets that backed each individual security. Anticipating
that she might later have to sell it, the owner of an asset has an incentive to learn its quality.
On the other hand, it may not have been profitable for potential buyers to investigate the
quality of all possible assets because they did not know which assets would later be for sale.
Although we do not model the process of learning about an asset’s quality, we view this
world with private information and adverse selection as the starting point for our model.
   If this view is correct, our model predicts that a seller should always be able to sell an
asset at a sufficiently low price. However, within an asset class, such as AAA-rated asset-
backed securities, the owners of good quality assets will choose to hold out for a higher price,
recognizing that there will be a shortage of buyers at that price and so it will take time to
sell the asset. Moreover, the price that buyers are willing to pay for a high quality asset will
be depressed because the market is less liquid. That is, even if a buyer somehow understood
that a particular asset would pay the promised dividends with certainty, he would pay less
for it because he would anticipate having trouble reselling it to future buyers who don’t have
his information. Illiquidity therefore further depresses asset prices. In particular, sellers’
knowledge of the quality of their assets depresses their liquidity and may depress the value
of all securities even if the average quality is unchanged. This is why we view an event where
sellers start to learn the quality of the assets in their portfolio as a fire sale.1 During a fire
   1
     For a detailed description of the first phase of the crisis and an analysis of the source of the adverse
selection problem, see Gorton (2008). This view of the crisis is consistent with Dang, Gorton and Holmström



                                                     2
sale, buyers still would like to reinvest their income in some asset, and so the decline in the
demand for asset-backed securities will boost the demand for other assets that do not suffer
from an adverse selection problem, such as Treasury bonds. Thus our model generates a
flight-to-quality episode.
    Markets naturally create solutions to adverse selection problems. One solution is rep-
utation effects sustained through repeated interactions between buyers and sellers. In our
model, all trade is anonymous so there is no possibility of sustaining a reputation for deliv-
ering only high quality assets. We view this as a reasonable description of a financial crisis,
even if it is a poor description of the behavior of large financial intermediaries during normal
times. When facing solvency constraints, sellers may be willing to sacrifice their long-run
reputation for the short-run benefits of liquidating their portfolio.
    A second market solution is paying a third party to evaluate the quality of assets. Indeed,
this is one role that rating agencies are supposed to play. But during the financial crisis, the
rating agencies lost their credibility and there was no one with the reputation and capabilities
to take their place.
   Absent market forces, there may be a potential role for policy interventions to boost
asset prices, liquidity, and welfare. We consider one such program in this paper, a subsidy to
purchasing assets at low prices, financed by a tax on dividends. Under some conditions, such
a program can raise the price, liquidity, and value of all assets, even those that do not receive
the subsidy. But typically these policies have distributional effects in general equilibrium,
raising the value of some assets and lowering the value of others. For example, an individual
who only owns Treasury bonds suffers from a policy that ameliorates the adverse selection
problem in the asset-backed securities markets and so moderates the flight-to-quality.
   A large theoretical literature argues that adverse selection may be important in financial
markets. Most papers in this literature look at a different market structure in which all
trades must take place at one price (e.g. Eisfeldt, 2004; Kurlat, 2009; Daley and Green,
2010; Chari, Shourideh and Zetlin-Jones, 2010; Chiu and Koeppl, 2011; Tirole, forthcoming).
These papers can also generate endogenous illiquidity because sellers may choose not to sell
high quality assets if the equilibrium price is too low. The nature of illiquidity is different
in our model: sellers try to sell all their assets at optimally chosen prices, recognizing that
sales will be rationed at most prices. As we discuss in the conclusion, the equilibrium in
our framework appears to be more sensitive to the presence of a small amount of private
(2009), who conclude, “Systemic crises concern debt. The crisis that can occur with debt is due to the
fact that the debt is not riskless. A bad enough shock can cause information insensitive debt to become
information sensitive, make the production of private information profitable, and trigger adverse selection.
Instead of trading at the new and lower expected value of the debt given the shock, agents trade much less
than they could or even not at all. There is a collapse in trade. The onset of adverse selection is the crisis.”



                                                       3
information and to the support of the asset quality distribution. This may be relevant
for understanding why a realistically small amount of private information can incapacitate
secondary markets.
   A third approach to adverse selection assumes random matching between uninformed
buyers and informed sellers and allows the buyers to make take-it-or-leave-it offers to sellers.
Some buyers offer higher prices than others and the owners of high quality assets only sell
when they are offered a high price. This generates an endogenous composition of sellers,
which mitigates the adverse selection problem in that environment (Inderst, 2005; Camargo
and Lester, 2011). Our approach to generating a separating equilibrium is fundamentally
different in that it does not depend on an endogenous composition of sellers. We highlight
this by assuming in our simplest model that the fraction of individuals who are sellers and
the fraction of assets owned by those individuals are constant and exogenous.
    Whether adverse selection is important for financial markets is ultimately an empirical
question. In practice, it is difficult to measure the extent of adverse selection in any market
simply because the data demands are acute. In one of the more successful efforts, Finkel-
stein and Poterba (2004) find a correlation between characteristics of annuity contracts and
characteristics of annuity buyers that are unobserved by annuity sellers. Our model would
suggest a similar test in securities markets, a correlation between the frequency that an asset
is resold and the asset’s terminal payoff conditional on observable characteristics. While our
reading of the existing evidence, e.g. Downing, Jaffee and Wallace (2009), suggests that the
extent of adverse selection in asset markets is small but positive, it is worth stressing that
even a small amount of private information generates some illiquidity in our environment.
In particular, the product of the price of an asset and its sale probability must always be a
decreasing function of the privately-observed dividend.
   Another potential argument against the relevance of adverse selection in secondary mar-
kets is that neither buyers nor sellers knew what they were trading. For example, Arora,
Barak, Brunnermeier and Ge (2011) claim that the structure of collateralized debt obliga-
tions made it computationally infeasible for anyone but the original issuer to measure the
quality of the underlying assets. This is important since in our framework, symmetric lack
of information is not a barrier to trade. Indeed, the best evidence on asymmetric informa-
tion indicates that mortgage originators hold on to mortgages that ex post perform better
than the mortgages they sell (Downing, Jaffee and Wallace, 2009). We are unaware of any
direct evidence for (or against) private information in the secondary market. But our model
gives us confidence that the problem may be real, despite the computational complexity of
unraveling the underlying securities. In equilibrium, prices transmit information from sellers
to buyers. Even if the owner of an asset cannot observe an asset’s dividend, he knows what


                                               4
he paid for the asset and therefore he knows what value the seller assigned to the asset. Here
our model gives a different perspective than models in which all sales occur at a single price.
   This paper builds on our previous work with Randall Wright (Guerrieri, Shimer and
Wright, 2010). It also complements a contemporaneous paper by Chang (2011). There are
a number of small differences between that paper and this one. For example, we look at an
environment in which individuals may later want to resell assets that they purchase today.
This means that buyers care about the liquidity of the asset and so liquidity affects the
equilibrium price-dividend ratio. It follows that interventions in the market which boost
liquidity may also raise asset prices. We allow individuals to hold multiple assets. We also
focus explicitly on a general equilibrium environment, allowing for the possibility that buyers
may be driven to a corner in which they do not consume anything. This is essential for our
model to generate a flight to quality. As we discuss in the conclusion, it is also essential to a
model in which individuals’ discount factors are unobservable. Still, both papers leverage our
earlier research to study separating equilibria in a dynamic adverse selection environment.
    Our notion of liquidity also builds on DeMarzo and Duffie (1999), who study optimal
security design by an issuer with private information. That paper shows that the issuer
may commit to retain some ownership of the security in order to signal that it is of high
quality. We show that in an equilibrium environment, there is no need for sellers to make
such commitments. Instead, when the seller of a high quality asset demands a high price,
the market ensures that the seller retains ownership with some probability by rationing sales
at that price.
   This paper proceeds as follows. Section 2 describes our basic model. Section 3 describes
the individual’s problem and shows how to express it recursively. Section 4 defines equilib-
rium and establishes existence and uniqueness. Section 5 provides closed-form solutions for
a version of the model with a continuum of assets. Section 6 extends the model to have
persistent preference shocks and then shows that the frictions survive in the continuous time
limit. Section 7 discusses how our model can generate fire sales following the revelation
of some information and how illiquidity and insolvency can be alleviated through an asset
purchase program, although the program necessarily loses money. Section 8 concludes.


2     Model
There is a unit measure of risk-neutral individuals. In each period t, they can be in one
of two states, st ∈ {l, h}, which determines their discount factor βst between periods t and
t + 1. We assume 0 < βl < βh < 1. The preference shock is independent across individuals,
which potentially allows for gains from trade. For now we assume that the preference shock

                                               5
is also independent over time. Thus πs denotes the probability that an individual is in state
s ∈ {l, h} in any period, and it is also the fraction of individuals who are in state s in
any period. For any particular individual, let st ≡ {s0 , . . . , st } denote the history of states
through period t.
   There is a finite number of different types of assets, indicated by j ∈ {1, . . . , J}. As-
sets are perfectly durable and their supply is fixed; let Kj denote the measure of type j
assets in the economy. Each type j asset produces δj units of a homogeneous, nondurable
consumption good each period, and so aggregate consumption Jj=1 δj Kj is fixed. Without
                                                              P

loss of generality, assume that higher type assets produce more of the consumption good,
0 ≤ δ1 < · · · < δJ . The assumption that there is a finite number of asset types simplifies our
notation, but in Section 5 we discuss the limiting case with a continuum of assets.
   We are interested in how a market economy allocates consumption across individuals.
For the remainder of the paper, we refer to the assets as “trees” and the consumption good
as “fruit.” The timing of events within period t is as follows:

   1. each individual i owns a vector {ki,j }Jj=1 of trees which produce fruit;

   2. each individual’s discount factor between periods t and t + 1 is realized;

   3. individuals trade trees for fruit in a competitive market;

   4. individuals consume the fruit that they hold.

   We require that each individual’s consumption and holdings of each type of tree are
nonnegative in every period and we do not allow any other trades, e.g. contingent claims
against shocks to the discount factor. In addition, we assume that only the owner of a
tree can observe its quality, creating an adverse selection problem; however, we assume
that individuals’ discount factors are observable. Key to our equilibrium concept, which we
discuss below, is that the buyer of a tree may be able to infer its quality from the price at
which it is sold.
   With observable discount factors, a version the Milgrom and Stokey (1982) “no trade
theorem” implies that high discount factor individuals never sell trees and low discount factor
individuals never buy trees in any equilibrium despite the presence of private information.2
For this reason, we refer to individuals with low discount factors as “sellers” and those with
   2
    This is not necessarily true with unobservable discount factors. In the conclusion we discuss such
an environment and argue that despite this, it may still be the case that in equilibrium high discount
factor individuals do not want to sell trees and low discount factor individuals do not want to buy trees.
Our equilibrium is therefore unaffected by this additional source of private information for an open set of
parameter values.



                                                    6
high discount factors as “buyers.” Trade in trees for fruit therefore transfers consumption
from patient individuals to impatient ones.
   We now describe the market structure more precisely. After trees have borne fruit, a
continuum of markets distinguished by their positive price p ∈ R+ may open up. Each buyer
may take his fruit to any market (or combination of markets), attempting to purchase trees
in that market. Each seller may take his trees to any market (or combination of markets)
attempting to sell trees in that market. However, each piece of fruit and each tree may only
be brought to one market.
   All individuals have rational beliefs about the ratio of buyers to sellers in all markets.
Let Θ(p) denote the ratio of the amount of fruit brought by buyers to a market p, relative
to the cost of purchasing all the trees in that market at a price p. If Θ(p) < 1, there is not
enough fruit to purchase all the trees offered for sale in the market, while if Θ(p) > 1, there
is more than enough. A seller believes that if he brings a tree to a market p, it will sell with
probability min{Θ(p), 1}. That is, if there are excess trees in the market, the seller believes
that his sale may be rationed. Likewise, a buyer who brings p units of fruit to market p
believes that he will buy a tree with probability min{Θ(p)−1 , 1}. If there is excess fruit in
the market, he may be rationed. A seller who is rationed keeps his tree until the following
period, while a buyer who is rationed must eat his fruit.
   Individuals also have rational beliefs about the types of tree sold in each market. Let
Γ(p) ≡ {γj (p)}Jj=1 ∈ ∆J denote the probability distribution over trees available for sale in a
market p, where ∆J is the J-dimensional unit simplex.3 Buyers expect that, conditional on
buying a tree at a price p, it will be a type j tree with probability γj (p). Buyers only learn
the quality of the tree that they have purchased after giving up their fruit. They have no
recourse if unsatisfied with the quality.
    Although trade does not happen at every price p, the functions Θ and Γ are not arbitrary.
Instead, if Θ(p) < ∞ (the buyer-seller ratio is finite) and γj (p) > 0 (a positive fraction of
the trees for sale are of type j), sellers must find it weakly optimal to sell type j trees at
price p. Without this restriction on beliefs, there would be equilibria in which, for example,
no one pays a high price for a tree because everyone believes that they will only purchase
low quality trees at that price. We define equilibrium precisely in Section 4 below.
   We assume throughout this paper that the endogenous functions Θ and Γ are constant
over time, so the environment is in a sense stationary. This restriction seems natural to us,
and indeed we are able to prove existence and uniqueness of an equilibrium with this property.
Key to this result is that, although the distribution of tree holdings across individuals evolves
over time, the fraction of type j trees held by individuals with a high discount factor is
  3
                                          PJ
      That is, γj (p) ≥ 0 for all j and    j=1   γj (p) = 1.


                                                               7
necessarily a constant πh at the start of every period because preferences are independently
and identically distributed over time.


3     Individual’s Problem
Each individual starts off at time 0 with some vector of tree holdings {kj }Jj=1 and preference
state s ∈ {l, h}. In each subsequent period t and history of preference shocks st , he decides
how many trees to attempt to buy or sell at every possible price p, recognizing that he may
be rationed at some prices and that the price may affect the quality of the trees that he
buys. Let Vs∗ ({kj }) denote the supremum of the individual’s expected lifetime utility over
feasible policies, given initial preferences s and tree holdings {kj }. In an online Appendix,
we characterize this value explicitly and prove that it is linear in tree holdings: Vs∗ ({kj }) ≡
PJ
   j=1 vs,j kj for some positive numbers vs,j . This is a consequence of the linearity of both the
individual’s objective function and the constraints that he faces.
    In addition, we prove that the marginal value of tree holdings satisfies relatively simple
recursive problems. A seller solves
                                                                           
                   vl,j = δj + max min{Θ(p), 1}p + (1 − min{Θ(p), 1})βl v̄j ,                        (1)
                               p∈R+


where
                                        v̄j ≡ πh vh,j + πl vl,j .                                    (2)

The individual earns a dividend δj from the tree and also gets p units of fruit if he manages
to sell the tree at the chosen price p. Otherwise he keeps the tree until the following period.
Note that there is no loss of generality in assuming that a seller always tries to sell all his
trees, since he can always offer them at a high price such that this is optimal, p > βl v̄j . Of
course, at such a high price, he may be unable to sell it, Θ(p) = 0, in which case the outcome
is the same as holding onto the tree.
    Similarly, a buyer solves
                                                                                   
                                −1  δj X
     vh,j = max        min{Θ(p) , 1} βh   γj ′ (p)v̄j ′ + (1 − min{Θ(p)−1 , 1})δj       + βh v̄j .
            p∈R+                    p   ′    j


A type j tree delivers δj of fruit, which the buyer uses in an attempt to purchase trees at an
optimally chosen price p. If he succeeds, he buys δj /p trees of unknown quality, type j ′ with
probability γj ′ (p), while if he fails he consumes the fruit. Finally, he gets the continuation
value of the tree in the next period. Again, note that a buyer always finds it weakly optimal


                                                   8
to attempt to purchase a tree at a sufficiently low price p, rather than simply consuming the
fruit without attempting to purchase a tree. We therefore do not explicitly incorporate this
last option in the value function.
   Since the maximand is multiplicative in δj , we can equivalently write the buyer’s value
function as
                                          vh,j = δj λ + βh v̄j ,                                   (3)

where                                          PJ                                        !
                                          βh     j=1    γj (p)v̄j
             λ ≡ max min{Θ(p)−1, 1}                                 + 1 − min{Θ(p)−1 , 1}) .       (4)
                    p                               p

The variable λ is the endogenous value of a unit of fruit to a buyer, independent of the type
of tree that produced the fruit. If λ = 1, a unit of fruit is simply worth its consumption
value, and so buyers find it weakly optimal to consume their fruit. But we may have λ > 1
in equilibrium, so buyers strictly prefer to use their fruit to purchase trees.

Proposition 1 Let {vs,j }, {v̄j }, and λ be positive-valued numbers that solve the Bellman
equations (1)–(4) for s = l, h. Then Vs∗ ({kj }) ≡ Jj=1 vs,j kj for all {kj }.
                                                  P

The proof is in an online appendix. Note that for some choices of the functions Θ and Γ,
there is no positive-valued solution to the Bellman equations. In this case, the price of trees
is so low that it is possible for an individual to obtain unbounded utility and there is no
solution to the individual’s problem. Not surprisingly, this cannot be the case in equilibrium.


4      Equilibrium
4.1     Partial Equilibrium
We are now ready to define equilibrium. We do so in two steps. First, we define an equilib-
rium where the buyer’s value of fruit λ is fixed, which we call “partial equilibrium”. Then,
we turn to the complete definition of a competitive equilibrium, where the value of λ is
endogenous and ensures that the fruit market clears.

Definition 1 A partial equilibrium for fixed λ ≥ 1 is a pair of vectors {vh,j } ∈ RJ+ and
{vl,j } ∈ RJ+ , functions Θ : R+ 7→ [0, ∞] and Γ : R+ 7→ ∆J , and a nondecreasing function
F : R+ 7→ [0, 1] with support P satisfying the following conditions:

    1. Sellers’ Optimality: for all j ∈ {1, . . . , J}, vl,j solves (1) where v̄j is defined in (2);

    2. Equilibrium Beliefs: for all j ∈ {1, . . . , J} and for all p with Θ(p) < ∞ and γj (p) > 0,
       p solves the maximization problem on the right-hand side of equation (1);

                                                    9
   3. Buyers’ Optimality: for all j ∈ {1, . . . , J}, vh,j solves (3) where λ is defined in (4) and
      v̄j in (2);

   4. Active Markets: p ∈ P only if it solves the maximization problem on the right-hand
         side of equation (4);

   5. Consistency of Supply with Beliefs: for all j ∈ {1, . . . , J},

                                            K
                                                           Z
                                           P j =               γj (p)dF (p).
                                            j ′ Kj ′       P


    Sellers’ Optimality requires that sellers choose an optimal price for selling each type of
tree, given the ease of trade. Equilibrium Beliefs imposes that if individuals expect some
type j trees to be for sale at price p, it must be weakly optimal to sell type j trees at that
price. Buyers’ Optimality states that buyers choose an optimal price to buy trees, given the
ease of trade and the composition of trees for sale at each price. Active Markets imposes
that if there is trade at a price p, this must be an optimal price for buying trees. Finally,
Consistency of Supply with Beliefs imposes that the share of sellers’ trees that are of type
j is equal to the fraction of type j trees among those offered for sale, where F denotes the
fraction of trees that are offered for sale at a price less than or equal to p.4
    We characterize partial equilibria using the solution to a sequence of constrained opti-
mization problems:

Definition 2 For given λ, a solution to problem (Pj ) is a vector (vl,j , v̄j , θj , pj ) that solves
the following Bellman equation
                                                                        
             vl,j = δj + max min{θ, 1}p + (1 − min{θ, 1})βl v̄j
                         p,θ
                                                 βh v̄j
                        s.t. λ ≤ min{θ−1 , 1}           + 1 − min{θ−1 , 1} ,
                                                                          
                                                                                                      (5)
                                                  p
                        and vl,j ′ ≥ δj ′ + min{θ, 1}p + (1 − min{θ, 1})βl v̄j ′ for all j ′ < j      (6)

with
                                      v̄j = πh (δj λ + βh v̄j ) + πl vl,j .

       We are interested in solving the sequence of problems (P ) ≡ {(P1 ), . . . , (PJ )}. To do so,
start with Problem (P1 ). Constraint (6) disappears from Problem (P1 ), and so we can solve
   4
    The definition of partial equilibrium builds on our definition of equilibrium in Guerrieri, Shimer and
Wright (2010); however, the sorting condition in that paper does not hold in this environment and so we
cannot directly apply our earlier proofs.


                                                      10
directly for vl,1 and v̄1 , as well as the optimal policy p1 and θ1 . Standard arguments ensure
that the maximized value is unique if λ ≥ 1. In general, for Problem (Pj ), constraints (5)
and (6) for j ′ = j − 1 bind, which uniquely determines pj and θj as well as vl,j and v̄j given
vl,j−1 and v̄j−1. Proceeding by induction yields the following Lemma:

Lemma 1 For fixed λ ∈ [1, βh /βl ], the solution to the sequence of problem (P ) has vl,j+1 >
vl,j , v̄j+1 > v̄j , pj+1 > pj , and θj+1 ≤ min{θj , 1} for all j < J. It is the unique such solution
to the system of equations

                    λpj = βh v̄j for all j,                                                           (7)
                    vl,j = δj + min{θj , 1}pj + (1 − min{θj , 1})βl v̄j for all j,                    (8)
                    vl,j = δj + θj+1 pj+1 + (1 − θj+1 )βl v̄j for all j < J,                          (9)
                     v̄j = πh (δj λ + βh v̄j ) + πl vl,j for all j,                                  (10)

and θ1 ≥ 1 if λ = 1, θ1 ≤ 1 if λ = βh /βl , and θ1 = 1 otherwise.

   If δ1 > 0 and λ < βh /βl , this defines θj > 0 for all j; otherwise θj = 0 for all j ≥ 2. We
focus on values of λ between 1 and βh /βl because these are the relevant ones for equilibrium.
One could, however, also characterize the solution to problem (P ) for λ > βh /βl ; it would
have θj = 0 for all j.

Proposition 2 Fix λ ∈ [1, βh /βl ]. There exists a partial equilibrium and any partial equi-
librium is given by the solution to problem (P ). More precisely:

   • Existence: Take any {vl,j , v̄j , θj , pj } that solves problem (P ). Then there exists a partial
     equilibrium ({vh,j }, {vl,j }, Θ, Γ, F ) where Θ(pj ) = θj , γj (pj ) = 1, vh,j = δj λ + βh v̄j , and
                    P
     dF (pj ) = Kj / j ′ Kj ′ .

   • Uniqueness: Take any partial equilibrium ({vh,j }, {vl,j }, Θ, Γ, F ). For all j, there exists
      a pj ∈ P with γj (pj ) > 0. If also Θ(pj ) > 0, then (vl,j , v̄j , Θ(pj ), pj ) solves problem
      (Pj ).

The proof in the appendix gives a complete characterization of the partial equilibrium,
including the entire functions Θ and Γ. Since we proved in Lemma 1 that the solution to
problem (P ) is unique, except possibly for the value of θ1 , this essentially proves uniqueness
of the partial equilibrium.
    Figure 1 illustrates a partial equilibrium for the case with J = 2.5 The two upward-
sloping curves indicate pairs of prices and resale probabilities such that buyers are willing to
  5
   The figure assumes βh = 0.9, βl = 0.8, πh = πl = 0.5, δ1 = 1, δ2 = 1.25, and λ = 1, an illustrative
example.

                                                    11
                                                                  b
                                            1



               sale probability min{θ, 1}
                                                                                     2




                                                        1
                                                                                j=




                                                    =
                                                    j
                                            θ2                         b




                                                                                     j=
                                                                                          1
                                                                                     j=
                                                                                        2


                                            0                 p1      p2
                                                6       8                  10                 12
                                                            price p

                     Figure 1: Illustration of problem (P) and partial equilibrium.

purchase each of the trees when the value of a unit of fruit is λ. A buyer is willing to pay a
higher price for a tree if he anticipates being able to resell it with a higher probability when
he becomes a seller at some future date. In terms of problem (P), these curves describe the
relationship between θj and pj implied by equations (7), (8), and (10) conditional on λ. This
recognizes that the continuation value v̄j accounts for the resaleability of the tree.
    The two downward-sloping curves are the indifference curves for the seller of each of the
trees evaluated at their equilibrium values. Each of them is downward sloping because a
seller is willing to accept a lower sale probability if he receives a higher price conditional on
a sale. The seller of tree j = 1 is not constrained by worse trees and so in equilibrium is able
to sell the tree with probability 1. The indifference curve of this seller therefore intersects
the buyers’ indifference curve at a price that reflects the complete liquidity of this tree. To
construct this indifference curve, first compute v̄1 from equations (7), (8), and (10) and the
condition θ1 = 1. Then eliminate vl,1 from equations (8) and (9) and solve for θ2 as a function
of p2 given this value of v̄1 .
    The seller of tree j = 2 is constrained by the need to signal that he holds the high quality
tree. The point (p2 , θ2 ) leaves the seller of a type 1 tree indifferent between attempting to
sell it for p2 with probability θ2 and selling it for sure at the lower price p1 . Moreover, buyers
are willing to purchase type 2 trees at price p2 when they recognize that they can resell
them with probability θ2 . Buyers would only pay a higher price for type 2 trees if the resale
probability were higher, but then the sellers of type 1 trees would attempt to sell at this


                                                             12
higher price.
    The figure also illustrates the indifference curve of a type 2 seller through the equilibrium
price-sale probability pair (p2 , θ2 ). We construct this in the same manner as a type 1 seller’s
indifference curve. Note that the sellers’ indifference curves satisfy a single-crossing property,
which is key to our separating equilibrium. The owner of a higher quality tree is willing to
accept a greater reduction in the sale probability for a given increase in the price because
the continuation value of holding a higher quality tree is higher. This illustrates how higher
quality trees sell at a higher price but with a lower probability in equilibrium. Finally, if
there are more types of trees, we can use a similar inductive procedure to construct the price
and sale probability of each type.


4.2    Competitive Equilibrium
We now turn to a full competitive equilibrium in which λ is endogenous:

Definition 3 A competitive equilibrium is a number λ ∈ [1, βh /βl ], a pair of vectors {vh,j } ∈
RJ+ and {vl,j } ∈ RJ+ , functions Θ : R+ 7→ [0, ∞] and Γ : R+ 7→ ∆J , and a nondecreasing
function F : R+ 7→ [0, 1] with support P satisfying the following conditions:

  1. ({vh,j }, {vl,j }, Θ, Γ, F ) is a partial equilibrium for fixed λ; and
                                        J                J
                                                              !Z
                                       X                X
  2. the fruit market clears: πh          δj Kj = πl       Kj       Θ(p)pdF (p).
                                     j=1                 j=1           P


A competitive equilibrium is a partial equilibrium plus the market clearing condition that
states that the fruit brought to market by buyers is equal to the value of trees brought to
the market by sellers times the buyer-seller ratio. Recall from Proposition 2 that dF (pj ) =
     P
Kj / j ′ Kj ′ in partial equilibrium, where pj is the equilibrium price of type j trees. The
market clearing condition therefore reduces to

                                     J
                                     X                  J
                                                        X
                                πh         δj Kj = πl         Θ(pj )pj Kj .                  (11)
                                     j=1                j=1


The left hand side is the fruit held by buyers at the start of the period, while each term in
the right hand side is the equilibrium cost of purchasing a particular type of tree multiplied
by the buyer-seller ratio for that tree.

Proposition 3 A competitive equilibrium (λ, {vh,j }, {vl,j }, Θ, Γ, F ) exists and is unique.



                                                   13
The proof shows that an increase in the value of fruit to a buyer λ drives down the amount
of fruit that sellers expect to get from selling any type j tree, that is, pj Θ(pj ). Indeed, in
the limit when λ = βh /βl , Θ(pj ) = 0 for all j > 1, and so trade breaks down in all but the
worst type of tree. At the opposite limit of λ = 1, buyers are indifferent about purchasing
trees and so Θ(p1 ) > 1 and buyers are rationed. By varying λ, we find the unique value at
which the fruit market clears.
    In general, we can distinguish between three cases, each of which is generic in the param-
eter space. We show in the proof of Proposition 3 that if there are very few sellers, πl < π,
the unique equilibrium has λ = 1 and buyers consume some of their fruit. Conversely, if
there are many sellers, πl > π̄, the unique equilibrium has λ = βh /βl and there is only a
market in the worst type of tree. At intermediate values of πl , βh /βl > λ > 1, there is a
market for every type of tree, and buyers use all their fruit to purchase trees. The thresholds
satisfy 1 > π̄ > π > 0 and depend on all the other model parameters.


5         Continuous Types of Trees
We have assumed so far that there are only a finite number of types of trees. It is conceptually
straightforward to extend our analysis to an environment with a continuum of trees. This is
useful because it shows that the behavior of the economy is not particularly sensitive to the
number of types of trees, but rather to the support of the dividend distribution.
   The only change in our environment is that we assume the dividend distribution is (δ, δ̄),
where 0 ≤ δ < δ̄ ≤ ∞. Let G(δ) denote the cumulative distribution of trees on this support.
We similarly let vl (δ), vh (δ), and v̄(δ) denote the value to a seller, the value to a buyer,
and the expected value of a tree that bears δ units of fruit per period. These satisfy the
analogs of equations (1)–(3). Definition 1 (partial equilibrium) and Definition 3 (competitive
equilibrium) change only to reflect this new notation.6 We omit these formalities in the
interest of space.
        We find that in equilibrium, the price of the lowest quality tree is

                                                δβh (πl + λπh )
                                          p=                      .                                       (12)
                                               λ − βh (πl + λπh )
    6
    One minor modification is the market clearing condition when λ = 1. In the economy with finitely many
types of trees, we used Θ(p1 ) ≥ 1 to ensure that buyers brought all their trees to the market even when
λ = 1. Here it is easier to allow buyers to consume a positive fraction of their fruit and impose Θ(P (δ)) = 1.




                                                      14
For p < p, Θ(p) = ∞ and Γ(p) is defined arbitrarily. For p > p,

                                                                        β    βh
                                                           Θ(p) = p/p        h −βl λ   ,                (13)

while a different type of tree δ = D(p) is offered at each price p ≥ p, where
                                                                                   
                                                      λ + (βh − λβl )(1 − Θ(p))πl
                                  D(p) = p                                        −1 .                  (14)
                                                             βh (πl + λπh )

These equations hold as long as D(p) ≤ δ̄. For higher prices, Θ(p) is pinned down by the
indifference curve of the seller of a type δ̄ tree and D(p) = δ̄. This determines a partial
equilibrium for fixed λ ∈ [1, βh /βl ].
   We also find that the competitive equilibrium is unique and always has λ < βh /βl . It
satisfies          Z       δ̄                 Z       δ̄
              πh                δdG(δ) ≥ πl                Θ(P (δ))P (δ)dG(δ) with equality if λ > 1,   (15)
                       δ                          δ

where P (δ) is the equilibrium price of a type δ tree, so D(P (δ)) ≡ δ. If this holds as an
inequality, the difference is the measure of fruit consumed by buyers. We can prove directly
from the functional form for Θ and P that an increase in λ reduces the right hand side of
this inequality, ensuring that the competitive equilibrium is unique. Indeed, as λ converges
to βh /βl , the right hand side converges to 0, ruling out the possibility of an equilibrium in
which λ takes on this limiting value. We summarize these results in a proposition:

Proposition 4 Equations (12)–(15) uniquely describe a competitive equilibrium when the
support of the tree distribution is (δ, δ̄). This is the unique limit of the economy with a finite
number of trees.

We believe that this is also the unique equilibrium of the limiting economy, but our approach
to establishing uniqueness—solving a sequence of problems (P )—does not easily extend to
an economy with uncountably many types of trees.


6       Persistent Shocks and Continuous Time
Our model explains how adverse selection can generate illiquid assets that only sell with a
certain probability each period. But suppose that the time between periods is negligible. Will
the illiquidity become negligible as well? We argue in this section that it will not. Instead,
equilibrium requires that a real amount of calendar time elapse before a high quality tree is
sold.

                                                                   15
   To show this, we consider the behavior of the economy when the number of periods per
unit of calendar time increases without bound. That is, we take the limit of the economy as
the discount factors converge to 1, holding fixed the ratio of discount rates (1 − βh )/(1 − βl )
and the present value of dividends δj /(1−βs ). But as we take this limit, we also want to avoid
changing the stochastic process of shocks. With i.i.d. shocks and very short time periods,
there is almost no difference in preferences between high and low types of individuals and
so the gains from trade become negligible. We therefore first introduce persistent shocks
into the model and then prove that as the period length shortens, the probability of sale per
period falls to zero, while the probability of sale per unit of calendar time converges to a
well-behaved number.


6.1     Persistent Shocks
Assume now that st ∈ {l, h} follows a first order stochastic Markov process and let πss′
denote the probability that the state next period is s′ given that the current state is s. A
partial equilibrium with a fixed value of λ ≥ 1 is still characterized by a pair of functions
{vs,j } ∈ R2J
           + that represent the value of an individual who starts a period in preference
state s holding a type j tree; a function Θ : R+ 7→ [0, ∞] representing the buyer-seller
ratio at an arbitrary price p; a function Γ : R+ 7→ ∆J representing the distribution of tree
types available at price p; and a nondecreasing function F : R+ 7→ [0, 1] with support P
representing the share of trees available at a price less than or equal to p. The definition
of partial equilibrium is analogous to definition 1 for the i.i.d. case, except for the obvious
change in the continuation value:

                                                                                              (1′ )
                                                                                       
            vl,j = δj + max min{Θ(p), 1}p + (1 − min{Θ(p), 1})βl (πll vl,j + πlh vh,j ) ,
                          p

                                                                                              (3′ )
                                                   
            vh,j = δj λ + βh (πhl vl,j + πhh vh,j ) ,

where
                                     PJ                                                   !
                                βh       γ
                                      j=1 j (p)(π  v
                                                 hl l,j + π  v
                                                           hh h,j )
  λ ≡ max min{Θ(p)−1 , 1}                                           + 1 − min{Θ(p)−1 , 1}) . (4′ )
        p                                       p

We omit the formal definition, which simply substitutes these expressions for their i.i.d.
analogs. The characterization of partial equilibrium and proof that it exists and is unique
is similarly unchanged. In equilibrium, type j trees sell for a price pj satisfying the buyers’
indifference condition
                                      βh (πhl vl,j + πhh vh,j )
                                 pj =                           ,
                                                  λ

                                                 16
while the condition for excluding type j − 1 trees from the market pins down the sale
probability θj when j ≥ 2
                                                                                              
       θj pj − βl (πll vl,j−1 + πlh vh,j−1) = min{θj−1 , 1} pj−1 − βl (πll vl,j−1 + πlh vh,j−1) .

These equations pin down the value functions, prices, and buyer-seller ratios given λ.
   In the model with idiosyncratic shocks, we found that the value of fruit to a high discount
factor individual, λ, always lies in the interval [1, βh /βl ]. With persistent shocks, the lower
bound, which ensures that high discount factor individuals are willing to buy trees, pj ≤
βh (πhl vl,j + πhh vh,j ), is unchanged. However, the upper bound, which ensures that low
discount factor individuals are willing to sell trees, pj ≥ βl (πll vl,j + πlh vh,j ), is given by the
larger root of
                              βh (λ − (λ − 1)πhl ) = βl λ(λ − (λ − 1)πll ).

We denote this upper bound by λ̄. It always exceeds 1 and λ̄ > βh /βl if and only if shocks
are persistent, πll > πhl .
   The definition of a competitive equilibrium with persistent shocks is also complicated
by endogeneity of the distribution of tree holdings. In the i.i.d. case, high discount factor
individuals start each period holding a fraction πh Kj type j trees, but this is not true with
persistent shocks. Instead, let µj denote the measure of type j trees held by high discount
factor individuals at the start of a period. In steady state, this satisfies

                              µj = πhh (µj + σj ) + πlh (Kj − µj − σj ) ,

where σj is the measure of type j trees purchased by high discount factor individuals each
period. High discount factor individuals hold µj + σj type j trees at the end of each period,
while the rest are held by low discount factor individuals. Multiplying by the appropriate
preference transition probabilities delivers the measure held by high discount factor indi-
viduals at the start of the following period. To solve for µj , we first need to compute the
measure of trees sold each period, σj . This is the product of the measure of trees for sale
times the average sale probability weighted by the fraction of trees that are of type j at an
arbitrary price p:
                                                       !Z
                                X
                       σj =           (Kj ′ − µj ′ )        min{Θ(p), 1}γj (p)dF (p).
                                 j′                     P




                                                        17
Alternatively, consistency of supplies with beliefs implies

                                     K − µj
                                                           Z
                                  P j                 =            γj (p)dF (p),
                                   j ′ (Kj ′ − µj ′ )          P


and so we can rewrite the measure sold as
                                      R
                                                P
                                                    min{Θ(p), 1}γj (p)dF (p)
                          σj = (Kj − µj )              R                     ,
                                                         γ (p)dF (p)
                                                        P j


the product of the measure of trees for sale and the average sale probability. Use this to
solve for µj :                               R
                                                min{Θ(p),1}γ (p)dF (p)
                           πlh + (πhh − πlh ) P R γj (p)dFj(p)
                   µj =                       R
                                                    P
                                                  min{Θ(p),1}γj (p)dF (p)
                                                                           Kj .      (16)
                        1 − (πhh − πlh ) 1 −    P    R
                                                       γj (p)dF (p) P


If πhh = πlh , this reduces to µj = πlh Kj = πhh Kj , but if shocks are persistent, πhh > πlh ,
then µj is increasing in the measure of type j trees that are sold each period.
   We are now in a position to define equilibrium:

Definition 4 A stationary competitive equilibrium with persistent shocks is a number λ ∈
[1, λ̄], a pair of vectors {vh,j } ∈ RJ+ and {vl,j } ∈ RJ+ , functions Θ : R+ 7→ [0, ∞] and
Γ : R+ 7→ ∆J , a nondecreasing function F : R+ 7→ [0, 1] with support P, and measures
µj ∈ [0, Kj ] satisfying the following conditions:

  1. ({vh,j }, {vl,j }, Θ, Γ, F ) is a partial equilibrium with persistent shocks for fixed λ;
                                     J             J
                                                                 !Z
                                    X            X
  2. the fruit market clears:           δj µj =       (Kj − µj )    Θ(p)pdF (p); and
                                  j=1               j=1                     P


  3. measures are consistent with trades: µj satisfies equation (16).

If there are a continuum of types trees, we can again obtain closed-form solutions. In
particular, arguments analogous to those in Proposition 4 imply

                                        λ(1 − βl (πll − πhl )) − (λ − 1)πhl
           Θ(p) =                               βh (λ(1−βl (πll −πhl ))−(λ−1)πhl )
                                                                                                          .   (13′ )
                    (λ − (λ − 1)πhl )(p/p)     βh (λ−(λ−1)πhl )−βl λ(λ−(λ−1)πll )
                                                                                     − βl λ(πll − πhl )

Similarly, the type of tree sold at price p satisfies
                                                                                
                                      λ + (βh πhl − λβl πll )(1 − Θ(p))
               D(p) = p                                                        −1 .                           (14′ )
                              βh (λ − (λ − 1)πhl + (1 − Θ(p))βl λ(πhl − πll ))



                                                      18
These expressions generalize equations (13) and (14) to the model with persistent shocks.
Finally, the share of trees that are of type δ or less and are held by high discount factor
individuals is                Z δ
                                    πlh + (πhh − πlh )Θ(P (δ ′))
                     Gh (δ) =                                   ′ )))
                                                                      dG(δ ′),        (16′ )
                                δ 1 − (π hh − πlh ) (1 − Θ(P (δ
where again P (δ) is the inverse of D(p).
   We do not prove existence and uniqueness of equilibrium in this environment. For
starters, extending the proof of Proposition 3 is cumbersome because the measures µj are
endogenous and depend on λ. But this can easily be handled using the closed-form solutions
when there are a continuum of types of trees. More importantly, such a proof would only
establish existence and uniqueness of a stationary competitive equilibrium, not that there is
a unique equilibrium for arbitrary initial conditions. The distinction is important because
µj is a payoff-relevant state variable in the model with persistent shocks. Given an initial
value of the vector {µj }, subsequent trades determine the evolution of this vector, which in
turn determines the evolution of the value of fruit to a buyer λ. We have not characterized
a partial equilibrium with time-varying λ, indeed we have not even introduced notation that
would allow us to do so. Therefore we cannot discuss the full set of potentially nonstation-
ary equilibria in this environment. Nevertheless, we believe that our analysis of stationary
equilibria is an important first step.


6.2    Continuous Time Limit
We are now in a position to consider the continuous time limit of this model. For a fixed
period length ∆ > 0, define discount rates ρs and transition rates qhl and qlh as

                                  1 − βs         πhl             πlh
                           ρs =          , qhl =     , and qlh =     .
                                    ∆            ∆               ∆

Also assume a type δ tree produces δ∆ fruit per period. We interpret 1/∆ as the number
of periods within a unit of calendar time. With fixed values of ρs , qhl , and qlh , the limit
as ∆ → 0 (and so βs → 1 and πhl and πlh → 0) then corresponds to the continuous time
limit of the model. We find that in this limit, Θ(p) → 0 but the sale rate per unit of time
converges to a number:

                                    Θ(p)              ρl + qlh + qhl /λ
                      α(p) ≡ lim         =           ρ −ρ ρ−(λ−1)(q
                                                            l +qlh +qhl /λ
                              ∆→0    ∆
                                              p/p     l   h         lh  +q /λ)
                                                                         hl      −1




                                               19
for all p ≥ p, while the type of tree sold at price p converges to
                                                                        
                                           qhl ((λ − 1)α(p) + λρl − ρh )
                             D(p) = p ρh +                                 .
                                             qhl + λ(qlh + ρl + α(p))

In particular, the worst type of tree has dividend per unit of calendar time δ = D(p) and no
resale risk, α(p) = ∞. This pins down the lowest price,

                                                           δλ
                                            p=                       .
                                                    (λ − 1)qhl + λρh

From the perspective of a seller, α(p) is the arrival rate of a Poisson process that permits
her to sell at a price p. Equivalently, the probability that she fails to sell at a price p > p
during a unit of elapsed time is exp(−α(p)), an increasing function of p that converges to 1
as p converges to infinity and is well-behaved in the limiting economy. One can also find the
arrival rate of trading opportunities to a buyer; this is infinite if p > p and zero if p < p.
    To close the model, we can compute the measure of type δ trees held by high discount
factor individuals, the limit of equation (16′ ). This gives

                                                δ
                                                       qlh + α(P (δ ′))
                                            Z
                                 Gh (δ) =                                  dG(δ ′ ).
                                            δ       qhl + qlh + α(P (δ ′))

Substituting this into the fruit market clearing condition gives

                     δ̄                                            δ̄
                           δ(qlh + α(P (δ)))                              α(P (δ))P (δ)qhl
                Z                                              Z
                                               dG(δ) ≥                                       dG(δ),
                 δ        qhl + qlh + α(P (δ))                 δ        qhl + qlh + α(P (δ))

with equality if λ > 1. The left hand side is the integral of the dividend per unit of time δ
times the density dGh (δ), i.e. the amount of fruit held by high discount factor individuals at
the start of a period. The integrand on the right hand side is the product of the probability
per unit of time of selling a type δ tree, α(P (δ)), times the price of the tree, P (δ), times the
density of such trees held by low discount factor individuals, dG(δ) − dGh (δ). Integrating
over the support of the dividend distribution gives the amount of fruit required to purchase
the trees that are sold at each instant.
   In equilibrium, there is a continuum of marketplaces, each distinguished by its price p.
Sellers try to sell their trees in the appropriate market, while buyers bring their fruit to
markets and possibly consume some of it. In all but the worst market, with price p, there is
always too little fruit to purchase all of the trees. That is, a stock of trees always remains
in the market to be purchased by the gradual inflow of new fruit from buyers. Buyers are


                                                          20
able to purchase trees immediately, but sellers are rationed and get rid of their trees only at
a Poisson rate. Of course, a seller could immediately sell her trees for the low price p, but
she chooses not to do so.
   More generally, the illiquidity generated by adverse selection do not disappear when the
period length is short. Intuitively, it must take a real amount of calendar time to sell a
tree at a high price or the owners of low quality trees would misrepresent them as being of
high quality. This is in contrast to models where trading is slow because of search frictions.7
In such a framework, the extent of search frictions governs the speed of trading and as the
number of trading opportunities per unit of calendar time increases, the relevant frictions
naturally disappear.


7       Discussion
This section explores how our model can be used to understand a financial crisis characterized
by a collapse in the liquidity and price of some assets and a flight to other high quality, liquid
assets. We also ask how outside intervention may increase liquidity and prices of the first
type of asset and restore normal prices for the second type. We focus on a discrete time
model with i.i.d. preference shocks, obviating the need to discuss transitional dynamics.


7.1     Fire Sales
Consider an initial situation where everyone believes that all trees produce δ0 fruit per unit of
time. At time 0, everyone learns that there is dispersion in the quality of trees. For example,
this may correspond to the development of a technology that tells sellers which of their
trees produce more fruit. In this case, average fruit production is still δ0 but there is now
private information. Alternatively, the outbreak of a disease may reduce the productivity of
some trees while leaving others unaffected, reducing average fruit production and creating
private information. We are interested in understanding how the equilibrium responds to
this one-time unanticipated shock.
    We first consider a partial equilibrium exercise where the value of λ is held fixed. Natu-
rally the price of trees with δj < δ0 falls, since these trees are known to be of lower quality
than before. Moreover, the market for all types of trees j > 1 becomes less liquid, pushing
down their resale value. If average tree quality does not increase by too much, the price of
an average tree must fall, reflecting the illiquidity in the tree market.
    7
    See, for example, Duffie, Gârleanu and Pedersen (2005), Weill (2008), and Lagos and Rocheteau (2009)
for models where assets are illiquid because of search frictions.



                                                   21
    The emergence of adverse selection also has a general equilibrium effect through the value
of fruit to buyers, λ. If λ did not change, lower prices and lower liquidity would reduce the
amount of fruit needed to purchase trees, given by the right hand side of equation (11). This
is inconsistent with equilibrium if initially λ > 1, and so λ must fall. The logic behind the
proof of uniqueness in Proposition 3 implies that this increases the product Θ(pj )pj for all
j, restoring equilibrium in the fruit market.
    Whether the equilibrium with adverse selection is Pareto inferior to the initial equilibrium
depends on parameter values. At one extreme, suppose that δ1 = 0. In this case, the price
of the worst tree is zero, p1 = 0, and there is no market in any better tree, Θ(p) = 0 for all
p > 0. Absent any trade, individuals effectively live in autarky in the economy with adverse
selection; in particular, buyers consume all their fruit so λ = 1. Since autarky was feasible
but not optimal in the initial economy, an individual can only be better off under autarky
if the quality of his trees increases sufficiently. We can rule this possibility out by assuming
that δJ is not too much larger than δ0 . More generally, continuity of equilibrium prices and
liquidity in the distribution of dividends ensures that adverse selection is welfare reducing if
the lower bound of the tree distribution is sufficiently close to zero and the upper bound is
not too much larger than δ0 .
   On the other hand, suppose buyers use all their fruit to purchase trees (λ > 1) both before
and after the shock, sellers sell all their trees before the shock (λ < βh /βl ), and average fruit
production is unchanged at δ0 . Then on average tree prices are higher and sellers are better
off with adverse selection. To see this, note that as long as λ > 1, buyers use all their
fruit to buy trees. On the other hand, the emergence of adverse selection creates an illiquid
market in trees, so sellers no longer sell all their trees. It follows that sellers’ consumption
is unchanged in period 0—they consume all the fruit in the economy both before and after
the shock—yet they are left with a valuable tree in the economy with adverse selection. The
claim follows immediately.
    Perhaps more surprisingly, it is easy to construct examples in which adverse selection
increases all prices and makes all sellers better off. Let πh = 0.9, βh = 0.91, and βl = 0.8.
If all trees produce δ0 = 1 unit of fruit, the price of trees is p0 = 9, the value of a tree
to a seller is vl,0 = 10, and the value of a tree to a buyer is vh,0 = 11.23. If instead ten
percent of the trees produce δ1 = 0.99 and the rest produce δ2 = 901/900 ≈ 1.0011, the
price of bad trees increases to p1 = 9.55, the price of good trees increases to 9.60, the value
of tree sellers increases to vl,1 = 10.54 and vl,2 = 10.55, while the value of tree buyers falls
to vh,1 = 11.02 and vh,2 = 11.09. This occurs because only a fraction θ2 = 0.93 of the type
2 trees sell, driving down the value of fruit from λ = 1.12 to 1.05 in the new economy with
adverse selection. On the other hand, if βh = 0.89, an adverse selection shock reduces all


                                                22
prices, buyers’ values, and sellers’ values. This happens because λ = 1 both before and after
the shock, shutting down the general equilibrium channels.


7.2     Flight to Quality
The emergence of adverse selection can generate a flight to quality. To explain what we mean
by a flight to quality, we extend our model by introducing a safe asset. We suppose that
in addition to the trees that we have already modeled—apple trees, to be concrete—there
is another type of tree that is not subject to adverse selection, banana trees. Banana trees
produce a known amount of fruit, apples and bananas are perfect substitutes in consumption,
and either fruit can be used to purchase either type of tree. In particular, buyers value
apples and bananas at a common level λ. It is straightforward to extend our definition of a
competitive equilibrium to this environment.
   Absent adverse selection in the apple tree market, buyers use all their fruit to purchase all
the trees and both trees have the same price-dividend ratio. In particular, if in equilibrium
λ > 1, buyers hold just enough fruit to purchase all the sellers’ trees. The emergence
of adverse selection in the apple tree market reduces the amount of fruit buyers need to
purchase the apple trees at a given value of λ. Rather than consume that fruit, we have
argued that the equilibrium value of fruit λ must fall to restore equilibrium. The excess fruit
goes towards purchasing banana trees, driving up their price according to equation (12).
This is a flight to quality.
   Pushing this example further, suppose that initially some people own only apple trees
and others own only banana trees, consistent with our definition of equilibrium.8 Now the
emergence of an adverse selection problem in the apple tree market means that the “natural
buyers” of apple trees—those who already own apple trees—hold more apples than they need
to purchase the trees that are sold each period. They therefore use some of their apples to
purchase banana trees, driving up the price of those trees. The owners of apple trees may
note that there are still enough apples to purchase all the trees available for sale at the old
price-dividend ratio, but buyers still move towards the safe, liquid banana tree market.
    More generally, the existence of a safe asset moderates the general equilibrium effects
that we highlighted in the previous subsection. The smaller is the value of the apple tree
market relative to the banana tree market, the more likely is it that all apple tree owners
are made worse off by the emergence of adverse selection in the apple tree market. On the
other hand, by driving up the value of banana trees, the same shock increases the welfare of
individuals who are selling those safe assets.
   8
     A small amount of heterogeneity in the taste for apples versus bananas would make this the unique
equilibrium.


                                                 23
7.3    Asset Purchase Program
We believe our model may be useful for understanding the potential impact of an asset pur-
chase program, such as the original vision of the Troubled Asset Relief Program in 2008 or
the Public-Private Investment Program for Legacy Assets in 2009. Both of these programs
were designed to alleviate the adverse selection problem in the market for troubled assets,
thereby improving also the solvency of financial institutions exposed to these assets. Ac-
cording to the U.S. government, this would occur not only because of the direct subsidy but
also through the equilibrium effects on the price and liquidity of assets that were not sold
to the government. We show that this is consistent with the predictions of our model.
    To be concrete, we consider an economy with two types of trees, j = 1, 2, selling at prices
p1 < p2 with buyer-seller ratios θ1 > θ2 . We analyze an unexpected permanent market
intervention consisting of a subsidy σ(p) to anyone selling a tree for price p, financed by a
tax of τ ≤ δ1 units of fruit per tree held by a seller at the beginning of the period. If there
were only one type of tree, this policy would not distort the equilibrium allocation, but with
two types of trees it distorts the equilibrium by changing the value of different types of trees.
    The definition of equilibrium is unchanged except for the introduction of taxes and sub-
sidies in the sellers’ Bellman equation (1). In particular, sellers still set optimal prices for
their trees given the sale probability Θ(p), internalizing the fact that they get a subsidy σ(p)
if they sell a tree for p and that in any case they pay the tax τ per tree. Let p′j and θj′ denote
equilibrium prices and buyer-seller ratios for type j trees after the intervention. We assume
the subsidy schedule is σ(p) = σ̄ > 0 for p ≤ p̄ and σ(p) = 0 otherwise. Moreover, we focus
on cases where p′1 < p̄ < p′2 , so that the sale of bad trees is subsidized but not constrained
by the price cap p̄ and the sale of good trees is not subsidized.
   To start, assume that buyers consume some fruit both before and after the policy inter-
vention, λ = λ′ = 1.9 The subsidy for bad trees naturally raises their price, p′1 > p1 , and
                                         ′
their value to both buyers and sellers, vs,1 > vs,1 , s = l, h. This makes it easier to exclude bad
trees from the good tree market, and so one can prove that both the resale probability for
good trees and the total amount of fruit paid for good trees increase, θ2′ > θ2 and θ2′ p′2 > θ2 p2 .
As a result, the intervention unambiguously increases liquidity in the sense that both the
amount of fruit transferred from buyers to sellers and the amount of trees transferred from
sellers to buyers increase. In addition, it is easy to construct examples in which this simple
                                     ′
intervention is Pareto improving, vs,j > vs,j , including the last example in Section 7.1. It is
also possible to construct examples in which the taxes drive down the price of good trees
and hence the values of those trees, p′2 < p2 and vs,2
                                                   ′
                                                       < vs,2 ; change the example to assume
  9
    In the absence of asymmetric information, this would be the case when βh < πh . With asymmetric
information, this is the case when βh is sufficiently small relative to πh .


                                                 24
that 90 percent of trees produce δ1 = 0.99 and the rest produce δ2 = 1.09 fruit.
   On the other hand, suppose λ > 1, so in the pre-intervention equilibrium buyers use all
their fruit to buy trees. If after the intervention λ′ < βh /βl , so sellers would prefer to sell
all their trees, then liquidity cannot unambiguously increase: either p1 ≥ p′1 or θ2 p2 ≥ θ2′ p′2
or both. This follows immediately from the fruit market clearing condition (11) and the
restriction that θ1 ≤ 1 since λ > 1 and θ1′ ≥ 1 since λ′ < βh /βl . Moreover, a large subsidy
that completely eliminates the illiquidity of good trees, so θ2′ = 1, cannot be a Pareto
improvement. Prior to the intervention, buyers use all their fruit to purchase some of the
sellers trees while after the intervention they purchase all of the sellers’ trees. It follows that
the intervention can only reduce sellers’ current consumption and it eliminates their future
wealth. At least one type of seller must be worse off.
   This logic hinges on the structure of our general equilibrium economy but we believe it is
a general feature of an exchange economy. The logic is robust to allowing for more general
policy interventions. It is also robust to allowing for a safe asset, banana trees. The subsidy
that completely eliminates illiquidity in the apple tree market may then make apple tree
sellers better off by raising the amount of fruit that they consume. However, if λ > 1 and
λ′ < βh /βl , this necessarily comes at the expense of the owners of banana trees, who get less
fruit for their trees.


8     Conclusion
We have developed a dynamic model of asset trading in the presence of adverse selection.
There always exists a unique separating equilibrium in which better assets sell for a higher
price but in a less liquid market. The emergence of adverse selection causes a liquidity crisis
in the sense that the volume of asset sales declines. It may also cause a decline in prices
beyond the underlying decline in average dividends—i.e., a fire sale—and a flight to safe
assets.
   The equilibrium outcome is sensitive to the support of the distribution and especially
to the lower bound of the support. For example, even a small measure of assets that do
not generate a dividend is enough to shut down all trade. This recalls the behavior of
markets in the presence of Knightian uncertainty, in which traders behave as if they anticipate
purchasing the worst possible asset (Caballero and Krishnamurthy, 2008; Routledge and Zin,
2009; Easley and OHara, 2010). The emergence of Knightian uncertainty can similarly cause
a collapse in asset prices and trading volumes, although the source of this fragility is very
different in our environment.
    Sensitivity to the support of the distribution distinguishes our model from an environment

                                                25
in which all trade must occur at a single price (e.g. Eisfeldt, 2004; Kurlat, 2009; Daley
and Green, 2010; Chari, Shourideh and Zetlin-Jones, 2010; Chiu and Koeppl, 2011; Tirole,
forthcoming). In this case, a moderate mean-preserving spread in dividends will not affect
either prices or trading volumes. Although a quantitative evaluation of the role of adverse
selection is beyond the scope of this paper, this suggests to us that our model may be useful
for understanding why even a small amount of asymmetric information may have a big
impact on equilibrium outcomes.10
    Finally, we have assumed throughout our analysis that individuals’ discount factors are
observable. It seems natural to ask what would happen if both asset quality and trading
motives were private information. In this case, patient individuals might have incentive to sell
their low quality assets at a high price. We can prove that if λp1 ≥ pJ in our equilibrium, then
the equilibrium allocation is unaffected by this additional source of private information.11
Intuitively, an unobservable discount factor gives a patient individual an opportunity to buy
a bad tree for p1 and attempt to resell it for pJ > p1 . The reason that this trade might
not be profitable is that the individual must use beginning-of-period fruit, which is worth
λ to him, to purchase the tree and he only gets back fruit at the end of the period, which
must be consumed and so is worth 1. If λp1 < pJ in our equilibrium, then unobservable
discount factors must change the equilibrium allocation. We are currently exploring the
possibility that there exists a semi-pooling equilibrium in which individuals with different
discount factors sell different types of trees at a common price.12




  10
      In practice, the extent of asymmetric information may be small. For example, Downing, Jaffee and
Wallace (2009) argue that mortgages that originators do not resell earn a 4 to 6 basis point premium over
mortgages that are bundled and resold.
   11
      It is straightforward to extend our definition of equilibrium to this environment. The only change in
equilibrium involves beliefs about buyer-seller ratios at very high prices: for p > λp1 , Θ(p) = 0 and Γ(p)
is arbitrary. This implies that there is no price at which a patient individual can and would sell any of his
trees.
   12
      The existence of a semi-pooling equilibrium is related to Chang (2011), which develops a related model
with two sources of private information. Sellers know both the quality of the asset they are selling and their
cost of holding the asset. However, she assumes that sellers’ holding costs always exceed buyers’ so there
are gains from trade, that an individual’s identity as a buyer or seller is known, and that buyers have excess
fruit (λ = 1). We are interested in the case where there may be no gains from trade since an individual’s
preferences are unknown, yet scarcity of fruit (λ > 1) can sustain some trade.

                                                     26
References
Akerlof, George A., “The Market for “Lemons”: Quality Uncertainty and the Market
 Mechanism,” Quarterly Journal of Economics, 1970, 84 (3), 488–500.

Arora, Sanjeev, Boaz Barak, Markus Brunnermeier, and Rong Ge, “Computational
  Complexity and Information Asymmetry in Financial Products,” Communications of the
  ACM, 2011, 54 (5), 101–107.

Caballero, Ricardo J. and Arvind Krishnamurthy, “Collective Risk Management in
 a Flight to Quality Episode,” Journal of Finance, 2008, 63 (5), 2195–2230.

Camargo, Braz and Benjamin Lester, “Trading Dynamics in Decentralized Markets
  with Adverse Selection,” 2011. São Paulo School of Economics Mimeo.

Chang, Briana, “Adverse Selection and Liquidity Distortion in Decentralized Markets,”
  2011. Northwestern Mimeo.

Chari, V.V., Ali Shourideh, and Ariel Zetlin-Jones, “Adverse Selection, Reputation
  and Sudden Collapses in Secondary Loan Markets,” 2010. University of Minnesota Mimeo.

Chiu, Jonathan and Thorsten V. Koeppl, “Market Freeze and Recovery: Trading
 Dynamics under Optimal Intervention by a Market-Maker-of-Last-Resort,” 2011. Bank of
  Canada Mimeo.

Daley, Brendan and Brett Green, “Waiting for News in the Dynamic Market for
  Lemons,” 2010. Duke Mimeo.

Dang, Tri Vi, Gary Gorton, and Bengt Holmström, “Ignorance and the Optimality
 of Debt for the Provision of Liquidity,” 2009. Yale Mimeo.

DeMarzo, Peter and Darrell Duffie, “A Liquidity-Based Model of Security Design,”
 Econometrica, 1999, 67 (1), 65–99.

Downing, Chris, Dwight Jaffee, and Nancy Wallace, “Is the Market for Mortgage-
 Backed Securities a Market for Lemons?,” Review of Financial Studies, 2009, 22 (7),
 2457–2494.

Duffie, Darrell, Nicolae Gârleanu, and Lasse H. Pedersen, “Over-the-Counter Mar-
 kets,” Econometrica, 2005, 73 (6), 1815–1847.




                                          27
Easley, David and Maureen OHara, “Liquidity and Valuation in an Uncertain World,”
 Journal of Financial Economics, 2010, 97 (1), 1–11.

Eisfeldt, Andrea L., “Endogenous Liquidity in Asset Markets,” Journal of Finance, 2004,
  59 (1), 1–30.

Finkelstein, Amy and James M. Poterba, “Adverse Selection and the Choice of Risk
  Factors in Insurance Pricing: Evidence from the UK Annuity Market,” Journal of Political
  Economy, 2004, 112 (1), 183–208.

Gorton, Gary, “The Panic of 2007,” Federal Reserve Bank of Kansas City Economic
  Symposium Conference Proceedings, 2008, pp. 131–262.

Guerrieri, Veronica, Robert Shimer, and Randall Wright, “Adverse Selection in
  Competitive Search Equilibrium,” Econometrica, 2010, 78 (6), 1823–1862.

Inderst, Roman, “Matching Markets with Adverse Selection,” Journal of Economic The-
  ory, 2005, 121 (2), 145–166.

Kurlat, Pablo, “Lemons, Market Shutdowns and Learning,” 2009. MIT Mimeo.

Lagos, Ricardo and Guillaume Rocheteau, “Liquidity in Asset Markets with Search
  Frictions,” Econometrica, 2009, 77 (2), 403–426.

Milgrom, Paul and Nancy Stokey, “Information, Trade and Common Knowledge,”
 Journal of Economic Theory, 1982, 26 (1), 17–27.

Routledge, Bryan R. and Stanley E. Zin, “Model Uncertainty and Liquidity,” Review
 of Economic Dynamics, 2009, 12 (4), 543–566.

Tirole, Jean, “Overcoming Adverse Selection: How Public Intervention Can Restore Mar-
  ket Functioning,” American Economic Review, forthcoming.

Weill, Pierre Olivier, “Liquidity Premia in Dynamic Bargaining Markets,” Journal of
 Economic Theory, 2008, 140 (1), 66–96.

Werning, Ivan, “Principle of Optimality,” 2009. MIT Mimeo.




                                            28
                                        Appendix
Omitted Proofs
Proof of Lemma 1.              Consider problem (P1 ). Given that there is no j ′ < 1, the only
constraint is (5). If such a constraint were slack, we could increase p and hence raise the
value of the objective function, which ensures the constraint binds. Eliminating the price by
substituting the binding constraint into the objective function gives

                                             βh min{θ−1 , 1}
                                                                                  
          vl,1   = δ1 + max min{θ, 1}                           + (1 − min{θ, 1})βl v̄1 .
                        θ                  λ − 1 + min{θ−1 , 1}

If λ = 1, any θ1 ≥ 1 attains the maximum. If λ = βh /βl , any θ1 ∈ [0, 1] attains the maximum.
For intermediate values of λ, the unique maximizer is θ1 = 1. Substituting back into the
original problem gives vl,1 = δ1 + p1 and p1 = βh v̄1 /λ, establishing the result for j = 1.
   For j ≥ 2 we proceed by induction. Assume for all j ′ ∈ {2, . . . , j −1}, we have established
the characterization of pj ′ , θj ′ , vl,j ′ and v̄j ′ in the statement of the lemma. We first prove
that v̄j > v̄j−1 . To do this, consider the policy (θj−1 , pj−1). If this solved problem (Pj ),
combining the objective function and the definition of v̄j gives

                              δj (πh λ + πl ) + πl min{θj−1 , 1}pj−1
                       v̄j =
                              1 − πh βh − πl βl (1 − min{θj−1 , 1})
                              δj−1 (πh λ + πl ) + πl min{θj−1 , 1}pj−1
                            >                                          = v̄j−1 .
                               1 − πh βh − πl βl (1 − min{θj−1 , 1})

The inequality uses the fact that the denominator is positive together with δj > δj−1; and the
last equality comes from the objective function and the definition of v̄j−1 in problem (Pj−1 ).
Since the proposed policy satisfies all of the constraints in problem (Pj−1 ) and v̄j > v̄j−1 , it
also satisfies all the constraints in problem (Pj ). The optimal policy must deliver a weakly
higher value, proving v̄j > v̄j−1 .
   Next we prove that at any solution to problem (Pj ) the constraint (5) is binding. If there
were an optimal policy (θ, p) such that it was slack, consider a small increase in p to p′ > p
and a reduction in θ to θ′ < θ so that min{θ, 1}(p − βl v̄j−1) = min{θ′ , 1}(p′ − βl v̄j−1 ) while
constraint (5) is still satisfied. Now suppose for some j ′ 6= j − 1, min{θ, 1}(p − βl v̄j ′ ) <
min{θ′ , 1}(p′ − βl v̄j ′ ). Subtracting the inequality from the preceding equation gives

                                min{θ, 1} − min{θ′ , 1} (v̄j ′ − v̄j−1 ) > 0.
                                                       




                                                    29
Given that θ′ < θ, the above inequality yields v̄j ′ > v̄j−1 and hence j ′ ≥ j. This implies that
the change in policy does not tighten the constraints (6) for j ′ < j, while it raises the value
of the objective function in problem (Pj ), a contradiction. Therefore constraint (5) must
bind at the optimum.
   We now show that the binding constraint (5) implies that θj ≤ 1 for all j ≥ 2. By
contradiction, assume that the solution to problem (Pj ) is some (θ, p) with θ > 1. In this
case, the objective function reduces to vl,j = δj + p, while the constraint (6) for j ′ = 1
imposes vl,1 ≥ δ1 + p. Since we have shown that vl,1 = δ1 + p1 , this implies p ≤ p1 . Moreover,
v̄j > v̄1 implies βh v̄j /λ > βh v̄1 /λ = p1 and hence βh v̄j /p > λ. Now a change to the policy
(1, p) relaxes the constraint (5) without affecting any other piece of the problem (Pj ) and is
therefore weakly optimal. But this cannot be optimal because (5) is slack, a contradiction.
This proves that θj ≤ 1 for all j ≥ 2 and hence, using the binding constraint (5), pj = βh v̄j /λ.
   Next, we prove that if λ < βh /βl , the constraint (6) is binding at j ′ = j −1. We break our
proof into two parts. First, consider j = 2 and, to find a contradiction, assume that there is
a solution (θ, p) to problem (P2 ) such that constraint (6) is slack for j ′ = 1. Then problem
(P2 ) is equivalent to problem (P1 ) except for the value of the dividend δ2 > δ1 . Following
the same argument used for problem (P1 ), we can show that θ2 ≥ 1 and so constraint (6)
reduces to vl,1 ≥ δ1 +p2 . But since p1 = βh v̄1 /λ < p2 = βh v̄2 /λ, this contradicts vl,1 = δ1 +p1 .
Constraint (6) must bind when j = 2.
   Next consider j > 2 and again assume by contradiction that there is a solution (θ, p) to
problem (Pj ) such that constraint (6) is slack for j ′ = j − 1. Then problem (Pj ) is equivalent
to problem (Pj−1) except in the value of the dividend δ. Since constraint (6) is binding in
the solution to problem (Pj−1) and θj−1 ≤ 1, we have

            vl,j−2 = δj−2 + θj−1 pj−1 + (1 − θj−1 )βl v̄j−2 = δj−2 + θp + (1 − θ)βl v̄j−2,

and hence
                               θj−1 (pj−1 − βl v̄j−2 ) = θ(p − βl v̄j−2 ).                       (17)

Since p = βh v̄j /λ and pj−1 = βh v̄j−1 /λ, p − βl v̄j−2 > pj−1 − βl v̄j−2 > 0 and so θj−1 > θ > 0.
But now combine equation (17) with θj−1 > θ and v̄j−1 > v̄j−2 to get

                               θj−1 (pj−1 − βl v̄j−1 ) < θ(p − βl v̄j−1 ).

This implies that constraint (6) for j ′ = j − 1 is violated, a contradiction. This proves
that constraint (6) must bind whenever λ < βj /βl and establishes all the equations in the
statement of the lemma.


                                                   30
   Alternatively, suppose λ = βh /βl . Since pj = βh v̄j /λ = βl v̄j , the objective function in
problem (Pj ) reduces to vl,j = δj + βl v̄j , while constraint (6) imposes
                                                                                        
                             vl,j ′ = δj ′ + βl v̄j ′ ≥ δj ′ + βl θv̄j + (1 − θ)v̄j ′

for all j ′ < j. Since v̄j > v̄j ′ , this implies θ = 0 in the solution to the problem. It is easy to
verify that this is implied by the equations in the statement of the lemma.
   Finally, we need to prove that there is a unique value of v̄j > v̄j−1 that solves the four
equations in the statement of the lemma. Combining them we obtain
                                                                                  2
                                                                        βh − βl λ v̄j−1 v̄j
            (1 − πh βh − πl βl )v̄j = δj (πl + λπh ) + πl min{θj−1 , 1}                    .      (18)
                                                                        βh v̄j − βl λv̄j−1 λ

If λ = βh /βl , the last term is zero and so this pins down v̄j uniquely. Otherwise we prove
that there is a unique solution to equation (18) with v̄j > v̄j−1 . In particular, the left hand
side is a linearly increasing function of v̄j , while the right hand side is an increasing, concave
function, and so there are at most two solutions to the equation. As v̄j → ∞, the left hand
side exceeds the right hand side, and so we simply need to prove that as v̄j → v̄j−1 , the right
hand side exceeds the left hand side.
   First assume j = 2 so θj−1 = θ1 ≥ 1. Then we seek to prove that
                                                                             
                                                                    βh − βl λ v̄1
                      (1 − πh βh − πl βl )v̄1 < δ2 (πl + λπh ) + πl               .
                                                                        λ

Since v̄1 = (δ1 λ(πl + λπh ))/(λ − βh (πl + λπh )) and δ1 < δ2 , we can confirm this directly. Next
take j ≥ 3. In this case, in the limit with v̄j → v̄j−1 , the right hand side of (18) converges to
                                                                                          2
                           βh − βl λ v̄j−1                                       βh − βl λ v̄j−2v̄j−1
δj (πl + λπh ) + πl θj−1                   > δj−1 (πl + λπh ) + πl min{θj−2 , 1}                      ,
                                λ                                                βh v̄j−1 − βl λv̄j−2 λ

where the inequality uses the indifference condition

                           min{θj−2 , 1}(pj−2 − βl v̄j−2 ) = θj−1 (pj−1 − βl v̄j−2)

and the assumption δj−1 < δj . The right hand side of the inequality is the same as the right
hand side of equation (18) for type j − 1. The desired inequality then follows by comparing
the left hand side of the inequality to the left hand side of equation (18) for type j − 1. This




                                                        31
completes the proof.


Proof of Proposition 2.
   We first prove that the solution to problem (P ) describes a partial equilibrium and then
prove that there is no other equilibrium.

Existence. As described in the statement of the proposition, we look for a partial equilib-
                                                                 P
rium where P = {pj }, Θ(pj ) = θj , γj (pj ) = 1, dF (pj ) = Kj / j ′ Kj ′ , and vs,j solves problem
(Pj ). Also for notational convenience define pJ+1 = ∞. To complete the characterization,
we define Θ and Γ on their full support R+ . For p < p1 , Θ(p) = ∞ and Γ(p) can be chosen
arbitrarily, for example γ1 (p) = 1. For j ∈ {1, . . . , J} and p ∈ (pj , pj+1), γj (p) = 1 and Θ(p)
                                                                                               
satisfies sellers’ indifference condition vl,j = δj + min{Θ(p), 1}p + 1 − min{Θ(p), 1} βl v̄j ;
equivalently, min{Θ(pj ), 1}(pj − βl v̄j ) = min{Θ(p), 1}(p − βl v̄j ). To prove that this is a
partial equilibrium, we need to verify that the five equilibrium conditions hold.
   To show that the third and fourth equilibrium conditions—Buyers’ Optimality and Active
Markets—are satisfied, it is enough to prove that the prices {pj } solve the optimization
problem in equation (4). Lemma 1 implies that pj = βh v̄j /λ for all λ and j; and Θ(pj ) ≤ 1
if λ > 1. Together these conditions imply that any price pj achieves the maximum in this
optimization problem. For any price p ∈ (pj , pj−1), γj (p) = 1 by construction, and so the
right hand side of equation (4) is smaller than when evaluate at pj . Moreover, for any p < p1 ,
Θ(p) = ∞ and so the right hand side is 1 ≤ λ.
   Next we prove that min{Θ(pj ), 1}(pj −βl v̄j ) ≥ min{Θ(p), 1}(p−βl v̄j ) for all j and p, with
equality if p ∈ [pj , pj+1). The first and second equilibrium conditions—Sellers’s Optimality
and Equilibrium Beliefs— follow immediately from this. The equality holds by construction.
Let us now focus on the inequalities.
   First take any j ′ ∈ {2, . . . , J}, j < j ′ , and p ∈ [pj ′ , pj ′+1 ). By the construction of Θ,

                      min{Θ(pj ′ ), 1}(pj ′ − βl v̄j ′ ) = min{Θ(p), 1}(p − βl v̄j ′ ).

Then pj ′ ≤ p implies that min{Θ(pj ′ ), 1} ≥ min{Θ(p), 1}. Since j < j ′ , Lemma 1 implies that
v̄j ′ > v̄j and so min{Θ(pj ′ ), 1}(v̄j ′ − v̄j ) ≥ min{Θ(p), 1}(v̄j ′ − v̄j ). Adding this to the previous
equation gives min{Θ(pj ′ ), 1}(pj ′ − βl v̄j ) ≥ min{Θ(p), 1}(p − βl v̄j ). Also condition (6) in
problem (Pj ′ ) implies min{Θ(pj ), 1}(pj − βl v̄j ) ≥ min{Θ(pj ′ ), 1}(pj ′ − βl v̄j ). Combining
the last two inequalities gives min{Θ(pj ), 1}(pj − βl v̄j ) ≥ min{Θ(p), 1}(p − βl v̄j ) for all
p ∈ [pj ′ , pj ′+1 ) and j < j ′ .
    Similarly, take any j ′ ∈ {1, . . . , J − 1}, j > j ′ , and p ∈ [pj ′ , pj ′+1 ). The construction of Θ


                                                     32
implies min{Θ(pj ′ ), 1}(pj ′ − βl v̄j ′ ) = min{Θ(p), 1}(p − βl v̄j ′ ), while Lemma 1 together with
Θ(pj ) = θj implies min{Θ(pj ′ ), 1}(pj ′ − βl v̄j ′ ) = min{Θ(pj ′+1 ), 1}(pj ′+1 − βl v̄j ′ ). The two
equalities together imply

                      min{Θ(pj ′+1 ), 1}(pj ′+1 − βl v̄j ′ ) = min{Θ(p), 1}(p − βl v̄j ′ )

Then pj ′ +1 > p implies min{Θ(pj ′+1 ), 1} ≤ min{Θ(p), 1}. Since j > j ′ , Lemma 1 im-
plies that v̄j > v̄j ′ and so min{Θ(pj ′+1 ), 1}(v̄j ′ − v̄j ) ≥ min{Θ(p), 1}(v̄j ′ − v̄j ). Adding
this to the previous equation gives min{Θ(pj ′ +1 ), 1}(pj ′+1 − βl v̄j ) ≥ min{Θ(p), 1}(p − βl v̄j ).
Also, since (Θ(pj ′+1 ), pj ′+1 ) is a feasible policy in problem (Pj ), min{Θ(pj ), 1} (pj − βl v̄j ) ≥
min{Θ(pj ′+1 ), 1}(pj ′+1 − βl v̄j ). Combining inequalities gives min{Θ(pj ), 1}(pj − βl v̄j ) ≥
min{Θ(p), 1}(p − βl v̄j ) for all p ∈ [pj ′ , pj ′ +1 ) and j > j ′ .
   Finally, consider p < p1 . Since Θ(p) = ∞, min{Θ(p), 1}(p−βlv̄j ) = p−βl v̄j < p1 −βl v̄j ≤
min{Θ(p1 ), 1}(p1 − βl v̄j ), where the first inequality uses p < p1 and the second uses the fact
that Θ(p1 ) < 1 only if λ = βh /βl ; but in this case, p1 = βl v̄1 ≤ βl v̄j . Since we have
already proved that min{Θ(p1 ), 1}(p1 − βl v̄j ) ≤ min{Θ(pj ), 1}(pj − βl v̄j ), this establishes the
inequality for p < p1 .
   The last piece of the definition of equilibrium is Consistency of Supplies with Beliefs. This
holds by the construction of the distribution function F in the statement of the Proposition.

Uniqueness. Now take any partial equilibrium {{vh,j }, {vl,j }, Θ, Γ, F }. We first claim that
v̄ is increasing in j. Take j > j ′ and let pj ′ denote the price offered by j ′ . Type j Sellers’
Optimality implies

                       vl,j ≥ δj + min{Θ(pj ′ ), 1}pj ′ + (1 − min{Θ(pj ′ ), 1})βl v̄j ,

and so combining with type j Buyers’ Optimality, equation (3), and solving for v̄j gives

            δj (πl + πh λ) + πl min{Θ(pj ′ ), 1}pj ′   δj ′ (πl + πh λ) + πl min{Θ(pj ′ ), 1}pj ′
    v̄j ≥                                            >                                            = v̄j ′ ,
             πl (1 − min{Θ(pj ′ ), 1})βl + πh βh         πl (1 − min{Θ(pj ′ ), 1})βl + πh βh

where the second inequality uses δj > δj ′ and the equality solves the same equations for v̄j ′ .
   Consistency of Supplies with Beliefs implies that for each j ∈ {1, . . . , J}, there exists a
price pj ∈ P with γj (pj ) > 0.
    Now in the remainder of the proof, assume also that θj ≡ Θ(pj ) > 0. First we prove
that the constraint λ ≤ min{θj−1 , 1}βh v̄j /pj + (1 − min{θj−1 , 1}) is satisfied. Second we prove
that the constraint vl,j ′ ≥ δj ′ + min{θj , 1}pj + (1 − min{θj , 1})βl v̄j ′ ) is satisfied for all j ′ < j.
Third we prove that the pair (θj , pj ) delivers value vl,j to sellers of type j trees. Fourth we

                                                      33
prove that (θj , pj ) solves (Pj ).
   Step 1. To derive a contradiction, assume λ > min{θj−1 , 1}βh v̄j /pj + 1 − min{θj−1 , 1}.
Active Markets implies that the expected value of a unit of fruit to a buyer who pays pj
must equal λ and so there must be a j ′ with γj ′ (pj ) > 0 and λ < min{θj−1 , 1}βh v̄j ′ /pj + 1 −
min{θj−1 , 1}. If θj = ∞, min{θj−1 , 1}βh v̄j ′ /pj + 1 − min{θj−1 , 1} = 1 ≤ λ, which is impossible;
therefore θj < ∞. Then Equilibrium Beliefs implies pj is an optimal price for type j ′ sellers
and so for all p′ and θ′ ≡ Θ(p′ ), min{θj , 1}(pj − βl v̄j ′ ) ≥ min{θ′ , 1}(p′ − βl v̄j ′ ). Since θj > 0,
min{θj , 1}(p′ − βl v̄j ′ ) > min{θj , 1}(pj − βl v̄j ′ ) for all p′ > pj , and so the two inequalities
imply min{θj , 1} > min{θ′ , 1}.
   Now take any j ′′ < j ′ , so v̄j ′′ < v̄j ′ . Then since min{θj , 1}(pj − βl v̄j ′ ) ≥ min{θ′ , 1}(p′ −
βl v̄j ′ ), min{θj , 1} > min{θ′ , 1}, and v̄j ′′ < v̄j ′ ,

                             min{θj , 1}(pj − βl v̄j ′′ ) > min{θ′ , 1}(p′ − βl v̄j ′′ ).

Type j ′′ Sellers’ Optimality condition implies v̄j ′′ ≥ δj ′′ + min{θj , 1}pj + (1 − min{θj , 1})βl v̄j ′′
and so the previous inequality gives v̄j ′′ > δj ′′ + min{θ′ , 1}p′ + (1 − min{θ′ , 1})βl v̄j ′′ . Rational
beliefs implies γj ′′ (p′ ) = 0. That is, any p′ > pj attracts only type j ′ sellers or higher and
so delivers value at least equal to min{θ′ −1 , 1}βh v̄j ′ /p′ + (1 − min{θ′ −1 , 1}) to buyers. For p′
sufficiently close to pj , this exceeds λ, contradicting buyers’ optimality.
    Step 2. Sellers’ Optimality implies vl,j ′ ≥ δj ′ + min{θj , 1}pj + (1 − min{θj , 1})βl v̄j ′ ) for
all j ′ , pj , and θj = Θ(pj ).
    Step 3. Equilibrium Beliefs implies vl,j = δj + min{θj , 1}pj + (1 − min{θj , 1})βl v̄j ′ ) for all
j, pj , and θj = Θ(pj ) < ∞ with γj (pj ) > 0.
    Step 4. Suppose there is a policy (θ, p) that satisfies the constraints of problem (Pj ) and
delivers a higher payoff. That is,

                               vl,j < δj + min{θ, 1}p + (1 − min{θ, 1})βl v̄j
                                λ ≤ min{θ−1 , 1}βh v̄j /p + 1 − min{θ−1 , 1}
                     vl,j ′ ≥ δj ′ + min{θ, 1}p + (1 − min{θ, 1})βl v̄j ′ for all j ′ < j.

If these inequalities hold with θ > 1, then the same set of inequalities holds with θ = 1, and
so we may assume θ ≤ 1 without loss of generality. Choose p′ < p such that

                                          vl,j < δj + θp′ + (1 − θ)βl v̄j                             (19)
                                                    λ < βh v̄j /p′                                    (20)
                                vl,j ′ > δj ′ + θp′ + (1 − θ)βl v̄j ′ for all j ′ < j.                (21)


                                                          34
The previous inequalities imply that this is always feasible by setting p′ close enough to p.
Now sellers’ optimality implies vl,j ≥ δj + min{Θ(p′ ), 1}p′ + (1 − min{Θ(p′ ), 1})βl v̄j ), which,
together with inequality (19), implies Θ(p′ ) < θ. This together with inequality (21) implies
that
                       vl,j ′ > δj ′ + Θ(p′ )p′ + (1 − Θ(p′ ))βl v̄j ′ for all j ′ < j,

and so, due to Equilibrium Beliefs, γj ′ (p′ ) = 0 for all j ′ < j. But then, using inequality (20),
we obtain
                PJ                                               PJ
  βh v̄j βh             γj ′ (p′ )v̄j ′
                   j ′ =1                         ′ −1
                                                            βh          γj ′ (p′ )v̄j ′
                                                                   j ′ =1
λ< ′ ≤                                  = min{Θ(p  )   , 1}                             + 1 − min{Θ(p′)−1 , 1}),
   p                   p′                                              p ′


where the second inequality uses monotonicity of v̄j and γj ′ (p′ ) = 0 for j ′ < j; and the last
equation uses Θ(p′ ) < θ ≤ 1. This contradicts Buyers’ Optimality condition and completes
the proof.


Proof of Proposition 3. To prove that there exists a unique competitive equilibrium, it
is enough to prove that there exists a unique λ ∈ [1, βh /βl ] such that the partial equilibrium
associated to that λ clears the fruit market.
    For given λ ∈ [1, βh /βl ], let xj (λ) ≡ θj (λ)pj (λ), where θj (λ) and pj (λ) are the partial
equilibrium sale probability and price for trees of type j. For all j > 1 and given xj−1 (λ),
define                                                                        
                                     βl pj−1(xj−1 (λ), λ)                   βl
              fj (xj , λ) ≡ xj 1 − λ                         − xj−1 (λ) 1 − λ ,
                                     βh      pj (xj , λ)                    βh
where, with some abuse of notation,

                                            δj βh (πl + λπh ) + xj πl [βh − βl λ]
                            pj (xj , λ) =                                         .                        (22)
                                                         λ(1 − β̄)

For given λ ∈ [1, βh /βl ], Proposition 2 and Lemma 1 ensure that pj (xj (λ), λ) is the equilib-
rium price for type-j trees with xj (λ) being implicitly defined by fj (xj , λ) = 0 for all j > 1.
Moreover, for λ ∈ (1, βh /βl )

                                                            δ1 βh (πl + λπh )
                             x1 (λ) = p1 (x1 (λ), λ) =                        .                            (23)
                                                           λ − βh (πl + λπh )

Lemma 1 also implies that pj (xj (λ), λ) > pj−1(xj−1 (λ), λ) for all j > 1. From fj (xj , λ) = 0
for all j > 1 immediately follows that xj (λ) < xj−1 (λ) for all j > 1.




                                                      35
   Next, define M(λ) as
                                             J
                                             X
                                 M(λ) ≡            [πh δj − πl xj (λ)]Kj .
                                             j=1

Market clearing requires M(λ) = 0. Now we show that x′j (λ) < 0 and hence M ′ (λ) > 0 for
all λ ∈ (1, βh /βl ). For j = 1 we can directly calculate

                                                   δ1 βh πl
                               x′1 (λ) = −                         < 0.
                                             [λ − βh (πl + λπh )]2

For all j > 1, given x′j−1 (λ) < 0 we can proceed recursively as follows. Applying the implicit
function theorem to fj (xj , λ) = 0, we obtain

                                                    ∂fj (xj , λ)/∂λ
                                     x′j (λ) = −                     .
                                                    ∂fj (xj , λ)/∂xj

First, we can calculate

          ∂fj (xj , λ)    βl pj−1 (xj−1 (λ), λ)     βl pj−1(xj−1 (λ), λ) ∂pj (xj , λ)
                       =1− λ                    + xj λ                                .
             ∂xj          βh     pj (xj , λ)        βh    pj (xj , λ)2      ∂xj

It is easy to show that ∂fj (xj , λ)/∂xj > 0 given that pj (xj (λ), λ) > pj−1(xj−1 (λ), λ) and

                                  ∂pj (xj , λ)   πl [βh − βl λ]
                                               =                > 0.
                                     ∂xj          λ(1 − β̄)

Second, we can calculate
                                                                         
        ∂fj (xj , λ) βl                  pj−1(xj−1 (λ), λ)             βl
                    =      xj−1 (λ) − xj                     − 1 − λ x′j−1 (λ)
            ∂λ        βh                     pj (xj , λ)              βh
                         βl       xj    ∂pj−1 (xj−1 (λ), λ) ′
                      − λ                                   xj−1 (λ)
                         βh pj (xj , λ)     ∂xj−1 (λ)
                                                                                             
                         βl       xj      ∂pj−1 (xj−1 (λ), λ) pj−1 (xj−1 (λ), λ) ∂pj (xj , λ)
                      − λ                                     −
                         βh pj (xj , λ)           ∂λ                 pj (xj , λ)     ∂λ

where the first term is positive because xj (λ) < xj−1 (λ) and pj (xj (λ), λ) > pj−1 (xj−1 (λ), λ),
the second term is positive because λ ∈ (1, βh /βl ) and x′j−1 (λ) < 0, and the third term is
positive because of the last inequality together with ∂pj (xj , λ)/∂xj > 0. Finally, to show
that the last term is also positive we need to show that the term in square bracket is negative
where
                                   ∂pj (xj , λ)   βh πl (δj + xj )
                                                =− 2               .
                                       ∂λ          λ (1 − β̄)


                                                     36
Using expression (22) for pj (xj , λ) and fj (xj , λ) = 0 for all j, after some algebra, one can
show that this is always the case given that λ ∈ (1, βh /βl ). This implies that x′j (λ) < 0 for
all j and hence M ′ (λ) > 0.
   Finally, define
                          PJ                                           PJ
                            j=1 δj Kj                                    j=1 δj Kj
               π ≡ PJ                           and π ≡ PJ                                    ,
                       j=1 [δj   + xj (0)]Kj                 j=1 [δj   + xj (βh /βl − 1)]Kj

where x1 (λ) is given in equation (23) and xj (λ) solves fj (xj , λ) = 0 for all j > 1. It is easy to
see that π < π given that x′j (λ) < 0. Moreover, M(0) < 0 iff πl > π and M(βh /βl − 1) > 0 iff
πl < π. Given that M ′ (λ) > 0, it follows that if πl ∈ (π, π), there exists a unique equilibrium
with λ ∈ (1, βh /βl ). If instead πl ≤ π, then both M(0) and M(βh /βl − 1) are larger than
zero, while if πl ≥ π, they are both smaller than zero. Lemma 1 implies that x1 (λ) ≥ p1 (λ)
if λ = 1 and x1 (λ) ≤ p1 (λ) if λ = βh /βl . This implies that if πl ≤ π, there exists a unique
equilibrium with λ = 1, where x1 (0) ≥ p1 (0) is pinned down by market clearing. If instead
πl ≥ π, then there exists a unique equilibrium with λ = βh /βl , where x1 (0) ≤ p1 (0) is pinned
down by market clearing. This completes the proof.


Proof of Proposition 4. We start by establishing that equations (12)–(15) describe an
equilibrium. First, in any competitive equilibrium, Sellers’ Optimality and Buyers’ Optimal-
ity imply

                        vl (δ) = δ + Θ(P (δ))P (δ) + (1 − Θ(P (δ)))βl v̄(δ),
                       vh (δ) = δλ + βh v̄(δ).

Adding πl times the first equation to πh times the second and solving for v̄(δ) gives

                                           δ(πl + πh λ) + πl Θ(P (δ))P (δ)
                                 v̄(δ) =                                   .
                                           1 − πh βh − πl (1 − Θ(P (δ)))βl

Then substitute for δ = D(P (δ)) using equation (14) and simplify to get P (δ) = βh v̄(δ)/λ,
consistent with Lemma 1 in the discrete-type economy. Next, Equilibrium Beliefs implies
P (δ) maximizes Θ(p)(p − βl v̄(δ)). Using equation (13) for Θ(p), differentiate this expression
to show that it is increasing in p when p < P (δ) and decreasing when p > P (δ), where P (δ) is
given by the previous paragraph. The uniquely optimal price for a type δ tree is P (δ). Thus
these prices and this value function satisfy Equilibrium Beliefs. Next, any p > p delivers
value λ to a buyer by construction, satisfying Active Markets. Consistency of Supply with


                                                      37
Beliefs pins down the amount of trees available at each price, F (P (δ)) = G(δ) for all δ. With
this, the fruit market clearing condition reduces to condition (15).
    To show that this is the unique limit of the economy with a finite number of trees, start
with the condition that the seller of a type j ≥ 2 tree must be indifferent about representing it
as a type j + 1 tree. Since Θ(pj ) < 1, Θ(pj+1)(pj+1 − βl v̄j ) = Θ(pj )(pj − βl v̄j ), or equivalently

                                Θ(pj+1) − Θ(pj )       Θ(pj )
                                                 =−               .
                                   pj+1 − pj        pj+1 − βl v̄j

Now eliminate v̄j using the buyer’s indifference condition v̄j = pj λ/βh and take the limit as
δj+1 → δj , so pj+1 → pj . This gives

                                                       βh Θ(pj )
                                     Θ′ (pj ) = −                  .
                                                    pj (βh − βl λ)

If λ = βh /βl , this implies Θ(p) = 0 for all p > p. Otherwise, solve this differential equation
using the terminal condition Θ(p) = 1 to get equation (13). The remaining expressions
follow immediately from the Bellman equations.




                                                    38
                                Online Appendix
Individual’s Problem: Details
For any period t, history st−1 , and type j ∈ {1, . . . , J}, let ki,j,t(st−1 ) denote individual
i’s beginning-of-period t holdings of type j trees. For any period t, history st , type j ∈
{1, . . . , J}, and set P ⊂ R+ , let qi,j,t (P ; st) denote his net purchase in period t of type j trees
at a price p ∈ P . The individual chooses a history-contingent sequence for consumption
ci,t (st ) and measures of tree holdings ki,j,t+1(st ) and net tree purchases qi,j,t(P ; st ) to maximize
his expected lifetime utility

                                         ∞ X Y
                                             t−1
                                                                            !
                                         X
                                                                 πsτ βsτ        πst ci,t (st ).
                                         t=0     st       τ =0


This simply states that the individual maximizes the expected discounted value of consump-
tion, given the stochastic process for the discount factor. The individual faces a standard
budget constraint,

                    J                                                             J
                                                                                                         !
                    X                                              Z    ∞         X
                                        t−1                t                                         t
                          δj ki,j,t(s         ) = ci,t (s ) +               p           qi,j,t({p}; s ) dp,
                    j=1                                             0             j=1


for all t and st . The left hand side is the fruit produced by the trees he owns at the start of
period t. The right hand side is consumption plus the net purchase of trees at nonnegative
prices p. He also faces a law of motion for his tree holdings,

                                  ki,j,t+1(st ) = ki,j,t(st−1 ) + qi,j,t (R+ ; st ),

for all j ∈ {1, . . . , J}. This states that the increase in his tree holdings is given by his net
purchase of that type of tree. Finally, the individual faces a set of constraints that depends
on whether his discount factor is high or low.
    If the individual has a high discount factor, st = h, he is a buyer, which implies qi,j,t(P ; st )
is nonnegative for all j ∈ {1, . . . , J} and P ⊂ R+ . In addition, he must have enough fruit to
purchase trees,

                  J                                                                  J
                                                                                                             !
                  X                             Z    ∞                               X
                        δj ki,j,t (st−1 ) ≥              max{Θ(p), 1}p                      qi,j,t ({p}; st ) dp.
                  j=1                            0                                    j=1




                                                                  39
If the individual wishes to purchase q trees at a price p and Θ(p) > 1, he will be rationed
and so must bring Θ(p)pq fruit to the market to make this purchase. This constrains his
ability to buy trees in markets with excess demand. Together with the budget constraint,
this also ensures consumption is nonnegative. Finally, he can only purchase type j trees at
a price p if individuals are selling them at that price, that is
                                              Z                 J
                                                                                         !
                                                                X
                          qi,j,t(P ; st ) =           γj (p)             qi,j ′,t ({p}; st ) dp
                                                  P             j ′ =1


for all j ∈ {1, . . . , J} and P ⊂ R+ . The left hand side is the quantity of type j trees
purchased at a price p ∈ P . The integrand on the right hand side is the product of quantity
of trees purchased at price p and the share of those trees that are of type j.
    If the individual has a low discount factor, st = l, he is a seller, which implies qi,j,t(P ; st )
is nonpositive for all j ∈ {1, . . . , J} and P ⊂ R+ . In addition, he may not try to sell more
trees than he owns:
                                              Z   ∞
                       ki,j,t(s   t−1
                                        )≥−           max{Θ(p)−1 , 1}qi,j,t({p}; st )dp,
                                              0


for all j ∈ {1, . . . , J}. Each tree only sells with probability min{Θ(p), 1} at price p, so if
Θ(p) < 1, an individual must bring Θ(p)−1 trees to the market to sell one of them. Sellers
are not restricted from selling trees in the wrong market. Instead, in equilibrium they will
be induced not to do so.
   Let V̄ ∗ ({kj }) be the supremum of the individuals’ expected lifetime utility over feasible
policies, given initial tree holding vector {kj }. We prove in Proposition 1 that the function
V̄ ∗ satisfies the following functional equation:

                                   V̄ ({kj }) = πh Vh ({kj }) + πl Vl ({kj }),                    (24)




                                                           40
where
                                       J                                         J
                                                                                                     !                     !
                                       X                     Z       ∞           X
          Vh ({kj }) = max′                     δj kj −                  p               qj ({p}) dp + βh V̄ ({kj′ })                 (25)
                       {qj ,kj }                                 0
                                       j=1                                       j=1

        subject to kj′ = kj + qj (R+ ) for all j ∈ {1, . . . , J}
                      J         Z ∞                        J
                                                                        !
                   X                                     X
                        δj kj ≥     max{Θ(p), 1}p               qj ({p}) dp,
                     j=1                    0                                            j=1
                                   Z                       J
                                                                                 !
                                                           X
                    qj (P ) =              γj (p)                qj ({p}) dp for all j ∈ {1, . . . , J} and P ⊂ R+
                                       P                   j=1

                    qj (P ) ≥ 0 for all j ∈ {1, . . . , J} and P ⊂ R+ ,

and
                                                    J                                      J
                                                                                                             !                    !
                                                    X                    Z       ∞         X
                Vl ({kj }) = max′                          δj kj −                   p             qj ({p}) dp + βl V̄ ({kj′ })       (26)
                                 {qj ,kj }                                   0
                                                     j=1                                   j=1

             subject to    kj′= kj + qj (R+ ) for all j ∈ {1, . . . , J}
                                   Z ∞
                           kj ≥ −       max{Θ(p)−1 , 1}qj ({p})dp for all j ∈ {1, . . . , J},
                                                0

                           qj (P ) ≤ 0 for all j ∈ {1, . . . , J} and P ⊂ R+ ,

We now prove Proposition 1 working with the recursive version of the individuals’ problem.
  Let Θ̄(p) ≡ max{Θ(p), 1} and Θ(p) = min{Θ(p), 1}. Fix Θ and Γ and take any positive-
valued numbers {vs,j } and λ that solve the Bellman equations (1), (3), and (4) for s = l, h.
Let ph be an optimal price for buying trees,
                                                                                         PJ                       !!
                                                                                 βh         j=1 γj (p)v̄j
                           ph ∈ arg max Θ̄(p)−1                                                              −1        .
                                                    p                                          p

Similarly let pl,j be an optimal price for selling type j trees,
                                                                                                         
                                                    pl,j = arg max Θ(p) p − βl v̄j
                                                                         p

                                                                             PJ
for all δ. We seek to prove that V̄ ∗ ({kj }) ≡                                      j=1   v̄j kj where v̄j = πh vh,j + πl vl,j .
   If λ = 1, equations (1) and (3) imply
                                                                                    
                   v̄j = πh δj + βh v̄j + πl δj + Θ(pl,j )pl,j + (1 − Θ(pl,j ))βl v̄j .


                                                                             41
for all δ. Equivalently,

                                                      δj + πl Θ(pl,j )pl,j
                                   v̄j =                                          > 0.
                                                 1 − πh βh − πl βl (1 − Θ(pl,j ))

Alternatively, if λ > 1, the same equations imply
                                                                    PJ                             !              !
                                   −1
                                                         −1
                                                               βh       j ′ =1   γj ′ (ph )v̄j ′
  v̄j = πh    δj     1 − Θ̄(ph )            + Θ̄(ph )                                                  + βh v̄j
                                                                            ph
                                                                                                                                  
                                                                                 + πl δj + Θ(pl,j )pl,j + (1 − Θ(pl,j ))βl v̄j

for all δ. Since vl,j and vh,j are positive by assumption so is v̄j , and equivalently we can write

                                                                                    PJ
                                                                                    !
                                                                           δ
                                                                    γj ′ (ph )v̄j ′
                                                                         −1 j           j ′ =1
  v̄j   1 − πh βh − πl βl (1 − Θ(pl,j )) − πh βh Θ̄(ph )
                                                                  ph v̄j
                                                        = πh δj 1 − Θ̄(ph )−1 + πl δj + Θ(pl,j )pl,j .
                                                                                                   


The right hand side of this expression is positive for all j. Once again since v̄j > 0, with
λ > 1, this holds if and only if
                                                                                                   PJ
                                                                                             δ
                                                                                           −1 j
                                                                                                             γj ′ (ph )v̄j ′
                                                                                                        j ′ =1
                   1 − πh βh − πl βl (1 − Θ(pl,j )) > πh βh Θ̄(ph )                                                          .   (27)
                                                                                                           ph v̄j

If this restriction fails at any prices ph and pl,j , it is possible for an individual to obtain
unbounded expected utility by buying and selling trees at the appropriate prices. We are
interested in cases in which it is satisfied.
    Next, let V̄ ({kj }) = Jj=1 v̄j kj and Vs ({kj }) ≡ Jj=1 vs,j kj for s = l, h. It is straightfor-
                          P                            P

ward to prove that V̄ and V̄s solve equations (24), (25), and (26) and that the same policy
is optimal.
    Finally, we adapt Theorem 4.3 from Werning (2009), which states the following: suppose
V̄ (k) for all k satisfies the recursive equations (24), (25), and (26) and there exists a plan
that is optimal given this value function which gives rise to a sequence of tree holdings
    ∗
{ki,j,t (st−1 )} satisfying

                                          t−1
                                                                    !
                                        X Y
                                                                              ∗
                               lim                        πsτ βsτ       V̄ ({ki,j,t (st−1 )}) = 0.                               (28)
                              t→∞
                                            st     τ =0


Then, V̄ ∗ = V̄ .


                                                                    42
   If λ = 1, an optimal plan is to sell type j trees at price pl,j when impatient and not to
purchase trees when patient. This gives rise to a non-increasing sequence for tree holdings.
Given the linearity of V̄ , condition (28) holds trivially.
   If λ > 1, it is still optimal to sell type j trees at price pl,j when impatient, but patient
individuals purchase trees at price ph and do not consume. Thus
                                                                              PJ
                                            ′                   −1                 j ′ =1 δj ′ kj ′
                                           kh,j   = kj + Θ̄(ph ) γj (ph )
                                                                                          ph
                                            ′
                                                                
                                           kl,j   = 1 − Θ(pl,j ) kj .

Using linearity of the value function, the expected discounted value next period of an indi-
vidual with tree holdings {kj } this period is

  J
  X
                   ′            ′
                                           
        v̄j πh βh kh,j + πl βl kl,j
  j=1
                J                                                 PJ                      !                                 !
                X                                                    j ′ =1   δj ′ kj ′
                            πh βh kj + Θ̄(ph )−1 γj (ph )
                                                                                                                   
            =         v̄j                                                                      + πl βl 1 − Θ(pl,j ) kj
                j=1
                                                                        ph
                            J                                                                                PJ                          !
                            X                                                                          δ
                                                                                                      −1 j    j ′ =1   γj ′ (ph )v̄j ′
                       =          v̄j kj       πh βh + πl βl 1 − Θ(pl,j ) + πh βh Θ̄(ph )                                                    ,
                            j=1
                                                                                                                  ph v̄j

where the second equality simply rearranges terms in the summation. Equation (27) implies
that each term of this sum is strictly smaller than v̄j kj . This implies that there exists an
η < 1 such that
                        PJ                   ′
                                                                              ′                    ′
                            j=1 v̄j   πh βh kh,j  + πl βl kl,j     πh βh V̄ ({kh,j }) + πl βl V̄ ({kl,j })
                η>                    PJ                         =                                         ,
                                         j=1 v̄j kj
                                                                                 V̄ ({kj })

and so condition (28) holds.




                                                                43
