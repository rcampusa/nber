                                NBER WORKING PAPER SERIES




   PARTIAL IDENTIFICATION OF HETEROGENEITY IN PREFERENCE ORDERINGS
                        OVER DISCRETE CHOICES

                                               Itai Sher
                                            Jeremy T. Fox
                                             Kyoo il Kim
                                            Patrick Bajari

                                        Working Paper 17346
                                http://www.nber.org/papers/w17346


                      NATIONAL BUREAU OF ECONOMIC RESEARCH
                               1050 Massachusetts Avenue
                                 Cambridge, MA 02138
                                     August 2011




Fox thanks the National Science Foundation for generous funding. Bajari thanks the National Science
Foundation, grant SES-0720463, for generous research support. We are grateful to Joerg Stoye and
Rakesh Vohra for useful comments related to the issues in this paper. The views expressed herein
are those of the authors and do not necessarily reflect the views of the National Bureau of Economic
Research.

NBER working papers are circulated for discussion and comment purposes. They have not been peer-
reviewed or been subject to the review by the NBER Board of Directors that accompanies official
NBER publications.

© 2011 by Itai Sher, Jeremy T. Fox, Kyoo il Kim, and Patrick Bajari. All rights reserved. Short sections
of text, not to exceed two paragraphs, may be quoted without explicit permission provided that full
credit, including © notice, is given to the source.
Partial Identification of Heterogeneity in Preference Orderings Over Discrete Choices
Itai Sher, Jeremy T. Fox, Kyoo il Kim, and Patrick Bajari
NBER Working Paper No. 17346
August 2011
JEL No. C25,L0

                                              ABSTRACT

We study a variant of a random utility model that takes a probability distribution over preference relations
as its primitive. We do not model products using a space of observed characteristics. The distribution
of preferences is only partially identified using cross-sectional data on varying budget sets. Imposing
monotonicity in product characteristics does not restore full identification. Using a linear programming
approach to partial identification, we show how to obtain bounds on probabilities of any ordering relation.
We also do constructively point identify the proportion of consumers who prefer one budget set over
one or two others. This result is useful for welfare. Panel data and special regressors are two ways
to gain full point identification.


Itai Sher                                            Kyoo il Kim
Department of Economics                              Department of Economics
University of Minnesota                              University of Minnesota
4-145 Hanson Hall                                    4-129 Hanson Hall
1925 Fourth Street South                             1925 4th Street South
Minneapolis, MN 55455                                Minneapolis, MN 55455
isher@umn.edu                                        kyookim@umn.edu

Jeremy T. Fox                                        Patrick Bajari
Economics Department                                 Professor of Economics
University of Michigan                               University of Minnesota
238 Lorch Hall                                       4-101 Hanson Hall
611 Tappan St.                                       1925 4th Street South
Ann Arbor, MI 48104                                  Minneapolis, MN 55455
and NBER                                             and NBER
jeremyfox@gmail.com                                  bajari@econ.umn.edu
1     Introduction
Researchers in many ﬁelds estimate random utility models of multinomial choice (McFadden 1972).
These models typically relate a discrete choice out of a ﬁnite number J of alternatives to a vector of
H product characteristics. Modeling utility as being a heterogeneous function over a product space X
has two main advantages. First, preferences for a consumer can be captured by a parsimonious set of
preferences over the vectors xj ∈ X, which aids estimation when a limited number of observations is
available. Second, the estimated model can be used to compute the demand for new goods, meaning
combinations of product characteristics xj not observed in the prior data.
   Modeling products in characteristics space is empirically useful as long as the researcher has data
on all of the xj (or all but one) relevant to consumers.1 However, in many applications the researcher
ﬁnds it diﬃcult to measure the appropriate xj . In the autos applications of Berry, Levinsohn and
Pakes (1995) and Petrin (2002), the data measure car characteristics such as fuel economy and speed
but do not measure hard-to-quantify but potentially important car characteristics such as physical
attractiveness, quality, luxurious feel, and handling. In the breakfast cereal application of Nevo (2001),
the author measures characteristics such as sugar content, fat content, advertising and mushiness.
However, as Hitsch (2006) models, the appeal of a breakfast cereal arises from intangible characteristics
that manufacturers may have little information on before product launch.
   Goettler (1999) considers the problem of consumers faced with a discrete choice of television
programs. It is not immediately clear how to specify the characteristics of Seinfeld, Friends, CSI,
Law and Order, The O’Reilley Factor or Face The Nation. Some characteristics are obvious, such as
whether the show is comedy, drama or news. However, how should one specify the characteristics of
alternative comedies such as Seinfeld versus Friends? Is it appropriate to think of both The O’Reilley
Factor and Face The Nation as “news” when Face The Nation is primarily based on interviews with
leading opinion makers while The O’Reilley Factor is usually based on interviews with pundits?
Coming up with a ﬁnite and exhaustive list of characteristics is often diﬃcult.
   Motivated by the diﬃculty of measuring all product characteristics, we work with an alternative
representation of random utility models that has been proposed in mathematical economics and math-
ematical psychology (Block and Marschak 1960, Manski 1977, Falmagne 1978, Barbera and Pattanaik
1986, McFadden and Richter 1991, Fishburn 1998, McFadden 2005, Manski 2007). In these papers,
the primitive used for modeling consumer i’s choice behavior is a strict preference ordering ≻i on
alternatives. It is well-known that a preference ordering ≻i induces a utility function ui (up to strictly
monotone transformations). Consumer i chooses good j if j ≻i j ′ for all j ′ ̸= j; this corresponds to the
situation where ui,j > ui,j ′ in a model where preferences are represented by a utility function. In this
literature, it is common to restrict attention to strict orderings, which rule out indiﬀerence between
distinct alternatives. The primitive parameter of the model is p(≻i ), a probability distribution on
  1 For example, the approach of Berry, Levinsohn and Pakes (1995) allows for H characteristics in x and a single,
                                                                                                    j
unobserved characteristic ξj .


                                                        2
preference orderings ≻i , which plays the role of Fu (ui,1 , ..., ui,J ), a probability distribution on utili-
ties, in a random utility model. Simple combinatorics implies that if there are J choices, then there are
J! ways to rank these choices. Hence, the primitives of our model will be the J! probabilities, p(≻i ),
induced by diﬀerent types of consumers. Most of our results do not consider product characteristics
xj , as the previous empirical literature does. This includes not focusing on prices for our main results,
as prices are not used or do not ﬂexibly vary in some markets, such as the television market studied
by Goettler (1999).
   As a simple example, suppose that a consumer has the choice between three types of cars {GM,
Ford, Chrysler}. Consumer i ranks the choices as Ford≻i GM≻i Chrysler while consumer i′ ranks the
choices as Ford≻i′ Chrysler≻i′ GM. With three available choices, there are 3! = 6 possible ways to
rank these choices. The parameters of the model are a set of six probabilities (or ﬁve independent
probabilities as they sum to 1), which we denote as p(≻). Given the model parameters, p(≻), and a
set of choices, we can compute choice probabilities or aggregate demand in a straightforward manner.
The probability that Ford is chosen is equal to the probability of the ranking Ford≻GM≻Chrysler
plus the probability of the ranking Ford≻Chrysler≻GM.
   As mentioned above, it is well known that every vector of utilities (ui,1 , ..., ui,J ) is associated
with a unique preference ordering ≻i . Conversely, when the choice set is ﬁnite, every ≻i can be
associated with (one of many) vector of utilities (ui,1 , ..., ui,J ) that will generate the same choice
behavior. Therefore, passing between preference orderings and utility values amounts to a change
of variables. However, working with preference orderings is more convenient for two reasons. First,
the analysis of the problem of identiﬁcation attains greater clarity. As is well known from classical
consumer theory (e.g. Mas-Colell, Whinston and Green 1995), it is always possible to make a positive
monotonic transformation of utility and leave choice behavior unaltered. Diﬀerences in utility that do
not manifest themselves in diﬀerences in preference rank are not behaviorally meaningful, and cannot
be identiﬁed from demand. It follows that in a random utility model, the distribution of random
utilities Fu (ui,1 , ..., ui,J ) cannot be identiﬁed from choice behavior, unless we restrict attention to a
set of utility functions such that no pair is related by a monotonic transformation (Matzkin 1993). For
this reason, identiﬁcation in discrete choice models is simpliﬁed and clariﬁed by working with p(≻i )
instead of Fu (ui,1 , ..., ui,J ). Second, we shall show that there is a natural linear relationship between
consumer demand and p(≻i ). This linearity simpliﬁes the analysis of identiﬁcation, and would also
simplify the estimation of properties of the distribution that are point or partially identiﬁed.
   Our paper studies the identiﬁcation of p(≻i ), the distribution of preferences. While the work in
mathematical economics mentioned above studies the same model, the results from this literature are
not suﬃciently integrated into the modern empirical literature. We both review results on identiﬁca-
tion from this prior literature (especially Falmagne 1978) and prove new identiﬁcation results about
p. Our focus on the identiﬁcation of p(≻i ) contrasts with much of the earlier work, which focuses
on the identiﬁcation of choice probabilities under new budget sets (Manski 2007) or, especially, on


                                                      3
testing whether there exists a p(≻i ) consistent with the data (e.g., Fishburn 1992, McFadden 2005).
   Following the earlier literature on preference orderings, we primarily consider the case that the
economist observes a cross section of choice probabilities from various budget sets, meaning at most
every nonempty subset of the ﬁnite set of the J alternatives. While it is common in the economic
theory literature to assume an analyst has data on all budget sets, it is less common to have this in
empirical work. One setting where rich budget set variation is observed is experimental data. Budget
sets are often varied in economic experiments, whether the experiment is for academic research or
for commercial analysis of demand. Budget set variation is also found in television viewing, where a
choice situation is a time period and diﬀerent shows compete for viewers in each time period.
   We establish that for four or more choices, data on choice probabilities for all budget sets are
not suﬃciently rich to identify the population distribution over preferences, p(≻). While the prior
literature in mathematical economics was generally aware of underidentiﬁcation issues, we formally
explore the degree of underidentiﬁcation. This result implies that for more than three choices, the
identiﬁcation of random utility models hinges crucially on restricting the model to focus on preferences
(up to a functional form) over observed product characteristics xj . As this result is a non-identiﬁcation
result using a large amount of budget set variation, it suggests that existing empirical work makes
strong use of observed product characteristics or functional form assumptions on utility.
    Having established that p(≻) is rarely point identiﬁed, we explore its identiﬁable features. We
begin by reviewing some results of Flamagne (1978) that point identify features of p. In particular,
these results establish that (i) the probabilities of upper and lower contour sets are identiﬁed, and (ii)
the marginal distribution of the rank ordering of each product is identiﬁed; that is one can identify
the probability that choice j is the third most popular choice, for example. Note that the main focus
of the prior literature to which these results belong was testing rationality rather than identiﬁcation.2
However, these results provide background and foundation for our original results.
   Our paper is part of a partial identiﬁcation approach in the literature (see e.g. Manski 1995,
2003). The most related paper to ours in this approach is Manski (2007). He explores bounds
on choice probabilities under counterfactual choice situations while we focus on identiﬁcation of the
primitive, probability distribution of preference. We further extend a linear programming approach to
partial identiﬁcation in this setting introduced by Manski (2007). We show how to ﬁnd the maximum
and minimum probabilities of any ordering relation consistent with the data using linear programs.
Similarly, we show how to ﬁnd the extremal probabilities, again consistent with the data, for various
properties of preference both under the assumption that the researcher observes the distribution of
choices from all budget sets and under the assumption that the researcher observes the distribution of
choices from only a subset of budget sets. The linear programs used for this purpose can be expressed
either in terms of choice probabilities or in terms of lower and upper contour set probabilities.
   2 Manski (1977) works with the primitive of a measure over pairs of budget sets and decision makers. He does not

explore identiﬁcation of this measure. Even establishing identiﬁcation of this object would not establish identiﬁcation
of p, as a choice set with n elements corresponds to n! diﬀerent preference orderings.


                                                          4
    The failure to attain full point identiﬁcation does not necessarily prevent all welfare comparisons.
Given any three budget sets, we can point identify the distribution of consumer preferences over these
budget sets. In other words, we can identify the “voting preferences” of consumers for any three budget
sets. We provide simple explicit expressions for these distributions. This is an important identiﬁcation
result for welfare analysis, as many policies may alter the choice sets available to consumers. Our
result does not require observed product characteristics or prices.
   One possible solution to the lack of point identiﬁcation of p(≻) might be to return to using data
on vectors of H product characteristics xj for each choice. Rather than assuming some functional
form for the utility of j as a function of xj , one might be willing to impose the assumption that
utility is monotone in the H elements of xj , for each consumer. We formally investigate monotonicity
restrictions and show, regrettably, that they do not lead to the point of identiﬁcation of p(≻). If the
true data generating process has a subset A of more than three elements such that no element of A
dominates any other element of A–in the sense of being weakly better along all characteristics–then
p(≻) cannot be identiﬁed.
   We relate our results to the prior empirical literature by emphasizing two stronger forms of data
variation and modeling assumptions that lead to point identiﬁcation of the distribution of preferences.
One set of identifying data and model assumptions is that utility is quasi-linear in prices and that
prices ﬂexibly vary across all choice situations. A second set of assumptions allows for panel data: the
same consumer is observed making choices at diﬀerent budget sets.
   Unlike most of the previous literature in mathematical economics on random preferences, our
focus is on exploring the identiﬁcation of p(≻). Thus, in broad topic our paper relates to results
on nonparametric identiﬁcation in multinomial choice models where observed product characteristics
xj provide a major source of identifying power. This literature on observed product (or consumer)
characteristics discusses identifying the distribution of utility functions or random coeﬃcients on xj
(Ichimura and Thompson 1998, Matzkin 2007, Bajari, Fox, Kim and Ryan 2010, Fox and Gandhi
2010, Chiappori and Komunjer 2009) or of utility values conditional on xj (Lewbel 2000, Berry and
Haile 2010).


2     Model
Consider a household i who chooses between a ﬁnite and mutually exclusive set of alternatives j =
1, ..., J. Let J = {1, ..., J} denote the set of alternatives. For example, the choice might be between
alternative computer systems such as a Dell, HP or Apple. In most cases, it is natural to assume
that the choice of the household is constrained because not all products are available in all markets.
Let B ⊆ J denote households’ choice set. Throughout, we assume that all households within a given
market face the same choice set.
   Each consumer has a strict preference relation ≻ over J . For the J choices, there are J! ways to


                                                   5
uniquely order the available choices from highest to lowest. As discussed earlier, preference orderings
can be represented by utility functions. In a discrete choice setting, u orders the choices: j ≻ k if and
only if uj > uk . We allow consumers to have any strict preference ordering. For instance, one group
of consumers may order the set of personal computers as Dell≻HP≻Apple while others may have the
order Apple≻HP≻Dell.
    Let R be the set containing all of the J! linear orderings on J . Let p : R → [0, 1] be a mass function
where p(≻) is the fraction of the consumers that have preferences corresponding to the ordering ≻,
       ∑                                                  ∑
where    p(≻) = 1. For any subset L of R, deﬁne p(L) = ≻∈L p(≻).
       ≻∈R
   Let Pr (j | B, p) be the population probability of j being chosen given a choice set B and a measure
p over the orderings. For each j ∈ B, we have:
                                           ∑
                         Pr (j | B, p) =       p(≻)1 {j ≻ j ′ for all j ′ ∈ B, j ′ ̸= j} .                (1)
                                           ≻∈R


In (1), 1 {j ≻ j ′ for all j ′ ∈ B, j ′ ̸= j} is the indicator function for the event that j is the maximizing
alternative in B. Thus the probability that j is the demanded alternative in B is equal to the sum of
probabilities of drawing elements of R that make j a maximizer.
   We could generalize the above model by allowing p(≻) to be conditional on observed covariates s
such as demographics or advertising levels that might inﬂuence consumer preferences. For instance, we
might expect families with young children to have a stronger preference for minivans than single men
(Petrin 2002). We shall suppress these arguments, although our approach could be seen as seeking to
learn the distribution of preferences for minivans within, say, the class of families with young children.


3    Identiﬁcation
This section asks whether aggregated consumer choice behavior is suﬃcient to uniquely recover p, the
distribution of the individual heterogeneity. We explore a situation where the same (ﬁnite or inﬁnite)
population of consumers is present in every choice situation, but there are many choice situations
where the budget sets are varied so that (at most) every non-empty B ⊆ J is oﬀered to consumers.
As discussed in the introduction, this is the data scheme in the previous literature on this model. In
each choice situation or market indexed by B, we observe the choice probabilities or market shares of
each choice j ∈ B. This also corresponds to the case where we have individual data but cannot track
consumers across choice situations using a panel identiﬁer. As discussed in the introduction, variation
in choice sets B is common in experimental applications and in applications such as television viewing.

Deﬁnition 1.

    • We say that the measure p is identiﬁed from choice probability data if p ̸= p′ implies that
      Pr (j | B, p) ̸= Pr (j | B, p′ ) for some B and j.


                                                        6
     • We say that the probability of the set O of orderings is identiﬁed from choice probability
       data if p(O) ̸= p′ (O) implies that Pr (j | B, p) ̸= Pr (j | B, p′ ) for some B and j.

     We will show that the measure p is not generally point identiﬁed if there are four or more alterna-
tives. However, we will also show that important features of the distribution of consumer preferences
are identiﬁed.


3.1     Identiﬁcation of Lower Contour Set Probabilities
In this section, we review previous results by Block and Marschak (1960), Falmagne (1978), Barbera
and Pattanaik (1986) that bear on the partial identiﬁcation of the distribution of preference orderings
from observations on the distribution of choices from budget sets. These results provide background
and foundation for the results that we provide in later sections.
   For any preference order ≻ and item j ∈ J , deﬁne the strict lower contour set of j given ≻
as
                                         L(j, ≻) := {i ∈ J : j ≻ i}.

Then deﬁne

                   Cj,K := {≻∈ R : K ⊆ L(j, ≻)},
                    Lj,K := {≻∈ R : K = L(j, ≻)}                       ∀K ⊆ J , ∀j ̸∈ K.

Cj,K is the event that K is contained in the lower contour set of j, or in other words, the event that j
would be chosen over all elements of K. The probability of the events Cj,K is immediately identiﬁed
from the data. Indeed, we have
                                          Pr(j|B, p) = p(Cj,B\j ).                                    (2)

Lj,K is the event that the lower contour set of j is exactly K. Note that the events Lj,K are ﬁner than
the events Cj,K , whose probabilities are directly observable from choice. More precisely, Lj,K ⊆ Cj,K ,
and the inclusion is strict except when K = J \ j. The following example illustrates the above
concepts.

Example 2. Let J = {1, 2, 3, 4, 5}. Suppose we observe that from budget set {1, 3, 5}, 1/3 of the
population chooses alternative 1. This tells us that 1/3 of the population prefers 1 to everything in the
set {3, 5}, or in other words that Pr(1|{1, 3, 5}, p) = p(C1,{3,5} ) = 1/3. However, the above observation
alone does not reveal the proportion of the population that prefers 1 to the items in {3, 5}, but does
not prefer 1 to any other alternative; in other words, the above observation does not reveal p(L1,{3,5} ),
the probability that {3, 5} is the lower contour set of 1. All we can infer is that p(L1,{3,5} ) ≤ 1/3. It
is possible that p(L1,{3,5} ) = 1/3 if everyone who prefers 1 to 3 and 5 also prefers 2 and 4 to 1. It is



                                                      7
also possible that p(L1,{3,5} ) = 0, if, for example, everyone who prefers 1 to 3 and 5 also prefers 1 to
2. Below, we will show that we can identify p(L1,{3,5} ).

   The following identiﬁcation result follows from results of Block and Marschak (1960) and Falmagne
(1978). (See in particular, Deﬁnition 2 and Theorem 2 of Flamagne 1978).

Theorem 3.            1. The probabilities p(Lj,K ) are identiﬁed via the equation:
                                      ∑
                     p(Lj,K ) =                (−1)|S| Pr(j|K ∪ S ∪ j, p)         ∀K ⊆ J , ∀j ̸∈ K.   (3)
                                  S⊆J \(K∪j)


  2. Conversely, choice probabilities are determined by the probabilities p(Lj,K ) via:
                                               ∑
                           Pr(j|B, p) =                 p(Lj,K ),             ∀j ∈ J , ∀B ∋ j.        (4)
                                            K ⊇ B\j :
                                               K ̸∋ j



   Although Theorem 3 is not new, the appendix contains a proof of the theorem for completeness.
In (3), |S| is the number of elements in S, so Pr(j|K ∪ S ∪ j, p) enters positively or negatively into the
expression for p(Lj,K ) depending on whether S has an even or odd number of elements. Note that
S = ∅ is included in the summation. Part 1 of the theorem show that it is possible to identify the
probability events of the form Lj,K which are ﬁner than those of the form Cj,K for which we directly
observe probabilities in the data. Part 2 of the theorem shows that if we know the probability of all
lower contour sets, we can predict all choice probabilities. So, parts 1 and 2 of the theorem together
show that this identiﬁcation result is sharp in the sense that knowing the probabilities of all lower
contour sets is equivalent to knowing all choice probabilities. Note ﬁnally that in order to identify
p(Lj,K ), it is suﬃcient to observe Pr(j|B, p) for B ⊇ K ∪ j. In other words, it is suﬃcient to observe
choice from budget sets B containing K ∪ j, and moreover, one needs only to observe the probability
that j is chosen from such budget sets B and not the probability that any other item is chosen from
B.
   The expressions on the right-hand side of (3) are variants of expressions known as Block-Marschak
polynomials. Whereas the expressions above are deﬁned in terms of lower contour sets, the Block-
Marschak polynomials were originally deﬁned using analogous expressions in terms of upper rather
than lower contour sets. Upper contour set probabilities are identiﬁed in a manner analogous to lower
contour set probabilities.3
   In concluding this section we mention a corollary of Theorem 3 which is also due to Flamagne
(1978) (see Theorem 7 of that paper) and which should be useful for applied work. Let r (j, ≻) give
  3 In   particular upper contour sets are deﬁned as follows:
                        U (j, ≻) := {i ∈ J : i ≻ j}.
                           Uj,K := {≻∈ R : K = U (j, ≻)}                    ∀K ⊆ J , ∀j ̸∈ K.



                                                            8
the ranking of choice j in the preference ordering ≻, with the most preferred item being ranked 1 and
the least preferred being ranked J. Let
                                                         ∑
                                 Pr (r (j, ≻) = k) =           p (≻) 1 {r (j, ≻) = k}
                                                         ≻∈R


be the probability that a consumer chosen at random has choice j in the kth ranking slot.
Corollary 4. The quantity Pr (r (j, ≻) = k) is identiﬁed from data on choice probabilities.
    This is a consequence of Theorem 3 because:
                                                                  ∑
                                       Pr (r (j, ≻) = k) =               p(Lj,K ).
                                                             K:|K|=J−k


3.2     Partial Identiﬁcation: A Linear Programming Approach
In this section we sketch a linear programing approach to partial identiﬁcation in our setting. Let S
be any family of subsets of R such that

                                                         R ∈ S.                                         (5)

For any S ∈ S, let p(S) be the probability that ≻∈ S. Then consider the linear system:
                              ∑
                                    π≻ = p(S)                                   ∀S ∈ S                  (6)
                              ≻∈S

                              π≻ ≥ 0                                           ∀ ≻∈ R.                  (7)

Interpreting π≻ as the probability that a consumer has preference ordering ≻, any feasible solution
π = (π≻ :≻∈ R) to (6-7) corresponds to a probability distribution that assigns probability p(S) to
each set S ∈ S. Notice in particular that (5) and p(R) = 1 imply that (6) includes the equation:
                                                     ∑
                                                           π≻ = 1,                                      (8)
                                                     ≻∈R


which shows that any feasible solution to (6–7) indeed corresponds to a probability distribution.
Therefore, we can deﬁne the partially identiﬁed set of interest as the set of solutions π satisfying
We can then derive analogous expressions to (3-4) in terms of upper contour sets:
                               ∑
                    p(Uj,K ) =    (−1)|S| Pr(j|(J \ K) ∪ S, p)                    ∀K ⊆ J , ∀j ̸∈ K.
                                 S⊆K
                                       ∑
                  Pr(j|B, p) =                p(Uj,K )                               ∀j ∈ J , ∀B ∋ j.
                                 K ⊇ J \B :
                                   K ̸∋ j




                                                           9
(6–7). Deﬁne:

                                  C := {Cj,K : K ⊆ J , j ∈ J \ K} ∪ {R}
                                 L := {Lj,K : K ⊆ J , j ∈ J \ K} ∪ {R}.

When S = C, then (6-7) represents the partially identiﬁed set of possible probability distributions
over strict preference orderings. This is because in this case the equations in (6) combined with (2)
become:
                       ∑
                                π≻ = Pr(j|B, p)                        ∀B ⊆ J , ∀j ∈ B
                     ≻∈Cj,B\j


This says that the sum of probabilities of preference orders that would select j from B is Pr(j|B, p),
which is precisely what we observe in the data. So the partially identiﬁed set is convex and compact,
and moreover it is a polytope (a bounded intersection of a ﬁnite number of half-spaces).
    Similarly, if S = L, then it follows from Theorem 3 that (6-7) again describes the partially identiﬁed
set, this time expressed in terms of lower contour sets instead of in terms of choice probabilities. One
could also deﬁne the partially identiﬁed set in terms of upper contour sets.
   To ﬁnd extremal probabilities consistent with our observations, we consider two linear programs:
                                              ∑
Maximum Probability (MaxP) Maximize               ≻∈X    π≻ subject to (6-7).
                                             ∑
Minimum Probability (MinP) Minimize               ≻∈X   π≻ subject to (6-7).

In the above optimization problems, X can be any subset of R. Thus, these are really optimization
schema depending on the choice of S and X, encoding a variety of partial identiﬁcation problems that
ﬁnd tight bounds on the probabilities of various sets of orderings. To give some examples, if X is the
singleton {≻′ } for some ≻′ ∈ R and S is equal to either C or L, then MaxP and MinP give, respectively,
the maximum and minimum probabilities that can be assigned to the event that the consumer has
preference ordering ≻′ consistent with the data. Alternatively, consider a subset K of J , and let ≻′
be a preference ordering over the alternatives in K. Let X be the set of preference orderings on J
that rank the alternatives in K as ≻′ does. Then with S = C or S = L, MaxP and MinP give the
maximum and minimum probabilities consistent with the data that the ordering of alternatives on
the restricted subset K is given by ≻′ . One could think of many other properties of preference whose
extremal probabilities one might want to know and so could discern by this method.
   There are also other candidate families for S that generate interesting bounds. For example, one
could choose S to be a subset of C satisfying (5) and:

                          ∀B ⊆ J , [∃i ∈ B, Ci,B\i ∈ S ⇒ ∀j ∈ B, Cj,B\j ∈ S].



                                                        10
This encodes the statement that if we observe the choice probability corresponding to any item in B,
we observe the choice probabilities corresponding to all items in B. This speciﬁcation of S would be
reasonable when we have not observed the distribution of choices from all budget sets but only from
some subset of budget sets. Manski (2007) considered the special case of MaxP and MinP in which
S satisﬁed these speciﬁcations and X ∈ C \ S.4 In this case, X encodes the event that some element
j would be chosen counterfactually from a budget set that we do not observe. This probability is
constrained by the choice probabilities that we did observe. Alternatively, for any subset K of the
budget set B that one does not observe, one could let X be the set of preference orders such that the
consumer’s selection from B would lie in K.
   In all of the cases described above, ﬁnding the extremal probability consistent with the data
amounts to a linear program, and hence any linear programming algorithm can be used to attain
these probabilities. If S is equal to C or L, this program may contain very many variables and
constraints because the number of choice sets grows exponentially in the number of alternatives and
the number of preference orders grow more than exponentially. When there is a small number of
alternatives or when we have only observed choices from a limited number of choice sets, this program
may be more manageable.


3.3       Degree of Underidentiﬁcation of the Distribution of Preferences
It follows from Theorem 3 that the probability distribution p over orderings is identiﬁed when J
contains three or fewer elements. In particular, suppose that J = {1, 2, 3}. Consider the ordering ≻
such that
                                                    1 ≻ 2 ≻ 3.                                                   (9)

Then observe that
                           p(≻) = p(L2,{3} ) = Pr(2|{2, 3}, p) − Pr(2|{1, 2, 3}, p).

The ﬁrst equality follows from the fact that ≻ (given by (9)) is the unique ordering relation for which
the strict lower contour set of 2 is the singleton {3}. The second equality–establishing identiﬁcation–is
a special case of equation (3) in Theorem 3. Similar equations hold for ordering relations other than
(9). This argument fails when there are four or more choices.

Theorem 5. When there are at least four alternatives, the mass function p is not identiﬁed from data
on choice probabilities.

Proof. Choose any probability distribution p∗ with

                                             p∗ (≻) > 0        ∀ ≻∈ R
  4 The   program considered by Manski is, however, more general in the sense that he allows for the possibility that
agents make choices in an “irrational" way, in the sense that they choose in a way inconsistent with any preference
ordering.


                                                          11
and consider the system of equations and inequalities:
                       ∑
                               π≻ = p∗ (Lj,K )                    ∀K ⊆ J , ∀j ̸∈ K                  (10)
                      ≻∈Lj,K
                      ∑
                            π≻ = 1                                                                  (11)
                      ≻∈R

                     π≻ ≥ 0                                               ∀ ≻∈ R.                   (12)

This system is just (6-7) when S = L. As mentioned above, part 2 of Theorem 3 implies that any
feasible solution π = (π≻ :≻∈ R) to this system corresponds to a probability distribution over R
that cannot be distinguished from p∗ . By construction, (10-12) has at least one feasible solution π ∗ ,
                                                         ∗
namely the true distribution of preferences satisfying π≻  = p∗ (≻), ∀ ≻∈ R. The system (10-11)
contains J2J−1 + 1 equations and J! unknowns. J! > J2J−1 + 1 as soon as J ≥ 5, implying that
(10-11) has inﬁnitely many solutions. By construction, π ∗ satisﬁes all the conditions (12) with strict
inequalities. Because one can ﬁnd solutions π to (10-11) distinct from π ∗ but arbitrarily close to π ∗ ,
it is possible to ﬁnd a solution π to (10-11) that is distinct from π ∗ and that also satisﬁes (12).
     To extend this argument to the case J = 4, we argue that if J ≥ 3, then at most J(2J−1 − 3) + 3
equations in (10-11) are linearly independent. This is proven as a lemma in the appendix. Observe
ﬁnally that J! > J(2J−1 − 3) + 3 when J = 4.

   A typical demand estimation problem in the empirical literature considers only choice probabilities
for consumers facing a single budget set B. The structural parameters of the model, p, will not be
identiﬁed from data using a budget set B. The underidentiﬁcation problem is rather severe. We can
view equation (1) as a system of linear equations with J! unknowns. The number of moments is easy
to calculate. If a budget set B has n elements, then there are n moments corresponding to the choice
probabilities P (j | B, p), j ∈ B. If n > 2, n ≪ J!. Not surprisingly, identiﬁcation is hopeless without
variation in B.
   Now consider an econometrician who has access to data on choice probabilities for consumers with
the same measure p facing diﬀerent choice sets B. This could represent diﬀerent geographic markets
or the same market at diﬀerent points in time. It could also represent experimental data. A necessary
condition for the model to be identiﬁed is that the number of unknowns be no greater than the number
of equations. The number of unknowns is still the probabilities of the J! orderings. The number of
                                              ( )
moments for each budget size n is equal to the Jn budgets B of size n times the number of products
n. Observing all possible budgets of all possible sizes gives a total number of moments of

                                 ∑     ( ) ( J     )
                                            2 − 2 J! ( J−1    )
                                  J
                                        J
                                     n    =            = 2 − 1 J.
                                 n=2
                                        n   2 (J − 1)!

Table 1 lists the number of unknowns and market share moments and demonstrates that only models


                                                   12
                             Table 1: Number of Orderings and Moments
                                                               ∑J
                                                                   ( )
                             Choices Orderings, J! Moments,       n Jn
                                                                    n=2
                             2          2                2
                             3          6                9
                             4          24               28
                             5          120              75
                             6          720              186
                             7          5040             441
                             8          40,320           1016
                             9          362,880          2295


with four or less choices can be identiﬁed using aggregate market shares, with all possible budget sets
represented. In fact, as we show above, when J = 4 the model is also not identiﬁed because not all
moments mentioned above are independent of one another. Lemma 12 in the appendix shows that
when J ≥ 3, at most J(2J−1 − 3) + 3 moments are independent. So the model is identiﬁed only when
J ≤ 3.
   The degree of underidentiﬁcation becomes quite severe as the number of choices increases. When
there are 7 choices, there are 5040 probabilities on unknown orderings, but only 441 choice probabilities
to match. This implies that the J! structural primitives of our model are massively underidentiﬁed,
even with hard to ﬁnd aggregate data on the same mass of consumers facing diﬀerent choice sets.
   In any study that estimates the distribution of utility functions using data on choice probabilities
for J ≥ 4, identiﬁcation will only arise from functional form assumptions and modeling observed
product characteristics. This non-identiﬁcation result and the numbers in Table 1 show that some
restrictions are essential for the point identiﬁcation of p in discrete choice analysis.


3.4    Identiﬁcation of Preferences over Choice Sets
This section considers identiﬁcation of the induced preferences over choice sets. In particular, we
may be interested in the question of whether the substitution of some products for others will make
consumers better or worse oﬀ. It would be desirable to rank choice sets to characterize the degree to
which we can identify such rankings based on choice data. In this section, we show that when there
are three choice sets under consideration, but possibly many alternatives within each of these possibly
overlapping sets, then such a ranking is attainable from the data.
  First consider the simpler case where there are only two budget sets A and B under consideration.
Then we show that data on choice probabilities identiﬁes the proportion of consumers who are better
oﬀ under budget set A than under budget set B. This is the proportion of consumers who will vote
for a particular budget set if given the choice between A and B. This in turn identiﬁes the proportion


                                                    13
of consumers who beneﬁt from the addition, removal, or interchange of goods from a choice set. Thus,
this result is useful for welfare analysis.
    Any preference order ≻ over alternatives in J induces a preference order sets of alternatives. In
particular for two budget sets A and B, we write A ≻ B if the ≻-best alternative in A is ≻-better
than the ≻-best alternative in B. Even though we assume that ≻ is a strict preference order so that
≻ does not allow for any indiﬀerence between alternatives, ≻ may induce indiﬀerence between budget
sets, written A ∼ B. This is because the ≻-best alternative in A may be the same as the ≻-best
alternative in B.
    Let B be a family of subsets of J . By the distribution of preferences over B we mean a
probability distribution over the preference orderings over the budget sets within B. As explained
in the previous paragraph, any preference ordering over the alternatives in J induces a preference
ordering over B. So any probability distribution over preference orderings over J induces a probability
distribution over preferences orderings over B.
   We use the notation p(A ≻ B) for the probability mass of consumers who prefer choice set A to
choice set B, and p(A ∼ B) for the probability mass of consumers who are indiﬀerent between A and
B. We use similar notation for collections of three budget sets so that, for example, p(A ≻ B ∼ C) is
the probability mass of consumers who are indiﬀerent between B and C, but prefer A to both B and
C. Also, for any sets A, B ⊆ J with A ⊆ B, deﬁne
                                                    ∑
                                     Pr(A|B, p) =         Pr(j|B, p).                             (13)
                                                    j∈A


So Pr(A|B, p) is the probability that the choice alternative chosen from B will also lie in A. (13)
implies that Pr(A|B, p) is identiﬁed from choice data. We now provide a positive result about the
identiﬁcation of the distribution of preferences over choice sets. Moreover, our result provides simple
expressions for computing the desired probabilities.




                                                  14
Theorem 6. If |B| ≤ 3, then the distribution of preferences over B is identiﬁed. More speciﬁcally:

  1. If B = {A, B} (with A ̸= B), then

                                     p(A ≻ B) = Pr(A \ B | A ∪ B, p)                               (14)
                                     p(A ∼ B) = Pr(A ∩ B | A ∪ B, p).                              (15)


  2. If B = {A, B, C} where A, B and C are distinct budget sets, then:

                     p(A ≻ B ≻ C) = Pr(B \ C | B ∪ C, p) − Pr(B \ C | A ∪ B ∪ C, p)                (16)
                     p(A ≻ B ∼ C) = Pr(B ∩ C | B ∪ C, p) − Pr(B ∩ C | A ∪ B ∪ C, p)                (17)
                     p(A ∼ B ≻ C) = Pr((A ∩ B) \ C | A ∪ B ∪ C, p)                                 (18)
                     p(A ∼ B ∼ C) = Pr(A ∩ B ∩ C | A ∪ B ∪ C, p).                                  (19)


Proof. (14) follows from the fact that a consumer prefers A to B if and only if when presented with
A ∪ B, she chooses an alternative in A \ B.
   (15) follows from the fact that a consumer is indiﬀerent between A and B if and only if when
presented with A ∪ B, she chooses an alternative in A ∩ B.
   Next we argue for (16). To do so, we argue that a consumer prefers A to B to C if and only if
both (a) when presented with B ∪ C she chooses an alternative from B \ C and (b) when presented
with A ∪ B ∪ C she no longer chooses an element of B \ C. Clearly if a consumer prefers A to B to C,
she must satisfy both (a) and (b). Going in the other direction, (a) implies that the consumer prefers
B to C. (b) then implies that when we add the alternatives in A to the set B ∪ C, the consumer’s
choice changes, which implies that her favorite alternative is now in A \ (B ∪ C). So the consumer
must prefer A to B to C.
  Note ﬁnally that if a consumer satisﬁes the negation of (b), she must also satisfy (a), which explains
the subtraction in (16).
   (17) follows from the fact that a consumer prefers A to B and is indiﬀerent between B and C if
and only if both the consumer chooses an alternative from B ∩ C if presented with B ∪ C and no
longer chooses an alternative from B ∩ C from A ∪ B ∪ C. The proof is similar to that of part (16).
   (18) follows from the fact that a consumer is indiﬀerent between A and B and prefers both A and
B to C if and only if she chooses an element of A ∩ B from A ∪ B ∪ C.
   (19) follows from the fact that a consumer is indiﬀerent among A, B, and C if and only if she
chooses an element of A ∩ B ∩ C from A ∪ B ∪ C.

   Unfortunately, identiﬁcation of preferences over set of choices is not exhaustive when a researcher
wants to identify preferences over four or more sets. In particular, Theorem 5 implies that when



                                                  15
J = 4 and B = {{1}, {2}, {3}, {4}}, then preferences over B are not identiﬁed. We conjecture that
the distribution of preferences over this family B are not identiﬁed even when J > 4. That is, we
conjecture that the additional information provided in observing choice from sets including elements
not in the set {1, 2, 3, 4} would not allow us to point identify the distribution of preferences over
{1, 2, 3, 4}.


3.5     Monotonicity In Product Characteristics Does Not Help
One approach to the point identiﬁcation of p is to impose some structure on the choice set and
preferences. For instance, suppose that an alternative can be evaluated along H dimensions, where a
higher value along either dimension is known a priori to be better than a lower value. This imposes
a limited knowledge of vectors of product characteristics xj , but not a functional form as in ui,j =
x′j βi + εi,j , where βi and ϵi,j are random terms, (e.g.) in the random coeﬃcients logit.
    For each of the H dimensions, suppose that each alternative may take a value in some ﬁnite set of
integers values V = {1, . . . , V }, where higher values represent a higher quality along that dimension.
The set of possible alternatives is then:

                                                     VH = V × · · · × V .
                                                          |   {z      }
                                                                  H times


In other words, an alternative is determined by its value on each of a set of H dimensions. V H plays
the role of J in the previous analysis, so that we may write J = V H .
    In what follows, we restrict attention to preference orderings that are monotone, meaning that
for all (z1 , . . . , zH ), (y1 , . . . , yH ) ∈ V H ,

                          (z1 , . . . , zH ) < (y1 , . . . , yH ) ⇒ (z1 , . . . , zH ) ≺ (y1 , . . . , yH ),

where (z1 , . . . , zH ) < (y1 , . . . , yH ) means zh ≤ yh for all h = 1, . . . , H and zl < yl for some l = 1, . . . , H.
This form of vector ordering imposes that the agent positively values all attributes but does not impose
restrictions on how the agent trades oﬀ one characteristic versus another. Note also that we now have
more data (observed product characteristics), but the preference orderings ≺ are now deﬁned on
all combinations of product characteristics. So both the data and the unknown distribution p are
higher-dimensional objects than before.
    Below we will also discuss the case where diﬀerent attributes take on diﬀerent sets of values so that
for each attribute h the possible set of values is Vh = {1, . . . , Vh }. Note that given that attributes take
on ﬁnitely many values, it is without loss of generality that the set of attributes is a set of consecutive
integers starting with 1. We also discuss the case where the set of possible alternatives J is not equal
to V H , but rather that J ⊆ V H .



                                                                 16
Deﬁnition 7. An antichain is a subset A of V H such that for all z, y ∈ A with z ̸= y, it is neither
the case that z < y nor that y < z.

   In words, an antichain is a collection of pairwise unordered bundles. Let α(H, V ) be the maximum
size antichain, which is a function of the number H of product characteristics and the number V of
possible values taken on by each characteristic. Imposing monotonicity is not suﬃcient for the point
identiﬁcation of the distribution of preference orderings.

Theorem 8. If α(H, V ) > 3, then the distribution of preferences p is not identiﬁed if all preference
orderings are monotone.

Proof. Let T be an antichain of size α(H, V ) and deﬁne

                                      S = {x ∈ V H : ∃y ∈ T, x < y}
                                      U = {z ∈ V H : ∃y ∈ T, y < z}.

We now argue that {S, T, U } is a partition of V H . This means that (i) the sets S, T, and U are
pairwise disjoint and that (ii) S ∪ T ∪ U = V H . To establish (i), ﬁrst note that the deﬁnitions of S
and U and the fact that T is an antichain imply that S ∩ T = ∅ and U ∩ T = ∅. Next, assume for
contradiction that there exists y ∈ S ∩ U . Then the deﬁnitions of S and U imply that there exists
x ∈ T such that x < y and there exists z ∈ T such that y < z. But then x < z, contradicting the
assumption that T is an antichain. This establishes (i). Next, assume for contradiction that there
exists x ∈ V H \ (S ∪ T ∪ U ). It follows that T ∪ {x} is an antichain, contradicting the maximality of
T . This establishes (ii).
  Let ≻s (resp., ≻u ) be a monotone preference ordering on S (resp., U ). Let M be the set of
monotone preference relations on V H , and deﬁne
                                                                               
                   
                                      
                                          x ∈ S and y ∈ T               or   
                                                                                 
                                                                                  
                   
                                      
                                                                             
                                                                                 
                                                                                  
                   
                                      
                                                                                
                                       x ∈ S and y ∈ U                 or   
                                                                                 
                                                                                  
                                    H
               L := ≻∈ M : ∀x, y ∈ V ,     x ∈ T and y ∈ U               or   ⇒y≻x .              (20)
                   
                                      
                                                                           
                                                                                 
                                                                                  
                   
                                      
                                        x, y ∈ S and y ≻s x             or 
                                                                                 
                                                                                  
                   
                                      
                                                                           
                                                                                 
                                                                                  
                                                                               
                                         x, y ∈ U and y ≻u x

By construction, L ⊆ M. We can associate with each preference ≻ over T the preference ≻′ in L that
satisﬁes

                         x ≻′ y ⇔ x ≻ y                                ∀x, y ∈ T.                 (21)

Because any preference comparison involving ≻′ is determined by (21) if x, y ∈ T , and by (20)
otherwise, ≻ completely determines a preference ordering ≺′ in L.


                                                   17
   Because T is an antichain, monotonicity imposes no constraints on preferences over T . So insofar as
we are interested in preferences over T , we can identify T with the set J ′ := {1, . . . , α(H, V )} through
an arbitrary bijection f mapping J ′ onto T , and associate any preference relation over T with a
preference relation over J ′ . This induces a bijection between probability measures over preferences
on J ′ and probability measures over preferences in L via (21). To see this, for any probability measure
p over preferences over J ′ , there is a probability measure p′ over L satisfying p(≻) = p′ (≻′ ), where
≻′ is the order in L corresponding to the order ≻ on J ′ .
   We now explore the properties a probability measure p′ on L must have. For any B ⊆ V H with
B ̸= ∅, we can consider three possibilities: (i) B ∩ U ̸= ∅, (ii) B ⊆ S, and (iii) B ∩ U = ∅, B ̸⊆ S. In
case (i), any probability measure p on L will be such that the unique ≻u -maximal element in B will
be chosen with probability 1. This element must be in U because of the deﬁnitions of U and L. In
case (ii), any probability measure p on L will be such that the unique ≻s -maximal element in B will
be chosen with probability 1, by the deﬁnition of L. In case (iii), for any probability measure p′ on L,
Pr(j|B, p′ ) = 0 for all j ∈ B \ T , and Pr(j|B, p′ ) = Pr(j|B ∩ T, p′ ) for all j ∈ B ∩ T , by the deﬁnitions
of T and L. It follows that for a probability measure p′ on L, in order to describe Pr(j|B, p′ ) for all
B ⊆ V H , it is suﬃcient to specify Pr(j|B, p′ ) for all B ⊆ T .
    Given this, for any probability measure p on preference relations over J ′ and corresponding prob-
ability measure p′ over L, and B ⊆ J ′ and j ∈ B,

                                 Pr(j|B, p) = Pr(f (j)|{f (i) : i ∈ B}, p′ ),

where f is the bijection introduced previously. It now follows from Theorem 5 that if α(H, J) > 3,
the distribution p′ in the monotone random ordering model is not identiﬁed, because otherwise the
distribution p would be identiﬁed in the non-monotone model when the set of alternatives is of size
greater than 3.

Corollary 9. The distribution p over monotone preference orderings is not identiﬁed when any of

   • H > 3 and V ≥ 2, or

   • H = 3 and V > 2, or

   • H = 2 and V > 3.

Proof. This follows from the fact that all three conditions imply the existence of an antichain which
more than three elements. These facts can be algebraically veriﬁed.

    In other words the corollary says that with only a small number of characteristics (between two and
four) and a small number of possible values per characteristic (between two and four), the distribution
of preferences is not identiﬁed, even when we know that preferences are monotone in characteristics.


                                                     18
The problem only becomes more severe when the number of characteristics or the number of possible
values per characteristic grows.
Remark 10. Theorem 8, which applies to sets of the form V H under the componentwise ordering, can
be generalized to arbitrary (ﬁnite) partially ordered choice sets. For any set of alternatives J ′ , and
an arbitrary partial ordering5 ≤ on the set of alternatives J , we can deﬁne a preference order ≺ to
be ≤-monotone if:6

                                 x<y⇒x≺y                                         ∀x, y ∈ J .        (22)

Deﬁne a ≤-monotone probability distribution p to be a p where only preference orderings that are
≤-monotone receive positive probability. Then, using an argument essentially identical to the proof
of Theorem 8, we can show that whenever ≤ allows for an antichain of size greater than three, the
≤-monotone probability distribution p is not identiﬁed.
   Some special cases are worth mentioning. When each characteristic h may take on a diﬀerent
                                                         ∏
number of values Vh so that the choice set is of the form h∈H Vh where Vh = {1, . . . , Vh }, then the
choice set is a partially ordered set, and so identiﬁcation fails whenever there is an antichain of size
greater than three. Likewise, if some combination of characteristics are impossible or never present
so that J is a proper subset of V H , then again J is a partially ordered set, and identiﬁcation fails
whenever there is an antichain of size greater than three.


4        Prior Solutions for Point Identiﬁcation
This section explores two sets of additional sources of data than can be brought to bear to restore point
identiﬁcation of p. These results are known in the literature, but referencing them here complements
our non-identiﬁcation results with solutions for point identiﬁcation.


4.1       Panel Data on Individual Choices
Data on choice probabilities for the same population facing budget set variation are not enough to
identify the population weights on the J! orderings. Following the literature on economic theory, one
solution is to consider panel data on individual consumers facing choice set variation. We assume that
the consumers preferences remain constant over time, but the consumer may face a diﬀerent choice
set Bt in each period t. Let ji,t be the choice of agent i in period t. Importantly, compared to the
previous section, we assume the data contain a panel identiﬁer i so that we can track the consumer’s
    5 Recall  that a partial ordering is a reﬂexive, antisymmetric, and transitive relation.
    6<   is the irreﬂexive part of ≤:
                                                  x < y ⇔ (x ≤ y and x ̸= y)
.



                                                              19
choices over time. Let (ji,1 , ..., ji,T ) denote the string of choices of agent i in periods t = 1, . . . , T .
For simplicity, we assume all agents face the same choice sets Bt in period t. Our data is now the
probability of each string, or Pr (j1 , ..., jT |B1 , ..., BT , p). There is no identiﬁcation gain from observing
the same budget set twice, so we exclude duplicate budget sets.
   Reasoning as in the previous linear-in-probabilities model (1) it must be the case that
                                                       ∑
               Pr (j1 , ..., jT |B1 , ..., BT , p) =       p (≻) 1 {for all t, jt ≻ jt′ for all jt′ ∈ Bt } .   (23)
                                                       ≻∈R


Notice how the number of moments has just dramatically increased. With aggregate market shares we
             ∑J  ( ) (          )
have at most    n Jn = 2J−1 − 1 J moments. With individual panel data with exhaustive budget
               n=2
                                         ∏
                                         J  ( )
sets, we have an upper bound of            n Jn strings of choices, as a string of choices is one action from
                                        n=2
each budget set.
   In reality, there are exactly J! possible strings that could be generated by rational choices, as
each preference ordering corresponds to a diﬀerent string of choices. So there will be a one-to-
one correspondence between the J! empirically-observable strings and the J! unknown probabilities
captured by p (≻). As is known from classical choice theory, each individual i’s ordering can be
recovered. Indeed, observing all budget sets with two items each is enough to identify a transitive
preference relation (Richter 1971; Mas-Colell, Whinston, and Green 1995, Chapter 1).
   There is another approach we may take to identify p using cross sectional data, which has some
conceptual similarities to panel data. We can use surveys where individuals report their entire rank-
ings. If the economist sees, for instance, the entire ranking instead of the demanded bundle, the
distribution over preference orderings is trivially identiﬁed. We note that such surveys are common
in conjoint analysis and applied marketing.


4.2    Quasi-Linear Utility and Price Variation
Section 3 showed that data on choice probabilities, even with choice set variation, is not suﬃcient to
identify p. Individual panel data with choice set variation is one solution to this problem. We next
turn to identiﬁcation through restricting preferences and price variation.
   In random utility models, such as those reviewed in the introduction and Section 2, it is common to
assume that the contribution of the (non-price) product characteristics of j is additively separable from
the contribution of a composite commodity to utility, representing income spent on goods outside the
category under study. We show that if analogous restrictions are made on utility, then the distribution
of consumer preferences is identiﬁed with price variation over time.
    We model utility from a choice as additively separable into a base component ui,j and the value of
the composite component c. In this case we redeﬁne the commodity space to be J := {1, . . . , J} × R,



                                                              20
where the second component (in R) represents the consumption of the composite commodity. R
now represents a set of preference relations over this enlarged commodity space. Assume that R is
restricted to those preference relations that can be represented by a utility function that is quasi-linear
in c and that the marginal utility of consumption is strictly positive. That is, each ≻i ∈ R can be
represented by a utility function of the form ui,j + c, where ui,j is a mapping from the set {1, ..., J}
to the reals.
   Here the additive separability of the composite commodity is the same as the transferable utility
assumption in the literature on ﬁrm behavior in markets, for example. We do not include a coeﬃcient
on c because of an innocuous scale normalization in the value of utilities, in order to rule out having
two utility functions that give the same preference ordering. Likewise, we also impose a location
normalization that ui,1 = 0 for good 1 for all consumers i. This often represents the option of not
purchasing a good in a particular category; it otherwise is a normalization.
   Each product j has a price qj , which varies across choice situations. Also, each consumer has an
income yi . Substituting these terms into ui,j + c gives ui,j + yi − qj . By the discrete choice decision
rule, yi will not aﬀect choices. As the units of utility are arbitrary, we might as well express them
in monetary units, so ui,j represents the willingness to pay for product j. The goal of the empirical
work is to use price variation to identify the distribution Fu (u2 , . . . , uJ ) of the ui,j ’s. There are still
J! orderings of the ui,j ’s, but the introduction of prices makes the distribution Fu (u2 , . . . , uJ ) of now-
cardinal willingness to pay the object of identiﬁcation. Because of our cardinalization of utility, the
same preference ordering ≻ over non-price characteristics can lead to diﬀerent willingnesses to pay.
   While specifying utility as quasi-linear in the composite commodity is restrictive, the assump-
tions is commonly made in the literature. As noted in Anderson, DePalma, and Thisse (1992), the
quasi-linear assumption is useful as it allows the economist to recover consumers preferences with-
out data on income. The assumption of quasilinear utility assumes that the marginal utility of the
composite commodity is constant. In many commonly studied product categories, such as consumer
packaged goods, this is probably a fairly reasonable approximation since the purchase price will be
small compared to income.
   Unlike many of the papers mentioned in the introduction, we do not decompose the willingness to
pay ui,j into observed covariates and error terms, such as ui,j = β1,i x1,j + . . . + βk,i xk,j + εi,j . We
do not require these combinations of functional forms and independence assumptions on the random
coeﬃcients for identiﬁcation, as is shown below.
    Based on the arguments similar to those in the previous section, it is easy to see that ﬂexible
price variation will identify the vector of ui,j ’s using panel data on individual choices for consumer
i. We shall instead address estimating the distribution Fu (u2 , . . . , uJ ) using only aggregated choice
probabilities or market shares, which corresponds to cross-sectional data on individual choice.
   Our approach of using price variation is equivalent to the special regressor approach to identiﬁcation
in the econometrics literature. See for example, Lewbel (2000), Matzkin (2007), Berry and Haile (2010)


                                                       21
and Fox and Gandhi (2010) for a few of many examples of special regressor arguments in multinomial
choice. As with these other papers, we need the vector of J prices q to have full support on RJ if the
utility functions are unrestricted. We make that assumption. Observing negative prices is only an
issue if negative utilities need to be identiﬁed.
Theorem 11. The distribution Fu (u2 , . . . , uJ ) of willingnesses to pay is identiﬁed if the vector of J
prices q has full support on RJ .
Proof. We follow the simple argument of Berry and Haile (2010). The choice probability of good 1 at
a vector of prices is
                                    Pr (1|q) = Fu (q2 − q1 , . . . , qJ − q1 ) ,

as good 1 is purchased whenever

                             0 − q1 > uj − qj or uj < qj − q1 ∀j = 2, . . . , J.

Thus, choice probabilities for each q identify the distribution Fu at each point of its evaluation.

   If suﬃcient price variation does not exist in the data, then the distribution Fu (u2 , . . . , uJ ) will be
identiﬁed only on its arguments corresponding to prices in the data. This can be seen as a form of
set identiﬁcation.


5    Conclusion
We consider the identiﬁcation of the distribution of heterogeneity in discrete choice models, using
cross-sectional data on choice probabilities or market shares. Compared to the prior empirical litera-
ture, we do not model the choices as lying in a product space of observable product characteristics.
We model individuals’ preferences using a preference ordering, which strictly ranks a ﬁnite set of al-
ternatives. The distribution of preference orderings is generally only partially identiﬁed from data on
choice probabilities at all budget sets if the number of choices is greater than three. We numerically
characterize the degree of underidentiﬁcation. Then using a linear programming approach to partial
identiﬁcation, we show how to obtain bounds on probabilities of any ordering relation consistent with
the data. This approach can also produce bounds on probabilities for various properties of preferences,
including counterfactual choice probabilities when not all choice situations are observed.
    While the distribution of preference orderings is generally only partially identiﬁed, an important
feature of demand is point identiﬁed from choice probabilities, however. We can identify consumers’
voting preferences: what proportion of consumers prefer a particular budget set B instead of a com-
peting budget set B ′ .
   The general point-identiﬁcation result for random utility models implies that identiﬁcation of these
models must rely on a space of observable product characteristics and other modeling assumptions. We


                                                        22
establish that imposing monotonicity restrictions on preferences does not restore point identiﬁcation
of the distribution of preferences, however. Using individual level panel data on choices, we show that
the distribution of preferences is point identiﬁed. Also, a quasi-utility speciﬁcation with enough price
variation can deliver point identiﬁcation of the distribution of willingnesses to pay.




                                                   23
A     Appendix
A.1      Proof of Theorem 3
First we prove part 1. We start with the set-theoretic relation
                                               ∪
                        Lj,K = Cj,K \                    Cj,K∪i ,        ∀K ⊆ J , ∀j ̸∈ K.                   (24)
                                          i∈J \(K∪j)


This follows because under ≻, K is the lower contour set of j if and only if K is contained in the lower
contour set of j (i.e., ≻∈ Cj,K ), but for all i ̸∈ (K ∪ j), K ∪ i is not contained in the lower contour
set of j (i.e., ⊁∈ Cj,K∪i ). Using an inclusion-exclusion formula, we have:

                       ∪                          ∑
                                                  n(K)
                                                                           ∑                  ∩
                 p(              Cj,K∪i ) =             (−1)s−1                          p(       Cj,K∪i )   (25)
                    i∈J \(K∪j)                    s=1                S ⊆ J \ (K ∪ j) :     i∈S
                                                                         |S| = s


                                                  ∑
                                                  n(K)
                                                                           ∑
                                           =            (−1)s−1                          p(Cj,K∪S )          (26)
                                                  s=1                S ⊆ J \ (K ∪ j) :
                                                                         |S| = s



where:
                                    n(K) := |J \ (K ∪ j)| = |J \ K| − 1

(26) follows from the set-theoretic equality:
                                            ∩
                                                  Cj,K∪i = Cj,K∪S .
                                            i∈S

                              ∪
This equality holds because       {K ∪ i : i ∈ S} = K ∪ S, so that K ∪ i is contained in the lower contour
set of j for all i ∈ S if and only if K ∪ S is contained in the lower contour set of j.
    Next observe that for all i ∈ J \ (K ∪ j), Cj,K ⊇ Cj,K∪i because if K ∪ i is contained in the lower
contour set of j, then so is K. It follows that
                                                          ∪
                                          Cj,K ⊇                    Cj,K∪i .                                 (27)
                                                    i∈J \(K∪j)




                                                          24
So,
                                                   ∪
                      p(Lj,K ) = p(Cj,K \                     Cj,K∪i )
                                              i∈J \(K∪j)
                                                          ∪
                               = p(Cj,K ) − p(                     Cj,K∪i )
                                                   i∈J \(K∪j)

                                                  ∑
                                                  n(K)
                                                                            ∑
                               = p(Cj,K ) −             (−1)s−1                           p(Cj,K∪S )   (28)
                                                  s=1                 S ⊆ J \ (K ∪ j) :
                                                                          |S| = s


                                   ∑
                                   n(K)
                                                          ∑
                               =          (−1)s                        p(Cj,K∪S ),
                                   s=0            S ⊆ J \ (K ∪ j) :
                                                         |S| = s



where the ﬁrst equality follows from (24), the second equality follows from (27), and the third equality
follows from (25-26). Note ﬁnally that, using (2), (28) is equivalent to (3), establishing part 1 of the
theorem.
    Part 2 of the theorem follows from (2) and the fact that the family of sets

                                      P := {Lj,K : K ⊇ B \ j, K ̸∋ j}

is a partition of the set Cj,K . The latter fact holds because if the lower contour set of j contains B \ j,
then the lower contour set of j is some superset of B \ j not containing j, and P contains all of the
(mutually exclusive) possibilities.


A.2      Proof of Lemma Supporting Theorem 5
Lemma 12. If J ≥ 3, then at most J(2J−1 −3)+3 of the equations in (10-11) are linearly independent.

Proof. Deﬁne H j := {1, 2, . . . , j − 1}, and consider the sets:

                                    B1 := {(j, H j ) : j = 2, . . . , J − 1}
                                    B2 := {(j, J \ j) : j = 1, . . . , J}
                                    B3 := {(j, ∅) : B = ∅, j = 1, . . . , J}.



Observe that the sets B1 , B2 , and B3 are pairwise disjoint (here we use the fact that J ≥ 3). Finally
deﬁne:
                          B0 := {(j, B) : B ⊆ J , j ̸∈ B, (j, B) ̸∈ B1 ∪ B2 ∪ B3 }



                                                            25
Consider the system of equations:
                            ∑
                                   π≻ = p∗ (Lj,B )                                  ∀(j, B) ∈ B0                           (29)
                         ≻∈Lj,B
                         ∑
                                 π≻ = 1.                                                                                   (30)
                         ≻∈R


It is straightforward to conﬁrm that (29–30) contains J(2J−1 − 3) + 3 equations. To complete the
proof, we now argue that any solution π = (π≻ :≻∈ R) to (29–30) is a solution to (10–11). So let π
be a solution to (29–30).

  1. First choose H j for j = 2, . . . , J − 1. We have:
                                        ∑                               ∑              ∑
       p∗ (Lj,H j ) = 1 −                             p∗ (Lj,B ) −                                   p∗ (Li,A )
                            B⊆J \j:|B|=j−1,B̸=H j                     {i∈J \j} {A⊆J \i:|A|=j−1}
                                        ∑                  ∑                  ∑                ∑              ∑
                  =1−                                                π≻ −                                               π≻ (31)
                            {B⊆J \j:|B|=j−1,B̸=H j } {≻∈Lj,B }              {i∈J \j} {A⊆J \i:|A|=j−1} {≻∈Lj,A }
                        ∑
                  =              π≻ .
                      ≻∈Lj,H j


     The ﬁrst and last equalities follows from the fact that

                              P :={Lj,H j } ∪ {Lj,B : B ⊆ J \ j, |B| = j − 1, B ̸= H j }
                                    ∪ {Li,A : i ∈ J \ j, A ⊆ J \ i, |A| = j − 1}

     is a partition of R. P is a partition because it speciﬁes every possible collection of the bottom
     j −1 ranked items, as well the item ranked jth from the bottom. The last equality also uses (30).
     The second equality in (31) follows from (29) and the fact that all cells Li,B of the partition P
     except Lj,H j are such that (i, B) ∈ B0 .

  2. Next choose j = 1, . . . , J. We have
                                    ∑                               ∑            ∑                     ∑
                 p∗ (Lj,J \j ) =            p∗ (Li,J \{i,j} ) =                               π≻ =               π≻ .      (32)
                                   i∈J \j                         {i∈J \j} {≻∈Li,J \{i,j} }          ≻∈Lj,J \j


     The ﬁrst and last equalities follow from the fact that

                                                P ′ := {Li,J \{i,j} : i ∈ J \ j}

     is a partition of Lj,J \j because P ′ speciﬁes all possible 2nd ranked items when the 1st ranked
     item is j. Notice that for all Li,B ∈ P ′ if i = J − 1 and j = J, then B = H j and (i, B) ∈ B1 ,


                                                            26
     but otherwise (i, B) ∈ B0 . So the second equality in (32) follows from (30) and (31).

  3. Finally consider j = 1, . . . , J. We have
                                    ∑                                 ∑           ∑                 ∑
              p∗ (Lj,∅ ) = 1 −                 p∗ (Lj,B ) = 1 −                             π≻ =            π≻ .   (33)
                                 B⊆J \j:B̸=∅                      {B⊆J \j:B̸=∅} {≻∈Lj,B }          ≻∈Lj,∅


     The ﬁrst and last equalities follow from (30) and the fact that

                                               P ′′ := {(j, B) : B ⊆ J \ j}

     is a partition of R because P ′′ speciﬁes every possible strict lower contour set of j. The second
     equality in (33) follows from (29), (31) and (32).

Arguments 1–3 imply that any feasible solution of (29–30) is a feasible solution of (10–11), completing
the proof.




                                                         27
References
     [1] Anderson, S.P., A. de Palma, and J.F. Thisse (1992), Discrete Choice Theory of Product
         Diﬀerentiation, The MIT press.
     [2] Barbera, S. and P. Pattanaik (1986), “Falmagne and the Rationalizability of Stochastic
         Choices in Terms of Random Orderings ”, Econometrica, 54, 707–715.
     [3] Bajari, P., J. Fox, K. Kim, and S. Ryan (2010), “The Random Coeﬃcient Logit Model
         is Identiﬁed ”, University of Minnesota working paper.
     [4] Berry, S., J. Levinsohn, and A. Pakes (1995), “Automobile Price in Market Equilibrium”,
         Econometrica (63), July 1995.
     [5] Berry, S. and P. Haile (2010), “Nonparametric Identiﬁcation of Multinomial Choice De-
         mand Models with Heterogeneous Consumers”, Yale University working paper.
     [6] Block, H. D. and J. Marschak (1960), “Random Orderings and Stochastic Theories
         of Responses". in I. Olkin, S. Ghurye, W. Hoeﬀding, W. Madow, and H. Man (eds)
         Contributions to Probability and Statistics, Stanford University Press.
     [7] Chiappori, P.A. and I. Komunjer (2009), “On the Nonparametric Identiﬁcation of Mul-
         tiple Choice Models”, Columbia University working paper.
     [8] Falmagne, J.C. (1978), “A Representation Theorem for Finite Random Scale Systems”,
         Journal of Mathematical Psychology, 18, 52–72.
     [9] Fishburn, P. (1992) “’Induced binary probabilities and the linear ordering polytope: a
         status report”, Mathematical Social Sciences, 23(1), 67–80.
    [10] Fishburn, P. (1998) “Stochastic Utility ”, in S. Barbara, P. Hammond, C. Seidl (eds)
         Handbook of Utility Theory, Kluwer, 273-320.
    [11] Goettler, R. (1999), “Advertising Rates, Audience Composition, and Competition in the
         Network Television Industry ”, Carnegie Mellon University working paper.
    [12] Fox, J. and A. Gandhi (2010), “Nonparametric Identiﬁcation and Estimation of Random
         Coeﬃcients in Nonlinear Economic Models”, University of Michigan working paper.
    [13] Hitsch, G.J. (2006), “An empirical model of optimal dynamic product launch and exit
         under demand uncertainty”, Marketing Science, 25(1), 25–50.
    [14] Ichimura, H. and Thompson, T.S. (1998), “Maximum likelihood estimation of a binary
         choice model with random coeﬃcients of unknown distribution”, Journal of Econometrics,
         86(2), 269–295.
    [15] Lewbel, A. (2000), “Semiparametric Qualitative Response Model Estimation with Un-
         known Heteroskedasticity or Instrumental Variables”, Journal of Econometrics, 97(1),
         145-177.
    [16] Mas-Colell, A., M.D. Whinston, and J. Green (1995), Microeconomic Theory, Oxford
         University Press.


                                            28
[17] Manski, C.F. (1977), “The Structure of Random Utility Models”, Theory and Decisions,
     8, 229–254.
[18] Manski, C.F. (1995), Identiﬁcation Problems in the Social Sciences, Cambridge, MA:
     Harvard University Press.
[19] Manski, C.F. (2003), Partial Identiﬁcation of Probability Distributions, New York:
     Springer-Verlag.
[20] Manski, C.F. (2007), “Partial Identiﬁcation of Counterfactual Choice Probabilities”, In-
     ternational Economic Review, 48(4), 1393–1410.

[21] Matzkin, R.L. (1993) “Nonparametric Identiﬁcation and Estimation of Polychotomous
     Choice Models”, Journal of Econometrics, 58, 137–168.

[22] Matzkin, R.L. (2007) “Heterogeneous Choice”, Advances in Economics and Econometrics,
     Theory and Applications, Ninth World Congress of the Econometric Society.

[23] McFadden, D. (1972), “Conditional Logit Analysis of Qualitative Choice Behavior”, Fron-
     tiers in Econometrics, 105–142, Academic Press.

[24] McFadden, D. (2005), “Revealed Stochastic Preference: A Synthesis”, Economic Theory,
     26(2), 245–264.

[25] McFadden, D. and K. Richter (1991) “Stochastic Rationality and Revealed Stochastic
     Preference”, in J. Chipman, D. McFadden, K. Richter (eds) Preferences, Uncertainty,
     and Rationality, Westview Press, 161–186.
[26] Nevo, A (2001), “Measuring Market Power in the Ready-to-Eat Cereal Industry,” Econo-
     metrica, 69(2), 307–342.
[27] Petrin, A. (2002), “Quantifying the Beneﬁts of New Products: The Case of the Minivan,”
     Journal of Political Economy, 110(4), 705–729.
[28] Richter, M. (1971), “Rational Choice”, in J. Chipman, L. Hurwicz, and H. Sonnenschein
     (eds) Preferences, Utility, and Demand, Harcourt Brace Jovanovich, Chapter 2.




                                         29
