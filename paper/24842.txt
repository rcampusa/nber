                              NBER WORKING PAPER SERIES




                A MODEL OF ADDICTION AND SOCIAL INTERACTIONS

                                           Julian Reif

                                      Working Paper 24842
                              http://www.nber.org/papers/w24842


                     NATIONAL BUREAU OF ECONOMIC RESEARCH
                              1050 Massachusetts Avenue
                                Cambridge, MA 02138
                                     July 2018




I thank Steven Durlauf, Ali Hortacsu, Anup Malani, and Derek Neal for guidance and support in
writing this paper. I also thank Jason Abaluck, Gary Becker (in memoriam), David Bradford, Jeff
Brown, Tatyana Deryugina, Hays Golden, Scott Kominers, Nolan Miller, and Gabriel Ulyssea for
useful discussions and feedback. I am grateful to the National Science Foundation for financial
support. The views expressed herein are those of the author and do not necessarily reflect the
views of the National Bureau of Economic Research.

NBER working papers are circulated for discussion and comment purposes. They have not been
peer-reviewed or been subject to the review by the NBER Board of Directors that accompanies
official NBER publications.

© 2018 by Julian Reif. All rights reserved. Short sections of text, not to exceed two paragraphs,
may be quoted without explicit permission provided that full credit, including © notice, is given
to the source.
A Model of Addiction and Social Interactions
Julian Reif
NBER Working Paper No. 24842
July 2018
JEL No. D11,D12,H0

                                           ABSTRACT

Many consumer behaviors are both addictive and social. Understanding how these two
phenomena interact informs basic models of human behavior, and matters for policymakers when
the behavior is regulated. I develop a new model of demand that incorporates both addiction and
social interactions and show that, under certain conditions, social interactions reinforce the effects
of addiction. I also show how the dynamics introduced by addiction can solve the pernicious
problem of identifying the causal effects of social interactions. I then use the model to illustrate a
new and important identification problem for studies of social interactions: existing estimates
cannot be used to draw welfare conclusions or even to deduce whether social interactions
increase aggregate demand. Finally, I develop a method that allows researchers to distinguish
between two common forms of social interactions and draw welfare conclusions.


Julian Reif
Department of Finance
University of Illinois at Urbana-Champaign
515 E. Gregory Street
Champaign, IL 61820
and NBER
jreif@illinois.edu
I       Introduction
Many behaviors such as smoking, drinking, and exercising are widely considered to
be both addictive and social in the sense that consumer utility depends both on one’s
own past consumption and on the current consumption of other people. Despite the
fact that these two phenomena often coexist–particularly among “sin goods”–they
are usually examined in isolation.1 This paper fills this gap by developing the first
model of demand that accounts for both addiction and social interactions.
    Combining these features into one unified model reveals that social interactions
sometimes, but not always, reinforce the effects of addiction. The model also helps to
solve a pernicious econometric identification problem that makes research on social
interactions challenging: the difficulty of distinguishing an individual reacting to her
group’s actions from other alternative explanations. This phenomenon is known as
the “reflection problem” (Manski, 1993).
    I show how the dynamics that arise from addiction allow the researcher to circum-
vent the reflection problem. The intuition follows from two simple observations. First,
addiction causes group consumption to be related to past determinants of demand.
Second, although demand shocks are almost certainly correlated across different in-
dividuals, resulting in the classical reflection problem, it is often plausible to assume
that they are uncorrelated with past determinants of demand (e.g., Fujiwara et al.,
2016) Thus, when addiction is present past determinants of demand may be used as
instruments to identify social interactions. By a similar argument, if individuals are
forward looking then future determinants of demand may also be valid instruments.
    The unified model also reveals a second, deeper identification problem: different
types of social interactions can have very different effects on demand and welfare
and yet generate the same demand equation. Thus, a researcher who identifies the
presence of social interactions cannot conduct welfare analysis or even determine
    1
    Prominent studies of addiction include Becker et al. (1994), Chaloupka (1991), Crawford (2010),
Demuynck and Verriest (2013), and Gruber and Koszegi (2001). A less than comprehensive list
of social interactions studies includes the following. For theory, see Bernheim (1994), Bisin et al.
(2006), Brock and Durlauf (2010), and Zanella (2007). Empirical analyses of social interactions have
examined their effect on alcohol (Kremer and Levy, 2008); crime (Glaeser et al., 1996); disadvantaged
youth (Case and Katz, 1991), grades (Sacerdote, 2001), obesity (Blanchflower et al., 2009; Christakis
and Fowler, 2007; Fortin and Yazbeck, 2015); and smoking (Fletcher, 2010; Krauth, 2007; Powell
et al., 2005). Becker (1992) notes that addiction and social interactions can reinforce each other.
Alessie and Kapteyn (1991) and Woittiez and Kapteyn (1998) estimate consumer demand and female
labor supply, respectively, as a function of habit formation and preference interdependence.



                                                 2
whether those interactions cause an increase in total consumption. I derive a set of
assumptions under which one can distinguish between two common forms of social
interactions, “conformity” and “spillovers”, and draw welfare conclusions.2 This is
important for public policy because many of the goods that exhibit addiction and
social interactions are heavily regulated (e.g., by “sin taxes”). Accurately assessing
the welfare implications of these regulations requires properly modeling consumer
demand for these goods.
    Both conformity and spillovers generate the same “linear-in-means” model of de-
mand estimated by many studies of social interactions, but their effects are quite
different. Conformity, a desire to consume at the same level as others, reduces the
dispersion of consumption within a group by discouraging individual heterogeneity.
Thus, it increases the consumption of some individuals and reduces the consumption
of others. The net effect on demand is zero, so conformity does not reinforce the
effects of addiction. By contrast, spillovers, where consumption by others increases
the marginal value of one’s own consumption, increases everyone’s consumption and
exacerbates the effects of addiction. Moreover, spillovers generates positive external-
ities; conformity does not. Thus, it is beneficial to subsidize behaviors that exhibit
spillovers but not ones that exhibit conformity. Despite these differences, I show that
researchers can still calculate elasticities without having to make assumptions about
the form of social interactions.
    This paper makes two primary contributions to the literature. First, it proposes
a novel solution to the reflection problem by exploiting the dynamic properties of
addiction. There is a large literature concerned with solving this problem (Brock and
Durlauf, 2001; Graham, 2008; Manski, 1993, 2000). It is usually difficult to justify a
proposed instrument in static settings because variables that affect group consump-
tion generally also affect individual consumption and thus do not satisfy the exclusion
restriction. My proposed method, by contrast, is based on the dynamic properties of
addiction and has sound theoretical justification. Although I focus on addictive goods,
this method could be generalized to other settings where consumption is dynamic.
    Second, this paper is among the first to investigate the form of social interactions.
Most of the existing literature is concerned with merely identifying their presence,3
  2
     See Brock and Durlauf (2001) and the many cites therein for more on these two forms of
interactions.
   3
     One notable exception is De Giorgi and Pellizzari (2014).



                                            3
which is unfortunate because the form of social interactions has important implica-
tions for empirical research in a variety of contexts. For example, suppose a researcher
estimates that a student’s study habits are positively related to her classmates’ study
habits.4 Unless she has data on a control group where social interactions are absent,
the researcher cannot infer whether these interactions cause everyone to study more or
whether they cause bad students to study more and good students to study less. She
thus cannot recommend whether students should in general study alone or together.
However, if she is willing to assume some degree of preference homogeneity–for exam-
ple, that distance from a study center has the same negative effects on studying for all
students–then my model shows that she can distinguish between these two scenarios
because the effect of distance on studying is different under conformity than under
spillovers. This method, which consists of a simple comparison of estimates across
different groups, is quite general and does not require that the good in question be
addictive.
    The rest of this paper is organized as follows. Section II presents the model and
main theoretical results. Section III discusses identification. Section IV concludes.


II      Model
A consumer’s instantaneous utility is represented by the function

                                     V (ait , Sit , xit , cit , Et [at ])

where ait is consumer i’s consumption of an addictive good in period t, Sit is the
consumer’s stock of past consumption of good a, and xit represents other factors
that affect utility (e.g., education or advertising). The composite good cit is taken as
numeraire. The consumer’s time-t expectation of the mean consumption of the addic-
tive good by other consumers in her reference group is Et [at ].5 I assume throughout
that the reference group is “large”in the sense that an individual’s contribution to the
mean is negligible. I impose the standard equilibrium condition that consumer beliefs
and behaviors are self-consistent, and assume that consumers take other consumers’
   4
      There is a large literature on peer effects and education. See Carrell et al. (2009), Carrell et al.
(2013), Lavy et al. (2012), and Zimmerman (2003) for examples.
    5
      This formulation implicitly assumes that individuals are affected equally and symmetrically by
all other individuals in the group.


                                                      4
consumption decisions as given (Blume et al. 2010). The stock of past consumption
evolves according to the equation

                                        Sit+1 = (1 − d) (Sit + ait )                             (1)

where d ∈ (0, 1) is the rate of depreciation.
  The consumer’s problem is
                                        ∞
                                        X
                             max              β t−1 V (ait , Sit , xit , cit , Et [at ])         (2)
                             ait ,cit
                                        t=1


where Si1 is given and β < 1 is the consumer’s discount rate. The consumer’s budget
constraint is                    ∞
                                X
                         Ai0 =      (1 + r)−(t−1) (cit + pt ait )               (3)
                                          t=1

where Ai0 is the present value of wealth, r is the interest rate, and pt denotes the price
of the addictive good. I assume the consumer’s discount rate is equal to 1/ (1 + r).
All variables in this problem vary at the individual level except for price, mean con-
sumption, and the discount and interest rates. I drop the i subscript for the remainder
of this section for notational ease.
    As in Brock and Durlauf (2001), I assume instantaneous utility can be decomposed
into a private and a social component:

                 V (at , St , xt , ct , Et [at ]) = U (at , St , xt , ct ) + G (at , Et [at ])   (4)

I assume that private utility is concave and quadratic:

                                    1
                                         uaa a2t + uss St2 + uxx x2t + ucc c2t + uas at St
                                                                              
            U (at , St , xt , ct ) = −                                                           (5)
                                    2
                                + uax at xt + uac at ct + usx St xt + usc St ct + uxc xt ct
                                + ua at + us St + ux xt + uc ct

This is a standard assumption made in the addiction literature.6 The quadratic form
captures the dynamic aspects of the model and delivers linear first-order conditions
  6
    See Becker and Murphy (1988), Becker et al. (1994), Chaloupka (1991), and Gruber and Koszegi
(2001).



                                                           5
that aid analysis and allow for empirical estimation.7 Addictive behavior is driven
by the positive coefficient uas , which captures the strength of intertemporal comple-
mentarity.
   I consider two different parametric representations of social utility, “conformity”
and “spillovers,” which have been employed in prior studies (Binder and Pesaran,
2001; Blanchflower et al., 2009; Brock and Durlauf, 2001; Glaeser and Scheinkman,
2002). Conformity penalizes consumers for deviating from the mean consumption in
their group:
                                               1
                          G (at , Et [at ]) = − bg (at − Et [at ])2                (6)
                                               2
Spillovers is defined as a linear interaction between individual consumption and ex-
pected average consumption:

                                   G (at , Et [at ]) = bg at Et [at ]                              (7)

The parameter bg captures the strength of social interactions in both specifications
and is assumed to be positive:8

                                    ∂ 2 G (at , Et [at ])
                                                          = bg > 0
                                        ∂at ∂Et [at ]

Brock and Durlauf (2001) show that (6) and (7) result in the same choice problem for
the individual when at is binary. This is not so in this model because at is continuous.9
As we shall see, this causes conformity and spillovers to have very different effects on
consumption.
   The forward-looking addiction model studied in Becker and Murphy (1988) corre-
sponds to the special case where G (at , Et [at ]) = 0 and thus is embedded within the
more general framework presented in this paper. I will focus my discussion on the
most novel parts of the model, namely the relationship between social interactions
and addiction and the effects of social interactions on aggregate consumption.
   7
     Alternatively, one can allow utility to be general and take a linear approximation to the first-
order conditions to analyze dynamics near a steady state. This would yield the same equations I
present here, although note that non-quadratic utility may result in multiple equilibria.
   8
     A negative bg would indicate a preference for nonconformity in (6). It would signify interpersonal
substitution rather than complementarity in the case of (7).
   9
     Another difference is that the discrete choice model of Brock and Durlauf (2001) can exhibit
multiple equilibria. Blume et al. (2010) provide a game-theoretic derivation of the existence and
uniqueness of equilibria in a linear-in-means model with quadratic utility preferences.


                                                   6
    Intuitively, an increase in conformity causes individuals to place more weight on
the average consumption in their group and less weight on their own idiosyncratic
preferences. This compresses the distribution of consumption within the group by
causing individuals with preferences for a high level of consumption to consume less
and individuals with preferences for a low level of consumption to consume more.
There is no effect on aggregate consumption because these two opposing effects cancel
each other out. Spillovers, by contrast, increases everyone’s consumption.
    Section II.A will demonstrate formally how social interactions alter consumption
patterns and potentially reinforce addiction. Section II.B will show that social inter-
actions can generate externalities that cause equilibrium to be inefficient, even when
addiction is rational.


II.A     Solving the model
Solving the first-order condition for ct and substituting the result into (5) allows one
to rewrite the consumer’s problem (2) as a maximization problem in at only:
                                     ∞
                                     X
                              max          β t−1 V ∗ (at , St , xt , Et [at ])           (8)
                                at
                                     t=1


where

                                              1
              V ∗ (at , St , xt , Et [at ]) = −   baa a2t + bss St2 + bxx x2t
                                                                              
                                                                                         (9)
                                              2
                                         + bas at St + bax at xt + bsx St xt
                                        ba at + bs St + bx xt + bk + G (at , Et [at ])

The coefficients in (9) capture the effect of the input variables on the consumer’s utility
assuming optimal consumption of the numeraire good ct . The coefficients baa , bss ,
and bxx are necessarily positive due to the assumed concavity of private utility. The
coefficient bas measures the effect of the stock of past consumption on the marginal
utility of current consumption. The appendix derives the precise condition required
for bas to be positive. A sufficient condition is that consumer utility be additively
separable in at and ct . I follow the addiction literature and assume that bas > 0.
    Consumption is dynamic in this framework because utility depends on both cur-
rent and past consumption. Moreover, forward-looking (or “rational”) individuals


                                                     7
will behave differently from myopic ones. Becker et al. (1994) provide evidence in
favor of rationality in the context of cigarette addiction, but Gruber and Koszegi
(2001) argue that it is difficult for empirical studies to distinguish rationality from
alternative models such as hyperbolic discounting. The main contribution of this
paper–showing how to identify social interactions using addiction and how to distin-
guish conformity from spillovers–does not rely on how consumers discount the future.
Indeed, the results hold even if consumers are myopic. Thus, for ease of exposition
I first derive the model under a myopia assumption and then later generalize to a
forward-looking framework. Detailed derivations are available in Appendix A.

II.A.1   Myopic consumers

Conformity
    Analytically, the myopia assumption corresponds to ignoring any forward-looking
terms in the first-order condition when solving the consumer’s problem. Assuming
the conformity specification (6) and solving the consumer’s problem (8) subject to
the law of motion for the stock of past consumption (1) and the budget constraint
(3) yields the following demand equation:

                        at = αm St + γm at + πm pt + δm xt + km                    (10)

where

                                            bas
                                  αm =              >0
                                         bg + baa
                                            bg
                                  γm =              >0
                                         bg + baa
                                            −λ
                                  πm =              <0
                                         bg + baa
                                            bax
                                  δm =              Q0
                                         bg + baa
                                            ba
                                  km =              >0
                                         bg + baa

and λ is the marginal utility of wealth. The positive coefficient αm indicates that, all
else equal, an increase in the stock of past consumption increases current consumption,
i.e., the good is addictive. Individual consumption is positively related to group


                                           8
consumption (γm > 0) and negatively related to price (πm < 0). Each coefficient in
equation (10) is affected by the parameter governing the strength of conformity, bg .
   Define an individual’s expected steady-state level of consumption as

                                    a∗ = S ∗ d/ (1 − d)

Plugging this into (10) and using that E[a∗ ] = a∗ yields

                                 E [πm pt + δm xt ] + km
                             a∗ =
                                 1 − αm (1 − d)/d − γm
                                 E [−λpt + bax xt ] + ba
                               =
                                   baa − bas (1 − d)/d

where the expectation is taken with respect to the random variables pt and xt . Stable
demand requires that baa −bas (1−d)/d > 0. Violating this condition leads to unstable
behavior where demand increases uncontrollably. We see here the familiar result from
the literature on addiction that these unstable states are mostly likely to occur with
highly addictive goods (i.e., goods with large values for bas ). Conformity, however,
plays no role in determining the level or stability of demand.
    What effect does conformity have, then? It reduces dispersion, as illustrated in
Figure 1. Comparing Figure 1a to Figure 1b shows that conformity compresses the
distribution of consumption relative to a setting with no social interactions.




                                            9
                                                                                 Figure 1: The effect of conformity and spillovers on consumption


                                          (a) No social interactions                                                                                (b) Conformity                                                                                       (c) Spillovers
                     150                                                                                               150                                                                                              150


                     125                                                                                               125                                                                                              125
      Consumption (at)




                                                                                                        Consumption (at)




                                                                                                                                                                                                         Consumption (at)
                     100                                                                                               100                                                                                              100


                         75                                                                                                75                                                                                               75
10




                         50                                                                                                50                                                                                               50


                         25                                                                                                25                                                                                               25


                         0                                                                                                 0                                                                                                0
                              0   1   2    3   4   5   6   7   8   9 10 11 12 13 14 15 16 17 18 19 20                           0   1   2   3   4   5   6   7   8   9 10 11 12 13 14 15 16 17 18 19 20                           0   1   2   3   4   5   6   7   8   9 10 11 12 13 14 15 16 17 18 19 20
                                                                      t                                                                                               t                                                                                                t


     Notes: These graphs display the results of three simulations. The vertical lines display the range (minimum to maximum) of consumption for a group of consumers
     for each period t. Panel (a) displays consumption for an addictive good that exhibits no social interactions. Panel (b) adds conformity to the simulation. Panel (c)
     adds spillovers instead of conformity to the simulation. All other factors are held constant. See Appendix B for details.
Spillovers
   Solving the model assuming the spillovers specification (7) yields

                                 0       0        0        0       0
                           at = αm St + γm at + π m p t + δm xt + km                           (11)

where

                                          0      bas
                                         αm =        >0
                                                 baa
                                           0     bg
                                          γm =       >0
                                                 baa
                                          0      −λ
                                         πm =        <0
                                                 baa
                                           0     bax
                                          δm =       Q0
                                                 baa
                                           0     ba
                                          km =       >0
                                                 baa

As in the case of conformity, consumption is positively related to the stock of past
consumption and to group consumption, and negatively related to price.
   Expected consumption is equal to
                                           0         0          0
                                      E [πm   p t + δm x t ] + km
                                 a∗ =        0 (1 − d)/d − γ 0
                                      1 − αm                     m
                                       E [−λpt + bax xt ] + ba
                                    =
                                      baa − bas (1 − d)/d − bg

Unlike conformity, the parameter governing the strength of spillovers, bg , enters ex-
plicitly into the formula for expected consumption by affecting the condition required
for stable demand: baa − bas (1 − d)/d − bg > 0.10 In other words, demand stability
imposes a limit on the combined strength of addiction and social interactions. Strong
spillovers can cause an otherwise stable addiction to become unstable.
    Spillovers act as a multiplier on demand. This effect is illustrated in Figure 1c.
This differs significantly from the case of conformity, which has no effect on average
consumption.
  10
    If addiction is absent, then this condition reduces to the “moderate social influence” condition
of Glaeser and Scheinkman (2002).




                                                 11
II.A.2   Forward-looking consumers

For simplicity, I assume that consumers have perfect foresight, which will generate
clean analytical expressions. Some critics argue that perfect foresight implies that ad-
dicts should never express regret and that there is no scope for public policy (Akerlof,
1991; Winston, 1980). Gruber and Koszegi (2001) show, however, that perfect fore-
sight is compatible with time inconsistency and thus also compatible with beneficial
public policies that alter consumer behavior. Furthermore, Orphanides and Zervos
(1995) relax the assumption of perfect foresight and show that the main empirical
predictions of the Becker and Murphy (1988) addiction model remain unchanged.

Conformity
   Relaxing the assumption that consumers are myopic yields the forward-looking
demand equation:

     at = α1 St + α2 at+1 + γ1 at + γ2 at+1 + π1 pt + π2 pt+1 + δ1 xt + δ2 xt+1 + k   (12)

This demand model retains the main results from the literature on forward-looking
addiction. For example, current consumption is positively related to future consump-
tion and future prices. See the appendix for a complete derivation and additional
discussion of how this model compares to the standard addiction model.
    As in the myopic case, conformity (which operates through the parameter bg ) has
no effect on the expected steady-state level of consumption, a∗ :

                                E [(π1 + π2 )pt + (δ1 + δ2 )xt ] + k
                         a∗ =
                                1 − α1 (1 − d)/d − α2 − γ1 − γ2
                            = E [πp pt + δx xt ] + kk                                 (13)




                                             12
where

               d (1 − β + dβ) λ
        πp = −
                       ξ
             dbax + d (1 − d) β (bsx − bax )
        δx =
                           ξ
             d (1 − (1 − d) β) ba + d (1 − d) βbs
        kk =
                              ξ
          ξ = d (1 − (1 − d) β) baa + (1 − d)2 βbss − (1 − d) (1 − (1 − 2d) β) bas

    Demand stability requires that ξ > 0. Because consumers are forward-looking,
stability now depends on the negative effect that current consumption has on future
utility, as captured by the parameter bss . But, just as in the myopic case, conformity
plays no role in determining the level or stability of demand.

Spillovers
   Under the spillovers specification (7), the forward-looking demand equation be-
comes:

     at = α10 St + α20 at+1 + γ10 at + γ20 at+1 + π10 pt + π20 pt+1 + δ10 xt + δ20 xt+1 + k 0   (14)

The appendix shows that only the coefficients on mean consumption, γ10 and γ20 , are
affected by the strength of social interactions, bg . It is easily shown that ∂at /∂bg > 0,
i.e., an increase in the strength of spillovers increases aggregate consumption, just
like the myopic case.
     The condition required for dynamic stability is ξ − d (1 − (1 − d) β) bg > 0, which
is identical to the condition presented above for conformity except for the addition of a
second term involving the parameter bg . This mirrors the results presented for myopic
consumers: social interactions affect the level of demand, and demand stability, only
when they take the form of spillovers.


II.B     Welfare
Consumption can be suboptimal if consumers are not fully rational or if they fail to
internalize externalities attributable to their own consumption. For example, I show
in the appendix that the first-order condition for the forward-looking consumer’s


                                                  13
problem is

                                                                   ∂St+j
                          0 = Va∗ (t) − λpt + Σ∞    j ∗
                                               j=1 β Vs (t + j)                                (15)
                                                                    ∂at

where Va∗ (t) and Vs∗ (t + j) represent the partial derivative of the optimized utility
function V ∗ with respect to at and St+j , respectively. Myopic consumers fail to
account for the effect of their current consumption on their future discounted utility,
which is represented by the last term on the right-hand side of (15). The sign of this
term is ambiguous and depends on coefficients in the utility function (9).11 Thus, the
myopic consumer’s suboptimal consumption can in general be higher or lower than
the forward-looking consumer’s optimal consumption.12
    Both myopic and forward-looking consumers fail to internalize how their con-
sumption affects other individuals in their reference group. Let equilibrium average
consumption be a∗t . Direct examination of equations (6) and (7) reveals that, in equi-
librium, conformity generates no net externality while spillovers generate a positive
externality:

                       ∂G(at , a∗t )
                                    
                   E                   = E [bg (at − a∗t )] = 0 (Conformity)
                         ∂a∗t
                       ∂G(at , a∗t )
                                    
                   E                   = E [bg a∗t ] > 0 (Spillovers)
                         ∂a∗t

These results mirror those derived for the discrete choice model in Brock and Durlauf
(2001). They imply that if social utility takes a spillovers form then a social plan-
ner should subsidize consumption, even if individuals are forward looking. If social
utility instead takes a conformity form then social interactions do not generate any
externalities.
  11
     The only assumptions made so far about the coefficients in (9) are that baa , bss , and bxx are
negative (due to the quadratic utility assumption) and that bas is positive. Note that additionally
assuming bs < 0 is not sufficient to determine the sign of Vs∗ (t + i) because bas > 0 may be large.
  12
     Gruber and Koszegi (2001) assume in their analysis of cigarette consumption that addiction
reduces future discounted utility. Under this assumption, myopic consumers necessarily consume
more than forward-looking consumers.




                                                14
II.C     Discussion
The model demonstrates that conformity and spillovers both generate the same linear-
in-means demand equation commonly estimated in empirical studies.13 This means
that researchers and policymakers who identify social interactions can generally draw
only limited conclusions from their analyses.
    For example, take the case of cigarette consumption. Prior research has estimated
an optimal tax of at least one dollar per pack if consumers are hyperbolic discounters
Gruber and Koszegi (2001). Several studies have documented that social interactions
matter for smoking behavior, which raises the possibility that the optimal tax esti-
mated by Gruber and Koszegi needs to be adjusted. However, if the social interactions
of smokers reflect conformity rather than spillovers, then they do not produce a net
externality and therefore do not call for an adjustment to the optimal tax. It also
means they do not affect the overall level of consumption and thus did not contribute
to the rapid increase and subsequent decrease in cigarette consumption during the
latter half of the 20th century.
    In the next section I discuss under what assumptions one can separately identify
conformity and spillovers. However, some statistics of interest, such as price elas-
ticities, can be calculated without knowledge of the form of social interactions. For
example, consider the long-run price elasticity of demand, which gives the percentage
change in quantity demanded in response to a permanent change in price in all pe-
riods. Suppose an individual reaches an expected steady-state level of consumption
a∗ = S ∗ d/ (1 − d), and that she is myopic. Then the long-run price elasticity is equal
to
                            ∂a∗ p              π           p
                                 ∗
                                    =                                               (16)
                            ∂p a      1 − α (1 − d) /d − γ a∗
where p and a∗ are evaluated at the mean price and consumption levels for the sam-
ple.14 Equation (16) holds for both conformity and spillovers specifications.
    One can also compare the strength of social interactions to the strength of ad-
ddiction, without making any assumptions about the form of interactions, by simply
 13
   Boucher and Fortin (2016) derive this same result in a static setting.
 14
   If the individual is forward-looking, then the long-run price elasticity is equal to
        π1 +π2           p
1−α1 (1−d)/d−α2 −γ1 −γ2 a∗ .




                                          15
comparing the demand coefficients γ and α:

                                         γ   bg
                                           =
                                         α   bas

This ratio reveals the strength of social interactions, relative to addiction, regardless
of what form those interactions take. If consumers are forward-looking, one can use
the corresponding metric

                            γ1               bg
                               =
                            α1   bas − (1 − d)2 β(bas + bss )

which accounts for the intertemporal effects of addiction.


III     Identification
There are two identification challenges associated with estimating the two different
social interactions models derived in Section II. First, the researcher must consistently
estimate the demand equation, which requires addressing the “reflection problem”.
Second, she must find a way to distinguish conformity from spillovers, which is nec-
essary in order to determine whether social interactions affect the overall level of
consumption and to draw welfare conclusions.


III.A     Estimating the demand equation
Estimating the demand equation is difficult for two reasons. First, the stock of past
consumption is necessarily correlated with the error term in the presence of serial
correlation. Second, mean group consumption is also correlated with the error term
if unobserved demand shocks are correlated across individuals within the same group
(the “reflection problem”). Prior studies have addressed the first problem by instru-
menting for the stock with lags (and sometimes leads) of determinants of demand,
such as prices or taxes in the case of cigarettes (Becker et al., 1994; Chaloupka, 1991;
Fenn et al., 2001; Sloan et al., 2002), or rainfall in the case of voting (Fujiwara et al.,
2016). The key assumption in those models–as here–is that these instruments must
not affect future outcomes except through the stock. Conveniently, these instruments
can also be used to obtain a consistent estimate of the coefficient on group consump-
tion.

                                            16
       Consider estimating the myopic consumer’s demand for an addictive good:

                          aigt = αSigt + γagt + πpgt + δxigt + igt                          (17)

where Sigt is consumer i’s stock of past consumption at time t; agt is the mean
consumption for reference group g at time t; and pgt and xigt represent price and
individual-level determinants of demand, respectively. Recall that the reference group
is assumed to be “large” in the sense that an individual’s contribution to agt is negli-
gible. The error term can be decomposed into two components: igt = ηg + eigt . The
first component, ηg , represents unobserved (to the econometrician) determinants of
demand that are common to the group and constant over time. The second compo-
nent, eigt , captures unobserved individual-level determinants of demand and measure-
ment error in the dependent variable. Equation (17) is a standard “linear-in-means”
social interactions model with the addition of the term Sigt (Manski, 1993).15
    Ordinary least squares estimates of the endogenous social effect, γ   b, are biased
in the presence of group-wide demand shocks, which necessarily induce a positive
correlation between agt and eigt . Unfortunately, this occurs frequently in empirical
analyses because it is impossible to observe all relevant determinants of demand and
it is likely that at least some of those determinants are common to members of the
same reference group. Employing fixed effects does not solve this problem because
demand shocks may vary over time.
    Fortunately, the dynamics that operate through the addiction channel offer a solu-
tion to this problem. Equation (28) in the appendix shows that individual consump-
tion is related to past determinants of demand through the stock of past consumption.
Becker et al. (1994) note that this in turn implies that lagged determinants of demand
are valid instruments for the stock. This insight extends naturally to addressing the
endogeneity of group consumption because it is necessarily governed by the same
forces that govern individual consumption. If consumers are forward looking then
future determinants of demand are also valid instruments.
    For example, consider estimating (17) using ordinary least squares. If Cov (agt , eigt )
6= 0 then the econometrician will likely overestimate the effect of social interactions,
  15
    For simplicity, equation (17) assumes that the group-level average of the covariates, xgt , do
not affect demand. The identification argument presented in this section still holds if one adds
“contextual effects” like xgt to the demand equation. Note that if contextual effects are in fact
absent, then these variables could be used as instruments to achieve identification.



                                               17
γ, because she will incorrectly attribute changes in individual consumption to changes
in group consumption when in fact they are due to the unobserved error term, eigt .
By contrast, instrumenting for agt with lags of, for example, price identifies γ using
only the variation in agt that is explained by past prices.
    This example demonstrates the key identifying assumption relied upon by this
approach: the lagged instrument must be uncorrelated with unobserved contempora-
neous determinants of demand. Whether this assumption is reasonable will depend on
the context. Many studies of rational addiction employ lagged prices as instruments,
although Auld and Grootendorst (2004) argue that these instruments are unlikely to
be valid when applied to aggregate data. In their study of voting behavior, Fujiwara
et al. (2016) make a strong case that lagged rainfall likely affects contemporaneous
voting only through an addiction channel.
    Consistently estimating the parameters of (17) requires at least two instruments
because there are two endogenous variables present (agt and Sigt ). Moreover, although
group-level observables such as lagged prices might be valid instruments for either agt
or Sigt individually, when instrumenting for both these variables the researcher must
employ at least one instrument that varies at the individual level in order to satisfy the
rank condition for instrumental variables estimation.16 This is easily seen by noting
that an individual’s steady-state level of consumption is equal to a∗ = S ∗ d/ (1 − d).
In expectation, this relationship must hold at the group level as well. Thus, if the
researcher includes only group-level instruments, then the projections of the first stage
onto these two endogenous variables will be linearly dependent because they differ in
expectation only by the factor d/ (1 − d).17
    I perform a simulation exercise to demonstrate the validity of my proposed instru-
mental variables approach. Specifically, I simulate 10 periods of data for 100 different
reference groups, each containing 100 individuals, and then estimate demand equa-
tion (17) using both ordinary least squares (OLS) and instrumental variables (IV)
estimators.18 Table 1 reports the results of this exercise. Column (1) lists the true
values of the demand coefficients. Column (2) shows that the OLS estimates differ
  16
     Fujiwara et al. (2016) encounter this challenge in their analysis of voting behavior. They have
one group-level instrument, and as a result they cannot separately identify addiction and social
interactions in their setting.
  17
     I am grateful to an anonymous referee for pointing this out.
  18
     The corresponding code is publicly available on the author’s website. The data are generated
using the same parameters as Figure 1. See Appendix B for additional details.



                                                18
significantly from these true values for three of the four coefficients. The OLS esti-
mate of γ (0.713) is about 15 percent larger than the true value (0.625), illustrating
its upward bias. Columns (3), (4), and (5) report results from three different IV
specifications that instrument for Sigt and agt using lags of xigt and pgt . Unlike the
OLS estimates, none of the IV estimates is statistically distinguishable from the true
value. Table 1 also shows that the first-stage F statistic grows with the number of
lagged instruments, and always exceeds 10, the typical threshold recommended for
avoiding weak instrument bias (Stock et al., 2002).
    In general the identification strategy proposed here does not require the good in
question to be addictive; it can also apply to other settings where dynamics arise for
a different reason. For example, suppose that the utility of consumption depends not
on contemporaneous group consumption, but instead on group consumption in the
previous period. In this case, demand determinants will have a lagged, indirect effect
on current consumption in addition to the standard direct, contemporaneous effect.
Lagged determinants of demand will then be valid instruments for identifying social
interactions.
    Finally, I pause to note that the framework presented here abstracts from im-
portant issues regarding network formation. In many settings, it is challenging even
just to define the proper reference group. For example, one’s decision to smoke can
be influenced by friends, family, coworkers, and even television personalities, and
may differ drastically across individuals. Moreover, individuals may choose their ref-
erence groups in a way that is correlated with the outcome of interest, which will
often necessitate further modeling by the researcher (Badev, 2017; Boucher, 2016;
Goldsmith-Pinkham and Imbens, 2013; Hsieh and Lee, 2016; Hsieh and Lin, 2017).


III.B     Identifying the form of social interactions
The identification strategy outlined above identifies the presence of social interactions
but it sheds no light on the form of those interactions. As shown in Section II,
preferences for conformity can generate the linear-in-means demand model:

          aigt = αSigt + γagt + πpgt + δxigt + igt
                    bas             bg             −λ             bax
               =          Sigt +          agt +          pgt +          xigt + igt   (18)
                 bg + baa        bg + baa       bg + baa       bg + baa



                                             19
But, preferences for spillovers can also generate this model:

                    aigt = α0 Sigt + γ 0 agt + π 0 pgt + δ 0 xigt + 0igt
                           bas           bg         −λ          bax
                         =     Sigt +       agt +       pgt +        xigt + 0igt    (19)
                           baa         baa          baa          baa

    Therefore, it is clear that successfully estimating the coefficient on agt is not suf-
ficient to distinguish between conformity and spillovers. How can the researcher
overcome this obstacle? Figure 1 suggests that identifying a source of variation in
the strength of social interactions is one possible approach. Under conformity, con-
sumption in groups with strong social interactions should be less dispersed than con-
sumption in groups with weak social interactions. Under spillovers, by contrast, the
consumption in groups with strong social interactions should be higher rather than
less dispersed.
    This line of inquiry motivates the following informal test. Notice that the param-
eter governing the strength of social interactions, bg , is present in each coefficient’s
denominator in the case of conformity (equation 18), but only affects the coefficient
on group consumption, agt , in the case of spillovers (equation 19). Thus, conformity
generates the testable hypothesis that, all else equal, groups with stronger social inter-
actions should have smaller demand coefficients for all demand determinants except
group consumption. Under spillovers, changes in the strength of social interactions
should only affect the coefficient on group consumption.
    For example, suppose one estimates demand separately for two different groups, A
and B, yielding estimates (b αA , γ
                                  bA ) and (b
                                            αB , γ
                                                 bB ). Suppose further that the structural
parameters governing addiction, baa and bas , do not differ across the two groups.
   bA > γ
If γ      bB then we can conclude that social interactions are stronger in group A.
Furthermore, α bA < α bB indicates conformity while α   bA = α
                                                             bB indicates spillovers. (The
       bA > α
result α     bB indicates model misspecification.)
    This example highlights the key assumption required for this empirical approach
to properly distinguish between conformity and spillovers: groups that differ in the
strength of their social interactions must not differ with respect to at least two other
structural parameters. The plausibility of this assumption depends on the application
and structural parameters in question. Comparing estimates of (b      α, γ
                                                                         b) across groups
may be quite reasonable when estimating, for example, cigarette consumption. It is
plausible that addictive preferences for cigarettes do not vary systematically across

                                                 20
these groups because many argue that they are primarily a biological phenomenon
(Dackis and O’Brien, 2005; Nestler and Aghajanian, 1997). Put differently, the struc-
tural parameters baa and bas in the model are unlikely to be correlated with an indi-
vidual’s group g.
    In practice, this assumption is made frequently in studies of social interactions
although it is rarely stated explicitly. Notice that the coefficient γ reflects the strength
of social interactions, bg , relative to preferences for the addictive good, baa . Thus,
one cannot conclude that groups with larger γ’s have stronger social interactions
without making an assumption about heterogeneity in the preference parameter baa .
Nevertheless, it is common practice to compare the strength of social interactions
across groups (e.g., Gaviria and Raphael (2001); Nakajima (2007); Sorensen (2006)).
    Boucher and Fortin (2016) propose an alternative identification strategy that com-
pares demand estimates for “isolated” groups of size one to non-isolated groups. Be-
cause the coefficients for the isolated groups are not a function of social interactions,
the comparison allows the researcher to infer the source of the interactions. This ap-
proach requires a similar identifying assumption as above: the structural parameters
of demand must be sufficiently similar between isolated and non-isolated groups.


IV      Conclusion
Addiction and social interactions affect the consumption of drugs like cigarettes and
alcohol as well as many other common activities such as exercising and eating. The
strengths of addiction and social interactions depend on the particular good in ques-
tion and must be determined empirically. This can be accomplished using the general
framework of demand developed in this paper. I develop a new method that harnesses
the consumption dynamics generated by addiction to identify the presence of social
interactions, a phenomenon that is devilishly difficult to detect. My proposed method
circumvents Manski’s reflection problem and provides consistent estimates in a gen-
eral setting.
    I also show that two common forms of social interactions, conformity and spillovers,
have very different effects on demand and welfare but cannot separately be identified
using standard instrumental variable techniques. This problem can be resolved if
preferences are sufficiently homogenous across different reference groups. This novel
solution does not require addiction to be present and thus can be applied to a va-

                                            21
riety of different social interactions models. Although it requires making additional
assumptions about consumers, I have argued that these are no stronger than the
assumptions frequently made in other studies of social interactions.
    Finally, my model demonstrates the value of moving beyond the mere identifi-
cation of social interactions to an investigation of their form. This provides a more
detailed understanding of their effects and allows researchers to connect their empir-
ical findings to important policy decisions.




                                         22
Tables

               Table 1: OLS and IV estimates of the myopic demand model

                         (1)              (2)              (3)             (4)              (5)

 α                     0.250           0.196**            0.250           0.255             0.258
                                       (0.004)          (0.013)          (0.011)          (0.011)
 γ                     0.625           0.713**            0.629           0.615             0.601
                                       (0.006)          (0.024)          (0.021)          (0.021)
 π                     -1.250         -0.961**           -1.240           -1.288           -1.337
                                       (0.025)          (0.084)          (0.075)          (0.072)
 δ                     2.500            2.505            2.507             2.517            2.519
                                       (0.015)          (0.014)          (0.016)          (0.016)
 N                                     110,000          100,000          90,000           80,000
 Estimator                              OLS               IV               IV               IV
 Lags                                                      1                2                3
 First-stage F                                           16.7             17.5             34.1

Notes: This table reports ordinary least squares (OLS) and two-stage least squares (IV) estimates
of equation (17) using simulated data. Standard errors, reported in parentheses, are clustered at
the reference group level. Column (1) reports the true value of the coefficient. Column (2) reports
OLS estimates. Columns (3), (4), and (5) instrument for S and a with one, two, and three lags of
x and p, respectively. A */** in columns (2)-(5) indicates that the estimated coefficient differs
significantly from the true value at the 5/1% level. The first-stage F statistic is robust to arbitrary
heteroskedasticity and autocorrelation. See Appendix B for additional details.




                                                  23
A       Mathematical appendix
Let private utility take the quadratic form (5). Then maximizing (2) with respect to
ct and subject to the budget constraint (3) yields

                                −λ + uc + uac at + usc St + uxc xt
                         ct =
                                              ucc

where λ is the marginal utility of wealth. Plugging this result into (5) allows utility
(4) to be expressed as

                     1
          V ∗ (t) = −   baa a2t + bss St2 + bxx x2t + bas at St + bax at xt + bsx St xt
                                                   
                                                                                          (20)
                     2
                + ba at + bs St + bx xt + bk + G (at , Et [at ])

where

                                uaa ucc − u2ac
                        baa =                   >0
                                      ucc
                                uss ucc − u2sc
                        bss =                  >0
                                     ucc
                                uxx ucc − u2xc
                        bxx =                   >0
                                      ucc
                                uac usc + uas ucc
                        bas =                     > 0 if uac usc ≥ 0
                                        ucc
                                uac uxc + uax ucc
                        bax =                     Q0
                                        ucc
                                usc uxc + usx ucc
                        bsx =                     Q0
                                        ucc
                                uc uac + ua ucc
                         ba =                   Q0
                                      ucc
                                uc usc + us ucc
                         bs =                   Q0
                                      ucc
                                uac uxc + uax ucc
                         bx =                     Q0
                                        ucc
                                u2c − λ2
                         bk =             Q0
                                   2ucc

(Recall that the parameters uaa , uss , uxx and ucc are all positive due to the assumed
concavity of U .)



                                              24
                  ∞
                      β t−1 V ∗ (t) with respect to at implies the following first-order con-
                  P
   Maximizing
                  t=1
dition:

                                                                 ∂St+i
           0 = Va∗ (t) − λpt + Σ∞    i ∗
                                i=1 β Vs (t + i)
                                                                  ∂at
                                                                                      ∂St+i
             = Va∗ (t) − λpt + β (1 − d) Vs∗ (t + 1) + Σ∞    i ∗
                                                        i=2 β Vs (t + i)
                                                                                       ∂at
                  ∂V ∗ (t)                     ∂V ∗ (t)
where Va∗ (t) =    ∂at
                             and Vs∗ (t) =      ∂St
                                                        .   The corresponding first-order condition for
at+1 is

                                                         ∂St+1+i
          0 = Va∗ (t + 1) − λpt+1 + Σ∞    i ∗
                                     i=1 β Vs (t + 1 + i)
                                                          ∂at+1
                                                        ∂St+i
            = βVa∗ (t + 1) − λβpt+1 + Σ∞    i ∗
                                       i=2 β Vs (t + i)
                                                        ∂at+1
                                                        ∂St+i
            = βVa∗ (t + 1) − λβpt+1 + Σ∞    i ∗
                                       i=2 β Vs (t + i)       / (1 − d)
                                                         ∂at
                                                                                       ∂St+i
            = β (1 − d) Va∗ (t + 1) − λβ (1 − d) pt+1 + Σ∞    i ∗
                                                         i=2 β Vs (t + i)
                                                                                        ∂at
                    ∂St+i        ∂St+i
where I use that    ∂at+1
                             =    ∂at
                                       / (1   − d). Equating the first-order conditions for at and
at+1 yields

    Va∗ (t) − λpt + β (1 − d) Vs∗ (t + 1) = β (1 − d) Va∗ (t + 1) − λβ (1 − d) pt+1               (21)

Plugging in the quadratic utility form (20) and then the social utility specification
(6) or (7) yields equations (12) and (14) in the main text. The coefficients on the
variables of these two equations are shown in Appendix Table A.1.




                                                            25
                        Table A.1: Demand equation coefficients

 Coefficient   Conformity                                  Spillovers
               bas −(1−d)2 β(bas +bss )                    bas −(1−d)2 β(bas +bss )
 α1 (α10 )               ∆
                                        Q0                          ∆0
                           bg +baa +bas
 α2 (α20 )     (1 − d) β         ∆
                                        >0                 (1 − d) β baa∆+b0 as > 0
               bg                                          bg
 γ1 (γ10 )     ∆
                   >0                                      ∆0
                                                                >0
 γ2 (γ20 )     − (1 − d) β b∆g < 0                         − (1 − d) β ∆  bg
                                                                            0 < 0

 π1 (π10 )     −∆ λ
                     <0                                        λ
                                                           − ∆0 < 0
 π2 (π20 )     (1 − d) β ∆ λ
                               >0                          (1 − d) β ∆λ0 > 0
 δ1 (δ10 )     bax
                ∆
                    Q0                                     bax
                                                            ∆0
                                                                 Q0
 δ2 (δ20 )     (1 − d) β bsx −b∆
                                 ax
                                     Q0                    (1 − d) β bsx∆−b0 ax Q 0
               ba −(1−d)β(ba −bs )                         ba −(1−d)β(ba −bs )
 k (k 0 )              ∆
                                    Q0                             ∆0
                                                                               Q0
 ∆ (∆0 )       bg + baa + (1 − d)2 β (bas    + bss ) > 0                    2
                                                           baa + (1 − d) β (bas + bss )   >0



    Consumption is negatively related to the current price (π1 < 0) but positively
related to future price (π2 > 0). This positive relationship may seem surprising
since past and future consumption are complementary with present consumption.
However, as explained in Becker et al. (1990), the demand equation (12) holds future
consumption constant, eliminating the mechanism through which past and future
prices affect present consumption. For example, if the future price increases but
future consumption is unchanged, then some other force must be offsetting the price
effect by raising the future stock. This in turn means current consumption must
be higher because the future stock is directly related to both the current stock and
current consumption.
    A well-known result from Becker and Murphy (1988) is that adjacent complemen-
tarity, as measured by the coefficient α2 , increases the more past consumption raises
the marginal utility of current consumption and decreases the more quickly the harm
from past consumption increases. In other words, forward-looking individuals tem-
per their consumption of addictive goods because they anticipate the negative future
consequences of their consumption. Social interactions affect adjacent complemen-
tarity, but only if they take the form of conformity. Even in that case, the effect is




                                               26
ambiguous:

                        ∂α2             (1 − d)2 β (bas + bss ) − bas
                            = (1 − d) β                               Q0
                        ∂bg                         ∆2
                 where ∆ = bg + baa + (1 − d)2 β (bas + bss ) > 0

The magnitude depends on the strength of the reinforcing nature of addictive con-
sumption (bas ) relative to the magnitude of the accumulating harm from past con-
sumption (bss ).
   The coefficient on current group consumption, γ1 , is positive. This implies that
current individual and current group consumption are positively related, as expected.
Current individual consumption is negatively related to future group consumption for
the same reason it is positively related to future price, which was discussed above.
   The long-run effect of a change in price in the forward-looking model is equal to

                         ∂a∗               π1 + π2
                             =
                         ∂p    1 − α1 (1 − d) /d − α2 − γ1 − γ2

Steady-state stability requires that

                             α1 (1 − d) /d + α2 + γ1 + γ2 < 1

Plugging in the relevant values for these coefficients yields the stability conditions
presented in the main text.
   Demand equation (12) from the main text can be equivalently written as

                      1 + α2 (1 − d)        (1 + α1 ) (1 − d)        1−d
             St+2 −                  St+1 +                   St = −     ht+2    (22)
                           α2                     α2                  α2

where
               ht+2 = γ1 at + γ2 at+1 + π1 pt + π2 pt+1 + δ1 xt + δ2 xt+1 + k

Equation (22) is a second-order linear difference equation that can be solved using
standard methods (Sargent, 1987). The solution provided below applies to both
conformity and spillovers because these models both generate demand equations of
the form (22). Rewrite (22) using lag operator notation:

                                1 − β1 L + β2 L2 St = −β3 ht
                                                
                                                                                 (23)

                                            27
where

                                             1 + α2 (1 − d)
                                        β1 =
                                                   α2
                                             (1 + α1 ) (1 − d)
                                        β2 =
                                                    α2
                                             1−d
                                        β3 =
                                               α2

       Factorizing the lag polynomial yields

                              1 − β1 L + β2 L2 = (1 − φ1 L) (1 − φ2 L)
                                              


where

                                                        2β2
                                      φ1 =          q
                                             β1 −       (β1 )2 − 4β2
                                                        2β2
                                      φ2 =          q
                                             β1 +       (β1 )2 − 4β2

       The general solution to (23) is

                                        −β3
                         St =                         ht + c1 (φ1 )t + c2 (φ2 )t                 (24)
                                (1 − φ1 L) (1 − φ2 L)

where c1 and c2 are constants. I assume that φ1 > 1 and φ2 < 1 and set c1 = 0 in
order to ensure stability.19 φ1 6= φ2 implies the identity
                                                                                     
                               1                1                    φ1       φ2
                                           =                              −
                     (1 − φ1 L) (1 − φ2 L)   φ1 − φ2              1 − φ1 L 1 − φ2 L

which is used to rewrite (24) as
                                                                           
                               −β3 φ1                 β3 φ2
              St =                            +                                 ht + c2 (φ2 )t
                         (φ1 − φ2 ) (1 − φ1 L) (φ1 − φ2 ) (1 − φ2 L)
  19
    Most empirical analyses of addiction models have found “saddlepoint dynamics” like this (Fergu-
son, 2000). The conditions needed for steady-state stability in terms of demand equation parameters
are given in the main text.




                                                    28
                          ∞
                          X                                                 ∞
                                                                            X
Using that     1
                 x
             1−φL t
                      =          j
                                φ xt−j (if φ < 1) and          1
                                                                 x
                                                             1−φL t
                                                                         = − φ−j xt+j (if φ > 1) allows
                          j=0                                                 j=1
one to write the solution for St as a function of infinite sums:
                  ∞                        ∞
          β3 φ1 X         −j       β3 φ2 X
    St =             (φ1 ) ht+j +             (φ2 )j ht−j + c2 (φ2 )t                                        (25)
         φ1 − φ2 j=1              φ1 − φ2 j=0
               ∞
               X                            t−1
                                            X                                 ∞
                                                                              X
        = K1         (φ1 )−j ht+j + K2             (φ2 )j ht−j + K2 (φ2 )t          (φ2 )j h−j + c2 (φ2 )t
               j=1                          j=0                               j=0


where

                                                        φ1
                                             K 1 = β3
                                                     φ1 − φ2
                                                        φ2
                                             K2 = β3
                                                     φ1 − φ2

   Solving for the initial condition S0 yields
                                     ∞
                                     X                           ∞
                                                                 X
                                                  −j
                          S 0 = K1         (φ1 )       hj + K2         (φ2 )j h−j + c2                       (26)
                                     j=1                         j=0


Solving (26) for c2 and plugging the result into equation (25) yields, after some alge-
bra, the particular solution to (23):

             ∞                                                                       ∞
                                       t−1
                                                                                                         !
             X                         X                                             X
   St = K1         (φ1 )−j ht+j + K2             (φ2 )j ht−j + (φ2 )t      S0 − K1          (φ1 )−j hj       (27)
             j=1                           j=0                                        j=1


The first term in equation (27) is a weighted average of future determinants of de-
mand (pt+j and xt+j ) and future group consumption. The second term is a weighted
average of past determinants of demand and past group consumption. The third
term represents the effect of an individual’s initial condition and fades to zero over
time. The parameters φ1 and φ2 dictate the sign and magnitude of the effect of a
shock to past or future consumption on current consumption. Reindexing (27) so that
the initial condition corresponds to S1 rather than S0 yields the particular solution
corresponding to the model in the text.
   The myopic demand equation (10) is a first-order difference equation in St and



                                                        29
can be solved using similar methods as above:

                                              t−2
                                              X
                              St = (1 − d)          (φ)j ht−j + (φ)t−1 S1                       (28)
                                              j=0


where ht = πpt−1 + δxt−1 + γat−1 ; S1 is the initial stock of past consumption; and
φ = (1 − d) (1 + α) < 1.20 The first term on the right-hand side of equation (28)
is a weighted average of past determinants of demand and past group consumption.
This provides the theoretical justification for using lagged determinants of demand
as instruments for an individual’s stock. The second term represents the effect of an
individual’s initial condition and fades to zero over time. The parameter φ dictates
the magnitude of the effect of shocks to past consumption on current consumption.
These shocks can be changes to any factor affecting the demand for the addictive
good, e.g., prices.


B        Simulations appendix
Figure 1 displays the range of consumption for one-hundred individuals from three
different simulations. The data for all simulations are generated using equation (27).
The parameters are set to arbitrary values:

                                          β = 0.75
                                          d = 0.5
                                          λ=1
                                         ba = 15
                                         bs = 10
                                        bas = 0.2
                                        baa = bss = bxx = 0.3
                                        bax = 2
                                        bsx = 4
 20
      If the stability condition is met (see section II) then one can easily show that φ < 1.




                                                    30
Prices pt and covariates xit are drawn i.i.d. N (10, 1) and N (0, 1), respectively. The
initial stock of past consumption, Si0 , was drawn with a uniform distribution in [0, 10].
Data for Figure 1a, which does not include social interactions, are generated directly
by equation (27) by setting the parameter bg = 0. Data for Figures 1b and 1c, which
include social interactions, require a multi-step procedure:

  1. Generate individual consumption data with equation (27) assuming no social
     interactions (i.e., bg = 0).
                                       0
  2. Calculate mean consumption at for each period t.

  3. Generate individual consumption data with equation (27) assuming social inter-
                                                 0
     actions and using the mean consumption at calculated in step 2. I set bg = 0.5
     for the conformity specification and bg = 0.05 for the spillovers specification.
                                       00
  4. Calculate mean consumption at for each period t using the consumption data
                                                      0    00
     generated in step 3. Repeat steps 2-4 until at − at < ε where ε > 0 is a
     tolerance parameter set arbitrarily close to 0. I set the tolerance parameter ε
     to 1 × 10−6 for my simulations.

   The myopic demand regressions reported in Table 1 employ data generated using
the method and parameter values outlined above, but with two minor modifications.
First, β was set equal to 0 and the data generating process was based on equation
(28) rather than equation (27). Second, I included an additional covariate in the data
generating process that is generated in the same way as xit , but is unobservable to
the econometrician.




                                            31
References
Akerlof, G. A. (1991, May). Procrastination and obedience. American Economic
  Review 81 (2), 1–19.

Alessie, R. and A. Kapteyn (1991). Habit formation, interdependent preferences
  and demographic effects in the almost ideal demand system. The Economic Jour-
  nal 101 (406), 404–419.

Auld, M. C. and P. Grootendorst (2004, November). An empirical analysis of milk
 addiction. Journal of Health Economics 23 (6), 1117–1133.

Badev, A. (2017). Discrete games in endogenous networks: Equilibria and policy.
  Working Paper .

Becker, G. S. (1992). Habits, addictions, and traditions. Kyklos 45 (3), 327–345.

Becker, G. S., M. Grossman, and K. M. Murphy (1990, April). An empirical analysis
  of cigarette addiction. NBER Working Paper Series (3322).

Becker, G. S., M. Grossman, and K. M. Murphy (1994, June). An empirical analysis
  of cigarette addiction. American Economic Review 84 (3), 396–418.

Becker, G. S. and K. M. Murphy (1988, August). A theory of rational addiction.
  Journal of Political Economy 96 (4), 675–700.

Bernheim, B. D. (1994, October). A theory of conformity. Journal of Political Econ-
  omy 102 (5), 841–77.

Binder, M. and M. H. Pesaran (2001, January). Life-cycle consumption under social
  interactions. Journal of Economic Dynamics and Control 25 (1-2), 35–83.

Bisin, A., U. Horst, and O. Ozgur (2006, March). Rational expectations equilibria of
  economies with local interactions. Journal of Economic Theory 127 (1), 74–116.

Blanchflower, D. G., B. Van Landeghem, and A. J. Oswald (2009). Imitative obesity
  and relative utility. Journal of the European Economic Association 7 (2-3), 528–538.

Blume, L. E., W. A. Brock, S. N. Durlauf, and Y. M. Ioannides (2010, October).
  Identification of social interactions. Economics Series 260, Institute for Advanced
  Studies.

                                         32
Boucher, V. (2016). Conformism and self-selection in social networks. Journal of
  Public Economics 136, 30–44.

Boucher, V. and B. Fortin (2016). Some challenges in the empirics of the effects of
  networks. Oxford Handbook of of the Economics of Networks, 277–302.

Brock, W. A. and S. N. Durlauf (2001). Discrete choice with social interactions. The
  Review of Economic Studies 68 (2), 235–260.

Brock, W. A. and S. N. Durlauf (2010). Adoption curves and social interactions.
  Journal of the European Economic Association 8 (1), 232–251.

Carrell, S. E., R. L. Fullerton, and J. E. West (2009). Does your cohort matter?
  measuring peer effects in college achievement. Journal of Labor Economics 27 (3),
  439–464.

Carrell, S. E., B. I. Sacerdote, and J. E. West (2013). From natural variation to
  optimal policy? the importance of endogenous peer group formation. Economet-
  rica 81 (3), 855–882.

Case, A. C. and L. F. Katz (1991, May). The company you keep: The effects of
  family and neighborhood on disadvantaged youths. NBER Working Papers 3705,
  National Bureau of Economic Research, Inc.

Chaloupka, F. (1991, August). Rational addictive behavior and cigarette smoking.
 Journal of Political Economy 99 (4), 722–42.

Christakis, N. and J. Fowler (2007). The spread of obesity in a large social network
 over 32 years. New England Journal of Medicine 357 (4), 370–379.

Crawford, I. (2010). Habits revealed. The Review of Economic Studies 77 (4), 1382–
  1402.

Dackis, C. and C. O’Brien (2005). Neurobiology of addiction: treatment and public
 policy ramifications. Nature Neuroscience 8 (11), 1431–1436.

De Giorgi, G. and M. Pellizzari (2014). Understanding social interactions: Evidence
  from the classroom. The Economic Journal 124 (579), 917–953.



                                        33
Demuynck, T. and E. Verriest (2013). I’ll never forget my first cigarette: A revealed
  preference analysis of the habits as durables model. International Economic Re-
  view 54 (2), 717–738.

Fenn, A. J., F. Antonovitz, and J. R. Schroeter (2001). Cigarettes and addiction
  information: new evidence in support of the rational addiction model. Economics
  Letters 72 (1), 39–45.

Ferguson, B. S. (2000). Interpreting the rational addiction model. Health Eco-
  nomics 9 (7), 587–598.

Fletcher, J. M. (2010). Social interactions and smoking: evidence using multiple
  student cohorts, instrumental variables, and school fixed effects. Health Eco-
  nomics 19 (4), 466–484.

Fortin, B. and M. Yazbeck (2015). Peer effects, fast food consumption and adolescent
  weight gain. Journal of health economics 42, 125–138.

Fujiwara, T., K. Meng, and T. Vogl (2016). Habit formation in voting: Evidence from
  rainy elections. American Economic Journal: Applied Economics 8 (4), 160–188.

Gaviria, A. and S. Raphael (2001, May). School-based peer effects and juvenile
 behavior. The Review of Economics and Statistics 83 (2), 257–268.

Glaeser, E. L., B. Sacerdote, and J. A. Scheinkman (1996, May). Crime and social
  interactions. The Quarterly Journal of Economics 111 (2), 507–48.

Glaeser, E. L. and J. A. Scheinkman (2002). Non-market interactions. In Advances in
  Economics and Econometrics: Theory and Applications, Eighth World Congress.
  Cambridge University Press.

Goldsmith-Pinkham, P. and G. W. Imbens (2013). Social networks and the identifi-
 cation of peer effects. Journal of Business & Economic Statistics 31 (3), 253–264.

Graham, B. (2008). Identifying social interactions through conditional variance re-
  strictions. Econometrica 76 (3), 643.

Gruber, J. and B. Koszegi (2001). Is Addiction “Rational”? Theory and Evidence.
  Quarterly Journal of Economics 116 (4), 1261.


                                         34
Hsieh, C.-S. and L. F. Lee (2016). A social interactions model with endogenous
  friendship formation and selectivity. Journal of Applied Econometrics 31 (2), 301–
  319.

Hsieh, C.-S. and X. Lin (2017). Gender and racial peer effects with endogenous
  network formation. Regional Science and Urban Economics 67, 135–147.

Krauth, B. V. (2007, July). Peer and selection effects on youth smoking in california.
  Journal of Business & Economic Statistics 25, 288–298.

Kremer, M. and D. Levy (2008). Peer effects and alcohol use among college students.
  The Journal of Economic Perspectives 22 (3), 189–206.

Lavy, V., M. D. Paserman, and A. Schlosser (2012). Inside the black box of ability
  peer effects: Evidence from variation in the proportion of low achievers in the
  classroom. The Economic Journal 122 (559), 208–237.

Manski, C. F. (1993, July). Identification of endogenous social effects: The reflection
 problem. Review of Economic Studies 60 (3), 531–42.

Manski, C. F. (2000, Summer). Economic analysis of social interactions. Journal of
 Economic Perspectives 14 (3), 115–136.

Nakajima, R. (2007, 07). Measuring peer effects on youth smoking behaviour. Review
  of Economic Studies 74 (3), 897–935.

Nestler, E. J. and G. K. Aghajanian (1997). Molecular and cellular basis of addiction.
  Science 278 (5335), 58–63.

Orphanides, A. and D. Zervos (1995, August). Rational addiction with learning and
  regret. Journal of Political Economy 103 (4), 739–58.

Powell, L. M., J. A. Tauras, and H. Ross (2005, September). The importance of peer
  effects, cigarette prices and tobacco control policies for youth smoking behavior.
  Journal of Health Economics 24 (5), 950–968.

Sacerdote, B. (2001). Peer effects with random assignment: Results for dartmouth
  roommates*. Quarterly Journal of Economics 116 (2), 681–704.

Sargent, T. (1987). Macroeconomic theory, Volume 2. Academic Press.

                                          35
Sloan, F. A., V. K. Smith, and D. H. Taylor (2002). Information, addiction, and bad
  choices: lessons from a century of cigarettes. Economics Letters 77 (2), 147–155.

Sorensen, A. T. (2006). Social learning and health plan choice. The RAND Journal
  of Economics 37 (4), 929–945.

Stock, J. H., J. H. Wright, and M. Yogo (2002). A survey of weak instruments
  and weak identification in generalized method of moments. Journal of Business &
  Economic Statistics 20 (4).

Winston, G. C. (1980, December). Addiction and backsliding : A theory of compulsive
 consumption. Journal of Economic Behavior & Organization 1 (4), 295–324.

Woittiez, I. and A. Kapteyn (1998). Social interactions and habit formation in a
 model of female labour supply. Journal of public Economics 70 (2), 185–205.

Zanella, G. (2007). Discrete choice with social interactions and endogenous member-
  ships. Journal of the European Economic Association 5 (1), 122–153.

Zimmerman, D. J. (2003). Peer effects in academic outcomes: Evidence from a natural
  experiment. Review of Economics and Statistics 85 (1), 9–23.




                                        36
